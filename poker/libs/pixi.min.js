/*!
 * pixi.js - v4.7.0
 * Compiled Wed, 17 Jan 2018 20:16:59 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
(function(n){if(typeof exports=="object"&&typeof module!="undefined")module.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var t;t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this;t.PIXI=n()}})(function(){var n;return function t(n,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!n[f]){if(h=typeof require=="function"&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};n[f][0].call(s.exports,function(t){var i=n[f][1][t];return u(i?i:t)},s,s.exports,t,n,i,r)}return i[f].exports}for(var e=typeof require=="function"&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(n,t,i){"use strict";"use restrict";function f(n){var t=32;return n&=-n,n&&t--,n&65535&&(t-=16),n&16711935&&(t-=8),n&252645135&&(t-=4),n&858993459&&(t-=2),n&1431655765&&(t-=1),t}var u=32,r;i.INT_BITS=u;i.INT_MAX=2147483647;i.INT_MIN=-1<<u-1;i.sign=function(n){return(n>0)-(n<0)};i.abs=function(n){var t=n>>u-1;return(n^t)-t};i.min=function(n,t){return t^(n^t)&-(n<t)};i.max=function(n,t){return n^(n^t)&-(n<t)};i.isPow2=function(n){return!(n&n-1)&&!!n};i.log2=function(n){var i,t;return i=(n>65535)<<4,n>>>=i,t=(n>255)<<3,n>>>=t,i|=t,t=(n>15)<<2,n>>>=t,i|=t,t=(n>3)<<1,n>>>=t,i|=t,i|n>>1};i.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0};i.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};i.countTrailingZeros=f;i.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1};i.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)};i.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};r=new Array(256),function(n){for(var t=0;t<256;++t){var i=t,r=t,u=7;for(i>>>=1;i;i>>>=1)r<<=1,r|=i&1,--u;n[t]=r<<u&255}}(r);i.reverse=function(n){return r[n&255]<<24|r[n>>>8&255]<<16|r[n>>>16&255]<<8|r[n>>>24&255]};i.interleave2=function(n,t){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1};i.deinterleave2=function(n,t){return n=n>>>t&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16};i.interleave3=function(n,t,i){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,n|=t<<1,i&=1023,i=(i|i<<16)&4278190335,i=(i|i<<8)&251719695,i=(i|i<<4)&3272356035,i=(i|i<<2)&1227133513,n|i<<2};i.deinterleave3=function(n,t){return n=n>>>t&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22};i.nextCombination=function(n){var t=n|n-1;return t+1|(~t&-~t)-1>>>f(n)+1}},{}],2:[function(n,t){"use strict";function s(n,t,i){var r,u,l,a,e,o,s,h;i=i||2;var p=t&&t.length,w=p?t[0]*i:n.length,c=v(n,0,w,i,!0),y=[];if(!c)return y;if(p&&(c=nt(n,t,c,i)),n.length>80*i){for(r=l=n[0],u=a=n[1],h=i;h<w;h+=i)e=n[h],o=n[h+1],e<r&&(r=e),o<u&&(u=o),e>l&&(l=e),o>a&&(a=o);s=Math.max(l-r,a-u);s=s!==0?1/s:0}return f(c,y,i,r,u,s),y}function v(n,t,i,u,f){var e,s;if(f===a(n,t,i,u)>0)for(e=t;e<i;e+=u)s=w(e,n[e],n[e+1],s);else for(e=i-u;e>=t;e-=u)s=w(e,n[e],n[e+1],s);return s&&r(s,s.next)&&(o(s),s=s.next),s}function u(n,t){if(!n)return n;t||(t=n);var u=n,f;do if(f=!1,!u.steiner&&(r(u,u.next)||i(u.prev,u,u.next)===0)){if(o(u),u=t=u.prev,u===u.next)break;f=!0}else u=u.next;while(f||u!==t);return t}function f(n,t,i,r,e,s,h){if(n){!h&&s&&ut(n,r,e,s);for(var l=n,a,c;n.prev!==n.next;){if(a=n.prev,c=n.next,s?k(n,r,e,s):b(n)){t.push(a.i/i);t.push(n.i/i);t.push(c.i/i);o(n);n=c.next;l=c.next;continue}if(n=c,n===l){h?h===1?(n=d(n,t,i),f(n,t,i,r,e,s,2)):h===2&&g(n,t,i,r,e,s):f(u(n),t,i,r,e,s,1);break}}}}function b(n){var r=n.prev,u=n,f=n.next,t;if(i(r,u,f)>=0)return!1;for(t=n.next.next;t!==n.prev;){if(h(r.x,r.y,u.x,u.y,f.x,f.y,t.x,t.y)&&i(t.prev,t,t.next)>=0)return!1;t=t.next}return!0}function k(n,t,r,u){var o=n.prev,s=n,e=n.next;if(i(o,s,e)>=0)return!1;for(var l=o.x<s.x?o.x<e.x?o.x:e.x:s.x<e.x?s.x:e.x,a=o.y<s.y?o.y<e.y?o.y:e.y:s.y<e.y?s.y:e.y,v=o.x>s.x?o.x>e.x?o.x:e.x:s.x>e.x?s.x:e.x,y=o.y>s.y?o.y>e.y?o.y:e.y:s.y>e.y?s.y:e.y,p=c(l,a,t,r,u),w=c(v,y,t,r,u),f=n.nextZ;f&&f.z<=w;){if(f!==n.prev&&f!==n.next&&h(o.x,o.y,s.x,s.y,e.x,e.y,f.x,f.y)&&i(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=n.prevZ;f&&f.z>=p;){if(f!==n.prev&&f!==n.next&&h(o.x,o.y,s.x,s.y,e.x,e.y,f.x,f.y)&&i(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function d(n,t,i){var u=n,s,f;do s=u.prev,f=u.next.next,!r(s,f)&&y(s,u,u.next,f)&&e(s,f)&&e(f,s)&&(t.push(s.i/i),t.push(u.i/i),t.push(f.i/i),o(u),o(u.next),u=n=f),u=u.next;while(u!==n);return u}function g(n,t,i,r,e,o){var s=n,h,c;do{for(h=s.next.next;h!==s.prev;){if(s.i!==h.i&&ot(s,h)){c=p(s,h);s=u(s,s.next);c=u(c,c.next);f(s,t,i,r,e,o);f(c,t,i,r,e,o);return}h=h.next}s=s.next}while(s!==n)}function nt(n,t,i,r){for(var o=[],h,c,e,f=0,s=t.length;f<s;f++)h=t[f]*r,c=f<s-1?t[f+1]*r:n.length,e=v(n,h,c,r,!1),e===e.next&&(e.steiner=!0),o.push(et(e));for(o.sort(tt),f=0;f<o.length;f++)it(o[f],i),i=u(i,i.next);return i}function tt(n,t){return n.x-t.x}function it(n,t){if(t=rt(n,t),t){var i=p(t,n);u(i,i.next)}}function rt(n,t){var i=t,f=n.x,r=n.y,o=-Infinity,u,s;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y&&(s=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y),s<=f&&s>o)){if(o=s,s===f){if(r===i.y)return i;if(r===i.next.y)return i.next}u=i.x<i.next.x?i:i.next}i=i.next}while(i!==t);if(!u)return null;if(f===o)return u.prev;var y=u,v=u.x,l=u.y,a=Infinity,c;for(i=u.next;i!==y;)f>=i.x&&i.x>=v&&f!==i.x&&h(r<l?f:o,r,v,l,r<l?o:f,r,i.x,i.y)&&(c=Math.abs(r-i.y)/(f-i.x),(c<a||c===a&&i.x>u.x)&&e(i,n)&&(u=i,a=c)),i=i.next;return u}function ut(n,t,i,r){var u=n;do u.z===null&&(u.z=c(u.x,u.y,t,i,r)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next;while(u!==n);u.prevZ.nextZ=null;u.prevZ=null;ft(u)}function ft(n){var o,i,t,r,u,s,f,e,h=1;do{for(i=n,n=null,u=null,s=0;i;){for(s++,t=i,f=0,o=0;o<h;o++)if(f++,t=t.nextZ,!t)break;for(e=h;f>0||e>0&&t;)f!==0&&(e===0||!t||i.z<=t.z)?(r=i,i=i.nextZ,f--):(r=t,t=t.nextZ,e--),u?u.nextZ=r:n=r,r.prevZ=u,u=r;i=t}u.nextZ=null;h*=2}while(s>1);return n}function c(n,t,i,r,u){return n=32767*(n-i)*u,t=32767*(t-r)*u,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function et(n){var t=n,i=n;do t.x<i.x&&(i=t),t=t.next;while(t!==n);return i}function h(n,t,i,r,u,f,e,o){return(u-e)*(t-o)-(n-e)*(f-o)>=0&&(n-e)*(r-o)-(i-e)*(t-o)>=0&&(i-e)*(f-o)-(u-e)*(r-o)>=0}function ot(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!st(n,t)&&e(n,t)&&e(t,n)&&ht(n,t)}function i(n,t,i){return(t.y-n.y)*(i.x-t.x)-(t.x-n.x)*(i.y-t.y)}function r(n,t){return n.x===t.x&&n.y===t.y}function y(n,t,u,f){return r(n,t)&&r(u,f)||r(n,f)&&r(u,t)?!0:i(n,t,u)>0!=i(n,t,f)>0&&i(u,f,n)>0!=i(u,f,t)>0}function st(n,t){var i=n;do{if(i.i!==n.i&&i.next.i!==n.i&&i.i!==t.i&&i.next.i!==t.i&&y(i,i.next,n,t))return!0;i=i.next}while(i!==n);return!1}function e(n,t){return i(n.prev,n,n.next)<0?i(n,t,n.next)>=0&&i(n,n.prev,t)>=0:i(n,t,n.prev)<0||i(n,n.next,t)<0}function ht(n,t){var i=n,r=!1,f=(n.x+t.x)/2,u=(n.y+t.y)/2;do i.y>u!=i.next.y>u&&i.next.y!==i.y&&f<(i.next.x-i.x)*(u-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==n);return r}function p(n,t){var r=new l(n.i,n.x,n.y),i=new l(t.i,t.x,t.y),u=n.next,f=t.prev;return n.next=t,t.prev=n,r.next=u,u.prev=r,i.next=r,r.prev=i,f.next=i,i.prev=f,i}function w(n,t,i,r){var u=new l(n,t,i);return r?(u.next=r.next,u.prev=r,r.next.prev=u,r.next=u):(u.prev=u,u.next=u),u}function o(n){n.next.prev=n.prev;n.prev.next=n.next;n.prevZ&&(n.prevZ.nextZ=n.nextZ);n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function l(n,t,i){this.i=n;this.x=t;this.y=i;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=!1}function a(n,t,i,r){for(var e=0,u=t,f=i-r;u<i;u+=r)e+=(n[f]-n[u])*(n[u+1]+n[f+1]),f=u;return e}t.exports=s;t.exports.default=s;s.deviation=function(n,t,i,r){var h=t&&t.length,p=h?t[0]*i:n.length,f=Math.abs(a(n,0,p,i)),u,s,c,l,e;if(h)for(u=0,s=t.length;u<s;u++)c=t[u]*i,l=u<s-1?t[u+1]*i:n.length,f-=Math.abs(a(n,c,l,i));for(e=0,u=0;u<r.length;u+=3){var o=r[u]*i,v=r[u+1]*i,y=r[u+2]*i;e+=Math.abs((n[o]-n[y])*(n[v+1]-n[o+1])-(n[o]-n[v])*(n[y+1]-n[o+1]))}return f===0&&e===0?0:Math.abs((e-f)/f)};s.flatten=function(n){for(var i,r,f=n[0][0].length,u={vertices:[],holes:[],dimensions:f},e=0,t=0;t<n.length;t++){for(i=0;i<n[t].length;i++)for(r=0;r<f;r++)u.vertices.push(n[t][i][r]);t>0&&(e+=n[t-1].length,u.holes.push(e))}return u}},{}],3:[function(n,t){"use strict";function u(){}function f(n,t,i){this.fn=n;this.context=t;this.once=i||!1}function i(){this._events=new u;this._eventsCount=0}var e=Object.prototype.hasOwnProperty,r="~";Object.create&&(u.prototype=Object.create(null),(new u).__proto__||(r=!1));i.prototype.eventNames=function(){var n=[],i,t;if(this._eventsCount===0)return n;for(t in i=this._events)e.call(i,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(i)):n};i.prototype.listeners=function(n,t){var o=r?r+n:n,i=this._events[o];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var u=0,f=i.length,e=new Array(f);u<f;u++)e[u]=i[u].fn;return e};i.prototype.emit=function(n,t,i,u,f,e){var a=r?r+n:n,o,h,c,s,v,l;if(!this._events[a])return!1;if(o=this._events[a],h=arguments.length,o.fn){o.once&&this.removeListener(n,o.fn,undefined,!0);switch(h){case 1:return o.fn.call(o.context),!0;case 2:return o.fn.call(o.context,t),!0;case 3:return o.fn.call(o.context,t,i),!0;case 4:return o.fn.call(o.context,t,i,u),!0;case 5:return o.fn.call(o.context,t,i,u,f),!0;case 6:return o.fn.call(o.context,t,i,u,f,e),!0}for(s=1,c=new Array(h-1);s<h;s++)c[s-1]=arguments[s];o.fn.apply(o.context,c)}else for(v=o.length,s=0;s<v;s++){o[s].once&&this.removeListener(n,o[s].fn,undefined,!0);switch(h){case 1:o[s].fn.call(o[s].context);break;case 2:o[s].fn.call(o[s].context,t);break;case 3:o[s].fn.call(o[s].context,t,i);break;case 4:o[s].fn.call(o[s].context,t,i,u);break;default:if(!c)for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];o[s].fn.apply(o[s].context,c)}}return!0};i.prototype.on=function(n,t,i){var e=new f(t,i||this),u=r?r+n:n;return this._events[u]?this._events[u].fn?this._events[u]=[this._events[u],e]:this._events[u].push(e):(this._events[u]=e,this._eventsCount++),this};i.prototype.once=function(n,t,i){var e=new f(t,i||this,!0),u=r?r+n:n;return this._events[u]?this._events[u].fn?this._events[u]=[this._events[u],e]:this._events[u].push(e):(this._events[u]=e,this._eventsCount++),this};i.prototype.removeListener=function(n,t,i,f){var o=r?r+n:n,e;if(!this._events[o])return this;if(!t)return--this._eventsCount==0?this._events=new u:delete this._events[o],this;if(e=this._events[o],e.fn)e.fn!==t||f&&!e.once||i&&e.context!==i||(--this._eventsCount==0?this._events=new u:delete this._events[o]);else{for(var s=0,h=[],c=e.length;s<c;s++)(e[s].fn!==t||f&&!e[s].once||i&&e[s].context!==i)&&h.push(e[s]);h.length?this._events[o]=h.length===1?h[0]:h:--this._eventsCount==0?this._events=new u:delete this._events[o]}return this};i.prototype.removeAllListeners=function(n){var t;return n?(t=r?r+n:n,this._events[t]&&(--this._eventsCount==0?this._events=new u:delete this._events[t])):(this._events=new u,this._eventsCount=0),this};i.prototype.off=i.prototype.removeListener;i.prototype.addListener=i.prototype.on;i.prototype.setMaxListeners=function(){return this};i.prefixed=r;i.EventEmitter=i;"undefined"!=typeof t&&(t.exports=i)},{}],4:[function(t,i){
/**
 * isMobile.js v0.4.1
 *
 * A simple library to detect Apple phones and tablets,
 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
 * and any kind of seven inch device, via user agent sniffing.
 *
 * @author: Kai Mallea (kmallea@gmail.com)
 *
 * @license: http://creativecommons.org/publicdomain/zero/1.0/
 */
(function(t){var e=/iPhone/i,c=/iPod/i,l=/iPad/i,o=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,a=/Android/i,u=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,f=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,v=/Windows Phone/i,y=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,p=/BlackBerry/i,w=/BB10/i,b=/Opera Mini/i,k=/(CriOS|Chrome)(?=.*\bMobile\b)/i,d=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,g=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),r=function(n,t){return n.test(t)},s=function(n){var t=n||navigator.userAgent,i=t.split("[FBAN");return typeof i[1]!="undefined"&&(t=i[0]),i=t.split("Twitter"),typeof i[1]!="undefined"&&(t=i[0]),this.apple={phone:r(e,t),ipod:r(c,t),tablet:!r(e,t)&&r(l,t),device:r(e,t)||r(c,t)||r(l,t)},this.amazon={phone:r(u,t),tablet:!r(u,t)&&r(f,t),device:r(u,t)||r(f,t)},this.android={phone:r(u,t)||r(o,t),tablet:!r(u,t)&&!r(o,t)&&(r(f,t)||r(a,t)),device:r(u,t)||r(f,t)||r(o,t)||r(a,t)},this.windows={phone:r(v,t),tablet:r(y,t),device:r(v,t)||r(y,t)},this.other={blackberry:r(p,t),blackberry10:r(w,t),opera:r(b,t),firefox:r(d,t),chrome:r(k,t),device:r(p,t)||r(w,t)||r(b,t)||r(d,t)||r(k,t)},this.seven_inch=r(g,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,typeof window=="undefined"?this:void 0},h=function(){var n=new s;return n.Class=s,n};typeof i!="undefined"&&i.exports&&typeof window=="undefined"?i.exports=s:typeof i!="undefined"&&i.exports&&typeof window!="undefined"?i.exports=h():typeof n=="function"&&n.amd?n("isMobile",[],t.isMobile=h()):t.isMobile=h()})(this)},{}],5:[function(n,t){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
function f(n){if(n===null||n===undefined)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function e(){var i,t,n,u,r;try{if(!Object.assign||(i=new String("abc"),i[5]="de",Object.getOwnPropertyNames(i)[0]==="5"))return!1;for(t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;return(u=Object.getOwnPropertyNames(t).map(function(n){return t[n]}),u.join("")!=="0123456789")?!1:(r={},"abcdefghijklmnopqrst".split("").forEach(function(n){r[n]=n}),Object.keys(Object.assign({},r)).join("")!=="abcdefghijklmnopqrst")?!1:!0}catch(f){return!1}}"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=e()?Object.assign:function(n){for(var s,e,t,h=f(n),o,c=1;c<arguments.length;c++){t=Object(arguments[c]);for(s in t)r.call(t,s)&&(h[s]=t[s]);if(i)for(o=i(t),e=0;e<o.length;e++)u.call(t,o[e])&&(h[o[e]]=t[o[e]])}return h}},{}],6:[function(n,t){var r=new ArrayBuffer(0),i=function(n,t,i,u){this.gl=n;this.buffer=n.createBuffer();this.type=t||n.ARRAY_BUFFER;this.drawType=u||n.STATIC_DRAW;this.data=r;i&&this.upload(i);this._updateID=0};i.prototype.upload=function(n,t,i){i||this.bind();var r=this.gl;n=n||this.data;t=t||0;this.data.byteLength>=n.byteLength?r.bufferSubData(this.type,t,n):r.bufferData(this.type,n,this.drawType);this.data=n};i.prototype.bind=function(){var n=this.gl;n.bindBuffer(this.type,this.buffer)};i.createVertexBuffer=function(n,t,r){return new i(n,n.ARRAY_BUFFER,t,r)};i.createIndexBuffer=function(n,t,r){return new i(n,n.ELEMENT_ARRAY_BUFFER,t,r)};i.create=function(n,t,r,u){return new i(n,t,r,u)};i.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)};t.exports=i},{}],7:[function(n,t){var r=n("./GLTexture"),i=function(n,t,i){this.gl=n;this.framebuffer=n.createFramebuffer();this.stencil=null;this.texture=null;this.width=t||100;this.height=i||100};i.prototype.enableTexture=function(n){var t=this.gl;this.texture=n||new r(t);this.texture.bind();this.bind();t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)};i.prototype.enableStencil=function(){if(!this.stencil){var n=this.gl;this.stencil=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,this.stencil);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,this.stencil);n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,this.width,this.height)}};i.prototype.clear=function(n,t,i,r){this.bind();var u=this.gl;u.clearColor(n,t,i,r);u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT)};i.prototype.bind=function(){var n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer)};i.prototype.unbind=function(){var n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,null)};i.prototype.resize=function(n,t){var i=this.gl;this.width=n;this.height=t;this.texture&&this.texture.uploadData(null,n,t);this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,t))};i.prototype.destroy=function(){var n=this.gl;this.texture&&this.texture.destroy();n.deleteFramebuffer(this.framebuffer);this.gl=null;this.stencil=null;this.texture=null};i.createRGBA=function(n,t,u){var e=r.fromData(n,null,t,u),f;return e.enableNearestScaling(),e.enableWrapClamp(),f=new i(n,t,u),f.enableTexture(e),f.unbind(),f};i.createFloat32=function(n,t,u,f){var o=new r.fromData(n,f,t,u),e;return o.enableNearestScaling(),o.enableWrapClamp(),e=new i(n,t,u),e.enableTexture(o),e.unbind(),e};t.exports=i},{"./GLTexture":9}],8:[function(n,t){var u=n("./shader/compileProgram"),f=n("./shader/extractAttributes"),e=n("./shader/extractUniforms"),r=n("./shader/setPrecision"),o=n("./shader/generateUniformAccessObject"),i=function(n,t,i,s,h){this.gl=n;s&&(t=r(t,s),i=r(i,s));this.program=u(n,t,i,h);this.attributes=f(n,this.program);this.uniformData=e(n,this.program);this.uniforms=o(n,this.uniformData)};i.prototype.bind=function(){return this.gl.useProgram(this.program),this};i.prototype.destroy=function(){this.attributes=null;this.uniformData=null;this.uniforms=null;var n=this.gl;n.deleteProgram(this.program)};t.exports=i},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18,"./shader/setPrecision":22}],9:[function(n,t){var i=function(n,t,i,r,u){this.gl=n;this.texture=n.createTexture();this.mipmap=!1;this.premultiplyAlpha=!1;this.width=t||-1;this.height=i||-1;this.format=r||n.RGBA;this.type=u||n.UNSIGNED_BYTE},r;i.prototype.upload=function(n){var t,i,r;this.bind();t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);i=n.videoWidth||n.width;r=n.videoHeight||n.height;r!==this.height||i!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,n):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,n);this.width=i;this.height=r};r=!1;i.prototype.uploadData=function(n,t,i){var u,f;if(this.bind(),u=this.gl,n instanceof Float32Array){if(!r)if(f=u.getExtension("OES_texture_float"),f)r=!0;else throw new Error("floating point textures not available");this.type=u.FLOAT}else this.type=this.type||u.UNSIGNED_BYTE;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);t!==this.width||i!==this.height?u.texImage2D(u.TEXTURE_2D,0,this.format,t,i,0,this.format,this.type,n||null):u.texSubImage2D(u.TEXTURE_2D,0,0,0,t,i,this.format,this.type,n||null);this.width=t;this.height=i};i.prototype.bind=function(n){var t=this.gl;n!==undefined&&t.activeTexture(t.TEXTURE0+n);t.bindTexture(t.TEXTURE_2D,this.texture)};i.prototype.unbind=function(){var n=this.gl;n.bindTexture(n.TEXTURE_2D,null)};i.prototype.minFilter=function(n){var t=this.gl;this.bind();this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n?t.LINEAR:t.NEAREST)};i.prototype.magFilter=function(n){var t=this.gl;this.bind();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n?t.LINEAR:t.NEAREST)};i.prototype.enableMipmap=function(){var n=this.gl;this.bind();this.mipmap=!0;n.generateMipmap(n.TEXTURE_2D)};i.prototype.enableLinearScaling=function(){this.minFilter(!0);this.magFilter(!0)};i.prototype.enableNearestScaling=function(){this.minFilter(!1);this.magFilter(!1)};i.prototype.enableWrapClamp=function(){var n=this.gl;this.bind();n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)};i.prototype.enableWrapRepeat=function(){var n=this.gl;this.bind();n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT)};i.prototype.enableWrapMirrorRepeat=function(){var n=this.gl;this.bind();n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.MIRRORED_REPEAT);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.MIRRORED_REPEAT)};i.prototype.destroy=function(){var n=this.gl;n.deleteTexture(this.texture)};i.fromSource=function(n,t,r){var u=new i(n);return u.premultiplyAlpha=r||!1,u.upload(t),u};i.fromData=function(n,t,r,u){var f=new i(n);return f.uploadData(t,r,u),f};t.exports=i},{}],10:[function(n,t){function i(n,t){if(this.nativeVaoExtension=null,i.FORCE_NATIVE||(this.nativeVaoExtension=n.getExtension("OES_vertex_array_object")||n.getExtension("MOZ_OES_vertex_array_object")||n.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=n.getParameter(n.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=n;this.attributes=[];this.indexBuffer=null;this.dirty=!1}var r=n("./setVertexAttribArrays");i.prototype.constructor=i;t.exports=i;i.FORCE_NATIVE=!1;i.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this};i.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this};i.prototype.activate=function(){for(var n,t=this.gl,u=null,i=0;i<this.attributes.length;i++)n=this.attributes[i],u!==n.buffer&&(n.buffer.bind(),u=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0);return r(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this};i.prototype.addAttribute=function(n,t,i,r,u,f){return this.attributes.push({buffer:n,attribute:t,location:t.location,type:i||this.gl.FLOAT,normalized:r||!1,stride:u||0,start:f||0}),this.dirty=!0,this};i.prototype.addIndex=function(n){return this.indexBuffer=n,this.dirty=!0,this};i.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this};i.prototype.draw=function(n,t,i){var r=this.gl;return this.indexBuffer?r.drawElements(n,t||this.indexBuffer.data.length,r.UNSIGNED_SHORT,(i||0)*2):r.drawArrays(n,i,t||this.getSize()),this};i.prototype.destroy=function(){this.gl=null;this.indexBuffer=null;this.attributes=null;this.nativeState=null;this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao);this.nativeVaoExtension=null;this.nativeVao=null};i.prototype.getSize=function(){var n=this.attributes[0];return n.buffer.data.length/(n.stride/4||n.attribute.size)}},{"./setVertexAttribArrays":13}],11:[function(n,t){var i=function(n,t){var i=n.getContext("webgl",t)||n.getContext("experimental-webgl",t);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i};t.exports=i},{}],12:[function(n,t){var i={createContext:n("./createContext"),setVertexAttribArrays:n("./setVertexAttribArrays"),GLBuffer:n("./GLBuffer"),GLFramebuffer:n("./GLFramebuffer"),GLShader:n("./GLShader"),GLTexture:n("./GLTexture"),VertexArrayObject:n("./VertexArrayObject"),shader:n("./shader")};typeof t!="undefined"&&t.exports&&(t.exports=i);typeof window!="undefined"&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=i)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(n,t){var i=function(n,t,i){var r,u,f,e;if(i){for(u=i.tempAttribState,f=i.attribState,r=0;r<u.length;r++)u[r]=!1;for(r=0;r<t.length;r++)u[t[r].attribute.location]=!0;for(r=0;r<f.length;r++)f[r]!==u[r]&&(f[r]=u[r],i.attribState[r]?n.enableVertexAttribArray(r):n.disableVertexAttribArray(r))}else for(r=0;r<t.length;r++)e=t[r],n.enableVertexAttribArray(e.attribute.location)};t.exports=i},{}],14:[function(n,t){var r=function(n,t,r,u){var o=i(n,n.VERTEX_SHADER,t),s=i(n,n.FRAGMENT_SHADER,r),f=n.createProgram(),e;if(n.attachShader(f,o),n.attachShader(f,s),u)for(e in u)n.bindAttribLocation(f,u[e],e);return n.linkProgram(f),n.getProgramParameter(f,n.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",n.getProgramParameter(f,n.VALIDATE_STATUS)),console.error("gl.getError()",n.getError()),n.getProgramInfoLog(f)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(f)),n.deleteProgram(f),f=null),n.deleteShader(o),n.deleteShader(s),f},i=function(n,t,i){var r=n.createShader(t);return(n.shaderSource(r,i),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS))?(console.log(n.getShaderInfoLog(r)),null):r};t.exports=r},{}],15:[function(n,t){var r=function(n,t){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return i(2*t);case"bvec3":return i(3*t);case"bvec4":return i(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},i=function(n){for(var t=new Array(n),i=0;i<t.length;i++)t[i]=!1;return t};t.exports=r},{}],16:[function(n,t){var i=n("./mapType"),r=n("./mapSize"),u=function(n,t){for(var u,o,s={},h=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES),e=0;e<h;e++)u=n.getActiveAttrib(t,e),o=i(n,u.type),s[u.name]={type:o,size:r(o),location:n.getAttribLocation(t,u.name),pointer:f};return s},f=function(n,t,i,r){gl.vertexAttribPointer(this.location,this.size,n||gl.FLOAT,t||!1,i||0,r||0)};t.exports=u},{"./mapSize":20,"./mapType":21}],17:[function(n,t){var i=n("./mapType"),r=n("./defaultValue"),u=function(n,t){for(var e={},h=n.getProgramParameter(t,n.ACTIVE_UNIFORMS),f=0;f<h;f++){var u=n.getActiveUniform(t,f),o=u.name.replace(/\[.*?\]/,""),s=i(n,u.type);e[o]={type:s,size:u.size,location:n.getUniformLocation(t,o),value:r(s,u.size)}}return e};t.exports=u},{"./defaultValue":15,"./mapType":21}],18:[function(n,t){function e(n,t){return function(i){this.data[n].value=i;var r=this.data[n].location;t.size===1?u[t.type](this.gl,r,i):f[t.type](this.gl,r,i)}}function o(n,t){for(var u,i=t,r=0;r<n.length-1;r++)u=i[n[r]]||{data:{}},i[n[r]]=u,i=u;return i}var i=function(n,t){var f={data:{}},s,i;for(f.gl=n,s=Object.keys(t),i=0;i<s.length;i++){var l=s[i],h=l.split("."),u=h[h.length-1],c=o(h,f),a=t[l];c.data[u]=a;c.gl=n;Object.defineProperty(c,u,{get:r(u),set:e(u,a)})}return f},r=function(n){return function(){return this.data[n].value}},u={float:function(n,t,i){n.uniform1f(t,i)},vec2:function(n,t,i){n.uniform2f(t,i[0],i[1])},vec3:function(n,t,i){n.uniform3f(t,i[0],i[1],i[2])},vec4:function(n,t,i){n.uniform4f(t,i[0],i[1],i[2],i[3])},int:function(n,t,i){n.uniform1i(t,i)},ivec2:function(n,t,i){n.uniform2i(t,i[0],i[1])},ivec3:function(n,t,i){n.uniform3i(t,i[0],i[1],i[2])},ivec4:function(n,t,i){n.uniform4i(t,i[0],i[1],i[2],i[3])},bool:function(n,t,i){n.uniform1i(t,i)},bvec2:function(n,t,i){n.uniform2i(t,i[0],i[1])},bvec3:function(n,t,i){n.uniform3i(t,i[0],i[1],i[2])},bvec4:function(n,t,i){n.uniform4i(t,i[0],i[1],i[2],i[3])},mat2:function(n,t,i){n.uniformMatrix2fv(t,!1,i)},mat3:function(n,t,i){n.uniformMatrix3fv(t,!1,i)},mat4:function(n,t,i){n.uniformMatrix4fv(t,!1,i)},sampler2D:function(n,t,i){n.uniform1i(t,i)}},f={float:function(n,t,i){n.uniform1fv(t,i)},vec2:function(n,t,i){n.uniform2fv(t,i)},vec3:function(n,t,i){n.uniform3fv(t,i)},vec4:function(n,t,i){n.uniform4fv(t,i)},int:function(n,t,i){n.uniform1iv(t,i)},ivec2:function(n,t,i){n.uniform2iv(t,i)},ivec3:function(n,t,i){n.uniform3iv(t,i)},ivec4:function(n,t,i){n.uniform4iv(t,i)},bool:function(n,t,i){n.uniform1iv(t,i)},bvec2:function(n,t,i){n.uniform2iv(t,i)},bvec3:function(n,t,i){n.uniform3iv(t,i)},bvec4:function(n,t,i){n.uniform4iv(t,i)},sampler2D:function(n,t,i){n.uniform1iv(t,i)}};t.exports=i},{}],19:[function(n,t){t.exports={compileProgram:n("./compileProgram"),defaultValue:n("./defaultValue"),extractAttributes:n("./extractAttributes"),extractUniforms:n("./extractUniforms"),generateUniformAccessObject:n("./generateUniformAccessObject"),setPrecision:n("./setPrecision"),mapSize:n("./mapSize"),mapType:n("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21,"./setPrecision":22}],20:[function(n,t){var i=function(n){return r[n]},r={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=i},{}],21:[function(n,t){var u=function(n,t){var f,u,e;if(!i)for(f=Object.keys(r),i={},u=0;u<f.length;++u)e=f[u],i[n[e]]=r[e];return i[t]},i=null,r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=u},{}],22:[function(n,t){var i=function(n,t){return n.substring(0,9)!=="precision"?"precision "+t+" float;\n"+n:n};t.exports=i},{}],23:[function(n,t,i){(function(n){function u(n,t){for(var u,r=0,i=n.length-1;i>=0;i--)u=n[i],u==="."?n.splice(i,1):u===".."?(n.splice(i,1),r++):r&&(n.splice(i,1),r--);if(t)for(;r--;r)n.unshift("..");return n}function r(n,t){var r,i;if(n.filter)return n.filter(t);for(r=[],i=0;i<n.length;i++)t(n[i],i,n)&&r.push(n[i]);return r}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,t=function(n){return e.exec(n).slice(1)},f;i.resolve=function(){for(var i,t="",f=!1,e=arguments.length-1;e>=-1&&!f;e--){if(i=e>=0?arguments[e]:n.cwd(),typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");else if(!i)continue;t=i+"/"+t;f=i.charAt(0)==="/"}return t=u(r(t.split("/"),function(n){return!!n}),!f).join("/"),(f?"/":"")+t||"."};i.normalize=function(n){var t=i.isAbsolute(n),e=f(n,-1)==="/";return n=u(r(n.split("/"),function(n){return!!n}),!t).join("/"),n||t||(n="."),n&&e&&(n+="/"),(t?"/":"")+n};i.isAbsolute=function(n){return n.charAt(0)==="/"};i.join=function(){var n=Array.prototype.slice.call(arguments,0);return i.normalize(r(n,function(n){if(typeof n!="string")throw new TypeError("Arguments to path.join must be strings");return n}).join("/"))};i.relative=function(n,t){function s(n){for(var t=0,i;t<n.length;t++)if(n[t]!=="")break;for(i=n.length-1;i>=0;i--)if(n[i]!=="")break;return t>i?[]:n.slice(t,i-t+1)}var u,r;n=i.resolve(n).substr(1);t=i.resolve(t).substr(1);var f=s(n.split("/")),e=s(t.split("/")),h=Math.min(f.length,e.length),o=h;for(r=0;r<h;r++)if(f[r]!==e[r]){o=r;break}for(u=[],r=o;r<f.length;r++)u.push("..");return u=u.concat(e.slice(o)),u.join("/")};i.sep="/";i.delimiter=":";i.dirname=function(n){var r=t(n),u=r[0],i=r[1];return!u&&!i?".":(i&&(i=i.substr(0,i.length-1)),u+i)};i.basename=function(n,i){var r=t(n)[2];return i&&r.substr(-1*i.length)===i&&(r=r.substr(0,r.length-i.length)),r};i.extname=function(n){return t(n)[3]};f="ab".substr(-1)==="b"?function(n,t,i){return n.substr(t,i)}:function(n,t,i){return t<0&&(t=n.length+t),n.substr(t,i)}}).call(this,n("_process"))},{_process:24}],24:[function(n,t){function c(){throw new Error("setTimeout has not been defined");}function l(){throw new Error("clearTimeout has not been defined");}function a(n){if(r===setTimeout)return setTimeout(n,0);if((r===c||!r)&&setTimeout)return r=setTimeout,setTimeout(n,0);try{return r(n,0)}catch(t){try{return r.call(null,n,0)}catch(t){return r.call(this,n,0)}}}function p(n){if(u===clearTimeout)return clearTimeout(n);if((u===l||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(n);try{return u(n)}catch(t){try{return u.call(null,n)}catch(t){return u.call(this,n)}}}function w(){s&&o&&(s=!1,o.length?f=o.concat(f):h=-1,f.length&&v())}function v(){var t,n;if(!s){for(t=a(w),s=!0,n=f.length;n;){for(o=f,f=[];++h<n;)o&&o[h].run();h=-1;n=f.length}o=null;s=!1;p(t)}}function y(n,t){this.fun=n;this.array=t}function e(){}var i=t.exports={},r,u;(function(){try{r=typeof setTimeout=="function"?setTimeout:c}catch(n){r=c}try{u=typeof clearTimeout=="function"?clearTimeout:l}catch(n){u=l}})();var f=[],s=!1,o,h=-1;i.nextTick=function(n){var i=new Array(arguments.length-1),t;if(arguments.length>1)for(t=1;t<arguments.length;t++)i[t-1]=arguments[t];f.push(new y(n,i));f.length!==1||s||a(v)};y.prototype.run=function(){this.fun.apply(null,this.array)};i.title="browser";i.browser=!0;i.env={};i.argv=[];i.version="";i.versions={};i.on=e;i.addListener=e;i.once=e;i.off=e;i.removeListener=e;i.removeAllListeners=e;i.emit=e;i.prependListener=e;i.prependOnceListener=e;i.listeners=function(){return[]};i.binding=function(){throw new Error("process.binding is not supported");};i.cwd=function(){return"/"};i.chdir=function(){throw new Error("process.chdir is not supported");};i.umask=function(){return 0}},{}],25:[function(t,i,r){(function(t){
/*! https://mths.be/punycode v1.4.1 by @mathias */
(function(u){function h(n){throw new RangeError(vt[n]);}function nt(n,t){for(var i=n.length,r=[];i--;)r[i]=t(n[i]);return r}function tt(n,t){var i=n.split("@"),r="",u,f;return i.length>1&&(r=i[0]+"@",n=i[1]),n=n.replace(at,"."),u=n.split("."),f=nt(u,t).join("."),r+f}function it(n){for(var r=[],i=0,f=n.length,t,u;i<f;)t=n.charCodeAt(i++),t>=55296&&t<=56319&&i<f?(u=n.charCodeAt(i++),(u&64512)==56320?r.push(((t&1023)<<10)+(u&1023)+65536):(r.push(t),i--)):r.push(t);return r}function rt(n){return nt(n,function(n){var t="";return n>65535&&(n-=65536,t+=a(n>>>10&1023|55296),n=56320|n&1023),t+a(n)}).join("")}function yt(n){return n-48<10?n-22:n-65<26?n-65:n-97<26?n-97:f}function ut(n,t){return n+22+75*(n<26)-((t!=0)<<5)}function ft(n,t,i){var r=0;for(n=i?e(n/ht):n>>1,n+=e(n/t);n>w*l>>1;r+=f)n=e(n/w);return e(r+(w+1)*n/(n+st))}function et(n){var v=[],ut=n.length,r,t=0,b=d,y=k,i,u,w,nt,o,s,a,tt,it;for(i=n.lastIndexOf(g),i<0&&(i=0),u=0;u<i;++u)n.charCodeAt(u)>=128&&h("not-basic"),v.push(n.charCodeAt(u));for(w=i>0?i+1:0;w<ut;){for(nt=t,o=1,s=f;;s+=f){if(w>=ut&&h("invalid-input"),a=yt(n.charCodeAt(w++)),(a>=f||a>e((c-t)/o))&&h("overflow"),t+=a*o,tt=s<=y?p:s>=y+l?l:s-y,a<tt)break;it=f-tt;o>e(c/it)&&h("overflow");o*=it}r=v.length+1;y=ft(t-nt,r,nt==0);e(t/r)>c-b&&h("overflow");b+=e(t/r);t%=r;v.splice(t++,0,b)}return rt(v)}function ot(n){var r,u,v,et,y,t,o,w,b,nt,i,s=[],tt,rt,ot,st;for(n=it(n),tt=n.length,r=d,u=0,y=k,t=0;t<tt;++t)i=n[t],i<128&&s.push(a(i));for(v=et=s.length,et&&s.push(g);v<tt;){for(o=c,t=0;t<tt;++t)i=n[t],i>=r&&i<o&&(o=i);for(rt=v+1,o-r>e((c-u)/rt)&&h("overflow"),u+=(o-r)*rt,r=o,t=0;t<tt;++t)if(i=n[t],i<r&&++u>c&&h("overflow"),i==r){for(w=u,b=f;;b+=f){if(nt=b<=y?p:b>=y+l?l:b-y,w<nt)break;st=w-nt;ot=f-nt;s.push(a(ut(nt+st%ot,0)));w=e(st/ot)}s.push(a(ut(w,0)));y=ft(u,rt,v==et);u=0;++v}++u;++r}return s.join("")}function pt(n){return tt(n,function(n){return ct.test(n)?et(n.slice(4).toLowerCase()):n})}function wt(n){return tt(n,function(n){return lt.test(n)?"xn--"+ot(n):n})}var y=typeof r=="object"&&r&&!r.nodeType&&r,b=typeof i=="object"&&i&&!i.nodeType&&i,o=typeof t=="object"&&t;(o.global===o||o.window===o||o.self===o)&&(u=o);var s,c=2147483647,f=36,p=1,l=26,st=38,ht=700,k=72,d=128,g="-",ct=/^xn--/,lt=/[^\x20-\x7E]/,at=/[\x2E\u3002\uFF0E\uFF61]/g,vt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=f-p,e=Math.floor,a=String.fromCharCode,v;if(s={version:"1.4.1",ucs2:{decode:it,encode:rt},decode:et,encode:ot,toASCII:wt,toUnicode:pt},typeof n=="function"&&typeof n.amd=="object"&&n.amd)n("punycode",function(){return s});else if(y&&b)if(i.exports==y)b.exports=s;else for(v in s)s.hasOwnProperty(v)&&(y[v]=s[v]);else u.punycode=s})(this)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],26:[function(n,t){"use strict";function i(n,t){return Object.prototype.hasOwnProperty.call(n,t)}t.exports=function(n,t,u,f){var e,w,s,c,l,h,a,y,p,o,v;if(t=t||"&",u=u||"=",e={},typeof n!="string"||n.length===0)return e;for(w=/\+/g,n=n.split(t),s=1e3,f&&typeof f.maxKeys=="number"&&(s=f.maxKeys),c=n.length,s>0&&c>s&&(c=s),l=0;l<c;++l)h=n[l].replace(w,"%20"),a=h.indexOf(u),a>=0?(y=h.substr(0,a),p=h.substr(a+1)):(y=h,p=""),o=decodeURIComponent(y),v=decodeURIComponent(p),i(e,o)?r(e[o])?e[o].push(v):e[o]=[e[o],v]:e[o]=v;return e};var r=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"}},{}],27:[function(n,t){"use strict";function u(n,t){var r,i;if(n.map)return n.map(t);for(r=[],i=0;i<n.length;i++)r.push(t(n[i],i));return r}var i=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}},r,f;t.exports=function(n,t,e,o){return(t=t||"&",e=e||"=",n===null&&(n=undefined),typeof n=="object")?u(f(n),function(f){var o=encodeURIComponent(i(f))+e;return r(n[f])?u(n[f],function(n){return o+encodeURIComponent(i(n))}).join(t):o+encodeURIComponent(i(n[f]))}).join(t):o?encodeURIComponent(i(o))+e+encodeURIComponent(i(n)):""};r=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};f=Object.keys||function(n){var t=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(i);return t}},{}],28:[function(n,t,i){"use strict";i.decode=i.parse=n("./decode");i.encode=i.stringify=n("./encode")},{"./decode":26,"./encode":27}],29:[function(n,t,i){"use strict";function r(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}function e(n,t,i){if(n&&u.isObject(n)&&n instanceof r)return n;var f=new r;return f.parse(n,t,i),f}function nt(n){return(u.isString(n)&&(n=e(n)),!(n instanceof r))?r.prototype.format.call(n):n.format()}function tt(n,t){return e(n,!1,!0).resolve(t)}function it(n,t){return n?e(n,!1,!0).resolveObject(t):t}var v=n("punycode"),u=n("./util");i.parse=e;i.resolve=tt;i.resolveObject=it;i.format=nt;i.Url=r;var y=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,w=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,b=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),o=["'"].concat(b),c=["%","/","?",";","#"].concat(o),l=["/","?","#"],k=255,a=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},s={javascript:!0,"javascript:":!0},f={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},h=n("querystring");r.prototype.parse=function(n,t,i){var r,rt,b,ot,pt,p,ni,st,nt,ht,ut,tt,wt,ft,ti,ri,e,ct,it,at,vt,et,lt,ui;if(!u.isString(n))throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var dt=n.indexOf("?"),gt=dt!==-1&&dt<n.indexOf("#")?"?":"#",yt=n.split(gt);if(yt[0]=yt[0].replace(/\\/g,"/"),n=yt.join(gt),r=n,r=r.trim(),!i&&n.split("#").length===1&&(rt=w.exec(r),rt))return this.path=r,this.href=r,this.pathname=rt[1],rt[2]?(this.search=rt[2],this.query=t?h.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this;if(b=y.exec(r),b&&(b=b[0],ot=b.toLowerCase(),this.protocol=ot,r=r.substr(b.length)),(i||b||r.match(/^\/\/[^@\/]+@[^@\/]+/))&&(pt=r.substr(0,2)==="//",!pt||b&&s[b]||(r=r.substr(2),this.slashes=!0)),!s[b]&&(pt||b&&!f[b])){for(p=-1,e=0;e<l.length;e++)nt=r.indexOf(l[e]),nt!==-1&&(p===-1||nt<p)&&(p=nt);for(st=p===-1?r.lastIndexOf("@"):r.lastIndexOf("@",p),st!==-1&&(ni=r.slice(0,st),r=r.slice(st+1),this.auth=decodeURIComponent(ni)),p=-1,e=0;e<c.length;e++)nt=r.indexOf(c[e]),nt!==-1&&(p===-1||nt<p)&&(p=nt);if(p===-1&&(p=r.length),this.host=r.slice(0,p),r=r.slice(p),this.parseHost(),this.hostname=this.hostname||"",ht=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]",!ht)for(ut=this.hostname.split(/\./),e=0,ct=ut.length;e<ct;e++)if((tt=ut[e],tt)&&!tt.match(a)){for(wt="",ft=0,ti=tt.length;ft<ti;ft++)wt+=tt.charCodeAt(ft)>127?"x":tt[ft];if(!wt.match(a)){var ii=ut.slice(0,e),bt=ut.slice(e+1),kt=tt.match(d);kt&&(ii.push(kt[1]),bt.unshift(kt[2]));bt.length&&(r="/"+bt.join(".")+r);this.hostname=ii.join(".");break}}this.hostname=this.hostname.length>k?"":this.hostname.toLowerCase();ht||(this.hostname=v.toASCII(this.hostname));lt=this.port?":"+this.port:"";ri=this.hostname||"";this.host=ri+lt;this.href+=this.host;ht&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),r[0]!=="/"&&(r="/"+r))}if(!g[ot])for(e=0,ct=o.length;e<ct;e++)(it=o[e],r.indexOf(it)!==-1)&&(at=encodeURIComponent(it),at===it&&(at=escape(it)),r=r.split(it).join(at));return vt=r.indexOf("#"),vt!==-1&&(this.hash=r.substr(vt),r=r.slice(0,vt)),et=r.indexOf("?"),et!==-1?(this.search=r.substr(et),this.query=r.substr(et+1),t&&(this.query=h.parse(this.query)),r=r.slice(0,et)):t&&(this.search="",this.query={}),r&&(this.pathname=r),f[ot]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(lt=this.pathname||"",ui=this.search||"",this.path=lt+ui),this.href=this.format(),this};r.prototype.format=function(){var i=this.auth||"",t;i&&(i=encodeURIComponent(i),i=i.replace(/%3A/i,":")+"@");var e=this.protocol||"",r=this.pathname||"",o=this.hash||"",n=!1,s="";return this.host?n=i+this.host:this.hostname&&(n=i+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(s=h.stringify(this.query)),t=this.search||s&&"?"+s||"",e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||f[e])&&n!==!1?(n="//"+(n||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):n||(n=""),o&&o.charAt(0)!=="#"&&(o="#"+o),t&&t.charAt(0)!=="?"&&(t="?"+t),r=r.replace(/[?#]/g,function(n){return encodeURIComponent(n)}),t=t.replace("#","%23"),e+n+r+t+o};r.prototype.resolve=function(n){return this.resolveObject(e(n,!1,!0)).format()};r.prototype.resolveObject=function(n){var b,t,k,v,d,g,y,p,nt,w,tt,e,ut,ft,c,rt,h;for(u.isString(n)&&(b=new r,b.parse(n,!1,!0),n=b),t=new r,k=Object.keys(this),v=0;v<k.length;v++)d=k[v],t[d]=this[d];if(t.hash=n.hash,n.href==="")return t.href=t.format(),t;if(n.slashes&&!n.protocol){for(g=Object.keys(n),y=0;y<g.length;y++)p=g[y],p!=="protocol"&&(t[p]=n[p]);return f[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(n.protocol&&n.protocol!==t.protocol){if(!f[n.protocol]){for(nt=Object.keys(n),w=0;w<nt.length;w++)tt=nt[w],t[tt]=n[tt];return t.href=t.format(),t}if(t.protocol=n.protocol,n.host||s[n.protocol])t.pathname=n.pathname;else{for(e=(n.pathname||"").split("/");e.length&&!(n.host=e.shift()););n.host||(n.host="");n.hostname||(n.hostname="");e[0]!==""&&e.unshift("");e.length<2&&e.unshift("");t.pathname=e.join("/")}return t.search=n.search,t.query=n.query,t.host=n.host||"",t.auth=n.auth,t.hostname=n.hostname||n.host,t.port=n.port,(t.pathname||t.search)&&(ut=t.pathname||"",ft=t.search||"",t.path=ut+ft),t.slashes=t.slashes||n.slashes,t.href=t.format(),t}var ot=t.pathname&&t.pathname.charAt(0)==="/",et=n.host||n.pathname&&n.pathname.charAt(0)==="/",o=et||ot||t.host&&n.pathname,st=o,i=t.pathname&&t.pathname.split("/")||[],e=n.pathname&&n.pathname.split("/")||[],it=t.protocol&&!f[t.protocol];if(it&&(t.hostname="",t.port=null,t.host&&(i[0]===""?i[0]=t.host:i.unshift(t.host)),t.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(e[0]===""?e[0]=n.host:e.unshift(n.host)),n.host=null),o=o&&(e[0]===""||i[0]==="")),et)t.host=n.host||n.host===""?n.host:t.host,t.hostname=n.hostname||n.hostname===""?n.hostname:t.hostname,t.search=n.search,t.query=n.query,i=e;else if(e.length)i||(i=[]),i.pop(),i=i.concat(e),t.search=n.search,t.query=n.query;else if(!u.isNullOrUndefined(n.search))return it&&(t.hostname=t.host=i.shift(),h=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1,h&&(t.auth=h.shift(),t.host=t.hostname=h.shift())),t.search=n.search,t.query=n.query,u.isNull(t.pathname)&&u.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!i.length)return t.pathname=null,t.path=t.search?"/"+t.search:null,t.href=t.format(),t;var l=i.slice(-1)[0],ht=(t.host||n.host||i.length>1)&&(l==="."||l==="..")||l==="",a=0;for(c=i.length;c>=0;c--)l=i[c],l==="."?i.splice(c,1):l===".."?(i.splice(c,1),a++):a&&(i.splice(c,1),a--);if(!o&&!st)for(;a--;a)i.unshift("..");return o&&i[0]!==""&&(!i[0]||i[0].charAt(0)!=="/")&&i.unshift(""),ht&&i.join("/").substr(-1)!=="/"&&i.push(""),rt=i[0]===""||i[0]&&i[0].charAt(0)==="/",it&&(t.hostname=t.host=rt?"":i.length?i.shift():"",h=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1,h&&(t.auth=h.shift(),t.host=t.hostname=h.shift())),o=o||t.host&&i.length,o&&!rt&&i.unshift(""),i.length?t.pathname=i.join("/"):(t.pathname=null,t.path=null),u.isNull(t.pathname)&&u.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=n.auth||t.auth,t.slashes=t.slashes||n.slashes,t.href=t.format(),t};r.prototype.parseHost=function(){var n=this.host,t=p.exec(n);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),n=n.substr(0,n.length-t.length));n&&(this.hostname=n)}},{"./util":30,punycode:25,querystring:28}],30:[function(n,t){"use strict";t.exports={isString:function(n){return typeof n=="string"},isObject:function(n){return typeof n=="object"&&n!==null},isNull:function(n){return n===null},isNullOrUndefined:function(n){return n==null}}},{}],31:[function(n,t){"use strict";t.exports=function(n,t,i){var r,u=n.length,f;if(!(t>=u)&&i!==0){for(i=t+i>u?u-t:i,f=u-i,r=t;r<f;++r)n[r]=n[r+i];n.length=f}}},{}],32:[function(n,t,i){"use strict";function y(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function f(n){return n&&n.__esModule?n:{"default":n}}function p(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}i.__esModule=!0;var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),s=n("mini-signals"),r=f(s),h=n("parse-uri"),c=f(h),l=n("./async"),u=y(l),a=n("./Resource"),v=f(a);var w=100,b=/(#[\w-]+)?$/,k=function(){function n(){var t=this,i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;p(this,n);this.baseUrl=i;this.progress=0;this.loading=!1;this.defaultQueryString="";this._beforeMiddleware=[];this._afterMiddleware=[];this._resourcesParsing=[];this._boundLoadResource=function(n,i){return t._loadResource(n,i)};this._queue=u.queue(this._boundLoadResource,f);this._queue.pause();this.resources={};this.onProgress=new r.default;this.onError=new r.default;this.onLoad=new r.default;this.onStart=new r.default;this.onComplete=new r.default}return n.prototype.add=function(n,t,i,r){var s,u,f,o,l,h,c;if(Array.isArray(n)){for(s=0;s<n.length;++s)this.add(n[s]);return this}if((typeof n=="undefined"?"undefined":e(n))==="object"&&(r=t||n.callback||n.onComplete,i=n,t=n.url,n=n.name||n.key||n.url),typeof t!="string"&&(r=i,i=t,t=n),typeof t!="string")throw new Error("No url passed to add resource to loader.");if(typeof i=="function"&&(r=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[n])throw new Error('Resource named "'+n+'" already exists.');if(t=this._prepareUrl(t),this.resources[n]=new v.default(n,t,i),typeof r=="function")this.resources[n].onAfterMiddleware.once(r);if(this.loading){for(u=i.parentResource,f=[],o=0;o<u.children.length;++o)u.children[o].isComplete||f.push(u.children[o]);for(l=u.progressChunk*(f.length+1),h=l/(f.length+2),u.children.push(this.resources[n]),u.progressChunk=h,c=0;c<f.length;++c)f[c].progressChunk=h;this.resources[n].progressChunk=h}return this._queue.push(this.resources[n]),this},n.prototype.pre=function(n){return this._beforeMiddleware.push(n),this},n.prototype.use=function(n){return this._afterMiddleware.push(n),this},n.prototype.reset=function(){var t,n;this.progress=0;this.loading=!1;this._queue.kill();this._queue.pause();for(t in this.resources)n=this.resources[t],n._onLoadBinding&&n._onLoadBinding.detach(),n.isLoading&&n.abort();return this.resources={},this},n.prototype.load=function(n){var i,r,t;if(typeof n=="function")this.onComplete.once(n);if(this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(i=this._queue._tasks.length,r=100/i,t=0;t<this._queue._tasks.length;++t)this._queue._tasks[t].data.progressChunk=r;this._onStart();this._queue.resume()}return this},n.prototype._prepareUrl=function(n){var r=c.default(n,{strictMode:!0}),t=void 0,i;return t=r.protocol||!r.path||n.indexOf("//")===0?n:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&n.charAt(0)!=="/"?this.baseUrl+"/"+n:this.baseUrl+n,this.defaultQueryString&&(i=b.exec(t)[0],t=t.substr(0,t.length-i.length),t+=t.indexOf("?")!==-1?"&"+this.defaultQueryString:"?"+this.defaultQueryString,t+=i),t},n.prototype._loadResource=function(n,t){var i=this;n._dequeue=t;u.eachSeries(this._beforeMiddleware,function(t,r){t.call(i,n,function(){r(n.isComplete?{}:null)})},function(){n.isComplete?i._onLoad(n):(n._onLoadBinding=n.onComplete.once(i._onLoad,i),n.load())},!0)},n.prototype._onStart=function(){this.progress=0;this.loading=!0;this.onStart.dispatch(this)},n.prototype._onComplete=function(){this.progress=w;this.loading=!1;this.onComplete.dispatch(this,this.resources)},n.prototype._onLoad=function(n){var t=this;n._onLoadBinding=null;this._resourcesParsing.push(n);n._dequeue();u.eachSeries(this._afterMiddleware,function(i,r){i.call(t,n,r)},function(){n.onAfterMiddleware.dispatch(n);t.progress+=n.progressChunk;t.onProgress.dispatch(t,n);n.error?t.onError.dispatch(n.error,t,n):t.onLoad.dispatch(t,n);t._resourcesParsing.splice(t._resourcesParsing.indexOf(n),1);t._queue.idle()&&t._resourcesParsing.length===0&&t._onComplete()},!0)},o(n,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(n){this._queue.concurrency=n}}]),n}();i.default=k},{"./Resource":33,"./async":34,"mini-signals":38,"parse-uri":39}],33:[function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}function y(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function g(){}function h(n,t,i){(t&&t.indexOf(".")===0&&(t=t.substring(1)),t)&&(n[t]=i)}function e(n){return n.toString().replace("object ","")}var r;i.__esModule=!0;var c=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),l=n("parse-uri"),a=o(l),v=n("mini-signals"),u=o(v);var p=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),f=null,w=0,s=200,b=204,k=1223,d=2;r=function(){function n(t,i,r){if(y(this,n),typeof t!="string"||typeof i!="string")throw new Error("Both name and url are required for constructing a resource.");r=r||{};this._flags=0;this._setFlag(n.STATUS_FLAGS.DATA_URL,i.indexOf("data:")===0);this.name=t;this.url=i;this.extension=this._getExtension();this.data=null;this.crossOrigin=r.crossOrigin===!0?"anonymous":r.crossOrigin;this.loadType=r.loadType||this._determineLoadType();this.xhrType=r.xhrType;this.metadata=r.metadata||{};this.error=null;this.xhr=null;this.children=[];this.type=n.TYPE.UNKNOWN;this.progressChunk=0;this._dequeue=g;this._onLoadBinding=null;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this);this.onStart=new u.default;this.onProgress=new u.default;this.onComplete=new u.default;this.onAfterMiddleware=new u.default}return n.setExtensionLoadType=function(t,i){h(n._loadTypeMap,t,i)},n.setExtensionXhrType=function(t,i){h(n._xhrTypeMap,t,i)},n.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(n.STATUS_FLAGS.COMPLETE,!0);this._setFlag(n.STATUS_FLAGS.LOADING,!1);this.onComplete.dispatch(this)},n.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=n.EMPTY_GIF;else while(this.data.firstChild)this.data.removeChild(this.data.firstChild);this.complete()}},n.prototype.load=function(t){var i=this;if(!this.isLoading){if(this.isComplete){t&&setTimeout(function(){return t(i)},1);return}if(t)this.onComplete.once(t);this._setFlag(n.STATUS_FLAGS.LOADING,!0);this.onStart.dispatch(this);(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url));switch(this.loadType){case n.LOAD_TYPE.IMAGE:this.type=n.TYPE.IMAGE;this._loadElement("image");break;case n.LOAD_TYPE.AUDIO:this.type=n.TYPE.AUDIO;this._loadSourceElement("audio");break;case n.LOAD_TYPE.VIDEO:this.type=n.TYPE.VIDEO;this._loadSourceElement("video");break;case n.LOAD_TYPE.XHR:default:p&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},n.prototype._hasFlag=function(n){return!!(this._flags&n)},n.prototype._setFlag=function(n,t){this._flags=t?this._flags|n:this._flags&~n},n.prototype._loadElement=function(n){this.data=this.metadata.loadElement?this.metadata.loadElement:n==="image"&&typeof Image!="undefined"?new Image:document.createElement(n);this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin);this.metadata.skipSource||(this.data.src=this.url);this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",this._boundOnProgress,!1)},n.prototype._loadSourceElement=function(n){var i,t,r;if(this.data=this.metadata.loadElement?this.metadata.loadElement:n==="audio"&&typeof Audio!="undefined"?new Audio:document.createElement(n),this.data===null){this.abort("Unsupported element: "+n);return}if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(i=this.metadata.mimeType,t=0;t<this.url.length;++t)this.data.appendChild(this._createSource(n,this.url[t],Array.isArray(i)?i[t]:i));else r=this.metadata.mimeType,this.data.appendChild(this._createSource(n,this.url,Array.isArray(r)?r[0]:r));this.data.addEventListener("error",this._boundOnError,!1);this.data.addEventListener("load",this._boundComplete,!1);this.data.addEventListener("progress",this._boundOnProgress,!1);this.data.addEventListener("canplaythrough",this._boundComplete,!1);this.data.load()},n.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0);t.responseType=this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?n.XHR_RESPONSE_TYPE.TEXT:this.xhrType;t.addEventListener("error",this._boundXhrOnError,!1);t.addEventListener("abort",this._boundXhrOnAbort,!1);t.addEventListener("progress",this._boundOnProgress,!1);t.addEventListener("load",this._boundXhrOnLoad,!1);t.send()},n.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var n=this.xhr=new XDomainRequest;n.timeout=5e3;n.onerror=this._boundXhrOnError;n.ontimeout=this._boundXdrOnTimeout;n.onprogress=this._boundOnProgress;n.onload=this._boundXhrOnLoad;n.open("GET",this.url,!0);setTimeout(function(){return n.send()},1)},n.prototype._createSource=function(n,t,i){i||(i=n+"/"+this._getExtension(t));var r=document.createElement("source");return r.src=t,r.type=i,r},n.prototype._onError=function(n){this.abort("Failed to load element using: "+n.target.nodeName)},n.prototype._onProgress=function(n){n&&n.lengthComputable&&this.onProgress.dispatch(this,n.loaded/n.total)},n.prototype._xhrOnError=function(){var n=this.xhr;this.abort(e(n)+" Request failed. Status: "+n.status+', text: "'+n.statusText+'"')},n.prototype._xhrOnAbort=function(){this.abort(e(this.xhr)+" Request was aborted by the user.")},n.prototype._xdrOnTimeout=function(){this.abort(e(this.xhr)+" Request timed out.")},n.prototype._xhrOnLoad=function(){var t=this.xhr,i="",r=typeof t.status=="undefined"?s:t.status,f,o,u;if((t.responseType===""||t.responseType==="text"||typeof t.responseType=="undefined")&&(i=t.responseText),r===w&&(i.length>0||t.responseType===n.XHR_RESPONSE_TYPE.BUFFER)?r=s:r===k&&(r=b),f=r/100|0,f===d)if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=n.TYPE.TEXT;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i);this.type=n.TYPE.JSON}catch(e){this.abort("Error trying to parse loaded json: "+e);return}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{window.DOMParser?(o=new DOMParser,this.data=o.parseFromString(i,"text/xml")):(u=document.createElement("div"),u.innerHTML=i,this.data=u);this.type=n.TYPE.XML}catch(e){this.abort("Error trying to parse loaded xml: "+e);return}else this.data=t.response||i;else{this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);return}this.complete()},n.prototype._determineCrossOrigin=function(n,t){if(n.indexOf("data:")===0)return"";t=t||window.location;f||(f=document.createElement("a"));f.href=n;n=a.default(f.href,{strictMode:!0});var i=!n.port&&t.port===""||n.port===t.port,r=n.protocol?n.protocol+":":"";return n.host!==t.hostname||!i||r!==t.protocol?"anonymous":""},n.prototype._determineXhrType=function(){return n._xhrTypeMap[this.extension]||n.XHR_RESPONSE_TYPE.TEXT},n.prototype._determineLoadType=function(){return n._loadTypeMap[this.extension]||n.LOAD_TYPE.XHR},n.prototype._getExtension=function(){var n=this.url,t="",i;if(this.isDataUrl)i=n.indexOf("/"),t=n.substring(i+1,n.indexOf(";",i));else{var r=n.indexOf("?"),u=n.indexOf("#"),f=Math.min(r>-1?r:n.length,u>-1?u:n.length);n=n.substring(0,f);t=n.substring(n.lastIndexOf(".")+1)}return t.toLowerCase()},n.prototype._getMimeFromXhrType=function(t){switch(t){case n.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case n.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case n.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case n.XHR_RESPONSE_TYPE.JSON:return"application/json";case n.XHR_RESPONSE_TYPE.DEFAULT:case n.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},c(n,[{key:"isDataUrl",get:function(){return this._hasFlag(n.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(n.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(n.STATUS_FLAGS.LOADING)}}]),n}();i.default=r;r.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4};r.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};r.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};r.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};r._loadTypeMap={gif:r.LOAD_TYPE.IMAGE,png:r.LOAD_TYPE.IMAGE,bmp:r.LOAD_TYPE.IMAGE,jpg:r.LOAD_TYPE.IMAGE,jpeg:r.LOAD_TYPE.IMAGE,tif:r.LOAD_TYPE.IMAGE,tiff:r.LOAD_TYPE.IMAGE,webp:r.LOAD_TYPE.IMAGE,tga:r.LOAD_TYPE.IMAGE,svg:r.LOAD_TYPE.IMAGE,"svg+xml":r.LOAD_TYPE.IMAGE,mp3:r.LOAD_TYPE.AUDIO,ogg:r.LOAD_TYPE.AUDIO,wav:r.LOAD_TYPE.AUDIO,mp4:r.LOAD_TYPE.VIDEO,webm:r.LOAD_TYPE.VIDEO};r._xhrTypeMap={xhtml:r.XHR_RESPONSE_TYPE.DOCUMENT,html:r.XHR_RESPONSE_TYPE.DOCUMENT,htm:r.XHR_RESPONSE_TYPE.DOCUMENT,xml:r.XHR_RESPONSE_TYPE.DOCUMENT,tmx:r.XHR_RESPONSE_TYPE.DOCUMENT,svg:r.XHR_RESPONSE_TYPE.DOCUMENT,tsx:r.XHR_RESPONSE_TYPE.DOCUMENT,gif:r.XHR_RESPONSE_TYPE.BLOB,png:r.XHR_RESPONSE_TYPE.BLOB,bmp:r.XHR_RESPONSE_TYPE.BLOB,jpg:r.XHR_RESPONSE_TYPE.BLOB,jpeg:r.XHR_RESPONSE_TYPE.BLOB,tif:r.XHR_RESPONSE_TYPE.BLOB,tiff:r.XHR_RESPONSE_TYPE.BLOB,webp:r.XHR_RESPONSE_TYPE.BLOB,tga:r.XHR_RESPONSE_TYPE.BLOB,json:r.XHR_RESPONSE_TYPE.JSON,text:r.XHR_RESPONSE_TYPE.TEXT,txt:r.XHR_RESPONSE_TYPE.TEXT,ttf:r.XHR_RESPONSE_TYPE.BUFFER,otf:r.XHR_RESPONSE_TYPE.BUFFER};r.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":38,"parse-uri":39}],34:[function(n,t,i){"use strict";function r(){}function u(n,t,i,r){var u=0,e=n.length;(function f(o){if(o||u===e){i&&i(o);return}r?setTimeout(function(){t(n[u++],f)},1):t(n[u++],f)})()}function f(n){return function(){if(n===null)throw new Error("Callback was already called.");var t=n;n=null;t.apply(this,arguments)}}function e(n,t){function e(n,t,u){if(u!=null&&typeof u!="function")throw new Error("task callback must be a function");if(i.started=!0,n==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var f={data:n,callback:typeof u=="function"?u:r};t?i._tasks.unshift(f):i._tasks.push(f);setTimeout(function(){return i.process()},1)}function o(n){return function(){u-=1;n.callback.apply(n,arguments);arguments[0]!=null&&i.error(arguments[0],n.data);u<=i.concurrency-i.buffer&&i.unsaturated();i.idle()&&i.drain();i.process()}}if(t==null)t=1;else if(t===0)throw new Error("Concurrency must not be zero");var u=0,i={_tasks:[],concurrency:t,saturated:r,unsaturated:r,buffer:t/4,empty:r,drain:r,error:r,started:!1,paused:!1,push:function(n,t){e(n,!1,t)},kill:function(){u=0;i.drain=r;i.started=!1;i._tasks=[]},unshift:function(n,t){e(n,!0,t)},process:function(){while(!i.paused&&u<i.concurrency&&i._tasks.length){var t=i._tasks.shift();i._tasks.length===0&&i.empty();u+=1;u===i.concurrency&&i.saturated();n(t.data,f(o(t)))}},length:function(){return i._tasks.length},running:function(){return u},idle:function(){return i._tasks.length+u===0},pause:function(){i.paused!==!0&&(i.paused=!0)},resume:function(){if(i.paused!==!1){i.paused=!1;for(var n=1;n<=i.concurrency;n++)i.process()}}};return i}i.__esModule=!0;i.eachSeries=u;i.queue=e},{}],35:[function(n,t,i){"use strict";function u(n){for(var o="",u=0,i,t,f,s,e;u<n.length;){for(i=[0,0,0],t=[0,0,0,0],f=0;f<i.length;++f)i[f]=u<n.length?n.charCodeAt(u++)&255:0;t[0]=i[0]>>2;t[1]=(i[0]&3)<<4|i[1]>>4;t[2]=(i[1]&15)<<2|i[2]>>6;t[3]=i[2]&63;s=u-(n.length-1);switch(s){case 2:t[3]=64;t[2]=64;break;case 1:t[3]=64}for(e=0;e<t.length;++e)o+=r.charAt(t[e])}return o}i.__esModule=!0;i.encodeBinary=u;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],36:[function(n,t){"use strict";var i=n("./Loader").default,r=n("./Resource").default,u=n("./async"),f=n("./b64");i.Resource=r;i.async=u;i.base64=f;t.exports=i;t.exports.default=i},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function c(){return function(n,t){var i,e;if(!n.data){t();return}if(n.xhr&&n.xhrType===r.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&typeof n.data!="string"){if(n.data.type.indexOf("image")===0&&(e=function(){var i=u.createObjectURL(n.data);return n.blob=n.data,n.data=new Image,n.data.src=i,n.type=r.default.TYPE.IMAGE,n.data.onload=function(){u.revokeObjectURL(i);n.data.onload=null;t()},{v:void 0}}(),(typeof e=="undefined"?"undefined":f(e))==="object"))return e.v}else if(i=n.xhr.getResponseHeader("content-type"),i&&i.indexOf("image")===0){n.data=new Image;n.data.src="data:"+i+";base64,"+h.default.encodeBinary(n.xhr.responseText);n.type=r.default.TYPE.IMAGE;n.data.onload=function(){n.data.onload=null;t()};return}t()}}var f,u;i.__esModule=!0;f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};i.blobMiddlewareFactory=c;var o=n("../../Resource"),r=e(o),s=n("../../b64"),h=e(s);u=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(n,t,i){"use strict";function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n,t){return n._head?(n._tail._next=t,t._prev=n._tail,n._tail=t):(n._head=t,n._tail=t),t._owner=n,t}var u,r,f;Object.defineProperty(i,"__esModule",{value:!0});u=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();r=function(){function n(t,i,r){i===undefined&&(i=!1);e(this,n);this._fn=t;this._once=i;this._thisArg=r;this._next=this._prev=this._owner=null}return u(n,[{key:"detach",value:function(){return this._owner===null?!1:(this._owner.detach(this),!0)}}]),n}();f=function(){function n(){e(this,n);this._head=this._tail=undefined}return u(n,[{key:"handlers",value:function(){var i=arguments.length<=0||arguments[0]===undefined?!1:arguments[0],n=this._head,t;if(i)return!!n;for(t=[];n;)t.push(n),n=n._next;return t}},{key:"has",value:function(n){if(!(n instanceof r))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return n._owner===this}},{key:"dispatch",value:function(){var n=this._head;if(!n)return!1;while(n)n._once&&this.detach(n),n._fn.apply(n._thisArg,arguments),n=n._next;return!0}},{key:"add",value:function(n){var t=arguments.length<=1||arguments[1]===undefined?null:arguments[1];if(typeof n!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return o(this,new r(n,!1,t))}},{key:"once",value:function(n){var t=arguments.length<=1||arguments[1]===undefined?null:arguments[1];if(typeof n!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return o(this,new r(n,!0,t))}},{key:"detach",value:function(n){if(!(n instanceof r))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return n._owner!==this?this:(n._prev&&(n._prev._next=n._next),n._next&&(n._next._prev=n._prev),n===this._head?(this._head=n._next,n._next===null&&(this._tail=null)):n===this._tail&&(this._tail=n._prev,this._tail._next=null),n._owner=null,this)}},{key:"detachAll",value:function(){var n=this._head;if(!n)return this;for(this._head=this._tail=null;n;)n._owner=null,n=n._next;return this}}]),n}();f.MiniSignalBinding=r;i["default"]=f;t.exports=i["default"]},{}],39:[function(n,t){"use strict";t.exports=function(n,t){t=t||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},f=i.parser[t.strictMode?"strict":"loose"].exec(n),r={},u=14;u--;)r[i.key[u]]=f[u]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,function(n,t,u){t&&(r[i.q.name][t]=u)}),r}},{}],40:[function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}function y(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function p(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}i.__esModule=!0;var c=n("../core"),r=y(c),l=n("ismobilejs"),e=o(l),a=n("./accessibleTarget"),v=o(a);r.utils.mixins.delayMixin(r.DisplayObject.prototype,v.default);var w=9,u=100,b=0,k=0,s=2,h=1,d=-1e3,g=-1e3,nt=2,f=function(){function n(t){p(this,n);(e.default.tablet||e.default.phone)&&!navigator.isCocoonJS&&this.createTouchHook();var i=document.createElement("div");i.style.width=u+"px";i.style.height=u+"px";i.style.position="absolute";i.style.top=b+"px";i.style.left=k+"px";i.style.zIndex=s;this.div=i;this.pool=[];this.renderId=0;this.debug=!1;this.renderer=t;this.children=[];this._onKeyDown=this._onKeyDown.bind(this);this._onMouseMove=this._onMouseMove.bind(this);this.isActive=!1;this.isMobileAccessabillity=!1;window.addEventListener("keydown",this._onKeyDown,!1)}return n.prototype.createTouchHook=function(){var t=this,n=document.createElement("button");n.style.width=h+"px";n.style.height=h+"px";n.style.position="absolute";n.style.top=d+"px";n.style.left=g+"px";n.style.zIndex=nt;n.style.backgroundColor="#FF0000";n.title="HOOK DIV";n.addEventListener("focus",function(){t.isMobileAccessabillity=!0;t.activate();document.body.removeChild(n)});document.body.appendChild(n)},n.prototype.activate=function(){if(!this.isActive){this.isActive=!0;window.document.addEventListener("mousemove",this._onMouseMove,!0);window.removeEventListener("keydown",this._onKeyDown,!1);this.renderer.on("postrender",this.update,this);this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div)}},n.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},n.prototype.updateAccessibleObjects=function(n){var i,t;if(n.visible)for(n.accessible&&n.interactive&&(n._accessibleActive||this.addChild(n),n.renderId=this.renderId),i=n.children,t=i.length-1;t>=0;t--)this.updateAccessibleObjects(i[t])},n.prototype.update=function(){var f,t,i,u;if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),o=e.width/this.renderer.width,s=e.height/this.renderer.height,n=this.div;for(n.style.left=e.left+"px",n.style.top=e.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px",f=0;f<this.children.length;f++)t=this.children[f],t.renderId!==this.renderId?(t._accessibleActive=!1,r.utils.removeItems(this.children,f,1),this.div.removeChild(t._accessibleDiv),this.pool.push(t._accessibleDiv),t._accessibleDiv=null,f--,this.children.length===0&&this.deactivate()):(n=t._accessibleDiv,i=t.hitArea,u=t.worldTransform,t.hitArea?(n.style.left=(u.tx+i.x*u.a)*o+"px",n.style.top=(u.ty+i.y*u.d)*s+"px",n.style.width=i.width*u.a*o+"px",n.style.height=i.height*u.d*s+"px"):(i=t.getBounds(),this.capHitArea(i),n.style.left=i.x*o+"px",n.style.top=i.y*s+"px",n.style.width=i.width*o+"px",n.style.height=i.height*s+"px"));this.renderId++}},n.prototype.capHitArea=function(n){n.x<0&&(n.width+=n.x,n.x=0);n.y<0&&(n.height+=n.y,n.y=0);n.x+n.width>this.renderer.width&&(n.width=this.renderer.width-n.x);n.y+n.height>this.renderer.height&&(n.height=this.renderer.height-n.y)},n.prototype.addChild=function(n){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=u+"px",t.style.height=u+"px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=s,t.style.borderStyle="none",t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this)));n.accessibleTitle?t.title=n.accessibleTitle:n.accessibleTitle||n.accessibleHint||(t.title="displayObject "+this.tabIndex);n.accessibleHint&&t.setAttribute("aria-label",n.accessibleHint);n._accessibleActive=!0;n._accessibleDiv=t;t.displayObject=n;this.children.push(n);this.div.appendChild(n._accessibleDiv);n._accessibleDiv.tabIndex=n.tabIndex},n.prototype._onClick=function(n){var t=this.renderer.plugins.interaction;t.dispatchEvent(n.target.displayObject,"click",t.eventData)},n.prototype._onFocus=function(n){var t=this.renderer.plugins.interaction;t.dispatchEvent(n.target.displayObject,"mouseover",t.eventData)},n.prototype._onFocusOut=function(n){var t=this.renderer.plugins.interaction;t.dispatchEvent(n.target.displayObject,"mouseout",t.eventData)},n.prototype._onKeyDown=function(n){n.keyCode===w&&this.activate()},n.prototype._onMouseMove=function(){this.deactivate()},n.prototype.destroy=function(){this.div=null;for(var n=0;n<this.children.length;n++)this.children[n].div=null;window.document.removeEventListener("mousemove",this._onMouseMove);window.removeEventListener("keydown",this._onKeyDown);this.pool=null;this.children=null;this.renderer=null},n}();i.default=f;r.WebGLRenderer.registerPlugin("accessibility",f);r.CanvasRenderer.registerPlugin("accessibility",f)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(n,t,i){"use strict";i.__esModule=!0;i.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}var r,u;i.__esModule=!0;r=n("./accessibleTarget");Object.defineProperty(i,"accessibleTarget",{enumerable:!0,get:function(){return f(r).default}});u=n("./AccessibilityManager");Object.defineProperty(i,"AccessibilityManager",{enumerable:!0,get:function(){return f(u).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}function v(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var f;i.__esModule=!0;var e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=n("./autoDetectRenderer"),s=n("./display/Container"),h=u(s),r=n("./ticker"),c=n("./settings"),l=u(c),a=n("./const");f=function(){function n(t,i,u,f,e){v(this,n);typeof t=="number"&&(t=Object.assign({width:t,height:i||l.default.RENDER_OPTIONS.height,forceCanvas:!!f,sharedTicker:!!e},u));this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t);this.renderer=o.autoDetectRenderer(t);this.stage=new h.default;this._ticker=null;this.ticker=t.sharedTicker?r.shared:new r.Ticker;t.autoStart&&this.start()}return n.prototype.render=function(){this.renderer.render(this.stage)},n.prototype.stop=function(){this._ticker.stop()},n.prototype.start=function(){this._ticker.start()},n.prototype.destroy=function(n){var t=this._ticker;this.ticker=null;t.destroy();this.stage.destroy();this.stage=null;this.renderer.destroy(n);this.renderer=null;this._options=null},e(n,[{key:"ticker",set:function(n){this._ticker&&this._ticker.remove(this.render,this);this._ticker=n;n&&n.add(this.render,this,a.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),n}();i.default=f},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":121}],44:[function(n,t,i){"use strict";function s(n){return n&&n.__esModule?n:{"default":n}}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function c(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function l(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function u(n,t){if(n instanceof Array){if(n[0].substring(0,9)!=="precision"){var i=n.slice(0);return i.unshift("precision "+t+" float;"),i}}else if(n.trim().substring(0,9)!=="precision")return"precision "+t+" float;\n"+n;return n}var f;i.__esModule=!0;var e=n("pixi-gl-core"),o=n("./settings"),r=s(o);f=function(n){function t(i,f,e,o,s){return h(this,t),c(this,n.call(this,i,u(f,s||r.default.PRECISION_VERTEX),u(e,s||r.default.PRECISION_FRAGMENT),undefined,o))}return l(t,n),t}(e.GLShader);i.default=f},{"./settings":101,"pixi-gl-core":12}],45:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function c(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function l(n,t,i,r){var u=n&&n.forceCanvas;return(r!==undefined&&(u=r),!u&&f.isWebGLSupported())?new h.default(n,t,i):new o.default(n,t,i)}i.__esModule=!0;i.autoDetectRenderer=l;var u=n("./utils"),f=c(u),e=n("./renderers/canvas/CanvasRenderer"),o=r(e),s=n("./renderers/webgl/WebGLRenderer"),h=r(s)},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":125}],46:[function(n,t,i){"use strict";i.__esModule=!0;var r=i.VERSION="4.7.0",u=i.PI_2=Math.PI*2,f=i.RAD_TO_DEG=180/Math.PI,e=i.DEG_TO_RAD=Math.PI/180,o=i.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},s=i.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},h=i.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},c=i.SCALE_MODES={LINEAR:0,NEAREST:1},l=i.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},a=i.GC_MODES={AUTO:0,MANUAL:1},v=i.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,y=i.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,p=i.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,w=i.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},b=i.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},k=i.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},d=i.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},g=i.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(n,t,i){"use strict";function f(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r,u;i.__esModule=!0;r=n("../math");u=function(){function n(){f(this,n);this.minX=Infinity;this.minY=Infinity;this.maxX=-Infinity;this.maxY=-Infinity;this.rect=null}return n.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},n.prototype.clear=function(){this.updateID++;this.minX=Infinity;this.minY=Infinity;this.maxX=-Infinity;this.maxY=-Infinity},n.prototype.getRectangle=function(n){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:(n=n||new r.Rectangle(0,0,1,1),n.x=this.minX,n.y=this.minY,n.width=this.maxX-this.minX,n.height=this.maxY-this.minY,n)},n.prototype.addPoint=function(n){this.minX=Math.min(this.minX,n.x);this.maxX=Math.max(this.maxX,n.x);this.minY=Math.min(this.minY,n.y);this.maxY=Math.max(this.maxY,n.y)},n.prototype.addQuad=function(n){var r=this.minX,u=this.minY,f=this.maxX,e=this.maxY,t=n[0],i=n[1];r=t<r?t:r;u=i<u?i:u;f=t>f?t:f;e=i>e?i:e;t=n[2];i=n[3];r=t<r?t:r;u=i<u?i:u;f=t>f?t:f;e=i>e?i:e;t=n[4];i=n[5];r=t<r?t:r;u=i<u?i:u;f=t>f?t:f;e=i>e?i:e;t=n[6];i=n[7];r=t<r?t:r;u=i<u?i:u;f=t>f?t:f;e=i>e?i:e;this.minX=r;this.minY=u;this.maxX=f;this.maxY=e},n.prototype.addFrame=function(n,t,i,r,u){var l=n.worldTransform,a=l.a,v=l.b,y=l.c,p=l.d,w=l.tx,b=l.ty,o=this.minX,s=this.minY,h=this.maxX,c=this.maxY,f=a*t+y*i+w,e=v*t+p*i+b;o=f<o?f:o;s=e<s?e:s;h=f>h?f:h;c=e>c?e:c;f=a*r+y*i+w;e=v*r+p*i+b;o=f<o?f:o;s=e<s?e:s;h=f>h?f:h;c=e>c?e:c;f=a*t+y*u+w;e=v*t+p*u+b;o=f<o?f:o;s=e<s?e:s;h=f>h?f:h;c=e>c?e:c;f=a*r+y*u+w;e=v*r+p*u+b;o=f<o?f:o;s=e<s?e:s;h=f>h?f:h;c=e>c?e:c;this.minX=o;this.minY=s;this.maxX=h;this.maxY=c},n.prototype.addVertices=function(n,t,i,r){for(var u=n.worldTransform,y=u.a,p=u.b,w=u.c,b=u.d,k=u.tx,d=u.ty,f=this.minX,e=this.minY,o=this.maxX,s=this.maxY,h=i;h<r;h+=2){var a=t[h],v=t[h+1],c=y*a+w*v+k,l=b*v+p*a+d;f=c<f?c:f;e=l<e?l:e;o=c>o?c:o;s=l>s?l:s}this.minX=f;this.minY=e;this.maxX=o;this.maxY=s},n.prototype.addBounds=function(n){var t=this.minX,i=this.minY,r=this.maxX,u=this.maxY;this.minX=n.minX<t?n.minX:t;this.minY=n.minY<i?n.minY:i;this.maxX=n.maxX>r?n.maxX:r;this.maxY=n.maxY>u?n.maxY:u},n.prototype.addBoundsMask=function(n,t){var i=n.minX>t.minX?n.minX:t.minX,r=n.minY>t.minY?n.minY:t.minY,u=n.maxX<t.maxX?n.maxX:t.maxX,f=n.maxY<t.maxY?n.maxY:t.maxY;if(i<=u&&r<=f){var e=this.minX,o=this.minY,s=this.maxX,h=this.maxY;this.minX=i<e?i:e;this.minY=r<o?r:o;this.maxX=u>s?u:s;this.maxY=f>h?f:h}},n.prototype.addBoundsArea=function(n,t){var i=n.minX>t.x?n.minX:t.x,r=n.minY>t.y?n.minY:t.y,u=n.maxX<t.x+t.width?n.maxX:t.x+t.width,f=n.maxY<t.y+t.height?n.maxY:t.y+t.height;if(i<=u&&r<=f){var e=this.minX,o=this.minY,s=this.maxX,h=this.maxY;this.minX=i<e?i:e;this.minY=r<o?r:o;this.maxX=u>s?u:s;this.maxY=f>h?f:h}},n}();i.default=u},{"../math":70}],48:[function(n,t,i){"use strict";function s(n){return n&&n.__esModule?n:{"default":n}}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function c(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function l(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r;i.__esModule=!0;var f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),u=n("../utils"),e=n("./DisplayObject"),o=s(e);r=function(n){function t(){h(this,t);var i=c(this,n.call(this));return i.children=[],i}return l(t,n),t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(n){var i=arguments.length,t;if(i>1)for(t=0;t<i;t++)this.addChild(arguments[t]);else{n.parent&&n.parent.removeChild(n);n.parent=this;n.transform._parentID=-1;this.children.push(n);this._boundsID++;this.onChildrenChange(this.children.length-1);n.emit("added",this)}return n},t.prototype.addChildAt=function(n,t){if(t<0||t>this.children.length)throw new Error(n+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);n.parent&&n.parent.removeChild(n);n.parent=this;n.transform._parentID=-1;this.children.splice(t,0,n);this._boundsID++;this.onChildrenChange(t);return n.emit("added",this),n},t.prototype.swapChildren=function(n,t){if(n!==t){var i=this.getChildIndex(n),r=this.getChildIndex(t);this.children[i]=t;this.children[r]=n;this.onChildrenChange(i<r?i:r)}},t.prototype.getChildIndex=function(n){var t=this.children.indexOf(n);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(n,t){if(t<0||t>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(n);u.removeItems(this.children,i,1);this.children.splice(t,0,n);this.onChildrenChange(t)},t.prototype.getChildAt=function(n){if(n<0||n>=this.children.length)throw new Error("getChildAt: Index ("+n+") does not exist.");return this.children[n]},t.prototype.removeChild=function(n){var r=arguments.length,t,i;if(r>1)for(t=0;t<r;t++)this.removeChild(arguments[t]);else{if(i=this.children.indexOf(n),i===-1)return null;n.parent=null;n.transform._parentID=-1;u.removeItems(this.children,i,1);this._boundsID++;this.onChildrenChange(i);n.emit("removed",this)}return n},t.prototype.removeChildAt=function(n){var t=this.getChildAt(n);t.parent=null;t.transform._parentID=-1;u.removeItems(this.children,n,1);this._boundsID++;this.onChildrenChange(n);return t.emit("removed",this),t},t.prototype.removeChildren=function(){var u=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,f=arguments[1],e=u,o=typeof f=="number"?f:this.children.length,i=o-e,n=void 0,t,r;if(i>0&&i<=o){for(n=this.children.splice(e,i),t=0;t<n.length;++t)n[t].parent=null,n[t].transform&&(n[t].transform._parentID=-1);this._boundsID++;this.onChildrenChange(u);for(r=0;r<n.length;++r)n[r].emit("removed",this);return n}if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.");},t.prototype.updateTransform=function(){var n,i,t;for(this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,n=0,i=this.children.length;n<i;++n)t=this.children[n],t.visible&&t.updateTransform()},t.prototype.calculateBounds=function(){var t,n;for(this._bounds.clear(),this._calculateBounds(),t=0;t<this.children.length;t++)(n=this.children[t],n.visible&&n.renderable)&&(n.calculateBounds(),n._mask?(n._mask.calculateBounds(),this._bounds.addBoundsMask(n._bounds,n._mask._bounds)):n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds));this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(n){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(n);else{this._renderWebGL(n);for(var t=0,i=this.children.length;t<i;++t)this.children[t].renderWebGL(n)}},t.prototype.renderAdvancedWebGL=function(n){var t,u,i,r,f;if(n.flush(),t=this._filters,u=this._mask,t){for(this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0,i=0;i<t.length;i++)t[i].enabled&&this._enabledFilters.push(t[i]);this._enabledFilters.length&&n.filterManager.pushFilter(this,this._enabledFilters)}for(u&&n.maskManager.pushMask(this,this._mask),this._renderWebGL(n),r=0,f=this.children.length;r<f;r++)this.children[r].renderWebGL(n);n.flush();u&&n.maskManager.popMask(this,this._mask);t&&this._enabledFilters&&this._enabledFilters.length&&n.filterManager.popFilter()},t.prototype._renderWebGL=function(){},t.prototype._renderCanvas=function(){},t.prototype.renderCanvas=function(n){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&n.maskManager.pushMask(this._mask);this._renderCanvas(n);for(var t=0,i=this.children.length;t<i;++t)this.children[t].renderCanvas(n);this._mask&&n.maskManager.popMask(n)}},t.prototype.destroy=function(t){var u,r,i;if(n.prototype.destroy.call(this),u=typeof t=="boolean"?t:t&&t.children,r=this.removeChildren(0,this.children.length),u)for(i=0;i<r.length;++i)r[i].destroy(t)},f(t,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(n){var t=this.getLocalBounds().width;this.scale.x=t!==0?n/t:1;this._width=n}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(n){var t=this.getLocalBounds().height;this.scale.y=t!==0?n/t:1;this._height=n}}]),t}(o.default);i.default=r;r.prototype.containerUpdateTransform=r.prototype.updateTransform},{"../utils":125,"./DisplayObject":49}],49:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function k(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function d(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function g(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u;i.__esModule=!0;var e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=n("eventemitter3"),s=r(o),h=n("../const"),c=n("../settings"),l=r(c),a=n("./TransformStatic"),v=r(a),y=n("./Transform"),p=r(y),w=n("./Bounds"),b=r(w),f=n("../math");u=function(n){function t(){k(this,t);var i=d(this,n.call(this)),r=l.default.TRANSFORM_MODE===h.TRANSFORM_MODE.STATIC?v.default:p.default;return i.tempDisplayObjectParent=null,i.transform=new r,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new b.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return g(t,n),t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform);this.worldAlpha=this.alpha*this.parent.worldAlpha;this._bounds.updateID++},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.getBounds=function(n,t){return n||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(this._boundsRect||(this._boundsRect=new f.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(n){var i=this.transform,r=this.parent,t;return this.parent=null,this.transform=this._tempDisplayObjectParent.transform,n||(this._localBoundsRect||(this._localBoundsRect=new f.Rectangle),n=this._localBoundsRect),t=this.getBounds(!1,n),this.parent=r,this.transform=i,t},t.prototype.toGlobal=function(n,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(n,t)},t.prototype.toLocal=function(n,t,i,r){return t&&(n=t.toGlobal(n,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(n,i)},t.prototype.renderWebGL=function(){},t.prototype.renderCanvas=function(){},t.prototype.setParent=function(n){if(!n||!n.addChild)throw new Error("setParent: Argument must be a Container");return n.addChild(this),n},t.prototype.setTransform=function(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,t=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1,u=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0,f=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0,e=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0,o=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0,s=arguments.length>8&&arguments[8]!==undefined?arguments[8]:0;return this.position.x=i,this.position.y=r,this.scale.x=n?n:1,this.scale.y=t?t:1,this.rotation=u,this.skew.x=f,this.skew.y=e,this.pivot.x=o,this.pivot.y=s,this},t.prototype.destroy=function(){this.removeAllListeners();this.parent&&this.parent.removeChild(this);this.transform=null;this.parent=null;this._bounds=null;this._currentBounds=null;this._mask=null;this.filterArea=null;this.interactive=!1;this.interactiveChildren=!1;this._destroyed=!0},e(t,[{key:"_tempDisplayObjectParent",get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new t),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(n){this.transform.position.x=n}},{key:"y",get:function(){return this.position.y},set:function(n){this.transform.position.y=n}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(n){this.transform.position.copy(n)}},{key:"scale",get:function(){return this.transform.scale},set:function(n){this.transform.scale.copy(n)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(n){this.transform.pivot.copy(n)}},{key:"skew",get:function(){return this.transform.skew},set:function(n){this.transform.skew.copy(n)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(n){this.transform.rotation=n}},{key:"worldVisible",get:function(){var n=this;do{if(!n.visible)return!1;n=n.parent}while(n);return!0}},{key:"mask",get:function(){return this._mask},set:function(n){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1);this._mask=n;this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(n){this._filters=n&&n.slice()}}]),t}(s.default);i.default=u;u.prototype.displayObjectUpdateTransform=u.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(n,t,i){"use strict";function s(n){return n&&n.__esModule?n:{"default":n}}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function c(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function l(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u;i.__esModule=!0;var f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=n("../math"),e=n("./TransformBase"),o=s(e);u=function(n){function t(){h(this,t);var i=c(this,n.call(this));return i.position=new r.Point(0,0),i.scale=new r.Point(1,1),i.skew=new r.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new r.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return l(t,n),t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y);this._sx=Math.sin(this._rotation+this.skew._y);this._cy=-Math.sin(this._rotation-this.skew._x);this._sy=Math.cos(this._rotation-this.skew._x)},t.prototype.updateLocalTransform=function(){var n=this.localTransform;n.a=this._cx*this.scale.x;n.b=this._sx*this.scale.x;n.c=this._cy*this.scale.y;n.d=this._sy*this.scale.y;n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c);n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d)},t.prototype.updateTransform=function(n){var t=this.localTransform,i,r;t.a=this._cx*this.scale.x;t.b=this._sx*this.scale.x;t.c=this._cy*this.scale.y;t.d=this._sy*this.scale.y;t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c);t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);i=n.worldTransform;r=this.worldTransform;r.a=t.a*i.a+t.b*i.c;r.b=t.a*i.b+t.b*i.d;r.c=t.c*i.a+t.d*i.c;r.d=t.c*i.b+t.d*i.d;r.tx=t.tx*i.a+t.ty*i.c+i.tx;r.ty=t.tx*i.b+t.ty*i.d+i.ty;this._worldID++},t.prototype.setFromMatrix=function(n){n.decompose(this)},f(t,[{key:"rotation",get:function(){return this._rotation},set:function(n){this._rotation=n;this.updateSkew()}}]),t}(o.default);i.default=u},{"../math":70,"./TransformBase":51}],51:[function(n,t,i){"use strict";function f(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u,r;i.__esModule=!0;u=n("../math");r=function(){function n(){f(this,n);this.worldTransform=new u.Matrix;this.localTransform=new u.Matrix;this._worldID=0;this._parentID=0}return n.prototype.updateLocalTransform=function(){},n.prototype.updateTransform=function(n){var t=n.worldTransform,r=this.worldTransform,i=this.localTransform;r.a=i.a*t.a+i.b*t.c;r.b=i.a*t.b+i.b*t.d;r.c=i.c*t.a+i.d*t.c;r.d=i.c*t.b+i.d*t.d;r.tx=i.tx*t.a+i.ty*t.c+t.tx;r.ty=i.tx*t.b+i.ty*t.d+t.ty;this._worldID++},n}();i.default=r;r.prototype.updateWorldTransform=r.prototype.updateTransform;r.IDENTITY=new r},{"../math":70}],52:[function(n,t,i){"use strict";function s(n){return n&&n.__esModule?n:{"default":n}}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function c(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function l(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u;i.__esModule=!0;var f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=n("../math"),e=n("./TransformBase"),o=s(e);u=function(n){function t(){h(this,t);var i=c(this,n.call(this));return i.position=new r.ObservablePoint(i.onChange,i,0,0),i.scale=new r.ObservablePoint(i.onChange,i,1,1),i.pivot=new r.ObservablePoint(i.onChange,i,0,0),i.skew=new r.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return l(t,n),t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y);this._sx=Math.sin(this._rotation+this.skew._y);this._cy=-Math.sin(this._rotation-this.skew._x);this._sy=Math.cos(this._rotation-this.skew._x);this._localID++},t.prototype.updateLocalTransform=function(){var n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale._x,n.b=this._sx*this.scale._x,n.c=this._cy*this.scale._y,n.d=this._sy*this.scale._y,n.tx=this.position._x-(this.pivot._x*n.a+this.pivot._y*n.c),n.ty=this.position._y-(this.pivot._x*n.b+this.pivot._y*n.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(n){var t=this.localTransform,i,r;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1);this._parentID!==n._worldID&&(i=n.worldTransform,r=this.worldTransform,r.a=t.a*i.a+t.b*i.c,r.b=t.a*i.b+t.b*i.d,r.c=t.c*i.a+t.d*i.c,r.d=t.c*i.b+t.d*i.d,r.tx=t.tx*i.a+t.ty*i.c+i.tx,r.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=n._worldID,this._worldID++)},t.prototype.setFromMatrix=function(n){n.decompose(this);this._localID++},f(t,[{key:"rotation",get:function(){return this._rotation},set:function(n){this._rotation=n;this.updateSkew()}}]),t}(o.default);i.default=u},{"../math":70,"./TransformBase":51}],53:[function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}function et(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function ot(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function st(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}i.__esModule=!0;var a=n("../display/Container"),v=f(a),y=n("../textures/RenderTexture"),p=f(y),w=n("../textures/Texture"),s=f(w),b=n("./GraphicsData"),k=f(b),d=n("../sprites/Sprite"),g=f(d),u=n("../math"),h=n("../utils"),r=n("../const"),nt=n("../display/Bounds"),tt=f(nt),it=n("./utils/bezierCurveTo"),rt=f(it),ut=n("../renderers/canvas/CanvasRenderer"),ft=f(ut);var c=void 0,e=new u.Matrix,o=new u.Point,ht=new Float32Array(4),ct=new Float32Array(4),l=function(n){function t(){var u=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1,i;return et(this,t),i=ot(this,n.call(this)),i.fillAlpha=1,i.lineWidth=0,i.nativeLines=u,i.lineColor=0,i.graphicsData=[],i.tint=16777215,i._prevTint=16777215,i.blendMode=r.BLEND_MODES.NORMAL,i.currentPath=null,i._webGL={},i.isMask=!1,i.boundsPadding=0,i._localBounds=new tt.default,i.dirty=0,i.fastRectDirty=-1,i.clearDirty=0,i.boundsDirty=-1,i.cachedSpriteDirty=!1,i._spriteRect=null,i._fastRect=!1,i}return st(t,n),t.prototype.clone=function(){var n=new t,i;for(n.renderable=this.renderable,n.fillAlpha=this.fillAlpha,n.lineWidth=this.lineWidth,n.lineColor=this.lineColor,n.tint=this.tint,n.blendMode=this.blendMode,n.isMask=this.isMask,n.boundsPadding=this.boundsPadding,n.dirty=0,n.cachedSpriteDirty=this.cachedSpriteDirty,i=0;i<this.graphicsData.length;++i)n.graphicsData.push(this.graphicsData[i].clone());return n.currentPath=n.graphicsData[n.graphicsData.length-1],n.updateLocalBounds(),n},t.prototype.lineStyle=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,n;return this.lineWidth=t,this.lineColor=i,this.lineAlpha=r,this.currentPath&&(this.currentPath.shape.points.length?(n=new u.Polygon(this.currentPath.shape.points.slice(-2)),n.closed=!1,this.drawShape(n)):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},t.prototype.moveTo=function(n,t){var i=new u.Polygon([n,t]);return i.closed=!1,this.drawShape(i),this},t.prototype.lineTo=function(n,t){return this.currentPath.shape.points.push(n,t),this.dirty++,this},t.prototype.quadraticCurveTo=function(n,t,i,r){var h,c,e,u;this.currentPath?this.currentPath.shape.points.length===0&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var l=20,f=this.currentPath.shape.points,o=0,s=0;for(f.length===0&&this.moveTo(0,0),h=f[f.length-2],c=f[f.length-1],e=1;e<=l;++e)u=e/l,o=h+(n-h)*u,s=c+(t-c)*u,f.push(o+(n+(i-n)*u-o)*u,s+(t+(r-t)*u-s)*u);return this.dirty++,this},t.prototype.bezierCurveTo=function(n,t,i,r,u,f){this.currentPath?this.currentPath.shape.points.length===0&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var e=this.currentPath.shape.points,o=e[e.length-2],s=e[e.length-1];return e.length-=2,rt.default(o,s,n,t,i,r,u,f,e),this.dirty++,this},t.prototype.arcTo=function(n,t,i,r,u){this.currentPath?this.currentPath.shape.points.length===0&&this.currentPath.shape.points.push(n,t):this.moveTo(n,t);var f=this.currentPath.shape.points,g=f[f.length-2],nt=f[f.length-1],e=nt-t,o=g-n,s=r-t,h=i-n,a=Math.abs(e*h-o*s);if(a<1e-8||u===0)(f[f.length-2]!==n||f[f.length-1]!==t)&&f.push(n,t);else{var p=e*e+o*o,w=s*s+h*h,b=e*s+o*h,c=u*Math.sqrt(p)/a,l=u*Math.sqrt(w)/a,k=c*b/p,d=l*b/w,v=c*h+l*o,y=c*s+l*e,tt=o*(l+k),it=e*(l+k),rt=h*(c+d),ut=s*(c+d),ft=Math.atan2(it-y,tt-v),et=Math.atan2(ut-y,rt-v);this.arc(v+n,y+t,u,ft,et,o*s>h*e)}return this.dirty++,this},t.prototype.arc=function(n,t,i,u,f){var y=arguments.length>5&&arguments[5]!==undefined?arguments[5]:!1,s,c,o;if(u===f||(!y&&f<=u?f+=r.PI_2:y&&u<=f&&(u+=r.PI_2),s=f-u,c=Math.ceil(Math.abs(s)/r.PI_2)*40,s===0))return this;var l=n+Math.cos(u)*i,a=t+Math.sin(u)*i,e=this.currentPath?this.currentPath.shape.points:null;e?(e[e.length-2]!==l||e[e.length-1]!==a)&&e.push(l,a):(this.moveTo(l,a),e=this.currentPath.shape.points);var h=s/(c*2),g=h*2,p=Math.cos(h),w=Math.sin(h),v=c-1,nt=v%1/v;for(o=0;o<=v;++o){var tt=o+nt*o,b=h+u+g*tt,k=Math.cos(b),d=-Math.sin(b);e.push((p*k+w*d)*i+n,(p*-d+w*k)*i+t)}return this.dirty++,this},t.prototype.beginFill=function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this.filling=!0,this.fillColor=n,this.fillAlpha=t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},t.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},t.prototype.drawRect=function(n,t,i,r){return this.drawShape(new u.Rectangle(n,t,i,r)),this},t.prototype.drawRoundedRect=function(n,t,i,r,f){return this.drawShape(new u.RoundedRectangle(n,t,i,r,f)),this},t.prototype.drawCircle=function(n,t,i){return this.drawShape(new u.Circle(n,t,i)),this},t.prototype.drawEllipse=function(n,t,i,r){return this.drawShape(new u.Ellipse(n,t,i,r)),this},t.prototype.drawPolygon=function(n){var t=n,f=!0,i,r;if(t instanceof u.Polygon&&(f=t.closed,t=t.points),!Array.isArray(t))for(t=new Array(arguments.length),i=0;i<t.length;++i)t[i]=arguments[i];return r=new u.Polygon(t),r.closed=f,this.drawShape(r),this},t.prototype.drawStar=function(n,t,i,u,f){var l=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0,e,o,s;f=f||u/2;var a=Math.PI/-2+l,h=i*2,v=r.PI_2/h,c=[];for(e=0;e<h;e++)o=e%2?f:u,s=e*v+a,c.push(n+o*Math.cos(s),t+o*Math.sin(s));return this.drawPolygon(c)},t.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},t.prototype.isFastRect=function(){return this.graphicsData.length===1&&this.graphicsData[0].shape.type===r.SHAPES.RECT&&!this.graphicsData[0].lineWidth},t.prototype._renderWebGL=function(n){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect());this._fastRect?this._renderSpriteRect(n):(n.setObjectRenderer(n.plugins.graphics),n.plugins.graphics.render(this))},t.prototype._renderSpriteRect=function(n){var i=this.graphicsData[0].shape,t,r,u;this._spriteRect||(this._spriteRect=new g.default(new s.default(s.default.WHITE)));t=this._spriteRect;this.tint===16777215?t.tint=this.graphicsData[0].fillColor:(r=ht,u=ct,h.hex2rgb(this.graphicsData[0].fillColor,r),h.hex2rgb(this.tint,u),r[0]*=u[0],r[1]*=u[1],r[2]*=u[2],t.tint=h.rgb2hex(r));t.alpha=this.graphicsData[0].fillAlpha;t.worldAlpha=this.worldAlpha*t.alpha;t.blendMode=this.blendMode;t._texture._frame.width=i.width;t._texture._frame.height=i.height;t.transform.worldTransform=this.transform.worldTransform;t.anchor.set(-i.x/i.width,-i.y/i.height);t._onAnchorUpdate();t._renderWebGL(n)},t.prototype._renderCanvas=function(n){this.isMask!==!0&&n.plugins.graphics.render(this)},t.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var n=this._localBounds;this._bounds.addFrame(this.transform,n.minX,n.minY,n.maxX,n.maxY)},t.prototype.containsPoint=function(n){var u,i,t,r,f;for(this.worldTransform.applyInverse(n,o),u=this.graphicsData,i=0;i<u.length;++i)if((t=u[i],t.fill)&&t.shape&&t.shape.contains(o.x,o.y)){if(t.holes)for(r=0;r<t.holes.length;r++)if(f=t.holes[r],f.contains(o.x,o.y))return!1;return!0}return!1},t.prototype.updateLocalBounds=function(){var f=Infinity,e=-Infinity,o=Infinity,s=-Infinity,g,l,d;if(this.graphicsData.length){var h=0,n=0,t=0,i=0,u=0;for(g=0;g<this.graphicsData.length;g++){var tt=this.graphicsData[g],nt=tt.type,c=tt.lineWidth;if(h=tt.shape,nt===r.SHAPES.RECT||nt===r.SHAPES.RREC)n=h.x-c/2,t=h.y-c/2,i=h.width+c,u=h.height+c,f=n<f?n:f,e=n+i>e?n+i:e,o=t<o?t:o,s=t+u>s?t+u:s;else if(nt===r.SHAPES.CIRC)n=h.x,t=h.y,i=h.radius+c/2,u=h.radius+c/2,f=n-i<f?n-i:f,e=n+i>e?n+i:e,o=t-u<o?t-u:o,s=t+u>s?t+u:s;else if(nt===r.SHAPES.ELIP)n=h.x,t=h.y,i=h.width+c/2,u=h.height+c/2,f=n-i<f?n-i:f,e=n+i>e?n+i:e,o=t-u<o?t-u:o,s=t+u>s?t+u:s;else{var a=h.points,it=0,rt=0,v=0,y=0,p=0,w=0,b=0,k=0;for(l=0;l+2<a.length;l+=2)(n=a[l],t=a[l+1],it=a[l+2],rt=a[l+3],v=Math.abs(it-n),y=Math.abs(rt-t),u=c,i=Math.sqrt(v*v+y*y),i<1e-9)||(p=(u/i*y+v)/2,w=(u/i*v+y)/2,b=(it+n)/2,k=(rt+t)/2,f=b-p<f?b-p:f,e=b+p>e?b+p:e,o=k-w<o?k-w:o,s=k+w>s?k+w:s)}}}else f=0,e=0,o=0,s=0;d=this.boundsPadding;this._localBounds.minX=f-d;this._localBounds.maxX=e+d;this._localBounds.minY=o-d;this._localBounds.maxY=s+d},t.prototype.drawShape=function(n){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop();this.currentPath=null;var t=new k.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,n);return this.graphicsData.push(t),t.type===r.SHAPES.POLY&&(t.shape.closed=t.shape.closed||this.filling,this.currentPath=t),this.dirty++,t},t.prototype.generateCanvasTexture=function(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1,t=this.getLocalBounds(),u=p.default.create(t.width,t.height,n,r),i;return c||(c=new ft.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(e),e.invert(),e.tx-=t.x,e.ty-=t.y,c.render(this,u,!0,e),i=s.default.fromCanvas(u.baseTexture._canvasRenderTarget.canvas,n,"graphics"),i.baseTexture.resolution=r,i.baseTexture.update(),i},t.prototype.closePath=function(){var n=this.currentPath;return n&&n.shape&&n.shape.close(),this},t.prototype.addHole=function(){var n=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(n.shape),this.currentPath=null,this},t.prototype.destroy=function(t){var i,u,r;for(n.prototype.destroy.call(this,t),i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(u in this._webgl)for(r=0;r<this._webgl[u].data.length;++r)this._webgl[u].data[r].destroy();this._spriteRect&&this._spriteRect.destroy();this.graphicsData=null;this.currentPath=null;this._webgl=null;this._localBounds=null},t}(v.default);i.default=l;l._SPRITE_TEXTURE=null},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":125,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}i.__esModule=!0;var u=function(){function n(t,i,u,f,e,o,s,h){r(this,n);this.lineWidth=t;this.nativeLines=s;this.lineColor=i;this.lineAlpha=u;this._lineTint=i;this.fillColor=f;this.fillAlpha=e;this._fillTint=f;this.fill=o;this.holes=[];this.shape=h;this.type=h.type}return n.prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},n.prototype.addHole=function(n){this.holes.push(n)},n.prototype.destroy=function(){this.shape=null;this.holes=null},n}();i.default=u},{}],55:[function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u;i.__esModule=!0;var f=n("../../renderers/canvas/CanvasRenderer"),e=o(f),r=n("../../const");u=function(){function n(t){s(this,n);this.renderer=t}return n.prototype.render=function(n){var ut=this.renderer,t=ut.context,s=n.worldAlpha,a=n.transform.worldTransform,v=ut.resolution,d,g;for(this._prevTint!==this.tint&&(this.dirty=!0),t.setTransform(a.a*v,a.b*v,a.c*v,a.d*v,a.tx*v,a.ty*v),n.dirty&&(this.updateGraphicsTint(n),n.dirty=!1),ut.setBlendMode(n.blendMode),d=0;d<n.graphicsData.length;d++){var i=n.graphicsData[d],u=i.shape,w=i._fillTint,b=i._lineTint;if(t.lineWidth=i.lineWidth,i.type===r.SHAPES.POLY){for(t.beginPath(),this.renderPolygon(u.points,u.closed,t),g=0;g<i.holes.length;g++)this.renderPolygon(i.holes[g].points,!0,t);i.fill&&(t.globalAlpha=i.fillAlpha*s,t.fillStyle="#"+("00000"+(w|0).toString(16)).substr(-6),t.fill());i.lineWidth&&(t.globalAlpha=i.lineAlpha*s,t.strokeStyle="#"+("00000"+(b|0).toString(16)).substr(-6),t.stroke())}else if(i.type===r.SHAPES.RECT)(i.fillColor||i.fillColor===0)&&(t.globalAlpha=i.fillAlpha*s,t.fillStyle="#"+("00000"+(w|0).toString(16)).substr(-6),t.fillRect(u.x,u.y,u.width,u.height)),i.lineWidth&&(t.globalAlpha=i.lineAlpha*s,t.strokeStyle="#"+("00000"+(b|0).toString(16)).substr(-6),t.strokeRect(u.x,u.y,u.width,u.height));else if(i.type===r.SHAPES.CIRC)t.beginPath(),t.arc(u.x,u.y,u.radius,0,2*Math.PI),t.closePath(),i.fill&&(t.globalAlpha=i.fillAlpha*s,t.fillStyle="#"+("00000"+(w|0).toString(16)).substr(-6),t.fill()),i.lineWidth&&(t.globalAlpha=i.lineAlpha*s,t.strokeStyle="#"+("00000"+(b|0).toString(16)).substr(-6),t.stroke());else if(i.type===r.SHAPES.ELIP){var nt=u.width*2,tt=u.height*2,y=u.x-nt/2,k=u.y-tt/2;t.beginPath();var ot=.5522848,it=nt/2*ot,rt=tt/2*ot,ft=y+nt,et=k+tt,p=y+nt/2,h=k+tt/2;t.moveTo(y,h);t.bezierCurveTo(y,h-rt,p-it,k,p,k);t.bezierCurveTo(p+it,k,ft,h-rt,ft,h);t.bezierCurveTo(ft,h+rt,p+it,et,p,et);t.bezierCurveTo(p-it,et,y,h+rt,y,h);t.closePath();i.fill&&(t.globalAlpha=i.fillAlpha*s,t.fillStyle="#"+("00000"+(w|0).toString(16)).substr(-6),t.fill());i.lineWidth&&(t.globalAlpha=i.lineAlpha*s,t.strokeStyle="#"+("00000"+(b|0).toString(16)).substr(-6),t.stroke())}else if(i.type===r.SHAPES.RREC){var f=u.x,e=u.y,c=u.width,l=u.height,o=u.radius,st=Math.min(c,l)/2|0;o=o>st?st:o;t.beginPath();t.moveTo(f,e+o);t.lineTo(f,e+l-o);t.quadraticCurveTo(f,e+l,f+o,e+l);t.lineTo(f+c-o,e+l);t.quadraticCurveTo(f+c,e+l,f+c,e+l-o);t.lineTo(f+c,e+o);t.quadraticCurveTo(f+c,e,f+c-o,e);t.lineTo(f+o,e);t.quadraticCurveTo(f,e,f,e+o);t.closePath();(i.fillColor||i.fillColor===0)&&(t.globalAlpha=i.fillAlpha*s,t.fillStyle="#"+("00000"+(w|0).toString(16)).substr(-6),t.fill());i.lineWidth&&(t.globalAlpha=i.lineAlpha*s,t.strokeStyle="#"+("00000"+(b|0).toString(16)).substr(-6),t.stroke())}}},n.prototype.updateGraphicsTint=function(n){var t;n._prevTint=n.tint;var f=(n.tint>>16&255)/255,e=(n.tint>>8&255)/255,o=(n.tint&255)/255;for(t=0;t<n.graphicsData.length;++t){var i=n.graphicsData[t],r=i.fillColor|0,u=i.lineColor|0;i._fillTint=((r>>16&255)/255*f*255<<16)+((r>>8&255)/255*e*255<<8)+(r&255)/255*o*255;i._lineTint=((u>>16&255)/255*f*255<<16)+((u>>8&255)/255*e*255<<8)+(u&255)/255*o*255}},n.prototype.renderPolygon=function(n,t,i){i.moveTo(n[0],n[1]);for(var r=1;r<n.length/2;++r)i.lineTo(n[r*2],n[r*2+1]);t&&i.closePath()},n.prototype.destroy=function(){this.renderer=null},n}();i.default=u;e.default.registerPlugin("graphics",u)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(n,t,i){"use strict";function r(n,t,i,r,u,f,e,o){var v=arguments.length>8&&arguments[8]!==undefined?arguments[8]:[],w=20,h=0,c=0,y=0,l=0,p=0,a,s;for(v.push(n,t),a=1,s=0;a<=w;++a)s=a/w,h=1-s,c=h*h,y=c*h,l=s*s,p=l*s,v.push(y*n+3*c*s*i+3*h*l*u+p*e,y*t+3*c*s*r+3*h*l*f+p*o);return v}i.__esModule=!0;i.default=r},{}],57:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function it(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function rt(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function ut(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var f;i.__esModule=!0;var o=n("../../utils"),u=n("../../const"),s=n("../../renderers/webgl/utils/ObjectRenderer"),e=r(s),h=n("../../renderers/webgl/WebGLRenderer"),c=r(h),l=n("./WebGLGraphicsData"),a=r(l),v=n("./shaders/PrimitiveShader"),y=r(v),p=n("./utils/buildPoly"),w=r(p),b=n("./utils/buildRectangle"),k=r(b),d=n("./utils/buildRoundedRectangle"),g=r(d),nt=n("./utils/buildCircle"),tt=r(nt);f=function(n){function t(i){it(this,t);var r=rt(this,n.call(this,i));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=i.gl,r.CONTEXT_UID=0,r}return ut(t,n),t.prototype.onContextChange=function(){this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.primitiveShader=new y.default(this.gl)},t.prototype.destroy=function(){e.default.prototype.destroy.call(this);for(var n=0;n<this.graphicsDataPool.length;++n)this.graphicsDataPool[n].destroy();this.graphicsDataPool=null},t.prototype.render=function(n){var i=this.renderer,e=i.gl,t=void 0,r=n._webGL[this.CONTEXT_UID],s,f,h,u;for(r&&n.dirty===r.dirty||(this.updateGraphics(n),r=n._webGL[this.CONTEXT_UID]),s=this.primitiveShader,i.bindShader(s),i.state.setBlendMode(n.blendMode),f=0,h=r.data.length;f<h;f++)t=r.data[f],u=t.shader,i.bindShader(u),u.uniforms.translationMatrix=n.transform.worldTransform.toArray(!0),u.uniforms.tint=o.hex2rgb(n.tint),u.uniforms.alpha=n.worldAlpha,i.bindVao(t.vao),t.nativeLines?e.drawArrays(e.LINES,0,t.points.length/6):t.vao.draw(e.TRIANGLE_STRIP,t.indices.length)},t.prototype.updateGraphics=function(n){var h=this.renderer.gl,t=n._webGL[this.CONTEXT_UID],e,r,f,o,i,s;if(t||(t=n._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:h,clearDirty:-1,dirty:-1}),t.dirty=n.dirty,n.clearDirty!==t.clearDirty){for(t.clearDirty=n.clearDirty,e=0;e<t.data.length;e++)this.graphicsDataPool.push(t.data[e]);t.data.length=0;t.lastIndex=0}for(r=void 0,f=void 0,o=t.lastIndex;o<n.graphicsData.length;o++)i=n.graphicsData[o],r=this.getWebGLData(t,0),i.nativeLines&&i.lineWidth&&(f=this.getWebGLData(t,0,!0),t.lastIndex++),i.type===u.SHAPES.POLY&&w.default(i,r,f),i.type===u.SHAPES.RECT?k.default(i,r,f):i.type===u.SHAPES.CIRC||i.type===u.SHAPES.ELIP?tt.default(i,r,f):i.type===u.SHAPES.RREC&&g.default(i,r,f),t.lastIndex++;for(this.renderer.bindVao(null),s=0;s<t.data.length;s++)r=t.data[s],r.dirty&&r.upload()},t.prototype.getWebGLData=function(n,t,i){var r=n.data[n.data.length-1];return(!r||r.nativeLines!==i||r.points.length>32e4)&&(r=this.graphicsDataPool.pop()||new a.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),r.nativeLines=i,r.reset(t),n.data.push(r)),r.dirty=!0,r},t}(e.default);i.default=f;c.default.registerPlugin("graphics",f)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":125,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u,r,f;i.__esModule=!0;u=n("pixi-gl-core");r=e(u);f=function(){function n(t,i,u){o(this,n);this.gl=t;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=r.default.GLBuffer.createVertexBuffer(t);this.indexBuffer=r.default.GLBuffer.createIndexBuffer(t);this.dirty=!0;this.nativeLines=!1;this.glPoints=null;this.glIndices=null;this.shader=i;this.vao=new r.default.VertexArrayObject(t,u).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,t.FLOAT,!1,24,8)}return n.prototype.reset=function(){this.points.length=0;this.indices.length=0},n.prototype.upload=function(){this.glPoints=new Float32Array(this.points);this.buffer.upload(this.glPoints);this.glIndices=new Uint16Array(this.indices);this.indexBuffer.upload(this.glIndices);this.dirty=!1},n.prototype.destroy=function(){this.color=null;this.points=null;this.indices=null;this.vao.destroy();this.buffer.destroy();this.indexBuffer.destroy();this.gl=null;this.buffer=null;this.indexBuffer=null;this.glPoints=null;this.glIndices=null},n}();i.default=f},{"pixi-gl-core":12}],59:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function h(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r,u,f;i.__esModule=!0;r=n("../../../Shader");u=e(r);f=function(n){function t(i){return o(this,t),s(this,n.call(this,i,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}","varying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}"))}return h(t,n),t}(u.default);i.default=f},{"../../../Shader":44}],60:[function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}function s(n,t,i){var r=n.shape,p=r.x,w=r.y,o=void 0,s=void 0,v,h,l,it,a;if(n.type===f.SHAPES.CIRC?(o=r.radius,s=r.radius):(o=r.width,s=r.height),o!==0&&s!==0){if(v=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),h=Math.PI*2/v,n.fill){var b=e.hex2rgb(n.fillColor),c=n.fillAlpha,g=b[0]*c,nt=b[1]*c,tt=b[2]*c,k=t.points,d=t.indices,y=k.length/6;for(d.push(y),l=0;l<v+1;l++)k.push(p,w,g,nt,tt,c),k.push(p+Math.sin(h*l)*o,w+Math.cos(h*l)*s,g,nt,tt,c),d.push(y++,y++);d.push(y-1)}if(n.lineWidth){for(it=n.points,n.points=[],a=0;a<v+1;a++)n.points.push(p+Math.sin(h*a)*o,w+Math.cos(h*a)*s);u.default(n,t,i);n.points=it}}}i.__esModule=!0;i.default=s;var r=n("./buildLine"),u=o(r),f=n("../../../const"),e=n("../../../utils")},{"../../../const":46,"../../../utils":125,"./buildLine":61}],61:[function(n,t,i){"use strict";function f(n,t){var i=n.points,rt,nt,ct,lt,g,pt;if(i.length!==0){rt=new r.Point(i[0],i[1]);nt=new r.Point(i[i.length-2],i[i.length-1]);rt.x===nt.x&&rt.y===nt.y&&(i=i.slice(),i.pop(),i.pop(),nt=new r.Point(i[i.length-2],i[i.length-1]),ct=nt.x+(rt.x-nt.x)*.5,lt=nt.y+(rt.y-nt.y)*.5,i.unshift(ct,lt),i.push(ct,lt));var h=t.points,at=t.indices,ut=i.length/2,wt=i.length,vt=h.length/6,a=n.lineWidth/2,yt=u.hex2rgb(n.lineColor),c=n.lineAlpha,v=yt[0]*c,y=yt[1]*c,p=yt[2]*c,k=i[0],d=i[1],o=i[2],s=i[3],ft=0,et=0,f=-(d-s),e=k-o,w=0,b=0,tt=0,it=0,l=Math.sqrt(f*f+e*e);for(f/=l,e/=l,f*=a,e*=a,h.push(k-f,d-e,v,y,p,c),h.push(k+f,d+e,v,y,p,c),g=1;g<ut-1;++g){k=i[(g-1)*2];d=i[(g-1)*2+1];o=i[g*2];s=i[g*2+1];ft=i[(g+1)*2];et=i[(g+1)*2+1];f=-(d-s);e=k-o;l=Math.sqrt(f*f+e*e);f/=l;e/=l;f*=a;e*=a;w=-(s-et);b=o-ft;l=Math.sqrt(w*w+b*b);w/=l;b/=l;w*=a;b*=a;var bt=-e+d-(-e+s),kt=-f+o-(-f+k),dt=(-f+k)*(-e+s)-(-f+o)*(-e+d),gt=-b+et-(-b+s),ni=-w+o-(-w+ft),ti=(-w+ft)*(-b+s)-(-w+o)*(-b+et),ot=bt*ni-gt*kt;if(Math.abs(ot)<.1){ot+=10.1;h.push(o-f,s-e,v,y,p,c);h.push(o+f,s+e,v,y,p,c);continue}var st=(kt*ti-ni*dt)/ot,ht=(gt*dt-bt*ti)/ot,ii=(st-o)*(st-o)+(ht-s)*(ht-s);ii>196*a*a?(tt=f-w,it=e-b,l=Math.sqrt(tt*tt+it*it),tt/=l,it/=l,tt*=a,it*=a,h.push(o-tt,s-it),h.push(v,y,p,c),h.push(o+tt,s+it),h.push(v,y,p,c),h.push(o-tt,s-it),h.push(v,y,p,c),wt++):(h.push(st,ht),h.push(v,y,p,c),h.push(o-(st-o),s-(ht-s)),h.push(v,y,p,c))}for(k=i[(ut-2)*2],d=i[(ut-2)*2+1],o=i[(ut-1)*2],s=i[(ut-1)*2+1],f=-(d-s),e=k-o,l=Math.sqrt(f*f+e*e),f/=l,e/=l,f*=a,e*=a,h.push(o-f,s-e),h.push(v,y,p,c),h.push(o+f,s+e),h.push(v,y,p,c),at.push(vt),pt=0;pt<wt;++pt)at.push(vt++);at.push(vt-1)}}function e(n,t){var i=0,r=n.points;if(r.length!==0){var e=t.points,l=r.length/2,o=u.hex2rgb(n.lineColor),f=n.lineAlpha,s=o[0]*f,h=o[1]*f,c=o[2]*f;for(i=1;i<l;i++){var a=r[(i-1)*2],v=r[(i-1)*2+1],y=r[i*2],p=r[i*2+1];e.push(a,v);e.push(s,h,c,f);e.push(y,p);e.push(s,h,c,f)}}}i.__esModule=!0;i.default=function(n,t,i){n.nativeLines?e(n,i):f(n,t)};var r=n("../../../math"),u=n("../../../utils")},{"../../../math":70,"../../../utils":125}],62:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function h(n,t,i){var r,y,p,a,b,h,u,l;if(n.points=n.shape.points.slice(),r=n.points,n.fill&&r.length>=6){for(y=[],p=n.holes,a=0;a<p.length;a++)b=p[a],y.push(r.length/2),r=r.concat(b.points);var k=t.points,c=t.indices,d=r.length/2,w=e.hex2rgb(n.fillColor),v=n.fillAlpha,g=w[0]*v,nt=w[1]*v,tt=w[2]*v,o=s.default(r,y,2);if(!o)return;for(h=k.length/6,u=0;u<o.length;u+=3)c.push(o[u]+h),c.push(o[u]+h),c.push(o[u+1]+h),c.push(o[u+2]+h),c.push(o[u+2]+h);for(l=0;l<d;l++)k.push(r[l*2],r[l*2+1],g,nt,tt,v)}n.lineWidth>0&&f.default(n,t,i)}i.__esModule=!0;i.default=h;var u=n("./buildLine"),f=r(u),e=n("../../../utils"),o=n("earcut"),s=r(o)},{"../../../utils":125,"./buildLine":61,earcut:2}],63:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(n,t,i){var c=n.shape,r=c.x,e=c.y,l=c.width,a=c.height,b;if(n.fill){var w=f.hex2rgb(n.fillColor),s=n.fillAlpha,v=w[0]*s,y=w[1]*s,p=w[2]*s,o=t.points,k=t.indices,h=o.length/6;o.push(r,e);o.push(v,y,p,s);o.push(r+l,e);o.push(v,y,p,s);o.push(r,e+a);o.push(v,y,p,s);o.push(r+l,e+a);o.push(v,y,p,s);k.push(h,h,h+1,h+2,h+3,h+3)}n.lineWidth&&(b=n.points,n.points=[r,e,r+l,e,r+l,e+a,r,e+a,r,e],u.default(n,t,i),n.points=b)}i.__esModule=!0;i.default=o;var r=n("./buildLine"),u=e(r),f=n("../../../utils")},{"../../../utils":125,"./buildLine":61}],64:[function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}function l(n,t,i){var p=n.shape,r=p.x,f=p.y,a=p.width,v=p.height,s=p.radius,e=[],l,tt,k,it,rt;if(e.push(r,f+s),u(r,f+v-s,r,f+v,r+s,f+v,e),u(r+a-s,f+v,r+a,f+v,r+a,f+v-s,e),u(r+a,f+s,r+a,f,r+a-s,f,e),u(r+s,f,r,f,r,f+s+1e-10,e),n.fill){var g=c.hex2rgb(n.fillColor),d=n.fillAlpha,ut=g[0]*d,ft=g[1]*d,et=g[2]*d,nt=t.points,w=t.indices,b=nt.length/6,y=o.default(e,null,2);for(l=0,tt=y.length;l<tt;l+=3)w.push(y[l]+b),w.push(y[l]+b),w.push(y[l+1]+b),w.push(y[l+2]+b),w.push(y[l+2]+b);for(k=0,it=e.length;k<it;k++)nt.push(e[k],e[++k],ut,ft,et,d)}n.lineWidth&&(rt=n.points,n.points=e,h.default(n,t,i),n.points=rt)}function r(n,t,i){var r=t-n;return n+r*i}function u(n,t,i,u,f,e){for(var b=arguments.length>6&&arguments[6]!==undefined?arguments[6]:[],h=20,c=b,l=0,a=0,v=0,y=0,p=0,w=0,s=0,o=0;s<=h;++s)o=s/h,l=r(n,i,o),a=r(t,u,o),v=r(i,f,o),y=r(u,e,o),p=r(l,v,o),w=r(a,y,o),c.push(p,w);return c}i.__esModule=!0;i.default=l;var e=n("earcut"),o=f(e),s=n("./buildLine"),h=f(s),c=n("../../../utils")},{"../../../utils":125,"./buildLine":61,earcut:2}],65:[function(n,t,i){"use strict";function ni(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}var u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt;i.__esModule=!0;i.autoDetectRenderer=i.Application=i.Filter=i.SpriteMaskFilter=i.Quad=i.RenderTarget=i.ObjectRenderer=i.WebGLManager=i.Shader=i.CanvasRenderTarget=i.TextureUvs=i.VideoBaseTexture=i.BaseRenderTexture=i.RenderTexture=i.BaseTexture=i.TextureMatrix=i.Texture=i.Spritesheet=i.CanvasGraphicsRenderer=i.GraphicsRenderer=i.GraphicsData=i.Graphics=i.TextMetrics=i.TextStyle=i.Text=i.SpriteRenderer=i.CanvasTinter=i.CanvasSpriteRenderer=i.Sprite=i.TransformBase=i.TransformStatic=i.Transform=i.Container=i.DisplayObject=i.Bounds=i.glCore=i.WebGLRenderer=i.CanvasRenderer=i.ticker=i.utils=i.settings=undefined;u=n("./const");Object.keys(u).forEach(function(n){n!=="default"&&n!=="__esModule"&&Object.defineProperty(i,n,{enumerable:!0,get:function(){return u[n]}})});f=n("./math");Object.keys(f).forEach(function(n){n!=="default"&&n!=="__esModule"&&Object.defineProperty(i,n,{enumerable:!0,get:function(){return f[n]}})});e=n("pixi-gl-core");Object.defineProperty(i,"glCore",{enumerable:!0,get:function(){return r(e).default}});o=n("./display/Bounds");Object.defineProperty(i,"Bounds",{enumerable:!0,get:function(){return r(o).default}});s=n("./display/DisplayObject");Object.defineProperty(i,"DisplayObject",{enumerable:!0,get:function(){return r(s).default}});h=n("./display/Container");Object.defineProperty(i,"Container",{enumerable:!0,get:function(){return r(h).default}});c=n("./display/Transform");Object.defineProperty(i,"Transform",{enumerable:!0,get:function(){return r(c).default}});l=n("./display/TransformStatic");Object.defineProperty(i,"TransformStatic",{enumerable:!0,get:function(){return r(l).default}});a=n("./display/TransformBase");Object.defineProperty(i,"TransformBase",{enumerable:!0,get:function(){return r(a).default}});v=n("./sprites/Sprite");Object.defineProperty(i,"Sprite",{enumerable:!0,get:function(){return r(v).default}});y=n("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(i,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return r(y).default}});p=n("./sprites/canvas/CanvasTinter");Object.defineProperty(i,"CanvasTinter",{enumerable:!0,get:function(){return r(p).default}});w=n("./sprites/webgl/SpriteRenderer");Object.defineProperty(i,"SpriteRenderer",{enumerable:!0,get:function(){return r(w).default}});b=n("./text/Text");Object.defineProperty(i,"Text",{enumerable:!0,get:function(){return r(b).default}});k=n("./text/TextStyle");Object.defineProperty(i,"TextStyle",{enumerable:!0,get:function(){return r(k).default}});d=n("./text/TextMetrics");Object.defineProperty(i,"TextMetrics",{enumerable:!0,get:function(){return r(d).default}});g=n("./graphics/Graphics");Object.defineProperty(i,"Graphics",{enumerable:!0,get:function(){return r(g).default}});nt=n("./graphics/GraphicsData");Object.defineProperty(i,"GraphicsData",{enumerable:!0,get:function(){return r(nt).default}});tt=n("./graphics/webgl/GraphicsRenderer");Object.defineProperty(i,"GraphicsRenderer",{enumerable:!0,get:function(){return r(tt).default}});it=n("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(i,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return r(it).default}});rt=n("./textures/Spritesheet");Object.defineProperty(i,"Spritesheet",{enumerable:!0,get:function(){return r(rt).default}});ut=n("./textures/Texture");Object.defineProperty(i,"Texture",{enumerable:!0,get:function(){return r(ut).default}});ft=n("./textures/TextureMatrix");Object.defineProperty(i,"TextureMatrix",{enumerable:!0,get:function(){return r(ft).default}});et=n("./textures/BaseTexture");Object.defineProperty(i,"BaseTexture",{enumerable:!0,get:function(){return r(et).default}});ot=n("./textures/RenderTexture");Object.defineProperty(i,"RenderTexture",{enumerable:!0,get:function(){return r(ot).default}});st=n("./textures/BaseRenderTexture");Object.defineProperty(i,"BaseRenderTexture",{enumerable:!0,get:function(){return r(st).default}});ht=n("./textures/VideoBaseTexture");Object.defineProperty(i,"VideoBaseTexture",{enumerable:!0,get:function(){return r(ht).default}});ct=n("./textures/TextureUvs");Object.defineProperty(i,"TextureUvs",{enumerable:!0,get:function(){return r(ct).default}});lt=n("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(i,"CanvasRenderTarget",{enumerable:!0,get:function(){return r(lt).default}});at=n("./Shader");Object.defineProperty(i,"Shader",{enumerable:!0,get:function(){return r(at).default}});vt=n("./renderers/webgl/managers/WebGLManager");Object.defineProperty(i,"WebGLManager",{enumerable:!0,get:function(){return r(vt).default}});yt=n("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(i,"ObjectRenderer",{enumerable:!0,get:function(){return r(yt).default}});pt=n("./renderers/webgl/utils/RenderTarget");Object.defineProperty(i,"RenderTarget",{enumerable:!0,get:function(){return r(pt).default}});wt=n("./renderers/webgl/utils/Quad");Object.defineProperty(i,"Quad",{enumerable:!0,get:function(){return r(wt).default}});bt=n("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(i,"SpriteMaskFilter",{enumerable:!0,get:function(){return r(bt).default}});kt=n("./renderers/webgl/filters/Filter");Object.defineProperty(i,"Filter",{enumerable:!0,get:function(){return r(kt).default}});dt=n("./Application");Object.defineProperty(i,"Application",{enumerable:!0,get:function(){return r(dt).default}});gt=n("./autoDetectRenderer");Object.defineProperty(i,"autoDetectRenderer",{enumerable:!0,get:function(){return gt.autoDetectRenderer}});var ti=n("./utils"),ii=ni(ti),ri=n("./ticker"),ui=ni(ri),fi=n("./settings"),ei=r(fi),oi=n("./renderers/canvas/CanvasRenderer"),si=r(oi),hi=n("./renderers/webgl/WebGLRenderer"),ci=r(hi);i.settings=ei.default;i.utils=ii;i.ticker=ui;i.CanvasRenderer=si.default;i.WebGLRenderer=ci.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureMatrix":116,"./textures/TextureUvs":117,"./textures/VideoBaseTexture":118,"./ticker":121,"./utils":125,"pixi-gl-core":12}],66:[function(n,t,i){"use strict";function v(n){return n&&n.__esModule?n:{"default":n}}function s(n){return n<0?-1:n>0?1:0}function y(){for(var c,t,i,r,v,n=0;n<16;n++)for(c=[],h.push(c),t=0;t<16;t++){var y=s(u[n]*u[t]+e[n]*f[t]),p=s(f[n]*u[t]+o[n]*f[t]),w=s(u[n]*e[t]+e[n]*o[t]),b=s(f[n]*e[t]+o[n]*o[t]);for(i=0;i<16;i++)if(u[i]===y&&f[i]===p&&e[i]===w&&o[i]===b){c.push(i);break}}for(r=0;r<16;r++)v=new l.default,v.set(u[r],f[r],e[r],o[r],0,0),a.push(v)}var c,l,r;i.__esModule=!0;c=n("./Matrix");l=v(c);var u=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],f=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],e=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],o=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],a=[],h=[];y();r={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(n){return u[n]},uY:function(n){return f[n]},vX:function(n){return e[n]},vY:function(n){return o[n]},inv:function(n){return n&8?n&15:-n&7},add:function(n,t){return h[n][t]},sub:function(n,t){return h[n][r.inv(t)]},rotate180:function(n){return n^4},isVertical:function(n){return(n&3)==2},byDirection:function(n,t){return Math.abs(n)*2<=Math.abs(t)?t>=0?r.S:r.N:Math.abs(t)*2<=Math.abs(n)?n>0?r.E:r.W:t>0?n>0?r.SE:r.SW:n>0?r.NE:r.NW},matrixAppendRotationInv:function(n,t){var u=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,f=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,i=a[r.inv(t)];i.tx=u;i.ty=f;n.append(i)}};i.default=r},{"./Matrix":67}],67:[function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u;i.__esModule=!0;var f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),e=n("./Point"),r=o(e);u=function(){function n(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1,f=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0,e=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;s(this,n);this.a=t;this.b=i;this.c=r;this.d=u;this.tx=f;this.ty=e;this.array=null}return n.prototype.fromArray=function(n){this.a=n[0];this.b=n[1];this.c=n[3];this.d=n[4];this.tx=n[2];this.ty=n[5]},n.prototype.set=function(n,t,i,r,u,f){return this.a=n,this.b=t,this.c=i,this.d=r,this.tx=u,this.ty=f,this},n.prototype.toArray=function(n,t){this.array||(this.array=new Float32Array(9));var i=t||this.array;return n?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},n.prototype.apply=function(n,t){t=t||new r.default;var i=n.x,u=n.y;return t.x=this.a*i+this.c*u+this.tx,t.y=this.b*i+this.d*u+this.ty,t},n.prototype.applyInverse=function(n,t){t=t||new r.default;var i=1/(this.a*this.d+this.c*-this.b),u=n.x,f=n.y;return t.x=this.d*i*u+-this.c*i*f+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*f+-this.b*i*u+(-this.ty*this.a+this.tx*this.b)*i,t},n.prototype.translate=function(n,t){return this.tx+=n,this.ty+=t,this},n.prototype.scale=function(n,t){return this.a*=n,this.d*=t,this.c*=n,this.b*=t,this.tx*=n,this.ty*=t,this},n.prototype.rotate=function(n){var t=Math.cos(n),i=Math.sin(n),r=this.a,u=this.c,f=this.tx;return this.a=r*t-this.b*i,this.b=r*i+this.b*t,this.c=u*t-this.d*i,this.d=u*i+this.d*t,this.tx=f*t-this.ty*i,this.ty=f*i+this.ty*t,this},n.prototype.append=function(n){var t=this.a,i=this.b,r=this.c,u=this.d;return this.a=n.a*t+n.b*r,this.b=n.a*i+n.b*u,this.c=n.c*t+n.d*r,this.d=n.c*i+n.d*u,this.tx=n.tx*t+n.ty*r+this.tx,this.ty=n.tx*i+n.ty*u+this.ty,this},n.prototype.setTransform=function(n,t,i,r,u,f,e,o,s){var v=Math.sin(e),y=Math.cos(e),p=Math.cos(s),w=Math.sin(s),b=-Math.sin(o),k=Math.cos(o),h=y*u,c=v*u,l=-v*f,a=y*f;return this.a=p*h+w*l,this.b=p*c+w*a,this.c=b*h+k*l,this.d=b*c+k*a,this.tx=n+(i*h+r*l),this.ty=t+(i*c+r*a),this},n.prototype.prepend=function(n){var r=this.tx,t,i;return(n.a!==1||n.b!==0||n.c!==0||n.d!==1)&&(t=this.a,i=this.c,this.a=t*n.a+this.b*n.c,this.b=t*n.b+this.b*n.d,this.c=i*n.a+this.d*n.c,this.d=i*n.b+this.d*n.d),this.tx=r*n.a+this.ty*n.c+n.tx,this.ty=r*n.b+this.ty*n.d+n.ty,this},n.prototype.decompose=function(n){var t=this.a,r=this.b,u=this.c,i=this.d,e=-Math.atan2(-u,i),f=Math.atan2(r,t),o=Math.abs(e+f);return o<1e-5?(n.rotation=f,t<0&&i>=0&&(n.rotation+=n.rotation<=0?Math.PI:-Math.PI),n.skew.x=n.skew.y=0):(n.skew.x=e,n.skew.y=f),n.scale.x=Math.sqrt(t*t+r*r),n.scale.y=Math.sqrt(u*u+i*i),n.position.x=this.tx,n.position.y=this.ty,n},n.prototype.invert=function(){var t=this.a,i=this.b,r=this.c,u=this.d,f=this.tx,n=t*u-i*r;return this.a=u/n,this.b=-i/n,this.c=-r/n,this.d=t/n,this.tx=(r*this.ty-u*f)/n,this.ty=-(t*this.ty-i*f)/n,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var t=new n;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.prototype.copy=function(n){return n.a=this.a,n.b=this.b,n.c=this.c,n.d=this.d,n.tx=this.tx,n.ty=this.ty,n},f(n,null,[{key:"IDENTITY",get:function(){return new n}},{key:"TEMP_MATRIX",get:function(){return new n}}]),n}();i.default=u},{"./Point":69}],68:[function(n,t,i){"use strict";function f(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r,u;i.__esModule=!0;r=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();u=function(){function n(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;f(this,n);this._x=r;this._y=u;this.cb=t;this.scope=i}return n.prototype.set=function(n,t){var i=n||0,r=t||(t!==0?i:0);(this._x!==i||this._y!==r)&&(this._x=i,this._y=r,this.cb.call(this.scope))},n.prototype.copy=function(n){(this._x!==n.x||this._y!==n.y)&&(this._x=n.x,this._y=n.y,this.cb.call(this.scope))},r(n,[{key:"x",get:function(){return this._x},set:function(n){this._x!==n&&(this._x=n,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(n){this._y!==n&&(this._y=n,this.cb.call(this.scope))}}]),n}();i.default=u},{}],69:[function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}i.__esModule=!0;var u=function(){function n(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;r(this,n);this.x=t;this.y=i}return n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(n){this.set(n.x,n.y)},n.prototype.equals=function(n){return n.x===this.x&&n.y===this.y},n.prototype.set=function(n,t){this.x=n||0;this.y=t||(t!==0?this.x:0)},n}();i.default=u},{}],70:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f,e,o,s,h,c,l,a;i.__esModule=!0;u=n("./Point");Object.defineProperty(i,"Point",{enumerable:!0,get:function(){return r(u).default}});f=n("./ObservablePoint");Object.defineProperty(i,"ObservablePoint",{enumerable:!0,get:function(){return r(f).default}});e=n("./Matrix");Object.defineProperty(i,"Matrix",{enumerable:!0,get:function(){return r(e).default}});o=n("./GroupD8");Object.defineProperty(i,"GroupD8",{enumerable:!0,get:function(){return r(o).default}});s=n("./shapes/Circle");Object.defineProperty(i,"Circle",{enumerable:!0,get:function(){return r(s).default}});h=n("./shapes/Ellipse");Object.defineProperty(i,"Ellipse",{enumerable:!0,get:function(){return r(h).default}});c=n("./shapes/Polygon");Object.defineProperty(i,"Polygon",{enumerable:!0,get:function(){return r(c).default}});l=n("./shapes/Rectangle");Object.defineProperty(i,"Rectangle",{enumerable:!0,get:function(){return r(l).default}});a=n("./shapes/RoundedRectangle");Object.defineProperty(i,"RoundedRectangle",{enumerable:!0,get:function(){return r(a).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r;i.__esModule=!0;var u=n("./Rectangle"),f=o(u),e=n("../../const");r=function(){function n(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;s(this,n);this.x=t;this.y=i;this.radius=r;this.type=e.SHAPES.CIRC}return n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(n,t){if(this.radius<=0)return!1;var u=this.radius*this.radius,i=this.x-n,r=this.y-t;return i*=i,r*=r,i+r<=u},n.prototype.getBounds=function(){return new f.default(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},n}();i.default=r},{"../../const":46,"./Rectangle":74}],72:[function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r;i.__esModule=!0;var u=n("./Rectangle"),f=o(u),e=n("../../const");r=function(){function n(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;s(this,n);this.x=t;this.y=i;this.width=r;this.height=u;this.type=e.SHAPES.ELIP}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(n,t){if(this.width<=0||this.height<=0)return!1;var i=(n-this.x)/this.width,r=(t-this.y)/this.height;return i*=i,r*=r,i+r<=1},n.prototype.getBounds=function(){return new f.default(this.x-this.width,this.y-this.height,this.width,this.height)},n}();i.default=r},{"../../const":46,"./Rectangle":74}],73:[function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r;i.__esModule=!0;var u=n("../Point"),f=o(u),e=n("../../const");r=function(){function n(){for(var u,i,h,o=arguments.length,t=Array(o),r=0;r<o;r++)t[r]=arguments[r];if(s(this,n),Array.isArray(t[0])&&(t=t[0]),t[0]instanceof f.default){for(u=[],i=0,h=t.length;i<h;i++)u.push(t[i].x,t[i].y);t=u}this.closed=!0;this.points=t;this.type=e.SHAPES.POLY}return n.prototype.clone=function(){return new n(this.points.slice())},n.prototype.close=function(){var n=this.points;(n[0]!==n[n.length-2]||n[1]!==n[n.length-1])&&n.push(n[0],n[1])},n.prototype.contains=function(n,t){for(var r=!1,e=this.points.length/2,i=0,u=e-1;i<e;u=i++){var o=this.points[i*2],f=this.points[i*2+1],h=this.points[u*2],s=this.points[u*2+1],c=f>t!=s>t&&n<(h-o)*((t-f)/(s-f))+o;c&&(r=!r)}return r},n}();i.default=r},{"../../const":46,"../Point":69}],74:[function(n,t,i){"use strict";function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r,u,f;i.__esModule=!0;r=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();u=n("../../const");f=function(){function n(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,f=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;e(this,n);this.x=Number(t);this.y=Number(i);this.width=Number(r);this.height=Number(f);this.type=u.SHAPES.RECT}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(n){return this.x=n.x,this.y=n.y,this.width=n.width,this.height=n.height,this},n.prototype.contains=function(n,t){return this.width<=0||this.height<=0?!1:n>=this.x&&n<this.x+this.width&&t>=this.y&&t<this.y+this.height?!0:!1},n.prototype.pad=function(n,t){n=n||0;t=t||(t!==0?n:0);this.x-=n;this.y-=t;this.width+=n*2;this.height+=t*2},n.prototype.fit=function(n){this.x<n.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=n.x);this.y<n.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=n.y);this.x+this.width>n.x+n.width&&(this.width=n.width-this.x,this.width<0&&(this.width=0));this.y+this.height>n.y+n.height&&(this.height=n.height-this.y,this.height<0&&(this.height=0))},n.prototype.enlarge=function(n){var t=Math.min(this.x,n.x),r=Math.max(this.x+this.width,n.x+n.width),i=Math.min(this.y,n.y),u=Math.max(this.y+this.height,n.y+n.height);this.x=t;this.width=r-t;this.y=i;this.height=u-i},r(n,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new n(0,0,0,0)}}]),n}();i.default=f},{"../../const":46}],75:[function(n,t,i){"use strict";function f(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r,u;i.__esModule=!0;r=n("../../const");u=function(){function n(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,u=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:20;f(this,n);this.x=t;this.y=i;this.width=u;this.height=e;this.radius=o;this.type=r.SHAPES.RREC}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(n,t){if(this.width<=0||this.height<=0)return!1;if(n>=this.x&&n<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||n>=this.x+this.radius&&n<=this.x+this.width-this.radius)return!0;var i=n-(this.x+this.radius),r=t-(this.y+this.radius),u=this.radius*this.radius;if(i*i+r*r<=u||(i=n-(this.x+this.width-this.radius),i*i+r*r<=u)||(r=t-(this.y+this.height-this.radius),i*i+r*r<=u)||(i=n-(this.x+this.radius),i*i+r*r<=u))return!0}return!1},n}();i.default=u},{"../../const":46}],76:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function k(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function d(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function g(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u,h;i.__esModule=!0;var c=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),f=n("../utils"),o=n("../math"),s=n("../const"),l=n("../settings"),e=r(l),a=n("../display/Container"),v=r(a),y=n("../textures/RenderTexture"),p=r(y),w=n("eventemitter3"),b=r(w);u=new o.Matrix;h=function(n){function t(i,r,u,h){k(this,t);var c=d(this,n.call(this));return f.sayHello(i),typeof r=="number"&&(r=Object.assign({width:r,height:u||e.default.RENDER_OPTIONS.height},h)),r=Object.assign({},e.default.RENDER_OPTIONS,r),c.options=r,c.type=s.RENDERER_TYPE.UNKNOWN,c.screen=new o.Rectangle(0,0,r.width,r.height),c.view=r.view||document.createElement("canvas"),c.resolution=r.resolution||e.default.RESOLUTION,c.transparent=r.transparent,c.autoResize=r.autoResize||!1,c.blendModes=null,c.preserveDrawingBuffer=r.preserveDrawingBuffer,c.clearBeforeRender=r.clearBeforeRender,c.roundPixels=r.roundPixels,c._backgroundColor=0,c._backgroundColorRgba=[0,0,0,0],c._backgroundColorString="#000000",c.backgroundColor=r.backgroundColor||c._backgroundColor,c._tempDisplayObjectParent=new v.default,c._lastObjectRendered=c._tempDisplayObjectParent,c}return g(t,n),t.prototype.resize=function(n,t){this.screen.width=n;this.screen.height=t;this.view.width=n*this.resolution;this.view.height=t*this.resolution;this.autoResize&&(this.view.style.width=n+"px",this.view.style.height=t+"px")},t.prototype.generateTexture=function(n,t,i,r){r=r||n.getLocalBounds();var f=p.default.create(r.width|0,r.height|0,t,i);return u.tx=-r.x,u.ty=-r.y,this.render(n,f,!1,u,!0),f},t.prototype.destroy=function(n){n&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.type=s.RENDERER_TYPE.UNKNOWN;this.view=null;this.screen=null;this.resolution=0;this.transparent=!1;this.autoResize=!1;this.blendModes=null;this.options=null;this.preserveDrawingBuffer=!1;this.clearBeforeRender=!1;this.roundPixels=!1;this._backgroundColor=0;this._backgroundColorRgba=null;this._backgroundColorString=null;this._tempDisplayObjectParent=null;this._lastObjectRendered=null},c(t,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(n){this._backgroundColor=n;this._backgroundColorString=f.hex2string(n);f.hex2rgb(n,this._backgroundColorRgba)}}]),t}(b.default);i.default=h},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":125,eventemitter3:3}],77:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function b(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function k(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function d(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var f;i.__esModule=!0;var e=n("../SystemRenderer"),o=r(e),s=n("./utils/CanvasMaskManager"),h=r(s),c=n("./utils/CanvasRenderTarget"),l=r(c),a=n("./utils/mapCanvasBlendModesToPixi"),v=r(a),y=n("../../utils"),u=n("../../const"),p=n("../../settings"),w=r(p);f=function(n){function t(i,r,f){b(this,t);var e=k(this,n.call(this,"Canvas",i,r,f));return e.type=u.RENDERER_TYPE.CANVAS,e.rootContext=e.view.getContext("2d",{alpha:e.transparent}),e.context=e.rootContext,e.refresh=!0,e.maskManager=new h.default(e),e.smoothProperty="imageSmoothingEnabled",e.rootContext.imageSmoothingEnabled||(e.rootContext.webkitImageSmoothingEnabled?e.smoothProperty="webkitImageSmoothingEnabled":e.rootContext.mozImageSmoothingEnabled?e.smoothProperty="mozImageSmoothingEnabled":e.rootContext.oImageSmoothingEnabled?e.smoothProperty="oImageSmoothingEnabled":e.rootContext.msImageSmoothingEnabled&&(e.smoothProperty="msImageSmoothingEnabled")),e.initPlugins(),e.blendModes=v.default(),e._activeBlendMode=null,e.renderingToScreen=!1,e.resize(e.options.width,e.options.height),e}return d(t,n),t.prototype.render=function(n,t,i,r,f){var s,e,h,o,c;this.view&&(this.renderingToScreen=!t,this.emit("prerender"),s=this.resolution,t?(t=t.baseTexture||t,t._canvasRenderTarget||(t._canvasRenderTarget=new l.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext,e=this.context,t||(this._lastObjectRendered=n),f||(h=n.parent,o=this._tempDisplayObjectParent.transform.worldTransform,r?(r.copy(o),this._tempDisplayObjectParent.transform._worldID=-1):o.identity(),n.parent=this._tempDisplayObjectParent,n.updateTransform(),n.parent=h),e.save(),e.setTransform(1,0,0,1,0,0),e.globalAlpha=1,this._activeBlendMode=u.BLEND_MODES.NORMAL,e.globalCompositeOperation=this.blendModes[u.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(e.fillStyle="black",e.clear()),(i!==undefined?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?e.clearRect(0,0,this.width,this.height):(e.fillStyle=this._backgroundColorString,e.fillRect(0,0,this.width,this.height))),c=this.context,this.context=e,n.renderCanvas(this),this.context=c,e.restore(),this.resolution=s,this.emit("postrender"))},t.prototype.clear=function(n){var t=this.context;n=n||this._backgroundColorString;!this.transparent&&n?(t.fillStyle=n,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},t.prototype.setBlendMode=function(n){this._activeBlendMode!==n&&(this._activeBlendMode=n,this.context.globalCompositeOperation=this.blendModes[n])},t.prototype.destroy=function(t){this.destroyPlugins();n.prototype.destroy.call(this,t);this.context=null;this.refresh=!0;this.maskManager.destroy();this.maskManager=null;this.smoothProperty=null},t.prototype.resize=function(t,i){n.prototype.resize.call(this,t,i);this.smoothProperty&&(this.rootContext[this.smoothProperty]=w.default.SCALE_MODE===u.SCALE_MODES.LINEAR)},t.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},t}(o.default);i.default=f;y.pluginTarget.mixin(f)},{"../../const":46,"../../settings":101,"../../utils":125,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(n,t,i){"use strict";function f(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r,u;i.__esModule=!0;r=n("../../../const");u=function(){function n(t){f(this,n);this.renderer=t}return n.prototype.pushMask=function(n){var r=this.renderer;r.context.save();var u=n.alpha,t=n.transform.worldTransform,i=r.resolution;r.context.setTransform(t.a*i,t.b*i,t.c*i,t.d*i,t.tx*i,t.ty*i);n._texture||(this.renderGraphicsShape(n),r.context.clip());n.worldAlpha=u},n.prototype.renderGraphicsShape=function(n){var t=this.renderer.context,it=n.graphicsData.length,w,s,i,e,y;if(it!==0)for(t.beginPath(),w=0;w<it;w++)if(s=n.graphicsData[w],i=s.shape,s.type===r.SHAPES.POLY){for(e=i.points,t.moveTo(e[0],e[1]),y=1;y<e.length/2;y++)t.lineTo(e[y*2],e[y*2+1]);e[0]===e[e.length-2]&&e[1]===e[e.length-1]&&t.closePath()}else if(s.type===r.SHAPES.RECT)t.rect(i.x,i.y,i.width,i.height),t.closePath();else if(s.type===r.SHAPES.CIRC)t.arc(i.x,i.y,i.radius,0,2*Math.PI),t.closePath();else if(s.type===r.SHAPES.ELIP){var b=i.width*2,k=i.height*2,a=i.x-b/2,p=i.y-k/2,rt=.5522848,d=b/2*rt,g=k/2*rt,nt=a+b,tt=p+k,v=a+b/2,h=p+k/2;t.moveTo(a,h);t.bezierCurveTo(a,h-g,v-d,p,v,p);t.bezierCurveTo(v+d,p,nt,h-g,nt,h);t.bezierCurveTo(nt,h+g,v+d,tt,v,tt);t.bezierCurveTo(v-d,tt,a,h+g,a,h);t.closePath()}else if(s.type===r.SHAPES.RREC){var u=i.x,f=i.y,c=i.width,l=i.height,o=i.radius,ut=Math.min(c,l)/2|0;o=o>ut?ut:o;t.moveTo(u,f+o);t.lineTo(u,f+l-o);t.quadraticCurveTo(u,f+l,u+o,f+l);t.lineTo(u+c-o,f+l);t.quadraticCurveTo(u+c,f+l,u+c,f+l-o);t.lineTo(u+c,f+o);t.quadraticCurveTo(u+c,f,u+c-o,f);t.lineTo(u+o,f);t.quadraticCurveTo(u,f,u,f+o);t.closePath()}},n.prototype.popMask=function(n){n.context.restore();n.invalidateBlendMode()},n.prototype.destroy=function(){},n}();i.default=u},{"../../../const":46}],79:[function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r;i.__esModule=!0;var u=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),f=n("../../../settings"),e=o(f);r=function(){function n(t,i,r){s(this,n);this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=r||e.default.RESOLUTION;this.resize(t,i)}return n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(n,t){this.canvas.width=n*this.resolution;this.canvas.height=t*this.resolution},n.prototype.destroy=function(){this.context=null;this.canvas=null},u(n,[{key:"width",get:function(){return this.canvas.width},set:function(n){this.canvas.width=n}},{key:"height",get:function(){return this.canvas.height},set:function(n){this.canvas.height=n}}]),n}();i.default=r},{"../../../settings":101}],80:[function(n,t,i){"use strict";function r(n){var t=document.createElement("canvas"),i;return t.width=6,t.height=1,i=t.getContext("2d"),i.fillStyle=n,i.fillRect(0,0,6,1),t}function u(){var n,u,t;if(typeof document=="undefined")return!1;var f=r("#ff00ff"),e=r("#ffff00"),i=document.createElement("canvas");return(i.width=6,i.height=1,n=i.getContext("2d"),n.globalCompositeOperation="multiply",n.drawImage(f,0,0),n.drawImage(e,2,0),u=n.getImageData(2,0,1,1),!u)?!1:(t=u.data,t[0]===255&&t[1]===0&&t[2]===0)}i.__esModule=!0;i.default=u},{}],81:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return f.default()?(n[r.BLEND_MODES.NORMAL]="source-over",n[r.BLEND_MODES.ADD]="lighter",n[r.BLEND_MODES.MULTIPLY]="multiply",n[r.BLEND_MODES.SCREEN]="screen",n[r.BLEND_MODES.OVERLAY]="overlay",n[r.BLEND_MODES.DARKEN]="darken",n[r.BLEND_MODES.LIGHTEN]="lighten",n[r.BLEND_MODES.COLOR_DODGE]="color-dodge",n[r.BLEND_MODES.COLOR_BURN]="color-burn",n[r.BLEND_MODES.HARD_LIGHT]="hard-light",n[r.BLEND_MODES.SOFT_LIGHT]="soft-light",n[r.BLEND_MODES.DIFFERENCE]="difference",n[r.BLEND_MODES.EXCLUSION]="exclusion",n[r.BLEND_MODES.HUE]="hue",n[r.BLEND_MODES.SATURATION]="saturate",n[r.BLEND_MODES.COLOR]="color",n[r.BLEND_MODES.LUMINOSITY]="luminosity"):(n[r.BLEND_MODES.NORMAL]="source-over",n[r.BLEND_MODES.ADD]="lighter",n[r.BLEND_MODES.MULTIPLY]="source-over",n[r.BLEND_MODES.SCREEN]="source-over",n[r.BLEND_MODES.OVERLAY]="source-over",n[r.BLEND_MODES.DARKEN]="source-over",n[r.BLEND_MODES.LIGHTEN]="source-over",n[r.BLEND_MODES.COLOR_DODGE]="source-over",n[r.BLEND_MODES.COLOR_BURN]="source-over",n[r.BLEND_MODES.HARD_LIGHT]="source-over",n[r.BLEND_MODES.SOFT_LIGHT]="source-over",n[r.BLEND_MODES.DIFFERENCE]="source-over",n[r.BLEND_MODES.EXCLUSION]="source-over",n[r.BLEND_MODES.HUE]="source-over",n[r.BLEND_MODES.SATURATION]="source-over",n[r.BLEND_MODES.COLOR]="source-over",n[r.BLEND_MODES.LUMINOSITY]="source-over"),n[r.BLEND_MODES.NORMAL_NPM]=n[r.BLEND_MODES.NORMAL],n[r.BLEND_MODES.ADD_NPM]=n[r.BLEND_MODES.ADD],n[r.BLEND_MODES.SCREEN_NPM]=n[r.BLEND_MODES.SCREEN],n}i.__esModule=!0;i.default=o;var r=n("../../../const"),u=n("./canUseNewCanvasBlendModes"),f=e(u)},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u;i.__esModule=!0;var f=n("../../const"),e=n("../../settings"),r=o(e);u=function(){function n(t){s(this,n);this.renderer=t;this.count=0;this.checkCount=0;this.maxIdle=r.default.GC_MAX_IDLE;this.checkCountMax=r.default.GC_MAX_CHECK_COUNT;this.mode=r.default.GC_MODE}return n.prototype.update=function(){(this.count++,this.mode!==f.GC_MODES.MANUAL)&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},n.prototype.run=function(){for(var r,u,t,f=this.renderer.textureManager,n=f._managedTextures,e=!1,i=0;i<n.length;i++)r=n[i],!r._glRenderTargets&&this.count-r.touched>this.maxIdle&&(f.destroyTexture(r,!0),n[i]=null,e=!0);if(e){for(u=0,t=0;t<n.length;t++)n[t]!==null&&(n[u++]=n[t]);n.length=u}},n.prototype.unload=function(n){var i=this.renderer.textureManager,t;for(n._texture&&n._texture._glRenderTargets&&i.destroyTexture(n._texture,!0),t=n.children.length-1;t>=0;t--)this.unload(n.children[t])},n}();i.default=u},{"../../const":46,"../../settings":101}],83:[function(n,t,i){"use strict";function h(n){return n&&n.__esModule?n:{"default":n}}function c(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u;i.__esModule=!0;var f=n("pixi-gl-core"),r=n("../../const"),e=n("./utils/RenderTarget"),o=h(e),s=n("../../utils");u=function(){function n(t){c(this,n);this.renderer=t;this.gl=t.gl;this._managedTextures=[]}return n.prototype.bindTexture=function(){},n.prototype.getTexture=function(){},n.prototype.updateTexture=function(n,t){var h=this.gl,c=!!n._glRenderTargets,e,u,i,s;if(!n.hasLoaded)return null;if(e=this.renderer.boundTextures,t===undefined)for(t=0,u=0;u<e.length;++u)if(e[u]===n){t=u;break}if(e[t]=n,h.activeTexture(h.TEXTURE0+t),i=n._glTextures[this.renderer.CONTEXT_UID],i)c?n._glRenderTargets[this.renderer.CONTEXT_UID].resize(n.width,n.height):i.upload(n.source);else{c?(s=new o.default(this.gl,n.width,n.height,n.scaleMode,n.resolution),s.resize(n.width,n.height),n._glRenderTargets[this.renderer.CONTEXT_UID]=s,i=s.texture):(i=new f.GLTexture(this.gl,null,null,null,null),i.bind(t),i.premultiplyAlpha=!0,i.upload(n.source));n._glTextures[this.renderer.CONTEXT_UID]=i;n.on("update",this.updateTexture,this);n.on("dispose",this.destroyTexture,this);this._managedTextures.push(n);n.isPowerOfTwo?(n.mipmap&&i.enableMipmap(),n.wrapMode===r.WRAP_MODES.CLAMP?i.enableWrapClamp():n.wrapMode===r.WRAP_MODES.REPEAT?i.enableWrapRepeat():i.enableWrapMirrorRepeat()):i.enableWrapClamp();n.scaleMode===r.SCALE_MODES.NEAREST?i.enableNearestScaling():i.enableLinearScaling()}return i},n.prototype.destroyTexture=function(n,t){var f;if(n=n.baseTexture||n,n.hasLoaded){var i=this.renderer.CONTEXT_UID,u=n._glTextures,r=n._glRenderTargets;u[i]&&(this.renderer.unbindTexture(n),u[i].destroy(),n.off("update",this.updateTexture,this),n.off("dispose",this.destroyTexture,this),delete u[i],t||(f=this._managedTextures.indexOf(n),f!==-1&&s.removeItems(this._managedTextures,f,1)));r&&r[i]&&(r[i].destroy(),delete r[i])}},n.prototype.removeAll=function(){for(var t,n=0;n<this._managedTextures.length;++n)t=this._managedTextures[n],t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]},n.prototype.destroy=function(){for(var t,n=0;n<this._managedTextures.length;++n)t=this._managedTextures[n],this.destroyTexture(t,!0),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this);this._managedTextures=null},n}();i.default=u},{"../../const":46,"../../utils":125,"./utils/RenderTarget":96,"pixi-gl-core":12}],84:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function vt(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function yt(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function pt(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var o,f;i.__esModule=!0;var s=n("../SystemRenderer"),e=r(s),h=n("./managers/MaskManager"),c=r(h),l=n("./managers/StencilManager"),a=r(l),v=n("./managers/FilterManager"),y=r(v),p=n("./utils/RenderTarget"),w=r(p),b=n("./utils/ObjectRenderer"),k=r(b),d=n("./TextureManager"),g=r(d),nt=n("../../textures/BaseTexture"),tt=r(nt),it=n("./TextureGarbageCollector"),rt=r(it),ut=n("./WebGLState"),ft=r(ut),et=n("./utils/mapWebGLDrawModesToPixi"),ot=r(et),st=n("./utils/validateContext"),ht=r(st),ct=n("../../utils"),lt=n("pixi-gl-core"),u=r(lt),at=n("../../const");o=0;f=function(n){function t(i,r,f){vt(this,t);var e=yt(this,n.call(this,"WebGL",i,r,f));return e.legacy=e.options.legacy,e.legacy&&(u.default.VertexArrayObject.FORCE_NATIVE=!0),e.type=at.RENDERER_TYPE.WEBGL,e.handleContextLost=e.handleContextLost.bind(e),e.handleContextRestored=e.handleContextRestored.bind(e),e.view.addEventListener("webglcontextlost",e.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",e.handleContextRestored,!1),e._contextOptions={alpha:e.transparent,antialias:e.options.antialias,premultipliedAlpha:e.transparent&&e.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.options.preserveDrawingBuffer,powerPreference:e.options.powerPreference},e._backgroundColorRgba[3]=e.transparent?0:1,e.maskManager=new c.default(e),e.stencilManager=new a.default(e),e.emptyRenderer=new k.default(e),e.currentRenderer=e.emptyRenderer,e.textureManager=null,e.filterManager=null,e.initPlugins(),e.options.context&&ht.default(e.options.context),e.gl=e.options.context||u.default.createContext(e.view,e._contextOptions),e.CONTEXT_UID=o++,e.state=new ft.default(e.gl),e.renderingToScreen=!0,e.boundTextures=null,e._activeShader=null,e._activeVao=null,e._activeRenderTarget=null,e._initContext(),e.drawModes=ot.default(e.gl),e._nextTextureLocation=0,e.setBlendMode(0),e}return pt(t,n),t.prototype._initContext=function(){var n=this.gl,i,e,r,t,f;for(n.isContextLost()&&n.getExtension("WEBGL_lose_context")&&n.getExtension("WEBGL_lose_context").restoreContext(),i=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(i),this.emptyTextures=new Array(i),this.textureManager=new g.default(this),this.filterManager=new y.default(this),this.textureGC=new rt.default(this),this.state.resetToDefault(),this.rootRenderTarget=new w.default(n,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget),e=new u.default.GLTexture.fromData(n,null,1,1),r={_glTextures:{}},r._glTextures[this.CONTEXT_UID]={},t=0;t<i;t++)f=new tt.default,f._glTextures[this.CONTEXT_UID]=e,this.boundTextures[t]=r,this.emptyTextures[t]=f,this.bindTexture(null,t);this.emit("context",n);this.resize(this.screen.width,this.screen.height)},t.prototype.render=function(n,t,i,r,u){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=n),!u){var f=n.parent;n.parent=this._tempDisplayObjectParent;n.updateTransform();n.parent=f}this.bindRenderTexture(t,r);this.currentRenderer.start();(i!==undefined?i:this.clearBeforeRender)&&this._activeRenderTarget.clear();n.renderWebGL(this);this.currentRenderer.flush();this.textureGC.update();this.emit("postrender")}},t.prototype.setObjectRenderer=function(n){this.currentRenderer!==n&&(this.currentRenderer.stop(),this.currentRenderer=n,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.resize=function(n,t){e.default.prototype.resize.call(this,n,t);this.rootRenderTarget.resize(n,t);this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},t.prototype.setBlendMode=function(n){this.state.setBlendMode(n)},t.prototype.clear=function(n){this._activeRenderTarget.clear(n)},t.prototype.setTransform=function(n){this._activeRenderTarget.transform=n},t.prototype.clearRenderTexture=function(n,t){var r=n.baseTexture,i=r._glRenderTargets[this.CONTEXT_UID];return i&&i.clear(t),this},t.prototype.bindRenderTexture=function(n,t){var i=void 0,r;return n?(r=n.baseTexture,r._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(r,0),this.unbindTexture(r),i=r._glRenderTargets[this.CONTEXT_UID],i.setFrame(n.frame)):i=this.rootRenderTarget,i.transform=t,this.bindRenderTarget(i),this},t.prototype.bindRenderTarget=function(n){return n!==this._activeRenderTarget&&(this._activeRenderTarget=n,n.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=n.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(n.stencilMaskStack)),this},t.prototype.bindShader=function(n,t){return this._activeShader!==n&&(this._activeShader=n,n.bind(),t!==!1&&(n.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},t.prototype.bindTexture=function(n,t,i){var r,u,f;if(n=n||this.emptyTextures[t],n=n.baseTexture||n,n.touched=this.textureGC.count,i)t=t||0;else{for(r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===n)return r;t===undefined&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}return u=this.gl,f=n._glTextures[this.CONTEXT_UID],f?(this.boundTextures[t]=n,u.activeTexture(u.TEXTURE0+t),u.bindTexture(u.TEXTURE_2D,f.texture)):this.textureManager.updateTexture(n,t),t},t.prototype.unbindTexture=function(n){var i=this.gl,t;for(n=n.baseTexture||n,t=0;t<this.boundTextures.length;t++)this.boundTextures[t]===n&&(this.boundTextures[t]=this.emptyTextures[t],i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[t]._glTextures[this.CONTEXT_UID].texture));return this},t.prototype.createVao=function(){return new u.default.VertexArrayObject(this.gl,this.state.attribState)},t.prototype.bindVao=function(n){return this._activeVao===n?this:(n?n.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=n,this)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer);this.bindVao(null);this._activeShader=null;this._activeRenderTarget=this.rootRenderTarget;for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]=this.emptyTextures[n];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},t.prototype.handleContextLost=function(n){n.preventDefault()},t.prototype.handleContextRestored=function(){this.textureManager.removeAll();this.filterManager.destroy(!0);this._initContext()},t.prototype.destroy=function(t){this.destroyPlugins();this.view.removeEventListener("webglcontextlost",this.handleContextLost);this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);this.textureManager.destroy();n.prototype.destroy.call(this,t);this.uid=0;this.maskManager.destroy();this.stencilManager.destroy();this.filterManager.destroy();this.maskManager=null;this.filterManager=null;this.textureManager=null;this.currentRenderer=null;this.handleContextLost=null;this.handleContextRestored=null;this._contextOptions=null;this.gl.useProgram(null);this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext();this.gl=null},t}(e.default);i.default=f;ct.pluginTarget.mixin(f)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":125,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":12}],85:[function(n,t,i){"use strict";function c(n){return n&&n.__esModule?n:{"default":n}}function l(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var s,h;i.__esModule=!0;s=n("./utils/mapWebGLBlendModesToPixi");h=c(s);var r=0,u=1,f=2,e=3,o=4,a=function(){function n(t){l(this,n);this.activeState=new Uint8Array(16);this.defaultState=new Uint8Array(16);this.defaultState[0]=1;this.stackIndex=0;this.stack=[];this.gl=t;this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)};this.blendModes=h.default(t);this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}return n.prototype.push=function(){var t=this.stack[this.stackIndex],n;for(t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex,n=0;n<this.activeState.length;n++)t[n]=this.activeState[n]},n.prototype.pop=function(){var n=this.stack[--this.stackIndex];this.setState(n)},n.prototype.setState=function(n){this.setBlend(n[r]);this.setDepthTest(n[u]);this.setFrontFace(n[f]);this.setCullFace(n[e]);this.setBlendMode(n[o])},n.prototype.setBlend=function(n){(n=n?1:0,this.activeState[r]!==n)&&(this.activeState[r]=n,this.gl[n?"enable":"disable"](this.gl.BLEND))},n.prototype.setBlendMode=function(n){if(n!==this.activeState[o]){this.activeState[o]=n;var t=this.blendModes[n];t.length===2?this.gl.blendFunc(t[0],t[1]):this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3])}},n.prototype.setDepthTest=function(n){(n=n?1:0,this.activeState[u]!==n)&&(this.activeState[u]=n,this.gl[n?"enable":"disable"](this.gl.DEPTH_TEST))},n.prototype.setCullFace=function(n){(n=n?1:0,this.activeState[e]!==n)&&(this.activeState[e]=n,this.gl[n?"enable":"disable"](this.gl.CULL_FACE))},n.prototype.setFrontFace=function(n){(n=n?1:0,this.activeState[f]!==n)&&(this.activeState[f]=n,this.gl.frontFace(this.gl[n?"CW":"CCW"]))},n.prototype.resetAttributes=function(){for(var t,i,n=0;n<this.attribState.tempAttribState.length;n++)this.attribState.tempAttribState[n]=0;for(t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;for(i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},n.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null);this.resetAttributes();for(var n=0;n<this.activeState.length;++n)this.activeState[n]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1);this.setState(this.defaultState)},n}();i.default=a},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}function v(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r,f;i.__esModule=!0;var e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=n("./extractUniformsFromSrc"),s=u(o),h=n("../../../utils"),c=n("../../../const"),l=n("../../../settings"),a=u(l);r={};f=function(){function n(t,i,u){v(this,n);this.vertexSrc=t||n.defaultVertexSrc;this.fragmentSrc=i||n.defaultFragmentSrc;this._blendMode=c.BLEND_MODES.NORMAL;this.uniformData=u||s.default(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler");this.uniforms={};for(var f in this.uniformData)this.uniforms[f]=this.uniformData[f].value,this.uniformData[f].type&&(this.uniformData[f].type=this.uniformData[f].type.toLowerCase());this.glShaders={};r[this.vertexSrc+this.fragmentSrc]||(r[this.vertexSrc+this.fragmentSrc]=h.uid());this.glShaderKey=r[this.vertexSrc+this.fragmentSrc];this.padding=4;this.resolution=a.default.RESOLUTION;this.enabled=!0;this.autoFit=!0}return n.prototype.apply=function(n,t,i,r){n.applyFilter(this,t,i,r)},e(n,[{key:"blendMode",get:function(){return this._blendMode},set:function(n){this._blendMode=n}}],[{key:"defaultVertexSrc",get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord ;\n}"}},{key:"defaultFragmentSrc",get:function(){return"varying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\nuniform sampler2D filterSampler;\nvoid main(void){\n   vec4 masky = texture2D(filterSampler, vFilterCoord);\n   vec4 sample = texture2D(uSampler, vTextureCoord);\n   vec4 color;\n   if(mod(vFilterCoord.x, 1.0) > 0.5)\n   {\n     color = vec4(1.0, 0.0, 0.0, 1.0);\n   }\n   else\n   {\n     color = vec4(0.0, 1.0, 0.0, 1.0);\n   }\n   gl_FragColor = mix(sample, masky, 0.5);\n   gl_FragColor *= sample.a;\n}"}}]),n}();i.default=f},{"../../../const":46,"../../../settings":101,"../../../utils":125,"./extractUniformsFromSrc":87}],87:[function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}function s(n,t,i){var r=e(n,i),u=e(t,i);return Object.assign(r,u)}function e(n){for(var u,l=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),e={},i=void 0,o=n.replace(/\s+/g," ").split(/\s*;\s*/),r=0;r<o.length;r++)if(u=o[r].trim(),u.indexOf("uniform")>-1){var s=u.split(" "),h=s[1],t=s[2],c=1;t.indexOf("[")>-1&&(i=t.split(/\[|]/),t=i[0],c*=Number(i[1]));t.match(l)||(e[t]={value:f(h,c),name:t,type:h})}return e}var r,u,f;i.__esModule=!0;i.default=s;r=n("pixi-gl-core");u=o(r);f=u.default.shader.defaultValue},{"pixi-gl-core":12}],88:[function(n,t,i){"use strict";function u(n,t,i){var r=n.identity();return r.translate(t.x/i.width,t.y/i.height),r.scale(i.width,i.height),r}function f(n,t,i){var r=n.identity(),u,f;return r.translate(t.x/i.width,t.y/i.height),u=i.width/t.width,f=i.height/t.height,r.scale(u,f),r}function e(n,t,i,u){var e=u._texture.orig,f=n.set(i.width,0,0,i.height,t.x,t.y),o=u.worldTransform.copy(r.Matrix.TEMP_MATRIX);return o.invert(),f.prepend(o),f.scale(1/e.width,1/e.height),f.translate(u.anchor.x,u.anchor.y),f}i.__esModule=!0;i.calculateScreenSpaceMatrix=u;i.calculateNormalizedScreenSpaceMatrix=f;i.calculateSpriteMatrix=e;var r=n("../../../math")},{"../../../math":70}],89:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function c(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function l(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function a(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u;i.__esModule=!0;var f=n("../Filter"),e=r(f),o=n("../../../../math"),v=n("path"),s=n("../../../../textures/TextureMatrix"),h=r(s);u=function(n){function t(i){c(this,t);var u=new o.Matrix,r=l(this,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,r.maskSprite=i,r.maskMatrix=u,r}return a(t,n),t.prototype.apply=function(n,t,i){var u=this.maskSprite,r=this.maskSprite.texture;r.valid&&(r.transform||(r.transform=new h.default(r,0)),r.transform.update(),this.uniforms.mask=r,this.uniforms.otherMatrix=n.calculateSpriteMatrix(this.maskMatrix,u).prepend(r.transform.mapCoord),this.uniforms.alpha=u.worldAlpha,this.uniforms.maskClamp=r.transform.uClampFrame,n.applyFilter(this,t,i))},t}(e.default);i.default=u},{"../../../../math":70,"../../../../textures/TextureMatrix":116,"../Filter":86,path:23}],90:[function(n,t,i){"use strict";function g(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n){return n&&n.__esModule?n:{"default":n}}function nt(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function tt(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u,c;i.__esModule=!0;var l=n("./WebGLManager"),a=r(l),v=n("../utils/RenderTarget"),y=r(v),p=n("../utils/Quad"),w=r(p),e=n("../../../math"),b=n("../../../Shader"),o=r(b),k=n("../filters/filterTransforms"),f=g(k),d=n("bit-twiddle"),s=r(d);u=function u(){h(this,u);this.renderTarget=null;this.sourceFrame=new e.Rectangle;this.destinationFrame=new e.Rectangle;this.filters=[];this.target=null;this.resolution=1};c=function(n){function t(i){h(this,t);var r=nt(this,n.call(this,i));return r.gl=r.renderer.gl,r.quad=new w.default(r.gl,i.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r.managedFilters=[],r}return tt(t,n),t.prototype.pushFilter=function(n,t){var c=this.renderer,r=this.filterData,o,e,s;r||(r=this.renderer._activeRenderTarget.filterStack,o=new u,o.sourceFrame=o.destinationFrame=this.renderer._activeRenderTarget.size,o.renderTarget=c._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[o]},this.filterData=r);e=r.stack[++r.index];e||(e=r.stack[r.index]=new u);var f=t[0].resolution,a=t[0].padding|0,h=n.filterArea||n.getBounds(!0),i=e.sourceFrame,l=e.destinationFrame;i.x=(h.x*f|0)/f;i.y=(h.y*f|0)/f;i.width=(h.width*f|0)/f;i.height=(h.height*f|0)/f;r.stack[0].renderTarget.transform||t[0].autoFit&&i.fit(r.stack[0].destinationFrame);i.pad(a);l.width=i.width;l.height=i.height;s=this.getPotRenderTarget(c.gl,i.width,i.height,f);e.target=n;e.filters=t;e.resolution=f;e.renderTarget=s;s.setFrame(l,i);c.bindRenderTarget(s);s.clear()},t.prototype.popFilter=function(){var i=this.filterData,e=i.stack[i.index-1],n=i.stack[i.index],r,u,t,f,o;if(this.quad.map(n.renderTarget.size,n.sourceFrame).upload(),r=n.filters,r.length===1)r[0].apply(this,n.renderTarget,e.renderTarget,!1,n),this.freePotRenderTarget(n.renderTarget);else{for(u=n.renderTarget,t=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,n.resolution),t.setFrame(n.destinationFrame,n.sourceFrame),t.clear(),f=0,f=0;f<r.length-1;++f)r[f].apply(this,u,t,!0,n),o=u,u=t,t=o;r[f].apply(this,u,e.renderTarget,!1,n);this.freePotRenderTarget(u);this.freePotRenderTarget(t)}i.index--;i.index===0&&(this.filterData=null)},t.prototype.applyFilter=function(n,t,i,r){var u=this.renderer,f=u.gl,e=n.glShaders[u.CONTEXT_UID],s;e||(n.glShaderKey?(e=this.shaderCache[n.glShaderKey],e||(e=new o.default(this.gl,n.vertexSrc,n.fragmentSrc),n.glShaders[u.CONTEXT_UID]=this.shaderCache[n.glShaderKey]=e,this.managedFilters.push(n))):(e=n.glShaders[u.CONTEXT_UID]=new o.default(this.gl,n.vertexSrc,n.fragmentSrc),this.managedFilters.push(n)),u.bindVao(null),this.quad.initVao(e));u.bindVao(this.quad.vao);u.bindRenderTarget(i);r&&(f.disable(f.SCISSOR_TEST),u.clear(),f.enable(f.SCISSOR_TEST));i===u.maskManager.scissorRenderTarget&&u.maskManager.pushScissorMask(null,u.maskManager.scissorData);u.bindShader(e);s=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=s;this.syncUniforms(e,n);u.state.setBlendMode(n.blendMode);f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,t.texture.texture);this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0);f.bindTexture(f.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)},t.prototype.syncUniforms=function(n,t){var c=t.uniformData,r=t.uniforms,f=1,u=void 0,e,o,i,s,l,h;n.uniforms.filterArea&&(u=this.filterData.stack[this.filterData.index],e=n.uniforms.filterArea,e[0]=u.renderTarget.size.width,e[1]=u.renderTarget.size.height,e[2]=u.sourceFrame.x,e[3]=u.sourceFrame.y,n.uniforms.filterArea=e);n.uniforms.filterClamp&&(u=u||this.filterData.stack[this.filterData.index],o=n.uniforms.filterClamp,o[0]=0,o[1]=0,o[2]=(u.sourceFrame.width-1)/u.renderTarget.size.width,o[3]=(u.sourceFrame.height-1)/u.renderTarget.size.height,n.uniforms.filterClamp=o);for(i in c)s=c[i].type,s==="sampler2d"&&r[i]!==0?(r[i].baseTexture?n.uniforms[i]=this.renderer.bindTexture(r[i].baseTexture,f):(n.uniforms[i]=f,l=this.renderer.gl,this.renderer.boundTextures[f]=this.renderer.emptyTextures[f],l.activeTexture(l.TEXTURE0+f),r[i].texture.bind()),f++):s==="mat3"?n.uniforms[i]=r[i].a!==undefined?r[i].toArray(!0):r[i]:s==="vec2"?r[i].x!==undefined?(h=n.uniforms[i]||new Float32Array(2),h[0]=r[i].x,h[1]=r[i].y,n.uniforms[i]=h):n.uniforms[i]=r[i]:s==="float"?n.uniforms.data[i].value!==c[i]&&(n.uniforms[i]=r[i]):n.uniforms[i]=r[i]},t.prototype.getRenderTarget=function(n,t){var i=this.filterData.stack[this.filterData.index],r=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,t||i.resolution);return r.setFrame(i.destinationFrame,i.sourceFrame),r},t.prototype.returnRenderTarget=function(n){this.freePotRenderTarget(n)},t.prototype.calculateScreenSpaceMatrix=function(n){var t=this.filterData.stack[this.filterData.index];return f.calculateScreenSpaceMatrix(n,t.sourceFrame,t.renderTarget.size)},t.prototype.calculateNormalizedScreenSpaceMatrix=function(n){var t=this.filterData.stack[this.filterData.index];return f.calculateNormalizedScreenSpaceMatrix(n,t.sourceFrame,t.renderTarget.size,t.destinationFrame)},t.prototype.calculateSpriteMatrix=function(n,t){var i=this.filterData.stack[this.filterData.index];return f.calculateSpriteMatrix(n,i.sourceFrame,i.renderTarget.size,t)},t.prototype.destroy=function(){for(var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1,r=this.renderer,t=this.managedFilters,n=0;n<t.length;n++)i||t[n].glShaders[r.CONTEXT_UID].destroy(),delete t[n].glShaders[r.CONTEXT_UID];this.shaderCache={};i?this.pool={}:this.emptyPool()},t.prototype.getPotRenderTarget=function(n,t,i,r){var f,u,e;return t=s.default.nextPow2(t*r),i=s.default.nextPow2(i*r),f=(t&65535)<<16|i&65535,this.pool[f]||(this.pool[f]=[]),u=this.pool[f].pop(),u||(e=this.renderer.boundTextures[0],n.activeTexture(n.TEXTURE0),u=new y.default(n,t,i,null,1),n.bindTexture(n.TEXTURE_2D,e._glTextures[this.renderer.CONTEXT_UID].texture)),u.resolution=r,u.defaultFrame.width=u.size.width=t/r,u.defaultFrame.height=u.size.height=i/r,u},t.prototype.emptyPool=function(){var i,n,t;for(i in this.pool)if(n=this.pool[i],n)for(t=0;t<n.length;t++)n[t].destroy(!0);this.pool={}},t.prototype.freePotRenderTarget=function(n){var t=n.size.width*n.resolution,i=n.size.height*n.resolution,r=(t&65535)<<16|i&65535;this.pool[r].push(n)},t}(a.default);i.default=c},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function c(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function l(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u;i.__esModule=!0;var f=n("./WebGLManager"),e=r(f),o=n("../filters/spriteMask/SpriteMaskFilter"),s=r(o);u=function(n){function t(i){h(this,t);var r=c(this,n.call(this,i));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return l(t,n),t.prototype.pushMask=function(n,t){if(t.texture)this.pushSpriteMask(n,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var r=t.worldTransform,i=Math.atan2(r.b,r.a);i=Math.round(i*(180/Math.PI));i%90?this.pushStencilMask(t):this.pushScissorMask(n,t)}else this.pushStencilMask(t)},t.prototype.popMask=function(n,t){t.texture?this.popSpriteMask(n,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(n,t):this.popStencilMask(n,t)},t.prototype.pushSpriteMask=function(n,t){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new s.default(t)]);i[0].resolution=this.renderer.resolution;i[0].maskSprite=t;n.filterArea=t.getBounds(!0);this.renderer.filterManager.pushFilter(n,i);this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter();this.alphaMaskIndex--},t.prototype.pushStencilMask=function(n){this.renderer.currentRenderer.stop();this.renderer.stencilManager.pushStencil(n)},t.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop();this.renderer.stencilManager.popStencil()},t.prototype.pushScissorMask=function(n,t){var r,i,u;t.renderable=!0;r=this.renderer._activeRenderTarget;i=t.getBounds();i.fit(r.size);t.renderable=!1;this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);u=this.renderer.resolution;this.renderer.gl.scissor(i.x*u,(r.root?r.size.height-i.y-i.height:i.y)*u,i.width*u,i.height*u);this.scissorRenderTarget=r;this.scissorData=t;this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null;this.scissorData=null;this.scissor=!1;var n=this.renderer.gl;n.disable(n.SCISSOR_TEST)},t}(e.default);i.default=u},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function h(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u,r,f;i.__esModule=!0;u=n("./WebGLManager");r=e(u);f=function(n){function t(i){o(this,t);var r=s(this,n.call(this,i));return r.stencilMaskStack=null,r}return h(t,n),t.prototype.setMaskStack=function(n){this.stencilMaskStack=n;var t=this.renderer.gl;n.length===0?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},t.prototype.pushStencil=function(n){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,i=this.stencilMaskStack.length;i===0&&t.enable(t.STENCIL_TEST);this.stencilMaskStack.push(n);t.colorMask(!1,!1,!1,!1);t.stencilFunc(t.EQUAL,i,this._getBitwiseMask());t.stencilOp(t.KEEP,t.KEEP,t.INCR);this.renderer.plugins.graphics.render(n);this._useCurrent()},t.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var n=this.renderer.gl,t=this.stencilMaskStack.pop();this.stencilMaskStack.length===0?(n.disable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),n.clearStencil(0)):(n.colorMask(!1,!1,!1,!1),n.stencilOp(n.KEEP,n.KEEP,n.DECR),this.renderer.plugins.graphics.render(t),this._useCurrent())},t.prototype._useCurrent=function(){var n=this.renderer.gl;n.colorMask(!0,!0,!0,!0);n.stencilFunc(n.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask());n.stencilOp(n.KEEP,n.KEEP,n.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},t.prototype.destroy=function(){r.default.prototype.destroy.call(this);this.stencilMaskStack.stencilStack=null},t}(r.default);i.default=f},{"./WebGLManager":93}],93:[function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}i.__esModule=!0;var u=function(){function n(t){r(this,n);this.renderer=t;this.renderer.on("context",this.onContextChange,this)}return n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this);this.renderer=null},n}();i.default=u},{}],94:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function h(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r,u,f;i.__esModule=!0;r=n("../managers/WebGLManager");u=e(r);f=function(n){function t(){return o(this,t),s(this,n.apply(this,arguments))}return h(t,n),t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(){},t}(u.default);i.default=f},{"../managers/WebGLManager":93}],95:[function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var f;i.__esModule=!0;var e=n("pixi-gl-core"),r=u(e),o=n("../../../utils/createIndicesForQuads"),s=u(o);f=function(){function n(t,i){h(this,n);this.gl=t;this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.interleaved=new Float32Array(16);for(var u=0;u<4;u++)this.interleaved[u*4]=this.vertices[u*2],this.interleaved[u*4+1]=this.vertices[u*2+1],this.interleaved[u*4+2]=this.uvs[u*2],this.interleaved[u*4+3]=this.uvs[u*2+1];this.indices=s.default(1);this.vertexBuffer=r.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW);this.indexBuffer=r.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW);this.vao=new r.default.VertexArrayObject(t,i)}return n.prototype.initVao=function(n){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,n.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,n.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},n.prototype.map=function(n,t){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+t.width/n.width,this.uvs[3]=r,this.uvs[4]=i+t.width/n.width,this.uvs[5]=r+t.height/n.height,this.uvs[6]=i,this.uvs[7]=r+t.height/n.height,i=t.x,r=t.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+t.width,this.vertices[3]=r,this.vertices[4]=i+t.width,this.vertices[5]=r+t.height,this.vertices[6]=i,this.vertices[7]=r+t.height,this},n.prototype.upload=function(){for(var n=0;n<4;n++)this.interleaved[n*4]=this.vertices[n*2],this.interleaved[n*4+1]=this.vertices[n*2+1],this.interleaved[n*4+2]=this.uvs[n*2],this.interleaved[n*4+3]=this.uvs[n*2+1];return this.vertexBuffer.upload(this.interleaved),this},n.prototype.destroy=function(){var n=this.gl;n.deleteBuffer(this.vertexBuffer);n.deleteBuffer(this.indexBuffer)},n}();i.default=f},{"../../../utils/createIndicesForQuads":123,"pixi-gl-core":12}],96:[function(n,t,i){"use strict";function h(n){return n&&n.__esModule?n:{"default":n}}function c(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var e;i.__esModule=!0;var r=n("../../../math"),o=n("../../../const"),s=n("../../../settings"),u=h(s),f=n("pixi-gl-core");e=function(){function n(t,i,e,s,h,l){c(this,n);this.gl=t;this.frameBuffer=null;this.texture=null;this.clearColor=[0,0,0,0];this.size=new r.Rectangle(0,0,1,1);this.resolution=h||u.default.RESOLUTION;this.projectionMatrix=new r.Matrix;this.transform=null;this.frame=null;this.defaultFrame=new r.Rectangle;this.destinationFrame=null;this.sourceFrame=null;this.stencilBuffer=null;this.stencilMaskStack=[];this.filterData=null;this.scaleMode=s!==undefined?s:u.default.SCALE_MODE;this.root=l;this.root?(this.frameBuffer=new f.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=f.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===o.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture);this.setFrame();this.resize(i,e)}return n.prototype.clear=function(n){var t=n||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},n.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},n.prototype.setFrame=function(n,t){this.destinationFrame=n||this.destinationFrame||this.defaultFrame;this.sourceFrame=t||this.sourceFrame||this.destinationFrame},n.prototype.activate=function(){var n=this.gl;this.frameBuffer.bind();this.calculateProjection(this.destinationFrame,this.sourceFrame);this.transform&&this.projectionMatrix.append(this.transform);this.destinationFrame!==this.sourceFrame?(n.enable(n.SCISSOR_TEST),n.scissor(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):n.disable(n.SCISSOR_TEST);n.viewport(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},n.prototype.calculateProjection=function(n,t){var i=this.projectionMatrix;t=t||n;i.identity();this.root?(i.a=2/n.width,i.d=-2/n.height,i.tx=-1-t.x*i.a,i.ty=1-t.y*i.d):(i.a=2/n.width,i.d=2/n.height,i.tx=-1-t.x*i.a,i.ty=-1-t.y*i.d)},n.prototype.resize=function(n,t){if(n=n|0,t=t|0,this.size.width!==n||this.size.height!==t){this.size.width=n;this.size.height=t;this.defaultFrame.width=n;this.defaultFrame.height=t;this.frameBuffer.resize(n*this.resolution,t*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},n.prototype.destroy=function(){this.frameBuffer.destroy();this.frameBuffer=null;this.texture=null},n}();i.default=e},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":12}],97:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(n,t){var e=!t,i,r,o;if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(e&&(i=document.createElement("canvas"),i.width=1,i.height=1,t=u.default.createContext(i)),r=t.createShader(t.FRAGMENT_SHADER);;)if(o=f.replace(/%forloop%/gi,s(n)),t.shaderSource(r,o),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))break;else n=n/2|0;return e&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext(),n}function s(n){for(var i="",t=0;t<n;++t)t>0&&(i+="\nelse "),t<n-1&&(i+="if(test == "+t+".0){}");return i}var r,u,f;i.__esModule=!0;i.default=o;r=n("pixi-gl-core");u=e(r);f="precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}"},{"pixi-gl-core":12}],98:[function(n,t,i){"use strict";function u(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return t[r.BLEND_MODES.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.ADD]=[n.ONE,n.DST_ALPHA],t[r.BLEND_MODES.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR],t[r.BLEND_MODES.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[r.BLEND_MODES.ADD_NPM]=[n.SRC_ALPHA,n.DST_ALPHA,n.ONE,n.DST_ALPHA],t[r.BLEND_MODES.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_COLOR],t}i.__esModule=!0;i.default=u;var r=n("../../../const")},{"../../../const":46}],99:[function(n,t,i){"use strict";function u(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return t[r.DRAW_MODES.POINTS]=n.POINTS,t[r.DRAW_MODES.LINES]=n.LINES,t[r.DRAW_MODES.LINE_LOOP]=n.LINE_LOOP,t[r.DRAW_MODES.LINE_STRIP]=n.LINE_STRIP,t[r.DRAW_MODES.TRIANGLES]=n.TRIANGLES,t[r.DRAW_MODES.TRIANGLE_STRIP]=n.TRIANGLE_STRIP,t[r.DRAW_MODES.TRIANGLE_FAN]=n.TRIANGLE_FAN,t}i.__esModule=!0;i.default=u;var r=n("../../../const")},{"../../../const":46}],100:[function(n,t,i){"use strict";function r(n){var t=n.getContextAttributes();t.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}i.__esModule=!0;i.default=r},{}],101:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}i.__esModule=!0;var u=n("./utils/maxRecommendedTextures"),f=r(u),e=n("./utils/canUploadSameBuffer"),o=r(e);i.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:f.default(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:o.default(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":122,"./utils/maxRecommendedTextures":127}],102:[function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}function y(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function p(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function w(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r,s;i.__esModule=!0;var h=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),f=n("../math"),u=n("../utils"),c=n("../const"),l=n("../textures/Texture"),e=o(l),a=n("../display/Container"),v=o(a);r=new f.Point;s=function(n){function t(i){y(this,t);var r=p(this,n.call(this));return r._anchor=new f.ObservablePoint(r._onAnchorUpdate,r),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=c.BLEND_MODES.NORMAL,r.shader=null,r.cachedTint=16777215,r.texture=i||e.default.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.pluginName="sprite",r}return w(t,n),t.prototype._onTextureUpdate=function(){this._textureID=-1;this._textureTrimmedID=-1;this.cachedTint=16777215;this._width&&(this.scale.x=u.sign(this.scale.x)*this._width/this._texture.orig.width);this._height&&(this.scale.y=u.sign(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1;this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID;this._textureID=this._texture._updateID;var p=this._texture,r=this.transform.worldTransform,s=r.a,h=r.b,c=r.c,l=r.d,a=r.tx,v=r.ty,n=this.vertexData,o=p.trim,u=p.orig,y=this._anchor,f=0,t=0,e=0,i=0;o?(t=o.x-y._x*u.width,f=t+o.width,i=o.y-y._y*u.height,e=i+o.height):(t=-y._x*u.width,f=t+u.width,i=-y._y*u.height,e=i+u.height);n[0]=s*t+c*i+a;n[1]=l*i+h*t+v;n[2]=s*f+c*i+a;n[3]=l*i+h*f+v;n[4]=s*f+c*e+a;n[5]=l*e+h*f+v;n[6]=s*t+c*e+a;n[7]=l*e+h*t+v}},t.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID;this._textureTrimmedID=this._texture._updateID;var y=this._texture,n=this.vertexTrimmedData,u=y.orig,v=this._anchor,t=this.transform.worldTransform,f=t.a,e=t.b,o=t.c,s=t.d,h=t.tx,c=t.ty,i=-v._x*u.width,l=i+u.width,r=-v._y*u.height,a=r+u.height;n[0]=f*i+o*r+h;n[1]=s*r+e*i+c;n[2]=f*l+o*r+h;n[3]=s*r+e*l+c;n[4]=f*l+o*a+h;n[5]=s*a+e*l+c;n[6]=f*i+o*a+h;n[7]=s*a+e*i+c},t.prototype._renderWebGL=function(n){this.calculateVertices();n.setObjectRenderer(n.plugins[this.pluginName]);n.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(n){n.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var n=this._texture.trim,t=this._texture.orig;n&&(n.width!==t.width||n.height!==t.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))},t.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new f.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(n){this.worldTransform.applyInverse(n,r);var i=this._texture.orig.width,u=this._texture.orig.height,f=-i*this.anchor.x,t=0;return r.x>=f&&r.x<f+i&&(t=-u*this.anchor.y,r.y>=t&&r.y<t+u)?!0:!1},t.prototype.destroy=function(t){var i,r;n.prototype.destroy.call(this,t);this._anchor=null;i=typeof t=="boolean"?t:t&&t.texture;i&&(r=typeof t=="boolean"?t:t&&t.baseTexture,this._texture.destroy(!!r));this._texture=null;this.shader=null},t.from=function(n){return new t(e.default.from(n))},t.fromFrame=function(n){var i=u.TextureCache[n];if(!i)throw new Error('The frameId "'+n+'" does not exist in the texture cache');return new t(i)},t.fromImage=function(n,i,r){return new t(e.default.fromImage(n,i,r))},h(t,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(n){var t=u.sign(this.scale.x)||1;this.scale.x=t*n/this._texture.orig.width;this._width=n}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(n){var t=u.sign(this.scale.y)||1;this.scale.y=t*n/this._texture.orig.height;this._height=n}},{key:"anchor",get:function(){return this._anchor},set:function(n){this._anchor.copy(n)}},{key:"tint",get:function(){return this._tint},set:function(n){this._tint=n;this._tintRGB=(n>>16)+(n&65280)+((n&255)<<16)}},{key:"texture",get:function(){return this._texture},set:function(n){if(this._texture!==n&&(this._texture=n,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,n))if(n.baseTexture.hasLoaded)this._onTextureUpdate();else n.once("update",this._onTextureUpdate,this)}}]),t}(v.default);i.default=s},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":125}],103:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function a(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r,u;i.__esModule=!0;var o=n("../../renderers/canvas/CanvasRenderer"),s=e(o),h=n("../../const"),f=n("../../math"),c=n("./CanvasTinter"),l=e(c);r=new f.Matrix;u=function(){function n(t){a(this,n);this.renderer=t}return n.prototype.render=function(n){var i=n._texture,t=this.renderer,c=i._frame.width,a=i._frame.height,u=n.transform.worldTransform,e=0,o=0,v,s;i.orig.width<=0||i.orig.height<=0||!i.baseTexture.source||(t.setBlendMode(n.blendMode),i.valid&&(t.context.globalAlpha=n.worldAlpha,v=i.baseTexture.scaleMode===h.SCALE_MODES.LINEAR,t.smoothProperty&&t.context[t.smoothProperty]!==v&&(t.context[t.smoothProperty]=v),i.trim?(e=i.trim.width/2+i.trim.x-n.anchor.x*i.orig.width,o=i.trim.height/2+i.trim.y-n.anchor.y*i.orig.height):(e=(.5-n.anchor.x)*i.orig.width,o=(.5-n.anchor.y)*i.orig.height),i.rotate&&(u.copy(r),u=r,f.GroupD8.matrixAppendRotationInv(u,i.rotate,e,o),e=0,o=0),e-=c/2,o-=a/2,t.roundPixels?(t.context.setTransform(u.a,u.b,u.c,u.d,u.tx*t.resolution|0,u.ty*t.resolution|0),e=e|0,o=o|0):t.context.setTransform(u.a,u.b,u.c,u.d,u.tx*t.resolution,u.ty*t.resolution),s=i.baseTexture.resolution,n.tint!==16777215?((n.cachedTint!==n.tint||n.tintedTexture.tintId!==n._texture._updateID)&&(n.cachedTint=n.tint,n.tintedTexture=l.default.getTintedTexture(n,n.tint)),t.context.drawImage(n.tintedTexture,0,0,c*s,a*s,e*t.resolution,o*t.resolution,c*t.resolution,a*t.resolution)):t.context.drawImage(i.baseTexture.source,i._frame.x*s,i._frame.y*s,c*s,a*s,e*t.resolution,o*t.resolution,c*t.resolution,a*t.resolution)))},n.prototype.destroy=function(){this.renderer=null},n}();i.default=u;s.default.registerPlugin("sprite",u)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(n,t,i){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}var r;i.__esModule=!0;var u=n("../../utils"),f=n("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),e=o(f);r={getTintedTexture:function(n,t){var i=n._texture,f,e,u,o;if(t=r.roundColor(t),f="#"+("00000"+(t|0).toString(16)).substr(-6),i.tintCache=i.tintCache||{},e=i.tintCache[f],u=void 0,e){if(e.tintId===i._updateID)return i.tintCache[f];u=i.tintCache[f]}else u=r.canvas||document.createElement("canvas");return r.tintMethod(i,t,u),u.tintId=i._updateID,r.convertTintToImage?(o=new Image,o.src=u.toDataURL(),i.tintCache[f]=o):(i.tintCache[f]=u,r.canvas=null),u},tintWithMultiply:function(n,t,i){var u=i.getContext("2d"),r=n._frame.clone(),f=n.baseTexture.resolution;r.x*=f;r.y*=f;r.width*=f;r.height*=f;i.width=Math.ceil(r.width);i.height=Math.ceil(r.height);u.save();u.fillStyle="#"+("00000"+(t|0).toString(16)).substr(-6);u.fillRect(0,0,r.width,r.height);u.globalCompositeOperation="multiply";u.drawImage(n.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height);u.globalCompositeOperation="destination-atop";u.drawImage(n.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height);u.restore()},tintWithOverlay:function(n,t,i){var u=i.getContext("2d"),r=n._frame.clone(),f=n.baseTexture.resolution;r.x*=f;r.y*=f;r.width*=f;r.height*=f;i.width=Math.ceil(r.width);i.height=Math.ceil(r.height);u.save();u.globalCompositeOperation="copy";u.fillStyle="#"+("00000"+(t|0).toString(16)).substr(-6);u.fillRect(0,0,r.width,r.height);u.globalCompositeOperation="destination-atop";u.drawImage(n.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height);u.restore()},tintWithPerPixel:function(n,t,i){var f=i.getContext("2d"),r=n._frame.clone(),o=n.baseTexture.resolution,e;r.x*=o;r.y*=o;r.width*=o;r.height*=o;i.width=Math.ceil(r.width);i.height=Math.ceil(r.height);f.save();f.globalCompositeOperation="copy";f.drawImage(n.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height);f.restore();var h=u.hex2rgb(t),l=h[0],a=h[1],v=h[2],c=f.getImageData(0,0,r.width,r.height),s=c.data;for(e=0;e<s.length;e+=4)s[e+0]*=l,s[e+1]*=a,s[e+2]*=v;f.putImageData(c,0,0)},roundColor:function(n){var i=r.cacheStepsPerColorChannel,t=u.hex2rgb(n);return t[0]=Math.min(255,t[0]/i*i),t[1]=Math.min(255,t[1]/i*i),t[2]=Math.min(255,t[2]/i*i),u.rgb2hex(t)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:e.default(),tintMethod:0};r.tintMethod=r.canUseMultiply?r.tintWithMultiply:r.tintWithPerPixel;i.default=r},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":125}],105:[function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}i.__esModule=!0;var u=function(){function n(t){r(this,n);this.vertices=new ArrayBuffer(t);this.float32View=new Float32Array(this.vertices);this.uint32View=new Uint32Array(this.vertices)}return n.prototype.destroy=function(){this.vertices=null;this.positions=null;this.uvs=null;this.colors=null},n}();i.default=u},{}],106:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function ft(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function et(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function ot(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}i.__esModule=!0;var l=n("../../renderers/webgl/utils/ObjectRenderer"),a=r(l),v=n("../../renderers/webgl/WebGLRenderer"),y=r(v),p=n("../../utils/createIndicesForQuads"),w=r(p),b=n("./generateMultiTextureShader"),k=r(b),d=n("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),g=r(d),nt=n("./BatchBuffer"),tt=r(nt),it=n("../../settings"),f=r(it),e=n("../../utils"),rt=n("pixi-gl-core"),o=r(rt),ut=n("bit-twiddle"),s=r(ut);var u=0,h=0,c=function(n){function t(i){var r,u,e;for(ft(this,t),r=et(this,n.call(this,i)),r.vertSize=5,r.vertByteSize=r.vertSize*4,r.size=f.default.SPRITE_BATCH_SIZE,r.buffers=[],u=1;u<=s.default.nextPow2(r.size);u*=2)r.buffers.push(new tt.default(u*4*r.vertByteSize));for(r.indices=w.default(r.size),r.shader=null,r.currentIndex=0,r.groups=[],e=0;e<r.size;e++)r.groups[e]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};r.sprites=[];r.vertexBuffers=[];r.vaos=[];r.vaoMax=2;r.vertexCount=0;r.renderer.on("prerender",r.onPrerender,r);return r}return ot(t,n),t.prototype.onContextChange=function(){var n=this.renderer.gl,t,i,r,u;for(this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=g.default(this.MAX_TEXTURES,n)),this.shader=k.default(n,this.MAX_TEXTURES),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(n,this.indices,n.STATIC_DRAW),this.renderer.bindVao(null),t=this.shader.attributes,i=0;i<this.vaoMax;i++)r=this.vertexBuffers[i]=o.default.GLBuffer.createVertexBuffer(n,null,n.STREAM_DRAW),u=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(r,t.aVertexPosition,n.FLOAT,!1,this.vertByteSize,0).addAttribute(r,t.aTextureCoord,n.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(r,t.aColor,n.UNSIGNED_BYTE,!0,this.vertByteSize,12),t.aTextureId&&u.addAttribute(r,t.aTextureId,n.FLOAT,!1,this.vertByteSize,16),this.vaos[i]=u;this.vao=this.vaos[0];this.currentBlendMode=99999;this.boundTextures=new Array(this.MAX_TEXTURES)},t.prototype.onPrerender=function(){this.vertexCount=0},t.prototype.render=function(n){(this.currentIndex>=this.size&&this.flush(),n._texture._uvs)&&(this.sprites[this.currentIndex++]=n)},t.prototype.flush=function(){var t,tt,p,vt,et,ot,yt,c,st,wt,w,kt,d;if(this.currentIndex!==0){var v=this.renderer.gl,k=this.MAX_TEXTURES,dt=s.default.nextPow2(this.currentIndex),gt=s.default.log2(dt),rt=this.buffers[gt],ct=this.sprites,lt=this.groups,i=rt.float32View,y=rt.uint32View,ut=this.boundTextures,at=this.renderer.boundTextures,ni=this.renderer.textureGC.count,n=0,l=void 0,b=void 0,pt=1,g=0,a=lt[0],r=void 0,nt=void 0,ft=e.premultiplyBlendMode[ct[0]._texture.baseTexture.premultipliedAlpha?1:0][ct[0].blendMode];for(a.textureCount=0,a.start=0,a.blend=ft,u++,t=void 0,t=0;t<k;++t){if(tt=at[t],tt._enabled===u){ut[t]=this.renderer.emptyTextures[t];continue}ut[t]=tt;tt._virtalBoundId=t;tt._enabled=u}for(u++,t=0;t<this.currentIndex;++t){if(p=ct[t],l=p._texture.baseTexture,vt=e.premultiplyBlendMode[Number(l.premultipliedAlpha)][p.blendMode],ft!==vt&&(ft=vt,b=null,g=k,u++),b!==l&&(b=l,l._enabled!==u)){if(g===k&&(u++,a.size=t-a.start,g=0,a=lt[pt++],a.blend=ft,a.textureCount=0,a.start=t),l.touched=ni,l._virtalBoundId===-1)for(et=0;et<k;++et)if(ot=(et+h)%k,yt=ut[ot],yt._enabled!==u){h++;yt._virtalBoundId=-1;l._virtalBoundId=ot;ut[ot]=l;break}l._enabled=u;a.textureCount++;a.ids[g]=l._virtalBoundId;a.textures[g++]=l}r=p.vertexData;nt=p._texture._uvs.uvsUint32;this.renderer.roundPixels?(c=this.renderer.resolution,i[n]=(r[0]*c|0)/c,i[n+1]=(r[1]*c|0)/c,i[n+5]=(r[2]*c|0)/c,i[n+6]=(r[3]*c|0)/c,i[n+10]=(r[4]*c|0)/c,i[n+11]=(r[5]*c|0)/c,i[n+15]=(r[6]*c|0)/c,i[n+16]=(r[7]*c|0)/c):(i[n]=r[0],i[n+1]=r[1],i[n+5]=r[2],i[n+6]=r[3],i[n+10]=r[4],i[n+11]=r[5],i[n+15]=r[6],i[n+16]=r[7]);y[n+2]=nt[0];y[n+7]=nt[1];y[n+12]=nt[2];y[n+17]=nt[3];st=Math.min(p.worldAlpha,1);wt=st<1&&l.premultipliedAlpha?e.premultiplyTint(p._tintRGB,st):p._tintRGB+(st*255<<24);y[n+3]=y[n+8]=y[n+13]=y[n+18]=wt;i[n+4]=i[n+9]=i[n+14]=i[n+19]=l._virtalBoundId;n+=20}if(a.size=t-a.start,f.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(rt.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var it=this.shader.attributes,ht=this.vertexBuffers[this.vertexCount]=o.default.GLBuffer.createVertexBuffer(v,null,v.STREAM_DRAW),bt=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(ht,it.aVertexPosition,v.FLOAT,!1,this.vertByteSize,0).addAttribute(ht,it.aTextureCoord,v.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(ht,it.aColor,v.UNSIGNED_BYTE,!0,this.vertByteSize,12);it.aTextureId&&bt.addAttribute(ht,it.aTextureId,v.FLOAT,!1,this.vertByteSize,16);this.vaos[this.vertexCount]=bt}this.renderer.bindVao(this.vaos[this.vertexCount]);this.vertexBuffers[this.vertexCount].upload(rt.vertices,0,!1);this.vertexCount++}for(t=0;t<k;++t)at[t]._virtalBoundId=-1;for(t=0;t<pt;++t){for(w=lt[t],kt=w.textureCount,d=0;d<kt;d++)b=w.textures[d],at[w.ids[d]]!==b&&this.renderer.bindTexture(b,w.ids[d],!0),b._virtalBoundId=-1;this.renderer.state.setBlendMode(w.blend);v.drawElements(v.TRIANGLES,w.size*6,v.UNSIGNED_SHORT,w.start*12)}this.currentIndex=0}},t.prototype.start=function(){this.renderer.bindShader(this.shader);f.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var i,t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();for(this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),n.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null,i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},t}(a.default);i.default=c;y.default.registerPlugin("sprite",c)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":125,"../../utils/createIndicesForQuads":123,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":12}],107:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(n,t){var i=r,e,o,u;for(i=i.replace(/%count%/gi,t),i=i.replace(/%forloop%/gi,s(t)),e=new f.default(n,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",i),o=[],u=0;u<t;u++)o[u]=u;return e.bind(),e.uniforms.uSamplers=o,e}function s(n){var t="",i;for(t+="\n",t+="\n",i=0;i<n;i++)i>0&&(t+="\nelse "),i<n-1&&(t+="if(textureId == "+i+".0)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",t+="\n}";return t+="\n",t+"\n"}var r;i.__esModule=!0;i.default=o;var u=n("../../Shader"),f=e(u),h=n("path");r="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\nvoid main(void){\nvec4 color;\nfloat textureId = floor(vTextureId+0.5);\n%forloop%\ngl_FragColor = color * vColor;\n}"},{"../../Shader":44,path:23}],108:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function tt(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function it(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function rt(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var h,c;i.__esModule=!0;var l=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),a=n("../sprites/Sprite"),v=r(a),y=n("../textures/Texture"),u=r(y),f=n("../math"),e=n("../utils"),p=n("../const"),w=n("../settings"),o=r(w),b=n("./TextStyle"),s=r(b),k=n("./TextMetrics"),d=r(k),g=n("../utils/trimCanvas"),nt=r(g);h={texture:!0,children:!1,baseTexture:!0};c=function(n){function t(i,r,e){var h,s;return tt(this,t),e=e||document.createElement("canvas"),e.width=3,e.height=3,h=u.default.fromCanvas(e,o.default.SCALE_MODE,"text"),h.orig=new f.Rectangle,h.trim=new f.Rectangle,s=it(this,n.call(this,h)),u.default.addToCache(s._texture,s._texture.baseTexture.textureCacheIds[0]),s.canvas=e,s.context=s.canvas.getContext("2d"),s.resolution=o.default.RESOLUTION,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=i,s.style=r,s.localStyleID=-1,s}return rt(t,n),t.prototype.updateText=function(n){var t=this._style,r,s,l,a,u,f;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!n){this._font=this._style.toFontString();var i=this.context,e=d.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),p=e.width,w=e.height,o=e.lines,v=e.lineHeight,h=e.lineWidths,c=e.maxLineWidth,y=e.fontProperties;if(this.canvas.width=Math.ceil((p+t.padding*2)*this.resolution),this.canvas.height=Math.ceil((w+t.padding*2)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=t.stroke,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,r=void 0,s=void 0,t.dropShadow)for(i.fillStyle=t.dropShadowColor,i.globalAlpha=t.dropShadowAlpha,i.shadowBlur=t.dropShadowBlur,t.dropShadowBlur>0&&(i.shadowColor=t.dropShadowColor),l=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,a=Math.sin(t.dropShadowAngle)*t.dropShadowDistance,u=0;u<o.length;u++)r=t.strokeThickness/2,s=t.strokeThickness/2+u*v+y.ascent,t.align==="right"?r+=c-h[u]:t.align==="center"&&(r+=(c-h[u])/2),t.fill&&(this.drawLetterSpacing(o[u],r+l+t.padding,s+a+t.padding),t.stroke&&t.strokeThickness&&(i.strokeStyle=t.dropShadowColor,this.drawLetterSpacing(o[u],r+l+t.padding,s+a+t.padding,!0),i.strokeStyle=t.stroke));for(i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(t,o),f=0;f<o.length;f++)r=t.strokeThickness/2,s=t.strokeThickness/2+f*v+y.ascent,t.align==="right"?r+=c-h[f]:t.align==="center"&&(r+=(c-h[f])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[f],r+t.padding,s+t.padding,!0),t.fill&&this.drawLetterSpacing(o[f],r+t.padding,s+t.padding);this.updateTexture()}},t.prototype.drawLetterSpacing=function(n,t,i){var f=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1,s=this._style,e=s.letterSpacing;if(e===0){f?this.context.strokeText(n,t,i):this.context.fillText(n,t,i);return}for(var h=String.prototype.split.call(n,""),u=t,o=0,r="";o<n.length;)r=h[o++],f?this.context.strokeText(r,u,i):this.context.fillText(r,u,i),u+=this.context.measureText(r).width+e},t.prototype.updateTexture=function(){var t=this.canvas,r;this._style.trim&&(r=nt.default(t),t.width=r.width,t.height=r.height,this.context.putImageData(r.data,0,0));var n=this._texture,f=this._style,u=f.trim?0:f.padding,i=n.baseTexture;i.hasLoaded=!0;i.resolution=this.resolution;i.realWidth=t.width;i.realHeight=t.height;i.width=t.width/this.resolution;i.height=t.height/this.resolution;n.trim.width=n._frame.width=t.width/this.resolution;n.trim.height=n._frame.height=t.height/this.resolution;n.trim.x=-u;n.trim.y=-u;n.orig.width=n._frame.width-u*2;n.orig.height=n._frame.height-u*2;this._onTextureUpdate();i.emit("update",i);this.dirty=!1},t.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0);this.updateText(!0);n.prototype.renderWebGL.call(this,t)},t.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0);this.updateText(!0);n.prototype._renderCanvas.call(this,t)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),n.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.updateText(!0);this.calculateVertices();this._bounds.addQuad(this.vertexData)},t.prototype._onStyleChange=function(){this.dirty=!0},t.prototype._generateFillStyle=function(n,t){var y,c,l,f,e;if(!Array.isArray(n.fill))return n.fill;if(navigator.isCocoonJS)return n.fill[0];var o=void 0,s=void 0,u=void 0,h=void 0,a=this.canvas.width/this.resolution,v=this.canvas.height/this.resolution,i=n.fill.slice(),r=n.fillGradientStops.slice();if(!r.length)for(y=i.length+1,c=1;c<y;++c)r.push(c/y);if(i.unshift(n.fill[0]),r.unshift(0),i.push(n.fill[n.fill.length-1]),r.push(1),n.fillGradientType===p.TEXT_GRADIENT.LINEAR_VERTICAL)for(o=this.context.createLinearGradient(a/2,0,a/2,v),s=(i.length+1)*t.length,u=0,l=0;l<t.length;l++)for(u+=1,f=0;f<i.length;f++)h=typeof r[f]=="number"?r[f]/t.length+l/t.length:u/s,o.addColorStop(h,i[f]),u++;else for(o=this.context.createLinearGradient(0,v/2,a,v/2),s=i.length+1,u=1,e=0;e<i.length;e++)h=typeof r[e]=="number"?r[e]:u/s,o.addColorStop(h,i[e]),u++;return o},t.prototype.destroy=function(t){typeof t=="boolean"&&(t={children:t});t=Object.assign({},h,t);n.prototype.destroy.call(this,t);this.context=null;this.canvas=null;this._style=null},l(t,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(n){this.updateText(!0);var t=e.sign(this.scale.x)||1;this.scale.x=t*n/this._texture.orig.width;this._width=n}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(n){this.updateText(!0);var t=e.sign(this.scale.y)||1;this.scale.y=t*n/this._texture.orig.height;this._height=n}},{key:"style",get:function(){return this._style},set:function(n){n=n||{};this._style=n instanceof s.default?n:new s.default(n);this.localStyleID=-1;this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(n){(n=String(n===""||n===null||n===undefined?" ":n),this._text!==n)&&(this._text=n,this.dirty=!0)}}]),t}(v.default);i.default=c},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":125,"../utils/trimCanvas":130,"./TextMetrics":109,"./TextStyle":110}],109:[function(n,t,i){"use strict";function f(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r,u;i.__esModule=!0;r=function(){function n(t,i,r,u,e,o,s,h,c){f(this,n);this.text=t;this.style=i;this.width=r;this.height=u;this.lines=e;this.lineWidths=o;this.lineHeight=s;this.maxLineWidth=h;this.fontProperties=c}return n.measureText=function(t,i,r){var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:n._canvas,f,h,c,o,l;r=r||i.wordWrap;var v=i.toFontString(),s=n.measureFont(v),y=a.getContext("2d");y.font=v;var w=r?n.wordWrap(t,i,a):t,u=w.split(/(?:\r\n|\r|\n)/),p=new Array(u.length),e=0;for(f=0;f<u.length;f++)h=y.measureText(u[f]).width+(u[f].length-1)*i.letterSpacing,p[f]=h,e=Math.max(e,h);return c=e+i.strokeThickness,i.dropShadow&&(c+=i.dropShadowDistance),o=i.lineHeight||s.fontSize+i.strokeThickness,l=Math.max(o,s.fontSize+i.strokeThickness)+(u.length-1)*(o+i.leading),i.dropShadow&&(l+=i.dropShadowDistance),new n(t,i,c,l,u,p,o+i.leading,e,s)},n.wordWrap=function(t,i){for(var f,o,r,a,p,h,s,e,w,k=arguments.length>2&&arguments[2]!==undefined?arguments[2]:n._canvas,v=k.getContext("2d"),u="",d=t.charAt(0),y=t.split("\n"),c=i.wordWrapWidth,b={},l=0;l<y.length;l++){for(f=c,o=y[l].split(" "),r=0;r<o.length;r++)if(a=v.measureText(o[r]).width,i.breakWords&&a>c)for(p=o[r].split(""),h=0;h<p.length;h++)s=p[h],e=b[s],e===undefined&&(e=v.measureText(s).width,b[s]=e),e>f?(u+="\n"+s,f=c-e):(h===0&&(r>0||d===" ")&&(u+=" "),u+=s,f-=e);else w=a+v.measureText(" ").width,r===0||w>f?(r>0&&(u+="\n"),u+=o[r],f=c-a):(f-=w,u+=" "+o[r]);l<y.length-1&&(u+="\n")}return u},n.measureFont=function(t){var l,a;if(n._fonts[t])return n._fonts[t];var f={},y=n._canvas,i=n._context;i.font=t;var h=Math.ceil(i.measureText("|Mq").width),r=Math.ceil(i.measureText("M").width),c=2*r;r=r*1.4|0;y.width=h;y.height=c;i.fillStyle="#f00";i.fillRect(0,0,h,c);i.font=t;i.textBaseline="alphabetic";i.fillStyle="#000";i.fillText("|Mq",0,r);for(var v=i.getImageData(0,0,h,c).data,p=v.length,e=h*4,u=0,o=0,s=!1,u=0;u<r;++u){for(l=0;l<e;l+=4)if(v[o+l]!==255){s=!0;break}if(s)break;else o+=e}for(f.ascent=r-u,o=p-e,s=!1,u=c;u>r;--u){for(a=0;a<e;a+=4)if(v[o+a]!==255){s=!0;break}if(s)break;else o-=e}return f.descent=u-r,f.fontSize=f.ascent+f.descent,n._fonts[t]=f,f},n}();i.default=r;u=document.createElement("canvas");u.width=u.height=10;r._canvas=u;r._context=u.getContext("2d");r._fonts={}},{}],110:[function(n,t,i){"use strict";function l(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n){return typeof n=="number"?c.hex2string(n):(typeof n=="string"&&n.indexOf("0x")===0&&(n=n.replace("0x","#")),n)}function u(n){if(Array.isArray(n)){for(var t=0;t<n.length;++t)n[t]=o(n[t]);return n}return o(n)}function a(n,t){if(!Array.isArray(n)||!Array.isArray(t)||n.length!==t.length)return!1;for(var i=0;i<n.length;++i)if(n[i]!==t[i])return!1;return!0}function f(n,t,i){for(var r in i)n[r]=Array.isArray(t[r])?t[r].slice():t[r]}var r,e;i.__esModule=!0;var s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),h=n("../const"),c=n("../utils");r={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:h.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0};e=function(){function n(t){l(this,n);this.styleID=0;this.reset();f(this,t,t)}return n.prototype.clone=function(){var t={};return f(t,this,r),new n(t)},n.prototype.reset=function(){f(this,r,r)},n.prototype.toFontString=function(){var r=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,n=this.fontFamily,t,i;for(Array.isArray(this.fontFamily)||(n=this.fontFamily.split(",")),t=n.length-1;t>=0;t--)i=n[t].trim(),/([\"\'])[^\'\"]+\1/.test(i)||(i='"'+i+'"'),n[t]=i;return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+r+" "+n.join(",")},s(n,[{key:"align",get:function(){return this._align},set:function(n){this._align!==n&&(this._align=n,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(n){this._breakWords!==n&&(this._breakWords=n,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(n){this._dropShadow!==n&&(this._dropShadow=n,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(n){this._dropShadowAlpha!==n&&(this._dropShadowAlpha=n,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(n){this._dropShadowAngle!==n&&(this._dropShadowAngle=n,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(n){this._dropShadowBlur!==n&&(this._dropShadowBlur=n,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(n){var t=u(n);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(n){this._dropShadowDistance!==n&&(this._dropShadowDistance=n,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(n){var t=u(n);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(n){this._fillGradientType!==n&&(this._fillGradientType=n,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(n){a(this._fillGradientStops,n)||(this._fillGradientStops=n,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(n){this.fontFamily!==n&&(this._fontFamily=n,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(n){this._fontSize!==n&&(this._fontSize=n,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(n){this._fontStyle!==n&&(this._fontStyle=n,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(n){this._fontVariant!==n&&(this._fontVariant=n,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(n){this._fontWeight!==n&&(this._fontWeight=n,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(n){this._letterSpacing!==n&&(this._letterSpacing=n,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(n){this._lineHeight!==n&&(this._lineHeight=n,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(n){this._leading!==n&&(this._leading=n,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(n){this._lineJoin!==n&&(this._lineJoin=n,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(n){this._miterLimit!==n&&(this._miterLimit=n,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(n){this._padding!==n&&(this._padding=n,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(n){var t=u(n);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(n){this._strokeThickness!==n&&(this._strokeThickness=n,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(n){this._textBaseline!==n&&(this._textBaseline=n,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(n){this._trim!==n&&(this._trim=n,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(n){this._wordWrap!==n&&(this._wordWrap=n,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(n){this._wordWrapWidth!==n&&(this._wordWrapWidth=n,this.styleID++)}}]),n}();i.default=e},{"../const":46,"../utils":125}],111:[function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function c(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function l(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var f;i.__esModule=!0;var e=n("./BaseTexture"),o=u(e),s=n("../settings"),r=u(s);f=function(n){function t(){var f=arguments.length>0&&arguments[0]!==undefined?arguments[0]:100,e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100,u=arguments[2],o=arguments[3],i;return h(this,t),i=c(this,n.call(this,null,u)),i.resolution=o||r.default.RESOLUTION,i.width=Math.ceil(f),i.height=Math.ceil(e),i.realWidth=i.width*i.resolution,i.realHeight=i.height*i.resolution,i.scaleMode=u!==undefined?u:r.default.SCALE_MODE,i.hasLoaded=!0,i._glRenderTargets={},i._canvasRenderTarget=null,i.valid=!1,i}return l(t,n),t.prototype.resize=function(n,t){(n=Math.ceil(n),t=Math.ceil(t),n!==this.width||t!==this.height)&&(this.valid=n>0&&t>0,this.width=n,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid)&&this.emit("update",this)},t.prototype.destroy=function(){n.prototype.destroy.call(this,!0);this.renderer=null},t}(o.default);i.default=f},{"../settings":101,"./BaseTexture":112}],112:[function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}function y(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function p(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function w(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var o;i.__esModule=!0;var r=n("../utils"),s=n("../settings"),u=f(s),h=n("eventemitter3"),c=f(h),l=n("../utils/determineCrossOrigin"),a=f(l),v=n("bit-twiddle"),e=f(v);o=function(n){function t(i,f,e){y(this,t);var o=p(this,n.call(this));return o.uid=r.uid(),o.touched=0,o.resolution=e||u.default.RESOLUTION,o.width=100,o.height=100,o.realWidth=100,o.realHeight=100,o.scaleMode=f!==undefined?f:u.default.SCALE_MODE,o.hasLoaded=!1,o.isLoading=!1,o.source=null,o.origSource=null,o.imageType=null,o.sourceScale=1,o.premultipliedAlpha=!0,o.imageUrl=null,o.isPowerOfTwo=!1,o.mipmap=u.default.MIPMAP_TEXTURES,o.wrapMode=u.default.WRAP_MODE,o._glTextures={},o._enabled=0,o._virtalBoundId=-1,o._destroyed=!1,o.textureCacheIds=[],i&&o.loadSource(i),o}return w(t,n),t.prototype.update=function(){this.imageType!=="svg"&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions());this.emit("update",this)},t.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;this.isPowerOfTwo=e.default.isPow2(this.realWidth)&&e.default.isPow2(this.realHeight)},t.prototype.loadSource=function(n){var i=this.isLoading,r,t;if(this.hasLoaded=!1,this.isLoading=!1,i&&this.source&&(this.source.onload=null,this.source.onerror=null),r=!this.source,this.source=n,(n.src&&n.complete||n.getContext)&&n.width&&n.height)this._updateImageType(),this.imageType==="svg"?this._loadSvgSource():this._sourceLoaded(),r&&this.emit("loaded",this);else if(!n.getContext&&(this.isLoading=!0,t=this,n.onload=function(){if(t._updateImageType(),n.onload=null,n.onerror=null,t.isLoading){if(t.isLoading=!1,t._sourceLoaded(),t.imageType==="svg"){t._loadSvgSource();return}t.emit("loaded",t)}},n.onerror=function(){(n.onload=null,n.onerror=null,t.isLoading)&&(t.isLoading=!1,t.emit("error",t))},n.complete&&n.src)){if(n.onload=null,n.onerror=null,t.imageType==="svg"){t._loadSvgSource();return}this.isLoading=!1;n.width&&n.height?(this._sourceLoaded(),i&&this.emit("loaded",this)):i&&this.emit("error",this)}},t.prototype._updateImageType=function(){var t,n,i;if(this.imageUrl){if(t=r.decomposeDataUri(this.imageUrl),n=void 0,t&&t.mediaType==="image"){if(i=t.subType.split("+")[0],n=r.getUrlFileExtension("."+i),!n)throw new Error("Invalid image type in data URI.");}else n=r.getUrlFileExtension(this.imageUrl),n||(n="png");this.imageType=n}},t.prototype._loadSvgSource=function(){if(this.imageType==="svg"){var n=r.decomposeDataUri(this.imageUrl);n?this._loadSvgSourceUsingDataUri(n):this._loadSvgSourceUsingXhr()}},t.prototype._loadSvgSourceUsingDataUri=function(n){var t=void 0;if(n.encoding==="base64"){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(n.data)}else t=n.data;this._loadSvgSourceUsingString(t)},t.prototype._loadSvgSourceUsingXhr=function(){var t=this,n=new XMLHttpRequest;n.onload=function(){if(n.readyState!==n.DONE||n.status!==200)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(n.response)};n.onerror=function(){return t.emit("error",t)};n.open("GET",this.imageUrl,!0);n.send()},t.prototype._loadSvgSourceUsingString=function(n){var e=r.getSvgSize(n),u=e.width,f=e.height,i;if(!u||!f)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(u*this.sourceScale);this.realHeight=Math.round(f*this.sourceScale);this._updateDimensions();i=document.createElement("canvas");i.width=this.realWidth;i.height=this.realHeight;i._pixiId="canvas_"+r.uid();i.getContext("2d").drawImage(this.source,0,0,u,f,0,0,this.realWidth,this.realHeight);this.origSource=this.source;this.source=i;t.addToCache(this,i._pixiId);this.isLoading=!1;this._sourceLoaded();this.emit("loaded",this)},t.prototype._sourceLoaded=function(){this.hasLoaded=!0;this.update()},t.prototype.destroy=function(){this.imageUrl&&(delete r.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src=""));this.source=null;this.dispose();t.removeFromCache(this);this.textureCacheIds=null;this._destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.updateSourceImage=function(n){this.source.src=n;this.loadSource(this.source)},t.fromImage=function(n,i,u,f){var e=r.BaseTextureCache[n],o;return e||(o=new Image,i===undefined&&n.indexOf("data:")!==0?o.crossOrigin=a.default(n):i&&(o.crossOrigin=typeof i=="string"?i:"anonymous"),e=new t(o,u),e.imageUrl=n,f&&(e.sourceScale=f),e.resolution=r.getResolutionOfUrl(n),o.src=n,t.addToCache(e,n)),e},t.fromCanvas=function(n,i){var f=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"canvas",u;return n._pixiId||(n._pixiId=f+"_"+r.uid()),u=r.BaseTextureCache[n._pixiId],u||(u=new t(n,i),t.addToCache(u,n._pixiId)),u},t.from=function(n,i,u){if(typeof n=="string")return t.fromImage(n,undefined,i,u);if(n instanceof HTMLImageElement){var e=n.src,f=r.BaseTextureCache[e];return f||(f=new t(n,i),f.imageUrl=e,u&&(f.sourceScale=u),f.resolution=r.getResolutionOfUrl(e),t.addToCache(f,e)),f}return n instanceof HTMLCanvasElement?t.fromCanvas(n,i):n},t.addToCache=function(n,t){t&&(n.textureCacheIds.indexOf(t)===-1&&n.textureCacheIds.push(t),r.BaseTextureCache[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),r.BaseTextureCache[t]=n)},t.removeFromCache=function(n){var t,u,i;if(typeof n=="string"){if(t=r.BaseTextureCache[n],t)return u=t.textureCacheIds.indexOf(n),u>-1&&t.textureCacheIds.splice(u,1),delete r.BaseTextureCache[n],t}else if(n&&n.textureCacheIds){for(i=0;i<n.textureCacheIds.length;++i)delete r.BaseTextureCache[n.textureCacheIds[i]];return n.textureCacheIds.length=0,n}return null},t}(c.default);i.default=o},{"../settings":101,"../utils":125,"../utils/determineCrossOrigin":124,"bit-twiddle":1,eventemitter3:3}],113:[function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function c(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function l(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var f;i.__esModule=!0;var e=n("./BaseRenderTexture"),r=u(e),o=n("./Texture"),s=u(o);f=function(n){function t(i,u){var e,f;if(h(this,t),e=null,!(i instanceof r.default)){var o=arguments[1],s=arguments[2],l=arguments[3],a=arguments[4];console.warn("Please use RenderTexture.create("+o+", "+s+") instead of the ctor directly.");e=arguments[0];u=null;i=new r.default(o,s,l,a)}return f=c(this,n.call(this,i,u)),f.legacyRenderer=e,f.valid=!0,f._updateUvs(),f}return l(t,n),t.prototype.resize=function(n,t,i){n=Math.ceil(n);t=Math.ceil(t);this.valid=n>0&&t>0;this._frame.width=this.orig.width=n;this._frame.height=this.orig.height=t;i||this.baseTexture.resize(n,t);this._updateUvs()},t.create=function(n,i,u,f){return new t(new r.default(n,i,u,f))},t}(s.default);i.default=f},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(n,t,i){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u;i.__esModule=!0;var f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=n("../"),e=n("../utils");u=function(){function n(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;o(this,n);this.baseTexture=t;this.textures={};this.data=i;this.resolution=this._updateResolution(r||this.baseTexture.imageUrl);this._frames=this.data.frames;this._frameKeys=Object.keys(this._frames);this._batchIndex=0;this._callback=null}return f(n,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),n.prototype._updateResolution=function(n){var i=this.data.meta.scale,t=e.getResolutionOfUrl(n,null);return t===null&&(t=i!==undefined?parseFloat(i):1),t!==1&&(this.baseTexture.resolution=t,this.baseTexture.update()),t},n.prototype.parse=function(t){this._batchIndex=0;this._callback=t;this._frameKeys.length<=n.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},n.prototype._processFrames=function(t){for(var e=t,l=n.BATCH_SIZE,i=this.baseTexture.sourceScale;e-t<l&&e<this._frameKeys.length;){var o=this._frameKeys[e],u=this._frames[o],f=u.frame;if(f){var s=null,h=null,c=u.trimmed!==!1&&u.sourceSize?u.sourceSize:u.frame,a=new r.Rectangle(0,0,Math.floor(c.w*i)/this.resolution,Math.floor(c.h*i)/this.resolution);s=u.rotated?new r.Rectangle(Math.floor(f.x*i)/this.resolution,Math.floor(f.y*i)/this.resolution,Math.floor(f.h*i)/this.resolution,Math.floor(f.w*i)/this.resolution):new r.Rectangle(Math.floor(f.x*i)/this.resolution,Math.floor(f.y*i)/this.resolution,Math.floor(f.w*i)/this.resolution,Math.floor(f.h*i)/this.resolution);u.trimmed!==!1&&u.spriteSourceSize&&(h=new r.Rectangle(Math.floor(u.spriteSourceSize.x*i)/this.resolution,Math.floor(u.spriteSourceSize.y*i)/this.resolution,Math.floor(f.w*i)/this.resolution,Math.floor(f.h*i)/this.resolution));this.textures[o]=new r.Texture(this.baseTexture,s,a,h,u.rotated?2:0);r.Texture.addToCache(this.textures[o],o)}e++}},n.prototype._parseComplete=function(){var n=this._callback;this._callback=null;this._batchIndex=0;n.call(this,this.textures)},n.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*n.BATCH_SIZE);this._batchIndex++;setTimeout(function(){t._batchIndex*n.BATCH_SIZE<t._frameKeys.length?t._nextBatch():t._parseComplete()},0)},n.prototype.destroy=function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;for(var t in this.textures)this.textures[t].destroy();this._frames=null;this._frameKeys=null;this.data=null;this.textures=null;n&&this.baseTexture.destroy();this.baseTexture=null},n}();i.default=u},{"../":65,"../utils":125}],115:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function d(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function g(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function nt(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function tt(){var n=document.createElement("canvas"),t;return n.width=10,n.height=10,t=n.getContext("2d"),t.fillStyle="white",t.fillRect(0,0,10,10),new u(new f.default(n))}function o(n){n.destroy=function(){};n.on=function(){};n.once=function(){};n.emit=function(){}}var u;i.__esModule=!0;var c=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),l=n("./BaseTexture"),f=e(l),a=n("./VideoBaseTexture"),h=e(a),v=n("./TextureUvs"),y=e(v),p=n("eventemitter3"),w=e(p),s=n("../math"),r=n("../utils"),b=n("../settings"),k=e(b);u=function(n){function t(i,r,u,f,e){d(this,t);var o=g(this,n.call(this));if(o.noFrame=!1,r||(o.noFrame=!0,r=new s.Rectangle(0,0,1,1)),i instanceof t&&(i=i.baseTexture),o.baseTexture=i,o._frame=r,o.trim=f,o.valid=!1,o.requiresUpdate=!1,o._uvs=null,o.orig=u||r,o._rotate=Number(e||0),e===!0)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");if(i.hasLoaded){if(o.noFrame){r=new s.Rectangle(0,0,i.width,i.height);i.on("update",o.onBaseTextureUpdated,o)}o.frame=r}else i.once("loaded",o.onBaseTextureLoaded,o);return o._updateID=0,o.transform=null,o.textureCacheIds=[],o}return nt(t,n),t.prototype.update=function(){this.baseTexture.update()},t.prototype.onBaseTextureLoaded=function(n){this._updateID++;this.frame=this.noFrame?new s.Rectangle(0,0,n.width,n.height):this._frame;this.baseTexture.on("update",this.onBaseTextureUpdated,this);this.emit("update",this)},t.prototype.onBaseTextureUpdated=function(n){this._updateID++;this._frame.width=n.width;this._frame.height=n.height;this.emit("update",this)},t.prototype.destroy=function(n){this.baseTexture&&(n&&(r.TextureCache[this.baseTexture.imageUrl]&&t.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null);this._frame=null;this._uvs=null;this.trim=null;this.orig=null;this.valid=!1;t.removeFromCache(this);this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},t.prototype._updateUvs=function(){this._uvs||(this._uvs=new y.default);this._uvs.set(this._frame,this.baseTexture,this.rotate);this._updateID++},t.fromImage=function(n,i,u,e){var o=r.TextureCache[n];return o||(o=new t(f.default.fromImage(n,i,u,e)),t.addToCache(o,n)),o},t.fromFrame=function(n){var t=r.TextureCache[n];if(!t)throw new Error('The frameId "'+n+'" does not exist in the texture cache');return t},t.fromCanvas=function(n,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"canvas";return new t(f.default.fromCanvas(n,i,r))},t.fromVideo=function(n,i){return typeof n=="string"?t.fromVideoUrl(n,i):new t(h.default.fromVideo(n,i))},t.fromVideoUrl=function(n,i){return new t(h.default.fromUrl(n,i))},t.from=function(n){var i,u;return typeof n=="string"?(i=r.TextureCache[n],!i)?(u=n.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)!==null,u)?t.fromVideoUrl(n):t.fromImage(n):i:n instanceof HTMLImageElement?new t(f.default.from(n)):n instanceof HTMLCanvasElement?t.fromCanvas(n,k.default.SCALE_MODE,"HTMLCanvasElement"):n instanceof HTMLVideoElement?t.fromVideo(n):n instanceof f.default?new t(n):n},t.fromLoader=function(n,i,u){var o=new f.default(n,undefined,r.getResolutionOfUrl(i)),e=new t(o);return o.imageUrl=i,u||(u=i),f.default.addToCache(e.baseTexture,u),t.addToCache(e,u),u!==i&&(f.default.addToCache(e.baseTexture,i),t.addToCache(e,i)),e},t.addToCache=function(n,t){t&&(n.textureCacheIds.indexOf(t)===-1&&n.textureCacheIds.push(t),r.TextureCache[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),r.TextureCache[t]=n)},t.removeFromCache=function(n){var t,u,i;if(typeof n=="string"){if(t=r.TextureCache[n],t)return u=t.textureCacheIds.indexOf(n),u>-1&&t.textureCacheIds.splice(u,1),delete r.TextureCache[n],t}else if(n&&n.textureCacheIds){for(i=0;i<n.textureCacheIds.length;++i)r.TextureCache[n.textureCacheIds[i]]===n&&delete r.TextureCache[n.textureCacheIds[i]];return n.textureCacheIds.length=0,n}return null},c(t,[{key:"frame",get:function(){return this._frame},set:function(n){this._frame=n;this.noFrame=!1;var r=n.x,u=n.y,t=n.width,i=n.height,f=r+t>this.baseTexture.width,e=u+i>this.baseTexture.height;if(f||e){var o=f&&e?"and":"or",s="X: "+r+" + "+t+" = "+(r+t)+" > "+this.baseTexture.width,h="Y: "+u+" + "+i+" = "+(u+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(s+" "+o+" "+h));}this.valid=t&&i&&this.baseTexture.hasLoaded;this.trim||this.rotate||(this.orig=n);this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(n){this._rotate=n;this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),t}(w.default);i.default=u;u.EMPTY=new u(new f.default);o(u.EMPTY);o(u.EMPTY.baseTexture);u.WHITE=tt();o(u.WHITE);o(u.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":125,"./BaseTexture":112,"./TextureUvs":117,"./VideoBaseTexture":118,eventemitter3:3}],116:[function(n,t,i){"use strict";function s(n){return n&&n.__esModule?n:{"default":n}}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r,f;i.__esModule=!0;var e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=n("../math/Matrix"),u=s(o);r=new u.default;f=function(){function n(t,i){h(this,n);this._texture=t;this.mapCoord=new u.default;this.uClampFrame=new Float32Array(4);this.uClampOffset=new Float32Array(2);this._lastTextureID=-1;this.clampOffset=0;this.clampMargin=typeof i=="undefined"?.5:i}return n.prototype.multiplyUvs=function(n,t){var i,r,u,f;for(t===undefined&&(t=n),i=this.mapCoord,r=0;r<n.length;r+=2)u=n[r],f=n[r+1],t[r]=u*i.a+f*i.c+i.tx,t[r+1]=u*i.b+f*i.d+i.ty;return t},n.prototype.update=function(n){var t=this._texture,i,h,u;if(!t||!t.valid||!n&&this._lastTextureID===t._updateID)return!1;this._lastTextureID=t._updateID;i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);h=t.orig;u=t.trim;u&&(r.set(h.width/u.width,0,0,h.height/u.height,-u.x/u.width,-u.y/u.height),this.mapCoord.append(r));var f=t.baseTexture,o=this.uClampFrame,s=this.clampMargin/f.resolution,e=this.clampOffset;return o[0]=(t._frame.x+s+e)/f.width,o[1]=(t._frame.y+s+e)/f.height,o[2]=(t._frame.x+t._frame.width-s+e)/f.width,o[3]=(t._frame.y+t._frame.height-s+e)/f.height,this.uClampOffset[0]=e/f.realWidth,this.uClampOffset[1]=e/f.realHeight,!0},e(n,[{key:"texture",get:function(){return this._texture},set:function(n){this._texture=n;this._lastTextureID=-1}}]),n}();i.default=f},{"../math/Matrix":67}],117:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u,r,f;i.__esModule=!0;u=n("../math/GroupD8");r=e(u);f=function(){function n(){o(this,n);this.x0=0;this.y0=0;this.x1=1;this.y1=0;this.x2=1;this.y2=1;this.x3=0;this.y3=1;this.uvsUint32=new Uint32Array(4)}return n.prototype.set=function(n,t,i){var u=t.width,f=t.height;if(i){var e=n.width/2/u,o=n.height/2/f,s=n.x/u+e,h=n.y/f+o;i=r.default.add(i,r.default.NW);this.x0=s+e*r.default.uX(i);this.y0=h+o*r.default.uY(i);i=r.default.add(i,2);this.x1=s+e*r.default.uX(i);this.y1=h+o*r.default.uY(i);i=r.default.add(i,2);this.x2=s+e*r.default.uX(i);this.y2=h+o*r.default.uY(i);i=r.default.add(i,2);this.x3=s+e*r.default.uX(i);this.y3=h+o*r.default.uY(i)}else this.x0=n.x/u,this.y0=n.y/f,this.x1=(n.x+n.width)/u,this.y1=n.y/f,this.x2=(n.x+n.width)/u,this.y2=(n.y+n.height)/f,this.x3=n.x/u,this.y3=(n.y+n.height)/f;this.uvsUint32[0]=(this.y0*65535&65535)<<16|this.x0*65535&65535;this.uvsUint32[1]=(this.y1*65535&65535)<<16|this.x1*65535&65535;this.uvsUint32[2]=(this.y2*65535&65535)<<16|this.x2*65535&65535;this.uvsUint32[3]=(this.y3*65535&65535)<<16|this.x3*65535&65535},n}();i.default=f},{"../math/GroupD8":66}],118:[function(n,t,i){"use strict";function s(n){return n&&n.__esModule?n:{"default":n}}function y(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function p(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function w(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function h(n,t){t||(t="video/"+n.substr(n.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=n,i.type=t,i}var u;i.__esModule=!0;var c=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),l=n("./BaseTexture"),f=s(l),e=n("../utils"),r=n("../ticker"),o=n("../const"),a=n("../utils/determineCrossOrigin"),v=s(a);u=function(n){function t(i,r){if(y(this,t),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var u=p(this,n.call(this,i,r));return u.width=i.videoWidth,u.height=i.videoHeight,u._autoUpdate=!0,u._isAutoUpdating=!1,u.autoPlay=!0,u.update=u.update.bind(u),u._onCanPlay=u._onCanPlay.bind(u),i.addEventListener("play",u._onPlayStart.bind(u)),i.addEventListener("pause",u._onPlayStop.bind(u)),u.hasLoaded=!1,u.__loaded=!1,u._isSourceReady()?u._onCanPlay():(i.addEventListener("canplay",u._onCanPlay),i.addEventListener("canplaythrough",u._onCanPlay)),u}return w(t,n),t.prototype._isSourcePlaying=function(){var n=this.source;return n.currentTime>0&&n.paused===!1&&n.ended===!1&&n.readyState>2},t.prototype._isSourceReady=function(){return this.source.readyState===3||this.source.readyState===4},t.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay();!this._isAutoUpdating&&this.autoUpdate&&(r.shared.add(this.update,this,o.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},t.prototype._onPlayStop=function(){this._isAutoUpdating&&(r.shared.remove(this.update,this),this._isAutoUpdating=!1)},t.prototype._onCanPlay=function(){this.hasLoaded=!0;this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},t.prototype.destroy=function(){this._isAutoUpdating&&r.shared.remove(this.update,this);this.source&&this.source._pixiId&&(f.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load());n.prototype.destroy.call(this)},t.fromVideo=function(n,i){n._pixiId||(n._pixiId="video_"+e.uid());var r=e.BaseTextureCache[n._pixiId];return r||(r=new t(n,i),f.default.addToCache(r,n._pixiId)),r},t.fromUrl=function(n,i,r){var u=document.createElement("video"),e,f;if(u.setAttribute("webkit-playsinline",""),u.setAttribute("playsinline",""),e=Array.isArray(n)?n[0].src||n[0]:n.src||n,r===undefined&&e.indexOf("data:")!==0?u.crossOrigin=v.default(e):r&&(u.crossOrigin=typeof r=="string"?r:"anonymous"),Array.isArray(n))for(f=0;f<n.length;++f)u.appendChild(h(n[f].src||n[f],n[f].mime));else u.appendChild(h(e,n.mime));return u.load(),t.fromVideo(u,i)},c(t,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(n){n!==this._autoUpdate&&(this._autoUpdate=n,!this._autoUpdate&&this._isAutoUpdating?(r.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(r.shared.add(this.update,this,o.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),t}(f.default);i.default=u;u.fromUrls=u.fromUrl},{"../const":46,"../ticker":121,"../utils":125,"../utils/determineCrossOrigin":124,"./BaseTexture":112}],119:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function l(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var o;i.__esModule=!0;var s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),h=n("../settings"),r=e(h),f=n("../const"),c=n("./TickerListener"),u=e(c);o=function(){function n(){var t=this;l(this,n);this._head=new u.default(null,null,Infinity);this._requestId=null;this._maxElapsedMS=100;this.autoStart=!1;this.deltaTime=1;this.elapsedMS=1/r.default.TARGET_FPMS;this.lastTime=-1;this.speed=1;this.started=!1;this._tick=function(n){t._requestId=null;t.started&&(t.update(n),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return n.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(n,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:f.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(n,t,i))},n.prototype.addOnce=function(n,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:f.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(n,t,i,!0))},n.prototype._addListener=function(n){var t=this._head.next,i=this._head;if(t){while(t){if(n.priority>t.priority){n.connect(i);break}i=t;t=t.next}n.previous||n.connect(i)}else n.connect(i);return this._startIfPossible(),this},n.prototype.remove=function(n,t){for(var i=this._head.next;i;)i=i.match(n,t)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.destroy=function(){this.stop();for(var n=this._head.next;n;)n=n.destroy(!0);this._head.destroy();this._head=null},n.prototype.update=function(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:performance.now(),n=void 0,u,t;if(i>this.lastTime){for(n=this.elapsedMS=i-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),this.deltaTime=n*r.default.TARGET_FPMS*this.speed,u=this._head,t=u.next;t;)t=t.emit(this.deltaTime);u.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=i},s(n,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(n){var t=Math.min(Math.max(0,n)/1e3,r.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),n}();i.default=o},{"../const":46,"../settings":101,"./TickerListener":120}],120:[function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}i.__esModule=!0;var u=function(){function n(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,u=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,f=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;r(this,n);this.fn=t;this.context=i;this.priority=u;this.once=f;this.next=null;this.previous=null;this._destroyed=!1}return n.prototype.match=function(n,t){return t=t||null,this.fn===n&&this.context===t},n.prototype.emit=function(n){this.fn&&(this.context?this.fn.call(this.context,n):this.fn(n));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},n.prototype.connect=function(n){this.previous=n;n.next&&(n.next.previous=this);this.next=n.next;n.next=this},n.prototype.destroy=function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1,n;return this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous),n=this.previous,this.next=t?null:n,this.previous=null,n},n}();i.default=u},{}],121:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}var f,u,r;i.__esModule=!0;i.Ticker=i.shared=undefined;f=n("./Ticker");u=e(f);r=new u.default;r.autoStart=!0;r.destroy=function(){};i.shared=r;i.Ticker=u.default},{"./Ticker":119}],122:[function(n,t,i){"use strict";function r(){var n=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!n}i.__esModule=!0;i.default=r},{}],123:[function(n,t,i){"use strict";function r(n){for(var u=n*6,i=new Uint16Array(u),t=0,r=0;t<u;t+=6,r+=4)i[t+0]=r+0,i[t+1]=r+1,i[t+2]=r+2,i[t+3]=r+0,i[t+4]=r+2,i[t+5]=r+3;return i}i.__esModule=!0;i.default=r},{}],124:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:window.location,i;return n.indexOf("data:")===0?"":(t=t||window.location,r||(r=document.createElement("a")),r.href=n,n=f.default.parse(r.href),i=!n.port&&t.port===""||n.port===t.port,n.hostname!==t.hostname||!i||n.protocol!==t.protocol)?"anonymous":""}var u,f,r;i.__esModule=!0;i.default=o;u=n("url");f=e(u);r=void 0},{url:29}],125:[function(n,t,i){"use strict";function s(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function u(n){return n&&n.__esModule?n:{"default":n}}function ut(){return++h}function ft(n,t){return t=t||[],t[0]=(n>>16&255)/255,t[1]=(n>>8&255)/255,t[2]=(n&255)/255,t}function et(n){return n=n.toString(16),n="000000".substr(0,6-n.length)+n,"#"+n}function ot(n){return(n[0]*255<<16)+(n[1]*255<<8)+(n[2]*255|0)}function st(n,t){var i=a.default.RETINA_PREFIX.exec(n);return i?parseFloat(i[1]):t!==undefined?t:1}function ht(n){var t=r.DATA_URI.exec(n);return t?{mediaType:t[1]?t[1].toLowerCase():undefined,subType:t[2]?t[2].toLowerCase():undefined,encoding:t[3]?t[3].toLowerCase():undefined,data:t[4]}:undefined}function ct(n){var t=r.URL_FILE_EXTENSION.exec(n);return t?t[1].toLowerCase():undefined}function lt(n){var t=r.SVG_SIZE.exec(n),i={};return t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7]))),i}function at(){o=!0}function vt(n){if(!o){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["\n %c %c %c PixiJS "+r.VERSION+" -  "+n+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("PixiJS "+r.VERSION+" - "+n+" - http://www.pixijs.com/");o=!0}}function yt(){var i={stencil:!0,failIfMajorPerformanceCaveat:!0},t;try{if(!window.WebGLRenderingContext)return!1;var r=document.createElement("canvas"),n=r.getContext("webgl",i)||r.getContext("experimental-webgl",i),u=!!(n&&n.getContextAttributes().stencil);return n&&(t=n.getExtension("WEBGL_lose_context"),t&&t.loseContext()),n=null,u}catch(f){return!1}}function pt(n){return n===0?0:n<0?-1:1}function wt(){for(var n in f)f[n].destroy();for(n in e)e[n].destroy()}function bt(){for(var n in f)delete f[n];for(n in e)delete e[n]}function kt(n,t){return c[t?1:0][n]}function dt(n,t){if(t===1)return(t*255<<24)+n;if(t===0)return 0;var i=n>>16&255,r=n>>8&255,u=n&255;return i=i*t+.5|0,r=r*t+.5|0,u=u*t+.5|0,(t*255<<24)+(i<<16)+(r<<8)+u}function gt(n,t,i,r){return i=i||new Float32Array(4),r||r===undefined?(i[0]=n[0]*t,i[1]=n[1]*t,i[2]=n[2]*t):(i[0]=n[0],i[1]=n[1],i[2]=n[2]),i[3]=t,i}function ni(n,t,i,r){return i=i||new Float32Array(4),i[0]=(n>>16&255)/255,i[1]=(n>>8&255)/255,i[2]=(n&255)/255,(r||r===undefined)&&(i[0]*=t,i[1]*=t,i[2]*=t),i[3]=t,i}var h,o,f,e,c;i.__esModule=!0;i.premultiplyBlendMode=i.BaseTextureCache=i.TextureCache=i.mixins=i.pluginTarget=i.EventEmitter=i.removeItems=i.isMobile=undefined;i.uid=ut;i.hex2rgb=ft;i.hex2string=et;i.rgb2hex=ot;i.getResolutionOfUrl=st;i.decomposeDataUri=ht;i.getUrlFileExtension=ct;i.getSvgSize=lt;i.skipHello=at;i.sayHello=vt;i.isWebGLSupported=yt;i.sign=pt;i.destroyTextureCache=wt;i.clearTextureCache=bt;i.correctBlendMode=kt;i.premultiplyTint=dt;i.premultiplyRgba=gt;i.premultiplyTintToRgba=ni;var r=n("../const"),l=n("../settings"),a=u(l),v=n("eventemitter3"),y=u(v),p=n("./pluginTarget"),w=u(p),b=n("./mixin"),k=s(b),d=n("ismobilejs"),g=s(d),nt=n("remove-array-items"),tt=u(nt),it=n("./mapPremultipliedBlendModes"),rt=u(it);h=0;o=!1;i.isMobile=g;i.removeItems=tt.default;i.EventEmitter=y.default;i.pluginTarget=w.default;i.mixins=k;f=i.TextureCache=Object.create(null);e=i.BaseTextureCache=Object.create(null);c=i.premultiplyBlendMode=rt.default()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":126,"./mixin":128,"./pluginTarget":129,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],126:[function(n,t,i){"use strict";function u(){for(var u,t=[],i=[],n=0;n<32;n++)t[n]=n,i[n]=n;return t[r.BLEND_MODES.NORMAL_NPM]=r.BLEND_MODES.NORMAL,t[r.BLEND_MODES.ADD_NPM]=r.BLEND_MODES.ADD,t[r.BLEND_MODES.SCREEN_NPM]=r.BLEND_MODES.SCREEN,i[r.BLEND_MODES.NORMAL]=r.BLEND_MODES.NORMAL_NPM,i[r.BLEND_MODES.ADD]=r.BLEND_MODES.ADD_NPM,i[r.BLEND_MODES.SCREEN]=r.BLEND_MODES.SCREEN_NPM,u=[],u.push(i),u.push(t),u}i.__esModule=!0;i.default=u;var r=n("../const")},{"../const":46}],127:[function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}function e(n){return r.default.tablet||r.default.phone?4:n}i.__esModule=!0;i.default=e;var u=n("ismobilejs"),r=f(u)},{ismobilejs:4}],128:[function(n,t,i){"use strict";function u(n,t){var r,i,u;if(n&&t)for(r=Object.keys(t),i=0;i<r.length;++i)u=r[i],Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(t,u))}function f(n,t){r.push(n,t)}function e(){for(var n=0;n<r.length;n+=2)u(r[n],r[n+1]);r.length=0}i.__esModule=!0;i.mixin=u;i.delayMixin=f;i.performMixins=e;var r=[]},{}],129:[function(n,t,i){"use strict";function r(n){n.__plugins={};n.registerPlugin=function(t,i){n.__plugins[t]=i};n.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var t in n.__plugins)this.plugins[t]=new n.__plugins[t](this)};n.prototype.destroyPlugins=function(){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;this.plugins=null}}i.__esModule=!0;i.default={mixin:function(n){r(n)}}},{}],130:[function(n,t,i){"use strict";function r(n){for(var r=n.width,e=n.height,o=n.getContext("2d"),c=o.getImageData(0,0,r,e),s=c.data,l=s.length,t={top:null,left:null,right:null,bottom:null},u=void 0,i=void 0,f=void 0,h,u=0;u<l;u+=4)s[u+3]!==0&&(i=u/4%r,f=~~(u/4/r),t.top===null&&(t.top=f),t.left===null?t.left=i:i<t.left&&(t.left=i),t.right===null?t.right=i+1:t.right<i&&(t.right=i+1),t.bottom===null?t.bottom=f:t.bottom<f&&(t.bottom=f));return r=t.right-t.left,e=t.bottom-t.top+1,h=o.getImageData(t.left,t.top,r,e),{height:e,width:r,data:h}}i.__esModule=!0;i.default=r},{}],131:[function(n,t,i){"use strict";function r(n){var t=(new Error).stack;typeof t=="undefined"?console.warn("Deprecation Warning: ",n):(t=t.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",n),console.warn(t),console.groupEnd()):(console.warn("Deprecation Warning: ",n),console.warn(t)))}function u(n){var c=n.mesh,y=n.particles,t=n.extras,l=n.filters,u=n.prepare,o=n.loaders,f=n.interaction,s,a,e,h,i,v;for(Object.defineProperties(n,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.");}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.");}},Stage:{get:function(){return r("You do not need to use a PIXI Stage any more, you can simply render any container."),n.Container}},DisplayObjectContainer:{get:function(){return r("DisplayObjectContainer has been shortened to Container, please use Container from now on."),n.Container}},Strip:{get:function(){return r("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),c.Mesh}},Rope:{get:function(){return r("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),c.Rope}},ParticleContainer:{get:function(){return r("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),y.ParticleContainer}},MovieClip:{get:function(){return r("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),t.AnimatedSprite}},TilingSprite:{get:function(){return r("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),t.TilingSprite}},BitmapText:{get:function(){return r("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),t.BitmapText}},blendModes:{get:function(){return r("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),n.BLEND_MODES}},scaleModes:{get:function(){return r("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),n.SCALE_MODES}},BaseTextureCache:{get:function(){return r("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),n.utils.BaseTextureCache}},TextureCache:{get:function(){return r("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),n.utils.TextureCache}},math:{get:function(){return r("The math namespace is deprecated, please access members already accessible on PIXI."),n}},AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),n.Filter}},TransformManual:{get:function(){return r("TransformManual has been renamed to TransformBase, please update your pixi-spine"),n.TransformBase}},TARGET_FPMS:{get:function(){return r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),n.settings.TARGET_FPMS},set:function(t){r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS");n.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),n.settings.FILTER_RESOLUTION},set:function(t){r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION");n.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),n.settings.RESOLUTION},set:function(t){r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION");n.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),n.settings.MIPMAP_TEXTURES},set:function(t){r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES");n.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),n.settings.SPRITE_BATCH_SIZE},set:function(t){r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE");n.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),n.settings.SPRITE_MAX_TEXTURES},set:function(t){r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES");n.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),n.settings.RETINA_PREFIX},set:function(t){r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX");n.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return r("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),n.settings.RENDER_OPTIONS}}}),s=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],a=function(t){var i=s[t];Object.defineProperty(n[i.parent],"DEFAULT",{get:function(){return r("PIXI."+i.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+i.target)),n.settings[i.target]},set:function(t){r("PIXI."+i.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+i.target));n.settings[i.target]=t}})},e=0;e<s.length;e++)a(e);Object.defineProperties(n.settings,{PRECISION:{get:function(){return r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),n.settings.PRECISION_FRAGMENT},set:function(t){r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT");n.settings.PRECISION_FRAGMENT=t}}});t.AnimatedSprite&&Object.defineProperties(t,{MovieClip:{get:function(){return r("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),t.AnimatedSprite}}});t&&Object.defineProperties(t,{TextureTransform:{get:function(){return r("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),n.TextureMatrix}}});n.DisplayObject.prototype.generateTexture=function(n,t,i){return r("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),n.generateTexture(this,t,i)};n.Graphics.prototype.generateTexture=function(n,t){return r("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(n,t)};n.GroupD8.isSwapWidthHeight=function(t){return r("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),n.GroupD8.isVertical(t)};n.RenderTexture.prototype.render=function(n,t,i,u){this.legacyRenderer.render(n,this,i,t,!u);r("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")};n.RenderTexture.prototype.getImage=function(n){return r("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(n)};n.RenderTexture.prototype.getBase64=function(n){return r("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(n)};n.RenderTexture.prototype.getCanvas=function(n){return r("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(n)};n.RenderTexture.prototype.getPixels=function(n){return r("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(n)};n.Sprite.prototype.setTexture=function(n){this.texture=n;r("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")};t.BitmapText&&(t.BitmapText.prototype.setText=function(n){this.text=n;r("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")});n.Text.prototype.setText=function(n){this.text=n;r("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")};n.Text.calculateFontProperties=function(t){return r("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),n.TextMetrics.measureFont(t)};Object.defineProperties(n.Text,{fontPropertiesCache:{get:function(){return r("Text.fontPropertiesCache is deprecated"),n.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return r("Text.fontPropertiesCanvas is deprecated"),n.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return r("Text.fontPropertiesContext is deprecated"),n.TextMetrics._context}}});n.Text.prototype.setStyle=function(n){this.style=n;r("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")};n.Text.prototype.determineFontProperties=function(t){return r("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),n.TextMetrics.measureFont(t)};n.Text.getFontStyle=function(t){return r("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),t=t||{},t instanceof n.TextStyle||(t=new n.TextStyle(t)),t.toFontString()};Object.defineProperties(n.TextStyle.prototype,{font:{get:function(){r("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var n=typeof this._fontSize=="number"?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+n+" "+this._fontFamily},set:function(n){var t,i,u,f,e;for(r("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),this._fontStyle=n.indexOf("italic")>1?"italic":n.indexOf("oblique")>-1?"oblique":"normal",this._fontVariant=n.indexOf("small-caps")>-1?"small-caps":"normal",t=n.split(" "),i=-1,this._fontSize=26,u=0;u<t.length;++u)if(t[u].match(/(px|pt|em|%)/)){i=u;this._fontSize=t[u];break}for(this._fontWeight="normal",f=0;f<i;++f)if(t[f].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[f];break}if(i>-1&&i<t.length-1){for(this._fontFamily="",e=i+1;e<t.length;++e)this._fontFamily+=t[e]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}});n.Texture.prototype.setFrame=function(n){this.frame=n;r("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")};n.Texture.addTextureToCache=function(t,i){n.Texture.addToCache(t,i);r("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")};n.Texture.removeTextureFromCache=function(t){return r("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),n.BaseTexture.removeFromCache(t),n.Texture.removeFromCache(t)};Object.defineProperties(l,{AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),n.AbstractFilter}},SpriteMaskFilter:{get:function(){return r("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),n.SpriteMaskFilter}},VoidFilter:{get:function(){return r("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),l.AlphaFilter}}});n.utils.uuid=function(){return r("utils.uuid() is deprecated, please use utils.uid() from now on."),n.utils.uid()};n.utils.canUseNewCanvasBlendModes=function(){return r("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),n.CanvasTinter.canUseMultiply};h=!0;Object.defineProperty(n.utils,"_saidHello",{set:function(n){n&&(r("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello());h=n},get:function(){return h}});u.BasePrepare&&(u.BasePrepare.prototype.register=function(n,t){return r("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),n&&this.registerFindHook(n),t&&this.registerUploadHook(t),this});u.canvas&&Object.defineProperty(u.canvas,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});u.webgl&&Object.defineProperty(u.webgl,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});o.Loader&&(i=o.Resource,v=o.Loader,Object.defineProperties(i.prototype,{isJson:{get:function(){return r("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===i.TYPE.JSON}},isXml:{get:function(){return r("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===i.TYPE.XML}},isImage:{get:function(){return r("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===i.TYPE.IMAGE}},isAudio:{get:function(){return r("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===i.TYPE.AUDIO}},isVideo:{get:function(){return r("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===i.TYPE.VIDEO}}}),Object.defineProperties(v.prototype,{before:{get:function(){return r("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return r("The after() method is deprecated, please use use()."),this.use}}}));f.interactiveTarget&&Object.defineProperty(f.interactiveTarget,"defaultCursor",{set:function(n){r("Property defaultCursor has been replaced with 'cursor'. ");this.cursor=n},get:function(){return r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}});f.InteractionManager&&(Object.defineProperty(f.InteractionManager,"defaultCursorStyle",{set:function(n){r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. ");this.cursorStyles.default=n},get:function(){return r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(f.InteractionManager,"currentCursorStyle",{set:function(n){r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.");this.currentCursorMode=n},get:function(){return r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}i.__esModule=!0;i.default=u},{}],132:[function(n,t,i){"use strict";function o(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var e,r,u,f;i.__esModule=!0;e=n("../../core");r=o(e);u=new r.Rectangle;f=function(){function n(t){s(this,n);this.renderer=t;t.extract=this}return n.prototype.image=function(n){var t=new Image;return t.src=this.base64(n),t},n.prototype.base64=function(n){return this.canvas(n).toDataURL()},n.prototype.canvas=function(n){var o=this.renderer,e=void 0,i=void 0,t=void 0,f=void 0;n&&(f=n instanceof r.RenderTexture?n:o.generateTexture(n));f?(e=f.baseTexture._canvasRenderTarget.context,i=f.baseTexture._canvasRenderTarget.resolution,t=f.frame):(e=o.rootContext,t=u,t.width=this.renderer.width,t.height=this.renderer.height);var s=t.width*i,h=t.height*i,c=new r.CanvasRenderTarget(s,h),l=e.getImageData(t.x*i,t.y*i,s,h);return c.context.putImageData(l,0,0),c.canvas},n.prototype.pixels=function(n){var f=this.renderer,e=void 0,o=void 0,t=void 0,i=void 0;return n&&(i=n instanceof r.RenderTexture?n:f.generateTexture(n)),i?(e=i.baseTexture._canvasRenderTarget.context,o=i.baseTexture._canvasRenderTarget.resolution,t=i.frame):(e=f.rootContext,t=u,t.width=f.width,t.height=f.height),e.getImageData(0,0,t.width*o,t.height*o).data},n.prototype.destroy=function(){this.renderer.extract=null;this.renderer=null},n}();i.default=f;r.CanvasRenderer.registerPlugin("extract",f)},{"../../core":65}],133:[function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}var r,u;i.__esModule=!0;r=n("./webgl/WebGLExtract");Object.defineProperty(i,"webgl",{enumerable:!0,get:function(){return f(r).default}});u=n("./canvas/CanvasExtract");Object.defineProperty(i,"canvas",{enumerable:!0,get:function(){return f(u).default}})},{"./canvas/CanvasExtract":132,"./webgl/WebGLExtract":134}],134:[function(n,t,i){"use strict";function s(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u,r;i.__esModule=!0;u=n("../../core");r=s(u);var f=new r.Rectangle,e=4,o=function(){function n(t){h(this,n);this.renderer=t;t.extract=this}return n.prototype.image=function(n){var t=new Image;return t.src=this.base64(n),t},n.prototype.base64=function(n){return this.canvas(n).toDataURL()},n.prototype.canvas=function(n){var p=this.renderer,t=void 0,u=void 0,i=void 0,a=!1,o=void 0,w=!1,v,l,y;n&&(n instanceof r.RenderTexture?o=n:(o=this.renderer.generateTexture(n),w=!0));o?(t=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],u=t.resolution,i=o.frame,a=!1):(t=this.renderer.rootRenderTarget,u=t.resolution,a=!0,i=f,i.width=t.size.width,i.height=t.size.height);var c=i.width*u,h=i.height*u,s=new r.CanvasRenderTarget(c,h);return t&&(p.bindRenderTarget(t),v=new Uint8Array(e*c*h),l=p.gl,l.readPixels(i.x*u,i.y*u,c,h,l.RGBA,l.UNSIGNED_BYTE,v),y=s.context.getImageData(0,0,c,h),y.data.set(v),s.context.putImageData(y,0,0),a&&(s.context.scale(1,-1),s.context.drawImage(s.canvas,0,-h))),w&&o.destroy(!0),s.canvas},n.prototype.pixels=function(n){var h=this.renderer,t=void 0,u=void 0,i=void 0,o=void 0,c=!1,s;n&&(n instanceof r.RenderTexture?o=n:(o=this.renderer.generateTexture(n),c=!0));o?(t=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],u=t.resolution,i=o.frame):(t=this.renderer.rootRenderTarget,u=t.resolution,i=f,i.width=t.size.width,i.height=t.size.height);var l=i.width*u,a=i.height*u,v=new Uint8Array(e*l*a);return t&&(h.bindRenderTarget(t),s=h.gl,s.readPixels(i.x*u,i.y*u,l,a,s.RGBA,s.UNSIGNED_BYTE,v)),c&&o.destroy(!0),v},n.prototype.destroy=function(){this.renderer.extract=null;this.renderer=null},n}();i.default=o;r.WebGLRenderer.registerPlugin("extract",o)},{"../../core":65}],135:[function(n,t,i){"use strict";function o(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function h(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function c(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u;i.__esModule=!0;var f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),e=n("../core"),r=o(e);u=function(n){function t(i,u){s(this,t);var f=h(this,n.call(this,i[0]instanceof r.Texture?i[0]:i[0].texture));return f._textures=null,f._durations=null,f.textures=i,f._autoUpdate=u!==!1,f.animationSpeed=1,f.loop=!0,f.onComplete=null,f.onFrameChange=null,f.onLoop=null,f._currentTime=0,f.playing=!1,f}return c(t,n),t.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&r.ticker.shared.remove(this.update,this))},t.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&r.ticker.shared.add(this.update,this,r.UPDATE_PRIORITY.HIGH))},t.prototype.gotoAndStop=function(n){this.stop();var t=this.currentFrame;this._currentTime=n;t!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(n){var t=this.currentFrame;this._currentTime=n;t!==this.currentFrame&&this.updateTexture();this.play()},t.prototype.update=function(n){var u=this.animationSpeed*n,i=this.currentFrame,t,r;if(this._durations!==null){for(t=this._currentTime%1*this._durations[this.currentFrame],t+=u/60*1e3;t<0;)this._currentTime--,t+=this._durations[this.currentFrame];for(r=Math.sign(this.animationSpeed*n),this._currentTime=Math.floor(this._currentTime);t>=this._durations[this.currentFrame];)t-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=t/this._durations[this.currentFrame]}else this._currentTime+=u;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},t.prototype.updateTexture=function(){if(this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange)this.onFrameChange(this.currentFrame)},t.prototype.destroy=function(t){this.stop();n.prototype.destroy.call(this,t)},t.fromFrames=function(n){for(var u=[],i=0;i<n.length;++i)u.push(r.Texture.fromFrame(n[i]));return new t(u)},t.fromImages=function(n){for(var u=[],i=0;i<n.length;++i)u.push(r.Texture.fromImage(n[i]));return new t(u)},f(t,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(n){if(n[0]instanceof r.Texture)this._textures=n,this._durations=null;else{this._textures=[];this._durations=[];for(var t=0;t<n.length;t++)this._textures.push(n[t].texture),this._durations.push(n[t].time)}this.gotoAndStop(0);this.updateTexture()}},{key:"currentFrame",get:function(){var n=Math.floor(this._currentTime)%this._textures.length;return n<0&&(n+=this._textures.length),n}}]),t}(r.Sprite);i.default=u},{"../core":65}],136:[function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}function v(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function y(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function p(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function w(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u;i.__esModule=!0;var e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=n("../core"),r=v(o),s=n("../core/math/ObservablePoint"),h=f(s),c=n("../core/utils"),l=n("../core/settings"),a=f(l);u=function(n){function t(i){var u=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r;return y(this,t),r=p(this,n.call(this)),r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:u.tint!==undefined?u.tint:16777215,align:u.align||"left",name:null,size:0},r.font=u.font,r._text=i,r._maxWidth=0,r._maxLineHeight=0,r._anchor=new h.default(function(){r.dirty=!0},r,0,0),r.dirty=!1,r.updateText(),r}return w(t,n),t.prototype.updateText=function(){for(var k,n,rt,p,d,g,ft,e,i,nt,w,v=t.fonts[this._font.name],h=this._font.size/v.size,u=new r.Point,o=[],y=[],c=null,l=0,f=0,b=0,a=-1,tt=0,ut=0,it=0,s=0;s<this.text.length;s++){if(k=this.text.charCodeAt(s),/(\s)/.test(this.text.charAt(s))&&(a=s,tt=l),/(?:\r\n|\r|\n)/.test(this.text.charAt(s))){y.push(l);f=Math.max(f,l);b++;u.x=0;u.y+=v.lineHeight;c=null;continue}if(a!==-1&&this._maxWidth>0&&u.x*h>this._maxWidth){r.utils.removeItems(o,a-ut,s-a);s=a;a=-1;++ut;y.push(tt);f=Math.max(f,tt);b++;u.x=0;u.y+=v.lineHeight;c=null;continue}(n=v.chars[k],n)&&(c&&n.kerning[c]&&(u.x+=n.kerning[c]),o.push({texture:n.texture,line:b,charCode:k,position:new r.Point(u.x+n.xOffset,u.y+n.yOffset)}),l=u.x+(n.texture.width+n.xOffset),u.x+=n.xAdvance,it=Math.max(it,n.yOffset+n.texture.height),c=k)}for(y.push(l),f=Math.max(f,l),rt=[],p=0;p<=b;p++)d=0,this._font.align==="right"?d=f-y[p]:this._font.align==="center"&&(d=(f-y[p])/2),rt.push(d);for(g=o.length,ft=this.tint,e=0;e<g;e++)i=this._glyphs[e],i?i.texture=o[e].texture:(i=new r.Sprite(o[e].texture),this._glyphs.push(i)),i.position.x=(o[e].position.x+rt[o[e].line])*h,i.position.y=o[e].position.y*h,i.scale.x=i.scale.y=h,i.tint=ft,i.parent||this.addChild(i);for(nt=g;nt<this._glyphs.length;++nt)this.removeChild(this._glyphs[nt]);if(this._textWidth=f*h,this._textHeight=(u.y+v.lineHeight)*h,this.anchor.x!==0||this.anchor.y!==0)for(w=0;w<g;w++)this._glyphs[w].x-=this._textWidth*this.anchor.x,this._glyphs[w].y-=this._textHeight*this.anchor.y;this._maxLineHeight=it*h},t.prototype.updateTransform=function(){this.validate();this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),n.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},t.registerFont=function(n,i){var f={},y=n.getElementsByTagName("info")[0],w=n.getElementsByTagName("common")[0],b=n.getElementsByTagName("page")[0].getAttribute("file"),u=c.getResolutionOfUrl(b,a.default.RESOLUTION),h,o,l,s;for(f.font=y.getAttribute("face"),f.size=parseInt(y.getAttribute("size"),10),f.lineHeight=parseInt(w.getAttribute("lineHeight"),10)/u,f.chars={},h=n.getElementsByTagName("char"),o=0;o<h.length;o++){var e=h[o],k=parseInt(e.getAttribute("id"),10),d=new r.Rectangle(parseInt(e.getAttribute("x"),10)/u+i.frame.x/u,parseInt(e.getAttribute("y"),10)/u+i.frame.y/u,parseInt(e.getAttribute("width"),10)/u,parseInt(e.getAttribute("height"),10)/u);f.chars[k]={xOffset:parseInt(e.getAttribute("xoffset"),10)/u,yOffset:parseInt(e.getAttribute("yoffset"),10)/u,xAdvance:parseInt(e.getAttribute("xadvance"),10)/u,kerning:{},texture:new r.Texture(i.baseTexture,d)}}for(l=n.getElementsByTagName("kerning"),s=0;s<l.length;s++){var v=l[s],g=parseInt(v.getAttribute("first"),10)/u,p=parseInt(v.getAttribute("second"),10)/u,nt=parseInt(v.getAttribute("amount"),10)/u;f.chars[p]&&(f.chars[p].kerning[g]=nt)}return t.fonts[f.font]=f,f},e(t,[{key:"tint",get:function(){return this._font.tint},set:function(n){this._font.tint=typeof n=="number"&&n>=0?n:16777215;this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(n){this._font.align=n||"left";this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(n){typeof n=="number"?this._anchor.set(n):this._anchor.copy(n)}},{key:"font",get:function(){return this._font},set:function(n){n&&(typeof n=="string"?(n=n.split(" "),this._font.name=n.length===1?n[0]:n.slice(1).join(" "),this._font.size=n.length>=2?parseInt(n[0],10):t.fonts[this._font.name].size):(this._font.name=n.name,this._font.size=typeof n.size=="number"?n.size:parseInt(n.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(n){(n=n.toString()||" ",this._text!==n)&&(this._text=n,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(n){this._maxWidth!==n&&(this._maxWidth=n,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),t}(r.Container);i.default=u;u.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101,"../core/utils":125}],137:[function(n,t,i){"use strict";function c(n){return n&&n.__esModule?n:{"default":n}}function l(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function a(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function v(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function y(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u,f;i.__esModule=!0;var e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=n("../core"),r=l(o),s=n("../core/sprites/canvas/CanvasTinter"),h=c(s);u=new r.Point;f=function(n){function t(i){var f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100,e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100,u;return a(this,t),u=v(this,n.call(this,i)),u.tileTransform=new r.TransformStatic,u._width=f,u._height=e,u._canvasPattern=null,u.uvTransform=i.transform||new r.TextureMatrix(i),u.pluginName="tilingSprite",u.uvRespectAnchor=!1,u}return y(t,n),t.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture);this.cachedTint=16777215},t.prototype._renderWebGL=function(n){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),n.setObjectRenderer(n.plugins[this.pluginName]),n.plugins[this.pluginName].render(this))},t.prototype._renderCanvas=function(n){var i=this._texture,o,l,a;if(i.baseTexture.hasLoaded){var u=n.context,f=this.worldTransform,e=n.resolution,v=i.baseTexture,t=v.resolution,s=this.tilePosition.x/this.tileScale.x%i._frame.width*t,c=this.tilePosition.y/this.tileScale.y%i._frame.height*t;(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint)&&(this._textureID=this._texture._updateID,o=new r.CanvasRenderTarget(i._frame.width,i._frame.height,t),this.tint!==16777215?(this.tintedTexture=h.default.getTintedTexture(this,this.tint),o.context.drawImage(this.tintedTexture,0,0)):o.context.drawImage(v.source,-i._frame.x*t,-i._frame.y*t),this.cachedTint=this.tint,this._canvasPattern=o.context.createPattern(o.canvas,"repeat"));u.globalAlpha=this.worldAlpha;u.setTransform(f.a*e,f.b*e,f.c*e,f.d*e,f.tx*e,f.ty*e);n.setBlendMode(this.blendMode);u.fillStyle=this._canvasPattern;u.scale(this.tileScale.x/t,this.tileScale.y/t);l=this.anchor.x*-this._width;a=this.anchor.y*-this._height;this.uvRespectAnchor?(u.translate(s,c),u.fillRect(-s+l,-c+a,this._width/this.tileScale.x*t,this._height/this.tileScale.y*t)):(u.translate(s+l,c+a),u.fillRect(-s,-c,this._width/this.tileScale.x*t,this._height/this.tileScale.y*t))}},t.prototype._calculateBounds=function(){var n=this._width*-this._anchor._x,t=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,n,t,i,r)},t.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),t||(this._localBoundsRect||(this._localBoundsRect=new r.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(n){var t;this.worldTransform.applyInverse(n,u);var i=this._width,r=this._height,f=-i*this.anchor._x;return u.x>=f&&u.x<f+i&&(t=-r*this.anchor._y,u.y>=t&&u.y<t+r)?!0:!1},t.prototype.destroy=function(t){n.prototype.destroy.call(this,t);this.tileTransform=null;this.uvTransform=null},t.from=function(n,i,u){return new t(r.Texture.from(n),i,u)},t.fromFrame=function(n,i,u){var f=r.utils.TextureCache[n];if(!f)throw new Error('The frameId "'+n+'" does not exist in the texture cache '+this);return new t(f,i,u)},t.fromImage=function(n,i,u,f,e){return new t(r.Texture.fromImage(n,f,e),i,u)},e(t,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(n){this.uvTransform.clampMargin=n;this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(n){this.tileTransform.scale.copy(n)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(n){this.tileTransform.position.copy(n)}},{key:"width",get:function(){return this._width},set:function(n){this._width=n}},{key:"height",get:function(){return this._height},set:function(n){this._height=n}}]),t}(r.Sprite);i.default=f},{"../core":65,"../core/sprites/canvas/CanvasTinter":104}],138:[function(n){"use strict";function o(n){return n&&n.__esModule?n:{"default":n}}function a(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function v(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var h=n("../core"),i=a(h),c=n("../core/textures/Texture"),r=o(c),l=n("../core/textures/BaseTexture"),u=o(l),e=n("../core/utils"),t=i.DisplayObject,s=new i.Matrix,f;t.prototype._cacheAsBitmap=!1;t.prototype._cacheData=!1;f=function f(){v(this,f);this.textureCacheId=null;this.originalRenderWebGL=null;this.originalRenderCanvas=null;this.originalCalculateBounds=null;this.originalGetLocalBounds=null;this.originalUpdateTransform=null;this.originalHitTest=null;this.originalDestroy=null;this.originalMask=null;this.originalFilterArea=null;this.sprite=null};Object.defineProperties(t.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(n){if(this._cacheAsBitmap!==n){this._cacheAsBitmap=n;var t=void 0;n?(this._cacheData||(this._cacheData=new f),t=this._cacheData,t.originalRenderWebGL=this.renderWebGL,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this._calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=t.originalRenderWebGL,this.renderCanvas=t.originalRenderCanvas,this._calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}});t.prototype._renderCachedWebGL=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(n),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(n))};t.prototype._initCachedDisplayObject=function(n){var l,t,a,h,f;if(!this._cacheData||!this._cacheData.sprite){l=this.alpha;this.alpha=1;n.currentRenderer.flush();t=this.getLocalBounds().clone();this._filters&&(a=this._filters[0].padding,t.pad(a));var v=n._activeRenderTarget,y=n.filterManager.filterStack,o=i.RenderTexture.create(t.width|0,t.height|0),c="cacheAsBitmap_"+e.uid();this._cacheData.textureCacheId=c;u.default.addToCache(o.baseTexture,c);r.default.addToCache(o,c);h=s;h.tx=-t.x;h.ty=-t.y;this.transform.worldTransform.identity();this.renderWebGL=this._cacheData.originalRenderWebGL;n.render(this,o,!0,h,!0);n.bindRenderTarget(v);n.filterManager.filterStack=y;this.renderWebGL=this._renderCachedWebGL;this.updateTransform=this.displayObjectUpdateTransform;this._mask=null;this.filterArea=null;f=new i.Sprite(o);f.transform.worldTransform=this.transform.worldTransform;f.anchor.x=-(t.x/t.width);f.anchor.y=-(t.y/t.height);f.alpha=l;f._bounds=this._bounds;this._calculateBounds=this._calculateCachedBounds;this.getLocalBounds=this._getCachedLocalBounds;this._cacheData.sprite=f;this.transform._parentID=-1;this.parent?this.updateTransform():(this.parent=n._tempDisplayObjectParent,this.updateTransform(),this.parent=null);this.containsPoint=f.containsPoint.bind(f)}};t.prototype._renderCachedCanvas=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(n),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(n))};t.prototype._initCachedDisplayObjectCanvas=function(n){var t,l,o,f;if(!this._cacheData||!this._cacheData.sprite){t=this.getLocalBounds();l=this.alpha;this.alpha=1;var a=n.context,h=i.RenderTexture.create(t.width|0,t.height|0),c="cacheAsBitmap_"+e.uid();this._cacheData.textureCacheId=c;u.default.addToCache(h.baseTexture,c);r.default.addToCache(h,c);o=s;this.transform.localTransform.copy(o);o.invert();o.tx-=t.x;o.ty-=t.y;this.renderCanvas=this._cacheData.originalRenderCanvas;n.render(this,h,!0,o,!1);n.context=a;this.renderCanvas=this._renderCachedCanvas;this._calculateBounds=this._calculateCachedBounds;this._mask=null;this.filterArea=null;f=new i.Sprite(h);f.transform.worldTransform=this.transform.worldTransform;f.anchor.x=-(t.x/t.width);f.anchor.y=-(t.y/t.height);f._bounds=this._bounds;f.alpha=l;this.parent?this.updateTransform():(this.parent=n._tempDisplayObjectParent,this.updateTransform(),this.parent=null);this.updateTransform=this.displayObjectUpdateTransform;this._cacheData.sprite=f;this.containsPoint=f.containsPoint.bind(f)}};t.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()};t.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()};t.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0);this._cacheData.sprite=null;u.default.removeFromCache(this._cacheData.textureCacheId);r.default.removeFromCache(this._cacheData.textureCacheId);this._cacheData.textureCacheId=null};t.prototype._cacheAsBitmapDestroy=function(n){this.cacheAsBitmap=!1;this.destroy(n)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":125}],139:[function(n){"use strict";function r(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}var i=n("../core"),t=r(i);t.DisplayObject.prototype.name=null;t.Container.prototype.getChildByName=function(n){for(var t=0;t<this.children.length;t++)if(this.children[t].name===n)return this.children[t];return null}},{"../core":65}],140:[function(n){"use strict";function r(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}var i=n("../core"),t=r(i);t.DisplayObject.prototype.getGlobalPosition=function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new t.Point,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return this.parent?this.parent.toGlobal(this.position,n,i):(n.x=this.position.x,n.y=this.position.y),n}},{"../core":65}],141:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f,e,o;i.__esModule=!0;i.BitmapText=i.TilingSpriteRenderer=i.TilingSprite=i.AnimatedSprite=undefined;u=n("./AnimatedSprite");Object.defineProperty(i,"AnimatedSprite",{enumerable:!0,get:function(){return r(u).default}});f=n("./TilingSprite");Object.defineProperty(i,"TilingSprite",{enumerable:!0,get:function(){return r(f).default}});e=n("./webgl/TilingSpriteRenderer");Object.defineProperty(i,"TilingSpriteRenderer",{enumerable:!0,get:function(){return r(e).default}});o=n("./BitmapText");Object.defineProperty(i,"BitmapText",{enumerable:!0,get:function(){return r(o).default}});n("./cacheAsBitmap");n("./getChildByName");n("./getGlobalPosition")},{"./AnimatedSprite":135,"./BitmapText":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(n,t,i){"use strict";function s(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function c(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function l(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u,e;i.__esModule=!0;var o=n("../../core"),r=s(o),f=n("../../core/const"),a=n("path");u=new r.Matrix;e=function(n){function t(i){h(this,t);var r=c(this,n.call(this,i));return r.shader=null,r.simpleShader=null,r.quad=null,r}return l(t,n),t.prototype.onContextChange=function(){var n=this.renderer.gl;this.shader=new r.Shader(n,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n");this.simpleShader=new r.Shader(n,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n");this.renderer.bindVao(null);this.quad=new r.Quad(n,this.renderer.state.attribState);this.quad.initVao(this.shader)},t.prototype.render=function(n){var h=this.renderer,c=this.quad,t,i;h.bindVao(c.vao);t=c.vertices;t[0]=t[6]=n._width*-n.anchor.x;t[1]=t[3]=n._height*-n.anchor.y;t[2]=t[4]=n._width*(1-n.anchor.x);t[5]=t[7]=n._height*(1-n.anchor.y);n.uvRespectAnchor&&(t=c.uvs,t[0]=t[6]=-n.anchor.x,t[1]=t[3]=-n.anchor.y,t[2]=t[4]=1-n.anchor.x,t[5]=t[7]=1-n.anchor.y);c.upload();var o=n._texture,e=o.baseTexture,s=n.tileTransform.localTransform,l=n.uvTransform,a=e.isPowerOfTwo&&o.frame.width===e.width&&o.frame.height===e.height;a&&(e._glTextures[h.CONTEXT_UID]?a=e.wrapMode!==f.WRAP_MODES.CLAMP:e.wrapMode===f.WRAP_MODES.CLAMP&&(e.wrapMode=f.WRAP_MODES.REPEAT));i=a?this.simpleShader:this.shader;h.bindShader(i);var p=o.width,w=o.height,v=n._width,y=n._height;u.set(s.a*p/v,s.b*p/y,s.c*w/v,s.d*w/y,s.tx/v,s.ty/y);u.invert();a?u.prepend(l.mapCoord):(i.uniforms.uMapCoord=l.mapCoord.toArray(!0),i.uniforms.uClampFrame=l.uClampFrame,i.uniforms.uClampOffset=l.uClampOffset);i.uniforms.uTransform=u.toArray(!0);i.uniforms.uColor=r.utils.premultiplyTintToRgba(n.tint,n.worldAlpha,i.uniforms.uColor,e.premultipliedAlpha);i.uniforms.translationMatrix=n.transform.worldTransform.toArray(!0);i.uniforms.uSampler=h.bindTexture(o);h.setBlendMode(r.utils.correctBlendMode(n.blendMode,e.premultipliedAlpha));c.vao.draw(this.renderer.gl.TRIANGLES,6,0)},t}(r.ObjectRenderer);i.default=e;r.WebGLRenderer.registerPlugin("tilingSprite",e)},{"../../core":65,"../../core/const":46,path:23}],143:[function(n,t,i){"use strict";function o(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function h(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function c(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r;i.__esModule=!0;var u=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),f=n("../../core"),e=o(f),l=n("path");r=function(n){function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1,i;return s(this,t),i=h(this,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n")),i.alpha=r,i.glShaderKey="alpha",i}return c(t,n),u(t,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(n){this.uniforms.uAlpha=n}}]),t}(e.Filter);i.default=r},{"../../core":65,path:23}],144:[function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}function a(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function v(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function y(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function p(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var f;i.__esModule=!0;var e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=n("../../core"),r=a(o),s=n("./BlurXFilter"),h=u(s),c=n("./BlurYFilter"),l=u(c);f=function(n){function t(i,u,f,e){v(this,t);var o=y(this,n.call(this));return o.blurXFilter=new h.default(i,u,f,e),o.blurYFilter=new l.default(i,u,f,e),o.padding=0,o.resolution=f||r.settings.RESOLUTION,o.quality=u||4,o.blur=i||8,o}return p(t,n),t.prototype.apply=function(n,t,i){var r=n.getRenderTarget(!0);this.blurXFilter.apply(n,t,r,!0);this.blurYFilter.apply(n,r,i,!1);n.returnRenderTarget(r)},e(t,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(n){this.blurXFilter.blur=this.blurYFilter.blur=n;this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(n){this.blurXFilter.quality=this.blurYFilter.quality=n}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(n){this.blurXFilter.blur=n;this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(n){this.blurYFilter.blur=n;this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(n){this.blurYFilter._blendMode=n}}]),t}(r.Filter);i.default=f},{"../../core":65,"./BlurXFilter":145,"./BlurYFilter":146}],145:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function y(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function p(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function w(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function b(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var o;i.__esModule=!0;var s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),h=n("../../core"),u=y(h),c=n("./generateBlurVertSource"),f=r(c),l=n("./generateBlurFragSource"),e=r(l),a=n("./getMaxBlurKernelSize"),v=r(a);o=function(n){function t(i,r,o,s){p(this,t);s=s||5;var c=f.default(s,!0),l=e.default(s),h=w(this,n.call(this,c,l));return h.resolution=o||u.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=i||8,h.firstRun=!0,h}return b(t,n),t.prototype.apply=function(n,t,i,r){var c,o,h,a;if(this.firstRun&&(c=n.renderer.gl,o=v.default(c),this.vertexSrc=f.default(o,!0),this.fragmentSrc=e.default(o),this.firstRun=!1),this.uniforms.strength=1/i.size.width*(i.size.width/t.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)n.applyFilter(this,t,i,r);else{var l=n.getRenderTarget(!0),u=t,s=l;for(h=0;h<this.passes-1;h++)n.applyFilter(this,u,s,!0),a=s,s=u,u=a;n.applyFilter(this,u,i,r);n.returnRenderTarget(l)}},s(t,[{key:"blur",get:function(){return this.strength},set:function(n){this.padding=Math.abs(n)*2;this.strength=n}},{key:"quality",get:function(){return this._quality},set:function(n){this._quality=n;this.passes=n}}]),t}(u.Filter);i.default=o},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],146:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function y(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function p(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function w(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function b(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var o;i.__esModule=!0;var s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),h=n("../../core"),u=y(h),c=n("./generateBlurVertSource"),f=r(c),l=n("./generateBlurFragSource"),e=r(l),a=n("./getMaxBlurKernelSize"),v=r(a);o=function(n){function t(i,r,o,s){p(this,t);s=s||5;var c=f.default(s,!1),l=e.default(s),h=w(this,n.call(this,c,l));return h.resolution=o||u.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=i||8,h.firstRun=!0,h}return b(t,n),t.prototype.apply=function(n,t,i,r){var c,o,h,a;if(this.firstRun&&(c=n.renderer.gl,o=v.default(c),this.vertexSrc=f.default(o,!1),this.fragmentSrc=e.default(o),this.firstRun=!1),this.uniforms.strength=1/i.size.height*(i.size.height/t.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)n.applyFilter(this,t,i,r);else{var l=n.getRenderTarget(!0),u=t,s=l;for(h=0;h<this.passes-1;h++)n.applyFilter(this,u,s,!0),a=s,s=u,u=a;n.applyFilter(this,u,i,r);n.returnRenderTarget(l)}},s(t,[{key:"blur",get:function(){return this.strength},set:function(n){this.padding=Math.abs(n)*2;this.strength=n}},{key:"quality",get:function(){return this._quality},set:function(n){this._quality=n;this.passes=n}}]),t}(u.Filter);i.default=o},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],147:[function(n,t,i){"use strict";function f(n){for(var i,s=r[n],h=s.length,f=u,e="",o=void 0,t=0;t<n;t++)i="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",t),o=t,t>=h&&(o=n-t-1),i=i.replace("%value%",s[o]),e+=i,e+="\n";return f=f.replace("%blur%",e),f.replace("%size%",n)}i.__esModule=!0;i.default=f;var r={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[.000489,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},u="varying vec2 vBlurTexCoords[%size%];\nuniform sampler2D uSampler;\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n    %blur%\n}"},{}],148:[function(n,t,i){"use strict";function u(n,t){for(var s=Math.ceil(n/2),f=r,e="",o=void 0,u,o=t?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);",i=0;i<n;i++)u=o.replace("%index%",i),u=u.replace("%sampleIndex%",i-(s-1)+".0"),e+=u,e+="\n";return f=f.replace("%blur%",e),f.replace("%size%",n)}i.__esModule=!0;i.default=u;var r="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform float strength;\nuniform mat3 projectionMatrix;\nvarying vec2 vBlurTexCoords[%size%];\nvoid main(void)\n{\ngl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n%blur%\n}"},{}],149:[function(n,t,i){"use strict";function r(n){for(var i=n.getParameter(n.MAX_VARYING_VECTORS),t=15;t>i;)t-=2;return t}i.__esModule=!0;i.default=r},{}],150:[function(n,t,i){"use strict";function o(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function h(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function c(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r;i.__esModule=!0;var u=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),f=n("../../core"),e=o(f),l=n("path");r=function(n){function t(){s(this,t);var i=h(this,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i.alpha=1,i}return c(t,n),t.prototype._loadMatrix=function(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1,t=n;i&&(this._multiply(t,this.uniforms.m,n),t=this._colorMatrix(t));this.uniforms.m=t},t.prototype._multiply=function(n,t,i){return n[0]=t[0]*i[0]+t[1]*i[5]+t[2]*i[10]+t[3]*i[15],n[1]=t[0]*i[1]+t[1]*i[6]+t[2]*i[11]+t[3]*i[16],n[2]=t[0]*i[2]+t[1]*i[7]+t[2]*i[12]+t[3]*i[17],n[3]=t[0]*i[3]+t[1]*i[8]+t[2]*i[13]+t[3]*i[18],n[4]=t[0]*i[4]+t[1]*i[9]+t[2]*i[14]+t[3]*i[19]+t[4],n[5]=t[5]*i[0]+t[6]*i[5]+t[7]*i[10]+t[8]*i[15],n[6]=t[5]*i[1]+t[6]*i[6]+t[7]*i[11]+t[8]*i[16],n[7]=t[5]*i[2]+t[6]*i[7]+t[7]*i[12]+t[8]*i[17],n[8]=t[5]*i[3]+t[6]*i[8]+t[7]*i[13]+t[8]*i[18],n[9]=t[5]*i[4]+t[6]*i[9]+t[7]*i[14]+t[8]*i[19]+t[9],n[10]=t[10]*i[0]+t[11]*i[5]+t[12]*i[10]+t[13]*i[15],n[11]=t[10]*i[1]+t[11]*i[6]+t[12]*i[11]+t[13]*i[16],n[12]=t[10]*i[2]+t[11]*i[7]+t[12]*i[12]+t[13]*i[17],n[13]=t[10]*i[3]+t[11]*i[8]+t[12]*i[13]+t[13]*i[18],n[14]=t[10]*i[4]+t[11]*i[9]+t[12]*i[14]+t[13]*i[19]+t[14],n[15]=t[15]*i[0]+t[16]*i[5]+t[17]*i[10]+t[18]*i[15],n[16]=t[15]*i[1]+t[16]*i[6]+t[17]*i[11]+t[18]*i[16],n[17]=t[15]*i[2]+t[16]*i[7]+t[17]*i[12]+t[18]*i[17],n[18]=t[15]*i[3]+t[16]*i[8]+t[17]*i[13]+t[18]*i[18],n[19]=t[15]*i[4]+t[16]*i[9]+t[17]*i[14]+t[18]*i[19]+t[19],n},t.prototype._colorMatrix=function(n){var t=new Float32Array(n);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(n,t){var i=[n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.greyscale=function(n,t){var i=[n,n,n,0,0,n,n,n,0,0,n,n,n,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.blackAndWhite=function(n){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],n)},t.prototype.hue=function(n,t){n=(n||0)/180*Math.PI;var i=Math.cos(n),u=Math.sin(n),e=Math.sqrt,r=1/3,f=e(r),o=i+(1-i)*r,s=r*(1-i)-f*u,h=r*(1-i)+f*u,c=r*(1-i)+f*u,l=i+r*(1-i),a=r*(1-i)-f*u,v=r*(1-i)-f*u,y=r*(1-i)+f*u,p=i+r*(1-i),w=[o,s,h,0,0,c,l,a,0,0,v,y,p,0,0,0,0,0,1,0];this._loadMatrix(w,t)},t.prototype.contrast=function(n,t){var i=(n||0)+1,r=-.5*(i-1),u=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(u,t)},t.prototype.saturate=function(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,r=arguments[1],t=i*2/3+1,n=(t-1)*-.5,u=[t,n,n,0,0,n,t,n,0,0,n,n,t,0,0,0,0,0,1,0];this._loadMatrix(u,r)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(n){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],n)},t.prototype.sepia=function(n){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],n)},t.prototype.technicolor=function(n){this._loadMatrix([1.9125277891456083,-.85453449769516454,-.091555084827555852,0,11.793603434377337,-.30878333859280971,1.7658908555458428,-.10601743074722245,0,-70.352051614613984,-.231103377548616,-.75018991974402116,1.847597816108189,0,30.950940869491138,0,0,0,1,0],n)},t.prototype.polaroid=function(n){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],n)},t.prototype.toBGR=function(n){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],n)},t.prototype.kodachrome=function(n){this._loadMatrix([1.1285582396593525,-.39673822836013478,-.039925591729217932,0,63.729587621965017,-.16404339962244616,1.0835251566291304,-.054988051156331319,0,24.732407896706203,-.16786010706155763,-.56034162776952479,1.6014850761964943,0,35.629828074609463,0,0,0,1,0],n)},t.prototype.browni=function(n){this._loadMatrix([.59970234981597148,.34553243048391263,-.27082986745380422,0,47.431928556008728,-.037703249837783157,.86095775879926406,.15059552388459913,0,-36.968414983191273,.24113635128153335,-.074410379084224917,.44972182064877153,0,-7.5620752775912834,0,0,0,1,0],n)},t.prototype.vintage=function(n){this._loadMatrix([.6279345635605994,.32021834208193672,-.039654082113124531,0,9.6512858352941233,.025783977048088678,.64411886443747712,.032591276161492939,0,7.4628291764705912,.0466055556782719,-.0851232987247891,.52416480187004655,0,5.1591905882352957,0,0,0,1,0],n)},t.prototype.colorTone=function(n,t,i,r,u){n=n||.2;t=t||.15;i=i||16770432;r=r||3375104;var f=(i>>16&255)/255,e=(i>>8&255)/255,o=(i&255)/255,s=(r>>16&255)/255,h=(r>>8&255)/255,c=(r&255)/255,l=[.3,.59,.11,0,0,f,e,o,n,0,s,h,c,t,0,f-s,e-h,o-c,0,0];this._loadMatrix(l,u)},t.prototype.night=function(n,t){n=n||.1;var i=[n*-2,-n,0,0,0,-n,0,n,0,0,0,n,n*2,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.predator=function(n,t){var i=[11.224130630493164*n,-4.7944869995117188*n,-2.8746118545532227*n,0*n,.40342438220977783*n,-3.6330697536468506*n,9.1931571960449219*n,-2.9518108367919922*n,0*n,-1.316135048866272*n,-3.2184197902679443*n,-4.2375030517578125*n,7.4764480590820312*n,0*n,.80444592237472534*n,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.lsd=function(n){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],n)},t.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},u(t,[{key:"matrix",get:function(){return this.uniforms.m},set:function(n){this.uniforms.m=n}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(n){this.uniforms.uAlpha=n}}]),t}(e.Filter);i.default=r;r.prototype.grayscale=r.prototype.greyscale},{"../../core":65,path:23}],151:[function(n,t,i){"use strict";function o(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function h(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function c(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u;i.__esModule=!0;var f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),e=n("../../core"),r=o(e),l=n("path");u=function(n){function t(i,u){var e,f;return s(this,t),e=new r.Matrix,i.renderable=!1,f=h(this,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n")),f.maskSprite=i,f.maskMatrix=e,f.uniforms.mapSampler=i._texture,f.uniforms.filterMatrix=e,f.uniforms.scale={x:1,y:1},(u===null||u===undefined)&&(u=20),f.scale=new r.Point(u,u),f}return c(t,n),t.prototype.apply=function(n,t,i){this.uniforms.filterMatrix=n.calculateSpriteMatrix(this.maskMatrix,this.maskSprite);this.uniforms.scale.x=this.scale.x;this.uniforms.scale.y=this.scale.y;n.applyFilter(this,t,i)},f(t,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(n){this.uniforms.mapSampler=n}}]),t}(r.Filter);i.default=u},{"../../core":65,path:23}],152:[function(n,t,i){"use strict";function e(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function h(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r;i.__esModule=!0;var u=n("../../core"),f=e(u),c=n("path");r=function(n){function t(){return o(this,t),s(this,n.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return h(t,n),t}(f.Filter);i.default=r},{"../../core":65,path:23}],153:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f,e,o,s,h,c,l;i.__esModule=!0;u=n("./fxaa/FXAAFilter");Object.defineProperty(i,"FXAAFilter",{enumerable:!0,get:function(){return r(u).default}});f=n("./noise/NoiseFilter");Object.defineProperty(i,"NoiseFilter",{enumerable:!0,get:function(){return r(f).default}});e=n("./displacement/DisplacementFilter");Object.defineProperty(i,"DisplacementFilter",{enumerable:!0,get:function(){return r(e).default}});o=n("./blur/BlurFilter");Object.defineProperty(i,"BlurFilter",{enumerable:!0,get:function(){return r(o).default}});s=n("./blur/BlurXFilter");Object.defineProperty(i,"BlurXFilter",{enumerable:!0,get:function(){return r(s).default}});h=n("./blur/BlurYFilter");Object.defineProperty(i,"BlurYFilter",{enumerable:!0,get:function(){return r(h).default}});c=n("./colormatrix/ColorMatrixFilter");Object.defineProperty(i,"ColorMatrixFilter",{enumerable:!0,get:function(){return r(c).default}});l=n("./alpha/AlphaFilter");Object.defineProperty(i,"AlphaFilter",{enumerable:!0,get:function(){return r(l).default}})},{"./alpha/AlphaFilter":143,"./blur/BlurFilter":144,"./blur/BlurXFilter":145,"./blur/BlurYFilter":146,"./colormatrix/ColorMatrixFilter":150,"./displacement/DisplacementFilter":151,"./fxaa/FXAAFilter":152,"./noise/NoiseFilter":154}],154:[function(n,t,i){"use strict";function o(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function h(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function c(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r;i.__esModule=!0;var u=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),f=n("../../core"),e=o(f),l=n("path");r=function(n){function t(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:.5,u=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Math.random(),i;return s(this,t),i=h(this,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n")),i.noise=r,i.seed=u,i}return c(t,n),u(t,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(n){this.uniforms.uNoise=n}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(n){this.uniforms.uSeed=n}}]),t}(e.Filter);i.default=r},{"../../core":65,path:23}],155:[function(n,t,i){"use strict";function o(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r;i.__esModule=!0;var u=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),f=n("../core"),e=o(f);r=function(){function n(){s(this,n);this.global=new e.Point;this.target=null;this.originalEvent=null;this.identifier=null;this.isPrimary=!1;this.button=0;this.buttons=0;this.width=0;this.height=0;this.tiltX=0;this.tiltY=0;this.pointerType=null;this.pressure=0;this.rotationAngle=0;this.twist=0;this.tangentialPressure=0}return n.prototype.getLocalPosition=function(n,t,i){return n.worldTransform.applyInverse(i||this.global,t)},n.prototype._copyEvent=function(n){n.isPrimary&&(this.isPrimary=!0);this.button=n.button;this.buttons=n.buttons;this.width=n.width;this.height=n.height;this.tiltX=n.tiltX;this.tiltY=n.tiltY;this.pointerType=n.pointerType;this.pressure=n.pressure;this.rotationAngle=n.rotationAngle;this.twist=n.twist||0;this.tangentialPressure=n.tangentialPressure||0},n.prototype._reset=function(){this.isPrimary=!1},u(n,[{key:"pointerId",get:function(){return this.identifier}}]),n}();i.default=r},{"../core":65}],156:[function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}i.__esModule=!0;var u=function(){function n(){r(this,n);this.stopped=!1;this.target=null;this.currentTarget=null;this.type=null;this.data=null}return n.prototype.stopPropagation=function(){this.stopped=!0},n.prototype._reset=function(){this.stopped=!1;this.currentTarget=null;this.target=null},n}();i.default=u},{}],157:[function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}function g(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function nt(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function tt(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function it(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}i.__esModule=!0;var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},l=n("../core"),r=g(l),a=n("./InteractionData"),h=u(a),v=n("./InteractionEvent"),y=u(v),p=n("./InteractionTrackingData"),o=u(p),w=n("eventemitter3"),b=u(w),k=n("./interactiveTarget"),d=u(k);r.utils.mixins.delayMixin(r.DisplayObject.prototype,d.default);var f=1,e={target:null,data:{global:null}},s=function(n){function t(i,u){nt(this,t);var e=tt(this,n.call(this));return u=u||{},e.renderer=i,e.autoPreventDefault=u.autoPreventDefault!==undefined?u.autoPreventDefault:!0,e.interactionFrequency=u.interactionFrequency||10,e.mouse=new h.default,e.mouse.identifier=f,e.mouse.global.set(-999999),e.activeInteractionData={},e.activeInteractionData[f]=e.mouse,e.interactionDataPool=[],e.eventData=new y.default,e.interactionDOMElement=null,e.moveWhenInside=!1,e.eventsAdded=!1,e.mouseOverRenderer=!1,e.supportsTouchEvents="ontouchstart"in window,e.supportsPointerEvents=!!window.PointerEvent,e.onPointerUp=e.onPointerUp.bind(e),e.processPointerUp=e.processPointerUp.bind(e),e.onPointerCancel=e.onPointerCancel.bind(e),e.processPointerCancel=e.processPointerCancel.bind(e),e.onPointerDown=e.onPointerDown.bind(e),e.processPointerDown=e.processPointerDown.bind(e),e.onPointerMove=e.onPointerMove.bind(e),e.processPointerMove=e.processPointerMove.bind(e),e.onPointerOut=e.onPointerOut.bind(e),e.processPointerOverOut=e.processPointerOverOut.bind(e),e.onPointerOver=e.onPointerOver.bind(e),e.cursorStyles={"default":"inherit",pointer:"pointer"},e.currentCursorMode=null,e.cursor=null,e._tempPoint=new r.Point,e.resolution=1,e.setTargetElement(e.renderer.view,e.renderer.resolution),e}return it(t,n),t.prototype.hitTest=function(n,t){return e.target=null,e.data.global=n,t||(t=this.renderer._lastObjectRendered),this.processInteractive(e,t,null,!0),e.target},t.prototype.setTargetElement=function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this.removeEvents();this.interactionDOMElement=n;this.resolution=t;this.addEvents()},t.prototype.addEvents=function(){this.interactionDOMElement&&(r.ticker.shared.add(this.update,this,r.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},t.prototype.removeEvents=function(){this.interactionDOMElement&&(r.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},t.prototype.update=function(n){var i,t,r;if((this._deltaTime+=n,!(this._deltaTime<this.interactionFrequency))&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove){this.didMove=!1;return}this.cursor=null;for(i in this.activeInteractionData)this.activeInteractionData.hasOwnProperty(i)&&(t=this.activeInteractionData[i],t.originalEvent&&t.pointerType!=="touch"&&(r=this.configureInteractionEventForDOMEvent(this.eventData,t.originalEvent,t),this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)));this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(n){if(n=n||"default",this.currentCursorMode!==n){this.currentCursorMode=n;var t=this.cursorStyles[n];if(t)switch(typeof t=="undefined"?"undefined":c(t)){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(n);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else typeof n!="string"||Object.prototype.hasOwnProperty.call(this.cursorStyles,n)||(this.interactionDOMElement.style.cursor=n)}},t.prototype.dispatchEvent=function(n,t,i){i.stopped||(i.currentTarget=n,i.type=t,n.emit(t,i),n[t]&&n[t](i))},t.prototype.mapPositionToPoint=function(n,t,i){var r=void 0,u;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};u=navigator.isCocoonJS?this.resolution:1/this.resolution;n.x=(t-r.left)*(this.interactionDOMElement.width/r.width)*u;n.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*u},t.prototype.processInteractive=function(n,t,i,r,u){var e,c,o,l,a;if(!t||!t.visible)return!1;e=n.data.global;u=t.interactive||u;var f=!1,s=u,h=!0;if(t.hitArea?(r&&(t.worldTransform.applyInverse(e,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?f=!0:(r=!1,h=!1)),s=!1):t._mask&&r&&(t._mask.containsPoint(e)||(r=!1,h=!1)),h&&t.interactiveChildren&&t.children)for(c=t.children,o=c.length-1;o>=0;o--)if(l=c[o],a=this.processInteractive(n,l,i,r,s),a){if(!l.parent)continue;s=!1;a&&(n.target&&(r=!1),f=!0)}return u&&(r&&!n.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(e)&&(f=!0),t.interactive&&(f&&!n.target&&(n.target=t),i&&i(n,t,!!f))),f},t.prototype.onPointerDown=function(n){var i,f,r,e;if(!this.supportsTouchEvents||n.pointerType!=="touch")for(i=this.normalizeToPointerData(n),this.autoPreventDefault&&i[0].isNormalized&&n.preventDefault(),f=i.length,r=0;r<f;r++){var t=i[r],o=this.getInteractionDataForPointerId(t),u=this.configureInteractionEventForDOMEvent(this.eventData,t,o);u.data.originalEvent=n;this.processInteractive(u,this.renderer._lastObjectRendered,this.processPointerDown,!0);this.emit("pointerdown",u);t.pointerType==="touch"?this.emit("touchstart",u):(t.pointerType==="mouse"||t.pointerType==="pen")&&(e=t.button===2,this.emit(e?"rightdown":"mousedown",this.eventData))}},t.prototype.processPointerDown=function(n,t,i){var u=n.data,r=n.data.identifier,f;i&&(t.trackedPointers[r]||(t.trackedPointers[r]=new o.default(r)),this.dispatchEvent(t,"pointerdown",n),u.pointerType==="touch"?this.dispatchEvent(t,"touchstart",n):(u.pointerType==="mouse"||u.pointerType==="pen")&&(f=u.button===2,f?t.trackedPointers[r].rightDown=!0:t.trackedPointers[r].leftDown=!0,this.dispatchEvent(t,f?"rightdown":"mousedown",n)))},t.prototype.onPointerComplete=function(n,t,i){for(var h,o=this.normalizeToPointerData(n),c=o.length,u=n.target!==this.interactionDOMElement?"outside":"",e=0;e<c;e++){var r=o[e],s=this.getInteractionDataForPointerId(r),f=this.configureInteractionEventForDOMEvent(this.eventData,r,s);f.data.originalEvent=n;this.processInteractive(f,this.renderer._lastObjectRendered,i,t||!u);this.emit(t?"pointercancel":"pointerup"+u,f);r.pointerType==="mouse"||r.pointerType==="pen"?(h=r.button===2,this.emit(h?"rightup"+u:"mouseup"+u,f)):r.pointerType==="touch"&&(this.emit(t?"touchcancel":"touchend"+u,f),this.releaseInteractionDataForPointerId(r.pointerId,s))}},t.prototype.onPointerCancel=function(n){if(!this.supportsTouchEvents||n.pointerType!=="touch")this.onPointerComplete(n,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(n,t){var r=n.data,i=n.data.identifier;t.trackedPointers[i]!==undefined&&(delete t.trackedPointers[i],this.dispatchEvent(t,"pointercancel",n),r.pointerType==="touch"&&this.dispatchEvent(t,"touchcancel",n))},t.prototype.onPointerUp=function(n){if(!this.supportsTouchEvents||n.pointerType!=="touch")this.onPointerComplete(n,!1,this.processPointerUp)},t.prototype.processPointerUp=function(n,t,i){var f=n.data,s=n.data.identifier,r=t.trackedPointers[s],e=f.pointerType==="touch",l=f.pointerType==="mouse"||f.pointerType==="pen";if(l){var u=f.button===2,h=o.default.FLAGS,a=u?h.RIGHT_DOWN:h.LEFT_DOWN,c=r!==undefined&&r.flags&a;i?(this.dispatchEvent(t,u?"rightup":"mouseup",n),c&&this.dispatchEvent(t,u?"rightclick":"click",n)):c&&this.dispatchEvent(t,u?"rightupoutside":"mouseupoutside",n);r&&(u?r.rightDown=!1:r.leftDown=!1)}i?(this.dispatchEvent(t,"pointerup",n),e&&this.dispatchEvent(t,"touchend",n),r&&(this.dispatchEvent(t,"pointertap",n),e&&(this.dispatchEvent(t,"tap",n),r.over=!1))):r&&(this.dispatchEvent(t,"pointerupoutside",n),e&&this.dispatchEvent(t,"touchendoutside",n));r&&r.none&&delete t.trackedPointers[s]},t.prototype.onPointerMove=function(n){var i,f,u,e;if(!this.supportsTouchEvents||n.pointerType!=="touch"){for(i=this.normalizeToPointerData(n),i[0].pointerType==="mouse"&&(this.didMove=!0,this.cursor=null),f=i.length,u=0;u<f;u++){var t=i[u],o=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,o);r.data.originalEvent=n;e=t.pointerType==="touch"?this.moveWhenInside:!0;this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerMove,e);this.emit("pointermove",r);t.pointerType==="touch"&&this.emit("touchmove",r);(t.pointerType==="mouse"||t.pointerType==="pen")&&this.emit("mousemove",r)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(n,t,i){var r=n.data,f=r.pointerType==="touch",u=r.pointerType==="mouse"||r.pointerType==="pen";u&&this.processPointerOverOut(n,t,i);(!this.moveWhenInside||i)&&(this.dispatchEvent(t,"pointermove",n),f&&this.dispatchEvent(t,"touchmove",n),u&&this.dispatchEvent(t,"mousemove",n))},t.prototype.onPointerOut=function(n){var u,t,r,i;this.supportsTouchEvents&&n.pointerType==="touch"||(u=this.normalizeToPointerData(n),t=u[0],t.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null)),r=this.getInteractionDataForPointerId(t),i=this.configureInteractionEventForDOMEvent(this.eventData,t,r),i.data.originalEvent=t,this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),t.pointerType==="mouse"||t.pointerType==="pen"?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(r.identifier))},t.prototype.processPointerOverOut=function(n,t,i){var e=n.data,u=n.data.identifier,f=e.pointerType==="mouse"||e.pointerType==="pen",r=t.trackedPointers[u];(i&&!r&&(r=t.trackedPointers[u]=new o.default(u)),r!==undefined)&&(i&&this.mouseOverRenderer?(r.over||(r.over=!0,this.dispatchEvent(t,"pointerover",n),f&&this.dispatchEvent(t,"mouseover",n)),f&&this.cursor===null&&(this.cursor=t.cursor)):r.over&&(r.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),f&&this.dispatchEvent(t,"mouseout",n),r.none&&delete t.trackedPointers[u]))},t.prototype.onPointerOver=function(n){var r=this.normalizeToPointerData(n),t=r[0],u=this.getInteractionDataForPointerId(t),i=this.configureInteractionEventForDOMEvent(this.eventData,t,u);i.data.originalEvent=t;t.pointerType==="mouse"&&(this.mouseOverRenderer=!0);this.emit("pointerover",i);(t.pointerType==="mouse"||t.pointerType==="pen")&&this.emit("mouseover",i)},t.prototype.getInteractionDataForPointerId=function(n){var i=n.pointerId,t=void 0;return i===f||n.pointerType==="mouse"?t=this.mouse:this.activeInteractionData[i]?t=this.activeInteractionData[i]:(t=this.interactionDataPool.pop()||new h.default,t.identifier=i,this.activeInteractionData[i]=t),t._copyEvent(n),t},t.prototype.releaseInteractionDataForPointerId=function(n){var t=this.activeInteractionData[n];t&&(delete this.activeInteractionData[n],t._reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(n,t,i){return n.data=i,this.mapPositionToPoint(i.global,t.clientX,t.clientY),navigator.isCocoonJS&&t.pointerType==="touch"&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),t.pointerType==="touch"&&(t.globalX=i.global.x,t.globalY=i.global.y),i.originalEvent=t,n._reset(),n},t.prototype.normalizeToPointerData=function(n){var i=[],r,u,t;if(this.supportsTouchEvents&&n instanceof TouchEvent)for(r=0,u=n.changedTouches.length;r<u;r++)t=n.changedTouches[r],typeof t.button=="undefined"&&(t.button=n.touches.length?1:0),typeof t.buttons=="undefined"&&(t.buttons=n.touches.length?1:0),typeof t.isPrimary=="undefined"&&(t.isPrimary=n.touches.length===1&&n.type==="touchstart"),typeof t.width=="undefined"&&(t.width=t.radiusX||1),typeof t.height=="undefined"&&(t.height=t.radiusY||1),typeof t.tiltX=="undefined"&&(t.tiltX=0),typeof t.tiltY=="undefined"&&(t.tiltY=0),typeof t.pointerType=="undefined"&&(t.pointerType="touch"),typeof t.pointerId=="undefined"&&(t.pointerId=t.identifier||0),typeof t.pressure=="undefined"&&(t.pressure=t.force||.5),t.twist=0,t.tangentialPressure=0,typeof t.layerX=="undefined"&&(t.layerX=t.offsetX=t.clientX),typeof t.layerY=="undefined"&&(t.layerY=t.offsetY=t.clientY),t.isNormalized=!0,i.push(t);else!(n instanceof MouseEvent)||this.supportsPointerEvents&&n instanceof window.PointerEvent?i.push(n):(typeof n.isPrimary=="undefined"&&(n.isPrimary=!0),typeof n.width=="undefined"&&(n.width=1),typeof n.height=="undefined"&&(n.height=1),typeof n.tiltX=="undefined"&&(n.tiltX=0),typeof n.tiltY=="undefined"&&(n.tiltY=0),typeof n.pointerType=="undefined"&&(n.pointerType="mouse"),typeof n.pointerId=="undefined"&&(n.pointerId=f),typeof n.pressure=="undefined"&&(n.pressure=.5),n.twist=0,n.tangentialPressure=0,n.isNormalized=!0,i.push(n));return i},t.prototype.destroy=function(){this.removeEvents();this.removeAllListeners();this.renderer=null;this.mouse=null;this.eventData=null;this.interactionDOMElement=null;this.onPointerDown=null;this.processPointerDown=null;this.onPointerUp=null;this.processPointerUp=null;this.onPointerCancel=null;this.processPointerCancel=null;this.onPointerMove=null;this.processPointerMove=null;this.onPointerOut=null;this.processPointerOverOut=null;this.onPointerOver=null;this._tempPoint=null},t}(b.default);i.default=s;r.WebGLRenderer.registerPlugin("interaction",s);r.CanvasRenderer.registerPlugin("interaction",s)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(n,t,i){"use strict";function f(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u,r;i.__esModule=!0;u=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();r=function(){function n(t){f(this,n);this._pointerId=t;this._flags=n.FLAGS.NONE}return n.prototype._doSet=function(n,t){this._flags=t?this._flags|n:this._flags&~n},u(n,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(n){this._flags=n}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return(this._flags&this.constructor.FLAGS.OVER)!=0},set:function(n){this._doSet(this.constructor.FLAGS.OVER,n)}},{key:"rightDown",get:function(){return(this._flags&this.constructor.FLAGS.RIGHT_DOWN)!=0},set:function(n){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,n)}},{key:"leftDown",get:function(){return(this._flags&this.constructor.FLAGS.LEFT_DOWN)!=0},set:function(n){this._doSet(this.constructor.FLAGS.LEFT_DOWN,n)}}]),n}();i.default=r;r.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f,e,o,s;i.__esModule=!0;u=n("./InteractionData");Object.defineProperty(i,"InteractionData",{enumerable:!0,get:function(){return r(u).default}});f=n("./InteractionManager");Object.defineProperty(i,"InteractionManager",{enumerable:!0,get:function(){return r(f).default}});e=n("./interactiveTarget");Object.defineProperty(i,"interactiveTarget",{enumerable:!0,get:function(){return r(e).default}});o=n("./InteractionTrackingData");Object.defineProperty(i,"InteractionTrackingData",{enumerable:!0,get:function(){return r(o).default}});s=n("./InteractionEvent");Object.defineProperty(i,"InteractionEvent",{enumerable:!0,get:function(){return r(s).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(n,t,i){"use strict";i.__esModule=!0;i.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(n){n?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===undefined&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:undefined}},{}],161:[function(n,t,i){"use strict";function h(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function r(n,t){n.bitmapFont=s.BitmapText.registerFont(n.data,t)}i.__esModule=!0;i.parse=r;i.default=function(){return function(n,t){var i,e,s;if(!n.data||n.type!==f.Resource.TYPE.XML){t();return}if(n.data.getElementsByTagName("page").length===0||n.data.getElementsByTagName("info").length===0||n.data.getElementsByTagName("info")[0].getAttribute("face")===null){t();return}i=n.isDataUrl?"":o.dirname(n.url);n.isDataUrl&&(i==="."&&(i=""),this.baseUrl&&i&&this.baseUrl.charAt(this.baseUrl.length-1)==="/"&&(i+="/"));i=i.replace(this.baseUrl,"");i&&i.charAt(i.length-1)!=="/"&&(i+="/");e=i+n.data.getElementsByTagName("page")[0].getAttribute("file");u.utils.TextureCache[e]?(r(n,u.utils.TextureCache[e]),t()):(s={crossOrigin:n.crossOrigin,loadType:f.Resource.LOAD_TYPE.IMAGE,metadata:n.metadata.imageMetadata,parentResource:n},this.add(n.name+"_image",e,s,function(i){r(n,i.texture);t()}))}};var e=n("path"),o=h(e),u=n("../core"),f=n("resource-loader"),s=n("../extras")},{"../core":65,"../extras":141,path:23,"resource-loader":36}],162:[function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}var e,o,h,c,f,r;i.__esModule=!0;i.shared=i.Resource=i.textureParser=i.getResourcePath=i.spritesheetParser=i.parseBitmapFontData=i.bitmapFontParser=i.Loader=undefined;e=n("./bitmapFontParser");Object.defineProperty(i,"bitmapFontParser",{enumerable:!0,get:function(){return u(e).default}});Object.defineProperty(i,"parseBitmapFontData",{enumerable:!0,get:function(){return e.parse}});o=n("./spritesheetParser");Object.defineProperty(i,"spritesheetParser",{enumerable:!0,get:function(){return u(o).default}});Object.defineProperty(i,"getResourcePath",{enumerable:!0,get:function(){return o.getResourcePath}});h=n("./textureParser");Object.defineProperty(i,"textureParser",{enumerable:!0,get:function(){return u(h).default}});c=n("resource-loader");Object.defineProperty(i,"Resource",{enumerable:!0,get:function(){return c.Resource}});var l=n("../core/Application"),a=u(l),v=n("./loader"),s=u(v);i.Loader=s.default;f=new s.default;f.destroy=function(){};i.shared=f;r=a.default.prototype;r._loader=null;Object.defineProperty(r,"loader",{get:function(){if(!this._loader){var n=this._options.sharedLoader;this._loader=n?f:new s.default}return this._loader}});r._parentDestroy=r.destroy;r.destroy=function(n){this._loader&&(this._loader.destroy(),this._loader=null);this._parentDestroy(n)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function k(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function d(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function g(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u,e,o;i.__esModule=!0;var h=n("resource-loader"),s=r(h),c=n("resource-loader/lib/middlewares/parsing/blob"),l=n("eventemitter3"),f=r(l),a=n("./textureParser"),v=r(a),y=n("./spritesheetParser"),p=r(y),w=n("./bitmapFontParser"),b=r(w);u=function(n){function t(i,r){var u,e;for(k(this,t),u=d(this,n.call(this,i,r)),f.default.call(u),e=0;e<t._pixiMiddleware.length;++e)u.use(t._pixiMiddleware[e]());return u.onStart.add(function(n){return u.emit("start",n)}),u.onProgress.add(function(n,t){return u.emit("progress",n,t)}),u.onError.add(function(n,t,i){return u.emit("error",n,t,i)}),u.onLoad.add(function(n,t){return u.emit("load",n,t)}),u.onComplete.add(function(n,t){return u.emit("complete",n,t)}),u}return g(t,n),t.addPixiMiddleware=function(n){t._pixiMiddleware.push(n)},t.prototype.destroy=function(){this.removeAllListeners();this.reset()},t}(s.default);i.default=u;for(e in f.default.prototype)u.prototype[e]=f.default.prototype[e];u._pixiMiddleware=[c.blobMiddlewareFactory,v.default,p.default,b.default];o=s.default.Resource;o.setExtensionXhrType("fnt",o.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(n,t,i){"use strict";function s(n){return n&&n.__esModule?n:{"default":n}}function r(n,t){return n.isDataUrl?n.data.meta.image:e.default.resolve(n.url.replace(t,""),n.data.meta.image)}i.__esModule=!0;i.default=function(){return function(n,t){var i=n.name+"_image",f,e;if(!n.data||n.type!==u.Resource.TYPE.JSON||!n.data.frames||this.resources[i]){t();return}f={crossOrigin:n.crossOrigin,metadata:n.metadata.imageMetadata,parentResource:n};e=r(n,this.baseUrl);this.add(i,e,f,function(i){if(i.error){t(i.error);return}var r=new o.Spritesheet(i.texture.baseTexture,n.data,n.url);r.parse(function(){n.spritesheet=r;n.textures=r.textures;t()})})}};i.getResourcePath=r;var u=n("resource-loader"),f=n("url"),e=s(f),o=n("../core")},{"../core":65,"resource-loader":36,url:29}],165:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}i.__esModule=!0;i.default=function(){return function(n,t){n.data&&n.type===r.Resource.TYPE.IMAGE&&(n.texture=f.default.fromLoader(n.data,n.url,n.name));t()}};var r=n("resource-loader"),u=n("../core/textures/Texture"),f=e(u)},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(n,t,i){"use strict";function l(n){return n&&n.__esModule?n:{"default":n}}function a(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function v(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function y(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function p(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}i.__esModule=!0;var o=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),s=n("../core"),r=a(s),h=n("../core/textures/Texture"),c=l(h);var u=new r.Point,f=new r.Polygon,e=function(n){function t(i,u,f,e,o){v(this,t);var s=y(this,n.call(this));return s._texture=i||c.default.EMPTY,s.uvs=f||new Float32Array([0,0,1,0,1,1,0,1]),s.vertices=u||new Float32Array([0,0,100,0,100,100,0,100]),s.indices=e||new Uint16Array([0,1,3,2]),s.dirty=0,s.indexDirty=0,s.blendMode=r.BLEND_MODES.NORMAL,s.canvasPadding=r.settings.MESH_CANVAS_PADDING,s.drawMode=o||t.DRAW_MODES.TRIANGLE_MESH,s.shader=null,s.tintRgb=new Float32Array([1,1,1]),s._glDatas={},s._uvTransform=new r.TextureMatrix(s._texture),s.uploadUvTransform=!1,s.pluginName="mesh",s}return p(t,n),t.prototype._renderWebGL=function(n){this.refresh();n.setObjectRenderer(n.plugins[this.pluginName]);n.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(n){this.refresh();n.plugins[this.pluginName].render(this)},t.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture;this.refresh()},t.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},t.prototype.refresh=function(n){this._uvTransform.update(n)&&this._refresh()},t.prototype._refresh=function(){},t.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},t.prototype.containsPoint=function(n){var e;if(!this.getBounds().contains(n.x,n.y))return!1;this.worldTransform.applyInverse(n,u);var i=this.vertices,r=f.points,o=this.indices,l=this.indices.length,a=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1;for(e=0;e+2<l;e+=a){var s=o[e]*2,h=o[e+1]*2,c=o[e+2]*2;if(r[0]=i[s],r[1]=i[s+1],r[2]=i[h],r[3]=i[h+1],r[4]=i[c],r[5]=i[c+1],f.contains(u.x,u.y))return!0}return!1},o(t,[{key:"texture",get:function(){return this._texture},set:function(n){if(this._texture!==n&&(this._texture=n,n))if(n.baseTexture.hasLoaded)this._onTextureUpdate();else n.once("update",this._onTextureUpdate,this)}},{key:"tint",get:function(){return r.utils.rgb2hex(this.tintRgb)},set:function(n){this.tintRgb=r.utils.hex2rgb(n,this.tintRgb)}}]),t}(r.Container);i.default=e;e.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../core/textures/Texture":115}],167:[function(n,t,i){"use strict";function s(n){return n&&n.__esModule?n:{"default":n}}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function c(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function l(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r,u;i.__esModule=!0;var f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),e=n("./Plane"),o=s(e);r=10;u=function(n){function t(i,u,f,e,o){h(this,t);var s=c(this,n.call(this,i,4,4));return s._origWidth=i.orig.width,s._origHeight=i.orig.height,s._width=s._origWidth,s._height=s._origHeight,s.leftWidth=typeof u!="undefined"?u:r,s.rightWidth=typeof e!="undefined"?e:r,s.topHeight=typeof f!="undefined"?f:r,s.bottomHeight=typeof o!="undefined"?o:r,s.refresh(!0),s}return l(t,n),t.prototype.updateHorizontalVertices=function(){var n=this.vertices;n[9]=n[11]=n[13]=n[15]=this._topHeight;n[17]=n[19]=n[21]=n[23]=this._height-this._bottomHeight;n[25]=n[27]=n[29]=n[31]=this._height},t.prototype.updateVerticalVertices=function(){var n=this.vertices;n[2]=n[10]=n[18]=n[26]=this._leftWidth;n[4]=n[12]=n[20]=n[28]=this._width-this._rightWidth;n[6]=n[14]=n[22]=n[30]=this._width},t.prototype._renderCanvas=function(n){var r=n.context,t,i;r.globalAlpha=this.worldAlpha;n.setBlendMode(this.blendMode);t=this.worldTransform;i=n.resolution;n.roundPixels?r.setTransform(t.a*i,t.b*i,t.c*i,t.d*i,t.tx*i|0,t.ty*i|0):r.setTransform(t.a*i,t.b*i,t.c*i,t.d*i,t.tx*i,t.ty*i);var o=this._texture.baseTexture,u=o.source,f=o.width*o.resolution,e=o.height*o.resolution;this.drawSegment(r,u,f,e,0,1,10,11);this.drawSegment(r,u,f,e,2,3,12,13);this.drawSegment(r,u,f,e,4,5,14,15);this.drawSegment(r,u,f,e,8,9,18,19);this.drawSegment(r,u,f,e,10,11,20,21);this.drawSegment(r,u,f,e,12,13,22,23);this.drawSegment(r,u,f,e,16,17,26,27);this.drawSegment(r,u,f,e,18,19,28,29);this.drawSegment(r,u,f,e,20,21,30,31)},t.prototype.drawSegment=function(n,t,i,r,u,f,e,o){var s=this.uvs,h=this.vertices,c=(s[e]-s[u])*i,l=(s[o]-s[f])*r,a=h[e]-h[u],v=h[o]-h[f];c<1&&(c=1);l<1&&(l=1);a<1&&(a=1);v<1&&(v=1);n.drawImage(t,s[u]*i,s[f]*r,c,l,h[u],h[f],a,v)},t.prototype._refresh=function(){var t,i,r,u;n.prototype._refresh.call(this);t=this.uvs;i=this._texture;this._origWidth=i.orig.width;this._origHeight=i.orig.height;r=1/this._origWidth;u=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0;t[1]=t[3]=t[5]=t[7]=0;t[6]=t[14]=t[22]=t[30]=1;t[25]=t[27]=t[29]=t[31]=1;t[2]=t[10]=t[18]=t[26]=r*this._leftWidth;t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth;t[9]=t[11]=t[13]=t[15]=u*this._topHeight;t[17]=t[19]=t[21]=t[23]=1-u*this._bottomHeight;this.updateHorizontalVertices();this.updateVerticalVertices();this.dirty++;this.multiplyUvs()},f(t,[{key:"width",get:function(){return this._width},set:function(n){this._width=n;this._refresh()}},{key:"height",get:function(){return this._height},set:function(n){this._height=n;this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(n){this._leftWidth=n;this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(n){this._rightWidth=n;this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(n){this._topHeight=n;this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(n){this._bottomHeight=n;this._refresh()}}]),t}(o.default);i.default=u},{"./Plane":168}],168:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function h(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u,r,f;i.__esModule=!0;u=n("./Mesh");r=e(u);f=function(n){function t(i,u,f){o(this,t);var e=s(this,n.call(this,i));return e._ready=!0,e.verticesX=u||10,e.verticesY=f||10,e.drawMode=r.default.DRAW_MODES.TRIANGLES,e.refresh(),e}return h(t,n),t.prototype._refresh=function(){for(var o,s,a,t,h=this._texture,p=this.verticesX*this.verticesY,c=[],l=[],f=[],n=this.verticesX-1,e=this.verticesY-1,w=h.width/n,b=h.height/e,i=0;i<p;i++)o=i%this.verticesX,s=i/this.verticesX|0,c.push(o*w,s*b),l.push(o/n,s/e);for(a=n*e,t=0;t<a;t++){var r=t%n,u=t/n|0,k=u*this.verticesX+r,v=u*this.verticesX+r+1,y=(u+1)*this.verticesX+r,d=(u+1)*this.verticesX+r+1;f.push(k,v,y);f.push(v,d,y)}this.vertices=new Float32Array(c);this.uvs=new Float32Array(l);this.colors=new Float32Array([]);this.indices=new Uint16Array(f);this.dirty++;this.indexDirty++;this.multiplyUvs()},t.prototype._onTextureUpdate=function(){r.default.prototype._onTextureUpdate.call(this);this._ready&&this.refresh()},t}(r.default);i.default=f},{"./Mesh":166}],169:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function h(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r,u,f;i.__esModule=!0;r=n("./Mesh");u=e(r);f=function(n){function t(i,r){o(this,t);var u=s(this,n.call(this,i));return u.points=r,u.vertices=new Float32Array(r.length*4),u.uvs=new Float32Array(r.length*4),u.colors=new Float32Array(r.length*2),u.indices=new Uint16Array(r.length*2),u.autoUpdate=!0,u.refresh(),u}return h(t,n),t.prototype._refresh=function(){var i=this.points,e,r,n,o;if(!(i.length<1)&&this._texture._uvs){this.vertices.length/4!==i.length&&(this.vertices=new Float32Array(i.length*4),this.uvs=new Float32Array(i.length*4),this.colors=new Float32Array(i.length*2),this.indices=new Uint16Array(i.length*2));var t=this.uvs,u=this.indices,f=this.colors;for(t[0]=0,t[1]=0,t[2]=0,t[3]=1,f[0]=1,f[1]=1,u[0]=0,u[1]=1,e=i.length,r=1;r<e;r++)n=r*4,o=r/(e-1),t[n]=o,t[n+1]=0,t[n+2]=o,t[n+3]=1,n=r*2,f[n]=1,f[n+1]=1,n=r*2,u[n]=n,u[n+1]=n+1;this.dirty++;this.indexDirty++;this.multiplyUvs();this.refreshVertices()}},t.prototype.refreshVertices=function(){var u=this.points,n,r,f,h,c,l;if(!(u.length<1)){var o=u[0],s=void 0,t=0,i=0,e=this.vertices,a=u.length;for(n=0;n<a;n++)r=u[n],f=n*4,s=n<u.length-1?u[n+1]:r,i=-(s.x-o.x),t=s.y-o.y,h=(1-n/(a-1))*10,h>1&&(h=1),c=Math.sqrt(t*t+i*i),l=this._texture.height/2,t/=c,i/=c,t*=l,i*=l,e[f]=r.x+t,e[f+1]=r.y+i,e[f+2]=r.x-t,e[f+3]=r.y-i,o=r}},t.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices();this.containerUpdateTransform()},t}(u.default);i.default=f},{"./Mesh":166}],170:[function(n,t,i){"use strict";function s(n){return n&&n.__esModule?n:{"default":n}}function h(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function c(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var r;i.__esModule=!0;var u=n("../../core"),f=h(u),e=n("../Mesh"),o=s(e);r=function(){function n(t){c(this,n);this.renderer=t}return n.prototype.render=function(n){var r=this.renderer,u=r.context,t=n.worldTransform,i=r.resolution;r.roundPixels?u.setTransform(t.a*i,t.b*i,t.c*i,t.d*i,t.tx*i|0,t.ty*i|0):u.setTransform(t.a*i,t.b*i,t.c*i,t.d*i,t.tx*i,t.ty*i);r.context.globalAlpha=n.worldAlpha;r.setBlendMode(n.blendMode);n.drawMode===o.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(n):this._renderTriangles(n)},n.prototype._renderTriangleMesh=function(n){for(var t,r=n.vertices.length/2,i=0;i<r-2;i++)t=i*2,this._renderDrawTriangle(n,t,t+2,t+4)},n.prototype._renderTriangles=function(n){for(var i=n.indices,r=i.length,t=0;t<r;t+=3){var u=i[t]*2,f=i[t+1]*2,e=i[t+2]*2;this._renderDrawTriangle(n,u,f,e)}},n.prototype._renderDrawTriangle=function(n,t,i,r){var w=this.renderer.context,f=n.uvs,it=n.vertices,ht=n._texture,u;if(ht.valid){var e=ht.baseTexture,at=e.source,ct=e.width,lt=e.height,s=void 0,h=void 0,c=void 0,l=void 0,a=void 0,v=void 0;n.uploadUvTransform?(u=n._uvTransform.mapCoord,s=(f[t]*u.a+f[t+1]*u.c+u.tx)*e.width,h=(f[i]*u.a+f[i+1]*u.c+u.tx)*e.width,c=(f[r]*u.a+f[r+1]*u.c+u.tx)*e.width,l=(f[t]*u.b+f[t+1]*u.d+u.ty)*e.height,a=(f[i]*u.b+f[i+1]*u.d+u.ty)*e.height,v=(f[r]*u.b+f[r+1]*u.d+u.ty)*e.height):(s=f[t]*e.width,h=f[i]*e.width,c=f[r]*e.width,l=f[t+1]*e.height,a=f[i+1]*e.height,v=f[r+1]*e.height);var b=it[t],k=it[i],d=it[r],g=it[t+1],nt=it[i+1],tt=it[r+1],et=n.canvasPadding/this.renderer.resolution;if(et>0){var ot=et/Math.abs(n.worldTransform.a),st=et/Math.abs(n.worldTransform.d),rt=(b+k+d)/3,ut=(g+nt+tt)/3,y=b-rt,p=g-ut,o=Math.sqrt(y*y+p*p);b=rt+y/o*(o+ot);g=ut+p/o*(o+st);y=k-rt;p=nt-ut;o=Math.sqrt(y*y+p*p);k=rt+y/o*(o+ot);nt=ut+p/o*(o+st);y=d-rt;p=tt-ut;o=Math.sqrt(y*y+p*p);d=rt+y/o*(o+ot);tt=ut+p/o*(o+st)}w.save();w.beginPath();w.moveTo(b,g);w.lineTo(k,nt);w.lineTo(d,tt);w.closePath();w.clip();var ft=s*a+l*c+h*v-a*c-l*h-s*v,vt=b*a+l*d+k*v-a*d-l*k-b*v,yt=s*k+b*c+h*d-k*c-b*h-s*d,pt=s*a*d+l*k*c+b*h*v-b*a*c-l*h*d-s*k*v,wt=g*a+l*tt+nt*v-a*tt-l*nt-g*v,bt=s*nt+g*c+h*tt-nt*c-g*h-s*tt,kt=s*a*tt+l*nt*c+g*h*v-g*a*c-l*h*tt-s*nt*v;w.transform(vt/ft,wt/ft,yt/ft,bt/ft,pt/ft,kt/ft);w.drawImage(at,0,0,ct*e.resolution,lt*e.resolution,0,0,ct,lt);w.restore();this.renderer.invalidateBlendMode()}},n.prototype.renderMeshFlat=function(n){var t=this.renderer.context,i=n.vertices,f=i.length/2,u;for(t.beginPath(),u=1;u<f-2;++u){var r=u*2,e=i[r],o=i[r+1],s=i[r+2],h=i[r+3],c=i[r+4],l=i[r+5];t.moveTo(e,o);t.lineTo(s,h);t.lineTo(c,l)}t.fillStyle="#FF0000";t.fill();t.closePath()},n.prototype.destroy=function(){this.renderer=null},n}();i.default=r;f.CanvasRenderer.registerPlugin("mesh",r)},{"../../core":65,"../Mesh":166}],171:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f,e,o,s,h;i.__esModule=!0;u=n("./Mesh");Object.defineProperty(i,"Mesh",{enumerable:!0,get:function(){return r(u).default}});f=n("./webgl/MeshRenderer");Object.defineProperty(i,"MeshRenderer",{enumerable:!0,get:function(){return r(f).default}});e=n("./canvas/CanvasMeshRenderer");Object.defineProperty(i,"CanvasMeshRenderer",{enumerable:!0,get:function(){return r(e).default}});o=n("./Plane");Object.defineProperty(i,"Plane",{enumerable:!0,get:function(){return r(o).default}});s=n("./NineSlicePlane");Object.defineProperty(i,"NineSlicePlane",{enumerable:!0,get:function(){return r(s).default}});h=n("./Rope");Object.defineProperty(i,"Rope",{enumerable:!0,get:function(){return r(h).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function a(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function v(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function y(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function p(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var o,f;i.__esModule=!0;var s=n("../../core"),r=a(s),h=n("pixi-gl-core"),u=e(h),c=n("../Mesh"),l=e(c),w=n("path");o=r.Matrix.IDENTITY;f=function(n){function t(i){v(this,t);var r=y(this,n.call(this,i));return r.shader=null,r}return p(t,n),t.prototype.onContextChange=function(){var n=this.renderer.gl;this.shader=new r.Shader(n,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},t.prototype.render=function(n){var f=this.renderer,i=f.gl,e=n._texture,t,s;e.valid&&(t=n._glDatas[f.CONTEXT_UID],t||(f.bindVao(null),t={shader:this.shader,vertexBuffer:u.default.GLBuffer.createVertexBuffer(i,n.vertices,i.STREAM_DRAW),uvBuffer:u.default.GLBuffer.createVertexBuffer(i,n.uvs,i.STREAM_DRAW),indexBuffer:u.default.GLBuffer.createIndexBuffer(i,n.indices,i.STATIC_DRAW),vao:null,dirty:n.dirty,indexDirty:n.indexDirty},t.vao=new u.default.VertexArrayObject(i).addIndex(t.indexBuffer).addAttribute(t.vertexBuffer,t.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(t.uvBuffer,t.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),n._glDatas[f.CONTEXT_UID]=t),f.bindVao(t.vao),n.dirty!==t.dirty&&(t.dirty=n.dirty,t.uvBuffer.upload(n.uvs)),n.indexDirty!==t.indexDirty&&(t.indexDirty=n.indexDirty,t.indexBuffer.upload(n.indices)),t.vertexBuffer.upload(n.vertices),f.bindShader(t.shader),t.shader.uniforms.uSampler=f.bindTexture(e),f.state.setBlendMode(r.utils.correctBlendMode(n.blendMode,e.baseTexture.premultipliedAlpha)),t.shader.uniforms.uTransform&&(t.shader.uniforms.uTransform=n.uploadUvTransform?n._uvTransform.mapCoord.toArray(!0):o.toArray(!0)),t.shader.uniforms.translationMatrix=n.worldTransform.toArray(!0),t.shader.uniforms.uColor=r.utils.premultiplyRgba(n.tintRgb,n.worldAlpha,t.shader.uniforms.uColor,e.baseTexture.premultipliedAlpha),s=n.drawMode===l.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES,t.vao.draw(s,n.indices.length,0))},t}(r.ObjectRenderer);i.default=f;r.WebGLRenderer.registerPlugin("mesh",f)},{"../../core":65,"../Mesh":166,path:23,"pixi-gl-core":12}],173:[function(n,t,i){"use strict";function s(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function c(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function l(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u;i.__esModule=!0;var f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),e=n("../core"),r=s(e),o=n("../core/utils");u=function(n){function t(){var f=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1500,o=arguments[1],u=arguments.length>2&&arguments[2]!==undefined?arguments[2]:16384,s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1,i,e;return h(this,t),i=c(this,n.call(this)),e=16384,u>e&&(u=e),u>f&&(u=f),i._properties=[!1,!0,!1,!1,!1],i._maxSize=f,i._batchSize=u,i._glBuffers={},i._bufferToUpdate=0,i.interactiveChildren=!1,i.blendMode=r.BLEND_MODES.NORMAL,i.autoResize=s,i.roundPixels=!0,i.baseTexture=null,i.setProperties(o),i._tint=0,i.tintRgb=new Float32Array(4),i.tint=16777215,i}return l(t,n),t.prototype.setProperties=function(n){n&&(this._properties[0]="vertices"in n||"scale"in n?!!n.vertices||!!n.scale:this._properties[0],this._properties[1]="position"in n?!!n.position:this._properties[1],this._properties[2]="rotation"in n?!!n.rotation:this._properties[2],this._properties[3]="uvs"in n?!!n.uvs:this._properties[3],this._properties[4]="tint"in n||"alpha"in n?!!n.tint||!!n.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.prototype.renderWebGL=function(n){var t=this;if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){if(!this.baseTexture&&(this.baseTexture=this.children[0]._texture.baseTexture,!this.baseTexture.hasLoaded))this.baseTexture.once("update",function(){return t.onChildrenChange(0)});n.setObjectRenderer(n.plugins.particle);n.plugins.particle.render(this)}},t.prototype.onChildrenChange=function(n){var t=Math.floor(n/this._batchSize);t<this._bufferToUpdate&&(this._bufferToUpdate=t)},t.prototype.renderCanvas=function(n){var s,t,i,r,e;if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var u=n.context,f=this.worldTransform,o=!0,h=0,c=0,l=0,a=0;for(n.setBlendMode(this.blendMode),u.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform(),s=0;s<this.children.length;++s)(t=this.children[s],t.visible)&&(i=t._texture.frame,u.globalAlpha=this.worldAlpha*t.alpha,t.rotation%(Math.PI*2)==0?(o&&(u.setTransform(f.a,f.b,f.c,f.d,f.tx*n.resolution,f.ty*n.resolution),o=!1),h=t.anchor.x*-i.width*t.scale.x+t.position.x+.5,c=t.anchor.y*-i.height*t.scale.y+t.position.y+.5,l=i.width*t.scale.x,a=i.height*t.scale.y):(o||(o=!0),t.displayObjectUpdateTransform(),r=t.worldTransform,n.roundPixels?u.setTransform(r.a,r.b,r.c,r.d,r.tx*n.resolution|0,r.ty*n.resolution|0):u.setTransform(r.a,r.b,r.c,r.d,r.tx*n.resolution,r.ty*n.resolution),h=t.anchor.x*-i.width+.5,c=t.anchor.y*-i.height+.5,l=i.width,a=i.height),e=t._texture.baseTexture.resolution,u.drawImage(t._texture.baseTexture.source,i.x*e,i.y*e,i.width*e,i.height*e,h*n.resolution,c*n.resolution,l*n.resolution,a*n.resolution))}},t.prototype.destroy=function(t){if(n.prototype.destroy.call(this,t),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null;this._buffers=null},f(t,[{key:"tint",get:function(){return this._tint},set:function(n){this._tint=n;o.hex2rgb(n,this.tintRgb)}}]),t}(r.Container);i.default=u},{"../core":65,"../core/utils":125}],174:[function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}var r,u;i.__esModule=!0;r=n("./ParticleContainer");Object.defineProperty(i,"ParticleContainer",{enumerable:!0,get:function(){return f(r).default}});u=n("./webgl/ParticleRenderer");Object.defineProperty(i,"ParticleRenderer",{enumerable:!0,get:function(){return f(u).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(n,t,i){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var f;i.__esModule=!0;var e=n("pixi-gl-core"),r=u(e),o=n("../../core/utils/createIndicesForQuads"),s=u(o);f=function(){function n(t,i,r,u){var e,f;for(h(this,n),this.gl=t,this.size=u,this.dynamicProperties=[],this.staticProperties=[],e=0;e<i.length;++e)f=i[e],f={attribute:f.attribute,size:f.size,uploadFunction:f.uploadFunction,unsignedByte:f.unsignedByte,offset:f.offset},r[e]?this.dynamicProperties.push(f):this.staticProperties.push(f);this.staticStride=0;this.staticBuffer=null;this.staticData=null;this.staticDataUint32=null;this.dynamicStride=0;this.dynamicBuffer=null;this.dynamicData=null;this.dynamicDataUint32=null;this.initBuffers()}return n.prototype.initBuffers=function(){var n=this.gl,y=0,u,f,e,v,o,h,c,l,t,a,i;for(this.indices=s.default(this.size),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(n,this.indices,n.STATIC_DRAW),this.dynamicStride=0,u=0;u<this.dynamicProperties.length;++u)f=this.dynamicProperties[u],f.offset=y,y+=f.size,this.dynamicStride+=f.size;for(e=new ArrayBuffer(this.size*this.dynamicStride*16),this.dynamicData=new Float32Array(e),this.dynamicDataUint32=new Uint32Array(e),this.dynamicBuffer=r.default.GLBuffer.createVertexBuffer(n,e,n.STREAM_DRAW),v=0,this.staticStride=0,o=0;o<this.staticProperties.length;++o)h=this.staticProperties[o],h.offset=v,v+=h.size,this.staticStride+=h.size;for(c=new ArrayBuffer(this.size*this.staticStride*16),this.staticData=new Float32Array(c),this.staticDataUint32=new Uint32Array(c),this.staticBuffer=r.default.GLBuffer.createVertexBuffer(n,c,n.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(n).addIndex(this.indexBuffer),l=0;l<this.dynamicProperties.length;++l)t=this.dynamicProperties[l],t.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,t.attribute,n.UNSIGNED_BYTE,!0,this.dynamicStride*4,t.offset*4):this.vao.addAttribute(this.dynamicBuffer,t.attribute,n.FLOAT,!1,this.dynamicStride*4,t.offset*4);for(a=0;a<this.staticProperties.length;++a)i=this.staticProperties[a],i.unsignedByte?this.vao.addAttribute(this.staticBuffer,i.attribute,n.UNSIGNED_BYTE,!0,this.staticStride*4,i.offset*4):this.vao.addAttribute(this.staticBuffer,i.attribute,n.FLOAT,!1,this.staticStride*4,i.offset*4)},n.prototype.uploadDynamic=function(n,t,i){for(var u,r=0;r<this.dynamicProperties.length;r++)u=this.dynamicProperties[r],u.uploadFunction(n,t,i,u.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,u.offset);this.dynamicBuffer.upload()},n.prototype.uploadStatic=function(n,t,i){for(var u,r=0;r<this.staticProperties.length;r++)u=this.staticProperties[r],u.uploadFunction(n,t,i,u.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,u.offset);this.staticBuffer.upload()},n.prototype.destroy=function(){this.dynamicProperties=null;this.dynamicBuffer.destroy();this.dynamicBuffer=null;this.dynamicData=null;this.dynamicDataUint32=null;this.staticProperties=null;this.staticBuffer.destroy();this.staticBuffer=null;this.staticData=null;this.staticDataUint32=null},n}();i.default=f},{"../../core/utils/createIndicesForQuads":123,"pixi-gl-core":12}],176:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function a(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function v(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function y(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function p(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var u;i.__esModule=!0;var o=n("../../core"),r=a(o),s=n("./ParticleShader"),h=e(s),c=n("./ParticleBuffer"),f=e(c),l=n("../../core/utils");u=function(n){function t(i){v(this,t);var u=y(this,n.call(this,i));return u.shader=null,u.indexBuffer=null,u.properties=null,u.tempMatrix=new r.Matrix,u.CONTEXT_UID=0,u}return p(t,n),t.prototype.onContextChange=function(){var n=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID;this.shader=new h.default(n);this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},t.prototype.start=function(){this.renderer.bindShader(this.shader)},t.prototype.render=function(n){var h=n.children,v=n._maxSize,l=n._batchSize,t=this.renderer,o=h.length,i,c,y,a,u,f,e,s;if(o!==0)for(o>v&&(o=v),i=n._glBuffers[t.CONTEXT_UID],i||(i=n._glBuffers[t.CONTEXT_UID]=this.generateBuffers(n)),c=h[0]._texture.baseTexture,this.renderer.setBlendMode(r.utils.correctBlendMode(n.blendMode,c.premultipliedAlpha)),y=t.gl,a=n.worldTransform.copy(this.tempMatrix),a.prepend(t._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=a.toArray(!0),this.shader.uniforms.uColor=r.utils.premultiplyRgba(n.tintRgb,n.worldAlpha,this.shader.uniforms.uColor,c.premultipliedAlpha),this.shader.uniforms.uSampler=t.bindTexture(c),u=0,f=0;u<o;u+=l,f+=1){if(e=o-u,e>l&&(e=l),f>=i.length){if(!n.autoResize)break;i.push(this._generateOneMoreBuffer(n))}s=i[f];s.uploadDynamic(h,u,e);n._bufferToUpdate===f&&(s.uploadStatic(h,u,e),n._bufferToUpdate=f+1);t.bindVao(s.vao);s.vao.draw(y.TRIANGLES,e*6)}},t.prototype.generateBuffers=function(n){for(var u=this.renderer.gl,t=[],e=n._maxSize,i=n._batchSize,o=n._properties,r=0;r<e;r+=i)t.push(new f.default(u,this.properties,o,i));return t},t.prototype._generateOneMoreBuffer=function(n){var t=this.renderer.gl,i=n._batchSize,r=n._properties;return new f.default(t,this.properties,r,i)},t.prototype.uploadVertices=function(n,t,i,r,u,f){for(var l=0,s=0,a=0,h=0,p=0;p<i;++p){var e=n[t+p],w=e._texture,v=e.scale.x,y=e.scale.y,c=w.trim,o=w.orig;c?(s=c.x-e.anchor.x*o.width,l=s+c.width,h=c.y-e.anchor.y*o.height,a=h+c.height):(l=o.width*(1-e.anchor.x),s=o.width*-e.anchor.x,a=o.height*(1-e.anchor.y),h=o.height*-e.anchor.y);r[f]=s*v;r[f+1]=h*y;r[f+u]=l*v;r[f+u+1]=h*y;r[f+u*2]=l*v;r[f+u*2+1]=a*y;r[f+u*3]=s*v;r[f+u*3+1]=a*y;f+=u*4}},t.prototype.uploadPosition=function(n,t,i,r,u,f){for(var e,o=0;o<i;o++)e=n[t+o].position,r[f]=e.x,r[f+1]=e.y,r[f+u]=e.x,r[f+u+1]=e.y,r[f+u*2]=e.x,r[f+u*2+1]=e.y,r[f+u*3]=e.x,r[f+u*3+1]=e.y,f+=u*4},t.prototype.uploadRotation=function(n,t,i,r,u,f){for(var e,o=0;o<i;o++)e=n[t+o].rotation,r[f]=e,r[f+u]=e,r[f+u*2]=e,r[f+u*3]=e,f+=u*4},t.prototype.uploadUvs=function(n,t,i,r,u,f){for(var e,o=0;o<i;++o)e=n[t+o]._texture._uvs,e?(r[f]=e.x0,r[f+1]=e.y0,r[f+u]=e.x1,r[f+u+1]=e.y1,r[f+u*2]=e.x2,r[f+u*2+1]=e.y2,r[f+u*3]=e.x3,r[f+u*3+1]=e.y3,f+=u*4):(r[f]=0,r[f+1]=0,r[f+u]=0,r[f+u+1]=0,r[f+u*2]=0,r[f+u*2+1]=0,r[f+u*3]=0,r[f+u*3+1]=0,f+=u*4)},t.prototype.uploadTint=function(n,t,i,r,u,f){for(var e=0;e<i;++e){var o=n[t+e],c=o._texture.baseTexture.premultipliedAlpha,h=o.alpha,s=h<1&&c?l.premultiplyTint(o._tintRGB,h):o._tintRGB+(h*255<<24);r[f]=s;r[f+u]=s;r[f+u*2]=s;r[f+u*3]=s;f+=u*4}},t.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer);n.prototype.destroy.call(this);this.shader.destroy();this.indices=null;this.tempMatrix=null},t}(r.ObjectRenderer);i.default=u;r.WebGLRenderer.registerPlugin("particle",u)},{"../../core":65,"../../core/utils":125,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{"default":n}}function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function s(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function h(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r,u,f;i.__esModule=!0;r=n("../../core/Shader");u=e(r);f=function(n){function t(i){return o(this,t),s(this,n.call(this,i,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute vec2 aPositionCoord;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nuniform vec4 uColor;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void){\n   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   vec2 v = vec2(x, y);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor * uColor;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n  gl_FragColor = color;\n}"))}return h(t,n),t}(u.default);i.default=f},{"../../core/Shader":44}],178:[function(){"use strict";Math.sign||(Math.sign=function(n){return(n=Number(n),n===0||isNaN(n))?n:n>0?1:-1})},{}],179:[function(n){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var t=n("object-assign"),i=r(t);Object.assign||(Object.assign=i.default)},{"object-assign":5}],180:[function(n){"use strict";n("./Object.assign");n("./requestAnimationFrame");n("./Math.sign");window.ArrayBuffer||(window.ArrayBuffer=Array);window.Float32Array||(window.Float32Array=Array);window.Uint32Array||(window.Uint32Array=Array);window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Object.assign":179,"./requestAnimationFrame":181}],181:[function(){(function(n){"use strict";var e=16,f,t,u,i,r;for(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),n.performance&&n.performance.now||(f=Date.now(),n.performance||(n.performance={}),n.performance.now=function(){return Date.now()-f}),t=Date.now(),u=["ms","moz","webkit","o"],i=0;i<u.length&&!n.requestAnimationFrame;++i)r=u[i],n.requestAnimationFrame=n[r+"RequestAnimationFrame"],n.cancelAnimationFrame=n[r+"CancelAnimationFrame"]||n[r+"CancelRequestAnimationFrame"];n.requestAnimationFrame||(n.requestAnimationFrame=function(n){if(typeof n!="function")throw new TypeError(n+"is not a function");var r=Date.now(),i=e+t-r;return i<0&&(i=0),t=r,setTimeout(function(){t=Date.now();n(performance.now())},i)});n.cancelAnimationFrame||(n.cancelAnimationFrame=function(n){return clearTimeout(n)})}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],182:[function(n,t,i){"use strict";function h(n){return n&&n.__esModule?n:{"default":n}}function c(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function l(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function a(n,t){var f=!1,i,u;if(n&&n._textures&&n._textures.length)for(i=0;i<n._textures.length;i++)n._textures[i]instanceof r.Texture&&(u=n._textures[i].baseTexture,t.indexOf(u)===-1&&(t.push(u),f=!0));return f}function v(n,t){return n instanceof r.BaseTexture?(t.indexOf(n)===-1&&t.push(n),!0):!1}function y(n,t){if(n._texture&&n._texture instanceof r.Texture){var i=n._texture.baseTexture;return t.indexOf(i)===-1&&t.push(i),!0}return!1}function p(n,t){return t instanceof r.Text?(t.updateText(!0),!0):!1}function w(n,t){if(t instanceof r.TextStyle){var i=t.toFontString();return r.TextMetrics.measureFont(i),!0}return!1}function b(n,t){if(n instanceof r.Text){t.indexOf(n.style)===-1&&t.push(n.style);t.indexOf(n)===-1&&t.push(n);var i=n._texture.baseTexture;return t.indexOf(i)===-1&&t.push(i),!0}return!1}function k(n,t){return n instanceof r.TextStyle?(t.indexOf(n)===-1&&t.push(n),!0):!1}var u,f;i.__esModule=!0;var e=n("../core"),r=c(e),o=n("./limiters/CountLimiter"),s=h(o);u=r.ticker.shared;r.settings.UPLOADS_PER_FRAME=4;f=function(){function n(t){var i=this;l(this,n);this.limiter=new s.default(r.settings.UPLOADS_PER_FRAME);this.renderer=t;this.uploadHookHelper=null;this.queue=[];this.addHooks=[];this.uploadHooks=[];this.completes=[];this.ticking=!1;this.delayedTick=function(){i.queue&&i.prepareItems()};this.registerFindHook(b);this.registerFindHook(k);this.registerFindHook(a);this.registerFindHook(v);this.registerFindHook(y);this.registerUploadHook(p);this.registerUploadHook(w)}return n.prototype.upload=function(n,t){typeof n=="function"&&(t=n,n=null);n&&this.add(n);this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,u.addOnce(this.tick,this,r.UPDATE_PRIORITY.UTILITY))):t&&t()},n.prototype.tick=function(){setTimeout(this.delayedTick,0)},n.prototype.prepareItems=function(){var n,f,t,o,e,i,s;for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){if(n=this.queue[0],f=!1,n&&!n._destroyed)for(t=0,o=this.uploadHooks.length;t<o;t++)if(this.uploadHooks[t](this.uploadHookHelper,n)){this.queue.shift();f=!0;break}f||this.queue.shift()}if(this.queue.length)u.addOnce(this.tick,this,r.UPDATE_PRIORITY.UTILITY);else for(this.ticking=!1,e=this.completes.slice(0),this.completes.length=0,i=0,s=e.length;i<s;i++)e[i]()},n.prototype.registerFindHook=function(n){return n&&this.addHooks.push(n),this},n.prototype.registerUploadHook=function(n){return n&&this.uploadHooks.push(n),this},n.prototype.add=function(n){for(var i,t=0,u=this.addHooks.length;t<u;t++)if(this.addHooks[t](n,this.queue))break;if(n instanceof r.Container)for(i=n.children.length-1;i>=0;i--)this.add(n.children[i]);return this},n.prototype.destroy=function(){this.ticking&&u.remove(this.tick,this);this.ticking=!1;this.addHooks=null;this.uploadHooks=null;this.renderer=null;this.completes=null;this.queue=null;this.limiter=null;this.uploadHookHelper=null},n}();i.default=f},{"../core":65,"./limiters/CountLimiter":185}],183:[function(n,t,i){"use strict";function h(n){return n&&n.__esModule?n:{"default":n}}function c(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function l(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function a(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function v(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function y(n,t){if(t instanceof f.BaseTexture){var i=t.source,r=i.width===0?n.canvas.width:Math.min(n.canvas.width,i.width),u=i.height===0?n.canvas.height:Math.min(n.canvas.height,i.height);return n.ctx.drawImage(i,0,0,r,u,0,0,n.canvas.width,n.canvas.height),!0}return!1}var r,u;i.__esModule=!0;var e=n("../../core"),f=c(e),o=n("../BasePrepare"),s=h(o);r=16;u=function(n){function t(i){l(this,t);var u=a(this,n.call(this,i));return u.uploadHookHelper=u,u.canvas=document.createElement("canvas"),u.canvas.width=r,u.canvas.height=r,u.ctx=u.canvas.getContext("2d"),u.registerUploadHook(y),u}return v(t,n),t.prototype.destroy=function(){n.prototype.destroy.call(this);this.ctx=null;this.canvas=null},t}(s.default);i.default=u;f.CanvasRenderer.registerPlugin("prepare",u)},{"../../core":65,"../BasePrepare":182}],184:[function(n,t,i){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var u,f,e,o,s;i.__esModule=!0;u=n("./webgl/WebGLPrepare");Object.defineProperty(i,"webgl",{enumerable:!0,get:function(){return r(u).default}});f=n("./canvas/CanvasPrepare");Object.defineProperty(i,"canvas",{enumerable:!0,get:function(){return r(f).default}});e=n("./BasePrepare");Object.defineProperty(i,"BasePrepare",{enumerable:!0,get:function(){return r(e).default}});o=n("./limiters/CountLimiter");Object.defineProperty(i,"CountLimiter",{enumerable:!0,get:function(){return r(o).default}});s=n("./limiters/TimeLimiter");Object.defineProperty(i,"TimeLimiter",{enumerable:!0,get:function(){return r(s).default}})},{"./BasePrepare":182,"./canvas/CanvasPrepare":183,"./limiters/CountLimiter":185,"./limiters/TimeLimiter":186,"./webgl/WebGLPrepare":187}],185:[function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}i.__esModule=!0;var u=function(){function n(t){r(this,n);this.maxItemsPerFrame=t;this.itemsLeft=0}return n.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},n.prototype.allowedToUpload=function(){return this.itemsLeft-->0},n}();i.default=u},{}],186:[function(n,t,i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}i.__esModule=!0;var u=function(){function n(t){r(this,n);this.maxMilliseconds=t;this.frameStart=0}return n.prototype.beginFrame=function(){this.frameStart=Date.now()},n.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},n}();i.default=u},{}],187:[function(n,t,i){"use strict";function s(n){return n&&n.__esModule?n:{"default":n}}function h(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function c(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function l(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function a(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function v(n,t){return t instanceof r.BaseTexture?(t._glTextures[n.CONTEXT_UID]||n.textureManager.updateTexture(t),!0):!1}function y(n,t){return t instanceof r.Graphics?((t.dirty||t.clearDirty||!t._webGL[n.plugins.graphics.CONTEXT_UID])&&n.plugins.graphics.updateGraphics(t),!0):!1}function p(n,t){return n instanceof r.Graphics?(t.push(n),!0):!1}var u;i.__esModule=!0;var f=n("../../core"),r=h(f),e=n("../BasePrepare"),o=s(e);u=function(n){function t(i){c(this,t);var r=l(this,n.call(this,i));return r.uploadHookHelper=r.renderer,r.registerFindHook(p),r.registerUploadHook(v),r.registerUploadHook(y),r}return a(t,n),t}(o.default);i.default=u;r.WebGLRenderer.registerPlugin("prepare",u)},{"../../core":65,"../BasePrepare":182}],188:[function(n,t,i){(function(t){"use strict";function r(n){var t,i;if(n&&n.__esModule)return n;if(t={},n!=null)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t.default=n,t}function et(n){return n&&n.__esModule?n:{"default":n}}var f,u,s;i.__esModule=!0;i.loader=i.prepare=i.particles=i.mesh=i.loaders=i.interaction=i.filters=i.extras=i.extract=i.accessibility=undefined;f=n("./polyfill");Object.keys(f).forEach(function(n){n!=="default"&&n!=="__esModule"&&Object.defineProperty(i,n,{enumerable:!0,get:function(){return f[n]}})});u=n("./core");Object.keys(u).forEach(function(n){n!=="default"&&n!=="__esModule"&&Object.defineProperty(i,n,{enumerable:!0,get:function(){return u[n]}})});var h=n("./deprecation"),e=et(h),c=n("./accessibility"),l=r(c),a=n("./extract"),v=r(a),y=n("./extras"),p=r(y),w=n("./filters"),b=r(w),k=n("./interaction"),d=r(k),g=n("./loaders"),o=r(g),nt=n("./mesh"),tt=r(nt),it=n("./particles"),rt=r(it),ut=n("./prepare"),ft=r(ut);u.utils.mixins.performMixins();s=o.shared||null;i.accessibility=l;i.extract=v;i.extras=p;i.filters=b;i.interaction=d;i.loaders=o;i.mesh=tt;i.particles=rt;i.prepare=ft;i.loader=s;typeof e.default=="function"&&e.default(i);t.PIXI=i}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./accessibility":42,"./core":65,"./deprecation":131,"./extract":133,"./extras":141,"./filters":153,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":180,"./prepare":184}]},{},[188])(188)});