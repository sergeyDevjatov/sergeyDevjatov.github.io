!function(t){!function(t){t.createIndicesForQuads=function(t){for(var r=6*t,e=new Uint16Array(r),i=0,n=0;i<r;i+=6,n+=4)e[i+0]=n+0,e[i+1]=n+1,e[i+2]=n+2,e[i+3]=n+0,e[i+4]=n+2,e[i+5]=n+3;return e},t.isPow2=function(t){return!(t&t-1||!t)},t.nextPow2=function(t){return t+=+(0===t),--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},t.log2=function(t){var r,e;return r=+(t>65535)<<4,r|=e=+((t>>>=r)>255)<<3,r|=e=+((t>>>=e)>15)<<2,(r|=e=+((t>>>=e)>3)<<1)|(t>>>=e)>>1},t.getIntersectionFactor=function(t,r,e,i,n){var o=r.x-t.x,a=e.x-i.x,s=e.x-t.x,u=r.y-t.y,c=e.y-i.y,l=e.y-t.y,p=o*c-u*a;if(Math.abs(p)<1e-7)return n.x=o,n.y=u,0;var h=(s*c-l*a)/p,f=(o*l-u*s)/p;return f<1e-6||f-1>-1e-6?-1:(n.x=t.x+h*(r.x-t.x),n.y=t.y+h*(r.y-t.y),1)},t.getPositionFromQuad=function(t,r,e){e=e||new PIXI.Point;var i=1-r.x,n=1-i,o=1-r.y,a=1-o;return e.x=(t[0].x*i+t[1].x*n)*o+(t[3].x*i+t[2].x*n)*a,e.y=(t[0].y*i+t[1].y*n)*o+(t[3].y*i+t[2].y*n)*a,e}}(t.utils||(t.utils={}))}(pixi_projection||(pixi_projection={})),PIXI.projection=pixi_projection,function(t){var r=function(){function t(t,r){void 0===r&&(r=!0),this._enabled=!1,this.legacy=t,r&&(this.enabled=!0),this.legacy.proj=this}return Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),t.prototype.clear=function(){},t}();t.Projection=r}(pixi_projection||(pixi_projection={})),function(t){var r,e;r=t.webgl||(t.webgl={}),e=function(){function t(t){this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null},t}(),r.BatchBuffer=e}(pixi_projection||(pixi_projection={})),function(t){!function(r){(t.webgl||(t.webgl={})).generateMultiTextureShader=function(t,r,e,i){r=(r=r.replace(/%count%/gi,i+"")).replace(/%forloop%/gi,function(t){var r="";r+="\n",r+="\n";for(var e=0;e<t;e++)e>0&&(r+="\nelse "),e<t-1&&(r+="if(textureId == "+e+".0)"),r+="\n{",r+="\n\tcolor = texture2D(uSamplers["+e+"], textureCoord);",r+="\n}";return r+="\n",r+="\n"}(i));for(var n=new PIXI.Shader(e,t,r),o=new Int32Array(i),a=0;a<i;a++)o[a]=a;return n.bind(),n.uniforms.uSamplers=o,n}}()}(pixi_projection||(pixi_projection={}));var pixi_projection,__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])};return function(r,e){function i(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){!function(r){var e=PIXI.ObjectRenderer,i=PIXI.settings,n=PIXI.glCore.GLBuffer,o=PIXI.utils.premultiplyTint,a=PIXI.utils.premultiplyBlendMode,s=0,u=function(){return function(){this.textures=[],this.textureCount=0,this.ids=[],this.size=0,this.start=0,this.blend=PIXI.BLEND_MODES.NORMAL,this.uniforms=null}}();r.BatchGroup=u;var c=function(e){function c(r){var n=e.call(this,r)||this;n.shaderVert="",n.shaderFrag="",n.MAX_TEXTURES_LOCAL=32,n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=i.SPRITE_BATCH_SIZE,n.currentIndex=0,n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.MAX_TEXTURES=1,n.indices=t.utils.createIndicesForQuads(n.size),n.groups=[];for(var o=0;o<n.size;o++)n.groups[o]=new u;return n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return __extends(c,e),c.prototype.getUniforms=function(t){return null},c.prototype.syncUniforms=function(t){if(t){var r=this.shader;for(var e in t)r.uniforms[e]=t[e]}},c.prototype.onContextChange=function(){var e=this.renderer.gl;this.MAX_TEXTURES=Math.min(this.MAX_TEXTURES_LOCAL,this.renderer.plugins.sprite.MAX_TEXTURES),this.shader=r.generateMultiTextureShader(this.shaderVert,this.shaderFrag,e,this.MAX_TEXTURES),this.indexBuffer=n.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);this.shader.attributes;for(var i=0;i<this.vaoMax;i++){var o=this.vertexBuffers[i]=n.createVertexBuffer(e,null,e.STREAM_DRAW);this.vaos[i]=this.createVao(o)}if(!this.buffers){this.buffers=[];for(i=1;i<=t.utils.nextPow2(this.size);i*=2)this.buffers.push(new r.BatchBuffer(4*i*this.vertByteSize))}this.vao=this.vaos[0]},c.prototype.onPrerender=function(){this.vertexCount=0},c.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&t._texture.baseTexture&&(this.sprites[this.currentIndex++]=t)},c.prototype.flush=function(){if(0!==this.currentIndex){var r,e,u,c=this.renderer.gl,l=this.MAX_TEXTURES,p=t.utils.nextPow2(this.currentIndex),h=t.utils.log2(p),f=this.buffers[h],d=this.sprites,v=this.groups,x=f.float32View,y=f.uint32View,m=0,_=null,g=1,T=0,I=v[0],w=a[d[0]._texture.baseTexture.premultipliedAlpha?1:0][d[0].blendMode];for(I.textureCount=0,I.start=0,I.blend=w,s++,u=0;u<this.currentIndex;++u){var b=d[u];r=b._texture.baseTexture;var P=a[Number(r.premultipliedAlpha)][b.blendMode];w!==P&&(w=P,e=null,T=l,s++);var j=this.getUniforms(b);_!==j&&(_=j,e=null,T=l,s++),e!==r&&(e=r,r._enabled!==s&&(T===l&&(s++,T=0,I.size=u-I.start,(I=v[g++]).textureCount=0,I.blend=w,I.start=u,I.uniforms=_),r._enabled=s,r._virtalBoundId=T,I.textures[I.textureCount++]=r,T++));var S=Math.min(b.worldAlpha,1),C=S<1&&r.premultipliedAlpha?o(b._tintRGB,S):b._tintRGB+(255*S<<24);this.fillVertices(x,y,m,b,C,r._virtalBoundId),m+=4*this.vertSize}if(I.size=u-I.start,i.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(f.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;this.shader.attributes;var M=this.vertexBuffers[this.vertexCount]=n.createVertexBuffer(c,null,c.STREAM_DRAW);this.vaos[this.vertexCount]=this.createVao(M)}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(f.vertices,0,!1),this.vertexCount++}for(_=null,u=0;u<g;u++){var A=v[u],D=A.textureCount;A.uniforms!==_&&this.syncUniforms(A.uniforms);for(var X=0;X<D;X++){this.renderer.bindTexture(A.textures[X],X,!0),A.textures[X]._virtalBoundId=-1;var F=this.shader.uniforms.samplerSize;F&&(F[0]=A.textures[X].realWidth,F[1]=A.textures[X].realHeight,this.shader.uniforms.samplerSize=F)}this.renderer.state.setBlendMode(A.blend),c.drawElements(c.TRIANGLES,6*A.size,c.UNSIGNED_SHORT,6*A.start*2)}this.currentIndex=0}},c.prototype.start=function(){this.renderer.bindShader(this.shader),i.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},c.prototype.stop=function(){this.flush()},c.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(t=0;t<this.buffers.length;++t)this.buffers[t].destroy()},c}(e);r.MultiTextureSpriteRenderer=c}(t.webgl||(t.webgl={}))}(pixi_projection||(pixi_projection={})),function(t){var r=[new PIXI.Point,new PIXI.Point,new PIXI.Point,new PIXI.Point],e=[0,0,0,0],i=function(){function t(){this.surfaceID="default",this._updateID=0,this.vertexSrc="",this.fragmentSrc=""}return t.prototype.fillUniforms=function(t){},t.prototype.clear=function(){},t.prototype.boundsQuad=function(t,i,n){for(var o=i[0],a=i[1],s=i[0],u=i[1],c=2;c<8;c+=2)o>i[c]&&(o=i[c]),s<i[c]&&(s=i[c]),a>i[c+1]&&(a=i[c+1]),u<i[c+1]&&(u=i[c+1]);if(r[0].set(o,a),this.apply(r[0],r[0]),r[1].set(s,a),this.apply(r[1],r[1]),r[2].set(s,u),this.apply(r[2],r[2]),r[3].set(o,u),this.apply(r[3],r[3]),n)n.apply(r[0],r[0]),n.apply(r[1],r[1]),n.apply(r[2],r[2]),n.apply(r[3],r[3]),i[0]=r[0].x,i[1]=r[0].y,i[2]=r[1].x,i[3]=r[1].y,i[4]=r[2].x,i[5]=r[2].y,i[6]=r[3].x,i[7]=r[3].y;else{for(c=1;c<=3;c++)if(r[c].y<r[0].y||r[c].y==r[0].y&&r[c].x<r[0].x){var l=r[0];r[0]=r[c],r[c]=l}for(c=1;c<=3;c++)e[c]=Math.atan2(r[c].y-r[0].y,r[c].x-r[0].x);for(c=1;c<=3;c++)for(var p=c+1;p<=3;p++)if(e[c]>e[p]){l=r[c];r[c]=r[p],r[p]=l;var h=e[c];e[c]=e[p],e[p]=h}if(i[0]=r[0].x,i[1]=r[0].y,i[2]=r[1].x,i[3]=r[1].y,i[4]=r[2].x,i[5]=r[2].y,i[6]=r[3].x,i[7]=r[3].y,(r[3].x-r[2].x)*(r[1].y-r[2].y)-(r[1].x-r[2].x)*(r[3].y-r[2].y)<0)return i[4]=r[3].x,void(i[5]=r[3].y)}},t}();t.Surface=i}(pixi_projection||(pixi_projection={})),function(t){var r=new PIXI.Matrix,e=new PIXI.Rectangle,i=new PIXI.Point,n=function(t){function n(){var r=t.call(this)||this;return r.distortion=new PIXI.Point,r}return __extends(n,t),n.prototype.clear=function(){this.distortion.set(0,0)},n.prototype.apply=function(t,r){r=r||new PIXI.Point;var e=this.distortion,i=t.x*t.y;return r.x=t.x+e.x*i,r.y=t.y+e.y*i,r},n.prototype.applyInverse=function(t,r){r=r||new PIXI.Point;var e=t.x,i=t.y,n=this.distortion.x,o=this.distortion.y;if(0==n)r.x=e,r.y=i/(1+o*e);else if(0==o)r.y=i,r.x=e/(1+n*i);else{var a=.5*(i*n-e*o+1)/o,s=a*a+e/o;if(s<=1e-5)return void r.set(NaN,NaN);r.x=o>0?-a+Math.sqrt(s):-a-Math.sqrt(s),r.y=(e/r.x-1)/n}return r},n.prototype.mapSprite=function(t,r,i){var n=t.texture;return e.x=-t.anchor.x*n.orig.width,e.y=-t.anchor.y*n.orig.height,e.width=n.orig.width,e.height=n.orig.height,this.mapQuad(e,r,i||t.transform)},n.prototype.mapQuad=function(t,e,n){var o=-t.x/t.width,a=-t.y/t.height,s=(1-t.x)/t.width,u=(1-t.y)/t.height,c=e[0].x*(1-o)+e[1].x*o,l=e[0].y*(1-o)+e[1].y*o,p=e[0].x*(1-s)+e[1].x*s,h=e[0].y*(1-s)+e[1].y*s,f=e[3].x*(1-o)+e[2].x*o,d=e[3].y*(1-o)+e[2].y*o,v=e[3].x*(1-s)+e[2].x*s,x=e[3].y*(1-s)+e[2].y*s,y=c*(1-a)+f*a,m=l*(1-a)+d*a,_=p*(1-a)+v*a,g=h*(1-a)+x*a,T=c*(1-u)+f*u,I=l*(1-u)+d*u,w=p*(1-u)+v*u,b=h*(1-u)+x*u,P=r;return P.tx=y,P.ty=m,P.a=_-y,P.b=g-m,P.c=T-y,P.d=I-m,i.set(w,b),P.applyInverse(i,i),this.distortion.set(i.x-1,i.y-1),n.setFromMatrix(P),this},n.prototype.fillUniforms=function(t){t.distortion=t.distortion||new Float32Array([0,0,0,0]);var r=Math.abs(this.distortion.x),e=Math.abs(this.distortion.y);t.distortion[0]=1e4*r<=e?0:this.distortion.x,t.distortion[1]=1e4*e<=r?0:this.distortion.y,t.distortion[2]=1/t.distortion[0],t.distortion[3]=1/t.distortion[1]},n}(t.Surface);t.BilinearSurface=n}(pixi_projection||(pixi_projection={})),function(t){var r=function(r){function e(){var e=r.call(this)||this;return e.proj=new t.ProjectionSurface(e.transform),e}return __extends(e,r),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.proj},enumerable:!0,configurable:!0}),e}(PIXI.Container);t.Container2s=r}(pixi_projection||(pixi_projection={})),function(t){var r=PIXI.TransformStatic.prototype.updateTransform;function e(t){var e=this.proj,i=t.proj;return i?i._surface?(e._activeProjection=i,this.updateLocalTransform(),this.localTransform.copy(this.worldTransform),void(this._parentID<0&&++this._worldID)):(r.call(this,t),void(e._activeProjection=i._activeProjection)):(r.call(this,t),void(e._activeProjection=null))}var i=function(r){function i(t,e){var i=r.call(this,t,e)||this;return i._surface=null,i._activeProjection=null,i._currentSurfaceID=-1,i._currentLegacyID=-1,i._lastUniforms=null,i}return __extends(i,r),Object.defineProperty(i.prototype,"enabled",{set:function(t){t!==this._enabled&&(this._enabled=t,t?(this.legacy.updateTransform=e,this.legacy._parentID=-1):(this.legacy.updateTransform=PIXI.TransformStatic.prototype.updateTransform,this.legacy._parentID=-1))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"surface",{get:function(){return this._surface},set:function(t){this._surface!=t&&(this._surface=t||null,this.legacy._parentID=-1)},enumerable:!0,configurable:!0}),i.prototype.applyPartial=function(t,r){return null!==this._activeProjection?(r=this.legacy.worldTransform.apply(t,r),this._activeProjection.surface.apply(r,r)):null!==this._surface?this.surface.apply(t,r):this.legacy.worldTransform.apply(t,r)},i.prototype.apply=function(t,r){return null!==this._activeProjection?(r=this.legacy.worldTransform.apply(t,r),this._activeProjection.surface.apply(r,r),this._activeProjection.legacy.worldTransform.apply(r,r)):null!==this._surface?(r=this.surface.apply(t,r),this.legacy.worldTransform.apply(r,r)):this.legacy.worldTransform.apply(t,r)},i.prototype.applyInverse=function(t,r){return null!==this._activeProjection?(r=this._activeProjection.legacy.worldTransform.applyInverse(t,r),this._activeProjection._surface.applyInverse(r,r),this.legacy.worldTransform.applyInverse(r,r)):null!==this._surface?(r=this.legacy.worldTransform.applyInverse(t,r),this._surface.applyInverse(r,r)):this.legacy.worldTransform.applyInverse(t,r)},i.prototype.mapBilinearSprite=function(r,e){this._surface instanceof t.BilinearSurface||(this.surface=new t.BilinearSurface),this.surface.mapSprite(r,e,this.legacy)},i.prototype.clear=function(){this.surface&&this.surface.clear()},Object.defineProperty(i.prototype,"uniforms",{get:function(){return this._currentLegacyID===this.legacy._worldID&&this._currentSurfaceID===this.surface._updateID?this._lastUniforms:(this._lastUniforms=this._lastUniforms||{},this._lastUniforms.worldTransform=this.legacy.worldTransform.toArray(!0),this._surface.fillUniforms(this._lastUniforms),this._lastUniforms)},enumerable:!0,configurable:!0}),i}(t.Projection);t.ProjectionSurface=i}(pixi_projection||(pixi_projection={})),function(t){var r=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.size=100,r.MAX_TEXTURES_LOCAL=1,r.shaderVert="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec3 aTrans1;\nattribute vec3 aTrans2;\nattribute vec4 aFrame;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 worldTransform;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vTrans1;\nvarying vec3 vTrans2;\nvarying vec4 vFrame;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position.xyw = projectionMatrix * worldTransform * vec3(aVertexPosition, 1.0);\n    gl_Position.z = 0.0;\n    \n    vTextureCoord = aVertexPosition;\n    vTrans1 = aTrans1;\n    vTrans2 = aTrans2;\n    vTextureId = aTextureId;\n    vColor = aColor;\n    vFrame = aFrame;\n}\n",r.shaderFrag="precision highp float;\nvarying vec2 vTextureCoord;\nvarying vec3 vTrans1;\nvarying vec3 vTrans2;\nvarying vec4 vFrame;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nuniform sampler2D uSamplers[%count%];\nuniform vec2 samplerSize[%count%]; \nuniform vec4 distortion;\n\nvoid main(void){\nvec2 surface;\nvec2 surface2;\n\nfloat vx = vTextureCoord.x;\nfloat vy = vTextureCoord.y;\nfloat dx = distortion.x;\nfloat dy = distortion.y;\nfloat revx = distortion.z;\nfloat revy = distortion.w;\n\nif (distortion.x == 0.0) {\n    surface.x = vx;\n    surface.y = vy / (1.0 + dy * vx);\n    surface2 = surface;\n} else\nif (distortion.y == 0.0) {\n    surface.y = vy;\n    surface.x = vx/ (1.0 + dx * vy);\n    surface2 = surface;\n} else {\n    float c = vy * dx - vx * dy;\n    float b = (c + 1.0) * 0.5;\n    float b2 = (-c + 1.0) * 0.5;\n    float d = b * b + vx * dy;\n    if (d < -0.00001) {\n        discard;\n    }\n    d = sqrt(max(d, 0.0));\n    surface.x = (- b + d) * revy;\n    surface2.x = (- b - d) * revy;\n    surface.y = (- b2 + d) * revx;\n    surface2.y = (- b2 - d) * revx;\n}\n\nvec2 uv;\nuv.x = vTrans1.x * surface.x + vTrans1.y * surface.y + vTrans1.z;\nuv.y = vTrans2.x * surface.x + vTrans2.y * surface.y + vTrans2.z;\n\nvec2 pixels = uv * samplerSize[0];\n\nif (pixels.x < vFrame.x || pixels.x > vFrame.z ||\n    pixels.y < vFrame.y || pixels.y > vFrame.w) {\n    uv.x = vTrans1.x * surface2.x + vTrans1.y * surface2.y + vTrans1.z;\n    uv.y = vTrans2.x * surface2.x + vTrans2.y * surface2.y + vTrans2.z;\n    pixels = uv * samplerSize[0];\n    \n    if (pixels.x < vFrame.x || pixels.x > vFrame.z ||\n        pixels.y < vFrame.y || pixels.y > vFrame.w) {\n        discard;\n    }\n}\n\nvec4 edge;\nedge.xy = clamp(pixels - vFrame.xy + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));\nedge.zw = clamp(vFrame.zw - pixels + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));\n\nfloat alpha = 1.0; //edge.x * edge.y * edge.z * edge.w;\nvec4 rColor = vColor * alpha;\n\nfloat textureId = floor(vTextureId+0.5);\nvec4 color;\nvec2 textureCoord = uv;\n%forloop%\ngl_FragColor = color * rColor;\n}",r.defUniforms={worldTransform:new Float32Array([1,0,0,0,1,0,0,0,1]),distortion:new Float32Array([0,0])},r}return __extends(r,t),r.prototype.getUniforms=function(t){var r=t.proj;this.shader;return null!==r.surface?r.uniforms:null!==r._activeProjection?r._activeProjection.uniforms:this.defUniforms},r.prototype.createVao=function(t){var r=this.shader.attributes;this.vertSize=14,this.vertByteSize=4*this.vertSize;var e=this.renderer.gl,i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(t,r.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(t,r.aTrans1,e.FLOAT,!1,this.vertByteSize,8).addAttribute(t,r.aTrans2,e.FLOAT,!1,this.vertByteSize,20).addAttribute(t,r.aFrame,e.FLOAT,!1,this.vertByteSize,32).addAttribute(t,r.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,48);return r.aTextureId&&i.addAttribute(t,r.aTextureId,e.FLOAT,!1,this.vertByteSize,52),i},r.prototype.fillVertices=function(t,r,e,i,n,o){for(var a=i.vertexData,s=i._texture,u=(s.orig.width,s.orig.height,i._anchor._x,i._anchor._y,s._frame),c=i.aTrans,l=0;l<4;l++)t[e]=a[2*l],t[e+1]=a[2*l+1],t[e+2]=c.a,t[e+3]=c.c,t[e+4]=c.tx,t[e+5]=c.b,t[e+6]=c.d,t[e+7]=c.ty,t[e+8]=u.x,t[e+9]=u.y,t[e+10]=u.x+u.width,t[e+11]=u.y+u.height,r[e+12]=n,t[e+13]=o,e+=14},r}((pixi_projection||(pixi_projection={})).webgl.MultiTextureSpriteRenderer);PIXI.WebGLRenderer.registerPlugin("sprite_bilinear",r)}(),function(t){var r=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.size=100,r.MAX_TEXTURES_LOCAL=1,r.shaderVert="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec3 aTrans1;\nattribute vec3 aTrans2;\nattribute vec4 aFrame;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 worldTransform;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vTrans1;\nvarying vec3 vTrans2;\nvarying vec4 vFrame;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position.xyw = projectionMatrix * worldTransform * vec3(aVertexPosition, 1.0);\n    gl_Position.z = 0.0;\n    \n    vTextureCoord = aVertexPosition;\n    vTrans1 = aTrans1;\n    vTrans2 = aTrans2;\n    vTextureId = aTextureId;\n    vColor = aColor;\n    vFrame = aFrame;\n}\n",r.shaderFrag="precision highp float;\nvarying vec2 vTextureCoord;\nvarying vec3 vTrans1;\nvarying vec3 vTrans2;\nvarying vec4 vFrame;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nuniform sampler2D uSamplers[%count%];\nuniform vec2 samplerSize[%count%]; \nuniform vec4 params;\n\nvoid main(void){\nvec2 surface;\n\nfloat vx = vTextureCoord.x;\nfloat vy = vTextureCoord.y;\nfloat aleph = params.x;\nfloat bet = params.y;\nfloat A = params.z;\nfloat B = params.w;\n\nif (aleph == 0.0) {\n\tsurface.y = vy / (1.0 + vx * bet);\n\tsurface.x = vx;\n}\nelse if (bet == 0.0) {\n\tsurface.x = vx / (1.0 + vy * aleph);\n\tsurface.y = vy;\n} else {\n\tsurface.x = vx * (bet + 1.0) / (bet + 1.0 + vy * aleph);\n\tsurface.y = vy * (aleph + 1.0) / (aleph + 1.0 + vx * bet);\n}\n\nvec2 uv;\nuv.x = vTrans1.x * surface.x + vTrans1.y * surface.y + vTrans1.z;\nuv.y = vTrans2.x * surface.x + vTrans2.y * surface.y + vTrans2.z;\n\nvec2 pixels = uv * samplerSize[0];\n\nvec4 edge;\nedge.xy = clamp(pixels - vFrame.xy + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));\nedge.zw = clamp(vFrame.zw - pixels + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));\n\nfloat alpha = edge.x * edge.y * edge.z * edge.w;\nvec4 rColor = vColor * alpha;\n\nfloat textureId = floor(vTextureId+0.5);\nvec4 color;\nvec2 textureCoord = uv;\n%forloop%\ngl_FragColor = color * rColor;\n}",r.defUniforms={worldTransform:new Float32Array([1,0,0,0,1,0,0,0,1]),distortion:new Float32Array([0,0])},r}return __extends(r,t),r.prototype.getUniforms=function(t){var r=t.proj;this.shader;return null!==r.surface?r.uniforms:null!==r._activeProjection?r._activeProjection.uniforms:this.defUniforms},r.prototype.createVao=function(t){var r=this.shader.attributes;this.vertSize=14,this.vertByteSize=4*this.vertSize;var e=this.renderer.gl,i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(t,r.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(t,r.aTrans1,e.FLOAT,!1,this.vertByteSize,8).addAttribute(t,r.aTrans2,e.FLOAT,!1,this.vertByteSize,20).addAttribute(t,r.aFrame,e.FLOAT,!1,this.vertByteSize,32).addAttribute(t,r.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,48);return r.aTextureId&&i.addAttribute(t,r.aTextureId,e.FLOAT,!1,this.vertByteSize,52),i},r.prototype.fillVertices=function(t,r,e,i,n,o){for(var a=i.vertexData,s=i._texture,u=(s.orig.width,s.orig.height,i._anchor._x,i._anchor._y,s._frame),c=i.aTrans,l=0;l<4;l++)t[e]=a[2*l],t[e+1]=a[2*l+1],t[e+2]=c.a,t[e+3]=c.c,t[e+4]=c.tx,t[e+5]=c.b,t[e+6]=c.d,t[e+7]=c.ty,t[e+8]=u.x,t[e+9]=u.y,t[e+10]=u.x+u.width,t[e+11]=u.y+u.height,r[e+12]=n,t[e+13]=o,e+=14},r}((pixi_projection||(pixi_projection={})).webgl.MultiTextureSpriteRenderer);PIXI.WebGLRenderer.registerPlugin("sprite_strange",r)}(),function(t){var r=new PIXI.Matrix,e=new PIXI.Rectangle,i=new PIXI.Point,n=function(t){function n(){var r=t.call(this)||this;return r.params=[0,0,NaN,NaN],r}return __extends(n,t),n.prototype.clear=function(){var t=this.params;t[0]=0,t[1]=0,t[2]=NaN,t[3]=NaN},n.prototype.setAxisX=function(t,r,e){var i=t.x,n=t.y,o=Math.sqrt(i*i+n*n),a=e.rotation;0!==a&&(e.skew._x-=a,e.skew._y+=a,e.rotation=0),e.skew.y=Math.atan2(n,i);var s=this.params;s[2]=0!==r?-o*r:NaN,this._calc01()},n.prototype.setAxisY=function(t,r,e){var i=t.x,n=t.y,o=Math.sqrt(i*i+n*n),a=e.rotation;0!==a&&(e.skew._x-=a,e.skew._y+=a,e.rotation=0),e.skew.x=-Math.atan2(n,i)+Math.PI/2;var s=this.params;s[3]=0!==r?-o*r:NaN,this._calc01()},n.prototype._calc01=function(){var t=this.params;if(isNaN(t[2]))t[1]=0,isNaN(t[3])?t[0]=0:t[0]=1/t[3];else if(isNaN(t[3]))t[0]=0,t[1]=1/t[2];else{var r=1-t[2]*t[3];t[0]=(1-t[2])/r,t[1]=(1-t[3])/r}},n.prototype.apply=function(t,r){r=r||new PIXI.Point;var e=this.params[0],i=this.params[1],n=this.params[2],o=this.params[3],a=t.x,s=t.y;if(0===e)r.y=s*(1+a*i),r.x=a;else if(0===i)r.x=a*(1+s*e),r.y=s;else{var u=n*o-s*a;r.x=n*a*(o+s)/u,r.y=o*s*(n+a)/u}return r},n.prototype.applyInverse=function(t,r){r=r||new PIXI.Point;var e=this.params[0],i=this.params[1],n=(this.params[2],this.params[3],t.x),o=t.y;return 0===e?(r.y=o/(1+n*i),r.x=n):0===i?(r.x=n*(1+o*e),r.y=o):(r.x=n*(i+1)/(i+1+o*e),r.y=o*(e+1)/(e+1+n*i)),r},n.prototype.mapSprite=function(t,r,i){var n=t.texture;return e.x=-t.anchor.x*n.orig.width,e.y=-t.anchor.y*n.orig.height,e.width=n.orig.width,e.height=n.orig.height,this.mapQuad(e,r,i||t.transform)},n.prototype.mapQuad=function(t,e,n){var o=-t.x/t.width,a=-t.y/t.height,s=(1-t.x)/t.width,u=(1-t.y)/t.height,c=e[0].x*(1-o)+e[1].x*o,l=e[0].y*(1-o)+e[1].y*o,p=e[0].x*(1-s)+e[1].x*s,h=e[0].y*(1-s)+e[1].y*s,f=e[3].x*(1-o)+e[2].x*o,d=e[3].y*(1-o)+e[2].y*o,v=e[3].x*(1-s)+e[2].x*s,x=e[3].y*(1-s)+e[2].y*s,y=c*(1-a)+f*a,m=l*(1-a)+d*a,_=p*(1-a)+v*a,g=h*(1-a)+x*a,T=c*(1-u)+f*u,I=l*(1-u)+d*u,w=p*(1-u)+v*u,b=h*(1-u)+x*u,P=r;return P.tx=y,P.ty=m,P.a=_-y,P.b=g-m,P.c=T-y,P.d=I-m,i.set(w,b),P.applyInverse(i,i),n.setFromMatrix(P),this},n.prototype.fillUniforms=function(t){var r=this.params,e=t.params||new Float32Array([0,0,0,0]);t.params=e,e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3]},n}(t.Surface);t.StrangeSurface=n}(pixi_projection||(pixi_projection={})),function(t){PIXI.Sprite.prototype.convertTo2s=function(){this.proj||(this.pluginName="sprite_bilinear",this.aTrans=new PIXI.Matrix,this.calculateVertices=t.Sprite2s.prototype.calculateVertices,this.calculateTrimmedVertices=t.Sprite2s.prototype.calculateTrimmedVertices,this._calculateBounds=t.Sprite2s.prototype._calculateBounds,PIXI.Container.prototype.convertTo2s.call(this))},PIXI.Container.prototype.convertTo2s=function(){this.proj||(this.proj=new t.Projection2d(this.transform),Object.defineProperty(this,"worldTransform",{get:function(){return this.proj},enumerable:!0,configurable:!0}))},PIXI.Container.prototype.convertSubtreeTo2s=function(){this.convertTo2s();for(var t=0;t<this.children.length;t++)this.children[t].convertSubtreeTo2s()}}(pixi_projection||(pixi_projection={})),function(t){var r=function(r){function e(e){var i=r.call(this,e)||this;return i.aTrans=new PIXI.Matrix,i.proj=new t.ProjectionSurface(i.transform),i.pluginName="sprite_bilinear",i}return __extends(e,r),e.prototype._calculateBounds=function(){this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)},e.prototype.calculateVertices=function(){var t=this.transform._worldID,r=this._texture._updateID;if(this._transformID!==t||this._textureID!==r){this._transformID=t,this._textureID=r;var e=this._texture,i=this.vertexData,n=e.trim,o=e.orig,a=this._anchor,s=0,u=0,c=0,l=0;if(n?(s=(u=n.x-a._x*o.width)+n.width,c=(l=n.y-a._y*o.height)+n.height):(s=(u=-a._x*o.width)+o.width,c=(l=-a._y*o.height)+o.height),this.proj._surface)i[0]=u,i[1]=l,i[2]=s,i[3]=l,i[4]=s,i[5]=c,i[6]=u,i[7]=c,this.proj._surface.boundsQuad(i,i);else{var p=this.transform.worldTransform,h=p.a,f=p.b,d=p.c,v=p.d,x=p.tx,y=p.ty;i[0]=h*u+d*l+x,i[1]=v*l+f*u+y,i[2]=h*s+d*l+x,i[3]=v*l+f*s+y,i[4]=h*s+d*c+x,i[5]=v*c+f*s+y,i[6]=h*u+d*c+x,i[7]=v*c+f*u+y,this.proj._activeProjection&&this.proj._activeProjection.surface.boundsQuad(i,i)}e.transform||(e.transform=new PIXI.TextureMatrix(e)),e.transform.update();var m=this.aTrans;m.set(o.width,0,0,o.height,u,l),null===this.proj._surface&&m.prepend(this.transform.worldTransform),m.invert(),m.prepend(e.transform.mapCoord)}},e.prototype.calculateTrimmedVertices=function(){var t=this.transform._worldID,r=this._texture._updateID;if(this.vertexTrimmedData){if(this._transformTrimmedID===t&&this._textureTrimmedID===r)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=t,this._textureTrimmedID=r;var e=this._texture,i=this.vertexTrimmedData,n=e.orig,o=this._anchor,a=-o._x*n.width,s=a+n.width,u=-o._y*n.height,c=u+n.height;if(this.proj._surface)i[0]=a,i[1]=u,i[2]=s,i[3]=u,i[4]=s,i[5]=c,i[6]=a,i[7]=c,this.proj._surface.boundsQuad(i,i,this.transform.worldTransform);else{var l=this.transform.worldTransform,p=l.a,h=l.b,f=l.c,d=l.d,v=l.tx,x=l.ty;i[0]=p*a+f*u+v,i[1]=d*u+h*a+x,i[2]=p*s+f*u+v,i[3]=d*u+h*s+x,i[4]=p*s+f*c+v,i[5]=d*c+h*s+x,i[6]=p*a+f*c+v,i[7]=d*c+h*a+x,this.proj._activeProjection&&this.proj._activeProjection.surface.boundsQuad(i,i,this.proj._activeProjection.legacy.worldTransform)}},Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.proj},enumerable:!0,configurable:!0}),e}(PIXI.Sprite);t.Sprite2s=r}(pixi_projection||(pixi_projection={})),function(t){var r=function(r){function e(e,i,n){var o=r.call(this,e,i,n)||this;return o.aTrans=new PIXI.Matrix,o.proj=new t.ProjectionSurface(o.transform),o.pluginName="sprite_bilinear",o}return __extends(e,r),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.proj},enumerable:!0,configurable:!0}),e}(PIXI.Text);t.Text2s=r,r.prototype.calculateVertices=t.Sprite2s.prototype.calculateVertices,r.prototype.calculateTrimmedVertices=t.Sprite2s.prototype.calculateTrimmedVertices,r.prototype._calculateBounds=t.Sprite2s.prototype._calculateBounds}(pixi_projection||(pixi_projection={})),function(t){t.container2dWorldTransform=function(){return this.proj.affine?this.transform.worldTransform:this.proj.world};var r=function(r){function e(){var e=r.call(this)||this;return e.proj=new t.Projection2d(e.transform),e}return __extends(e,r),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),e}(PIXI.Container);t.Container2d=r}(pixi_projection||(pixi_projection={})),function(t){var r,e,i=PIXI.Point,n=[1,0,0,0,1,0,0,0,1];(e=r=t.AFFINE||(t.AFFINE={}))[e.NONE=0]="NONE",e[e.FREE=1]="FREE",e[e.AXIS_X=2]="AXIS_X",e[e.AXIS_Y=3]="AXIS_Y",e[e.POINT=4]="POINT";var o=function(){function t(t){this.floatArray=null,this.mat3=new Float64Array(t||n)}return Object.defineProperty(t.prototype,"a",{get:function(){return this.mat3[0]},set:function(t){this.mat3[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this.mat3[1]},set:function(t){this.mat3[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"c",{get:function(){return this.mat3[3]},set:function(t){this.mat3[3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"d",{get:function(){return this.mat3[4]},set:function(t){this.mat3[4]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tx",{get:function(){return this.mat3[6]},set:function(t){this.mat3[6]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ty",{get:function(){return this.mat3[7]},set:function(t){this.mat3[7]=t},enumerable:!0,configurable:!0}),t.prototype.set=function(t,r,e,i,n,o){var a=this.mat3;return a[0]=t,a[1]=r,a[2]=0,a[3]=e,a[4]=i,a[5]=0,a[6]=n,a[7]=o,a[8]=1,this},t.prototype.toArray=function(t,r){this.floatArray||(this.floatArray=new Float32Array(9));var e=r||this.floatArray,i=this.mat3;return t?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8]):(e[0]=i[0],e[1]=i[3],e[2]=i[6],e[3]=i[1],e[4]=i[4],e[5]=i[7],e[6]=i[2],e[7]=i[5],e[8]=i[8]),e},t.prototype.apply=function(t,r){r=r||new PIXI.Point;var e=this.mat3,i=t.x,n=t.y,o=1/(e[2]*i+e[5]*n+e[8]);return r.x=o*(e[0]*i+e[3]*n+e[6]),r.y=o*(e[1]*i+e[4]*n+e[7]),r},t.prototype.translate=function(t,r){var e=this.mat3;return e[0]+=t*e[2],e[1]+=r*e[2],e[3]+=t*e[5],e[4]+=r*e[5],e[6]+=t*e[8],e[7]+=r*e[8],this},t.prototype.scale=function(t,r){var e=this.mat3;return e[0]*=t,e[1]*=r,e[3]*=t,e[4]*=r,e[6]*=t,e[7]*=r,this},t.prototype.scaleAndTranslate=function(t,r,e,i){var n=this.mat3;n[0]=t*n[0]+e*n[2],n[1]=r*n[1]+i*n[2],n[3]=t*n[3]+e*n[5],n[4]=r*n[4]+i*n[5],n[6]=t*n[6]+e*n[8],n[7]=r*n[7]+i*n[8]},t.prototype.applyInverse=function(t,r){r=r||new i;var e=this.mat3,n=t.x,o=t.y,a=e[0],s=e[3],u=e[6],c=e[1],l=e[4],p=e[7],h=e[2],f=e[5],d=e[8],v=(d*l-p*f)*n+(-d*s+u*f)*o+(p*s-u*l),x=(-d*c+p*h)*n+(d*a-u*h)*o+(-p*a+u*c),y=(f*c-l*h)*n+(-f*a+s*h)*o+(l*a-s*c);return r.x=v/y,r.y=x/y,r},t.prototype.invert=function(){var t=this.mat3,r=t[0],e=t[1],i=t[2],n=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=c*o-a*u,p=-c*n+a*s,h=u*n-o*s,f=r*l+e*p+i*h;return f?(f=1/f,t[0]=l*f,t[1]=(-c*e+i*u)*f,t[2]=(a*e-i*o)*f,t[3]=p*f,t[4]=(c*r-i*s)*f,t[5]=(-a*r+i*n)*f,t[6]=h*f,t[7]=(-u*r+e*s)*f,t[8]=(o*r-e*n)*f,this):this},t.prototype.identity=function(){var t=this.mat3;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},t.prototype.clone=function(){return new t(this.mat3)},t.prototype.copyTo=function(t){var r=this.mat3,e=t.mat3;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],t},t.prototype.copy=function(t,e){var i=this.mat3,n=1/i[8],o=i[6]*n,a=i[7]*n;t.a=(i[0]-i[2]*o)*n,t.b=(i[1]-i[2]*a)*n,t.c=(i[3]-i[5]*o)*n,t.d=(i[4]-i[5]*a)*n,t.tx=o,t.ty=a,e>=2&&(e===r.POINT?(t.a=1,t.b=0,t.c=0,t.d=1):e===r.AXIS_X?(t.c=-t.b,t.d=t.a):e===r.AXIS_Y&&(t.a=t.d,t.c=-t.b))},t.prototype.copyFrom=function(t){var r=this.mat3;return r[0]=t.a,r[1]=t.b,r[2]=0,r[3]=t.c,r[4]=t.d,r[5]=0,r[6]=t.tx,r[7]=t.ty,r[8]=1,this},t.prototype.setToMultLegacy=function(t,r){var e=this.mat3,i=r.mat3,n=t.a,o=t.b,a=t.c,s=t.d,u=t.tx,c=t.ty,l=i[0],p=i[1],h=i[2],f=i[3],d=i[4],v=i[5],x=i[6],y=i[7],m=i[8];return e[0]=l*n+p*a+h*u,e[1]=l*o+p*s+h*c,e[2]=h,e[3]=f*n+d*a+v*u,e[4]=f*o+d*s+v*c,e[5]=v,e[6]=x*n+y*a+m*u,e[7]=x*o+y*s+m*c,e[8]=m,this},t.prototype.setToMultLegacy2=function(t,r){var e=this.mat3,i=t.mat3,n=i[0],o=i[1],a=i[2],s=i[3],u=i[4],c=i[5],l=i[6],p=i[7],h=i[8],f=r.a,d=r.b,v=r.c,x=r.d,y=r.tx,m=r.ty;return e[0]=f*n+d*s,e[1]=f*o+d*u,e[2]=f*a+d*c,e[3]=v*n+x*s,e[4]=v*o+x*u,e[5]=v*a+x*c,e[6]=y*n+m*s+l,e[7]=y*o+m*u+p,e[8]=y*a+m*c+h,this},t.prototype.setToMult2d=function(t,r){var e=this.mat3,i=t.mat3,n=r.mat3,o=i[0],a=i[1],s=i[2],u=i[3],c=i[4],l=i[5],p=i[6],h=i[7],f=i[8],d=n[0],v=n[1],x=n[2],y=n[3],m=n[4],_=n[5],g=n[6],T=n[7],I=n[8];return e[0]=d*o+v*u+x*p,e[1]=d*a+v*c+x*h,e[2]=d*s+v*l+x*f,e[3]=y*o+m*u+_*p,e[4]=y*a+m*c+_*h,e[5]=y*s+m*l+_*f,e[6]=g*o+T*u+I*p,e[7]=g*a+T*c+I*h,e[8]=g*s+T*l+I*f,this},t.prototype.prepend=function(t){t.mat3?this.setToMult2d(t,this):this.setToMultLegacy(t,this)},t.IDENTITY=new t,t.TEMP_MATRIX=new t,t}();t.Matrix2d=o}(pixi_projection||(pixi_projection={})),function(t){function r(t){var r=this.proj,e=this,i=t._worldID,n=e.localTransform;e._localID!==e._currentLocalID&&(n.a=e._cx*e.scale._x,n.b=e._sx*e.scale._x,n.c=e._cy*e.scale._y,n.d=e._sy*e.scale._y,n.tx=e.position._x-(e.pivot._x*n.a+e.pivot._y*n.c),n.ty=e.position._y-(e.pivot._x*n.b+e.pivot._y*n.d),e._currentLocalID=e._localID,r._currentProjID=-1);var o=r._projID;if(r._currentProjID!==o&&(r._currentProjID=o,0!==o?r.reverseLocalOrder?r.local.setToMultLegacy2(r.matrix,n):r.local.setToMultLegacy(n,r.matrix):r.local.copyFrom(n),e._parentID=-1),e._parentID!==i){var a=t.proj;a&&!a.affine?r.world.setToMult2d(a.world,r.local):r.world.setToMultLegacy(t.worldTransform,r.local),r.world.copy(e.worldTransform,r._affine),e._parentID=i,e._worldID++}}var e=new PIXI.Point,i=[new PIXI.Point,new PIXI.Point,new PIXI.Point,new PIXI.Point],n=new PIXI.Rectangle,o=new t.Matrix2d,a=function(a){function s(r,e){var i=a.call(this,r,e)||this;return i.matrix=new t.Matrix2d,i.local=new t.Matrix2d,i.world=new t.Matrix2d,i._projID=0,i._currentProjID=-1,i._affine=t.AFFINE.NONE,i.reverseLocalOrder=!1,i}return __extends(s,a),Object.defineProperty(s.prototype,"affine",{get:function(){return this._affine},set:function(t){this._affine!=t&&(this._affine=t,this._currentProjID=-1)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"enabled",{set:function(t){t!==this._enabled&&(this._enabled=t,t?(this.legacy.updateTransform=r,this.legacy._parentID=-1):(this.legacy.updateTransform=PIXI.TransformStatic.prototype.updateTransform,this.legacy._parentID=-1))},enumerable:!0,configurable:!0}),s.prototype.setAxisX=function(t,r){void 0===r&&(r=1);var e=t.x,i=t.y,n=Math.sqrt(e*e+i*i),o=this.matrix.mat3;o[0]=e/n,o[1]=i/n,o[2]=r/n,this._projID++},s.prototype.setAxisY=function(t,r){void 0===r&&(r=1);var e=t.x,i=t.y,n=Math.sqrt(e*e+i*i),o=this.matrix.mat3;o[3]=e/n,o[4]=i/n,o[5]=r/n,this._projID++},s.prototype.mapSprite=function(t,r){var e=t.texture;return n.x=-t.anchor.x*e.orig.width,n.y=-t.anchor.y*e.orig.height,n.width=e.orig.width,n.height=e.orig.height,this.mapQuad(n,r)},s.prototype.mapQuad=function(r,n){i[0].set(r.x,r.y),i[1].set(r.x+r.width,r.y),i[2].set(r.x+r.width,r.y+r.height),i[3].set(r.x,r.y+r.height);var a=1,s=2,u=3;if(0!==t.utils.getIntersectionFactor(n[0],n[2],n[1],n[3],e)){a=1,s=3,u=2;var c=Math.sqrt((n[0].x-e.x)*(n[0].x-e.x)+(n[0].y-e.y)*(n[0].y-e.y)),l=Math.sqrt((n[a].x-e.x)*(n[a].x-e.x)+(n[a].y-e.y)*(n[a].y-e.y)),p=Math.sqrt((n[s].x-e.x)*(n[s].x-e.x)+(n[s].y-e.y)*(n[s].y-e.y)),h=Math.sqrt((n[u].x-e.x)*(n[u].x-e.x)+(n[u].y-e.y)*(n[u].y-e.y)),f=(c+h)/h,d=(l+p)/p,v=(l+p)/l,x=this.matrix.mat3;x[0]=i[0].x*f,x[1]=i[0].y*f,x[2]=f,x[3]=i[a].x*d,x[4]=i[a].y*d,x[5]=d,x[6]=i[s].x*v,x[7]=i[s].y*v,x[8]=v,this.matrix.invert(),(x=o.mat3)[0]=n[0].x,x[1]=n[0].y,x[2]=1,x[3]=n[a].x,x[4]=n[a].y,x[5]=1,x[6]=n[s].x,x[7]=n[s].y,x[8]=1,this.matrix.setToMult2d(o,this.matrix),this._projID++}},s.prototype.clear=function(){this._currentProjID=-1,this._projID=0,this.matrix.identity()},s}(t.Projection);t.Projection2d=a}(pixi_projection||(pixi_projection={})),function(t){var r=function(r){function e(e,i,n,o,a){var s=r.call(this,e,i,n,o,a)||this;return s.proj=new t.Projection2d(s.transform),s.pluginName="mesh2d",s}return __extends(e,r),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),e}(PIXI.mesh.Mesh);t.Mesh2d=r}(pixi_projection||(pixi_projection={})),function(t){var r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new PIXI.Shader(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);\n    gl_Position.z = 0.0;\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","\nvarying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}")},r}(PIXI.mesh.MeshRenderer);t.Mesh2dRenderer=r,PIXI.WebGLRenderer.registerPlugin("mesh2d",r)}(pixi_projection||(pixi_projection={})),function(t){PIXI.Sprite.prototype.convertTo2d=function(){this.proj||(this.calculateVertices=t.Sprite2d.prototype.calculateVertices,this.calculateTrimmedVertices=t.Sprite2d.prototype.calculateTrimmedVertices,this._calculateBounds=t.Sprite2d.prototype._calculateBounds,this.proj=new t.Projection2d(this.transform),this.pluginName="sprite2d",this.vertexData=new Float32Array(12),Object.defineProperty(this,"worldTransform",{get:t.container2dWorldTransform,enumerable:!0,configurable:!0}))},PIXI.mesh.Mesh.prototype.convertTo2d=function(){this.proj||(this.proj=new t.Projection2d(this.transform),this.pluginName="mesh2d",Object.defineProperty(this,"worldTransform",{get:t.container2dWorldTransform,enumerable:!0,configurable:!0}))},PIXI.Container.prototype.convertTo2d=function(){this.proj||(this.proj=new t.Projection2d(this.transform),Object.defineProperty(this,"worldTransform",{get:t.container2dWorldTransform,enumerable:!0,configurable:!0}))},PIXI.Container.prototype.convertSubtreeTo2d=function(){this.convertTo2d();for(var t=0;t<this.children.length;t++)this.children[t].convertSubtreeTo2d()}}(pixi_projection||(pixi_projection={})),function(t){var r=function(r){function e(e){var i=r.call(this,e)||this;return i.proj=new t.Projection2d(i.transform),i.pluginName="sprite2d",i.vertexData=new Float32Array(12),i}return __extends(e,r),e.prototype._calculateBounds=function(){this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)},e.prototype.calculateVertices=function(){if(this.proj._affine)return 8!=this.vertexData.length&&(this.vertexData=new Float32Array(8)),void r.prototype.calculateVertices.call(this);12!=this.vertexData.length&&(this.vertexData=new Float32Array(12));var t=this.transform._worldID,e=this._texture._updateID;if(this._transformID!==t||this._textureID!==e){this._transformID=t,this._textureID=e;var i=this._texture,n=this.proj.world.mat3,o=this.vertexData,a=i.trim,s=i.orig,u=this._anchor,c=0,l=0,p=0,h=0;a?(c=(l=a.x-u._x*s.width)+a.width,p=(h=a.y-u._y*s.height)+a.height):(c=(l=-u._x*s.width)+s.width,p=(h=-u._y*s.height)+s.height),o[0]=n[0]*l+n[3]*h+n[6],o[1]=n[1]*l+n[4]*h+n[7],o[2]=n[2]*l+n[5]*h+n[8],o[3]=n[0]*c+n[3]*h+n[6],o[4]=n[1]*c+n[4]*h+n[7],o[5]=n[2]*c+n[5]*h+n[8],o[6]=n[0]*c+n[3]*p+n[6],o[7]=n[1]*c+n[4]*p+n[7],o[8]=n[2]*c+n[5]*p+n[8],o[9]=n[0]*l+n[3]*p+n[6],o[10]=n[1]*l+n[4]*p+n[7],o[11]=n[2]*l+n[5]*p+n[8]}},e.prototype.calculateTrimmedVertices=function(){if(this.proj._affine)r.prototype.calculateTrimmedVertices.call(this);else{var t=this.transform._worldID,e=this._texture._updateID;if(this.vertexTrimmedData){if(this._transformTrimmedID===t&&this._textureTrimmedID===e)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=t,this._textureTrimmedID=e;var i=this._texture,n=this.vertexTrimmedData,o=i.orig,a=this._anchor,s=this.proj.world.mat3,u=-a._x*o.width,c=u+o.width,l=-a._y*o.height,p=l+o.height,h=1/(s[2]*u+s[5]*l+s[8]);n[0]=h*(s[0]*u+s[3]*l+s[6]),n[1]=h*(s[1]*u+s[4]*l+s[7]),h=1/(s[2]*c+s[5]*l+s[8]),n[2]=h*(s[0]*c+s[3]*l+s[6]),n[3]=h*(s[1]*c+s[4]*l+s[7]),h=1/(s[2]*c+s[5]*p+s[8]),n[4]=h*(s[0]*c+s[3]*p+s[6]),n[5]=h*(s[1]*c+s[4]*p+s[7]),h=1/(s[2]*u+s[5]*p+s[8]),n[6]=h*(s[0]*u+s[3]*p+s[6]),n[7]=h*(s[1]*u+s[4]*p+s[7])}},Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),e}(PIXI.Sprite);t.Sprite2d=r}(pixi_projection||(pixi_projection={})),function(t){var r=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.shaderVert="precision highp float;\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position.xyw = projectionMatrix * aVertexPosition;\n    gl_Position.z = 0.0;\n    \n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",r.shaderFrag="\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\nvec4 color;\nvec2 textureCoord = vTextureCoord;\nfloat textureId = floor(vTextureId+0.5);\n%forloop%\ngl_FragColor = color * vColor;\n}",r}return __extends(r,t),r.prototype.createVao=function(t){var r=this.shader.attributes;this.vertSize=6,this.vertByteSize=4*this.vertSize;var e=this.renderer.gl,i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(t,r.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(t,r.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,12).addAttribute(t,r.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,16);return r.aTextureId&&i.addAttribute(t,r.aTextureId,e.FLOAT,!1,this.vertByteSize,20),i},r.prototype.fillVertices=function(t,r,e,i,n,o){var a=i.vertexData,s=i._texture._uvs.uvsUint32;if(8===a.length)if(this.renderer.roundPixels){var u=this.renderer.resolution;t[e]=(a[0]*u|0)/u,t[e+1]=(a[1]*u|0)/u,t[e+2]=1,t[e+6]=(a[2]*u|0)/u,t[e+7]=(a[3]*u|0)/u,t[e+8]=1,t[e+12]=(a[4]*u|0)/u,t[e+13]=(a[5]*u|0)/u,t[e+14]=1,t[e+18]=(a[6]*u|0)/u,t[e+19]=(a[7]*u|0)/u,t[e+20]=1}else t[e]=a[0],t[e+1]=a[1],t[e+2]=1,t[e+6]=a[2],t[e+7]=a[3],t[e+8]=1,t[e+12]=a[4],t[e+13]=a[5],t[e+14]=1,t[e+18]=a[6],t[e+19]=a[7],t[e+20]=1;else t[e]=a[0],t[e+1]=a[1],t[e+2]=a[2],t[e+6]=a[3],t[e+7]=a[4],t[e+8]=a[5],t[e+12]=a[6],t[e+13]=a[7],t[e+14]=a[8],t[e+18]=a[9],t[e+19]=a[10],t[e+20]=a[11];r[e+3]=s[0],r[e+9]=s[1],r[e+15]=s[2],r[e+21]=s[3],r[e+4]=r[e+10]=r[e+16]=r[e+22]=n,t[e+5]=t[e+11]=t[e+17]=t[e+23]=o},r}((pixi_projection||(pixi_projection={})).webgl.MultiTextureSpriteRenderer);PIXI.WebGLRenderer.registerPlugin("sprite2d",r)}(),function(t){var r=function(r){function e(e,i,n){var o=r.call(this,e,i,n)||this;return o.proj=new t.Projection2d(o.transform),o.pluginName="sprite2d",o.vertexData=new Float32Array(12),o}return __extends(e,r),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),e}(PIXI.Text);t.Text2d=r,r.prototype.calculateVertices=t.Sprite2d.prototype.calculateVertices,r.prototype.calculateTrimmedVertices=t.Sprite2d.prototype.calculateTrimmedVertices,r.prototype._calculateBounds=t.Sprite2d.prototype._calculateBounds}(pixi_projection||(pixi_projection={})),function(t){var r=new PIXI.TransformStatic,e=function(e){function i(r,i,n){var o=e.call(this,r,i,n)||this;return o.tileProj=new t.Projection2d(o.tileTransform),o.tileProj.reverseLocalOrder=!0,o.proj=new t.Projection2d(o.transform),o.pluginName="tilingSprite2d",o.uvRespectAnchor=!0,o}return __extends(i,e),Object.defineProperty(i.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),i.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateTransform(r),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},i}(PIXI.extras.TilingSprite);t.TilingSprite2d=e}(pixi_projection||(pixi_projection={})),function(t){var r="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec3 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);\n\n    vTextureCoord = uTransform * vec3(aTextureCoord, 1.0);\n}\n",e=new t.Matrix2d,i=PIXI.WRAP_MODES,n=PIXI.utils,o=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new PIXI.Shader(t,r,"\nvarying vec3 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord.xy / vTextureCoord.z - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new PIXI.Shader(t,r,"\n\tvarying vec3 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord.xy / vTextureCoord.z);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new PIXI.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},o.prototype.render=function(t){var r=this.renderer,o=this.quad;r.bindVao(o.vao);var a=o.vertices;a[0]=a[6]=t._width*-t.anchor.x,a[1]=a[3]=t._height*-t.anchor.y,a[2]=a[4]=t._width*(1-t.anchor.x),a[5]=a[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((a=o.uvs)[0]=a[6]=-t.anchor.x,a[1]=a[3]=-t.anchor.y,a[2]=a[4]=1-t.anchor.x,a[5]=a[7]=1-t.anchor.y),o.upload();var s=t._texture,u=s.baseTexture,c=t.tileProj.world,l=t.uvTransform,p=u.isPowerOfTwo&&s.frame.width===u.width&&s.frame.height===u.height;p&&(u._glTextures[r.CONTEXT_UID]?p=u.wrapMode!==i.CLAMP:u.wrapMode===i.CLAMP&&(u.wrapMode=i.REPEAT));var h=p?this.simpleShader:this.shader;r.bindShader(h),e.identity(),e.scale(s.width,s.height),e.prepend(c),e.scale(1/t._width,1/t._height),e.invert(),p?e.prepend(l.mapCoord):(h.uniforms.uMapCoord=l.mapCoord.toArray(!0),h.uniforms.uClampFrame=l.uClampFrame,h.uniforms.uClampOffset=l.uClampOffset),h.uniforms.uTransform=e.toArray(!0),h.uniforms.uColor=n.premultiplyTintToRgba(t.tint,t.worldAlpha,h.uniforms.uColor,u.premultipliedAlpha),h.uniforms.translationMatrix=t.proj.world.toArray(!0),h.uniforms.uSampler=r.bindTexture(s),r.setBlendMode(n.correctBlendMode(t.blendMode,u.premultipliedAlpha)),o.vao.draw(this.renderer.gl.TRIANGLES,6,0)},o}(PIXI.extras.TilingSpriteRenderer);t.TilingSprite2dRenderer=o,PIXI.WebGLRenderer.registerPlugin("tilingSprite2d",o)}(pixi_projection||(pixi_projection={})),function(t){var r=function(){function t(t){var r=this;this.onContextChange=function(t){r.gl=t,r.renderer.maskManager.pushSpriteMask=e},this.renderer=t,t.on("context",this.onContextChange)}return t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange)},t}();function e(r,e){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new t.SpriteMaskFilter2d(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e,r.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(r,i),this.alphaMaskIndex++}t.ProjectionsManager=r,PIXI.WebGLRenderer.registerPlugin("projections",r)}(pixi_projection||(pixi_projection={})),function(t){var r="\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec3 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n\tgl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n\tvTextureCoord = aTextureCoord;\n\tvMaskCoord = otherMatrix * vec3( aTextureCoord, 1.0);\n}\n",e="\nvarying vec3 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    vec2 uv = vMaskCoord.xy / vMaskCoord.z;\n    \n    vec2 text = abs( uv - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, uv);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n",i=new t.Matrix2d,n=function(n){function o(i){var o=n.call(this,r,e)||this;return o.maskMatrix=new t.Matrix2d,i.renderable=!1,o.maskSprite=i,o}return __extends(o,n),o.prototype.apply=function(t,r,e,i,n){var a=this.maskSprite;this.uniforms.mask=a.texture,this.uniforms.otherMatrix=o.calculateSpriteMatrix(n,this.maskMatrix,a),this.uniforms.alpha=a.worldAlpha,t.applyFilter(this,r,e)},o.calculateSpriteMatrix=function(t,r,e){var n=e.proj,o=t.sourceFrame,a=t.renderTarget.size,s=n&&!n._affine?n.world.copyTo(i):i.copyFrom(e.transform.worldTransform),u=e.texture.orig;return r.set(a.width,0,0,a.height,o.x,o.y),s.invert(),r.setToMult2d(s,r),r.scaleAndTranslate(1/u.width,1/u.height,e.anchor.x,e.anchor.y),r},o}(PIXI.Filter);t.SpriteMaskFilter2d=n}(pixi_projection||(pixi_projection={}));