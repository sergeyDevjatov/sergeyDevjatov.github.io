/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   4.1.1
 */

(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
	typeof define === 'function' && define.amd ? define('es6-promise.auto',factory) :
	(global.ES6Promise = factory());
}(this, (function () { 'use strict';

function objectOrFunction(x) {
  var type = typeof x;
  return x !== null && (type === 'object' || type === 'function');
}

function isFunction(x) {
  return typeof x === 'function';
}

var _isArray = undefined;
if (Array.isArray) {
  _isArray = Array.isArray;
} else {
  _isArray = function (x) {
    return Object.prototype.toString.call(x) === '[object Array]';
  };
}

var isArray = _isArray;

var len = 0;
var vertxNext = undefined;
var customSchedulerFn = undefined;

var asap = function asap(callback, arg) {
  queue[len] = callback;
  queue[len + 1] = arg;
  len += 2;
  if (len === 2) {
    // If len is 2, that means that we need to schedule an async flush.
    // If additional callbacks are queued before the queue is flushed, they
    // will be processed by this flush that we are scheduling.
    if (customSchedulerFn) {
      customSchedulerFn(flush);
    } else {
      scheduleFlush();
    }
  }
};

function setScheduler(scheduleFn) {
  customSchedulerFn = scheduleFn;
}

function setAsap(asapFn) {
  asap = asapFn;
}

var browserWindow = typeof window !== 'undefined' ? window : undefined;
var browserGlobal = browserWindow || {};
var BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;
var isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';

// test for web worker but not in IE10
var isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';

// node
function useNextTick() {
  // node version 0.10.x displays a deprecation warning when nextTick is used recursively
  // see https://github.com/cujojs/when/issues/410 for details
  return function () {
    return process.nextTick(flush);
  };
}

// vertx
function useVertxTimer() {
  if (typeof vertxNext !== 'undefined') {
    return function () {
      vertxNext(flush);
    };
  }

  return useSetTimeout();
}

function useMutationObserver() {
  var iterations = 0;
  var observer = new BrowserMutationObserver(flush);
  var node = document.createTextNode('');
  observer.observe(node, { characterData: true });

  return function () {
    node.data = iterations = ++iterations % 2;
  };
}

// web worker
function useMessageChannel() {
  var channel = new MessageChannel();
  channel.port1.onmessage = flush;
  return function () {
    return channel.port2.postMessage(0);
  };
}

function useSetTimeout() {
  // Store setTimeout reference so es6-promise will be unaffected by
  // other code modifying setTimeout (like sinon.useFakeTimers())
  var globalSetTimeout = setTimeout;
  return function () {
    return globalSetTimeout(flush, 1);
  };
}

var queue = new Array(1000);
function flush() {
  for (var i = 0; i < len; i += 2) {
    var callback = queue[i];
    var arg = queue[i + 1];

    callback(arg);

    queue[i] = undefined;
    queue[i + 1] = undefined;
  }

  len = 0;
}

function attemptVertx() {
  try {
    var r = require;
    var vertx = r('vertx');
    vertxNext = vertx.runOnLoop || vertx.runOnContext;
    return useVertxTimer();
  } catch (e) {
    return useSetTimeout();
  }
}

var scheduleFlush = undefined;
// Decide what async method to use to triggering processing of queued callbacks:
if (isNode) {
  scheduleFlush = useNextTick();
} else if (BrowserMutationObserver) {
  scheduleFlush = useMutationObserver();
} else if (isWorker) {
  scheduleFlush = useMessageChannel();
} else if (browserWindow === undefined && typeof require === 'function') {
  scheduleFlush = attemptVertx();
} else {
  scheduleFlush = useSetTimeout();
}

function then(onFulfillment, onRejection) {
  var _arguments = arguments;

  var parent = this;

  var child = new this.constructor(noop);

  if (child[PROMISE_ID] === undefined) {
    makePromise(child);
  }

  var _state = parent._state;

  if (_state) {
    (function () {
      var callback = _arguments[_state - 1];
      asap(function () {
        return invokeCallback(_state, child, callback, parent._result);
      });
    })();
  } else {
    subscribe(parent, child, onFulfillment, onRejection);
  }

  return child;
}

/**
  `Promise.resolve` returns a promise that will become resolved with the
  passed `value`. It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    resolve(1);
  });

  promise.then(function(value){
    // value === 1
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.resolve(1);

  promise.then(function(value){
    // value === 1
  });
  ```

  @method resolve
  @static
  @param {Any} value value that the returned promise will be resolved with
  Useful for tooling.
  @return {Promise} a promise that will become fulfilled with the given
  `value`
*/
function resolve$1(object) {
  /*jshint validthis:true */
  var Constructor = this;

  if (object && typeof object === 'object' && object.constructor === Constructor) {
    return object;
  }

  var promise = new Constructor(noop);
  resolve(promise, object);
  return promise;
}

var PROMISE_ID = Math.random().toString(36).substring(16);

function noop() {}

var PENDING = void 0;
var FULFILLED = 1;
var REJECTED = 2;

var GET_THEN_ERROR = new ErrorObject();

function selfFulfillment() {
  return new TypeError("You cannot resolve a promise with itself");
}

function cannotReturnOwn() {
  return new TypeError('A promises callback cannot return that same promise.');
}

function getThen(promise) {
  try {
    return promise.then;
  } catch (error) {
    GET_THEN_ERROR.error = error;
    return GET_THEN_ERROR;
  }
}

function tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {
  try {
    then$$1.call(value, fulfillmentHandler, rejectionHandler);
  } catch (e) {
    return e;
  }
}

function handleForeignThenable(promise, thenable, then$$1) {
  asap(function (promise) {
    var sealed = false;
    var error = tryThen(then$$1, thenable, function (value) {
      if (sealed) {
        return;
      }
      sealed = true;
      if (thenable !== value) {
        resolve(promise, value);
      } else {
        fulfill(promise, value);
      }
    }, function (reason) {
      if (sealed) {
        return;
      }
      sealed = true;

      reject(promise, reason);
    }, 'Settle: ' + (promise._label || ' unknown promise'));

    if (!sealed && error) {
      sealed = true;
      reject(promise, error);
    }
  }, promise);
}

function handleOwnThenable(promise, thenable) {
  if (thenable._state === FULFILLED) {
    fulfill(promise, thenable._result);
  } else if (thenable._state === REJECTED) {
    reject(promise, thenable._result);
  } else {
    subscribe(thenable, undefined, function (value) {
      return resolve(promise, value);
    }, function (reason) {
      return reject(promise, reason);
    });
  }
}

function handleMaybeThenable(promise, maybeThenable, then$$1) {
  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {
    handleOwnThenable(promise, maybeThenable);
  } else {
    if (then$$1 === GET_THEN_ERROR) {
      reject(promise, GET_THEN_ERROR.error);
      GET_THEN_ERROR.error = null;
    } else if (then$$1 === undefined) {
      fulfill(promise, maybeThenable);
    } else if (isFunction(then$$1)) {
      handleForeignThenable(promise, maybeThenable, then$$1);
    } else {
      fulfill(promise, maybeThenable);
    }
  }
}

function resolve(promise, value) {
  if (promise === value) {
    reject(promise, selfFulfillment());
  } else if (objectOrFunction(value)) {
    handleMaybeThenable(promise, value, getThen(value));
  } else {
    fulfill(promise, value);
  }
}

function publishRejection(promise) {
  if (promise._onerror) {
    promise._onerror(promise._result);
  }

  publish(promise);
}

function fulfill(promise, value) {
  if (promise._state !== PENDING) {
    return;
  }

  promise._result = value;
  promise._state = FULFILLED;

  if (promise._subscribers.length !== 0) {
    asap(publish, promise);
  }
}

function reject(promise, reason) {
  if (promise._state !== PENDING) {
    return;
  }
  promise._state = REJECTED;
  promise._result = reason;

  asap(publishRejection, promise);
}

function subscribe(parent, child, onFulfillment, onRejection) {
  var _subscribers = parent._subscribers;
  var length = _subscribers.length;

  parent._onerror = null;

  _subscribers[length] = child;
  _subscribers[length + FULFILLED] = onFulfillment;
  _subscribers[length + REJECTED] = onRejection;

  if (length === 0 && parent._state) {
    asap(publish, parent);
  }
}

function publish(promise) {
  var subscribers = promise._subscribers;
  var settled = promise._state;

  if (subscribers.length === 0) {
    return;
  }

  var child = undefined,
      callback = undefined,
      detail = promise._result;

  for (var i = 0; i < subscribers.length; i += 3) {
    child = subscribers[i];
    callback = subscribers[i + settled];

    if (child) {
      invokeCallback(settled, child, callback, detail);
    } else {
      callback(detail);
    }
  }

  promise._subscribers.length = 0;
}

function ErrorObject() {
  this.error = null;
}

var TRY_CATCH_ERROR = new ErrorObject();

function tryCatch(callback, detail) {
  try {
    return callback(detail);
  } catch (e) {
    TRY_CATCH_ERROR.error = e;
    return TRY_CATCH_ERROR;
  }
}

function invokeCallback(settled, promise, callback, detail) {
  var hasCallback = isFunction(callback),
      value = undefined,
      error = undefined,
      succeeded = undefined,
      failed = undefined;

  if (hasCallback) {
    value = tryCatch(callback, detail);

    if (value === TRY_CATCH_ERROR) {
      failed = true;
      error = value.error;
      value.error = null;
    } else {
      succeeded = true;
    }

    if (promise === value) {
      reject(promise, cannotReturnOwn());
      return;
    }
  } else {
    value = detail;
    succeeded = true;
  }

  if (promise._state !== PENDING) {
    // noop
  } else if (hasCallback && succeeded) {
      resolve(promise, value);
    } else if (failed) {
      reject(promise, error);
    } else if (settled === FULFILLED) {
      fulfill(promise, value);
    } else if (settled === REJECTED) {
      reject(promise, value);
    }
}

function initializePromise(promise, resolver) {
  try {
    resolver(function resolvePromise(value) {
      resolve(promise, value);
    }, function rejectPromise(reason) {
      reject(promise, reason);
    });
  } catch (e) {
    reject(promise, e);
  }
}

var id = 0;
function nextId() {
  return id++;
}

function makePromise(promise) {
  promise[PROMISE_ID] = id++;
  promise._state = undefined;
  promise._result = undefined;
  promise._subscribers = [];
}

function Enumerator$1(Constructor, input) {
  this._instanceConstructor = Constructor;
  this.promise = new Constructor(noop);

  if (!this.promise[PROMISE_ID]) {
    makePromise(this.promise);
  }

  if (isArray(input)) {
    this.length = input.length;
    this._remaining = input.length;

    this._result = new Array(this.length);

    if (this.length === 0) {
      fulfill(this.promise, this._result);
    } else {
      this.length = this.length || 0;
      this._enumerate(input);
      if (this._remaining === 0) {
        fulfill(this.promise, this._result);
      }
    }
  } else {
    reject(this.promise, validationError());
  }
}

function validationError() {
  return new Error('Array Methods must be provided an Array');
}

Enumerator$1.prototype._enumerate = function (input) {
  for (var i = 0; this._state === PENDING && i < input.length; i++) {
    this._eachEntry(input[i], i);
  }
};

Enumerator$1.prototype._eachEntry = function (entry, i) {
  var c = this._instanceConstructor;
  var resolve$$1 = c.resolve;

  if (resolve$$1 === resolve$1) {
    var _then = getThen(entry);

    if (_then === then && entry._state !== PENDING) {
      this._settledAt(entry._state, i, entry._result);
    } else if (typeof _then !== 'function') {
      this._remaining--;
      this._result[i] = entry;
    } else if (c === Promise$3) {
      var promise = new c(noop);
      handleMaybeThenable(promise, entry, _then);
      this._willSettleAt(promise, i);
    } else {
      this._willSettleAt(new c(function (resolve$$1) {
        return resolve$$1(entry);
      }), i);
    }
  } else {
    this._willSettleAt(resolve$$1(entry), i);
  }
};

Enumerator$1.prototype._settledAt = function (state, i, value) {
  var promise = this.promise;

  if (promise._state === PENDING) {
    this._remaining--;

    if (state === REJECTED) {
      reject(promise, value);
    } else {
      this._result[i] = value;
    }
  }

  if (this._remaining === 0) {
    fulfill(promise, this._result);
  }
};

Enumerator$1.prototype._willSettleAt = function (promise, i) {
  var enumerator = this;

  subscribe(promise, undefined, function (value) {
    return enumerator._settledAt(FULFILLED, i, value);
  }, function (reason) {
    return enumerator._settledAt(REJECTED, i, reason);
  });
};

/**
  `Promise.all` accepts an array of promises, and returns a new promise which
  is fulfilled with an array of fulfillment values for the passed promises, or
  rejected with the reason of the first passed promise to be rejected. It casts all
  elements of the passed iterable to promises as it runs this algorithm.

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = resolve(2);
  let promise3 = resolve(3);
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // The array here would be [ 1, 2, 3 ];
  });
  ```

  If any of the `promises` given to `all` are rejected, the first promise
  that is rejected will be given as an argument to the returned promises's
  rejection handler. For example:

  Example:

  ```javascript
  let promise1 = resolve(1);
  let promise2 = reject(new Error("2"));
  let promise3 = reject(new Error("3"));
  let promises = [ promise1, promise2, promise3 ];

  Promise.all(promises).then(function(array){
    // Code here never runs because there are rejected promises!
  }, function(error) {
    // error.message === "2"
  });
  ```

  @method all
  @static
  @param {Array} entries array of promises
  @param {String} label optional string for labeling the promise.
  Useful for tooling.
  @return {Promise} promise that is fulfilled when all `promises` have been
  fulfilled, or rejected if any of them become rejected.
  @static
*/
function all$1(entries) {
  return new Enumerator$1(this, entries).promise;
}

/**
  `Promise.race` returns a new promise which is settled in the same way as the
  first passed promise to settle.

  Example:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 2');
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // result === 'promise 2' because it was resolved before promise1
    // was resolved.
  });
  ```

  `Promise.race` is deterministic in that only the state of the first
  settled promise matters. For example, even if other promises given to the
  `promises` array argument are resolved, but the first settled promise has
  become rejected before the other promises became fulfilled, the returned
  promise will become rejected:

  ```javascript
  let promise1 = new Promise(function(resolve, reject){
    setTimeout(function(){
      resolve('promise 1');
    }, 200);
  });

  let promise2 = new Promise(function(resolve, reject){
    setTimeout(function(){
      reject(new Error('promise 2'));
    }, 100);
  });

  Promise.race([promise1, promise2]).then(function(result){
    // Code here never runs
  }, function(reason){
    // reason.message === 'promise 2' because promise 2 became rejected before
    // promise 1 became fulfilled
  });
  ```

  An example real-world use case is implementing timeouts:

  ```javascript
  Promise.race([ajax('foo.json'), timeout(5000)])
  ```

  @method race
  @static
  @param {Array} promises array of promises to observe
  Useful for tooling.
  @return {Promise} a promise which settles in the same way as the first passed
  promise to settle.
*/
function race$1(entries) {
  /*jshint validthis:true */
  var Constructor = this;

  if (!isArray(entries)) {
    return new Constructor(function (_, reject) {
      return reject(new TypeError('You must pass an array to race.'));
    });
  } else {
    return new Constructor(function (resolve, reject) {
      var length = entries.length;
      for (var i = 0; i < length; i++) {
        Constructor.resolve(entries[i]).then(resolve, reject);
      }
    });
  }
}

/**
  `Promise.reject` returns a promise rejected with the passed `reason`.
  It is shorthand for the following:

  ```javascript
  let promise = new Promise(function(resolve, reject){
    reject(new Error('WHOOPS'));
  });

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  Instead of writing the above, your code now simply becomes the following:

  ```javascript
  let promise = Promise.reject(new Error('WHOOPS'));

  promise.then(function(value){
    // Code here doesn't run because the promise is rejected!
  }, function(reason){
    // reason.message === 'WHOOPS'
  });
  ```

  @method reject
  @static
  @param {Any} reason value that the returned promise will be rejected with.
  Useful for tooling.
  @return {Promise} a promise rejected with the given `reason`.
*/
function reject$1(reason) {
  /*jshint validthis:true */
  var Constructor = this;
  var promise = new Constructor(noop);
  reject(promise, reason);
  return promise;
}

function needsResolver() {
  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');
}

function needsNew() {
  throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}

/**
  Promise objects represent the eventual result of an asynchronous operation. The
  primary way of interacting with a promise is through its `then` method, which
  registers callbacks to receive either a promise's eventual value or the reason
  why the promise cannot be fulfilled.

  Terminology
  -----------

  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.
  - `thenable` is an object or function that defines a `then` method.
  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).
  - `exception` is a value that is thrown using the throw statement.
  - `reason` is a value that indicates why a promise was rejected.
  - `settled` the final resting state of a promise, fulfilled or rejected.

  A promise can be in one of three states: pending, fulfilled, or rejected.

  Promises that are fulfilled have a fulfillment value and are in the fulfilled
  state.  Promises that are rejected have a rejection reason and are in the
  rejected state.  A fulfillment value is never a thenable.

  Promises can also be said to *resolve* a value.  If this value is also a
  promise, then the original promise's settled state will match the value's
  settled state.  So a promise that *resolves* a promise that rejects will
  itself reject, and a promise that *resolves* a promise that fulfills will
  itself fulfill.


  Basic Usage:
  ------------

  ```js
  let promise = new Promise(function(resolve, reject) {
    // on success
    resolve(value);

    // on failure
    reject(reason);
  });

  promise.then(function(value) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Advanced Usage:
  ---------------

  Promises shine when abstracting away asynchronous interactions such as
  `XMLHttpRequest`s.

  ```js
  function getJSON(url) {
    return new Promise(function(resolve, reject){
      let xhr = new XMLHttpRequest();

      xhr.open('GET', url);
      xhr.onreadystatechange = handler;
      xhr.responseType = 'json';
      xhr.setRequestHeader('Accept', 'application/json');
      xhr.send();

      function handler() {
        if (this.readyState === this.DONE) {
          if (this.status === 200) {
            resolve(this.response);
          } else {
            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));
          }
        }
      };
    });
  }

  getJSON('/posts.json').then(function(json) {
    // on fulfillment
  }, function(reason) {
    // on rejection
  });
  ```

  Unlike callbacks, promises are great composable primitives.

  ```js
  Promise.all([
    getJSON('/posts'),
    getJSON('/comments')
  ]).then(function(values){
    values[0] // => postsJSON
    values[1] // => commentsJSON

    return values;
  });
  ```

  @class Promise
  @param {function} resolver
  Useful for tooling.
  @constructor
*/
function Promise$3(resolver) {
  this[PROMISE_ID] = nextId();
  this._result = this._state = undefined;
  this._subscribers = [];

  if (noop !== resolver) {
    typeof resolver !== 'function' && needsResolver();
    this instanceof Promise$3 ? initializePromise(this, resolver) : needsNew();
  }
}

Promise$3.all = all$1;
Promise$3.race = race$1;
Promise$3.resolve = resolve$1;
Promise$3.reject = reject$1;
Promise$3._setScheduler = setScheduler;
Promise$3._setAsap = setAsap;
Promise$3._asap = asap;

Promise$3.prototype = {
  constructor: Promise$3,

  /**
    The primary way of interacting with a promise is through its `then` method,
    which registers callbacks to receive either a promise's eventual value or the
    reason why the promise cannot be fulfilled.
  
    ```js
    findUser().then(function(user){
      // user is available
    }, function(reason){
      // user is unavailable, and you are given the reason why
    });
    ```
  
    Chaining
    --------
  
    The return value of `then` is itself a promise.  This second, 'downstream'
    promise is resolved with the return value of the first promise's fulfillment
    or rejection handler, or rejected if the handler throws an exception.
  
    ```js
    findUser().then(function (user) {
      return user.name;
    }, function (reason) {
      return 'default name';
    }).then(function (userName) {
      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it
      // will be `'default name'`
    });
  
    findUser().then(function (user) {
      throw new Error('Found user, but still unhappy');
    }, function (reason) {
      throw new Error('`findUser` rejected and we're unhappy');
    }).then(function (value) {
      // never reached
    }, function (reason) {
      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.
      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.
    });
    ```
    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.
  
    ```js
    findUser().then(function (user) {
      throw new PedagogicalException('Upstream error');
    }).then(function (value) {
      // never reached
    }).then(function (value) {
      // never reached
    }, function (reason) {
      // The `PedgagocialException` is propagated all the way down to here
    });
    ```
  
    Assimilation
    ------------
  
    Sometimes the value you want to propagate to a downstream promise can only be
    retrieved asynchronously. This can be achieved by returning a promise in the
    fulfillment or rejection handler. The downstream promise will then be pending
    until the returned promise is settled. This is called *assimilation*.
  
    ```js
    findUser().then(function (user) {
      return findCommentsByAuthor(user);
    }).then(function (comments) {
      // The user's comments are now available
    });
    ```
  
    If the assimliated promise rejects, then the downstream promise will also reject.
  
    ```js
    findUser().then(function (user) {
      return findCommentsByAuthor(user);
    }).then(function (comments) {
      // If `findCommentsByAuthor` fulfills, we'll have the value here
    }, function (reason) {
      // If `findCommentsByAuthor` rejects, we'll have the reason here
    });
    ```
  
    Simple Example
    --------------
  
    Synchronous Example
  
    ```javascript
    let result;
  
    try {
      result = findResult();
      // success
    } catch(reason) {
      // failure
    }
    ```
  
    Errback Example
  
    ```js
    findResult(function(result, err){
      if (err) {
        // failure
      } else {
        // success
      }
    });
    ```
  
    Promise Example;
  
    ```javascript
    findResult().then(function(result){
      // success
    }, function(reason){
      // failure
    });
    ```
  
    Advanced Example
    --------------
  
    Synchronous Example
  
    ```javascript
    let author, books;
  
    try {
      author = findAuthor();
      books  = findBooksByAuthor(author);
      // success
    } catch(reason) {
      // failure
    }
    ```
  
    Errback Example
  
    ```js
  
    function foundBooks(books) {
  
    }
  
    function failure(reason) {
  
    }
  
    findAuthor(function(author, err){
      if (err) {
        failure(err);
        // failure
      } else {
        try {
          findBoooksByAuthor(author, function(books, err) {
            if (err) {
              failure(err);
            } else {
              try {
                foundBooks(books);
              } catch(reason) {
                failure(reason);
              }
            }
          });
        } catch(error) {
          failure(err);
        }
        // success
      }
    });
    ```
  
    Promise Example;
  
    ```javascript
    findAuthor().
      then(findBooksByAuthor).
      then(function(books){
        // found books
    }).catch(function(reason){
      // something went wrong
    });
    ```
  
    @method then
    @param {Function} onFulfilled
    @param {Function} onRejected
    Useful for tooling.
    @return {Promise}
  */
  then: then,

  /**
    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same
    as the catch block of a try/catch statement.
  
    ```js
    function findAuthor(){
      throw new Error('couldn't find that author');
    }
  
    // synchronous
    try {
      findAuthor();
    } catch(reason) {
      // something went wrong
    }
  
    // async with promises
    findAuthor().catch(function(reason){
      // something went wrong
    });
    ```
  
    @method catch
    @param {Function} onRejection
    Useful for tooling.
    @return {Promise}
  */
  'catch': function _catch(onRejection) {
    return this.then(null, onRejection);
  }
};

/*global self*/
function polyfill$1() {
    var local = undefined;

    if (typeof global !== 'undefined') {
        local = global;
    } else if (typeof self !== 'undefined') {
        local = self;
    } else {
        try {
            local = Function('return this')();
        } catch (e) {
            throw new Error('polyfill failed because global object is unavailable in this environment');
        }
    }

    var P = local.Promise;

    if (P) {
        var promiseToString = null;
        try {
            promiseToString = Object.prototype.toString.call(P.resolve());
        } catch (e) {
            // silently ignored
        }

        if (promiseToString === '[object Promise]' && !P.cast) {
            return;
        }
    }

    local.Promise = Promise$3;
}

// Strange compat..
Promise$3.polyfill = polyfill$1;
Promise$3.Promise = Promise$3;

Promise$3.polyfill();

return Promise$3;

})));

//# sourceMappingURL=es6-promise.auto.map
;

/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */
//Going sloppy to avoid 'use strict' string cost, but strict practices should
//be followed.
/*global setTimeout: false */

var requirejs, require, define;
(function (undef) {
    var main, req, makeMap, handlers,
        defined = {},
        waiting = {},
        config = {},
        defining = {},
        hasOwn = Object.prototype.hasOwnProperty,
        aps = [].slice,
        jsSuffixRegExp = /\.js$/;

    function hasProp(obj, prop) {
        return hasOwn.call(obj, prop);
    }

    /**
     * Given a relative module name, like ./something, normalize it to
     * a real name that can be mapped to a path.
     * @param {String} name the relative name
     * @param {String} baseName a real name that the name arg is relative
     * to.
     * @returns {String} normalized name
     */
    function normalize(name, baseName) {
        var nameParts, nameSegment, mapValue, foundMap, lastIndex,
            foundI, foundStarMap, starI, i, j, part, normalizedBaseParts,
            baseParts = baseName && baseName.split("/"),
            map = config.map,
            starMap = (map && map['*']) || {};

        //Adjust any relative paths.
        if (name) {
            name = name.split('/');
            lastIndex = name.length - 1;

            // If wanting node ID compatibility, strip .js from end
            // of IDs. Have to do this here, and not in nameToUrl
            // because node allows either .js or non .js to map
            // to same file.
            if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {
                name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');
            }

            // Starts with a '.' so need the baseName
            if (name[0].charAt(0) === '.' && baseParts) {
                //Convert baseName to array, and lop off the last part,
                //so that . matches that 'directory' and not name of the baseName's
                //module. For instance, baseName of 'one/two/three', maps to
                //'one/two/three.js', but we want the directory, 'one/two' for
                //this normalization.
                normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);
                name = normalizedBaseParts.concat(name);
            }

            //start trimDots
            for (i = 0; i < name.length; i++) {
                part = name[i];
                if (part === '.') {
                    name.splice(i, 1);
                    i -= 1;
                } else if (part === '..') {
                    // If at the start, or previous value is still ..,
                    // keep them so that when converted to a path it may
                    // still work when converted to a path, even though
                    // as an ID it is less than ideal. In larger point
                    // releases, may be better to just kick out an error.
                    if (i === 0 || (i === 1 && name[2] === '..') || name[i - 1] === '..') {
                        continue;
                    } else if (i > 0) {
                        name.splice(i - 1, 2);
                        i -= 2;
                    }
                }
            }
            //end trimDots

            name = name.join('/');
        }

        //Apply map config if available.
        if ((baseParts || starMap) && map) {
            nameParts = name.split('/');

            for (i = nameParts.length; i > 0; i -= 1) {
                nameSegment = nameParts.slice(0, i).join("/");

                if (baseParts) {
                    //Find the longest baseName segment match in the config.
                    //So, do joins on the biggest to smallest lengths of baseParts.
                    for (j = baseParts.length; j > 0; j -= 1) {
                        mapValue = map[baseParts.slice(0, j).join('/')];

                        //baseName segment has  config, find if it has one for
                        //this name.
                        if (mapValue) {
                            mapValue = mapValue[nameSegment];
                            if (mapValue) {
                                //Match, update name to the new value.
                                foundMap = mapValue;
                                foundI = i;
                                break;
                            }
                        }
                    }
                }

                if (foundMap) {
                    break;
                }

                //Check for a star map match, but just hold on to it,
                //if there is a shorter segment match later in a matching
                //config, then favor over this star map.
                if (!foundStarMap && starMap && starMap[nameSegment]) {
                    foundStarMap = starMap[nameSegment];
                    starI = i;
                }
            }

            if (!foundMap && foundStarMap) {
                foundMap = foundStarMap;
                foundI = starI;
            }

            if (foundMap) {
                nameParts.splice(0, foundI, foundMap);
                name = nameParts.join('/');
            }
        }

        return name;
    }

    function makeRequire(relName, forceSync) {
        return function () {
            //A version of a require function that passes a moduleName
            //value for items that may need to
            //look up paths relative to the moduleName
            var args = aps.call(arguments, 0);

            //If first arg is not require('string'), and there is only
            //one arg, it is the array form without a callback. Insert
            //a null so that the following concat is correct.
            if (typeof args[0] !== 'string' && args.length === 1) {
                args.push(null);
            }
            return req.apply(undef, args.concat([relName, forceSync]));
        };
    }

    function makeNormalize(relName) {
        return function (name) {
            return normalize(name, relName);
        };
    }

    function makeLoad(depName) {
        return function (value) {
            defined[depName] = value;
        };
    }

    function callDep(name) {
        if (hasProp(waiting, name)) {
            var args = waiting[name];
            delete waiting[name];
            defining[name] = true;
            main.apply(undef, args);
        }

        if (!hasProp(defined, name) && !hasProp(defining, name)) {
            throw new Error('No ' + name);
        }
        return defined[name];
    }

    //Turns a plugin!resource to [plugin, resource]
    //with the plugin being undefined if the name
    //did not have a plugin prefix.
    function splitPrefix(name) {
        var prefix,
            index = name ? name.indexOf('!') : -1;
        if (index > -1) {
            prefix = name.substring(0, index);
            name = name.substring(index + 1, name.length);
        }
        return [prefix, name];
    }

    //Creates a parts array for a relName where first part is plugin ID,
    //second part is resource ID. Assumes relName has already been normalized.
    function makeRelParts(relName) {
        return relName ? splitPrefix(relName) : [];
    }

    /**
     * Makes a name map, normalizing the name, and using a plugin
     * for normalization if necessary. Grabs a ref to plugin
     * too, as an optimization.
     */
    makeMap = function (name, relParts) {
        var plugin,
            parts = splitPrefix(name),
            prefix = parts[0],
            relResourceName = relParts[1];

        name = parts[1];

        if (prefix) {
            prefix = normalize(prefix, relResourceName);
            plugin = callDep(prefix);
        }

        //Normalize according
        if (prefix) {
            if (plugin && plugin.normalize) {
                name = plugin.normalize(name, makeNormalize(relResourceName));
            } else {
                name = normalize(name, relResourceName);
            }
        } else {
            name = normalize(name, relResourceName);
            parts = splitPrefix(name);
            prefix = parts[0];
            name = parts[1];
            if (prefix) {
                plugin = callDep(prefix);
            }
        }

        //Using ridiculous property names for space reasons
        return {
            f: prefix ? prefix + '!' + name : name, //fullName
            n: name,
            pr: prefix,
            p: plugin
        };
    };

    function makeConfig(name) {
        return function () {
            return (config && config.config && config.config[name]) || {};
        };
    }

    handlers = {
        require: function (name) {
            return makeRequire(name);
        },
        exports: function (name) {
            var e = defined[name];
            if (typeof e !== 'undefined') {
                return e;
            } else {
                return (defined[name] = {});
            }
        },
        module: function (name) {
            return {
                id: name,
                uri: '',
                exports: defined[name],
                config: makeConfig(name)
            };
        }
    };

    main = function (name, deps, callback, relName) {
        var cjsModule, depName, ret, map, i, relParts,
            args = [],
            callbackType = typeof callback,
            usingExports;

        //Use name if no relName
        relName = relName || name;
        relParts = makeRelParts(relName);

        //Call the callback to define the module, if necessary.
        if (callbackType === 'undefined' || callbackType === 'function') {
            //Pull out the defined dependencies and pass the ordered
            //values to the callback.
            //Default to [require, exports, module] if no deps
            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;
            for (i = 0; i < deps.length; i += 1) {
                map = makeMap(deps[i], relParts);
                depName = map.f;

                //Fast path CommonJS standard dependencies.
                if (depName === "require") {
                    args[i] = handlers.require(name);
                } else if (depName === "exports") {
                    //CommonJS module spec 1.1
                    args[i] = handlers.exports(name);
                    usingExports = true;
                } else if (depName === "module") {
                    //CommonJS module spec 1.1
                    cjsModule = args[i] = handlers.module(name);
                } else if (hasProp(defined, depName) ||
                           hasProp(waiting, depName) ||
                           hasProp(defining, depName)) {
                    args[i] = callDep(depName);
                } else if (map.p) {
                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});
                    args[i] = defined[depName];
                } else {
                    throw new Error(name + ' missing ' + depName);
                }
            }

            ret = callback ? callback.apply(defined[name], args) : undefined;

            if (name) {
                //If setting exports via "module" is in play,
                //favor that over return value and exports. After that,
                //favor a non-undefined return value over exports use.
                if (cjsModule && cjsModule.exports !== undef &&
                        cjsModule.exports !== defined[name]) {
                    defined[name] = cjsModule.exports;
                } else if (ret !== undef || !usingExports) {
                    //Use the return value from the function.
                    defined[name] = ret;
                }
            }
        } else if (name) {
            //May just be an object definition for the module. Only
            //worry about defining if have a module name.
            defined[name] = callback;
        }
    };

    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {
        if (typeof deps === "string") {
            if (handlers[deps]) {
                //callback in this case is really relName
                return handlers[deps](callback);
            }
            //Just return the module wanted. In this scenario, the
            //deps arg is the module name, and second arg (if passed)
            //is just the relName.
            //Normalize module name, if it contains . or ..
            return callDep(makeMap(deps, makeRelParts(callback)).f);
        } else if (!deps.splice) {
            //deps is a config object, not an array.
            config = deps;
            if (config.deps) {
                req(config.deps, config.callback);
            }
            if (!callback) {
                return;
            }

            if (callback.splice) {
                //callback is an array, which means it is a dependency list.
                //Adjust args if there are dependencies
                deps = callback;
                callback = relName;
                relName = null;
            } else {
                deps = undef;
            }
        }

        //Support require(['a'])
        callback = callback || function () {};

        //If relName is a function, it is an errback handler,
        //so remove it.
        if (typeof relName === 'function') {
            relName = forceSync;
            forceSync = alt;
        }

        //Simulate async callback;
        if (forceSync) {
            main(undef, deps, callback, relName);
        } else {
            //Using a non-zero value because of concern for what old browsers
            //do, and latest browsers "upgrade" to 4 if lower value is used:
            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:
            //If want a value immediately, use require('id') instead -- something
            //that works in almond on the global level, but not guaranteed and
            //unlikely to work in other AMD implementations.
            setTimeout(function () {
                main(undef, deps, callback, relName);
            }, 4);
        }

        return req;
    };

    /**
     * Just drops the config on the floor, but returns req in case
     * the config return value is used.
     */
    req.config = function (cfg) {
        return req(cfg);
    };

    /**
     * Expose module registry for debugging and tooling
     */
    requirejs._defined = defined;

    define = function (name, deps, callback) {
        if (typeof name !== 'string') {
            throw new Error('See almond README: incorrect module build, no module name');
        }

        //This module may not have dependencies
        if (!deps.splice) {
            //deps is not an array, so probably means
            //an object literal or factory function for
            //the value. Adjust args.
            callback = deps;
            deps = [];
        }

        if (!hasProp(defined, name) && !hasProp(waiting, name)) {
            waiting[name] = [name, deps, callback];
        }
    };

    define.amd = {
        jQuery: true
    };
}());

define("almond", function(){});


/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.4.2
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
(function () {
  'use strict';

  var root = typeof window === 'object' ? window : {};
  var NODE_JS = !root.JS_MD5_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;
  if (NODE_JS) {
    root = global;
  }
  var COMMON_JS = !root.JS_MD5_NO_COMMON_JS && typeof module === 'object' && module.exports;
  var AMD = typeof define === 'function' && define.amd;
  var ARRAY_BUFFER = !root.JS_MD5_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';
  var HEX_CHARS = '0123456789abcdef'.split('');
  var EXTRA = [128, 32768, 8388608, -2147483648];
  var SHIFT = [0, 8, 16, 24];
  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'buffer', 'arrayBuffer'];

  var blocks = [], buffer8;
  if (ARRAY_BUFFER) {
    var buffer = new ArrayBuffer(68);
    buffer8 = new Uint8Array(buffer);
    blocks = new Uint32Array(buffer);
  }

  /**
   * @method hex
   * @memberof md5
   * @description Output hash as hex string
   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash
   * @returns {String} Hex string
   * @example
   * md5.hex('The quick brown fox jumps over the lazy dog');
   * // equal to
   * md5('The quick brown fox jumps over the lazy dog');
   */
  /**
   * @method digest
   * @memberof md5
   * @description Output hash as bytes array
   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash
   * @returns {Array} Bytes array
   * @example
   * md5.digest('The quick brown fox jumps over the lazy dog');
   */
  /**
   * @method array
   * @memberof md5
   * @description Output hash as bytes array
   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash
   * @returns {Array} Bytes array
   * @example
   * md5.array('The quick brown fox jumps over the lazy dog');
   */
  /**
   * @method arrayBuffer
   * @memberof md5
   * @description Output hash as ArrayBuffer
   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash
   * @returns {ArrayBuffer} ArrayBuffer
   * @example
   * md5.arrayBuffer('The quick brown fox jumps over the lazy dog');
   */
  /**
   * @method buffer
   * @deprecated This maybe confuse with Buffer in node.js. Please use arrayBuffer instead.
   * @memberof md5
   * @description Output hash as ArrayBuffer
   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash
   * @returns {ArrayBuffer} ArrayBuffer
   * @example
   * md5.buffer('The quick brown fox jumps over the lazy dog');
   */
  var createOutputMethod = function (outputType) {
    return function (message) {
      return new Md5(true).update(message)[outputType]();
    };
  };

  /**
   * @method create
   * @memberof md5
   * @description Create Md5 object
   * @returns {Md5} Md5 object.
   * @example
   * var hash = md5.create();
   */
  /**
   * @method update
   * @memberof md5
   * @description Create and update Md5 object
   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash
   * @returns {Md5} Md5 object.
   * @example
   * var hash = md5.update('The quick brown fox jumps over the lazy dog');
   * // equal to
   * var hash = md5.create();
   * hash.update('The quick brown fox jumps over the lazy dog');
   */
  var createMethod = function () {
    var method = createOutputMethod('hex');
    if (NODE_JS) {
      method = nodeWrap(method);
    }
    method.create = function () {
      return new Md5();
    };
    method.update = function (message) {
      return method.create().update(message);
    };
    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {
      var type = OUTPUT_TYPES[i];
      method[type] = createOutputMethod(type);
    }
    return method;
  };

  var nodeWrap = function (method) {
    var crypto = require('crypto');
    var Buffer = require('buffer').Buffer;
    var nodeMethod = function (message) {
      if (typeof message === 'string') {
        return crypto.createHash('md5').update(message, 'utf8').digest('hex');
      } else if (message.constructor === ArrayBuffer) {
        message = new Uint8Array(message);
      } else if (message.length === undefined) {
        return method(message);
      }
      return crypto.createHash('md5').update(new Buffer(message)).digest('hex');
    };
    return nodeMethod;
  };

  /**
   * Md5 class
   * @class Md5
   * @description This is internal class.
   * @see {@link md5.create}
   */
  function Md5(sharedMemory) {
    if (sharedMemory) {
      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =
      blocks[4] = blocks[5] = blocks[6] = blocks[7] =
      blocks[8] = blocks[9] = blocks[10] = blocks[11] =
      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;
      this.blocks = blocks;
      this.buffer8 = buffer8;
    } else {
      if (ARRAY_BUFFER) {
        var buffer = new ArrayBuffer(68);
        this.buffer8 = new Uint8Array(buffer);
        this.blocks = new Uint32Array(buffer);
      } else {
        this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
      }
    }
    this.h0 = this.h1 = this.h2 = this.h3 = this.start = this.bytes = 0;
    this.finalized = this.hashed = false;
    this.first = true;
  }

  /**
   * @method update
   * @memberof Md5
   * @instance
   * @description Update hash
   * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash
   * @returns {Md5} Md5 object.
   * @see {@link md5.update}
   */
  Md5.prototype.update = function (message) {
    if (this.finalized) {
      return;
    }
    var notString = typeof(message) != 'string';
    if (notString && message.constructor == root.ArrayBuffer) {
      message = new Uint8Array(message);
    }
    var code, index = 0, i, length = message.length || 0, blocks = this.blocks;
    var buffer8 = this.buffer8;

    while (index < length) {
      if (this.hashed) {
        this.hashed = false;
        blocks[0] = blocks[16];
        blocks[16] = blocks[1] = blocks[2] = blocks[3] =
        blocks[4] = blocks[5] = blocks[6] = blocks[7] =
        blocks[8] = blocks[9] = blocks[10] = blocks[11] =
        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;
      }

      if (notString) {
        if (ARRAY_BUFFER) {
          for (i = this.start; index < length && i < 64; ++index) {
            buffer8[i++] = message[index];
          }
        } else {
          for (i = this.start; index < length && i < 64; ++index) {
            blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];
          }
        }
      } else {
        if (ARRAY_BUFFER) {
          for (i = this.start; index < length && i < 64; ++index) {
            code = message.charCodeAt(index);
            if (code < 0x80) {
              buffer8[i++] = code;
            } else if (code < 0x800) {
              buffer8[i++] = 0xc0 | (code >> 6);
              buffer8[i++] = 0x80 | (code & 0x3f);
            } else if (code < 0xd800 || code >= 0xe000) {
              buffer8[i++] = 0xe0 | (code >> 12);
              buffer8[i++] = 0x80 | ((code >> 6) & 0x3f);
              buffer8[i++] = 0x80 | (code & 0x3f);
            } else {
              code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));
              buffer8[i++] = 0xf0 | (code >> 18);
              buffer8[i++] = 0x80 | ((code >> 12) & 0x3f);
              buffer8[i++] = 0x80 | ((code >> 6) & 0x3f);
              buffer8[i++] = 0x80 | (code & 0x3f);
            }
          }
        } else {
          for (i = this.start; index < length && i < 64; ++index) {
            code = message.charCodeAt(index);
            if (code < 0x80) {
              blocks[i >> 2] |= code << SHIFT[i++ & 3];
            } else if (code < 0x800) {
              blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];
              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];
            } else if (code < 0xd800 || code >= 0xe000) {
              blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];
              blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];
              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];
            } else {
              code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));
              blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];
              blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];
              blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];
              blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];
            }
          }
        }
      }
      this.lastByteIndex = i;
      this.bytes += i - this.start;
      if (i >= 64) {
        this.start = i - 64;
        this.hash();
        this.hashed = true;
      } else {
        this.start = i;
      }
    }
    return this;
  };

  Md5.prototype.finalize = function () {
    if (this.finalized) {
      return;
    }
    this.finalized = true;
    var blocks = this.blocks, i = this.lastByteIndex;
    blocks[i >> 2] |= EXTRA[i & 3];
    if (i >= 56) {
      if (!this.hashed) {
        this.hash();
      }
      blocks[0] = blocks[16];
      blocks[16] = blocks[1] = blocks[2] = blocks[3] =
      blocks[4] = blocks[5] = blocks[6] = blocks[7] =
      blocks[8] = blocks[9] = blocks[10] = blocks[11] =
      blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;
    }
    blocks[14] = this.bytes << 3;
    this.hash();
  };

  Md5.prototype.hash = function () {
    var a, b, c, d, bc, da, blocks = this.blocks;

    if (this.first) {
      a = blocks[0] - 680876937;
      a = (a << 7 | a >>> 25) - 271733879 << 0;
      d = (-1732584194 ^ a & 2004318071) + blocks[1] - 117830708;
      d = (d << 12 | d >>> 20) + a << 0;
      c = (-271733879 ^ (d & (a ^ -271733879))) + blocks[2] - 1126478375;
      c = (c << 17 | c >>> 15) + d << 0;
      b = (a ^ (c & (d ^ a))) + blocks[3] - 1316259209;
      b = (b << 22 | b >>> 10) + c << 0;
    } else {
      a = this.h0;
      b = this.h1;
      c = this.h2;
      d = this.h3;
      a += (d ^ (b & (c ^ d))) + blocks[0] - 680876936;
      a = (a << 7 | a >>> 25) + b << 0;
      d += (c ^ (a & (b ^ c))) + blocks[1] - 389564586;
      d = (d << 12 | d >>> 20) + a << 0;
      c += (b ^ (d & (a ^ b))) + blocks[2] + 606105819;
      c = (c << 17 | c >>> 15) + d << 0;
      b += (a ^ (c & (d ^ a))) + blocks[3] - 1044525330;
      b = (b << 22 | b >>> 10) + c << 0;
    }

    a += (d ^ (b & (c ^ d))) + blocks[4] - 176418897;
    a = (a << 7 | a >>> 25) + b << 0;
    d += (c ^ (a & (b ^ c))) + blocks[5] + 1200080426;
    d = (d << 12 | d >>> 20) + a << 0;
    c += (b ^ (d & (a ^ b))) + blocks[6] - 1473231341;
    c = (c << 17 | c >>> 15) + d << 0;
    b += (a ^ (c & (d ^ a))) + blocks[7] - 45705983;
    b = (b << 22 | b >>> 10) + c << 0;
    a += (d ^ (b & (c ^ d))) + blocks[8] + 1770035416;
    a = (a << 7 | a >>> 25) + b << 0;
    d += (c ^ (a & (b ^ c))) + blocks[9] - 1958414417;
    d = (d << 12 | d >>> 20) + a << 0;
    c += (b ^ (d & (a ^ b))) + blocks[10] - 42063;
    c = (c << 17 | c >>> 15) + d << 0;
    b += (a ^ (c & (d ^ a))) + blocks[11] - 1990404162;
    b = (b << 22 | b >>> 10) + c << 0;
    a += (d ^ (b & (c ^ d))) + blocks[12] + 1804603682;
    a = (a << 7 | a >>> 25) + b << 0;
    d += (c ^ (a & (b ^ c))) + blocks[13] - 40341101;
    d = (d << 12 | d >>> 20) + a << 0;
    c += (b ^ (d & (a ^ b))) + blocks[14] - 1502002290;
    c = (c << 17 | c >>> 15) + d << 0;
    b += (a ^ (c & (d ^ a))) + blocks[15] + 1236535329;
    b = (b << 22 | b >>> 10) + c << 0;
    a += (c ^ (d & (b ^ c))) + blocks[1] - 165796510;
    a = (a << 5 | a >>> 27) + b << 0;
    d += (b ^ (c & (a ^ b))) + blocks[6] - 1069501632;
    d = (d << 9 | d >>> 23) + a << 0;
    c += (a ^ (b & (d ^ a))) + blocks[11] + 643717713;
    c = (c << 14 | c >>> 18) + d << 0;
    b += (d ^ (a & (c ^ d))) + blocks[0] - 373897302;
    b = (b << 20 | b >>> 12) + c << 0;
    a += (c ^ (d & (b ^ c))) + blocks[5] - 701558691;
    a = (a << 5 | a >>> 27) + b << 0;
    d += (b ^ (c & (a ^ b))) + blocks[10] + 38016083;
    d = (d << 9 | d >>> 23) + a << 0;
    c += (a ^ (b & (d ^ a))) + blocks[15] - 660478335;
    c = (c << 14 | c >>> 18) + d << 0;
    b += (d ^ (a & (c ^ d))) + blocks[4] - 405537848;
    b = (b << 20 | b >>> 12) + c << 0;
    a += (c ^ (d & (b ^ c))) + blocks[9] + 568446438;
    a = (a << 5 | a >>> 27) + b << 0;
    d += (b ^ (c & (a ^ b))) + blocks[14] - 1019803690;
    d = (d << 9 | d >>> 23) + a << 0;
    c += (a ^ (b & (d ^ a))) + blocks[3] - 187363961;
    c = (c << 14 | c >>> 18) + d << 0;
    b += (d ^ (a & (c ^ d))) + blocks[8] + 1163531501;
    b = (b << 20 | b >>> 12) + c << 0;
    a += (c ^ (d & (b ^ c))) + blocks[13] - 1444681467;
    a = (a << 5 | a >>> 27) + b << 0;
    d += (b ^ (c & (a ^ b))) + blocks[2] - 51403784;
    d = (d << 9 | d >>> 23) + a << 0;
    c += (a ^ (b & (d ^ a))) + blocks[7] + 1735328473;
    c = (c << 14 | c >>> 18) + d << 0;
    b += (d ^ (a & (c ^ d))) + blocks[12] - 1926607734;
    b = (b << 20 | b >>> 12) + c << 0;
    bc = b ^ c;
    a += (bc ^ d) + blocks[5] - 378558;
    a = (a << 4 | a >>> 28) + b << 0;
    d += (bc ^ a) + blocks[8] - 2022574463;
    d = (d << 11 | d >>> 21) + a << 0;
    da = d ^ a;
    c += (da ^ b) + blocks[11] + 1839030562;
    c = (c << 16 | c >>> 16) + d << 0;
    b += (da ^ c) + blocks[14] - 35309556;
    b = (b << 23 | b >>> 9) + c << 0;
    bc = b ^ c;
    a += (bc ^ d) + blocks[1] - 1530992060;
    a = (a << 4 | a >>> 28) + b << 0;
    d += (bc ^ a) + blocks[4] + 1272893353;
    d = (d << 11 | d >>> 21) + a << 0;
    da = d ^ a;
    c += (da ^ b) + blocks[7] - 155497632;
    c = (c << 16 | c >>> 16) + d << 0;
    b += (da ^ c) + blocks[10] - 1094730640;
    b = (b << 23 | b >>> 9) + c << 0;
    bc = b ^ c;
    a += (bc ^ d) + blocks[13] + 681279174;
    a = (a << 4 | a >>> 28) + b << 0;
    d += (bc ^ a) + blocks[0] - 358537222;
    d = (d << 11 | d >>> 21) + a << 0;
    da = d ^ a;
    c += (da ^ b) + blocks[3] - 722521979;
    c = (c << 16 | c >>> 16) + d << 0;
    b += (da ^ c) + blocks[6] + 76029189;
    b = (b << 23 | b >>> 9) + c << 0;
    bc = b ^ c;
    a += (bc ^ d) + blocks[9] - 640364487;
    a = (a << 4 | a >>> 28) + b << 0;
    d += (bc ^ a) + blocks[12] - 421815835;
    d = (d << 11 | d >>> 21) + a << 0;
    da = d ^ a;
    c += (da ^ b) + blocks[15] + 530742520;
    c = (c << 16 | c >>> 16) + d << 0;
    b += (da ^ c) + blocks[2] - 995338651;
    b = (b << 23 | b >>> 9) + c << 0;
    a += (c ^ (b | ~d)) + blocks[0] - 198630844;
    a = (a << 6 | a >>> 26) + b << 0;
    d += (b ^ (a | ~c)) + blocks[7] + 1126891415;
    d = (d << 10 | d >>> 22) + a << 0;
    c += (a ^ (d | ~b)) + blocks[14] - 1416354905;
    c = (c << 15 | c >>> 17) + d << 0;
    b += (d ^ (c | ~a)) + blocks[5] - 57434055;
    b = (b << 21 | b >>> 11) + c << 0;
    a += (c ^ (b | ~d)) + blocks[12] + 1700485571;
    a = (a << 6 | a >>> 26) + b << 0;
    d += (b ^ (a | ~c)) + blocks[3] - 1894986606;
    d = (d << 10 | d >>> 22) + a << 0;
    c += (a ^ (d | ~b)) + blocks[10] - 1051523;
    c = (c << 15 | c >>> 17) + d << 0;
    b += (d ^ (c | ~a)) + blocks[1] - 2054922799;
    b = (b << 21 | b >>> 11) + c << 0;
    a += (c ^ (b | ~d)) + blocks[8] + 1873313359;
    a = (a << 6 | a >>> 26) + b << 0;
    d += (b ^ (a | ~c)) + blocks[15] - 30611744;
    d = (d << 10 | d >>> 22) + a << 0;
    c += (a ^ (d | ~b)) + blocks[6] - 1560198380;
    c = (c << 15 | c >>> 17) + d << 0;
    b += (d ^ (c | ~a)) + blocks[13] + 1309151649;
    b = (b << 21 | b >>> 11) + c << 0;
    a += (c ^ (b | ~d)) + blocks[4] - 145523070;
    a = (a << 6 | a >>> 26) + b << 0;
    d += (b ^ (a | ~c)) + blocks[11] - 1120210379;
    d = (d << 10 | d >>> 22) + a << 0;
    c += (a ^ (d | ~b)) + blocks[2] + 718787259;
    c = (c << 15 | c >>> 17) + d << 0;
    b += (d ^ (c | ~a)) + blocks[9] - 343485551;
    b = (b << 21 | b >>> 11) + c << 0;

    if (this.first) {
      this.h0 = a + 1732584193 << 0;
      this.h1 = b - 271733879 << 0;
      this.h2 = c - 1732584194 << 0;
      this.h3 = d + 271733878 << 0;
      this.first = false;
    } else {
      this.h0 = this.h0 + a << 0;
      this.h1 = this.h1 + b << 0;
      this.h2 = this.h2 + c << 0;
      this.h3 = this.h3 + d << 0;
    }
  };

  /**
   * @method hex
   * @memberof Md5
   * @instance
   * @description Output hash as hex string
   * @returns {String} Hex string
   * @see {@link md5.hex}
   * @example
   * hash.hex();
   */
  Md5.prototype.hex = function () {
    this.finalize();

    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3;

    return HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +
       HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +
       HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +
       HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +
       HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +
       HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +
       HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +
       HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +
       HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +
       HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +
       HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +
       HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +
       HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +
       HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +
       HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +
       HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F];
  };

  /**
   * @method toString
   * @memberof Md5
   * @instance
   * @description Output hash as hex string
   * @returns {String} Hex string
   * @see {@link md5.hex}
   * @example
   * hash.toString();
   */
  Md5.prototype.toString = Md5.prototype.hex;

  /**
   * @method digest
   * @memberof Md5
   * @instance
   * @description Output hash as bytes array
   * @returns {Array} Bytes array
   * @see {@link md5.digest}
   * @example
   * hash.digest();
   */
  Md5.prototype.digest = function () {
    this.finalize();

    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3;
    return [
      h0 & 0xFF, (h0 >> 8) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 24) & 0xFF,
      h1 & 0xFF, (h1 >> 8) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 24) & 0xFF,
      h2 & 0xFF, (h2 >> 8) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 24) & 0xFF,
      h3 & 0xFF, (h3 >> 8) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 24) & 0xFF
    ];
  };

  /**
   * @method array
   * @memberof Md5
   * @instance
   * @description Output hash as bytes array
   * @returns {Array} Bytes array
   * @see {@link md5.array}
   * @example
   * hash.array();
   */
  Md5.prototype.array = Md5.prototype.digest;

  /**
   * @method arrayBuffer
   * @memberof Md5
   * @instance
   * @description Output hash as ArrayBuffer
   * @returns {ArrayBuffer} ArrayBuffer
   * @see {@link md5.arrayBuffer}
   * @example
   * hash.arrayBuffer();
   */
  Md5.prototype.arrayBuffer = function () {
    this.finalize();

    var buffer = new ArrayBuffer(16);
    var blocks = new Uint32Array(buffer);
    blocks[0] = this.h0;
    blocks[1] = this.h1;
    blocks[2] = this.h2;
    blocks[3] = this.h3;
    return buffer;
  };

  /**
   * @method buffer
   * @deprecated This maybe confuse with Buffer in node.js. Please use arrayBuffer instead.
   * @memberof Md5
   * @instance
   * @description Output hash as ArrayBuffer
   * @returns {ArrayBuffer} ArrayBuffer
   * @see {@link md5.buffer}
   * @example
   * hash.buffer();
   */
  Md5.prototype.buffer = Md5.prototype.arrayBuffer;

  var exports = createMethod();

  if (COMMON_JS) {
    module.exports = exports;
  } else {
    /**
     * @method md5
     * @description Md5 hash function, export to global in browsers.
     * @param {String|Array|Uint8Array|ArrayBuffer} message message to hash
     * @returns {String} md5 hashes
     * @example
     * md5(''); // d41d8cd98f00b204e9800998ecf8427e
     * md5('The quick brown fox jumps over the lazy dog'); // 9e107d9d372bb6826bd81d3542a419d6
     * md5('The quick brown fox jumps over the lazy dog.'); // e4d909c290d0fb1ca068ffaddf22cbd0
     *
     * // It also supports UTF-8 encoding
     * md5(''); // a7bac2239fcdcb3a067903d8077c4a07
     *
     * // It also supports byte `Array`, `Uint8Array`, `ArrayBuffer`
     * md5([]); // d41d8cd98f00b204e9800998ecf8427e
     * md5(new Uint8Array([])); // d41d8cd98f00b204e9800998ecf8427e
     */
    root.md5 = exports;
    if (AMD) {
      define('md5',[],function () {
        return exports;
      });
    }
  }
})();

define("ZyngaMd5", ["require", "exports", "md5"], function (require, exports, md5) {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.default = md5; // Just a wrapper to rename a developer supplied md5 to ZyngaMd5
	return md5;
});


!function() {
    'use strict';
    function VNode() {}
    function h(nodeName, attributes) {
        var lastSimple, child, simple, i, children = EMPTY_CHILDREN;
        for (i = arguments.length; i-- > 2; ) stack.push(arguments[i]);
        if (attributes && null != attributes.children) {
            if (!stack.length) stack.push(attributes.children);
            delete attributes.children;
        }
        while (stack.length) if ((child = stack.pop()) && void 0 !== child.pop) for (i = child.length; i--; ) stack.push(child[i]); else {
            if ('boolean' == typeof child) child = null;
            if (simple = 'function' != typeof nodeName) if (null == child) child = ''; else if ('number' == typeof child) child = String(child); else if ('string' != typeof child) simple = !1;
            if (simple && lastSimple) children[children.length - 1] += child; else if (children === EMPTY_CHILDREN) children = [ child ]; else children.push(child);
            lastSimple = simple;
        }
        var p = new VNode();
        p.nodeName = nodeName;
        p.children = children;
        p.attributes = null == attributes ? void 0 : attributes;
        p.key = null == attributes ? void 0 : attributes.key;
        if (void 0 !== options.vnode) options.vnode(p);
        return p;
    }
    function extend(obj, props) {
        for (var i in props) obj[i] = props[i];
        return obj;
    }
    function cloneElement(vnode, props) {
        return h(vnode.nodeName, extend(extend({}, vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);
    }
    function enqueueRender(component) {
        if (!component.__d && (component.__d = !0) && 1 == items.push(component)) (options.debounceRendering || defer)(rerender);
    }
    function rerender() {
        var p, list = items;
        items = [];
        while (p = list.pop()) if (p.__d) renderComponent(p);
    }
    function isSameNodeType(node, vnode, hydrating) {
        if ('string' == typeof vnode || 'number' == typeof vnode) return void 0 !== node.splitText;
        if ('string' == typeof vnode.nodeName) return !node._componentConstructor && isNamedNode(node, vnode.nodeName); else return hydrating || node._componentConstructor === vnode.nodeName;
    }
    function isNamedNode(node, nodeName) {
        return node.__n === nodeName || node.nodeName.toLowerCase() === nodeName.toLowerCase();
    }
    function getNodeProps(vnode) {
        var props = extend({}, vnode.attributes);
        props.children = vnode.children;
        var defaultProps = vnode.nodeName.defaultProps;
        if (void 0 !== defaultProps) for (var i in defaultProps) if (void 0 === props[i]) props[i] = defaultProps[i];
        return props;
    }
    function createNode(nodeName, isSvg) {
        var node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);
        node.__n = nodeName;
        return node;
    }
    function removeNode(node) {
        var parentNode = node.parentNode;
        if (parentNode) parentNode.removeChild(node);
    }
    function setAccessor(node, name, old, value, isSvg) {
        if ('className' === name) name = 'class';
        if ('key' === name) ; else if ('ref' === name) {
            if (old) old(null);
            if (value) value(node);
        } else if ('class' === name && !isSvg) node.className = value || ''; else if ('style' === name) {
            if (!value || 'string' == typeof value || 'string' == typeof old) node.style.cssText = value || '';
            if (value && 'object' == typeof value) {
                if ('string' != typeof old) for (var i in old) if (!(i in value)) node.style[i] = '';
                for (var i in value) node.style[i] = 'number' == typeof value[i] && !1 === IS_NON_DIMENSIONAL.test(i) ? value[i] + 'px' : value[i];
            }
        } else if ('dangerouslySetInnerHTML' === name) {
            if (value) node.innerHTML = value.__html || '';
        } else if ('o' == name[0] && 'n' == name[1]) {
            var useCapture = name !== (name = name.replace(/Capture$/, ''));
            name = name.toLowerCase().substring(2);
            if (value) {
                if (!old) node.addEventListener(name, eventProxy, useCapture);
            } else node.removeEventListener(name, eventProxy, useCapture);
            (node.__l || (node.__l = {}))[name] = value;
        } else if ('list' !== name && 'type' !== name && !isSvg && name in node) {
            setProperty(node, name, null == value ? '' : value);
            if (null == value || !1 === value) node.removeAttribute(name);
        } else {
            var ns = isSvg && name !== (name = name.replace(/^xlink\:?/, ''));
            if (null == value || !1 === value) if (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase()); else node.removeAttribute(name); else if ('function' != typeof value) if (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value); else node.setAttribute(name, value);
        }
    }
    function setProperty(node, name, value) {
        try {
            node[name] = value;
        } catch (e) {}
    }
    function eventProxy(e) {
        return this.__l[e.type](options.event && options.event(e) || e);
    }
    function flushMounts() {
        var c;
        while (c = mounts.pop()) {
            if (options.afterMount) options.afterMount(c);
            if (c.componentDidMount) c.componentDidMount();
        }
    }
    function diff(dom, vnode, context, mountAll, parent, componentRoot) {
        if (!diffLevel++) {
            isSvgMode = null != parent && void 0 !== parent.ownerSVGElement;
            hydrating = null != dom && !('__preactattr_' in dom);
        }
        var ret = idiff(dom, vnode, context, mountAll, componentRoot);
        if (parent && ret.parentNode !== parent) parent.appendChild(ret);
        if (!--diffLevel) {
            hydrating = !1;
            if (!componentRoot) flushMounts();
        }
        return ret;
    }
    function idiff(dom, vnode, context, mountAll, componentRoot) {
        var out = dom, prevSvgMode = isSvgMode;
        if (null == vnode || 'boolean' == typeof vnode) vnode = '';
        if ('string' == typeof vnode || 'number' == typeof vnode) {
            if (dom && void 0 !== dom.splitText && dom.parentNode && (!dom._component || componentRoot)) {
                if (dom.nodeValue != vnode) dom.nodeValue = vnode;
            } else {
                out = document.createTextNode(vnode);
                if (dom) {
                    if (dom.parentNode) dom.parentNode.replaceChild(out, dom);
                    recollectNodeTree(dom, !0);
                }
            }
            out.__preactattr_ = !0;
            return out;
        }
        var vnodeName = vnode.nodeName;
        if ('function' == typeof vnodeName) return buildComponentFromVNode(dom, vnode, context, mountAll);
        isSvgMode = 'svg' === vnodeName ? !0 : 'foreignObject' === vnodeName ? !1 : isSvgMode;
        vnodeName = String(vnodeName);
        if (!dom || !isNamedNode(dom, vnodeName)) {
            out = createNode(vnodeName, isSvgMode);
            if (dom) {
                while (dom.firstChild) out.appendChild(dom.firstChild);
                if (dom.parentNode) dom.parentNode.replaceChild(out, dom);
                recollectNodeTree(dom, !0);
            }
        }
        var fc = out.firstChild, props = out.__preactattr_, vchildren = vnode.children;
        if (null == props) {
            props = out.__preactattr_ = {};
            for (var a = out.attributes, i = a.length; i--; ) props[a[i].name] = a[i].value;
        }
        if (!hydrating && vchildren && 1 === vchildren.length && 'string' == typeof vchildren[0] && null != fc && void 0 !== fc.splitText && null == fc.nextSibling) {
            if (fc.nodeValue != vchildren[0]) fc.nodeValue = vchildren[0];
        } else if (vchildren && vchildren.length || null != fc) innerDiffNode(out, vchildren, context, mountAll, hydrating || null != props.dangerouslySetInnerHTML);
        diffAttributes(out, vnode.attributes, props);
        isSvgMode = prevSvgMode;
        return out;
    }
    function innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {
        var j, c, f, vchild, child, originalChildren = dom.childNodes, children = [], keyed = {}, keyedLen = 0, min = 0, len = originalChildren.length, childrenLen = 0, vlen = vchildren ? vchildren.length : 0;
        if (0 !== len) for (var i = 0; i < len; i++) {
            var _child = originalChildren[i], props = _child.__preactattr_, key = vlen && props ? _child._component ? _child._component.__k : props.key : null;
            if (null != key) {
                keyedLen++;
                keyed[key] = _child;
            } else if (props || (void 0 !== _child.splitText ? isHydrating ? _child.nodeValue.trim() : !0 : isHydrating)) children[childrenLen++] = _child;
        }
        if (0 !== vlen) for (var i = 0; i < vlen; i++) {
            vchild = vchildren[i];
            child = null;
            var key = vchild.key;
            if (null != key) {
                if (keyedLen && void 0 !== keyed[key]) {
                    child = keyed[key];
                    keyed[key] = void 0;
                    keyedLen--;
                }
            } else if (!child && min < childrenLen) for (j = min; j < childrenLen; j++) if (void 0 !== children[j] && isSameNodeType(c = children[j], vchild, isHydrating)) {
                child = c;
                children[j] = void 0;
                if (j === childrenLen - 1) childrenLen--;
                if (j === min) min++;
                break;
            }
            child = idiff(child, vchild, context, mountAll);
            f = originalChildren[i];
            if (child && child !== dom && child !== f) if (null == f) dom.appendChild(child); else if (child === f.nextSibling) removeNode(f); else dom.insertBefore(child, f);
        }
        if (keyedLen) for (var i in keyed) if (void 0 !== keyed[i]) recollectNodeTree(keyed[i], !1);
        while (min <= childrenLen) if (void 0 !== (child = children[childrenLen--])) recollectNodeTree(child, !1);
    }
    function recollectNodeTree(node, unmountOnly) {
        var component = node._component;
        if (component) unmountComponent(component); else {
            if (null != node.__preactattr_ && node.__preactattr_.ref) node.__preactattr_.ref(null);
            if (!1 === unmountOnly || null == node.__preactattr_) removeNode(node);
            removeChildren(node);
        }
    }
    function removeChildren(node) {
        node = node.lastChild;
        while (node) {
            var next = node.previousSibling;
            recollectNodeTree(node, !0);
            node = next;
        }
    }
    function diffAttributes(dom, attrs, old) {
        var name;
        for (name in old) if ((!attrs || null == attrs[name]) && null != old[name]) setAccessor(dom, name, old[name], old[name] = void 0, isSvgMode);
        for (name in attrs) if (!('children' === name || 'innerHTML' === name || name in old && attrs[name] === ('value' === name || 'checked' === name ? dom[name] : old[name]))) setAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);
    }
    function collectComponent(component) {
        var name = component.constructor.name;
        (components[name] || (components[name] = [])).push(component);
    }
    function createComponent(Ctor, props, context) {
        var inst, list = components[Ctor.name];
        if (Ctor.prototype && Ctor.prototype.render) {
            inst = new Ctor(props, context);
            Component.call(inst, props, context);
        } else {
            inst = new Component(props, context);
            inst.constructor = Ctor;
            inst.render = doRender;
        }
        if (list) for (var i = list.length; i--; ) if (list[i].constructor === Ctor) {
            inst.__b = list[i].__b;
            list.splice(i, 1);
            break;
        }
        return inst;
    }
    function doRender(props, state, context) {
        return this.constructor(props, context);
    }
    function setComponentProps(component, props, opts, context, mountAll) {
        if (!component.__x) {
            component.__x = !0;
            if (component.__r = props.ref) delete props.ref;
            if (component.__k = props.key) delete props.key;
            if (!component.base || mountAll) {
                if (component.componentWillMount) component.componentWillMount();
            } else if (component.componentWillReceiveProps) component.componentWillReceiveProps(props, context);
            if (context && context !== component.context) {
                if (!component.__c) component.__c = component.context;
                component.context = context;
            }
            if (!component.__p) component.__p = component.props;
            component.props = props;
            component.__x = !1;
            if (0 !== opts) if (1 === opts || !1 !== options.syncComponentUpdates || !component.base) renderComponent(component, 1, mountAll); else enqueueRender(component);
            if (component.__r) component.__r(component);
        }
    }
    function renderComponent(component, opts, mountAll, isChild) {
        if (!component.__x) {
            var rendered, inst, cbase, props = component.props, state = component.state, context = component.context, previousProps = component.__p || props, previousState = component.__s || state, previousContext = component.__c || context, isUpdate = component.base, nextBase = component.__b, initialBase = isUpdate || nextBase, initialChildComponent = component._component, skip = !1;
            if (isUpdate) {
                component.props = previousProps;
                component.state = previousState;
                component.context = previousContext;
                if (2 !== opts && component.shouldComponentUpdate && !1 === component.shouldComponentUpdate(props, state, context)) skip = !0; else if (component.componentWillUpdate) component.componentWillUpdate(props, state, context);
                component.props = props;
                component.state = state;
                component.context = context;
            }
            component.__p = component.__s = component.__c = component.__b = null;
            component.__d = !1;
            if (!skip) {
                rendered = component.render(props, state, context);
                if (component.getChildContext) context = extend(extend({}, context), component.getChildContext());
                var toUnmount, base, childComponent = rendered && rendered.nodeName;
                if ('function' == typeof childComponent) {
                    var childProps = getNodeProps(rendered);
                    inst = initialChildComponent;
                    if (inst && inst.constructor === childComponent && childProps.key == inst.__k) setComponentProps(inst, childProps, 1, context, !1); else {
                        toUnmount = inst;
                        component._component = inst = createComponent(childComponent, childProps, context);
                        inst.__b = inst.__b || nextBase;
                        inst.__u = component;
                        setComponentProps(inst, childProps, 0, context, !1);
                        renderComponent(inst, 1, mountAll, !0);
                    }
                    base = inst.base;
                } else {
                    cbase = initialBase;
                    toUnmount = initialChildComponent;
                    if (toUnmount) cbase = component._component = null;
                    if (initialBase || 1 === opts) {
                        if (cbase) cbase._component = null;
                        base = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, !0);
                    }
                }
                if (initialBase && base !== initialBase && inst !== initialChildComponent) {
                    var baseParent = initialBase.parentNode;
                    if (baseParent && base !== baseParent) {
                        baseParent.replaceChild(base, initialBase);
                        if (!toUnmount) {
                            initialBase._component = null;
                            recollectNodeTree(initialBase, !1);
                        }
                    }
                }
                if (toUnmount) unmountComponent(toUnmount);
                component.base = base;
                if (base && !isChild) {
                    var componentRef = component, t = component;
                    while (t = t.__u) (componentRef = t).base = base;
                    base._component = componentRef;
                    base._componentConstructor = componentRef.constructor;
                }
            }
            if (!isUpdate || mountAll) mounts.unshift(component); else if (!skip) {
                if (component.componentDidUpdate) component.componentDidUpdate(previousProps, previousState, previousContext);
                if (options.afterUpdate) options.afterUpdate(component);
            }
            if (null != component.__h) while (component.__h.length) component.__h.pop().call(component);
            if (!diffLevel && !isChild) flushMounts();
        }
    }
    function buildComponentFromVNode(dom, vnode, context, mountAll) {
        var c = dom && dom._component, originalComponent = c, oldDom = dom, isDirectOwner = c && dom._componentConstructor === vnode.nodeName, isOwner = isDirectOwner, props = getNodeProps(vnode);
        while (c && !isOwner && (c = c.__u)) isOwner = c.constructor === vnode.nodeName;
        if (c && isOwner && (!mountAll || c._component)) {
            setComponentProps(c, props, 3, context, mountAll);
            dom = c.base;
        } else {
            if (originalComponent && !isDirectOwner) {
                unmountComponent(originalComponent);
                dom = oldDom = null;
            }
            c = createComponent(vnode.nodeName, props, context);
            if (dom && !c.__b) {
                c.__b = dom;
                oldDom = null;
            }
            setComponentProps(c, props, 1, context, mountAll);
            dom = c.base;
            if (oldDom && dom !== oldDom) {
                oldDom._component = null;
                recollectNodeTree(oldDom, !1);
            }
        }
        return dom;
    }
    function unmountComponent(component) {
        if (options.beforeUnmount) options.beforeUnmount(component);
        var base = component.base;
        component.__x = !0;
        if (component.componentWillUnmount) component.componentWillUnmount();
        component.base = null;
        var inner = component._component;
        if (inner) unmountComponent(inner); else if (base) {
            if (base.__preactattr_ && base.__preactattr_.ref) base.__preactattr_.ref(null);
            component.__b = base;
            removeNode(base);
            collectComponent(component);
            removeChildren(base);
        }
        if (component.__r) component.__r(null);
    }
    function Component(props, context) {
        this.__d = !0;
        this.context = context;
        this.props = props;
        this.state = this.state || {};
    }
    function render(vnode, parent, merge) {
        return diff(merge, vnode, {}, !1, parent, !1);
    }
    var options = {};
    var stack = [];
    var EMPTY_CHILDREN = [];
    var defer = 'function' == typeof Promise ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout;
    var IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;
    var items = [];
    var mounts = [];
    var diffLevel = 0;
    var isSvgMode = !1;
    var hydrating = !1;
    var components = {};
    extend(Component.prototype, {
        setState: function(state, callback) {
            var s = this.state;
            if (!this.__s) this.__s = extend({}, s);
            extend(s, 'function' == typeof state ? state(s, this.props) : state);
            if (callback) (this.__h = this.__h || []).push(callback);
            enqueueRender(this);
        },
        forceUpdate: function(callback) {
            if (callback) (this.__h = this.__h || []).push(callback);
            renderComponent(this, 2);
        },
        render: function() {}
    });
    var preact = {
        h: h,
        createElement: h,
        cloneElement: cloneElement,
        Component: Component,
        render: render,
        rerender: rerender,
        options: options
    };
    if ('undefined' != typeof module) module.exports = preact; else self.preact = preact;
}();
//# sourceMappingURL=preact.js.map;
define("preact", (function (global) {
    return function () {
        var ret, fn;
        return ret || global.preact;
    };
}(this)));


define("Zynga", ["require", "exports", "ZyngaCore"], function (require, exports, ZyngaCore) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var ObjectAssign = ZyngaCore.ObjectAssign;
    var zyngaDefaultConfig = {
        authSocialNetworkID: 24,
        clientVersion: 'unset'
    };
    /**
     * Initialize Zynga Instant SDK
     * @param config - A config object.  Can include specific app overrides
     */
    function init(config) {
        var mergedConfig;
        var apps = config && config.apps || {};
        var keys = Object.keys(apps);
        var allKeys = keys.join('');
        var url = window.location.href;
        var fbAppId = ZyngaCore.ArrayFind(keys, function (key) {
            // return true we find the fb app id in the URL surrounded by non-digit chars
            return (url.match(new RegExp(".*[^0-9]" + key + "[^0-9].*", 'g')) !== null);
        });
        var overrides = {};
        if (fbAppId) {
            // We have app-specific overrides
            overrides = apps[fbAppId];
        }
        mergedConfig = ObjectAssign({}, zyngaDefaultConfig, config, overrides);
        delete mergedConfig.apps; // May have inherited this from "config", we don't wan it
        exports.Event.fire(exports.Events.CONFIG, mergedConfig);
    }
    exports.init = init;
    exports.Event = new ZyngaCore.EventMixin();
    exports.Events = {
        APP_ID: 'Zynga.AppId',
        CLIENT_VERSION: 'Zynga.ClientVersion',
        CONFIG: 'Zynga.Config',
        URL_BASE: 'Zynga.URLBase'
    };
    function setAppId(appId) {
        init({
            appId: appId
        });
    }
    exports.setAppId = setAppId;
    function setClientVersion(versionString) {
        exports.clientVersion = versionString;
        exports.Event.fire(exports.Events.CLIENT_VERSION, versionString);
    }
    exports.setClientVersion = setClientVersion;
    exports.apiURLBase = '/atg-turns/v1';
    function setApiURLBase(url) {
        exports.apiURLBase = url;
        exports.Event.fire(exports.Events.URL_BASE, url);
    }
    exports.setApiURLBase = setApiURLBase;
    function getApiURLBase(system) {
        return system ? exports.apiURLBase + "/" + system : exports.apiURLBase;
    }
    exports.getApiURLBase = getApiURLBase;
    function getAPIVersion() {
        /* In the format:
            a.b.c.z
    
            where:
              a = FB SDK Major version
              b = FB SDK Minor version
              c = FB SDK Debug version (not typically used, use 0)
              z = Zynga SDK version number, increment each time a release happens.
        */
        return '6.0.0.10';
    }
    exports.getAPIVersion = getAPIVersion;
    exports.Event.last(exports.Events.CONFIG, function (config) {
        if (config.clientVersion) {
            setClientVersion(config.clientVersion);
        }
        if (config.apiURLBase) {
            setApiURLBase(config.apiURLBase);
        }
        // NOTE: Important that this is last as setting it will kick off a lot of other
        //       processes that may rely on data set above.
        if (config.appId) {
            exports.Event.fire(exports.Events.APP_ID, config.appId);
        }
    });
});



var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
define("ZyngaAccount", ["require", "exports", "Zynga", "ZyngaCore", "ZyngaInstant", "ZyngaNet"], function (require, exports, Zynga, ZyngaCore, ZyngaInstant, ZyngaNet) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var ObjectAssign = ZyngaCore.ObjectAssign;
    var ANON_INFO_KEY = '__ZYNGA_ANON_INFO_';
    var PASSWD_MIN_LEN = 20;
    var PASSWD_MAX_LEN = 40;
    var RAND_CHAR_START = 35; // #
    var RAND_CHAR_END = 126; // ~
    var FBIG_INFO_KEY = '__ZYNGA_FBIG_INFO_';
    var FBIG_INFO_KEY_DRAFT6 = '__ZYNGA_FBIG_INFO_6_';
    var EARLY_RENEW_SECONDS = 30;
    var SN42_TOKEN_DURATION_SECONDS = 60 * 60 * 24 * 7; // 1 week
    var migrationHandler; // This can be set to handle account migrations
    var win = window;
    var localCache = win.localStorage || {
        getItem: function () { return null; },
        setItem: function () { return; }
    };
    var tokenMap = {};
    /********************/
    /* Helper functions */
    /********************/
    // anon info storage key
    function getStorageKeyAsync(keyType) {
        return Zynga.Event.last(Zynga.Events.APP_ID)
            .then(function (appId) {
            return Promise.resolve(keyType + appId);
        });
    }
    // Type checking helpers.  Very basic
    function isObject(x) {
        return typeof x === 'object';
    }
    function isString(x) {
        return typeof x === 'string';
    }
    function isNumber(x) {
        return typeof x === 'number';
    }
    function isInteger(x) {
        return isNumber(x) && (parseInt(x + '', 10) === x);
    }
    // Basic random string related helper function
    function getRandom(start, end) {
        return start + Math.round(Math.random() * (end - start));
    }
    function getRandomChar(startPos, endPos) {
        return String.fromCharCode(getRandom(startPos, endPos));
    }
    function getRandomString(length, charStartPos, charEndPos) {
        var chars = new Array(length);
        while (length >= 0) {
            chars[--length] = getRandomChar(charStartPos, charEndPos);
        }
        return chars.join('');
    }
    // For deep clone of objects
    function cloneObject(obj) {
        return JSON.parse(JSON.stringify(obj));
    }
    /**
     * URL and Base64 decodes a string
     * @param str URL and Base64 Encoded string
     */
    function urlBase64Decode(str) {
        return atob(str.replace(/-/g, '+').replace(/_/g, '/'));
    }
    function generatePassword() {
        var password = getRandomString(getRandom(PASSWD_MIN_LEN, PASSWD_MAX_LEN), RAND_CHAR_START, RAND_CHAR_END);
        var fixChar = getRandomString(1, 38, RAND_CHAR_END); // Get a new random char in the same range but ABOVE % (37)
        var fixedPassword = password.replace(/%/g, fixChar); // Replace all "%" chars with the new character.
        // There is a bug in FB Android apps where "%" chars can cause data corruption
        // on read.  To help prevent new users from suffering from this on older clients
        // we have this workaround in place to just not use "%"
        return fixedPassword;
    }
    function getNewFBIGAuthDetails(version) {
        if (version === void 0) { version = '1'; }
        return Promise.all([
            Zynga.Event.last(Zynga.Events.APP_ID),
            ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT) // Wait for SDK TOS acceptance
        ])
            .then(function (details) {
            var appID = details[0];
            var stringToSign = JSON.stringify({ a: appID });
            return ZyngaInstant.player.getSignedPlayerInfoAsync(stringToSign) // Get FB to sign out app id payload
                .then(function (playerInfo) {
                var token = "sn42v" + version + "." + playerInfo.getSignature(); // Signature is our actual token, prepend sn46.
                var _a = playerInfo.getSignature().split('.'), hashUrlBase64 = _a[0], dataUrlBase64 = _a[1];
                var data = JSON.parse(urlBase64Decode(dataUrlBase64));
                var authDetails = {
                    token: token,
                    userId: data.player_id,
                    expires: data.issued_at + SN42_TOKEN_DURATION_SECONDS
                };
                return Promise.resolve(authDetails);
            });
        });
    }
    win.leon = getNewFBIGAuthDetails;
    // tslint:disable:max-classes-per-file
    var SocialNetworkAccount = (function () {
        function SocialNetworkAccount() {
            this.noCreate = false;
            this.forceRefresh = false;
            this.fireEvents = true;
            this.accountDetails = {
                socialNetwork: null,
                token: '',
                userId: '',
                zid: 0,
                playerId: 0,
                expires: 0
            };
        }
        /**
         * Try and restore accountDetails from cache
         * @param cacheString Optional cache data to save the lookup
         */
        SocialNetworkAccount.prototype.fromCache = function (cache) {
            return Promise.resolve();
        };
        /**
         * Renew account details if needed or create a new one
         */
        SocialNetworkAccount.prototype.renew = function () {
            return Promise.resolve();
        };
        /**
         * Perform any migrations needed
         */
        SocialNetworkAccount.prototype.migrate = function () {
            return Promise.resolve();
        };
        /**
         * Broadcast new ready token
         */
        SocialNetworkAccount.prototype.broadcast = function () {
            if (this.fireEvents !== false) {
                exports.Event.fire(exports.Events.ACCOUNT_DETAILS, cloneObject(this.accountDetails));
            }
            return Promise.resolve();
        };
        /**
         * Write to cache if needed
         */
        SocialNetworkAccount.prototype.writeCache = function () {
            return Promise.resolve();
        };
        SocialNetworkAccount.prototype.getDetails = function () {
            return ObjectAssign({}, this.accountDetails);
        };
        return SocialNetworkAccount;
    }());
    /**
     * Zynga Anonymous Network (SN 24) Account
     */
    var ZyngaAnonNetworkAccount = (function (_super) {
        __extends(ZyngaAnonNetworkAccount, _super);
        function ZyngaAnonNetworkAccount() {
            var _this = _super.call(this) || this;
            _this.accountDetails.socialNetwork = 24;
            return _this;
        }
        /**
         * Try and restore accountDetails from caches or create a new one
         * @param cacheString Optional cache data to save the lookup
         */
        ZyngaAnonNetworkAccount.prototype.fromCache = function (cache) {
            var _this = this;
            var nowTimestamp = Math.floor(new Date().getTime() / 1000);
            var origCacheKey = null;
            return ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_INITIALIZED) // Wait for SDK initialization
                .then(function () { return getStorageKeyAsync(ANON_INFO_KEY); }) // Wait for sorage key name
                .then(function (storageKey) {
                var oldCacheKey = storageKey;
                var newCacheKey = storageKey + '_' + ZyngaInstant.player.getID();
                var cacheValue = localCache.getItem(newCacheKey) || localCache.getItem(oldCacheKey);
                origCacheKey = oldCacheKey;
                var data = null;
                if (cacheValue) {
                    try {
                        data = JSON.parse(cacheValue);
                    }
                    catch (e) {
                        data = null;
                    }
                }
                return Promise.resolve(data);
            })
                .then(function (cachedAccountData) {
                if (cachedAccountData) {
                    // Already have details, skip the next network call
                    return Promise.resolve(cachedAccountData);
                }
                else {
                    return ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
                        return ZyngaInstant.player.getDataAsync([origCacheKey]).then(function (fbData) {
                            if (typeof fbData === 'object' && fbData[origCacheKey]) {
                                return Promise.resolve(fbData[origCacheKey]);
                            }
                            else {
                                return Promise.resolve(null);
                            }
                        });
                    });
                }
            })
                .then(function (existingAccountData) {
                var ad = _this.accountDetails; // deref
                if (ad && existingAccountData) {
                    ad.expires = existingAccountData.expires || ad.expires;
                    ad.password = existingAccountData.password || ad.password;
                    ad.token = existingAccountData.token || ad.token;
                    ad.userId = existingAccountData.userId || ad.userId;
                    ad.zid = existingAccountData.zid || ad.zid;
                    ad.playerId = existingAccountData.playerId && parseInt(existingAccountData.playerId.toString(), 10) || ad.playerId;
                }
                return Promise.resolve();
            });
        };
        /**
         * Renew account details if needed or create a new account
         */
        ZyngaAnonNetworkAccount.prototype.renew = function () {
            var _this = this;
            var renewPromise;
            if (this.accountDetails.userId) {
                // Existing account
                var nowTimestamp = Math.floor(new Date().getTime() / 1000);
                if (((this.accountDetails.expires - nowTimestamp) < EARLY_RENEW_SECONDS) || this.forceRefresh === true) {
                    renewPromise = Zynga.Event.last(Zynga.Events.APP_ID)
                        .then(function (appId) {
                        return ZyngaNet.api('POST', 'auth/issueToken', {
                            body: {
                                userId: _this.accountDetails.userId,
                                password: _this.accountDetails.password,
                                appId: appId
                            },
                            noAuth: true
                        });
                    })
                        .then(function (response) {
                        var body = response.body;
                        var xhr = response.xhr;
                        if (typeof body === 'object' && xhr.status === 200) {
                            var ad = _this.accountDetails;
                            ad.expires = body.expires;
                            ad.zid = parseInt(body.zid, 10);
                            ad.token = body.token;
                            if (_this.fireEvents !== false) {
                                exports.Event.fire(exports.Events.ACCOUNT_LOGIN, cloneObject(ad));
                            }
                            return Promise.resolve();
                        }
                        else {
                            var errorCat = xhr.getResponseHeader('Error-Category');
                            var errorMsg = xhr.getResponseHeader('Error-Message');
                            var errorType = 'unknown';
                            if (xhr.status === 500 &&
                                errorCat && errorCat.toString().toLowerCase() === 'auth.generalerror' &&
                                errorMsg && errorMsg.toString().toLowerCase() === 'invalid userid or password') {
                                // We care about this particular 500 error so give it a known error string
                                errorType = 'badlogin';
                            }
                            return Promise.reject({
                                errorType: errorType,
                                xhr: xhr,
                                body: body
                            });
                        }
                    });
                }
                else {
                    // Existing but not need to renew
                    renewPromise = Promise.resolve();
                }
            }
            else {
                // No existing account, create new
                var password_1 = generatePassword();
                // Create a new account unless we were told not to
                renewPromise = this.noCreate === true ? Promise.resolve() : Zynga.Event.last(Zynga.Events.APP_ID)
                    .then(function (appId) {
                    return ZyngaNet.api('POST', 'auth/registerDevice', {
                        body: {
                            password: password_1,
                            appId: appId
                        },
                        noAuth: true
                    });
                })
                    .then(function (response) {
                    var body = response.body;
                    var xhr = response.xhr;
                    if (typeof body === 'object' && xhr.status === 200) {
                        // Save Social Network ID and passowrd for later as well
                        var ad = _this.accountDetails; // De-ref once
                        ad.expires = body.expires;
                        ad.password = password_1;
                        ad.playerId = parseInt(body.playerId.toString(), 10);
                        ad.token = body.token;
                        ad.userId = body.userId;
                        ad.zid = body.zid;
                        // fire an event.  Useful for install tracking
                        if (_this.fireEvents) {
                            exports.Event.fire(exports.Events.ACCOUNT_CREATE, cloneObject(ad));
                        }
                    }
                    else {
                        return Promise.reject({
                            error: 'Account create failed',
                            xhr: xhr,
                            body: body
                        });
                    }
                    return Promise.resolve();
                });
            }
            if (!renewPromise) {
                return Promise.reject('Unknown account error');
            }
            return renewPromise;
        };
        /**
         * Perform any migrations needed
         */
        ZyngaAnonNetworkAccount.prototype.migrate = function () {
            // no migrations needed for SN24
            return Promise.resolve();
        };
        /**
         * Broadcast new ready token
         */
        ZyngaAnonNetworkAccount.prototype.broadcast = function () {
            return _super.prototype.broadcast.call(this);
        };
        /**
         * Write to cache if needed
         */
        ZyngaAnonNetworkAccount.prototype.writeCache = function () {
            var _this = this;
            return getStorageKeyAsync(ANON_INFO_KEY)
                .then(function (storageKey) {
                // Create a FB Instant write object
                var obj = {};
                var ad = _this.accountDetails;
                obj[storageKey] = ad;
                // First, store in localStorage, this will have the fastes future access pattern
                localCache.setItem(storageKey + '_' + ZyngaInstant.player.getID(), JSON.stringify(ad));
                // TODO: Check if this.accountDetails has changed and only do writes if it has
                // Persist it (should be cross device) with the instant SDK
                return ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
                    return ZyngaInstant.player.setDataAsync(obj) // Tell the SDK to set the data
                        .then(ZyngaInstant.player.flushDataAsync) // Also make sure FB actually persists it to the cloud
                        .then(function () {
                        exports.Event.fire(exports.Events.ACCOUNT_PERSISTED, {
                            success: true,
                            account_data: cloneObject(ad),
                            error: null
                        });
                    })
                        .catch(function (e) {
                        exports.Event.fire(exports.Events.ACCOUNT_PERSISTED, {
                            success: false,
                            account_data: cloneObject(ad),
                            error: e
                        });
                    });
                });
            })
                .then(function () { return Promise.resolve(); });
        };
        ZyngaAnonNetworkAccount.prototype.getDetails = function () {
            return cloneObject(this.accountDetails);
        };
        return ZyngaAnonNetworkAccount;
    }(SocialNetworkAccount));
    /**
     * FBIG Social Network (SN 42) Account
     */
    var FBIGNetworkAccount = (function (_super) {
        __extends(FBIGNetworkAccount, _super);
        function FBIGNetworkAccount(fireEvents) {
            var _this = _super.call(this) || this;
            _this.accountDetails.socialNetwork = 42;
            return _this;
        }
        /**
         * Try and restore accountDetails from caches or create a new one
         * @param cacheString Optional cache data to save the lookup
         */
        FBIGNetworkAccount.prototype.fromCache = function (cache) {
            var _this = this;
            var nowTimestamp = Math.floor(new Date().getTime() / 1000);
            var cacheKey;
            return ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_INITIALIZED) // Wait for SDK initialization
                .then(function () { return getStorageKeyAsync(FBIG_INFO_KEY); }) // Wait for sorage key name
                .then(function (storageKey) {
                var localStorageKey = storageKey + '_' + ZyngaInstant.player.getID();
                var cacheValue = localCache.getItem(localStorageKey);
                cacheKey = storageKey;
                var data = null;
                if (cacheValue) {
                    try {
                        data = JSON.parse(cacheValue);
                    }
                    catch (e) {
                        data = null;
                    }
                }
                return Promise.resolve(data);
            })
                .then(function (cachedAccountData) {
                if (cachedAccountData) {
                    // Already have details, skip the next network call
                    return Promise.resolve(cachedAccountData);
                }
                else {
                    return ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
                        return ZyngaInstant.player.getDataAsync([cacheKey]).then(function (fbData) {
                            if (typeof fbData === 'object' && fbData[cacheKey]) {
                                return Promise.resolve(fbData[cacheKey]);
                            }
                            else {
                                return Promise.resolve(null);
                            }
                        });
                    });
                }
            })
                .then(function (existingAccountData) {
                var ad = _this.accountDetails; // deref
                if (ad && existingAccountData && typeof existingAccountData === 'object') {
                    ad.expires = existingAccountData.expires || ad.expires;
                    ad.password = existingAccountData.password || ad.password;
                    ad.token = existingAccountData.token || ad.token;
                    ad.userId = existingAccountData.userId || ad.userId;
                    ad.zid = existingAccountData.zid || ad.zid;
                    ad.playerId = existingAccountData.playerId && parseInt(existingAccountData.playerId.toString(), 10) || ad.playerId;
                }
                return Promise.resolve();
            });
        };
        /**
         * Renew account details if needed or create a new account
         */
        FBIGNetworkAccount.prototype.renew = function () {
            var nowTimestamp = Math.floor(new Date().getTime() / 1000);
            var ad = this.accountDetails; // Dereference once as we use it a few times below
            if ((ad.expires - nowTimestamp) < EARLY_RENEW_SECONDS || this.forceRefresh === true) {
                // New or nearly expired account OR we are forcing a frefresh
                return getNewFBIGAuthDetails('1').then(function (fbigAuthDetails) {
                    ad.expires = fbigAuthDetails.expires;
                    ad.userId = fbigAuthDetails.userId;
                    ad.token = fbigAuthDetails.token;
                });
            }
            else {
                // Existing and not expired
                return Promise.resolve();
            }
        };
        /**
         * Perform any migrations needed
         */
        FBIGNetworkAccount.prototype.migrate = function () {
            var _this = this;
            var ad = this.accountDetails; // Dereference once as we use it a few times below
            var returnPromise = Promise.resolve();
            /**
             * Flow (a-z represent concurrent/async tasks):
             * 1a) Fetch SN24 details, renew if expired
             * 1b) Fetch current playerID for SN42 token
             * 2.1) If playerID is already assigned note it and the SN42 zid and exit
             * 2.2) If playerID is not assigned and SN24 details don't exist note SN42 zid as playerId
             * 2.3) If playerID is not assigned and SN24 details do exist, make note of migration
             * 2.3a) Associate SN24 token to SN42 using SN42 token as primary to identities/associate, note SN24 zid as playerId
             * 3a) Call playerid/assign with noted playerId from 2.2 or 2.3a
             * 4a) If was a migration, fire migration event
             * 4b) If was not migration but playerId was assigned fire account create event
             */
            var sn42AccountState;
            if (ad.zid <= 0 || ad.playerId <= 0) {
                // New account, probably, attempt migration from SN24
                var existingZyngaAnon_1 = new ZyngaAnonNetworkAccount();
                existingZyngaAnon_1.noCreate = true; // Make sure we don't create a new anon.  We only want existing
                existingZyngaAnon_1.fireEvents = false; // This is not our primary SN do don't broadcast acct details.
                // Fetch existing cached sn24 account information if it exists
                var existingDetailsPromise = existingZyngaAnon_1.fromCache()
                    .then(existingZyngaAnon_1.renew.bind(existingZyngaAnon_1))
                    .then(function () { return existingZyngaAnon_1.getDetails(); });
                // Fetch exising playerID info for sn42 account
                var currentPlayerIdInfoPromise = ZyngaNet.api('POST', '/playerid/get', {
                    useToken: ad.token
                }).then(function (playerIdResults) {
                    var currentInfo = {
                        playerId: null,
                        zid: null,
                        appId: null
                    };
                    var xhr = playerIdResults.xhr;
                    var results = playerIdResults.body;
                    var playerIdInfoPromise;
                    if (xhr.status === 200 && results && results.list && results.list.length > 0) {
                        var result_1 = results.list[0];
                        currentInfo.zid = parseInt(result_1.networkId.zid.toString(), 10);
                        playerIdInfoPromise = Zynga.Event.last(Zynga.Events.APP_ID).then(function (appId) {
                            var appKey = appId.toString();
                            var playerIdAppRecord = result_1.playerIds[appKey] || {};
                            var playerIdRecord = playerIdAppRecord[currentInfo.zid.toString()];
                            currentInfo.playerId = playerIdRecord
                                && playerIdRecord.playerId
                                && parseInt(playerIdRecord.playerId.toString(), 10)
                                || null;
                            currentInfo.appId = appId;
                            return Promise.resolve(currentInfo);
                        });
                    }
                    else {
                        playerIdInfoPromise = Promise.reject({
                            message: 'PlayerId fetch failed',
                            xhr: xhr,
                            results: results
                        });
                    }
                    return playerIdInfoPromise;
                });
                returnPromise = Promise.all([existingDetailsPromise, currentPlayerIdInfoPromise])
                    .then(function (value) {
                    var sn24AccountDetails = value[0];
                    var sn42PlayerIdInfo = value[1];
                    var zid = sn42PlayerIdInfo.zid;
                    if (zid > 0) {
                        _this.accountDetails.zid = zid;
                    }
                    if (sn42PlayerIdInfo.playerId && sn42PlayerIdInfo.playerId.toString().length > 0) {
                        // We already have a playerID so we must have just not saved/cached it before
                        _this.accountDetails.playerId = parseInt(sn42PlayerIdInfo.playerId.toString(), 10);
                        sn42AccountState = 'recovery';
                    }
                    else {
                        var sn24PlayerId = (sn24AccountDetails && sn24AccountDetails.playerId || '').toString();
                        var sn24Token = (sn24AccountDetails && sn24AccountDetails.token || '').toString();
                        var identityAssoicatePromise = Promise.resolve(); // By default no accociation needed
                        // Assume install for now
                        sn42AccountState = 'install';
                        _this.accountDetails.playerId = parseInt(sn42PlayerIdInfo.zid.toString(), 10); // Install, playerID should be 42zid
                        if (sn24PlayerId.length > 0 && sn24Token.length > 0) {
                            // Oh, look, a 24 account.  Migrate instead.  We probably have a playerId
                            sn42AccountState = 'migration';
                            var associateBody = {
                                token: {
                                    appId: sn42PlayerIdInfo.appId.toString(),
                                    snId: '24',
                                    userId: sn24AccountDetails.zid.toString(),
                                    session: sn24Token
                                }
                            };
                            identityAssoicatePromise = ZyngaNet.api('POST', 'identities/associate', {
                                useToken: _this.accountDetails.token,
                                body: associateBody
                            }).then(function (result) {
                                var xhr = result.xhr;
                                var associateResult = result.body;
                                if (xhr.status === 200 &&
                                    associateResult &&
                                    associateResult.mappings &&
                                    associateResult.mappings[sn24AccountDetails.zid.toString()] === '24') {
                                    _this.accountDetails.playerId = parseInt(sn24AccountDetails.playerId.toString(), 10);
                                    return Promise.resolve();
                                }
                                else {
                                    return Promise.reject({
                                        message: 'SN24 identity association filed',
                                        xhr: xhr,
                                        results: associateResult
                                    });
                                }
                            });
                        }
                        // Short circuit as we need to set playerId
                        return identityAssoicatePromise.then(function () {
                            return ZyngaNet.api('POST', 'playerid/assign', {
                                useToken: _this.accountDetails.token,
                                body: {
                                    playerId: _this.accountDetails.playerId
                                }
                            }).then(function (results) {
                                var xhr = results.xhr;
                                var body = results.body;
                                if (xhr.status === 200) {
                                    if (sn42AccountState === 'install') {
                                        exports.Event.fire(exports.Events.ACCOUNT_CREATE, cloneObject(_this.accountDetails));
                                    }
                                    else if (sn42AccountState === 'migration') {
                                        var migrationAccounts = {
                                            from: cloneObject(sn24AccountDetails),
                                            to: cloneObject(_this.accountDetails)
                                        };
                                        exports.Event.fire(exports.Events.ACCOUNT_MIGRATED, migrationAccounts);
                                    }
                                    return Promise.resolve();
                                }
                                else {
                                    return Promise.reject({
                                        message: 'SN42 palyerID assign failed',
                                        xhr: xhr,
                                        results: body
                                    });
                                }
                            });
                        });
                    }
                    return Promise.resolve();
                });
            }
            return returnPromise;
        };
        /**
         * Broadcast new ready token
         */
        FBIGNetworkAccount.prototype.broadcast = function () {
            return _super.prototype.broadcast.call(this);
        };
        /**
         * Write to cache if needed
         */
        FBIGNetworkAccount.prototype.writeCache = function () {
            var _this = this;
            return getStorageKeyAsync(FBIG_INFO_KEY)
                .then(function (storageKey) {
                // Create a FB Instant write object
                var obj = {};
                var ad = _this.accountDetails;
                obj[storageKey] = ad;
                // First, store in localStorage, this will have the fastes future access pattern
                localCache.setItem(storageKey + '_' + ZyngaInstant.player.getID(), JSON.stringify(ad));
                // TODO: Check if this.accountDetails has changed and only do writes if it has
                // Persist it (should be cross device) with the instant SDK
                return ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
                    return ZyngaInstant.player.setDataAsync(obj) // Tell the SDK to set the data
                        .then(ZyngaInstant.player.flushDataAsync) // Also make sure FB actually persists it to the cloud
                        .then(function () {
                        exports.Event.fire(exports.Events.ACCOUNT_PERSISTED, {
                            success: true,
                            account_data: cloneObject(ad),
                            error: null
                        });
                    })
                        .catch(function (e) {
                        exports.Event.fire(exports.Events.ACCOUNT_PERSISTED, {
                            success: false,
                            account_data: cloneObject(ad),
                            error: e
                        });
                    });
                });
            })
                .then(function () { return Promise.resolve(); });
        };
        FBIGNetworkAccount.prototype.getDetails = function () {
            return cloneObject(this.accountDetails);
        };
        return FBIGNetworkAccount;
    }(SocialNetworkAccount));
    /****************************************/
    /* Init user account for social network */
    /****************************************/
    Promise.all([
        ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_INITIALIZED),
        Zynga.Event.last(Zynga.Events.CONFIG)
    ]).then(function (results) {
        var config = results[1];
        var snAccount;
        switch (config.authSocialNetworkID) {
            case exports.SOCIAL_NETWORKS.ZYNGA_ANONYMOUS:
                snAccount = new ZyngaAnonNetworkAccount();
                break;
            case exports.SOCIAL_NETWORKS.FACEBOOK_INSTANT_GAMES:
                snAccount = new FBIGNetworkAccount();
                break;
            default:
                throw new Error('No "authSocialNetwork" specified in zynga config');
        }
        // Get/Create/Renew social network auth data
        // NOTE: We need to bind back to snAccount or the class loses
        //       it's 'this' given these promises will take on the
        //       current scope.  At least least that's how I understand it.
        // TODO: Test wrapping this in a closure bound to snAccount.  May be more mainatinable.
        Promise.resolve()
            .then(snAccount.fromCache.bind(snAccount)) // Pull exisitng account info from cache/cloud
            .then(snAccount.renew.bind(snAccount)) // Renew token if needed.  Side-Effect: Can create/broadcast new account
            .then(snAccount.migrate.bind(snAccount)) // Perform any needed migrations
            .then(snAccount.broadcast.bind(snAccount)) // Broadcast out the account information
            .then(snAccount.writeCache.bind(snAccount)) // Write account/token data back to cache/cloud
            .then(function () {
            exports.Event.fire(exports.Events.ACCOUNT_SN_ACCOUNT, snAccount);
        });
    });
    ZyngaNet.registerRefreshTokenHandler(function (oldToken, callback) {
        var newToken = tokenMap[oldToken];
        if (newToken) {
            callback(newToken);
        }
        else {
            if (newToken === undefined) {
                // First one, fetch a new one
                var snAccount = exports.Event.getLastFiredValue(exports.Events.ACCOUNT_SN_ACCOUNT); // Current account
                if (snAccount) {
                    tokenMap[oldToken] = false; // Mark this token as refreshing
                    exports.Event.clearLastFiredValue(exports.Events.ACCOUNT_DETAILS); // clear this so other don't use this bad token
                    snAccount.noCreate = true;
                    snAccount.renew()
                        .then(snAccount.broadcast.bind(snAccount))
                        .then(snAccount.writeCache.bind(snAccount))
                        .then(function () {
                        snAccount.noCreate = false;
                    });
                }
                else {
                    // not account details?  Just fail
                    callback(false);
                    return;
                }
            }
            // Wait for new Account Details event
            exports.Event.once(exports.Events.ACCOUNT_DETAILS, function (nextAccountDetails) {
                var token = nextAccountDetails && nextAccountDetails.token;
                if (token && token !== oldToken && !tokenMap.hasOwnProperty[token]) {
                    // We have a token, it's different and it's not a bad one
                    for (var t in tokenMap) {
                        // Mark this as the new token for all old tokens.  Both replaced and waiting
                        if (tokenMap.hasOwnProperty(t) && tokenMap[t] !== undefined) {
                            tokenMap[t] = token;
                        }
                    }
                    callback(token);
                }
                else {
                    callback(false);
                }
            }, true);
        }
    });
    function debugFullResetUser() {
        Promise.all([
            getStorageKeyAsync(ANON_INFO_KEY),
            getStorageKeyAsync(FBIG_INFO_KEY),
            getStorageKeyAsync(FBIG_INFO_KEY_DRAFT6)
        ]).then(function (keys) {
            var resetKeys = {};
            keys.forEach(function (key) { return resetKeys[key] = null; });
            ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
                ZyngaInstant.player.setDataAsync(resetKeys)
                    .then(ZyngaInstant.player.flushDataAsync);
                win.localStorage.clear();
            });
        });
    }
    exports.debugFullResetUser = debugFullResetUser;
    // waits to send the request until the user is authed.
    // tslint:disable-next-line:max-line-length
    function userAuthCall(method, path, args) {
        return Promise.all([Zynga.Event.last(Zynga.Events.APP_ID), exports.Event.last(exports.Events.ACCOUNT_DETAILS), Zynga.Event.last(Zynga.Events.URL_BASE)]).then(function (results) {
            var appId = results[0];
            var accountDetails = results[1];
            var options = {};
            if (Zynga.getApiURLBase().indexOf('localhost') > 0) {
                var headers = options.headers = options.headers || {};
                headers['App-Id'] = appId;
                headers['Player-Id'] = accountDetails.playerId;
                headers['Zid'] = accountDetails.zid;
            }
            var queryString = '';
            if (args) {
                if (method.toLowerCase() !== 'get') {
                    options.body = args;
                }
                else {
                    // pass options as query string.
                    var queryParams = [];
                    for (var paramName in args) {
                        var paramValue = args[paramName];
                        // encode and optionally turn arrays into comma separated list
                        paramValue = Array.isArray(paramValue) ? paramValue.map(encodeURI).join(',') : encodeURI(paramValue);
                        queryParams.push(paramName + '=' + paramValue);
                    }
                    queryString = queryParams.length > 0 ? ('?' + queryParams.join('&')) : '';
                }
            }
            options.useToken = accountDetails.token;
            return ZyngaNet.api(method, Zynga.getApiURLBase(path) + queryString, options);
        });
    }
    exports.userAuthCall = userAuthCall;
    exports.Event = new ZyngaCore.EventMixin();
    exports.Events = {
        ACCOUNT_CREATE: 'Account.Create',
        ACCOUNT_LOGIN: 'Account.Login',
        ACCOUNT_DETAILS: 'Account.Details',
        ACCOUNT_MISMATCH: 'Account.Mismatch',
        ACCOUNT_PASSWORD_FAIL: 'Account.PasswordFail',
        ACCOUNT_PERSISTED: 'Account.Persisted',
        ACCOUNT_MIGRATED: 'Account.Migrated',
        ACCOUNT_SN_ACCOUNT: 'Account.SN.Account'
    };
    exports.SOCIAL_NETWORKS = {
        ZYNGA_ANONYMOUS: 24,
        FACEBOOK_INSTANT_GAMES: 42
    };
});
/*
function getCachedAccountData() {
    return new Promise(function (resolve) {
        ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_INITIALIZED, function () {
            // Need to be initialized for Instant.player.getID() below
            getStorageKeyAsync().then(function (storageKey) {
                var oldCacheKey = storageKey;
                var newCacheKey = storageKey + '_' + ZyngaInstant.player.getID();
                var cacheValue = localCache.getItem(newCacheKey) || localCache.getItem(oldCacheKey);
                var data = false;
                if (cacheValue) {
                    try {
                        data = JSON.parse(cacheValue);
                    } catch (e) {
                        data = false;
                    }
                }
                resolve(data);
            });
        });
    });
}
*/
// Set account data.  Internal function.
// accountData: object - that contains account details.  See migration section for format
// hasChanged: boolean - accountData is known to be different from last fetch
// noFire: boolean - set to surpress ACCOUNT_DETAIL event firing
/*
function setValidAccountData(accountData, hasChanged, noFire) {

    if (noFire !== true) {
        Event.fire(Events.ACCOUNT_DETAILS, cloneObject(accountData));
    }

    if (hasChanged === true) {
        // Create object in the format setDataAsync expects

        getStorageKeyAsync().then(function (storageKey: string) {
            var obj = {};

            obj[storageKey] = accountData;

            // Persist it (should be cross device) with the instant SDK
            ZyngaInstant.player.setDataAsync(obj)       // Tell the SDK to set the data
                .then(ZyngaInstant.player.flushDataAsync) // Also make sure FB actually persists it to the cloud
                .then(function () {
                    Event.fire(Events.ACCOUNT_PERSISTED, {
                        success: true,
                        account_data: cloneObject(accountData),
                        error: null
                    });
                })
                .catch(function (e) {
                    Event.fire(Events.ACCOUNT_PERSISTED, {
                        success: false,
                        account_data: cloneObject(accountData),
                        error: e
                    });
                });

            // To be safe, store in localStorage as well in case we need it from there in the future #futureproofing
            localCache.setItem(storageKey + '_' + ZyngaInstant.player.getID(), JSON.stringify(accountData));

        });
    }
}
*/
/*
function passwordFixInjectPossibleChars(passwords, position, character) {
    var passwordsCopy;
    var i;

    character = character.toLowerCase();

    // First the lowercase case
    for (i = 0; i < passwords.length; i++) {
        passwords[i][position] = character;
    }
    // Now the upper case case so long as the character is (a-f)
    if (character !== character.toUpperCase()) {
        // copy the whole array to apply the upper case character to
        passwordsCopy = JSON.parse(JSON.stringify(passwords)); // JSON stringify/parse to do a recursive deep copy
        character = character.toUpperCase();
        // Replace the lower case character with the new upper case one
        // for every item in the copy
        for (i = 0; i < passwordsCopy.length; i++) {
            passwordsCopy[i][position] = character;
        }
        // Combine (double in length) the lower and upper case arrays
        passwords = passwords.concat(passwordsCopy);
    }
    return passwords;
}

function passwordFixGetPossibles(password) {
    var newPasswordParts = [];
    var newPasswords;
    var inserts = [];
    var charCode;
    var i;
    var j = 0;
    var startPos;
    var hexStr;
    for (i = 0; i < password.length; i++) {
        charCode = password.charCodeAt(i);
        if (charCode >= RAND_CHAR_START && charCode <= RAND_CHAR_END) {
            // Valid char, just add it
            newPasswordParts[j++] = password[i];
        } else {
            // Invalid char (out of range).  Facebook must have replaced %xx with this char.
            // Add a % and two empty chars to be filled in later
            newPasswordParts[j++] = '%';
            inserts.push([j, charCode]);
            newPasswordParts[j++] = '';
            newPasswordParts[j++] = '';
        }
    }
    // Start off with an array of one
    newPasswords = [newPasswordParts];

    for (i = 0; i < inserts.length; i++) {
        hexStr = inserts[i][1].toString(16);
        startPos = inserts[i][0];
        if (hexStr.length === 1) {
            // zero pad chars < 16
            hexStr = '0' + hexStr;
        }
        // Generate all possible combination of hex chars (upper and lower case) that
        // could be correct
        newPasswords = passwordFixInjectPossibleChars(newPasswords, startPos, hexStr[0]);
        newPasswords = passwordFixInjectPossibleChars(newPasswords, startPos + 1, hexStr[1]);
    }
    // Convert from arrays of chars to an array of strings
    return newPasswords.map(function (passwordChars) {
        return passwordChars.join('');
    });
}

// New "install".  Creates a new account.
function createAccount() {
    Zynga.Event.last(Zynga.Events.APP_ID, function (appId) {
        var password = generatePassword();
        ZyngaNet.api('POST', 'auth/registerDevice', {
            body: {
                password: password,
                appId: appId
            },
            noAuth: true
        }).then(
            function (response: any) {
                var body: any = response.body;
                var xhr = response.xhr;
                if (typeof body === 'object' && xhr.status === 200) {
                    // Save Social Network ID and passowrd for later as well
                    body.socialNetwork = SOCIAL_NETWORKS.ZYNGA_ANONYMOUS;
                    body.password = password;

                    // set new valid auth data.
                    setValidAccountData(body, true, false);

                    // fire an event.  Useful for install tracking
                    Event.fire(Events.ACCOUNT_CREATE, cloneObject(body));
                } else {
                    // TODO: error flow
                    // tslint:disable-next-line:no-console
                    console.log('Account create failed');
                }
            },
            function (error) {
                // TODO: error flow
                // tslint:disable-next-line:no-console
                console.log('Error during auth/registerDevice', error);
            }
            );
    });
}

// Issue a new token/expiry.
function issueToken(userId, password, appId) {
    return new Promise(function (resolve, reject) {
        ZyngaNet.api('POST', 'auth/issueToken', {
            body: {
                userId: userId,
                password: password,
                appId: appId
            },
            noAuth: true
        }).then(
            function (response) {
                var body = response.body;
                var xhr = response.xhr;
                if (typeof body === 'object' && xhr.status === 200) {
                    resolve(body);
                } else {
                    var errorCat = xhr.getResponseHeader('Error-Category');
                    var errorMsg = xhr.getResponseHeader('Error-Message');
                    var errorType = 'unknown';
                    if (xhr.status === 500 &&
                        errorCat && errorCat.toString().toLowerCase() === 'auth.generalerror' &&
                        errorMsg && errorMsg.toString().toLowerCase() === 'invalid userid or password') {
                        // We care about this particular 500 error so give it a known error string
                        errorType = 'badlogin';
                    }
                    reject({
                        errorType: errorType,
                        xhr: xhr,
                        body: body
                    });
                }
            },
            function (error) {
                // Major XHR error
                reject({
                    error: error
                });
            }
            );
    });
}

// Account details changed as the result of issuing a new token
function newAccountDetails(oldDetails: object, newZid, newExpires, newToken: string, newPassword: string) {
    var newDetails = cloneObject(oldDetails);
    newDetails.zid = newZid;
    newDetails.expires = newExpires;
    newDetails.token = newToken;
    if (newPassword && newPassword.length > 0) {
        newDetails.password = newPassword;
    }
    Event.fire(Events.ACCOUNT_LOGIN, cloneObject(newDetails));
    setValidAccountData(cloneObject(newDetails), true, false);
}

function genIssueTokenPromise(userId, password, appId) {
    return new Promise(function (resolve) {
        issueToken(userId, password, appId).then(function (issueData: any) {
            issueData.password = password; // Add the good password to the payload
            resolve(issueData);
        }, function () {
            // We don't care about rejections, just resolve with false to let the
            // caller know this password did not work for whatever reason
            resolve(false);
        });
    });
}

function tryRevEngineeredPassowrds(userId, badPassword, appId) {
    return new Promise(function (resolve) {
        var passwords = passwordFixGetPossibles(badPassword);
        var i;
        var issueTokenPromises = [];
        for (i = 0; i < passwords.length; i++) {
            issueTokenPromises.push(genIssueTokenPromise(userId, passwords[i], appId));
        }

        Promise.all(issueTokenPromises).then(function (attempts) {
            // tslint:disable-next-line:no-shadowed-variable
            var i;
            var result = false;
            for (i = 0; i < attempts.length; i++) {
                if (attempts[i]) {
                    result = attempts[i];
                    break;
                }
            }
            resolve(result);
        }, function () {
            // No rejections just return false
            resolve(false);
        });
    });
}

// Login user and get new session info.
// Used when the user's session has expired
function getNewToken(accountData) {
    var accountDataCopy = cloneObject(accountData);
    Zynga.Event.last(Zynga.Events.APP_ID, function (appId) {
        issueToken(accountData.userId, accountData.password, appId).then(function (issueData: any) {
            // Successfully fetched new token
            newAccountDetails(accountData, issueData.zid, issueData.expires, issueData.token, accountData.password);
        }, function (error) {
            var badLoginData = {
                accountDetails: accountDataCopy,
                recoverStatus: 'failed',
                recoverFromCache: 'did_not_try',
                recoverRevEngineer: 'did_not_try'
            };
            if (error.errorType === 'badlogin') {
                // We can be confident that this is because this is Android and facebook
                // corrupted our password :(
                // First see if we have a cached value that might have the original passowrd
                getCachedAccountData().then(function (cachedData: any) {
                    if (cachedData &&
                        cachedData.userId === accountData.userId &&
                        cachedData.password !== accountData.password) {
                        // Great, we have cached data for the same anon uid and the passowrd is different.
                        // Likely the original password so try it.
                        issueToken(cachedData.userId, cachedData.password, appId).then(function (issueData: any) {
                            // Successfully fetched new token
                            newAccountDetails(accountData, issueData.zid, issueData.expires, issueData.token, cachedData.password);
                            badLoginData.recoverStatus = 'success';
                            badLoginData.recoverFromCache = 'success';
                            Event.fire(Events.ACCOUNT_PASSWORD_FAIL, badLoginData);
                        }, function (issueTokenerror) {
                            // issueToken with cached password failed
                            badLoginData.recoverFromCache = 'failed';
                            if (issueTokenerror.errorType === 'badlogin') {
                                // Cache password was bad as well
                                // Try to reverse engineer the FB stored password first as it's most likely to succeed
                                tryRevEngineeredPassowrds(accountData.userId, accountData.password, appId).then(function (fixedData: any) {
                                    if (fixedData) {
                                        // fixedData will also contain the reovered password
                                        newAccountDetails(accountData, accountData.zid, fixedData.expires, fixedData.token, fixedData.password);
                                        badLoginData.recoverStatus = 'success';
                                        badLoginData.recoverRevEngineer = 'success';
                                        Event.fire(Events.ACCOUNT_PASSWORD_FAIL, badLoginData);
                                    } else {
                                        // Last ditch effort. Maybe we can rev engineer the bad cached password?
                                        tryRevEngineeredPassowrds(cachedData.userId, cachedData.password, appId).then(function (cacheFixedData: any) {
                                            if (cacheFixedData) {
                                                // fixedData will also contain the reovered password
                                                newAccountDetails(accountData,
                                                    cacheFixedData.zid,
                                                    cacheFixedData.expires,
                                                    cacheFixedData.token,
                                                    cacheFixedData.password
                                                );
                                                badLoginData.recoverStatus = 'success';
                                                badLoginData.recoverRevEngineer = 'success';
                                                badLoginData.recoverFromCache = 'success'; // Also set this since it was the cached password we rev eng here
                                            } else {
                                                // f'it, no other options
                                                badLoginData.recoverRevEngineer = 'failed';
                                            }
                                            Event.fire(Events.ACCOUNT_PASSWORD_FAIL, badLoginData);
                                        });
                                    }
                                });
                            } else {
                                // Strange error with cached token,
                                // Try rev eng of FB supplied token
                                tryRevEngineeredPassowrds(accountData.userId, accountData.password, appId).then(function (fixedData: any) {
                                    if (fixedData) {
                                        // fixedData will also contain the reovered password
                                        newAccountDetails(accountData, accountData.zid, fixedData.expires, fixedData.token, fixedData.password);
                                        badLoginData.recoverStatus = 'success';
                                        badLoginData.recoverRevEngineer = 'success';
                                    }
                                    Event.fire(Events.ACCOUNT_PASSWORD_FAIL, badLoginData);
                                });
                            }
                        });
                    } else {
                        // No valid cached data.
                        badLoginData.recoverFromCache = 'nocache';
                        tryRevEngineeredPassowrds(accountData.userId, accountData.password, appId).then(function (fixedData: any) {
                            if (fixedData) {
                                // fixedData will also contain the reovered password
                                newAccountDetails(accountData, accountData.zid, fixedData.expires, fixedData.token, fixedData.password);
                                badLoginData.recoverStatus = 'success';
                                badLoginData.recoverRevEngineer = 'success';
                            } else {
                                badLoginData.recoverRevEngineer = 'failed';
                            }
                            Event.fire(Events.ACCOUNT_PASSWORD_FAIL, badLoginData);
                        });
                    }
                });
            }
        });
    });
}

function useExistingSession(anonData, hasChanged) {
    var nowMS = new Date().getTime();
    var expiresMS = anonData.expires * 1000;
    if (expiresMS > nowMS) {
        // Existing session is still good
        setValidAccountData(anonData, hasChanged, false);
        // Fetch a new token 30s before this one expires
        win.setTimeout(function () {
            getNewToken(anonData);
        }, Math.max(expiresMS - nowMS - 30000, 0));
    } else {
        // Existing session has expired
        // tslint:disable-next-line:no-console
        console.log('Existing session expired', anonData);
        getNewToken(anonData);
    }
}

// Login flow logic
function login() {
    return new Promise(function (resolve, reject) {
        Event.last(Events.ACCOUNT_DETAILS, function (anonAccountDetails) {
            resolve(anonAccountDetails);
        });
        getStorageKeyAsync().then(function (anonInfoKey: string) {
            ZyngaInstant.player.getDataAsync([anonInfoKey]).then(
                function (data) {
                    var anonData = data && data[anonInfoKey] || false;
                    if (anonData) {
                        useExistingSession(anonData, false);
                    } else {
                        // No data from FB but they are unreliable :(
                        // If we have somethign cached then use that
                        getCachedAccountData().then(function (cachedData) {
                            if (cachedData) {
                                // Use the locally cached auth information.
                                useExistingSession(cachedData, true);
                                Event.fire(Events.ACCOUNT_MISMATCH, cloneObject(cachedData));
                            } else {
                                // Fist time user.  Create new anon account
                                createAccount();
                            }
                        });
                    }
                },
                function (error) {
                    // Error fetching instant data
                    // What do we do now?
                    reject(error);
                }
            );
        });
    });
}
*/



define("ZyngaAnalytics", ["require", "exports", "Zynga", "ZyngaAccount", "ZyngaCore", "ZyngaInstant", "ZyngaMatch", "ZyngaNet"], function (require, exports, Zynga, ZyngaAccount, ZyngaCore, ZyngaInstant, ZyngaMatch, ZyngaNet) {
    // tslint:disable-next-line:comment-format
    ///<amd-module name="ZyngaAnalytics"/>
    'use strict';
    Object.defineProperty(exports, "__esModule", { value: true });
    var win = window;
    var currentClientId;
    var loadStart = new Date().getTime();
    var sessionId = Math.round(loadStart / 1000);
    var sessionIdBase16 = '';
    var lastBase10ContextId = '';
    var lastBase16ContextId = '';
    var lastBase10InstanceId = '';
    var lastBase16InstanceId = '';
    var gameNumber = 0;
    var gameNumberIncremented = false;
    var base16GameNumber = '';
    var gameScore = 0;
    var userAgent = win.navigator && win.navigator.userAgent;
    var uaStats = {
        os: 'todo',
        osVersion: 'todo',
        browser: 'todo',
        browserVersion: 'todo'
    };
    var inApp = 'unknown';
    var trackResolvers = {}; // Index of yet to resolve track calls
    var emptyFunc = function () { };
    var emptyTrackBatchItemsThenables = {
        resolver: emptyFunc,
        rejecter: emptyFunc
    };
    var internalBatchDelayMS = 2000; // Internal maximum wait time to log Tier0/Tier1 stats
    var currentMaxBatchDelayMS = 1000; // Maximum number of miliseconds to delay a logXXXX before sending a batch
    var currentMaxBatchSize = 100; // Maximum number of items to place in a batch
    var trackCallCount = 0; // Incremented each time a track call happens
    var pendingTracks = []; // List of pending track calls
    var nextTracksSend = Infinity; // Time, in MS the next batch of track calls is to be send
    var nextTrackSendTimeout; // setTimout ID for next track send
    if (userAgent.match(/FBAN\/MessengerForiOS|FB_IAB\/MESSENGER/)) {
        inApp = 'messenger';
    }
    else if (userAgent.match(/FBAN\/FBIOS|FB_IAB\/FB4A/)) {
        inApp = 'facebook';
    }
    var loggedDemographics = false; // logged demographics this session
    /* TODO: user agent parsing... complicated
    
    if (userAgent.match(/iPad/i) || userAgent.match(/iPhone/i)) {
        // iOS device
    
    } else if (userAgent.match(/Android/i)) {
        // Android
    
    } else {
    
    }
    */
    var autoTrackOptions = {};
    var AT_INSTALL = 'install';
    var AT_VISIT = 'visit';
    var AT_LOCALE = 'locale';
    var AT_DEMOGRAPHICS = 'demographics';
    var AT_LOAD_PERF = 'loadPerformance';
    var AT_COUNT_SESSION = 'countSession';
    var AT_RESOLUTION = 'resolution';
    var AT_OS = 'os';
    var AT_FB_PLATFORM = 'fbPlatform';
    var AT_FB_CONTEXT = 'fbContext';
    var AT_GAME_START = 'gameStart';
    var AT_GAME_END = 'gameStart';
    var AT_FB_ID_ASSOC = 'fbPlayerIdAssoc';
    var currentUserZid = 0;
    var incomingDataMap = {
        p: 'senderZyngaPlayerId',
        g: 'senderGameId',
        s: 'source',
        c: 'creative',
        ct: 'creativeType',
        ci: 'creativeId',
        i: 'instanceId',
        cp: 'carouselPosition',
        t: 'timestamp'
    };
    var outgoingDataMap = {};
    // Populate reverse map
    for (var mapProperty in incomingDataMap) {
        outgoingDataMap[incomingDataMap[mapProperty]] = mapProperty;
    }
    function debug() {
        var args = [];
        for (var _a = 0; _a < arguments.length; _a++) {
            args[_a] = arguments[_a];
        }
        var output = args.map(function (value) {
            if (typeof value === 'object') {
                value = JSON.stringify(value, undefined, 2);
            }
            return value.toString();
        }).join(' ');
        exports.Event.fire(exports.Events.DEBUG, {
            time: new Date(),
            data: output
        });
    }
    function objectClone(obj) {
        return JSON.parse(JSON.stringify(obj));
    }
    /* tslint:disable */
    function dec2hex(str) {
        var dec = str.toString().split(''), sum = [], hex = [], i, s;
        while (dec.length) {
            s = 1 * dec.shift();
            for (i = 0; s || i < sum.length; i++) {
                s += (sum[i] || 0) * 10;
                sum[i] = s % 16;
                s = (s - sum[i]) / 16;
            }
        }
        while (sum.length) {
            hex.push(sum.pop().toString(16));
        }
        return hex.join('') || '0';
    }
    /* tslint:enable */
    function canMakePIICall() {
        return ZyngaInstant.Event.getLastFiredValue(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT) === true;
    }
    sessionIdBase16 = dec2hex(sessionId.toString());
    function getTrackQueueKeyAsync() {
        var appIdPromise = Zynga.Event.last(Zynga.Events.APP_ID);
        var accountPromise = ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS);
        return Promise.all([appIdPromise, accountPromise]).then(function (results) {
            var appId = results[0];
            var zid = results[1].zid;
            return ['__TRACK_QUEUE', appId, zid].join('_');
        });
    }
    // Keep a promise around so that we only ever have one save at a time queued up.
    // Give it a default value so that no saves happen until we restore.
    var saveQueueToCachePromise = Promise.resolve(false);
    function saveTrackQueueToCache() {
        if (saveQueueToCachePromise === undefined) {
            saveQueueToCachePromise = getTrackQueueKeyAsync().then(function (key) {
                var savedEntries = false;
                debug('Persisting to disk: ' + pendingTracks.length);
                if (pendingTracks.length > 0) {
                    // If this fails for any reason the this promise will reject.
                    // That is why no try/catch around this.
                    localStorage.setItem(key, JSON.stringify(pendingTracks));
                    savedEntries = true;
                }
                else {
                    // Clean up any existing key
                    localStorage.removeItem(key);
                }
                // remove pointer to self.  We are done now.
                saveQueueToCachePromise = undefined;
                return savedEntries;
            });
            return saveQueueToCachePromise;
        }
        // foo
    }
    function restoreTrackQueueFromCache() {
        return getTrackQueueKeyAsync().then(function (key) {
            var cachedBatchString = localStorage.getItem(key);
            var restoreCount = 0;
            if (cachedBatchString) {
                var oldTrackItems = JSON.parse(cachedBatchString);
                if (Array.isArray(oldTrackItems) && oldTrackItems.length > 0) {
                    pendingTracks = oldTrackItems.concat(pendingTracks);
                    restoreCount = oldTrackItems.length;
                }
            }
            return restoreCount;
        });
    }
    function setMaxBatchDelayMS(newMaxBatchDelayMS) {
        if (newMaxBatchDelayMS >= 0) {
            currentMaxBatchDelayMS = newMaxBatchDelayMS;
        }
    }
    exports.setMaxBatchDelayMS = setMaxBatchDelayMS;
    function getMaxBatchDelayMS() {
        return currentMaxBatchDelayMS;
    }
    exports.getMaxBatchDelayMS = getMaxBatchDelayMS;
    function setMaxBatchSize(newMaxBatchSize) {
        if (newMaxBatchSize >= 0) {
            currentMaxBatchSize = newMaxBatchSize;
        }
    }
    exports.setMaxBatchSize = setMaxBatchSize;
    function getMaxBatchSize() {
        return currentMaxBatchSize;
    }
    exports.getMaxBatchSize = getMaxBatchSize;
    function flushTrackCalls() {
        var tracks = pendingTracks;
        var batchableTrackBodies = [];
        var batchableTracksThenables = [];
        // Reset batching
        pendingTracks = [];
        nextTracksSend = Infinity;
        saveTrackQueueToCache();
        clearTimeout(nextTrackSendTimeout);
        debug('Flushing track calls:', tracks.length);
        ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS, function (anonAccountDetails) {
            exports.Event.last(exports.Events.CLIENT_ID, function (clientId) {
                var commonBody = {
                    primarySN: anonAccountDetails.socialNetwork,
                    primaryZid: anonAccountDetails.zid,
                    zid: anonAccountDetails.zid,
                    clientId: clientId
                };
                var trackThenables;
                var trackBody;
                tracks.forEach(function (trackItem) {
                    trackBody = trackItem.body;
                    // Get pointer to resolver and rejector functions from original promise
                    trackThenables = trackResolvers[trackItem.promiseId] || emptyTrackBatchItemsThenables;
                    delete trackResolvers[trackItem.promiseId];
                    if (trackItem.eventName.toLocaleLowerCase() === 'multi' || trackItem.options.noBatch === true) {
                        // We are a call that is not to be batched
                        // Set common fields if not provided
                        trackBody.primarySN = trackBody.primarySN || commonBody.primarySN;
                        trackBody.primaryZid = trackBody.primaryZid || commonBody.primaryZid;
                        trackBody.zid = trackBody.zid || commonBody.zid;
                        trackBody.clientId = trackBody.clientId || commonBody.clientId;
                        // Make the non-batchable track call
                        ZyngaNet.api('POST', 'track/log' + trackItem.eventName, {
                            body: trackItem.body,
                            useToken: anonAccountDetails.token
                        }).then(trackThenables.resolver, trackThenables.rejecter);
                    }
                    else {
                        // Remove redundant track data that is set at a batch level
                        if (trackBody.primarySN === commonBody.primarySN) {
                            delete trackBody.primarySN;
                        }
                        if (trackBody.primaryZid === commonBody.primaryZid) {
                            delete trackBody.primaryZid;
                        }
                        if (trackBody.zid === commonBody.zid) {
                            delete trackBody.zid;
                        }
                        if (trackBody.clientId === commonBody.clientId) {
                            delete trackBody.clientId;
                        }
                        // Set the batch item method
                        trackBody.ztrackEvent = trackItem.eventName;
                        // Add trackBodies
                        batchableTrackBodies.push(trackBody);
                        batchableTracksThenables.push(trackThenables);
                    }
                });
                if (batchableTrackBodies.length > 0) {
                    var trackMultiBody = objectClone(commonBody);
                    trackMultiBody.data = batchableTrackBodies;
                    // Make the non-batchable track call
                    debug('sending batch:', trackMultiBody.data.length);
                    ZyngaNet.api('POST', 'track/logMulti', {
                        body: trackMultiBody,
                        useToken: anonAccountDetails.token
                    }).then(function (trackResults) {
                        var trackResultsBody = trackResults.body;
                        if (Array.isArray(trackResultsBody)) {
                            trackResultsBody.forEach(function (trackResult, i) {
                                var thenables = batchableTracksThenables[i] || emptyTrackBatchItemsThenables;
                                // Fake a ZyngaNet result as if this was a single track call
                                thenables.resolver({
                                    xhr: trackResults.xhr,
                                    body: trackResult
                                });
                            });
                        }
                    }, function (trackError) {
                        // Reject all in the batch
                        batchableTracksThenables.forEach(function (thenable) {
                            thenable.rejecter(trackError);
                        });
                    });
                }
                if (tracks.length > 0) {
                    // Let people who care know that the queue has been flushed
                    exports.Event.fire(exports.Events.QUEUE_FLUSHED, tracks.length);
                }
            });
        });
    }
    exports.flushTrackCalls = flushTrackCalls;
    function getTrackMilestone() {
        var canGetContextId = canMakePIICall();
        var contextId = canGetContextId &&
            ZyngaInstant.context &&
            ZyngaInstant.context.getID &&
            ZyngaInstant.context.getID() || '';
        var instanceId = ZyngaMatch && ZyngaMatch.getCurrentMatchId && ZyngaMatch.getCurrentMatchId() || '';
        if (contextId !== lastBase10ContextId) {
            lastBase10ContextId = contextId;
            lastBase16ContextId = dec2hex(lastBase10ContextId);
        }
        if (instanceId !== lastBase10InstanceId) {
            lastBase10InstanceId = instanceId && instanceId.toString() || '';
            lastBase16InstanceId = dec2hex(lastBase10InstanceId);
        }
        return [sessionIdBase16, lastBase16ContextId, lastBase16InstanceId, base16GameNumber].join(':');
    }
    exports.getTrackMilestone = getTrackMilestone;
    function customTrackLogCall(methodName, args, trackingOptions) {
        var nowMS = new Date().getTime();
        var clientTS = Math.floor(nowMS / 1000);
        var promiseId = nowMS + '.' + trackCallCount++;
        var trackPromise = new Promise(function (resolve, reject) {
            // Save a pointer to these resolve/reject functions
            trackResolvers[promiseId] = {
                rejecter: reject,
                resolver: resolve
            };
        });
        var latestSendTime;
        var maxDelay = currentMaxBatchDelayMS;
        // So long as the call has not used attribute or milestone (same thing) we can use it for session identification
        args = objectClone(args) || {};
        trackingOptions = trackingOptions || {};
        methodName = methodName.toLowerCase();
        if (methodName.indexOf('log') === 0) {
            methodName = methodName.substring(3);
        }
        if (trackingOptions && trackingOptions.maxBatchDelayMS >= 0) {
            maxDelay = trackingOptions.maxBatchDelayMS;
        }
        // Add default value for 'attribute' property for count calls
        if (methodName === 'count' && args.attribute === undefined) {
            args.attribute = getTrackMilestone();
        }
        // Set the current client time if it does not already exists
        args.clientDeviceTs = args.clientDeviceTs || clientTS;
        latestSendTime = nowMS + maxDelay;
        pendingTracks.push({
            eventName: methodName,
            body: args,
            options: trackingOptions,
            promiseId: promiseId
        });
        debug('Added track method to queue: ', methodName, 'Queue Size: ', pendingTracks.length);
        // Persist the queue to disk
        saveTrackQueueToCache();
        if (pendingTracks.length >= currentMaxBatchSize) {
            // Just send now.  Batch is full.
            latestSendTime = nowMS;
            maxDelay = 0;
        }
        if (latestSendTime < nextTracksSend) {
            // Clear the current timer and fire sooner
            clearTimeout(nextTrackSendTimeout);
            setTimeout(flushTrackCalls, maxDelay);
            nextTracksSend = latestSendTime;
        }
        return trackPromise;
        // TODO: examing trackOptions and do batching and localStorage persistance
    }
    exports.customTrackLogCall = customTrackLogCall;
    // tslint:enable:max-line-length
    /* tslint:disable:max-line-length */
    function logCount(args, trackingOptions) { return customTrackLogCall('count', args, trackingOptions); }
    exports.logCount = logCount;
    function logInstall(args, trackingOptions) { return customTrackLogCall('install', args, trackingOptions); }
    exports.logInstall = logInstall;
    function logVisit(args, trackingOptions) { return customTrackLogCall('visit', args, trackingOptions); }
    exports.logVisit = logVisit;
    function logAssociate(args, trackingOptions) { return customTrackLogCall('associate', args, trackingOptions); }
    exports.logAssociate = logAssociate;
    function logLanguage(args, trackingOptions) { return customTrackLogCall('language', args, trackingOptions); }
    exports.logLanguage = logLanguage;
    function logDemographic(args, trackingOptions) { return customTrackLogCall('demographic', args, trackingOptions); }
    exports.logDemographic = logDemographic;
    function logGameStart(args, trackingOptions) {
        if (base16GameNumber) {
            return Promise.reject('You must call logGameComplete before calling logGameStart again.');
        }
        base16GameNumber = dec2hex(++gameNumber);
        args = args || {};
        args.counter = 'game_start';
        return customTrackLogCall('count', args, trackingOptions);
    }
    exports.logGameStart = logGameStart;
    function logGameComplete(args, trackingOptions) {
        args = args || {};
        args.counter = 'game_complete';
        var trackPromise = customTrackLogCall('count', args, trackingOptions);
        base16GameNumber = ''; // Log as '' when between active game plays
        return trackPromise;
    }
    exports.logGameComplete = logGameComplete;
    /* tshint:enable:max-line-length */
    exports.Event = new ZyngaCore.EventMixin();
    exports.Events = {
        CLIENT_ID: 'Analytics.clientId',
        QUEUE_FLUSHED: 'Analytics.queueFlushed',
        DEBUG: 'Analytics.debug'
    };
    function getSessionId() { return sessionId; }
    exports.getSessionId = getSessionId;
    function getCurrentGameNumber() {
        return base16GameNumber === '' ? null : gameNumber;
    }
    exports.getCurrentGameNumber = getCurrentGameNumber;
    function getLastGameNumber() {
        return gameNumber || null;
    }
    exports.getLastGameNumber = getLastGameNumber;
    exports.CLIENT_IDS = {
        WEB_UNKNOWN: '433',
        WEB_FACEBOOK: '427',
        WEB_MESSENGER: '428',
        IOS_UNKNOWN: '434',
        IOS_FACEBOOK: '429',
        IOS_MESSENGER: '430',
        ANDROID_UNKNOWN: '435',
        ANDROID_FACEBOOK: '431',
        ANDROID_MESSENGER: '432'
    };
    function checkClientId() {
        var platform = ZyngaInstant.getPlatform();
        var app = inApp; // derrive from FB Instant SDK if/when available.  For now we look at useragent string
        var newClientId;
        newClientId = exports.CLIENT_IDS[(platform + '_' + app).toUpperCase()];
        if (newClientId && newClientId !== currentClientId) {
            currentClientId = newClientId;
            exports.Event.fire(exports.Events.CLIENT_ID, currentClientId);
        }
    }
    checkClientId();
    function autoLogCount(pref, args) {
        if (autoTrackOptions[pref] === true) {
            logCount(args, { maxBatchDelayMS: internalBatchDelayMS });
        }
    }
    function genCreativeId(zid) {
        var nowMS = new Date().getTime();
        return dec2hex(zid) + ':' + dec2hex(nowMS);
    }
    function mapFields(data, map) {
        var newObj = {};
        for (var k in data) {
            if (map.hasOwnProperty(k)) {
                newObj[map[k]] = data[k];
            }
        }
        return newObj;
    }
    function genUpdateOrShareHook(source) {
        // Applies common data tor the update/share async arguments
        return function updateOrShareHook(arg) {
            var newVal = arg;
            var zynga;
            var zid = currentUserZid || 0;
            // Get instance ID.
            // First try the current one.  For when this is called before Match.endTurnAsync
            // Next try the previous one.  For when this is called after Match.endTurnAsync
            var instanceId = (ZyngaMatch && (ZyngaMatch.getCurrentMatchId() || ZyngaMatch.getPreviousMatchId())) || false;
            var sourceName = 'unknown';
            if (source === 'u') {
                sourceName = 'update';
            }
            else if (source === 's') {
                sourceName = 'share';
            }
            if (arg && typeof arg === 'object') {
                newVal = objectClone(arg); // We want our own copy
                newVal.data = newVal.data || {};
                zynga = newVal.data.zynga || {};
                zynga.source = source; // Note this is the short hand value
                // Remove the zynga object property now that we have a reference to it.
                // Will be replace with an '__z' propery and object
                delete newVal.data.zynga;
                if (zid) {
                    zynga.senderZyngaPlayerId = zynga.senderZyngaPlayerId || zid;
                }
                zynga.creativeId = zynga.creativeId || genCreativeId(zid);
                if (instanceId !== false) {
                    zynga.instanceId = +zynga.instanceId || +instanceId;
                }
                // TODO: Find out from FB how many clients still expect BOT data on updateAsync
                //       If there are still a significant number out there then also add bot
                //       data in the setSessionData format for the bot service
                // Log the share.  Kind of like an impression?
                logCount({
                    counter: 'game_share',
                    kingdom: (canMakePIICall() && ZyngaInstant.context.getType() || '') + ':' + sourceName,
                    phylum: zynga.creative || '',
                    'class': (zynga.creativeId || '').toString(),
                    family: (zynga.creativeType || '').toString(),
                    genus: (zynga.instanceId || '').toString()
                });
                newVal.data['__z'] = mapFields(zynga, outgoingDataMap);
            }
            return [newVal]; // Same object but the structure is slightly modified.
        };
    }
    function fixupEntryPointData(data) {
        var newData = data;
        var zynga;
        if (data && typeof data === 'object') {
            newData = objectClone(data);
            // Map shortform field name to longform
            zynga = mapFields(newData['__z'] || {}, incomingDataMap);
            var shorthandSource = zynga.source;
            delete newData['__z'];
            // Handle old bot format (temporary until bot logic moves to new format)
            /*
                * {
                *   _m: messageTraceGuid,
                *   _p: i,
                *   _i: botInstanceId,
                *   _b: botInstanceData,
                *   _t: messageType
                * }
                */
            if (newData['_t'] && newData['_m'] && !zynga.source) {
                shorthandSource = zynga.source || 'b'; // bot
                zynga.creativeId = zynga.creativeId || newData['_m'];
                zynga.instanceId = zynga.instanceId || newData['_i'];
                zynga.creativeType = zynga.creativeType || newData['_t'] || '';
                zynga.carouselPosition = zynga.carouselPosition || newData['_p'] || '';
            }
            // translate source to longform
            switch (shorthandSource) {
                case 'b':
                    zynga.source = 'bot';
                    break;
                case 'u':
                    zynga.source = 'update';
                    break;
                case 's':
                    zynga.source = 'share';
                    break;
                case 'x':
                    zynga.source = 'xpromo';
                    break;
                default:
                    zynga.source = 'unknown';
            }
            // Add the new zynga object
            newData.zynga = zynga;
        }
        return newData;
    }
    // Note, you can only call this if FBIG TOS has been accepted
    function getEntryTrackData() {
        var entryPointData = canMakePIICall() && ZyngaInstant.getEntryPointData();
        var zynga = entryPointData && typeof entryPointData === 'object' && entryPointData.zynga || {};
        var trackData = {
            channel: zynga.source || 'unknown',
            phylum: zynga.creative || '',
            family: zynga.creativeType || '',
            'class': zynga.creativeId || '',
            genus: zynga.instanceId || '',
            kingdom: ZyngaInstant.context.getType()
        };
        if (zynga.senderZyngaPlayerId) {
            trackData.externalSendId = zynga.senderZyngaPlayerId;
        }
        return trackData;
    }
    // Apply hooks to add common data on update/share
    ZyngaInstant.zynga.registerMethodArgumentHook('updateAsync', genUpdateOrShareHook('u'));
    ZyngaInstant.zynga.registerMethodArgumentHook('shareAsync', genUpdateOrShareHook('s'));
    ZyngaInstant.zynga.registerMethodReturnHook('getEntryPointData', fixupEntryPointData);
    /*****************/
    /* Auto Tracking */
    /*****************/
    // Public flags
    exports.AUTO_TRACK = {
        INSTALLS: AT_INSTALL,
        VISITS: AT_VISIT,
        LOCALE: AT_LOCALE,
        DEMOGRAPHICS: AT_DEMOGRAPHICS,
        LOAD_PERF: AT_LOAD_PERF,
        COUNT_SESSION: AT_COUNT_SESSION,
        RESOLUTION: AT_RESOLUTION,
        OS: AT_OS,
        PLATFORM: AT_FB_PLATFORM,
        FB_CONTEXT: AT_FB_CONTEXT,
        GAME_START: AT_GAME_START,
        GAME_END: AT_GAME_END,
        FACEBOOK_ID_ASSOC: AT_FB_ID_ASSOC
    };
    // Default auto-track values
    for (var option in exports.AUTO_TRACK) {
        if (exports.AUTO_TRACK.hasOwnProperty(option)) {
            autoTrackOptions[exports.AUTO_TRACK[option]] = true;
        }
    }
    // Don't auto-track locale.  Leave that up to the game.
    autoTrackOptions[AT_LOCALE] = false;
    // Set a valid auto-track option value
    function setAutoTrack(trackOption, value) {
        if (!exports.AUTO_TRACK.hasOwnProperty(trackOption)) {
            throw new TypeError('"option" is not one of Zynga.Analytics.AUTO_TRACK.*');
        }
        if (typeof value !== 'boolean') {
            throw new TypeError('"value" must be of type boolean');
        }
        autoTrackOptions[option] = value;
    }
    exports.setAutoTrack = setAutoTrack;
    // Get a valid auto-track option value
    function getAutoTrack(trackOption) {
        if (!exports.AUTO_TRACK.hasOwnProperty(trackOption)) {
            throw new TypeError('"option" is not one of Zynga.Analytics.AUTO_TRACK.*');
        }
        return autoTrackOptions[option];
    }
    exports.getAutoTrack = getAutoTrack;
    ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_INITIALIZED, function () {
        var contextType;
        var contextId;
        function resetContext() {
            var newContextType = ZyngaInstant.context && ZyngaInstant.context.getType && ZyngaInstant.context.getType() || 'unknown';
            var newContextId = ZyngaInstant.context && ZyngaInstant.context.getID && ZyngaInstant.context.getID() || '';
            if (newContextType !== contextType || newContextId !== contextId) {
                // Log facebook 'context' counter
                autoLogCount(AT_FB_CONTEXT, {
                    counter: 'context',
                    kingdom: newContextId,
                    phylum: newContextType,
                    'class': inApp
                });
                if (newContextId && autoTrackOptions[AT_FB_CONTEXT] === true) {
                    logAssociate({
                        attribute: 'user_context_conversation',
                        value1: newContextId,
                        kingdom: newContextType || 'unknown',
                    }, { maxBatchDelayMS: internalBatchDelayMS });
                }
            }
            contextType = newContextType;
            contextId = newContextId;
        }
        ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT, resetContext);
        checkClientId(); // check the current clilentId.
        // Log migrations so analytics knows it's not a new user
        ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_MIGRATED).then(function (migrationData) {
            logAssociate({
                attribute: 'snuid_device_mapping',
                value1: '',
                value2: migrationData.from.socialNetwork,
                value3: migrationData.from.userId
            }, { maxBatchDelayMS: internalBatchDelayMS });
        });
        ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_CREATE, function () {
            if (autoTrackOptions[AT_INSTALL] === true) {
                logInstall(getEntryTrackData(), { maxBatchDelayMS: internalBatchDelayMS });
            }
            if (autoTrackOptions[AT_FB_ID_ASSOC] === true) {
                logAssociate({
                    attribute: 'snuid_device_mapping',
                    value1: '',
                    value2: 42,
                    value3: ZyngaInstant.player.getID()
                }, { maxBatchDelayMS: internalBatchDelayMS });
            }
            ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_GAME_STARTED, function () {
                logCount({
                    counter: 'fbig_tos_accept'
                });
            });
        });
        ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
            autoLogCount(AT_FB_PLATFORM, {
                counter: 'fb_platform',
                phylum: ZyngaInstant.getPlatform(),
                'class': ZyngaInstant.getLocale()
            });
        });
        // Reset context on change event
        ZyngaInstant.Event.on(ZyngaInstant.Events.INSTANT_CONTEXT_ID_CHANGE, resetContext);
        ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
            // Auto Visit/Locale tracking
            if (autoTrackOptions[AT_VISIT] === true) {
                var entryTrackData = getEntryTrackData();
                var entryPointData = ZyngaInstant.getEntryPointData();
                var zyngaEntryData = entryPointData && entryPointData.zynga || {};
                logVisit(entryTrackData, { maxBatchDelayMS: internalBatchDelayMS });
                // Also logCount as only 1st logVisit per day is persisted
                logCount({
                    counter: 'game_entry',
                    kingdom: entryTrackData.kingdom + ':' + entryTrackData.channel,
                    phylum: entryTrackData.phylum,
                    'class': entryTrackData['class'],
                    family: entryTrackData.family,
                    genus: entryTrackData.genus,
                    attribute: entryTrackData.externalSendId || ''
                });
                if (zyngaEntryData.source === 'bot') {
                    // Bot message specific logging
                    logCount({
                        counter: 'bot_message_reciept',
                        value: +zyngaEntryData.carouselPosition || 0,
                        kingdom: zyngaEntryData.creativeType || '',
                        phylum: 'load',
                        'class': (zyngaEntryData.senderZyngaPlayerId || '').toString(),
                        genus: zyngaEntryData.creativeId || ''
                    });
                }
                else if (zyngaEntryData.source === 'xpromo') {
                    // XPromo message specific logging
                    logCount({
                        counter: 'xpromo_load',
                        value: +zyngaEntryData.carouselPosition || null,
                        kingdom: (zyngaEntryData.creativeType || '').toString(),
                        phylum: (zyngaEntryData.senderGameId || '').toString(),
                        'class': (zyngaEntryData.senderZyngaPlayerId || '').toString(),
                        family: (zyngaEntryData.timestamp || '').toString()
                    });
                }
            }
            // TODO: Limit frequency of this
            if (autoTrackOptions[AT_LOCALE] === true && ZyngaInstant.getLocale()) {
                // TODO: Limit to 1/week if uncahnged
                logLanguage({ language: ZyngaInstant.getLocale() }, { maxBatchDelayMS: internalBatchDelayMS });
            }
        });
        ZyngaInstant.Event.on(ZyngaInstant.Events.INSTANT_GAME_REPLAY, function () {
            resetContext();
            // Also log a visit on every replay
            if (autoTrackOptions[AT_VISIT] === true) {
                logVisit(getEntryTrackData(), { maxBatchDelayMS: internalBatchDelayMS });
            }
        });
        // Log session ID.  Session ID is injected into milestone automatiallcy
        autoLogCount(AT_COUNT_SESSION, {
            counter: 'session_start',
            phylum: ZyngaInstant.player.getID(),
            genus: Zynga.clientVersion // okay if null. would break back-compat if we waited on this optional feature.
        });
        autoLogCount(AT_LOAD_PERF, {
            counter: 'pre_load',
            genus: String(loadStart / 1000)
        });
        autoLogCount(AT_RESOLUTION, {
            counter: 'resolution',
            kingdom: win.screen.width + 'x' + win.screen.height,
            phylum: win.innerWidth + 'x' + win.innerHeight,
            'class': 'ontouchstart' in win ? 'touch' : 'notouch'
        });
    });
    ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS, function (anonAccountDetails) {
        currentUserZid = anonAccountDetails.zid;
    });
    // TODO: Proper session tracking as per: https://github-ca.corp.zynga.com/UnityTech/Zynga.Metrics.Analytics/blob/development/Assets/Zynga/Metrics/Analytics/Documentation/SessionReference.md
    // Game is loaded and waiting for the user to press the play button in the FB ui
    ZyngaInstant.Event.last(ZyngaInstant.Events.GAME_GAME_START, function () {
        var now = new Date().getTime();
        autoLogCount(AT_LOAD_PERF, {
            counter: 'pre_load_complete',
            value: now - loadStart,
            genus: String(now / 1000)
        });
    });
    // Game is loading, the user pressed the play button in the FB ui
    ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_GAME_STARTED, function () {
        // TODO: Limit frequency of this
        if (autoTrackOptions[AT_DEMOGRAPHICS] === true && loggedDemographics === false) {
            logDemographic({
                locale: ZyngaInstant.getLocale(),
                firstName: ZyngaInstant.player.getName(),
                pictureUrl: ZyngaInstant.player.getPhoto(),
                age: '',
                lastName: '',
                userName: '',
                gender: '',
                email: '',
                timezone: ''
            }, { maxBatchDelayMS: internalBatchDelayMS });
            loggedDemographics = true;
        }
    });
    /* lcarl: No longer important, was really old SDK version
    
    // Game start/stop related
    function gameStart() {
        gameScore = 0;
        sessionGameNumber++;
        autoLogCount(AT_GAME_START, {
            counter: 'game_start',
            kingdom: String(sessionGameNumber)
        });
    }
    ZyngaInstant.Event.on(ZyngaInstant.Events.INSTANT_GAME_STARTED, gameStart);
    ZyngaInstant.Event.on(ZyngaInstant.Events.INSTANT_GAME_REPLAY, gameStart);
    
    ZyngaInstant.Event.on(ZyngaInstant.Events.GAME_GAME_END, function () {
        autoLogCount(AT_GAME_END, {
            counter: 'game_end',
            kingdom: String(sessionGameNumber),
            value: gameScore
        });
    });
    ZyngaInstant.Event.on(ZyngaInstant.Events.GAME_SCORE_CHANGE, function (score) {
        if (score > gameScore) {
            gameScore = score;
        }
    });
    
    lcarl: end of old game start/stop logic*/
    autoLogCount(AT_OS, {
        counter: 'os',
        kingdom: uaStats.os,
        phylum: uaStats.osVersion,
        'class': uaStats.browser,
        family: uaStats.browserVersion,
        genus: userAgent
    });
    restoreTrackQueueFromCache().then(function (restoreCount) {
        // Ok, we can now save our queue to disk again
        saveQueueToCachePromise = undefined;
        debug('Restored from disk:', restoreCount);
        if (restoreCount > 0) {
            // We restored some cached track calls from last time we loaded.
            // Send those out right now.
            flushTrackCalls();
        }
    }).catch(function () {
        // Just to be safe allow the queue to save to disk cache here as well
        saveQueueToCachePromise = undefined;
    });
    ZyngaInstant.Event.on(ZyngaInstant.Events.GAME_AD_STATUS, function (adStatus) {
        var trackPayload = {
            counter: 'ad_status_' + adStatus.statusType.toLocaleLowerCase(),
            value: adStatus.time.getTime(),
            kingdom: adStatus.placementId,
            phylum: adStatus.adType,
            class: adStatus.id
        };
        switch (adStatus.statusType) {
            case 'FETCH_ERROR':
            case 'LOAD_ERROR':
            case 'SHOW_ERROR':
                var code = 'ZYNGA_UNKNOWN';
                var message = 'Zynga Unknown';
                if (typeof adStatus.data === 'object') {
                    code = adStatus.data.code || code;
                    message = adStatus.data.message || message;
                }
                trackPayload.family = code;
                trackPayload.genus = message;
        }
        logCount(trackPayload, { maxBatchDelayMS: internalBatchDelayMS });
    }, true);
});



define("ZyngaContextTracker", ["require", "exports", "ZyngaCore", "ZyngaInstant"], function (require, exports, ZyngaCore, ZyngaInstant) {
    // tslint:disable-next-line:comment-format
    ///<amd-module name="ZyngaContextTracker"/>
    'use strict';
    Object.defineProperty(exports, "__esModule", { value: true });
    var CONTEXT_HISTORY_KEY = '_CTX_HIST';
    var CTX_SEP = ';';
    var CTX_ITEM_SEP = ':';
    var CTX_CHECK_SEP = ',';
    var CTX_PLAYER_SEP = ',';
    // Guess progression.
    // Initial numbers are based on known users playing per context
    // TODO: re-balance once we get actual size distribution
    var CTX_TYPE_SIZE_CHECKS = {
        THREAD: [
            { min: 2, max: 2, accuracy: 0 },
            { min: 3, max: 4, accuracy: 0 },
            { min: 5, max: 8, accuracy: 0 },
            { min: 9, max: 16, accuracy: 0 },
            { min: 17, max: 32, accuracy: 0 },
            { min: 33, max: 1056, accuracy: 4 },
            { min: 1057, max: null, accuracy: 0 } // 7 attempts
        ],
        GROUP: [
            { min: 2, max: 4, accuracy: 0 },
            { min: 5, max: 12, accuracy: 0 },
            { min: 13, max: 29, accuracy: 0 },
            { min: 30, max: 1053, accuracy: 4 },
            { min: 1054, max: 5050, accuracy: 32 },
            { min: 5050, max: null, accuracy: 0 } // 6 attempts
        ]
    };
    var lastContextId = null;
    exports.Event = new ZyngaCore.EventMixin();
    exports.Events = {
        CONTEXTS: 'ContextTracker.Contexts',
        CONTEXT_CHANGE: 'ContextTracker.ContextChange'
    };
    function getTS(time) {
        return Math.round(time.getTime() / 1000);
    }
    function minMaxSerialize(val) {
        var serializedVal = '';
        if (val >= 0 && val < Infinity) {
            serializedVal = val.toString();
        }
        return serializedVal;
    }
    function minMaxDeserialize(val) {
        var deserializedVal = null;
        if (val !== '') {
            deserializedVal = parseInt(val, 10);
            if (isNaN(deserializedVal)) {
                deserializedVal = null;
            }
        }
        return deserializedVal;
    }
    function historiesSerialize(histories) {
        var contexts = [];
        for (var contextId in histories) {
            var context = histories[contextId];
            var recentPlayersStr = context.recentPlayers.sort().join(CTX_PLAYER_SEP);
            var contextParts = [contextId, context.type, recentPlayersStr];
            for (var _i = 0, _a = [context.lastCheckSuccess, context.lastCheckFail]; _i < _a.length; _i++) {
                var contextSizeCheckItem = _a[_i];
                if (contextSizeCheckItem) {
                    var ts = getTS(contextSizeCheckItem.checkTime);
                    var min = minMaxSerialize(contextSizeCheckItem.min);
                    var max = minMaxSerialize(contextSizeCheckItem.max);
                    contextParts.push([ts, min, max].join(CTX_CHECK_SEP));
                }
                else {
                    contextParts.push('');
                }
            }
            contexts.push(contextParts.join(CTX_ITEM_SEP));
        }
        return contexts.join(CTX_SEP);
    }
    function sizeCheckDeserialize(str) {
        var sizeCheck = null;
        if (str.length > 0) {
            var _a = str.split(CTX_CHECK_SEP), ts = _a[0], minString = _a[1], maxString = _a[2];
            sizeCheck = {
                checkTime: new Date((parseInt(ts, 10)) * 1000),
                min: minMaxDeserialize(minString),
                max: minMaxDeserialize(maxString)
            };
        }
        return sizeCheck;
    }
    function historiesDeserialize(serializedData) {
        var histories = {};
        var contexts = serializedData.split(CTX_SEP);
        for (var _i = 0, contexts_1 = contexts; _i < contexts_1.length; _i++) {
            var context = contexts_1[_i];
            var contextParts = context.split(CTX_ITEM_SEP);
            var contextId = contextParts[0], contextType = contextParts[1], recentPlayersStr = contextParts[2], lastSuccessStr = contextParts[3], lastFailStr = contextParts[4];
            var contextHist = {
                contextId: contextId,
                type: contextType,
                recentPlayers: recentPlayersStr ? recentPlayersStr.split(CTX_PLAYER_SEP) : [],
                lastCheckSuccess: sizeCheckDeserialize(lastSuccessStr || ''),
                lastCheckFail: sizeCheckDeserialize(lastFailStr || '')
            };
            if (contextId) {
                histories[contextId] = contextHist;
            }
        }
        return histories;
    }
    function instantFunctionSupported(functionName) {
        var supportedFunctions = ZyngaInstant.getSupportedAPIs();
        return (supportedFunctions.indexOf(functionName) >= 0);
    }
    function generateChecksInRange(min, max, lastFailCheck, checks) {
        if (!checks) {
            checks = [];
        }
        if (lastFailCheck && lastFailCheck.max >= max) {
            return checks; // short circuit, dead path
        }
        if (min === max) {
            checks.push({
                min: min,
                max: max
            });
        }
        else {
            var half = (max - min + 1) / 2;
            if (Math.round(half) === half) {
                var firstHalf = {
                    min: min,
                    max: (min + half - 1)
                };
                var secondHalf = {
                    min: (min + half),
                    max: max
                };
                checks.push(firstHalf);
                if (firstHalf.min !== firstHalf.max) {
                    generateChecksInRange(firstHalf.min, firstHalf.max, lastFailCheck, checks);
                }
                checks.push(secondHalf);
                if (secondHalf.min !== secondHalf.max) {
                    generateChecksInRange(secondHalf.min, secondHalf.max, lastFailCheck, checks);
                }
            }
        }
        return checks;
    }
    function updateContextHistory(context) {
        return ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
            return new Promise(function (resolve) {
                function checkSize() {
                    var schedule = CTX_TYPE_SIZE_CHECKS[context.type.toUpperCase()];
                    var nextCheck = null;
                    if (schedule) {
                        var lastCheckSuccess = context.lastCheckSuccess;
                        var lastCheckFail = context.lastCheckFail;
                        if (lastCheckSuccess === null) {
                            // No matches yet
                            if (lastCheckFail) {
                                // We've tried and failed so find next in the schedule
                                for (var i in schedule) {
                                    var scheduleCheck = schedule[i];
                                    if (scheduleCheck.max > lastCheckFail.max) {
                                        // Just check max to accomodate schedule changes.
                                        nextCheck = scheduleCheck;
                                        break;
                                    }
                                }
                            }
                            else {
                                // First check ever, try the first in the schedule
                                nextCheck = schedule[0];
                            }
                        }
                        else {
                            // We've had a success in the past
                            if (lastCheckSuccess.min === lastCheckSuccess.max) {
                                if (lastCheckFail) {
                                    // Narrowed it down to a single number but failed on re-check.
                                    // TODO:  Be smarter about backgracking since the size has likely not changed much
                                    context.lastCheckSuccess = null;
                                    context.lastCheckFail = null;
                                    nextCheck = schedule[0];
                                }
                                else {
                                    // Try again to make sure
                                    nextCheck = lastCheckSuccess;
                                }
                            }
                            else {
                                var scheduleBreakdown = generateChecksInRange(lastCheckSuccess.min, lastCheckSuccess.max, lastCheckFail);
                                if (scheduleBreakdown.length > 0) {
                                    nextCheck = scheduleBreakdown[0];
                                }
                                else {
                                    // Narrowed it down to a single number but failed on re-check.
                                    // TODO:  Be smarter about backgracking since the size has likely not changed much
                                    context.lastCheckSuccess = null;
                                    context.lastCheckFail = null;
                                    nextCheck = schedule[0];
                                }
                            }
                        }
                        if (nextCheck === null) {
                            // Oh oh, start again at the beginning
                            context.lastCheckFail = null;
                            nextCheck = schedule[0];
                        }
                        var sizeBetweenResult = ZyngaInstant.context.isSizeBetween(nextCheck.min, nextCheck.max);
                        if (sizeBetweenResult.minSize === nextCheck.min && sizeBetweenResult.maxSize === nextCheck.max) {
                            var sizeCheckResult = {
                                min: sizeBetweenResult.minSize,
                                max: sizeBetweenResult.maxSize,
                                checkTime: new Date()
                            };
                            if (sizeBetweenResult.answer === true) {
                                context.lastCheckFail = null;
                                context.lastCheckSuccess = sizeCheckResult;
                            }
                            else {
                                context.lastCheckFail = sizeCheckResult;
                            }
                            resolve();
                        }
                    }
                }
                // Check for context player changes.
                // Any players that have played the game in the last 90
                // days, friend or not, will be returned by this call
                ZyngaInstant.context.getPlayersAsync().then(function (players) {
                    var newPlayerIds = players.map(function (player) {
                        return player.getID();
                    }).sort();
                    var oldPlayerIds = context.recentPlayers.sort();
                    if (newPlayerIds.join(',') !== oldPlayerIds.join(',')) {
                        context.recentPlayers = newPlayerIds;
                    }
                    checkSize();
                }, checkSize);
            });
        });
    }
    function contextCheck() {
        exports.Event.last(exports.Events.CONTEXTS, function (contexts) {
            ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
                var newContextId = ZyngaInstant.context.getID();
                var supportsSizeCheck = instantFunctionSupported('context.isSizeBetween');
                var contextChanges = false;
                var currentContextHistory = null;
                if (newContextId !== lastContextId) {
                    lastContextId = newContextId;
                    contexts[newContextId] = currentContextHistory = contexts[newContextId] || {
                        contextId: newContextId,
                        type: ZyngaInstant.context.getType(),
                        recentPlayers: [],
                        lastCheckSuccess: null,
                        lastCheckFail: null
                    };
                    updateContextHistory(currentContextHistory)
                        .then(function () {
                        return persistContexts(contexts);
                    })
                        .then(function () {
                        exports.Event.fire(exports.Events.CONTEXT_CHANGE, currentContextHistory);
                    });
                }
            });
        });
    }
    function persistContexts(contexts) {
        var serializedData = historiesSerialize(contexts);
        var writeData = {};
        writeData[CONTEXT_HISTORY_KEY] = serializedData;
        return ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
            return ZyngaInstant.player.setDataAsync(writeData)
                .then(ZyngaInstant.player.flushDataAsync);
        });
    }
    ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT, function () {
        ZyngaInstant.player.getDataAsync([CONTEXT_HISTORY_KEY]).then(function (data) {
            var serializedData = data[CONTEXT_HISTORY_KEY] || '';
            var histories = historiesDeserialize(serializedData);
            exports.Event.fire(exports.Events.CONTEXTS, histories);
            contextCheck();
            ZyngaInstant.Event.on(ZyngaInstant.Events.INSTANT_CONTEXT_ID_CHANGE, contextCheck);
        });
    }, true);
});



define("ZyngaCore", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    // tslint:disable-next-line:comment-format
    ///<amd-module name="ZyngaCore"/>
    function applyMixins(derivedCtor, baseCtors) {
        baseCtors.forEach(function (baseCtor) {
            Object.getOwnPropertyNames(baseCtor.prototype).forEach(function (name) {
                derivedCtor.prototype[name] = baseCtor.prototype[name];
            });
        });
    }
    exports.ZyngaPromise = Promise;
    /**
     * ES5 safe Object.assign.  Will fall back to polyfill if needed
     * @param target Target object
     * @param varArgs Any number of other objects
     *
     * Note: Taken from:
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill
     */
    function ObjectAssign(target) {
        var varArgs = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            varArgs[_i - 1] = arguments[_i];
        }
        if (typeof Object.assign === 'function') {
            return Object.assign.apply(this, arguments);
        }
        else {
            if (target == null) {
                throw new TypeError('Cannot convert undefined or null to object');
            }
            var to = Object(target);
            for (var index = 1; index < arguments.length; index++) {
                var nextSource = arguments[index];
                if (nextSource != null) {
                    for (var nextKey in nextSource) {
                        // Avoid bugs when hasOwnProperty is shadowed
                        if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
                            to[nextKey] = nextSource[nextKey];
                        }
                    }
                }
            }
            return to;
        }
    }
    exports.ObjectAssign = ObjectAssign;
    // https://tc39.github.io/ecma262/#sec-array.prototype.find
    function ArrayFind(target, predicate) {
        if (typeof Array.prototype.find === 'function') {
            // Get args minus first arg as an array
            var args = Array.prototype.slice.call(arguments, 1);
            return Array.prototype.find.apply(target, args);
        }
        else {
            // 1. Let O be ? ToObject(this value).
            if (target == null) {
                throw new TypeError('"target" is null or not defined');
            }
            var o = Object(target);
            // 2. Let len be ? ToLength(? Get(O, "length")).
            // tslint:disable-next-line:no-bitwise
            var len = o.length >>> 0;
            // 3. If IsCallable(predicate) is false, throw a TypeError exception.
            if (typeof predicate !== 'function') {
                throw new TypeError('predicate must be a function');
            }
            // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.
            var thisArg = arguments[2];
            // 5. Let k be 0.
            var k = 0;
            // 6. Repeat, while k < len
            while (k < len) {
                // a. Let Pk be ! ToString(k).
                // b. Let kValue be ? Get(O, Pk).
                // c. Let testResult be ToBoolean(? Call(predicate, T,  kValue, k, O )).
                // d. If testResult is true, return kValue.
                var kValue = o[k];
                if (predicate.call(thisArg, kValue, k, o)) {
                    return kValue;
                }
                // e. Increase k by 1.
                k++;
            }
            // 7. Return undefined.
            return undefined;
        }
    }
    exports.ArrayFind = ArrayFind;
    function createEventObject() {
        return new EventMixin();
    }
    exports.createEventObject = createEventObject;
    /* Parses an javascript object CSS representation into a proper CSS string
        * Handled nested rules.  Like media query definitions
        * Allows for duplicate values for the same key via value arrays.
        * Example:
        *	{
        *		'.foo':  {                                 // Selectors are object property names
        *			position: 'absolute';                    // CSS properties are also object property names
        *			background: [                            // Multiple values for the same css property as an Array
        *				'rgba(164,179,87,1)',
        *				'-moz-linear-gradient(left, rgba(164,179,87,1) 0%, rgba(117,137,12,1) 100%)',
        *				'-webkit-gradient(left top, right top, color-stop(0%, rgba(164,179,87,1)), color-stop(100%, rgba(117,137,12,1)))',
        *				'-webkit-linear-gradient(left, rgba(164,179,87,1) 0%, rgba(117,137,12,1) 100%)',
        *				'-o-linear-gradient(left, rgba(164,179,87,1) 0%, rgba(117,137,12,1) 100%)',
        *				'-ms-linear-gradient(left, rgba(164,179,87,1) 0%, rgba(117,137,12,1) 100%)',
        *				'linear-gradient(to right, rgba(164,179,87,1) 0%, rgba(117,137,12,1) 100%)'
        *			],
        *		}
        *		'@media (max-width: 600px)': {            // Media query example
        *			'.foo': {                               // selectors can be children of other selectors
        *				'background-color': 'red'             // business as usual
        *			}
        *		}
        * }
        */
    function parseCSS(cssObj, indentation) {
        var items = [];
        var key;
        var val;
        var i;
        indentation = indentation || '';
        indentation = indentation + '\t';
        for (key in cssObj) {
            val = cssObj[key];
            if (typeof val === 'object' && !Array.isArray(val)) {
                items.push(indentation + key + ' {');
                items.push(parseCSS(val, indentation));
                items.push(indentation + '}');
            }
            else {
                if (!Array.isArray(val)) {
                    val = [val];
                }
                for (i = 0; i < val.length; i++) {
                    items.push(indentation + key + ': ' + val[i] + ';');
                }
            }
        }
        return items.join('\n');
    }
    exports.parseCSS = parseCSS;
    var EventMixin = (function () {
        function EventMixin() {
            var _this = this;
            this.handlers = {};
            this.lastArgs = {};
            // Turn on an event handler, optionally:  Isolate and/or only call once
            this.on = function (eventName, eventHandler, isolateHandler, once) {
                var handlers = _this.getEventHandlers(eventName);
                var handlerPosition = _this.getHandlerPosition(eventHandler, handlers);
                if (typeof eventHandler !== 'function') {
                    throw new TypeError('not a function');
                }
                // Only register the handler if it's not already registered
                if (handlerPosition === -1) {
                    handlers.push({
                        fn: eventHandler,
                        isolate: isolateHandler !== false,
                        once: once === true // Only call the handler once
                    });
                }
            };
            // Trun off an event handler
            this.off = function (eventName, eventHandler) {
                var handlers = _this.getEventHandlers(eventName);
                var handlerPosition = _this.getHandlerPosition(eventHandler, handlers);
                if (handlerPosition !== -1) {
                    // remove handler
                    handlers.splice(handlerPosition, 1);
                }
            };
            // Fire an event.
            // arguments[0]    - The event name
            // arguments[1..n] - Any arguments you want to pass to the handlers
            this.fire = function (eventName) {
                var args = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    args[_i - 1] = arguments[_i];
                }
                var handlers = _this.getEventHandlers(eventName);
                var handlerCount = handlers.length;
                var handler;
                var handlerFn;
                var isolatedFn;
                var i;
                var removeHandlers = [];
                _this.lastArgs[eventName] = args;
                for (i = 0; i < handlerCount; i++) {
                    handler = handlers[i];
                    handlerFn = handler.fn;
                    isolatedFn = handler.isolate === true ? _this.isolate(handlerFn) : handlerFn;
                    isolatedFn.apply(handlerFn, args);
                    if (handler.once === true) {
                        removeHandlers.push(handlerFn);
                    }
                }
                // Now remove some handlers.  Do this outside the previous loop as it's destrcutive to the handler array
                handlerCount = removeHandlers.length;
                for (i = 0; i < handlerCount; i++) {
                    _this.off(eventName, removeHandlers[i]);
                }
            };
            // Register an event handler but make sure it only fires once
            // Can be called in "callback" mode:
            //   obj.once('foo', function(x) {console.log(x);}, doIsolation);
            // Or in "Promise" mode
            //   obj.once('foo', doIsolation).then(function (x) { console.log(x); });
            // Both are supported
            this.once = function (eventName, eventHandler, isolateHandler) {
                if (typeof eventHandler !== 'function') {
                    // We were called in Promise mode
                    // Shift isolateHander arg 1 left
                    isolateHandler = eventHandler;
                    return new Promise(function (resolve) {
                        _this.once(eventName, function () {
                            var args = [];
                            for (var _i = 0; _i < arguments.length; _i++) {
                                args[_i] = arguments[_i];
                            }
                            // resolve only takes one argument so make sure we pass an array of > 1 argument was provided
                            var arg = args.length > 1 ? Array.prototype.slice.call(args) : args[0];
                            resolve(arg);
                        }, isolateHandler);
                    });
                }
                else {
                    _this.on(eventName, eventHandler, isolateHandler, true);
                }
            };
            // Register an event handler to be called with the last event value.
            // If the event has not happened yet (ever) then treat as .once()
            // Can be called in "callback" mode:
            //   obj.once('foo', function(x) {console.log(x);}, doIsolation);
            // Or in "Promise" mode
            //   obj.once('foo', doIsolation).then(function (x) { console.log(x); });
            // Both are supported
            this.last = function (eventName, eventHandler, isolateHandler) {
                var lastArgs = _this.lastArgs[eventName];
                if (typeof eventHandler !== 'function') {
                    // We were called in Promise mode
                    // Shift isolateHander arg 1 left
                    isolateHandler = eventHandler;
                    return new Promise(function (resolve) {
                        _this.last(eventName, function () {
                            var args = [];
                            for (var _i = 0; _i < arguments.length; _i++) {
                                args[_i] = arguments[_i];
                            }
                            // resolve only takes one argument so make sure we pass an array of > 1 argument was provided
                            var arg = args.length > 1 ? Array.prototype.slice.call(args) : args[0];
                            resolve(arg);
                        }, isolateHandler);
                    });
                }
                else {
                    // We were called in callback mode
                    if (lastArgs !== undefined) {
                        // Event has fired before. Fire with those args
                        (isolateHandler === true ? _this.isolate(eventHandler) : eventHandler).apply(undefined, lastArgs);
                    }
                    else {
                        _this.once(eventName, eventHandler, isolateHandler);
                    }
                }
            };
            this.getLastFiredValue = function (eventName) {
                var args = _this.lastArgs[eventName];
                return args ? args[0] : args;
            };
            this.clearLastFiredValue = function (eventName) {
                delete _this.lastArgs[eventName];
            };
            // Register an event handler to be called with the last event value AND any after that.
            // If the event has not happened yet then this should be much like "on"
            this.all = function (eventName, eventHandler, isolateHandler) {
                var args = _this.lastArgs[eventName];
                if (typeof eventHandler === 'function') {
                    if (args !== undefined) {
                        // We've been called before
                        (isolateHandler === true ? _this.isolate(eventHandler) : eventHandler).apply(undefined, args);
                    }
                    // Also register for all upcoming events
                    _this.on(eventName, eventHandler, isolateHandler);
                }
            };
        }
        EventMixin.prototype.isolate = function (fn) {
            return function () {
                var args = Array.prototype.slice.call(arguments); // Convert into actual array
                setTimeout(function () {
                    fn.apply(fn, args);
                }, 0); // nico: todo: was setImmediate. consequence?
            };
        };
        // Get array of event handlers.
        // Side Effects:  Creates empty handler list if non exist.
        EventMixin.prototype.getEventHandlers = function (eventName) {
            var eventHandlers = this.handlers[eventName] = this.handlers[eventName] || [];
            return eventHandlers;
        };
        // Get the position of a specific handler function for an event
        EventMixin.prototype.getHandlerPosition = function (eventHandler, handlers) {
            var i;
            var len = handlers.length;
            for (i = 0; i < len; i++) {
                if (handlers[i].fn === eventHandler) {
                    return i;
                }
            }
            return -1;
        };
        return EventMixin;
    }());
    exports.EventMixin = EventMixin;
});



define("ZyngaDebug", ["require", "exports", "Zynga", "ZyngaAccount", "ZyngaAnalytics", "ZyngaNet"], function (require, exports, Zynga, ZyngaAccount, ZyngaAnalytics_1, ZyngaNet) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var Debug = (function () {
        function Debug() {
        }
        Debug.init = function () {
            window.onerror = function (msg, url, line, col, error) {
                // may not be supported in all browsers
                var colString = !col ? '' : '\ncolumn: ' + col;
                var errorString = !error ? '' : '\nerror: ' + error;
                Debug.logError("Error: " + msg + "\nurl: " + url + "\nline: " + line + colString + errorString);
                // return true supresses alert dialogs
                return true;
            };
            console['save'] = function (data, filename) {
                if (!data) {
                    Debug.logError('Console.save: No data');
                    return;
                }
                if (!filename) {
                    filename = 'console.json';
                }
                if (typeof data === 'object') {
                    data = JSON.stringify(data, undefined, 4);
                }
                var blob = new Blob([data], { type: 'text/json' });
                var e = document.createEvent('MouseEvents');
                var a = document.createElement('a');
                a.download = filename;
                a.href = window.URL.createObjectURL(blob);
                a.dataset.downloadurl = ['text/json', a.download, a.href].join(':');
                e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
                a.dispatchEvent(e);
            };
            if (Promise['_setUnhandledRejectionFn']) {
                Promise['_setUnhandledRejectionFn'](Debug.unhandledReject);
            }
            else {
                window.addEventListener('unhandledrejection', function (event) {
                    event.preventDefault();
                    Debug.unhandledReject(event.reason);
                });
            }
            // todo: I can't test this.
            if (window['ZyngaCore'] && window['ZyngaCore']['Promise']) {
                window['ZyngaCore']['Promise']['_setUnhandledRejectionFn'](Debug.unhandledReject);
            }
            Debug.system_console_error = console.error;
            // redirect console.error to our log func
            console.error = Debug.logError;
        };
        // for things you want to push to the log stream, but not see as nasty error text in the console.
        Debug.log = function (data) {
            if (Debug.enabled) {
                if (typeof data === 'object') {
                    // tslint:disable-next-line:no-console
                    console.log(JSON.stringify(data, undefined, 4));
                }
                else {
                    // tslint:disable-next-line:no-console
                    console.log(data);
                }
            }
            Debug.logStrings.push(data);
        };
        // this should be exactly like calling console.error;
        Debug.logError = function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            Debug.system_console_error.apply(console, args);
            Debug.logStrings.push(args);
            var message = '';
            for (var i = 0; i < args.length; i++) {
                var data = args[i];
                message += (i > 0 ? ', [' + (i - 1) + '] ' : '');
                if (typeof data === 'object') {
                    try {
                        if (data instanceof Error) {
                            message += (data.stack || data.toString()); // this is hte best way to serialize error objects?
                        }
                        else {
                            message += JSON.stringify(data, undefined, 4);
                        }
                    }
                    catch (e) {
                        message += data;
                    }
                }
                else {
                    message += data;
                }
            }
            // Send to log service
            Debug.logCall('error', { message: message }, null);
            // Send to stats
            ZyngaAnalytics_1.logCount({
                counter: 'performance',
                kingdom: 'error',
                genus: message
            });
        };
        Debug.downloadLog = function (logName) {
            if (logName === undefined) {
                logName = 'consoleLog.txt';
            }
            else if (logName.indexOf('.txt') === -1) {
                logName += '.txt';
            }
            console['save'](Debug.logStrings, logName);
        };
        Debug.logCall = function (level, data, options) {
            options = options || {};
            Promise.all([
                Zynga.Event.last(Zynga.Events.APP_ID),
                ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS)
            ]).then(function (results) {
                var appId = results[0];
                var accountDetails = results[1];
                options.useToken = accountDetails.token;
                options.body = data;
                return ZyngaNet.api('POST', '/log/v1/app/' + appId + '/level/' + level, options);
            }).catch(function (e) {
                // just eat it.
            });
        };
        Debug.unhandledReject = function (error) {
            error = error || 'unknown_rejection';
            Debug.logError(error);
        };
        Debug.logStrings = [];
        Debug.enabled = true;
        return Debug;
    }());
    exports.default = Debug;
});



///<amd-module name="ZyngaHomeScreen"/>
define("ZyngaHomeScreen", ["require", "exports", "ZyngaWallet"], function (require, exports, ZyngaWallet) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.currencyConfig = {
        cashItemId: "cash",
        homepageDripId: "daily_drip"
    };
    // needs to be exposed to be customizable.
    var fadeOutRate = 2;
    var fadeInRate = 0.5;
    var maxBlack = 0.7;
    function indexPage() {
        return {
            root: document.getElementById("homescreen-container"),
            inner_root: document.getElementById("homescreen-inner"),
            cash: document.getElementById("cash-amt"),
            highscore: document.getElementById("score-amt-best"),
            score: document.getElementById("score-amt"),
            logo: document.getElementById("logo"),
            game_mode_btn: document.getElementById("game-mode"),
            play_btn: document.getElementById("play-btn"),
            daily_drip: document.getElementById("daily-drip"),
            daily_drip_icon: document.getElementById("daily-drip-icon"),
            daily_drip_countdown: document.getElementById("daily-drip-countdown"),
        };
    }
    exports.indexPage = indexPage;
    // todo: is this locale-appropriate?
    function secondsToString(timespan_s) {
        var date = new Date(null);
        date.setSeconds(timespan_s);
        return date.toISOString().substr(11, 8);
    }
    exports.secondsToString = secondsToString;
    function bindCallbacks() {
        exports.data.pageIndex.daily_drip.onclick = exports.callbacks.onDailyDripCollect;
        exports.data.pageIndex.play_btn.onclick = exports.callbacks.onPlay;
    }
    exports.bindCallbacks = bindCallbacks;
    function dailyDripCollect(ev) {
        // todo: indicate processing on the button.
        exports.data.pageIndex.daily_drip.onclick = null;
        exports.data.pageIndex.daily_drip_countdown.innerText = "--";
        ZyngaWallet.claimDrip({ drip_id: exports.currencyConfig.homepageDripId, try_get: true }).then(function (r) {
            exports.callbacks.onRefreshUI();
            exports.data.pageIndex.daily_drip.onclick = exports.callbacks.onDailyDripCollect;
        });
    }
    // extend: override me and set new instance on data.props.
    var DefaultProps = (function () {
        function DefaultProps() {
        }
        Object.defineProperty(DefaultProps.prototype, "wallet", {
            get: function () {
                return ZyngaWallet.cachedWallet;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(DefaultProps.prototype, "score", {
            get: function () { return 0; },
            enumerable: true,
            configurable: true
        });
        ;
        Object.defineProperty(DefaultProps.prototype, "highscore", {
            get: function () { return 0; },
            enumerable: true,
            configurable: true
        });
        ;
        return DefaultProps;
    }());
    exports.DefaultProps = DefaultProps;
    // set with the right data, then call show()
    exports.data = {
        itemCatalog: null,
        dripCatalog: null,
        props: new DefaultProps(),
        pageIndex: indexPage()
    };
    // override these with your own implemenations if you need to change something.
    // if you change these, call "bindDefaultCallbacks()"
    exports.callbacks = {
        onRefreshUI: refreshUI,
        onDailyDripCollect: dailyDripCollect,
        onPlay: hide
    };
    bindCallbacks();
    var fadeInAmount = 1;
    function refreshUI() {
        if (exports.data.props.wallet && exports.data.itemCatalog && exports.data.dripCatalog) {
            var now_ts = new Date().getTime();
            var wallet = exports.data.props.wallet;
            var cash = wallet.items[exports.currencyConfig.cashItemId] || 0;
            exports.data.pageIndex.cash.innerText = "" + cash;
            var dripStatus = ZyngaWallet.calculateDripStatus(exports.data.dripCatalog, now_ts, exports.currencyConfig.homepageDripId, wallet);
            // do something to show the prize item! 
            // dripStatus.prize_item
            exports.data.pageIndex.daily_drip_countdown.innerText = secondsToString(dripStatus.time_remaining_s);
        }
        exports.data.pageIndex.highscore.innerText = "" + exports.data.props.highscore;
        exports.data.pageIndex.score.innerText = "" + exports.data.props.score;
    }
    exports.refreshUI = refreshUI;
    function isVisible() {
        return targetVisible;
    }
    exports.isVisible = isVisible;
    function isRootVisible() {
        return exports.data.pageIndex.root.style.display !== "none";
    }
    function isInnerRootVisible() {
        return exports.data.pageIndex.inner_root.style.display !== "none";
    }
    function fadeIn(dt) {
        fadeInAmount += fadeInRate * dt;
        fadeInAmount = Math.max(0, Math.min(maxBlack, fadeInAmount));
        if (fadeInAmount > 0 && !isRootVisible()) {
            exports.data.pageIndex.root.style.display = null; // default?
        }
        if (fadeInAmount >= maxBlack && !isInnerRootVisible()) {
            exports.data.pageIndex.inner_root.style.display = null; // default?
        }
        exports.data.pageIndex.root.style.backgroundColor = "rgba(0,0,0," + fadeInAmount + ")";
    }
    function fadeOut(dt) {
        fadeInAmount -= fadeOutRate * dt;
        fadeInAmount = Math.min(maxBlack, Math.max(0, fadeInAmount));
        if (fadeInAmount < maxBlack && isInnerRootVisible()) {
            // hide inner guts first
            exports.data.pageIndex.inner_root.style.display = "none";
        }
        if (fadeInAmount <= 0) {
            // then hide the whole thing.
            exports.data.pageIndex.root.style.display = "none";
        }
        exports.data.pageIndex.root.style.backgroundColor = "rgba(0,0,0," + fadeInAmount + ")";
    }
    var targetVisible = true;
    function hide() {
        targetVisible = false;
        prev_ts = new Date().getTime();
        animate();
    }
    exports.hide = hide;
    function show() {
        targetVisible = true;
        prev_ts = new Date().getTime();
        animate();
    }
    exports.show = show;
    // only pump animation loop while visible.
    var prev_ts = new Date().getTime();
    function animate() {
        var now_ts = new Date().getTime();
        var dt = (now_ts - prev_ts) / 1000; // seconds.
        prev_ts = now_ts;
        if (targetVisible) {
            fadeIn(dt);
        }
        else {
            fadeOut(dt);
        }
        if (isInnerRootVisible()) {
            // update data model here.
            refreshUI();
        }
        if (targetVisible ? fadeInAmount < maxBlack : fadeInAmount > 0) {
            // currently fading, need fast update.
            requestAnimationFrame(animate);
        }
        else {
            if (isInnerRootVisible()) {
                setTimeout(animate, 1000);
            }
        }
    }
    exports.animate = animate;
    function hideLogoAndTitle() {
        exports.data.pageIndex.logo.style.visibility = "hidden";
    }
    exports.hideLogoAndTitle = hideLogoAndTitle;
});



define("ZyngaInstant", ["require", "exports", "ZyngaCore"], function (require, exports, ZyngaCore) {
    // tslint:disable-next-line:comment-format
    ///<amd-module name="ZyngaInstant"/>
    'use strict';
    Object.defineProperty(exports, "__esModule", { value: true });
    var FBInstant = window['FBInstant'];
    var iMsgInstant = window['iMsgInstant'];
    var instant = FBInstant || iMsgInstant;
    if (instant === undefined) {
        throw Error('No instant SDKs were found.  Either FBInstant or iMsgInstant SDK is required.');
    }
    if (FBInstant !== undefined && iMsgInstant !== undefined) {
        // tslint:disable-next-line:max-line-length
        throw Error('Too many instant SDKs were found.  Only one instant SDK (FBInstant or iMsgInstant) may be laoded at a time.');
    }
    var instantContextId;
    var G_INIT = 'Game.Initialize';
    var I_INIT = 'Instant.Initialized';
    var G_START = 'Game.StartGame';
    var I_START = 'Instant.StartGame';
    var I_FB_TOS_ACCEPT = 'Instant.TOSAccept';
    var G_END = 'Game.EndGame';
    var I_REPLAY = 'Instant.ReplayGame';
    var I_CTX_CHG = 'Instant.ContextIdChange';
    var G_SCORE = 'Game.ScoreChange';
    var G_LOAD_PROGRESS = 'Game.LoadProgress';
    var G_SWITCH_CONTEXT = 'Game.SwitchContext';
    var G_CHOOSE_CONTEXT = 'Game.ChooseContext';
    var G_CREATE_CONTEXT = 'Game.CreateContext';
    var G_QUIT = 'Game.Quit';
    var G_AD_STATUS = 'Game.AdStatus';
    var noop = function () { return; };
    var methodArgHooks = {};
    var methodReturnHooks = {};
    // Not sure if we want to move me.fire() out and into this closure.
    // This would ensure nobody calls it from outside this module.
    // Leaving it for now.
    exports.Event = new ZyngaCore.EventMixin();
    exports.Events = {
        GAME_INITIALIZE: G_INIT,
        INSTANT_INITIALIZED: I_INIT,
        GAME_GAME_START: G_START,
        INSTANT_GAME_STARTED: I_START,
        INSTANT_FB_TOS_ACCEPT: I_FB_TOS_ACCEPT,
        GAME_GAME_END: G_END,
        GAME_SCORE_CHANGE: G_SCORE,
        INSTANT_GAME_REPLAY: I_REPLAY,
        INSTANT_CONTEXT_ID_CHANGE: I_CTX_CHG,
        GAME_LOADING_PRGOGRESS: G_LOAD_PROGRESS,
        GAME_SWITCH_CONTEXT: G_SWITCH_CONTEXT,
        GAME_CHOOSE_CONTEXT: G_CHOOSE_CONTEXT,
        GAME_CREATE_CONTEXT: G_CHOOSE_CONTEXT,
        GAME_QUIT: G_QUIT,
        GAME_AD_STATUS: G_AD_STATUS // Game ad fetch/load/show status change
    };
    exports.zynga = {
        registerMethodArgumentHook: function (method, hook) {
            var hooks = methodArgHooks[method] = methodArgHooks[method] || [];
            hooks.push(hook);
        },
        registerMethodReturnHook: function (method, hook) {
            var hooks = methodReturnHooks[method] = methodReturnHooks[method] || [];
            hooks.push(hook);
        }
    };
    function getInstantMethodFromString(methodName, baseObj) {
        var path = methodName.split('.');
        var firstName = path.shift();
        if (path.length === 0) {
            // At the end, return the function
            return baseObj[firstName];
        }
        else {
            // Still need to recurse
            return getInstantMethodFromString(path.join('.'), baseObj[firstName]);
        }
    }
    // nico: don't want to export to whole world, want to export to sub-namespace.
    function wrapInstantMethod(methodName, needsFBTOSAccept, returnsPromise, eventCallback, eventResolveCallback) {
        var instantMethod = getInstantMethodFromString(methodName, instant);
        if (!instantMethod) {
            return undefined;
        }
        eventCallback = eventCallback || noop;
        eventResolveCallback = eventResolveCallback || noop;
        // Return a new wrapper function (closure)
        return function () {
            var methodArgs = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                methodArgs[_i] = arguments[_i];
            }
            // Save the FBInstant arguments
            var argHooks = methodArgHooks[methodName] || [];
            var argHookCount = argHooks.length;
            var returnHooks = methodReturnHooks[methodName] || [];
            var returnHookCount = returnHooks.length;
            var i;
            var returnValue;
            var TOSAccepted = exports.Event.getLastFiredValue(I_FB_TOS_ACCEPT);
            if (needsFBTOSAccept === true && TOSAccepted !== true) {
                if (console.trace) {
                    // tslint:disable-next-line:no-console
                    console.trace("FBInstant." + methodName + "() called before FBInstant.startGameAsync()");
                }
                else {
                    // tslint:disable-next-line:no-console
                    console.error("FBInstant." + methodName + "() called before FBInstant.startGameAsync()", new Error().stack);
                }
            }
            for (i = 0; i < argHookCount; i++) {
                // methodArgs can be modified/replaced by hooks
                methodArgs = argHooks[i].apply(undefined, methodArgs);
            }
            // Game called FB method.  We might want to do something.
            eventCallback.apply(undefined, methodArgs);
            if (returnsPromise === false) {
                // Not expecting a promise.  Just call the SDK
                returnValue = instantMethod.apply(instant, methodArgs);
                // Apply any return value hooks
                for (i = 0; i < returnHookCount; i++) {
                    // methodArgs can be modified/replaced by hooks
                    returnValue = returnHooks[i].apply(undefined, [returnValue]);
                }
                return returnValue;
            }
            // Return our own Promise
            return new Promise(function (resolve, reject) {
                // Now call the original FB method
                instantMethod.apply(instant, methodArgs).then(function () {
                    // Wrap the resolve callback
                    var resolveArgs = arguments;
                    // There may be hooks to modify resolve arguments.
                    var thisMethodReturnHooks = methodReturnHooks[methodName] || [];
                    var thisMethodReturnHookCount = thisMethodReturnHooks.length;
                    // tslint:disable-next-line:no-shadowed-variable
                    var i;
                    for (i = 0; i < thisMethodReturnHookCount; i++) {
                        // methodArgs can be modified/replaced by hooks
                        resolveArgs = thisMethodReturnHooks[i].apply(undefined, methodArgs);
                    }
                    // Fire our resolve event
                    if (eventResolveCallback !== noop) {
                        eventResolveCallback.apply(undefined, resolveArgs);
                    }
                    // Now actually resolve
                    resolve.apply(undefined, resolveArgs);
                }, reject);
            });
        };
    }
    /**************************/
    /* Instant SDK wrappers */
    /**************************/
    // Helper fuction for firing specific events
    function genFireEventFunc(eventName) {
        return function () {
            var args = Array.prototype.slice.call(arguments); // Convert into actual array
            args.unshift(eventName);
            exports.Event.fire.apply(undefined, args);
        };
    }
    // Wrap methods that return Promises
    exports.initializeAsync = wrapInstantMethod('initializeAsync', false, true, genFireEventFunc(G_INIT), function () {
        // The folowing values should be set after Instant initialization is done but BEFORE we fire our I_INIT event
        if (!instant.getSDKVersion) {
            throw new Error('FBInstant.getSDKVersion does not exists.  Is this v1.x?  We don\'t support that any more.');
        }
        exports.Event.fire(I_INIT, arguments);
    });
    exports.startGameAsync = wrapInstantMethod('startGameAsync', false, true, genFireEventFunc(G_START), genFireEventFunc(I_START));
    // tslint:disable-next-line:no-namespace
    var player;
    (function (player) {
        // Wrap method that return Promises but we don't want to inject events
        player.getDataAsync = 
        // introduced in v1.1
        wrapInstantMethod('player.getDataAsync', true, true);
        player.setDataAsync = 
        // introduced in v1.1
        wrapInstantMethod('player.setDataAsync', true, true);
        player.flushDataAsync = 
        // introduced in v3.2
        wrapInstantMethod('player.flushDataAsync', true, true);
        player.getID = wrapInstantMethod('player.getID', false, false);
        player.getName = wrapInstantMethod('player.getName', true, false);
        player.getPhoto = wrapInstantMethod('player.getPhoto', true, false);
        // v3.0+, v4.0+ for connectedPlayer objects
        player.getConnectedPlayersAsync = wrapInstantMethod('player.getConnectedPlayersAsync', true, true);
        player.getSignedPlayerInfoAsync = wrapInstantMethod('player.getSignedPlayerInfoAsync', true, true);
    })(player = exports.player || (exports.player = {}));
    // tslint:disable-next-line:max-line-length
    exports.setLoadingProgress = wrapInstantMethod('setLoadingProgress', false, false, genFireEventFunc(G_LOAD_PROGRESS));
    // Wrap regular methods but we don't want to inject events
    // Old, it is now called quit
    exports.abort = wrapInstantMethod('abort', false, false);
    exports.getSupportedAPIs = wrapInstantMethod('getSupportedAPIs', false, false);
    exports.getSDKVersion = wrapInstantMethod('getSDKVersion', false, false);
    exports.getPlatform = wrapInstantMethod('getPlatform', false, false);
    exports.getLocale = wrapInstantMethod('getLocale', true, false);
    function wrapAdMethod(type) {
        var fullMethodName = 'get' + type + 'Async';
        return function (placementId) {
            var startTS = (new Date()).getTime();
            var adFetch = FBInstant[fullMethodName];
            var TOSAccepted = exports.Event.getLastFiredValue(I_FB_TOS_ACCEPT);
            if (TOSAccepted !== true) {
                if (console.trace) {
                    // tslint:disable-next-line:no-console
                    console.trace("FBInstant." + fullMethodName + "() called before FBInstant.startGameAsync()");
                }
                else {
                    // tslint:disable-next-line:no-console
                    console.error("FBInstant." + fullMethodName + "() called before FBInstant.startGameAsync()", new Error().stack);
                }
            }
            var getAdStatus = function (adStatusType, data) {
                var adStatus = {
                    id: startTS,
                    placementId: placementId,
                    adType: type,
                    statusType: adStatusType,
                    time: new Date()
                };
                if (data) {
                    adStatus.data = data;
                }
                return adStatus;
            };
            exports.Event.fire(exports.Events.GAME_AD_STATUS, getAdStatus('FETCH'));
            return adFetch(placementId).then(function (realAd) {
                // Success
                var adOnClick = null;
                if (typeof realAd.onClick === 'function') {
                    realAd.onClick(function () {
                        exports.Event.fire(exports.Events.GAME_AD_STATUS, getAdStatus('CLICK'));
                        if (adOnClick !== null) {
                            adOnClick();
                        }
                    });
                }
                var ourAd = {
                    getPlacementID: function () {
                        return placementId;
                    },
                    loadAsync: function () {
                        exports.Event.fire(exports.Events.GAME_AD_STATUS, getAdStatus('LOAD_START'));
                        return realAd.loadAsync().then(function () {
                            exports.Event.fire(exports.Events.GAME_AD_STATUS, getAdStatus('LOAD_END'));
                            return Promise.resolve();
                        }, function (err) {
                            exports.Event.fire(exports.Events.GAME_AD_STATUS, getAdStatus('LOAD_ERROR', err));
                            return Promise.reject(err);
                        });
                    },
                    showAsync: function () {
                        exports.Event.fire(exports.Events.GAME_AD_STATUS, getAdStatus('SHOW_START'));
                        return realAd.showAsync().then(function () {
                            exports.Event.fire(exports.Events.GAME_AD_STATUS, getAdStatus('SHOW_END'));
                            return Promise.resolve();
                        }, function (err) {
                            exports.Event.fire(exports.Events.GAME_AD_STATUS, getAdStatus('SHOW_ERROR', err));
                            return Promise.reject(err);
                        });
                    },
                    onClick: function (newOnClick) {
                        adOnClick = newOnClick;
                    }
                };
                // ToDo: log fetch success
                return Promise.resolve(ourAd);
            }, function (err) {
                exports.Event.fire(exports.Events.GAME_AD_STATUS, getAdStatus('FETCH_ERROR', err));
                return Promise.reject(err);
            });
        };
    }
    // ToDo: Override these with out own wrappers all the way through for tracking
    exports.getInterstitialAdAsync = wrapAdMethod('InterstitialAd');
    exports.getRewardedVideoAsync = wrapAdMethod('RewardedVideo');
    // tslint:disable-next-line:no-namespace
    var context;
    (function (context) {
        context.getID = wrapInstantMethod('context.getID', true, false);
        // introduced in v2.1
        context.getType = wrapInstantMethod('context.getType', true, false);
        // 3.0
        context.chooseAsync = wrapInstantMethod('context.chooseAsync', true, true, genFireEventFunc(G_CHOOSE_CONTEXT), checkContextIdChange);
        context.switchAsync = wrapInstantMethod('context.switchAsync', true, true, genFireEventFunc(G_SWITCH_CONTEXT), checkContextIdChange); // TODO: fire event
        // 3.2
        context.createAsync = wrapInstantMethod('context.createAsync', true, true, genFireEventFunc(G_CREATE_CONTEXT), checkContextIdChange);
        // 4.1
        context.getPlayersAsync = wrapInstantMethod('context.getPlayersAsync', true, true);
        context.isSizeBetween = wrapInstantMethod('context.isSizeBetween', true, false);
    })(context = exports.context || (exports.context = {}));
    // introduced in v2.1
    exports.logEvent = wrapInstantMethod('logEvent', true, false);
    exports.updateAsync = wrapInstantMethod('updateAsync', true, true, genFireEventFunc(G_CHOOSE_CONTEXT), checkContextIdChange);
    exports.shareAsync = wrapInstantMethod('shareAsync', true, true);
    exports.getEntryPointData = wrapInstantMethod('getEntryPointData', true, false);
    exports.onPause = wrapInstantMethod('onPause', false, false);
    exports.quit = wrapInstantMethod('quit', false, false);
    exports.setSessionData = wrapInstantMethod('setSessionData', true, false);
    // tslint:disable-next-line:max-line-length
    exports.switchGameAsync = wrapInstantMethod('switchGameAsync', true, true);
    /************************************/
    /* Internal Instant specific events */
    /************************************/
    // Check FBInstant SDK context ID value against last known value
    function checkContextIdChange() {
        var newContextId = instant.context.getID();
        if (newContextId && newContextId !== instantContextId) {
            // New or initial value
            instantContextId = newContextId;
            exports.Event.fire(I_CTX_CHG, instantContextId);
        }
    }
    exports.Event.last(I_START, function () {
        // If the game has started then the TOS has been accepted
        exports.Event.fire(exports.Events.INSTANT_FB_TOS_ACCEPT, true);
    });
    // Initial context ID is not known until after facebook tells the game to start
    exports.Event.on(I_START, checkContextIdChange);
    // Context id can change between rounds.
    exports.Event.on(I_REPLAY, checkContextIdChange);
});



define("ZyngaLeaderboard", ["require", "exports", "Zynga", "ZyngaAccount", "ZyngaContextTracker", "ZyngaInstant", "ZyngaNet", "ZyngaProfile"], function (require, exports, Zynga, ZyngaAccount, ZyngaContextTracker, ZyngaInstant, ZyngaNet, ZyngaProfile) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var leaderboardServiceVersion = 'v2';
    var DEFAULT_SET_SCORE_OPTIONS = {};
    function deepClone(obj) {
        var retVal;
        try {
            retVal = JSON.parse(JSON.stringify(obj));
        }
        catch (e) {
            // no-op
        }
        return retVal;
    }
    var playerInfoCache = {
        zyngaPlayerIdIndex: {},
        facebookPlayerIdIndex: {},
        players: []
    };
    function numberOrStringToString(obj) {
        var retVal = obj;
        if (typeof obj === 'string' || typeof obj === 'number') {
            retVal = obj.toString();
        }
        return retVal;
    }
    function getServiceCallPrereqs() {
        return new Promise(function (resolve) {
            var accountDetailsPromise = ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS);
            var appIdPromise = Zynga.Event.last(Zynga.Events.APP_ID);
            Promise.all([accountDetailsPromise, appIdPromise]).then(function (results) {
                var retVal = {
                    accountDetails: results[0],
                    appId: parseInt(results[1], 10)
                };
                resolve(retVal);
            });
        });
    }
    function getLeaderboardResponse(response) {
        return new Promise(function (resolve, reject) {
            var responseObj = response.body;
            if (typeof responseObj === 'object' && responseObj.hasOwnProperty('status_code')) {
                // A proper leaderboard response
                if (responseObj.status_code === 1) {
                    var err = responseObj.error_data;
                    err.xhr = response.xhr;
                    reject(err);
                }
                else {
                    resolve(responseObj);
                }
            }
            else {
                reject({
                    code: null,
                    category: 'Unknown error',
                    msg: 'Unknown reponse payload format',
                    xhr: response.xhr
                });
            }
        });
    }
    function customLeaderboardCall(method, path, body) {
        return new Promise(function (resolve, reject) {
            getServiceCallPrereqs().then(function (info) {
                var generatedPath = typeof path === 'function' ? path(info) : path;
                var generatedBody = typeof body === 'function' ? body(info) : body;
                var options = {
                    useToken: info.accountDetails.token
                };
                if (generatedBody !== null && generatedBody !== undefined) {
                    options.body = generatedBody;
                }
                // tslint:disable-next-line:max-line-length
                ZyngaNet.api(method, generatedPath, options).then(function (apiResult) {
                    resolve({
                        response: apiResult,
                        info: info
                    });
                }, reject);
            });
        });
    }
    exports.customLeaderboardCall = customLeaderboardCall;
    function setScore(leaderboardName, score, options) {
        return new Promise(function (resolve, reject) {
            ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT, function () {
                var extra = {
                    p: {
                        n: ZyngaInstant.player.getName(),
                        p: ZyngaInstant.player.getPhoto(),
                        i: ZyngaInstant.player.getID(),
                        t: Math.floor(new Date().getTime() / 1000)
                    },
                    e: null
                };
                var body = {
                    details: true,
                    rank: true,
                    score: score
                };
                var continuePromise = Promise.resolve(true);
                options = options || DEFAULT_SET_SCORE_OPTIONS;
                if (options.extra) {
                    extra.e = options.extra;
                }
                else {
                    delete extra.e;
                }
                if (options.tier !== undefined) {
                    body.tier = options.tier;
                }
                var onlyIfBetterDirection = options.onlyIfBetterDirection && options.onlyIfBetterDirection.toUpperCase();
                if (onlyIfBetterDirection &&
                    onlyIfBetterDirection === 'ASC' ||
                    onlyIfBetterDirection === 'DESC') {
                    continuePromise = ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS)
                        .then(function (accountDetails) {
                        var zid = accountDetails.zid.toString();
                        return getPlayerScoresByZyngaPlayerIds([zid], [leaderboardName]).then(function (responses) {
                            var response = responses[leaderboardName];
                            var myPlayer = response.players[zid];
                            var myScore = myPlayer && myPlayer.score;
                            var doSetScore = true;
                            if (score &&
                                (onlyIfBetterDirection === 'ASC' && score >= myScore) ||
                                (onlyIfBetterDirection === 'DESC' && score <= myScore)) {
                                doSetScore = false;
                            }
                            return doSetScore;
                        });
                    });
                }
                continuePromise.then(function (doContinue) {
                    if (doContinue) {
                        var extraString = '';
                        extraString = JSON.stringify(extra);
                        if (extraString.length > 2048) {
                            // TODO: reject with validation error
                        }
                        else {
                            if (extraString.length > 0) {
                                body.extra = extraString;
                            }
                            customLeaderboardCall('PUT', function (info) {
                                // tslint:disable-next-line:max-line-length
                                return "/leaderboards/" + leaderboardServiceVersion + "/app/" + info.appId + "/leaderboard/" + leaderboardName + "/id/" + info.accountDetails.playerId;
                            }, body).then(function (callResponse) {
                                var setScoreResult = callResponse.response;
                                var info = callResponse.info;
                                getLeaderboardResponse(setScoreResult).then(function (response) {
                                    var responseData = response && response.data || {};
                                    var leaderboardData = response.data[leaderboardName] || {};
                                    var userData = leaderboardData[numberOrStringToString(info.accountDetails.playerId)] || {};
                                    var metaData = responseData.metadata && responseData.metadata[leaderboardName] || {};
                                    var bucket = userData.bucket || null;
                                    var rank = userData.rank || null;
                                    var endTime = metaData.end_time ? new Date(metaData.end_time * 1000) : null;
                                    var retVal = {
                                        score: score
                                    };
                                    if (rank) {
                                        retVal.rank = rank;
                                    }
                                    if (bucket) {
                                        retVal.bucket = bucket;
                                    }
                                    if (endTime) {
                                        retVal.endTime = endTime;
                                    }
                                    resolve(retVal);
                                }, reject);
                            }).catch(function (e) {
                                // ToDo:  Error handling
                                reject(e);
                            });
                        }
                    }
                    else {
                        resolve(null);
                    }
                });
            }); // last ZyngaInsant.INSTANT_GAME_STARTED
        });
    }
    exports.setScore = setScore;
    function getPlayersInfoObject(zyngaPlayerIds, facebookPlayerIds) {
        zyngaPlayerIds = zyngaPlayerIds || [];
        facebookPlayerIds = facebookPlayerIds || [];
        var players = {
            players: [],
            zyngaPlayerIdIndex: {},
            facebookPlayerIdIndex: {}
        };
        for (var _i = 0, zyngaPlayerIds_1 = zyngaPlayerIds; _i < zyngaPlayerIds_1.length; _i++) {
            var zyngaPlayerId = zyngaPlayerIds_1[_i];
            var player = {
                zyngaPlayerId: zyngaPlayerId,
                facebookPlayerId: null,
                profileMeta: null
            };
            players.players.push(player);
            players.zyngaPlayerIdIndex[zyngaPlayerId] = player;
        }
        for (var _a = 0, facebookPlayerIds_1 = facebookPlayerIds; _a < facebookPlayerIds_1.length; _a++) {
            var facebookPlayerId = facebookPlayerIds_1[_a];
            var player = {
                zyngaPlayerId: null,
                facebookPlayerId: facebookPlayerId,
                profileMeta: null
            };
            players.players.push(player);
            players.facebookPlayerIdIndex[facebookPlayerId] = player;
        }
        return Promise.resolve(players);
    }
    function getPlayerScores(players, leaderboardNames, options) {
        return new Promise(function (resolve, reject) {
            var zyngaPlayerIds = Object.keys(players.zyngaPlayerIdIndex);
            leaderboardNames = Array.isArray(leaderboardNames) ? leaderboardNames : [leaderboardNames];
            var body = {
                details: true,
                include_tier: true,
                extra: true,
                leaderboards: leaderboardNames,
                ids: zyngaPlayerIds
            };
            customLeaderboardCall('POST', function (info) {
                return "/leaderboards/" + leaderboardServiceVersion + "/app/" + info.appId + "/leaderboards";
            }, body).then(function (getResult) {
                var info = getResult.info;
                var getResponse = getResult.response;
                getLeaderboardResponse(getResponse).then(function (response) {
                    var responseData = response && response.data || {};
                    var metaData = responseData.metadata || {};
                    var leaderboardPlayers;
                    var leaderboardMetadata;
                    var leaderboardEntry;
                    var leaderboardsData = {};
                    for (var _i = 0, leaderboardNames_1 = leaderboardNames; _i < leaderboardNames_1.length; _i++) {
                        var leaderboard = leaderboardNames_1[_i];
                        leaderboardPlayers = responseData[leaderboard] || {};
                        leaderboardMetadata = metaData[leaderboard];
                        leaderboardEntry = {
                            name: leaderboard,
                            players: {}
                        };
                        if (leaderboardMetadata && leaderboardMetadata.end_time) {
                            leaderboardEntry.endTime = new Date(leaderboardMetadata.end_time * 1000);
                        }
                        for (var playerId in leaderboardPlayers) {
                            var servicePlayer = leaderboardPlayers[playerId];
                            var cachePlayer = players.zyngaPlayerIdIndex[playerId];
                            var playerObj = {
                                score: parseInt(servicePlayer.score, 10)
                            };
                            if (typeof servicePlayer.extra === 'string') {
                                try {
                                    var infoCompressed = JSON.parse(servicePlayer.extra);
                                    // return user data to app
                                    playerObj.data = infoCompressed.e;
                                    if (typeof infoCompressed.p === 'object') {
                                        var updateTime = new Date(infoCompressed.p.t * 1000);
                                        if (cachePlayer.facebookPlayerId === null) {
                                            cachePlayer.facebookPlayerId = numberOrStringToString(infoCompressed.p.i);
                                            players.facebookPlayerIdIndex[cachePlayer.facebookPlayerId] = cachePlayer;
                                        }
                                        if (!cachePlayer.profileMeta ||
                                            (cachePlayer.profileMeta && cachePlayer.profileMeta.validTime < updateTime)) {
                                            cachePlayer.profileMeta = {
                                                pictureURL: infoCompressed.p.p ||
                                                    (cachePlayer.profileMeta ? cachePlayer.profileMeta.pictureURL : '') ||
                                                    '',
                                                name: infoCompressed.p.n ||
                                                    (cachePlayer.profileMeta ? cachePlayer.profileMeta.name : '') ||
                                                    '',
                                                validTime: updateTime,
                                                source: 'leaderboard'
                                            };
                                        }
                                        if (cachePlayer.profileMeta) {
                                            playerObj.info = {
                                                zyngaPlayerId: cachePlayer.zyngaPlayerId,
                                                facebookPlayerId: cachePlayer.facebookPlayerId,
                                                name: cachePlayer.profileMeta.name,
                                                photoURL: cachePlayer.profileMeta.pictureURL
                                            };
                                        }
                                        leaderboardEntry.players[playerId] = playerObj;
                                    }
                                }
                                catch (e) {
                                    // nothing
                                }
                            }
                        }
                        leaderboardsData[leaderboard] = leaderboardEntry;
                    }
                    updateZyngaPlayerInfoMemoryCache(players);
                    resolve(leaderboardsData);
                }, reject);
            }, reject);
        });
    }
    // populate player ID mappings
    function getZyngaPlayerInfoFromMemoryCache(players) {
        return new Promise(function (resolve) {
            players.players.forEach(function (player) {
                var cachedInfo = playerInfoCache.facebookPlayerIdIndex[player.facebookPlayerId] ||
                    playerInfoCache.zyngaPlayerIdIndex[player.zyngaPlayerId];
                if (cachedInfo) {
                    // copy over cached data
                    player.zyngaPlayerId = numberOrStringToString(player.zyngaPlayerId || cachedInfo.zyngaPlayerId);
                    player.facebookPlayerId = numberOrStringToString(player.facebookPlayerId || cachedInfo.facebookPlayerId);
                    if (cachedInfo.profileMeta &&
                        !player.profileMeta ||
                        (player.profileMeta && player.profileMeta.validTime < cachedInfo.profileMeta.validTime)) {
                        // Better meta
                        player.profileMeta = deepClone(cachedInfo.profileMeta);
                    }
                    // index them
                    players.facebookPlayerIdIndex[player.facebookPlayerId] = player;
                    players.zyngaPlayerIdIndex[player.zyngaPlayerId] = player;
                }
            });
            resolve(players);
        });
    }
    function updateZyngaPlayerInfoMemoryCache(players) {
        for (var _i = 0, _a = players.players; _i < _a.length; _i++) {
            var player = _a[_i];
            var cachedPlayer = playerInfoCache.zyngaPlayerIdIndex[player.zyngaPlayerId] ||
                playerInfoCache.facebookPlayerIdIndex[player.facebookPlayerId];
            if (!cachedPlayer
                || !cachedPlayer.profileMeta
                || (player.profileMeta && player.profileMeta.validTime > cachedPlayer.profileMeta.validTime)) {
                if (!cachedPlayer) {
                    cachedPlayer = deepClone(player);
                }
                else {
                    cachedPlayer.profileMeta = deepClone(player.profileMeta);
                    cachedPlayer.facebookPlayerId = numberOrStringToString(cachedPlayer.facebookPlayerId || player.facebookPlayerId);
                    cachedPlayer.zyngaPlayerId = numberOrStringToString(cachedPlayer.zyngaPlayerId || player.zyngaPlayerId);
                }
                if (cachedPlayer.facebookPlayerId) {
                    playerInfoCache.facebookPlayerIdIndex[cachedPlayer.facebookPlayerId] = cachedPlayer;
                }
                if (cachedPlayer.zyngaPlayerId) {
                    playerInfoCache.zyngaPlayerIdIndex[cachedPlayer.zyngaPlayerId] = cachedPlayer;
                }
            }
        }
    }
    function getZyngaCurrentPlayerInfo(players) {
        return Promise.all([
            ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS),
            ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_INITIALIZED),
            ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT) // Required to access player photo/name below
        ]).then(function (results) {
            var accountDetails = results[0];
            var zid = accountDetails.zid.toString();
            var fbPlayerId = ZyngaInstant.player.getID().toString();
            players.players.forEach(function (player) {
                if (player.facebookPlayerId === fbPlayerId || player.zyngaPlayerId === zid) {
                    player.profileMeta = {
                        name: ZyngaInstant.player.getName(),
                        pictureURL: ZyngaInstant.player.getPhoto(),
                        validTime: new Date(),
                        source: 'fbig_sdk'
                    };
                    player.facebookPlayerId = fbPlayerId;
                    player.zyngaPlayerId = zid;
                    players.facebookPlayerIdIndex[fbPlayerId] = player;
                    players.zyngaPlayerIdIndex[zid] = player;
                }
            });
            return players;
        });
    }
    function getZyngaPlayerInfoFromProfileService(players) {
        return new Promise(function (resolve, reject) {
            var facebookPlayerIds = players.players
                .filter(function (player) { return !player.zyngaPlayerId; })
                .map(function (player) { return player.facebookPlayerId; });
            var profileFields = [
                'fbig_player_id',
                'zynga_player_id',
                'display_name',
                'display_picture_url',
                'profile_updated_at'
            ];
            if (facebookPlayerIds.length === 0) {
                resolve(players);
            }
            else {
                ZyngaProfile.getProfilesByFacebookIdAsync(facebookPlayerIds, profileFields).then(function (profiles) {
                    var fbIdIndex = profiles.indexes.facebook;
                    for (var facebookPlayerId in fbIdIndex) {
                        var playerProfile = fbIdIndex[facebookPlayerId];
                        var player = players.facebookPlayerIdIndex[facebookPlayerId];
                        var updateTime = new Date(playerProfile.profile_updated_at);
                        player.zyngaPlayerId = numberOrStringToString(playerProfile.zynga_player_id);
                        if (!player.profileMeta ||
                            (player.profileMeta && player.profileMeta.validTime < updateTime)) {
                            // Better meta
                            player.profileMeta = {
                                name: playerProfile.display_name,
                                pictureURL: playerProfile.display_picture_url,
                                validTime: updateTime,
                                source: 'profile_service'
                            };
                        }
                        players.facebookPlayerIdIndex[player.facebookPlayerId] = player;
                        players.zyngaPlayerIdIndex[player.zyngaPlayerId] = player;
                    }
                    resolve(players);
                }, reject);
            }
        });
    }
    function getPlayerScoresByFacebookPlayerIds(facebookPlayerIds, leaderboardNames, options) {
        return getPlayersInfoObject([], facebookPlayerIds)
            .then(getZyngaPlayerInfoFromMemoryCache)
            .then(getZyngaCurrentPlayerInfo)
            .then(getZyngaPlayerInfoFromProfileService)
            .then(function (players) { return getPlayerScores(players, leaderboardNames, options); });
    }
    exports.getPlayerScoresByFacebookPlayerIds = getPlayerScoresByFacebookPlayerIds;
    function getPlayerScoresByZyngaPlayerIds(zyngaPlayerIds, leaderboardNames, options) {
        return getPlayersInfoObject(zyngaPlayerIds, [])
            .then(getZyngaPlayerInfoFromMemoryCache)
            .then(getZyngaCurrentPlayerInfo)
            .then(getZyngaPlayerInfoFromProfileService)
            .then(function (players) { return getPlayerScores(players, leaderboardNames, options); });
    }
    exports.getPlayerScoresByZyngaPlayerIds = getPlayerScoresByZyngaPlayerIds;
    function getPlayerScoresByMixedIds(zyngaPlayerIds, facebookPlayerIds, leaderboardNames, options) {
        return getPlayersInfoObject(zyngaPlayerIds, facebookPlayerIds)
            .then(getZyngaPlayerInfoFromMemoryCache)
            .then(getZyngaCurrentPlayerInfo)
            .then(getZyngaPlayerInfoFromProfileService)
            .then(function (players) { return getPlayerScores(players, leaderboardNames, options); });
    }
    exports.getPlayerScoresByMixedIds = getPlayerScoresByMixedIds;
    function getFriendsScores(leaderboardNames, playerListOptions, options) {
        var promises = [
            // have at least one promise resolving with an empty array
            Promise.resolve([])
        ];
        playerListOptions = playerListOptions || { includeConnectedFriends: true };
        if (playerListOptions.includeMe) {
            promises.push(ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_INITIALIZED).then(function () {
                return Promise.resolve([ZyngaInstant.player.getID()]);
            }));
        }
        if (playerListOptions.includeConnectedFriends) {
            promises.push(ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT)
                .then(ZyngaInstant.player.getConnectedPlayersAsync)
                .then(function (fbPlayersObjects) {
                var facebookPlayerIds = [];
                for (var _i = 0, fbPlayersObjects_1 = fbPlayersObjects; _i < fbPlayersObjects_1.length; _i++) {
                    var player = fbPlayersObjects_1[_i];
                    facebookPlayerIds.push(player.getID());
                }
                return Promise.resolve(facebookPlayerIds);
            }));
        }
        if (playerListOptions.includeThisContextPlayers || playerListOptions.includeAllContextsPlayers) {
            promises.push(Promise.all([
                ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT),
                ZyngaContextTracker.Event.last(ZyngaContextTracker.Events.CONTEXTS)
            ]).then(function (results) {
                var contextsPlayersData = results[1];
                var facebookPlayerIds = [];
                var includeAll = playerListOptions.includeAllContextsPlayers;
                var includeCurrent = playerListOptions.includeThisContextPlayers;
                var currentContext = ZyngaInstant.context.getID();
                for (var contextId in contextsPlayersData) {
                    var contextData = contextsPlayersData[contextId];
                    if ((includeCurrent && contextData && contextData.contextId === currentContext) || (contextData && includeAll)) {
                        facebookPlayerIds.push.apply(facebookPlayerIds, contextData.recentPlayers); // does an append
                    }
                }
                return Promise.resolve(facebookPlayerIds);
            }));
        }
        return Promise.all(promises).then(function (idArrays) {
            var idDict = {};
            for (var _i = 0, idArrays_1 = idArrays; _i < idArrays_1.length; _i++) {
                var idArray = idArrays_1[_i];
                for (var _a = 0, idArray_1 = idArray; _a < idArray_1.length; _a++) {
                    var facebookPlayerId = idArray_1[_a];
                    idDict[facebookPlayerId] = null;
                }
            }
            return getPlayerScoresByFacebookPlayerIds(Object.keys(idDict), leaderboardNames, options);
        });
    }
    exports.getFriendsScores = getFriendsScores;
});



var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
define("ZyngaLeaderboardUI", ["require", "exports", "preact", "ZyngaAnalytics", "ZyngaContextTracker", "ZyngaCore", "ZyngaInstant", "ZyngaLeaderboard", "ZyngaLeaderboardUICSS"], function (require, exports, preact, ZyngaAnalytics, ZyngaContextTracker, ZyngaCore, ZyngaInstant, ZyngaLeaderboard, ZyngaLeaderboardUICSS) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    // Preact uses the "h" function
    var h = preact.h;
    var InternalEvent = new ZyngaCore.EventMixin();
    var DOM_RDY = 'domReady';
    var doc = document;
    var DAY_SECONDS = 60 * 60 * 24;
    var HOUR_SECONDS = 60 * 60;
    var MINUTE_SECONDS = 60;
    // Dom operations should not happen until the DOM is actually ready.
    function checkDomRdy() {
        var readyState = doc.readyState;
        if (readyState === 'interactive' || readyState === 'complete') {
            // An image stuck loading, even a tracking pixel, can caue readyState 'complete'
            // to never fire.  This is why 'interactive' is good enough
            doc.removeEventListener('readystatechange', checkDomRdy);
            InternalEvent.fire(DOM_RDY, true);
        }
    }
    doc.addEventListener('readystatechange', checkDomRdy);
    checkDomRdy();
    function orderPlayers(players, order, meFBID) {
        return Object.keys(players)
            .map(function (pID) { return players[pID]; })
            .sort(function (a, b) {
            var left = a;
            var right = b;
            if (order === 'desc') {
                left = b;
                right = a;
            }
            if (a.score === b.score && a.info.facebookPlayerId === meFBID) {
                // Order current user below other tied users
                return 1;
            }
            return left.score - right.score;
        });
    }
    // tslint:disable-next-line:max-classes-per-file
    var Leaderboards = (function (_super) {
        __extends(Leaderboards, _super);
        function Leaderboards(props) {
            var _this = _super.call(this) || this;
            _this.Events = {
                CONFIG: 'LeaderboardUI.Config',
                BAD_CONFIG: 'LeaderboardUI.BoConfig',
                NO_CONFIG: 'LeaderbaordUI.NoConfig',
                CTA_CLICK: 'LeaderbaordUI.CTAClick',
                CLOSE: 'LeaderbaordUI.Close',
                OPEN: 'LeaderbaordUI.Open',
                MOUNTED: 'LeaderbaordUI.Mounted',
                TAB_CLICK: 'LeaderboardUI.TabClick',
                LB_DATA: 'LeaderboardUI.LBData',
                UI_DATA: 'LeaderboardUI.UIData',
                PLAY_NOW_CLICK: 'LeaderboardUI.PlayNowClick'
            };
            _this.pendingRefresh = false;
            _this.selectTab = function (lbIndex) {
                this.tabSelect(lbIndex);
            };
            var options = props && props.options || {};
            _this.state = {
                name: '',
                leaderboards: [],
                visible: false,
                refreshing: true
            };
            _this.tabsChanges = 0;
            _this.Event = new ZyngaCore.EventMixin();
            _this.Event.on(_this.Events.CONFIG, _this.refresh.bind(_this), false);
            _this.contextTrackingData = {};
            ZyngaContextTracker.Event.on(ZyngaContextTracker.Events.CONTEXTS, function (contextHistories) {
                _this.contextTrackingData = contextHistories;
            }, false);
            // Defaults
            _this.CTAHandler = _this.commonCTAHandler;
            _this.getUIString = _this.commonGetUIString;
            _this.playGame = function (data) { return undefined; };
            if (options.playGame) {
                _this.playGame = options.playGame;
            }
            if (props.options && props.options.testData) {
                _this.state = props.options.testData;
            }
            else if (props.configPromises) {
                _this.getFirstWorkingConfig(props.configPromises);
            }
            if (props.options && props.options.preLoad === true) {
                // Allow time to register handlers immediatly after instanciation
                setTimeout(_this.refresh, 0);
            }
            ZyngaInstant.Event.on(ZyngaInstant.Events.INSTANT_CONTEXT_ID_CHANGE, function () {
                if (_this.state.visible === true) {
                    // In the rare case where we are open AND context changes
                    // then we probably need to refresh
                    _this.refresh();
                }
            }, true);
            _this.setupTracking();
            _this.clockTick();
            return _this;
        }
        Leaderboards.prototype.show = function () {
            this.tabsChanges++;
            this.setState({ visible: true });
            this.clockTick();
            this.Event.fire(this.Events.OPEN);
        };
        Leaderboards.prototype.hide = function () {
            this.tabsChanges = 0;
            this.setState({ visible: false });
            this.Event.fire(this.Events.CLOSE);
        };
        Leaderboards.prototype.registerCTAHandler = function (gameCustomCTAHandler) {
            var _this = this;
            // Wrap the custom handler so we can call the common one if null is returned
            this.CTAHandler = function (data) {
                return gameCustomCTAHandler(data)
                    .then(function (handlerResult) {
                    if (handlerResult === null) {
                        // The custom game handler told us to use the common CTA Handler
                        return _this.commonCTAHandler(data);
                    }
                    return handlerResult;
                });
            };
        };
        Leaderboards.prototype.registerUIStringHandler = function (gameGetUIStringHandler) {
            // Wrap the custom handler so we can call the common one if null is returned
            var that = this;
            this.getUIString = function (labelName, data) {
                var gameResult = gameGetUIStringHandler(labelName, data);
                if (gameResult === null) {
                    // The custom game handler told us to use the common getUIString
                    return that.commonGetUIString(labelName, data);
                }
                return gameResult;
            };
        };
        Leaderboards.prototype.commonCTAHandler = function (data) {
            return new Promise(function (resolve, reject) {
                if (!data ||
                    data.ctaType === 'playNow' ||
                    (data.leaderboardType === 'currentContext' && data.ctaType !== 'invite') ||
                    (data.leaderboardType === 'global' && (data.ctaType === 'me' || data.ctaType === 'zeroState'))) {
                    resolve(true);
                }
                else if (data.leaderboardType === 'allContexts' ||
                    data.ctaType === 'invite' ||
                    data.ctaType === 'zeroState') {
                    switch (data.ctaType) {
                        case 'group':
                        case 'me':
                            ZyngaInstant.context.switchAsync(data.contextId).then(function () {
                                resolve(true);
                            }, reject);
                            break;
                        case 'invite': // Fall through
                        case 'zeroState':
                            ZyngaInstant.context.chooseAsync().then(function () {
                                resolve(true);
                            }, reject);
                            break;
                    }
                }
                else if (data.leaderboardType === 'global' && data.ctaType === 'player') {
                    ZyngaInstant.context.createAsync(data.userInfo.facebookPlayerId).then(function () {
                        resolve(true);
                    }, function (error) {
                        if (typeof error === 'object' &&
                            error.code &&
                            error.code === 'SAME_CONTEXT') {
                            // Same context (person).  We only know this once
                            // we try and fail
                            resolve(true);
                        }
                        else {
                            // Some other error.  Legit.
                            reject(error);
                        }
                    });
                }
            });
        };
        Leaderboards.prototype.render = function (props, state) {
            var _this = this;
            var mainVisibilityClass = state.visible ? '' : ' z_lb_hidden';
            var mainRefreshingClass = state.refreshing ? '' : ' z_lb_refreshing';
            var leaderboards = state.leaderboards;
            var that = this;
            var getUIString = this.getUIString;
            var playNowAttributes = this.touchOrClick(this.ctaClick.bind(this, {
                leaderboardConfigName: state.selectedLeaderboardConfigName,
                leaderboardId: state.selectedLeaderboardId,
                ctaType: 'playNow'
            }));
            playNowAttributes['class'] = 'z_lb_play_now';
            var mainAttributes = {
                class: 'z_lb_main' + mainVisibilityClass + mainRefreshingClass,
                style: 'font-size: ' + Math.round(window.innerWidth / 40) + 'px;'
            };
            var documentTouch = window.DocumentTouch;
            if (('ontouchstart' in window) || documentTouch && document instanceof documentTouch) {
                // Pulled from https://github.com/Modernizr/Modernizr/blob/master/feature-detects/touchevents.js#L40
                mainAttributes.class = mainAttributes.class + ' z_lb_touch_enabled';
            }
            return h("div", __assign({}, mainAttributes),
                h("div", { class: "z_lb_container" },
                    h("div", { class: "z_lb_top_spacer" }),
                    h("div", { class: "z_lb_box" },
                        h("div", { class: "z_lb_title" }, state.name),
                        h("div", { class: "z_lb_tabs" },
                            h("div", { class: "z_lb_tabs_row" }, leaderboards.map(function (lb, idx) {
                                var attributes = _this.touchOrClick(_this.tabSelect.bind(_this, idx));
                                var tabClasses = [
                                    'z_lb_tabs_tab',
                                    'z_lb_tab_tab_config_id_' + lb.configId
                                ];
                                if (lb.visible === true) {
                                    tabClasses.push('z_lb_tabs_tab_active');
                                }
                                // User's place in the LB.  0 means not placed yet.
                                if (lb.myPosition >= 0) {
                                    tabClasses.push('z_lb_my_place_' + lb.myPosition);
                                }
                                if (lb.myPosition === 0) {
                                    tabClasses.push('z_lb_new_to_me');
                                }
                                if (lb.endTime) {
                                    tabClasses.push('z_lb_has_time_remaining');
                                }
                                attributes['class'] = tabClasses.join(' ');
                                return h("div", __assign({}, attributes),
                                    h("div", { class: "z_lb_tabs_tab_name_container" },
                                        h("div", { class: "z_lb_tabs_tab_name" }, lb.name)),
                                    h("div", { class: "z_lb_tabs_tab_time_remaining_container" },
                                        h("div", { class: "z_lb_tabs_tab_time_remaining" }, getUIString('timeLeft', lb.secondsLeft))));
                            }))),
                        leaderboards.map(function (lb, idx) {
                            var lbClasses = ['z_lb_leaderbaord'];
                            // sets active LB
                            if (lb.visible) {
                                lbClasses.push('z_lb_active');
                            }
                            if (lb.endTime) {
                                lbClasses.push('z_lb_has_time_remaining');
                            }
                            return h("div", { class: lbClasses.join(' ') },
                                h("div", { class: "z_lb_time_remaining" },
                                    h("div", { class: "z_lb_time_remaining_label" }, getUIString('timeLeftLabel')),
                                    h("div", { class: "z_lb_time_remaining_remaining" }, getUIString('timeLeft', lb.secondsLeft))),
                                h("div", { class: "z_lb_lb_items" }, lb.leaderboardEntries.map(function (lbEntry, i) {
                                    var classList = [
                                        'z_lb_lb_item',
                                        'z_lb_lb_item_type_' + lbEntry.type,
                                        'z_lb_lb_item_pos_' + i
                                    ];
                                    var pictureAttributes = {
                                        class: 'z_lb_lb_item_photo',
                                        style: 'background-image: url(\'' + lbEntry.pictureURL + '\');'
                                    };
                                    var ctaAttributes = _this.touchOrClick(_this.ctaClick.bind(_this, lbEntry.ctaData));
                                    ctaAttributes['class'] = 'z_lb_lb_item_cta';
                                    if (lbEntry.isMe) {
                                        classList.push('z_lb_item_current_user');
                                    }
                                    if (lbEntry.ctaData.ctaType === 'zeroState') {
                                        classList.push('z_lb_item_zero_state');
                                    }
                                    if (lbEntry.ctaData.ctaType === 'invite') {
                                        classList.push('z_lb_item_invite');
                                    }
                                    return h("div", { class: classList.join(' ') },
                                        h("div", { class: "z_lb_lb_item_height_provider" }),
                                        h("div", { class: "z_lb_lb_item_section_rank" },
                                            h("div", { class: "z_lb_lb_item_section_rank_value" }, lbEntry.position)),
                                        h("div", { class: "z_lb_lb_item_section_picture" },
                                            h("div", { class: "z_lb_lb_item_photo_wrapper" },
                                                h("div", __assign({}, pictureAttributes)))),
                                        h("div", { class: "z_lb_lb_item_section_name" },
                                            h("div", { class: "z_lb_lb_item_wrapper" },
                                                h("div", { class: "z_lb_lb_item_name" }, lbEntry.name))),
                                        h("div", { class: "z_lb_lb_item_section_chat_name" },
                                            h("div", { class: "z_lb_lb_item_wrapper" },
                                                h("div", { class: "z_lb_lb_item_chat_name" }, lbEntry.chatName))),
                                        h("div", { class: "z_lb_lb_item_section_score" },
                                            h("div", { class: "z_lb_lb_item_wrapper" },
                                                h("div", { class: "z_lb_lb_item_score" }, lbEntry.score))),
                                        h("div", { class: "z_lb_lb_item_section_challenge" },
                                            h("div", { class: "z_lb_lb_item_wrapper" },
                                                h("div", { class: "z_lb_lb_item_challenge" }, lbEntry.scoreChallengeLabel))),
                                        h("div", { class: "z_lb_lb_item_section_cta" },
                                            h("div", __assign({}, ctaAttributes), lbEntry.ctaLabel)));
                                })));
                        })),
                    h("div", __assign({}, playNowAttributes), getUIString('playNow', { leaderboardConfigName: state.selectedLeaderboardConfigName })),
                    h("div", { class: "z_lb_bottom_spacer" })),
                h("div", __assign({}, playNowAttributes), getUIString('playNow', { leaderboardConfigName: state.selectedLeaderboardConfigName })));
        };
        Leaderboards.prototype.refresh = function () {
            var _this = this;
            var dataPromise;
            if (this.props && this.props.options && this.props.options.testData) {
                dataPromise = Promise.resolve(this.props.options.testData);
            }
            else {
                dataPromise = Promise.all([
                    this.Event.last(this.Events.CONFIG),
                    ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT)
                ]).then(function (allResults) {
                    var configs = allResults[0];
                    var currentContextId = ZyngaInstant.context.getID();
                    var currentContextType = ZyngaInstant.context.getType();
                    var leaderboardPromises = [];
                    var contextIdLookup = {};
                    var _loop_1 = function (i) {
                        var config = configs[i];
                        if (config.type === 'currentContext') {
                            if (currentContextType === 'THREAD' && currentContextId) {
                                var leaderboardName = config.leaderboardName.replace('{contextId}', currentContextId);
                                leaderboardPromises.push(ZyngaLeaderboard.getFriendsScores([leaderboardName], config.includePlayers));
                            }
                            else {
                                leaderboardPromises.push(Promise.resolve(null));
                            }
                        }
                        else if (config.type === 'allContexts') {
                            leaderboardPromises.push(ZyngaContextTracker.Event.last(ZyngaContextTracker.Events.CONTEXTS)
                                .then(function (contexts) {
                                var leaderboardNames = [];
                                for (var contextId in contexts) {
                                    var contextData = contexts[contextId];
                                    if (contextId !== currentContextId) {
                                        var leaderboardName = config.leaderboardName.replace('{contextId}', contextId);
                                        if (leaderboardName !== config.leaderboardName) {
                                            leaderboardNames.push(leaderboardName);
                                            contextIdLookup[leaderboardName] = contextId;
                                        }
                                    }
                                }
                                if (leaderboardNames.length > 0) {
                                    return ZyngaLeaderboard.getFriendsScores(leaderboardNames, config.includePlayers);
                                }
                                else {
                                    return Promise.resolve({});
                                }
                            }));
                        }
                        else if (config.type === 'global') {
                            leaderboardPromises.push(ZyngaLeaderboard.getFriendsScores([config.leaderboardName], config.includePlayers));
                        }
                    };
                    // Fetch appropriate leaderbaord data for each config
                    for (var i in configs) {
                        _loop_1(i);
                    }
                    return Promise.all(leaderboardPromises).then(function (results) {
                        var newData = {
                            name: _this.getUIString('leaderboardMainLabel'),
                            leaderboards: [],
                            visible: _this.state ? _this.state.visible : true,
                            refreshing: false,
                            selectedLeaderboardConfigName: '',
                            selectedLeaderboardId: ''
                        };
                        _this.Event.fire(_this.Events.LB_DATA, results);
                        // Get previously selected/visible leaderbaord name
                        _this.state.leaderboards.forEach(function (lb) {
                            if (lb.visible) {
                                newData.selectedLeaderboardConfigName = lb.configName;
                                newData.selectedLeaderboardId = lb.configId;
                            }
                        });
                        results.forEach(function (lbResponses, i) {
                            if (lbResponses !== null) {
                                var config_1 = configs[i];
                                var me_1 = ZyngaInstant.player.getID();
                                var mePosition_1 = 0; // My position is not on the board by default
                                var lbData_1 = {
                                    name: _this.getUIString('tabLabel', config_1.leaderboardId),
                                    configName: config_1.leaderboardName,
                                    configId: config_1.leaderboardId,
                                    leaderboardEntries: []
                                };
                                var inviteEntry = void 0;
                                var commonInviteEntry = {
                                    score: null,
                                    type: config_1.type,
                                    chatName: '',
                                    name: _this.getUIString('leaderboardInviteLabel'),
                                    pictureURL: '',
                                    isMe: false,
                                    scoreChallengeLabel: '',
                                    ctaData: {
                                        leaderboardName: config_1.leaderboardName,
                                        leaderboardId: config_1.leaderboardId,
                                        ctaType: 'invite',
                                        leaderboardType: config_1.type,
                                        contextId: currentContextId,
                                    },
                                    ctaLabel: _this.getUIString('leaderbaordInviteCTA'),
                                    position: null
                                };
                                if (config_1.type === 'currentContext' || config_1.type === 'global') {
                                    var result = lbResponses[config_1.leaderboardName.replace('{contextId}', currentContextId)];
                                    if (result) {
                                        var players = orderPlayers(result.players, config_1.order, me_1);
                                        var hasOthers_1 = false;
                                        if (result.endTime) {
                                            lbData_1.endTime = result.endTime;
                                        }
                                        players.forEach(function (player, playerPosition) {
                                            if (player.info.facebookPlayerId === me_1) {
                                                mePosition_1 = playerPosition + 1;
                                            }
                                            else {
                                                hasOthers_1 = true;
                                            }
                                        });
                                        lbData_1.myPosition = mePosition_1;
                                        for (var _i = 0, players_1 = players; _i < players_1.length; _i++) {
                                            var player = players_1[_i];
                                            if (player.info) {
                                                var ctaData = {
                                                    leaderboardName: config_1.leaderboardName,
                                                    leaderboardId: config_1.leaderboardId,
                                                    ctaType: player.info.facebookPlayerId === me_1 ? 'me' : 'player',
                                                    leaderboardType: config_1.type,
                                                    mePosition: mePosition_1,
                                                    contextId: currentContextId,
                                                    userInfo: player.info
                                                };
                                                var labelMakingData = {
                                                    config: config_1,
                                                    ctaData: ctaData,
                                                    position: lbData_1.leaderboardEntries.length + 1,
                                                    score: player.score
                                                };
                                                lbData_1.leaderboardEntries.push({
                                                    type: config_1.type,
                                                    score: _this.getUIString('leaderboardItemScore', labelMakingData),
                                                    chatName: _this.getUIString('leaderboardItemChatName', labelMakingData),
                                                    name: _this.getUIString('leaderboardItemName', labelMakingData),
                                                    pictureURL: player.info.photoURL,
                                                    isMe: player.info.facebookPlayerId === me_1,
                                                    position: labelMakingData.position,
                                                    scoreChallengeLabel: _this.getUIString('leaderbaordItemScoreChallenge', labelMakingData),
                                                    ctaLabel: _this.getUIString('ctaLabel', labelMakingData),
                                                    ctaData: ctaData
                                                });
                                            }
                                        }
                                        if (hasOthers_1 === false) {
                                            // Push a special invite entry
                                            inviteEntry = commonInviteEntry;
                                        }
                                    }
                                }
                                else if (config_1.type === 'allContexts') {
                                    inviteEntry = commonInviteEntry; // Always add this on allContexts type
                                    Object.keys(lbResponses).forEach(function (lbName) {
                                        var lbContextId = contextIdLookup[lbName];
                                        var lbResponse = lbResponses[lbName];
                                        var lbPlayers = orderPlayers(lbResponse.players, config_1.order, me_1);
                                        if (lbResponse.endTime) {
                                            lbData_1.endTime = lbResponse.endTime;
                                        }
                                        if (lbPlayers.length > 0) {
                                            var topPlayer = lbPlayers[0];
                                            if (topPlayer.info) {
                                                var ctaData = {
                                                    leaderboardName: config_1.leaderboardName,
                                                    leaderboardId: config_1.leaderboardId,
                                                    ctaType: topPlayer.info.facebookPlayerId === me_1 ? 'me' : 'group',
                                                    leaderboardType: config_1.type,
                                                    contextId: lbContextId,
                                                    userInfo: topPlayer.info
                                                };
                                                var labelMakingData = {
                                                    config: config_1,
                                                    ctaData: ctaData,
                                                    position: null,
                                                    score: topPlayer.score
                                                };
                                                lbData_1.leaderboardEntries.push({
                                                    type: config_1.type,
                                                    score: _this.getUIString('leaderboardItemScore', labelMakingData),
                                                    chatName: _this.getUIString('leaderboardItemChatName', labelMakingData),
                                                    name: _this.getUIString('leaderboardItemName', labelMakingData),
                                                    pictureURL: topPlayer.info.photoURL,
                                                    isMe: topPlayer.info.facebookPlayerId === me_1,
                                                    position: null,
                                                    scoreChallengeLabel: _this.getUIString('leaderbaordItemScoreChallenge', labelMakingData),
                                                    ctaLabel: _this.getUIString('ctaLabel', labelMakingData),
                                                    ctaData: ctaData
                                                });
                                            }
                                        }
                                    });
                                    // Sort by best score first
                                    lbData_1.leaderboardEntries = lbData_1.leaderboardEntries.sort(function (a, b) {
                                        var aScore = parseInt(a.score, 10) || 0;
                                        var bScore = parseInt(b.score, 10) || 0;
                                        if (config_1.order === 'asc') {
                                            return aScore - bScore;
                                        }
                                        return bScore - aScore;
                                    });
                                }
                                if (lbData_1.leaderboardEntries.length === 0 && config_1.type !== 'allContexts') {
                                    // Add a Zero-State entry
                                    var ctaData = {
                                        leaderboardName: config_1.leaderboardName,
                                        leaderboardId: config_1.leaderboardId,
                                        ctaType: 'zeroState',
                                        leaderboardType: config_1.type
                                    };
                                    var labelMakingData = {
                                        config: config_1,
                                        ctaData: ctaData,
                                        position: 1
                                    };
                                    lbData_1.leaderboardEntries.push({
                                        type: config_1.type,
                                        score: _this.getUIString('leaderboardItemScore', labelMakingData),
                                        chatName: _this.getUIString('leaderboardItemChatName', labelMakingData),
                                        name: _this.getUIString('leaderboardItemName', labelMakingData),
                                        pictureURL: _this.getUIString('leaderboardItemPictureURL', labelMakingData),
                                        isMe: false,
                                        position: labelMakingData.position,
                                        scoreChallengeLabel: _this.getUIString('leaderbaordItemScoreChallenge', labelMakingData),
                                        ctaLabel: _this.getUIString('ctaLabel', labelMakingData),
                                        ctaData: ctaData
                                    });
                                }
                                if (inviteEntry) {
                                    lbData_1.leaderboardEntries.push(inviteEntry);
                                }
                                newData.leaderboards.push(lbData_1);
                            }
                        }, _this);
                        // Ensure the new data also has the last selected tab selected/visible
                        var newSelectedPosition = 0;
                        newData.leaderboards.forEach(function (lb, i) {
                            if (lb.name === newData.selectedLeaderboardConfigName) {
                                newSelectedPosition = i;
                            }
                        });
                        newData.leaderboards[newSelectedPosition].visible = true;
                        return newData;
                    });
                });
            }
            dataPromise.then(function (newState) {
                _this.Event.fire(_this.Events.UI_DATA, newState);
                _this.setState(newState);
                _this.clockTick();
            });
        };
        Leaderboards.prototype.componentWillUnmount = function () {
            clearTimeout(this.clockTimeout);
        };
        Leaderboards.prototype.componentDidMount = function () {
            this.Event.fire(this.Events.MOUNTED);
        };
        Leaderboards.prototype.logLeaderboardView = function (leaderboard) {
            var lbName = leaderboard && leaderboard.configName || 'unknown';
            var itemCount = leaderboard && leaderboard.leaderboardEntries
                .filter(function (lbe) { return (lbe.ctaData.ctaType !== 'zeroState'); })
                .length;
            ZyngaAnalytics.logCount({
                counter: 'leaderboard',
                value: this.tabsChanges,
                kingdom: leaderboard.configId,
                phylum: itemCount.toString()
            });
        };
        Leaderboards.prototype.setupTracking = function () {
            var _this = this;
            this.Event.on(this.Events.OPEN, function () {
                _this.Event.last(_this.Events.UI_DATA, function () {
                    // Wait until we have data in case we are opened too early
                    _this.logLeaderboardView(_this.state.leaderboards[0]);
                });
            }, true);
            this.Event.on(this.Events.TAB_CLICK, function (leaderboard) { return _this.logLeaderboardView(leaderboard); }, true);
            this.Event.on(this.Events.CTA_CLICK, function (clickData) {
                var leaderboardId = clickData.leaderboardId || '';
                var ctaType = clickData.ctaType || '';
                var entries = ZyngaCore.ArrayFind(_this.state.leaderboards, function (lb) { return lb.configId === leaderboardId; }).leaderboardEntries
                    .filter(function (lbe) { return lbe.ctaData.ctaType !== 'zeroState'; })
                    .length; // Count lb entries that are friends or chats
                var trackData = {
                    counter: 'leaderboard_action',
                    kingdom: 'CTA_clicked',
                    phylum: entries.toString(),
                    class: leaderboardId,
                    family: ctaType
                };
                // tslint:disable-next-line:no-console
                console.log(JSON.stringify(trackData, null, 2));
                ZyngaAnalytics.logCount(trackData);
            }, true);
        };
        Leaderboards.prototype.commonGetUIString = function (stringName, data) {
            var retVal = '';
            var ctaData = typeof data === 'object' && data.ctaData;
            var lbType = ctaData && ctaData.leaderboardType || null;
            var isZeroState = ctaData && ctaData.ctaType && ctaData.ctaType === 'zeroState';
            var userInfo = ctaData && ctaData.userInfo;
            switch (stringName) {
                case 'leaderboardMainLabel':
                    retVal = 'Leaderboard';
                    break;
                case 'tabLabel':
                    if (data === 'thisChat') {
                        retVal = 'THIS CHAT';
                    }
                    else if (data === 'allChats') {
                        retVal = 'ALL CHATS';
                    }
                    else if (data === 'allFriends') {
                        retVal = 'ALL FRIENDS';
                    }
                    break;
                case 'timeLeftLabel':
                    retVal = 'Time Left:';
                    break;
                case 'timeLeft':
                    var secondsLeft = parseInt(data, 10) || 0;
                    var days = Math.floor(secondsLeft / DAY_SECONDS);
                    secondsLeft = secondsLeft - (days * DAY_SECONDS);
                    var hours = Math.floor(secondsLeft / HOUR_SECONDS);
                    secondsLeft = secondsLeft - (hours * HOUR_SECONDS);
                    var minutes = Math.floor(secondsLeft / MINUTE_SECONDS);
                    var seconds = secondsLeft - (minutes * MINUTE_SECONDS);
                    retVal = [
                        ('00' + days).slice(-2),
                        ('00' + hours).slice(-2),
                        ('00' + minutes).slice(-2),
                        ('00' + seconds).slice(-2),
                    ].join(':');
                    break;
                case 'leaderboardItemScore':
                    var ctaType = ctaData && ctaData.ctaType;
                    var score = data && data.score;
                    if (ctaType === 'player' ||
                        ctaType === 'me' ||
                        ctaType === 'group') {
                        retVal = score;
                    }
                    break;
                case 'leaderboardItemPictureURL':
                    if (isZeroState) {
                        // tslint:disable-next-line:max-line-length
                        retVal = 'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%22512%22%20height%3D%22512%22%20viewBox%3D%220%200%20560.693%20560.693%22%3E%3Cg%20fill%3D%22%23D80027%22%3E%3Cpath%20d%3D%22M161.79%20107.234c6.514%204.96%2013.414%208.69%2020.8%2012.15%203.386%201.485%206.788%202.93%2010.203%204.34%208.6%203.602%2011.928%207.1%2018.883%2012.94-9.354-7.852-20.178%207.668-10.9%2015.456%208.057%206.766%2017.36%205.53%2025.117-1.034%203.696-3.13%205.217-7.154%205.343-11.383%2010.27%2014.058%2021.748%2024.854%2033.98%2029.896V203c0%201.79.368%203.485.937%205.08H242.52c-6.266%200-11.345%205.08-11.345%2011.346v18.213c0%206.266%205.08%2011.345%2011.346%2011.345h75.653c6.267%200%2011.347-5.08%2011.347-11.346v-18.214c0-6.267-5.08-11.346-11.347-11.346H294.54c.573-1.594.937-3.287.937-5.08v-33.4c12.237-5.043%2023.712-15.842%2033.98-29.896.127%204.232%201.647%208.256%205.344%2011.383%207.76%206.564%2017.06%207.797%2025.118%201.034%209.277-7.787-1.546-23.307-10.9-15.455%206.956-5.84%2010.285-9.34%2018.884-12.94%203.415-1.408%206.817-2.855%2010.202-4.34%207.39-3.46%2014.29-7.19%2020.802-12.15%2011.566-8.807%2017.117-22.546%2018.767-36.533%203.103-26.34-17.31-47.914-41.43-53.532.777-6.22%201.185-12%201.185-17.17h-194.16c0%205.17.407%2010.95%201.185%2017.17-24.12%205.618-44.532%2027.19-41.43%2053.532%201.648%2013.986%207.203%2027.73%2018.766%2036.532zM373.057%2035.94c25.9%207.478%2037.32%2042.436%2010.676%2059.103-10.894%206.815-26.285%2010.24-37.742%2017.488%2012.45-24.252%2021.91-52.202%2027.066-76.59zm-91.253-7.378h15.83v106.604h-17.932v-89.3h-.422L255.44%2058.73l-3.58-14.137%2029.945-16.03zm-94.153%207.377c5.156%2024.388%2014.618%2052.337%2027.07%2076.59-11.458-7.248-26.853-10.672-37.743-17.487-26.647-16.667-15.23-51.625%2010.672-59.104z%22/%3E%3Ccircle%20cx%3D%22280.355%22%20cy%3D%22328.953%22%20r%3D%2258.985%22/%3E%3Cpath%20d%3D%22M173.827%20172.452c-12.417%200-22.485%2010.064-22.485%2022.485v158.64c0%204.396%201.288%208.702%203.712%2012.374l60.637%2092.003s-.45%20101.207-.45%20102.74h130.234c0-1.536-.45-102.74-.45-102.74l60.637-92.002c2.425-3.67%203.713-7.977%203.713-12.373v-158.64c0-12.418-10.067-22.485-22.484-22.485-12.42%200-22.486%2010.064-22.486%2022.485v151.896l-34.94%2053.018H231.253l-34.94-53.017V194.938c0-12.42-10.067-22.486-22.485-22.486z%22/%3E%3C/g%3E%3C/svg%3E';
                    }
                    else {
                        retVal = userInfo && userInfo.photoURL || '';
                    }
                    break;
                case 'leaderboardItemName':
                    // ToDo: Zero State
                    if (isZeroState) {
                        retVal = 'No Leader';
                    }
                    else {
                        retVal = userInfo && userInfo.name || '';
                        if (ctaData && ctaData.leaderboardType === 'allContexts') {
                            var contextId = data.ctaData.contextId;
                            var contextHistory = this.contextTrackingData[contextId];
                            if (contextHistory) {
                                var lastSuccess = contextHistory.lastCheckSuccess;
                                if (lastSuccess) {
                                    if (lastSuccess.min === lastSuccess.max) {
                                        retVal = retVal + ' leads ' + (lastSuccess.min - 1) + ' other player';
                                        if ((lastSuccess.min - 1) > 1) {
                                            retVal = retVal + 's';
                                        }
                                    }
                                    else {
                                        retVal = retVal + ' leads ' + lastSuccess.min + '+ players';
                                    }
                                }
                                else if (contextHistory.recentPlayers.length > 1) {
                                    retVal = (contextHistory.recentPlayers.length - 1) + ' other friend';
                                    if ((contextHistory.recentPlayers.length - 1) > 1) {
                                        retVal = retVal + 's';
                                    }
                                }
                            }
                        }
                    }
                    break;
                case 'leaderboardItemChatName':
                    retVal = '';
                    break;
                case 'leaderbaordItemScoreChallenge':
                    var myPositionOffset = ctaData && ctaData.mePosition;
                    if (isZeroState) {
                        retVal = 'Play now to be the leader!';
                    }
                    else if (lbType === 'currentContext' || lbType === 'global') {
                        if (myPositionOffset <= 0) {
                            retVal = 'Challenge';
                        }
                        else if (myPositionOffset > 0) {
                            retVal = 'Beat Score';
                        }
                    }
                    else if (lbType === 'allContexts') {
                        if (ctaData.ctaType === 'me') {
                            retVal = 'Challenge Group';
                        }
                        else {
                            retVal = 'Beat my score';
                        }
                    }
                    break;
                case 'leaderbaordInviteCTA':
                    retVal = 'Invite';
                    break;
                case 'leaderboardInviteLabel':
                    retVal = 'Invite your friends to play!';
                    break;
                case 'ctaLabel':
                    retVal = 'Play';
                    break;
                case 'playNow':
                    retVal = 'Play Now';
                    break;
            }
            return retVal;
        };
        Leaderboards.prototype.ctaClick = function (data) {
            var _this = this;
            var handler = this.CTAHandler;
            this.Event.fire(this.Events.CTA_CLICK, data);
            handler(data).then(function (sucess) {
                if (sucess) {
                    _this.hide();
                    _this.playGame(data);
                }
            }, function (err) {
                // tslint:disable-next-line:no-console
                console.error(err);
            });
        };
        Leaderboards.prototype.clockTick = function () {
            var now = new Date();
            var nowMS = now.getTime();
            var nowSeconds = Math.floor(nowMS / 1000);
            var nextSecond = nowSeconds + 1;
            var waitForNextTick = (nextSecond * 1000) - nowMS + 10; // ms until 10ms after next second
            clearTimeout(this.clockTimeout);
            if (!this.state.visible) {
                return;
            }
            for (var _i = 0, _a = this.state.leaderboards; _i < _a.length; _i++) {
                var lb = _a[_i];
                var endTime = lb.endTime;
                if (endTime) {
                    var endTimeSeconds = Math.round(endTime.getTime() / 1000);
                    var secondsLeft = endTimeSeconds - nowSeconds;
                    if (secondsLeft < 0) {
                        secondsLeft = 0;
                    }
                    lb.secondsLeft = secondsLeft;
                }
            }
            this.setState({ leaderboards: this.state.leaderboards });
            setTimeout(this.clockTick.bind(this), waitForNextTick);
        };
        Leaderboards.prototype.tabSelect = function (lbIndex, e) {
            var lbs = this.state.leaderboards;
            var oldIndex = -1;
            lbs.forEach(function (lb, i) {
                if (lb.visible) {
                    oldIndex = i;
                }
                lb.visible = false;
            });
            if (lbIndex >= lbs.length) {
                lbIndex = 0;
            }
            lbs[lbIndex].visible = true;
            if (lbIndex !== oldIndex && e !== undefined) {
                // Only fire if there is a change AND it was user initiated.
                // User initiated will have an event as the second param
                this.tabsChanges++;
                this.Event.fire(this.Events.TAB_CLICK, lbs[lbIndex]);
            }
            this.setState({
                leaderboards: lbs,
                selectedLeaderboardConfigName: lbs[lbIndex].configName,
            });
        };
        Leaderboards.prototype.touchOrClick = function (callback) {
            return {
                onClick: callback
            };
        };
        // Go through an array of config promises until we get a valid config
        Leaderboards.prototype.getFirstWorkingConfig = function (configPromises) {
            var _this = this;
            if (Array.isArray(configPromises) && configPromises.length > 0) {
                var configPromise_1 = configPromises.shift();
                configPromise_1.then(function (config) {
                    _this.Event.fire(_this.Events.CONFIG, config);
                }, function (e) {
                    _this.Event.fire(_this.Events.BAD_CONFIG, configPromise_1);
                    _this.getFirstWorkingConfig(configPromises);
                });
            }
            else {
                this.Event.fire(this.Events.NO_CONFIG);
            }
        };
        return Leaderboards;
    }(preact.Component));
    exports.Leaderboards = Leaderboards;
    function initalizeLeaderboards(dataSources, parent, options, cssObj) {
        var props = {
            configPromises: dataSources,
            options: options
        };
        var leaderboards = preact.render(h(Leaderboards, __assign({}, props)), parent, parent['__lbvnode'] // Replace an old one if it exists
        );
        var lbComponent = leaderboards['_component'];
        var lbCssObj = cssObj || getDefaultCSSObj() || {};
        var newCSSStr = ZyngaCore.parseCSS(lbCssObj);
        // Add pointer to current element so we can replace it if called again for this parent
        parent['__lbvnode'] = leaderboards;
        // Bit of a hack. Only expose actual public data.  All would be available in ES5 otherwise.
        InternalEvent.last(DOM_RDY, function () {
            var styleNode = parent['__lbcssnode'];
            if (!styleNode) {
                // Create a new style node in head
                var head = doc.head || doc.getElementsByTagName('head')[0];
                styleNode = doc.createElement('style');
                styleNode.type = 'text/css';
                head.appendChild(styleNode);
                parent['__lbvnode'] = styleNode;
            }
            // write out CSS to style node
            if (styleNode.styleSheet) {
                // Older version of IE
                styleNode.styleSheett.cssText = newCSSStr;
            }
            else if (typeof styleNode.textContent !== 'undefined') {
                styleNode.textContent = newCSSStr;
            }
            else {
                styleNode.innerText = newCSSStr;
            }
        });
        return {
            Event: lbComponent.Event,
            Events: lbComponent.Events,
            refresh: lbComponent.refresh.bind(lbComponent),
            show: lbComponent.show.bind(lbComponent),
            hide: lbComponent.hide.bind(lbComponent),
            selectTab: lbComponent.selectTab.bind(lbComponent),
            registerCTAHandler: lbComponent.registerCTAHandler.bind(lbComponent),
            registerUIStringHandler: lbComponent.registerUIStringHandler.bind(lbComponent)
        };
    }
    exports.initalizeLeaderboards = initalizeLeaderboards;
    function getDefaultCSSObj() {
        return ZyngaLeaderboardUICSS;
    }
    exports.getDefaultCSSObj = getDefaultCSSObj;
    function getConfigPromiseFromExperiment(experimentName) {
        return new Promise(function (resolve, reject) {
            reject('Not Implemented');
        });
    }
    exports.getConfigPromiseFromExperiment = getConfigPromiseFromExperiment;
    function getDefaultConfigPromise() {
        var configs = [
            {
                leaderboardName: 'weekly---context{contextId}',
                leaderboardId: 'thisChat',
                type: 'currentContext',
                order: 'desc',
                includePlayers: {
                    includeThisContextPlayers: true,
                    includeMe: true
                }
            },
            {
                leaderboardName: 'weekly---context{contextId}',
                leaderboardId: 'allChats',
                type: 'allContexts',
                order: 'desc',
                includePlayers: {
                    includeAllContextsPlayers: true,
                    includeMe: true
                }
            },
            {
                leaderboardName: 'perm---global',
                leaderboardId: 'allFriends',
                type: 'global',
                order: 'desc',
                includePlayers: {
                    includeConnectedFriends: true,
                    includeMe: true
                }
            },
        ];
        return Promise.resolve(configs);
    }
    exports.getDefaultConfigPromise = getDefaultConfigPromise;
});



define("ZyngaLeaderboardUICSS", ["require", "exports"], function (require, exports) {
    "use strict";
    /// <amd-module name="ZyngaLeaderboardUICSS"/>
    // tslint:disable-next-line:max-line-length
    var clockBackgroundImage = 'url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22250%22%20height%3D%22250%22%3E%3Cg%20fill%3D%22%23~~COLOR~~%22%3E%3Cpath%20d%3D%22M190.78%2073.33c2.56-3.3%205.22-6.62%207.77-10.02%204.34-5.79%203.91-9.66-1.54-14.17-2.82-2.33-5.65-4.67-8.61-6.82-4.77-3.46-9.44-2.86-13.16%201.62-2.65%203.2-5%206.68-7.87%209.67a5.73%205.73%200%200%201-4.74%201.29%20196.28%20196.28%200%200%201-17.04-5.46c-1.32-.48-3.18-2.27-3.08-3.29.27-2.8-2.3-6.72%202.03-8.27%204.94-1.78%206.2-5.29%206.23-10.1.04-6.04.56-12.07-6.19-15.28h-38c-4.29%201.76-7.46%204.32-7.12%209.56.39%206.02-1.87%2012.78%206.25%2016.25%201.58.67%201.82%205.3%201.94%208.13.04%201-1.99%202.71-3.35%203.06-33.9%208.78-57.15%2029.33-69.11%2062.33-17.06%2047.06%209.19%20102.73%2056.45%20119.23%208.67%203.03%2017.94%204.35%2026.94%206.46h13c9.46-2.29%2019.38-3.46%2028.29-7.08%2032.64-13.29%2052.56-37.62%2058.67-72.43%205.38-30.66-3.9-60.41-27.76-84.68m-52.97%20137.13c-39.4%207.21-74.12-19.13-80.98-55.66-2.99-15.92-.33-31.09%207.23-45.38.9-1.7%202.25-3.15%203.39-4.72l-.16.17c7.2-12.67%2018.1-21.12%2031.32-26.56%2042.35-17.44%2088.8%209.67%2095.2%2055.01%204.81%2034.02-17.94%2070.17-56%2077.14%22%2F%3E%3Cpath%20d%3D%22M127.23%20130.81a15.8%2015.8%200%200%201-6.69-1.62%201416.6%201416.6%200%200%201-31.06-16.44c-3.72-2.02-7.02-2.53-10.12.91l.14-.15c-.54%203.72%201.14%206.27%203.98%208.57%209.33%207.57%2018.55%2015.27%2027.71%2023.04a10.9%2010.9%200%200%201%202.93%204.31c2.74%207.28%209.75%2011.31%2016.94%209.53%207.33-1.81%2011.82-8.27%2010.86-15.62-1.01-7.73-6.66-12.4-14.69-12.53%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\')';
    var leaderboardCSS = {
        '.z_lb_main': {
            position: 'absolute',
            width: '100%',
            height: '100%',
            top: '0',
            left: '0',
            color: 'rgb(0, 141, 137)',
            'font-family': 'Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif'
        },
        '.z_lb_hidden': {
            display: 'none'
        },
        '.z_lb_refreshing': {},
        '.z_lb_container': {
            position: 'absolute',
            top: '8em',
            bottom: '0',
            left: '0',
            right: '0',
            'overflow-y': 'scroll'
        },
        '.z_lb_touch_enabled .z_lb_container': {
            // Enable touch scrolling for touch devices
            '-webkit-overflow-scrolling': 'touch'
        },
        '.z_lb_touch_enabled .z_lb_container::-webkit-scrollbar': {
            // Hide scrollbar on touch devices
            display: 'none'
        },
        '.z_lb_top_spacer': {
            height: '50%'
        },
        '.z_lb_box': {
            'background-color': 'white',
            'border-radius': '1.7em',
            'min-height': '50%',
            overflow: 'hidden'
        },
        '.z_lb_box, .z_lb_play_now': {
            position: 'relative',
            '-webkit-transform': 'translate3d(0, 0, 0)',
            left: '4%',
            right: '4%',
            'margin-bottom': '4%',
            width: '92%',
            'box-shadow': '0 2px 8px 2px rgba(0,0,0,.5)'
        },
        '.z_lb_title': {
            width: '100%',
            'line-height': '1.5em',
            'padding-top': '0.25em',
            'font-size': '2.2em',
            'font-weight': 'bold',
            color: '#5A5A5A',
            'text-align': 'center'
        },
        '.z_lb_tabs': {
            display: 'table',
            'table-layout': 'fixed',
            width: '92%',
            'border-spacing': '0.25em',
            'margin-left': '4%',
            'margin-right': '4%',
            'margin-top': 0,
            'margin-bottom': '0.5em',
            height: '4em',
            'box-sizing': 'border-box',
        },
        '.z_lb_tabs_row': {
            display: 'table-row'
        },
        '.z_lb_tabs_tab': {
            display: 'table-cell',
            position: 'relative',
            '-webkit-transform': 'translate3d(0, 0, 0)',
            height: '4em',
            'white-space': 'nowrap',
            'box-sizing': 'border-box',
            'text-align': 'center',
            'font-weight': 'bold',
            border: '0.15em solid rgb(0, 141, 137)'
        },
        '.z_lb_tabs_tab.z_lb_new_to_me:before': {
            content: '""',
            position: 'absolute',
            top: '-0.35em',
            left: '0.2em',
            height: '100%',
            width: '1.75em',
            'background-position': '0 0',
            'background-size': 'contain',
            'background-repeat': 'no-repeat',
            // tslint:disable-next-line:max-line-length
            'background-image': 'url(data:image/png;base64,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)',
        },
        '.z_lb_no_new_to_me_badge .z_lb_tabs_tab.z_lb_new_to_me:before': {
            display: 'none'
        },
        '.z_lb_tabs_tab > .z_lb_tabs_tab_name_container, .z_lb_tabs_tab > .z_lb_tabs_tab_time_remaining_container': {
            position: 'absolute',
            top: '50%',
            left: '50%',
            transform: 'translate3d(-50%, -50%, 0)'
        },
        '.z_lb_tabs_tab > .z_lb_tabs_tab_time_remaining_container': {
            top: '70%',
            display: 'none'
        },
        '.z_lb_tabs_tab_name': {
            'font-size': '1.2em'
        },
        '.z_lb_tabs_tab_time_remaining': {
            'font-weight': 'normal'
        },
        '.z_lb_tabs_tab.z_lb_has_time_remaining .z_lb_tabs_tab_time_remaining_container': {
            display: 'block',
        },
        '.z_lb_tabs_tab.z_lb_has_time_remaining .z_lb_tabs_tab_name_container': {
            top: '33%'
        },
        '.z_lb_tabs_tab_time_remaining:before': {
            content: '""',
            width: '1em',
            height: '1em',
            display: 'inline-block',
            position: 'relative',
            transform: 'translate3d(-0.2em,0.1em,0) scale3d(1.2, 1.2, 1.2)',
            // tslint:disable-next-line:max-line-length
            'background-image': clockBackgroundImage.replace('~~COLOR~~', '008d89'),
            'background-size': 'contain',
            'background-repeat': 'no-repeat'
        },
        '.z_lb_tabs_tab_active .z_lb_tabs_tab_time_remaining:before': {
            'background-image': clockBackgroundImage.replace('~~COLOR~~', 'FFFFFF'),
        },
        '.z_lb_tabs_tab_active': {
            'background-color': 'rgb(0, 141, 137)',
            color: 'white'
        },
        '.z_lb_leaderbaord': {
            width: '100%',
            display: 'none',
            'box-sizing': 'border-box',
            'border-top': 'none'
        },
        '.z_lb_leaderbaord.z_lb_active': {
            display: 'block'
        },
        '.z_lb_time_remaining': {
            position: 'relative',
            '-webkit-transform': 'translate3d(0,0,0)',
            display: 'none',
            height: '2em'
        },
        '.z_lb_show_time_remaining_below_tabs .z_lb_leaderbaord.z_lb_active.z_lb_has_time_remaining > .z_lb_time_remaining': {
            display: 'block'
        },
        '.z_lb_time_remaining_label, .z_lb_time_remaining_remaining': {
            position: 'absolute',
            top: 0,
            height: '100%',
            color: 'rgb(134,134,134)',
            'font-weight': 'bold',
            display: 'inline',
            'vertical-align': 'top'
        },
        '.z_lb_time_remaining_label': {
            right: '50%',
            'text-align': 'right',
            'padding-right': '0.5em'
        },
        '.z_lb_time_remaining_remaining': {
            left: '50%',
            'text-align': 'left',
            'padding-left': '0.5em'
        },
        '.z_lb_lb_items': {
            width: '100%'
        },
        '.z_lb_lb_item': {
            position: 'relative',
            '-webkit-transform': 'translate3d(0, 0, 0)',
            width: '100%',
            display: 'block',
            color: '#5A5A5A'
        },
        '.z_lb_lb_item.z_lb_item_current_user': {
            'background-color': 'rgba(0,0,0,0.05)'
        },
        '.z_lb_lb_item.z_lb_item_zero_state .z_lb_lb_item_section_rank': {
            display: 'none'
        },
        '.z_lb_lb_item_type_player': {},
        '.z_lb_lb_item_type_zero_state': {},
        // Special invite re-formatting
        '.z_lb_lb_item.z_lb_item_invite > .z_lb_lb_item_section_name': {
            left: '5%',
            width: '70%',
            height: '100%'
        },
        '.z_lb_lb_item.z_lb_item_invite > .z_lb_lb_item_section_name > .z_lb_lb_item_wrapper': {
            top: '50%',
            bottom: 'initial',
            transform: 'translate3d(0, -50%, 0)'
        },
        '.z_lb_lb_item.z_lb_item_zero_state > .z_lb_lb_item_section_challenge  .z_lb_lb_item_challenge': {
            display: 'block'
        },
        '.z_lb_lb_item_type_group_leader': {},
        '.z_lb_lb_item_pos_0': {},
        '.z_lb_lb_item_pos_1': {},
        '.z_lb_lb_item_pos_2': {},
        '.z_lb_item_current_user': {},
        // tslint:disable-next-line:max-line-length
        '.z_lb_lb_item_section_rank, .z_lb_lb_item_section_picture, .z_lb_lb_item_section_name, .z_lb_lb_item_section_score, .z_lb_lb_item_section_cta': {
            position: 'absolute',
            top: 0,
            height: '100%'
        },
        // tslint:disable-next-line:max-line-length
        '.z_lb_lb_item_section_name, .z_lb_lb_item_section_chat_name, .z_lb_lb_item_section_score, .z_lb_lb_item_section_challenge': {
            position: 'absolute',
            left: '23%',
            right: '80%',
            top: '0',
            height: '50%',
            width: '57%',
            overflow: 'hidden',
            'white-space': 'nowrap',
            'text-overflow': 'ellipsis'
        },
        '.z_lb_lb_item_section_score, .z_lb_lb_item_section_challenge': {
            top: '50%'
        },
        '.z_lb_lb_item_wrapper': {
            position: 'absolute',
            width: '100%'
        },
        '.z_lb_lb_item_section_name > .z_lb_lb_item_wrapper, .z_lb_lb_item_section_chat_name > .z_lb_lb_item_wrapper': {
            bottom: 0
        },
        '.z_lb_lb_item_section_score > .z_lb_lb_item_wrapper, .z_lb_lb_item_section_challenge > .z_lb_lb_item_wrapper': {
            top: 0
        },
        '.z_lb_lb_item_section_rank': {
            left: '0%',
            width: '8%',
            color: 'rgb(134,134,134)',
            'font-size': '1.2em'
        },
        '.z_lb_lb_item_section_rank_value': {
            position: 'absolute',
            top: '50%',
            left: 0,
            width: '100%',
            'text-align': 'center',
            transform: 'translate3d(0, -50%, 0)',
            overflow: 'hidden',
            'white-space': 'nowrap'
        },
        '.z_lb_lb_item_section_picture': {
            left: '6%'
        },
        '.z_lb_lb_item_photo_wrapper': {
            position: 'relative',
            '-webkit-transform': 'translate3d(0, 0, 0)',
            width: '100%'
        },
        '.z_lb_lb_item_height_provider': {
            position: 'relative',
            '-webkit-transform': 'translate3d(0, 0, 0)',
        },
        '.z_lb_lb_item_section_picture, .z_lb_lb_item_height_provider': {
            width: '15%',
        },
        '.z_lb_lb_item_photo_wrapper:before, .z_lb_lb_item_height_provider:before': {
            content: '""',
            display: 'block',
            'padding-top': '100%'
        },
        '.z_lb_lb_item_photo': {
            position: 'absolute',
            top: '50%',
            left: '50%',
            width: '80%',
            height: '80%',
            'background-size': 'contain',
            transform: 'translate3d(-50%, -50%, 0)',
            'border-radius': '50%',
            'box-sizing': 'border-box'
        },
        '.z_lb_lb_item_section_name': {
            'padding-bottom': '0.2em'
        },
        '.z_lb_lb_item_name, .z_lb_lb_item_chat_name, .z_lb_lb_item_challenge, .z_lb_lb_item_score': {},
        '.z_lb_lb_item_name': {
            'font-size': '1.5em',
            'font-weight': 'bold',
            'padding-bottom': '0.2em'
        },
        '.z_lb_lb_item_chat_name': {
            display: 'none',
            'font-size': '1.25em'
        },
        '.z_lb_lb_item_section_score': {},
        '.z_lb_lb_item_score': {
            'font-size': '1.5em',
            'font-weight': 'bold',
            'padding-top': '0.2em'
        },
        '.z_lb_lb_item_challenge': {
            display: 'none',
            'font-size': '1.1em',
            'padding-top': '0.2em'
        },
        '.z_lb_lb_item_section_cta': {
            width: '20%',
            right: 0
        },
        '.z_lb_lb_item_cta': {
            'font-weight': 'bold',
            'font-size': '1.2em',
            'line-height': '1.2em',
            position: 'absolute',
            top: '50%',
            right: '1em',
            cursor: 'hand',
            transform: 'translate3d(0, -50%, 0)',
            'border-radius': '0.1em',
            color: 'rgb(0, 141, 137)',
            padding: '0.3em 1em',
            border: '0.11em solid rgb(0, 141, 137)'
        },
        '.z_lb_play_now': {
            position: 'fixed',
            left: '5%',
            right: '5%',
            width: '90%',
            bottom: '0em',
            'font-size': '1.7em',
            height: '2.2em',
            'line-height': '2.2em',
            'text-align': 'center',
            'vertical-align': 'middle',
            'border-radius': '0.6em',
            'background-color': '#4080F7',
            cursor: 'pointer',
            color: 'white'
        },
        '.z_lb_container > .z_lb_play_now': {
            display: 'none',
            position: 'relative',
            '-webkit-transform': 'translate3d(0, 0, 0)',
        },
        '.z_lb_bottom_spacer': {
            height: '5.5em'
        },
        '.z_lb_play_now_no_pin .z_lb_bottom_spacer': {
            height: 0
        },
        '.z_lb_play_now_no_pin .z_lb_main > .z_lb_play_now': {
            display: 'none' // Hide fixed playnow
        },
        '.z_lb_play_now_no_pin .z_lb_container > .z_lb_play_now': {
            display: 'block'
        }
    };
    return leaderboardCSS;
});



var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
define("ZyngaMatch", ["require", "exports", "Zynga", "ZyngaAccount", "ZyngaCore", "ZyngaInstant", "ZyngaNet"], function (require, exports, Zynga, ZyngaAccount, ZyngaCore, ZyngaInstant, ZyngaNet) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var ObjectAssign = ZyngaCore.ObjectAssign;
    var commonEntryData = null; // Common entry point data extracted from payload
    var currentInstanceId = false; // Current instance_id, from startTurnAsync();
    var lastInstanceId = false; // Last ended instance, from endTurnAsync();
    var playedInstanceData = {}; // Cached session played instance data for bots
    var lastSessionData = {}; // last data send by game to Instant.setSessionData()
    var now = new Date();
    var tzOffset = now.getTimezoneOffset();
    var locale = false;
    // wrapper keys for common  payload/session data sharing
    //  {"foo":"bar"}
    // will become:
    //  {"__c":{.. common stuff ...},"__d":{"foo":"bar"}}
    var commonKey = '__c';
    var dataKey = '__d';
    var playerId = 0;
    var sessionToken = null;
    var defaultInstanceFields = [
        'instance_state',
        'instance_summary_data',
        'instance_summary_data_cas',
        'instance_data',
        'instance_data_cas',
        'players.playertoinstance_state'
    ];
    var defaultInstancesFields = [
        'instance_state',
        'playertoinstance_state',
        'instance_summary_data'
    ];
    // find a way to import these instead of copy/pasta
    var defaultRoundFetchFields = [
        'instance_id',
        'instance_sig',
        'instance_state',
        'instance_data_cas',
        'instance_data',
        'instance_summary_data_cas',
        'instance_summary_data',
        'instance_created_at',
        'instance_last_move_played_at',
        'display_name',
        'display_picture_url',
        'zynga_player_id',
        'fbig_player_id'
    ];
    // for simplicity and code minification
    function isUndef(x) {
        return typeof x === 'undefined';
    }
    Promise.all([
        ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS),
        ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT)
    ]).then(function (allResults) {
        var details = allResults[0];
        playerId = details.playerId;
        sessionToken = details.token;
        locale = ZyngaInstant.getLocale && ZyngaInstant.getLocale() || false;
        ZyngaInstant.setSessionData(undefined); // Triggers our hook to merge game supplied data and our bot data
    });
    ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
        locale = ZyngaInstant.getLocale && ZyngaInstant.getLocale() || false;
    });
    exports.devMode = false;
    function genMatchError(code, message, details) {
        return {
            code: code || exports.ERRORS.MATCH_UNKNOWN,
            message: message || 'Unknown',
            details: details || {}
        };
    }
    // Clear out setSessionData data when context changes
    ZyngaInstant.Event.on(ZyngaInstant.Events.INSTANT_CONTEXT_ID_CHANGE, function () {
        playedInstanceData = {};
        currentInstanceId = false;
        lastInstanceId = false;
        lastSessionData = {};
        Promise.all([
            ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS),
            ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT)
        ]).then(function () {
            ZyngaInstant.setSessionData(undefined); // Triggers our hook to merge game supplied data and our bot data
        });
    }, false /*isolate*/);
    // Apply hook to pull out common data
    ZyngaInstant.zynga.registerMethodReturnHook('getEntryPointData', function (data) {
        if (data && typeof data === 'object' && data.hasOwnProperty(commonKey) && data.hasOwnProperty(dataKey)) {
            // Data is in the HOOK'd format.  Extract what we need.
            if (!commonEntryData) {
                commonEntryData = data[commonKey];
                // fire event
            }
            return data[dataKey];
        }
        return data;
    });
    function genMergedSessionData() {
        var data = {};
        var instances = [];
        var instance;
        var i;
        data[dataKey] = lastSessionData;
        data[commonKey] = {
            b: [],
            p: playerId
        };
        // Send up our session token for future use
        if (typeof sessionToken === 'string' && sessionToken.length > 0) {
            data[commonKey].s = sessionToken;
        }
        // Send up locale if we have it
        if (locale !== false) {
            data[commonKey].l = locale;
        }
        // Send up locale if we have it
        if (tzOffset >= -1440 && tzOffset <= 1440) {
            data[commonKey].tz = tzOffset;
        }
        // Create an array of completed instances
        for (i in playedInstanceData) {
            instance = playedInstanceData[i];
            if (instance.start && instance.end) {
                instances.push(instance);
            }
        }
        // Sort oldest to newest
        instances = instances.sort(function (a, b) {
            return a.end.getTime() - b.end.getTime();
        });
        // Inject instance specific data for bot
        for (i = 0; i < instances.length; i++) {
            instance = instances[i];
            data[commonKey].b.push({
                i: instance.instanceId,
                d: instance.botData // Any bot data the game passed into stopMatchAsync()
            });
        }
        // Prune data until we are under the allowable size
        while (JSON.stringify(data).length > 1000) {
            if (data[commonKey].s) {
                // First thing to remove is the session token.
                delete data[commonKey].s;
            }
            else if (data[commonKey].b.length > 0) {
                // Next is to remove each instance specific chunk of data until
                // it fits.  Oldest first.
                data[commonKey].b.shift();
            }
            else {
                // Give up, there's just too much data
                // Allow it to go out and have the FB SDK reject it.
                break;
            }
        }
        return data;
    }
    // Apply hooks to add common data to setSessionData method
    ZyngaInstant.zynga.registerMethodArgumentHook('setSessionData', function (data) {
        if (!isUndef(data)) {
            // Game called setSessionData, save it
            lastSessionData = data;
        }
        // actually set our merged session data (common and game-provided)
        // Note: registerMethodArgumentHook expects an arguments array
        return [genMergedSessionData()];
    });
    function matchCall(method, path, params, options) {
        return new Promise(function (resolve, reject) {
            var queryParams = [];
            var paramName;
            var paramValue;
            options = options || {};
            params = params || {};
            for (paramName in params) {
                paramValue = params[paramName];
                // encode and optionally turn arrays into comma separated list
                paramValue = Array.isArray(paramValue) ? paramValue.map(encodeURI).join(',') : encodeURI(paramValue);
                queryParams.push(paramName + '=' + paramValue);
            }
            queryParams = queryParams.length > 0 ? ('?' + queryParams.join('&')) : '';
            var appIdPromise = Zynga.Event.last(Zynga.Events.APP_ID);
            var accountDetailsPromise = ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS);
            Promise.all([appIdPromise, accountDetailsPromise]).then(function (results) {
                var appId = results[0];
                var accountDetails = results[1];
                if (Zynga.getApiURLBase('match').indexOf('localhost') > 0) {
                    var headers = options.headers = options.headers || {};
                    headers['App-Id'] = appId;
                    headers['Player-Id'] = accountDetails.playerId;
                    headers['Zid'] = accountDetails.zid;
                }
                options.useToken = accountDetails.token;
                ZyngaNet.api(method, Zynga.getApiURLBase('match') + path + queryParams, options).then(resolve, reject);
            });
        });
    }
    exports.matchCall = matchCall;
    /*
    function addCurrentPlayer(players, currentPlayer) {
        currentPlayer = currentPlayer && (currentPlayer + '');
    
        if (players.hasOwnProperty(currentPlayer) === false) {
            players[currentPlayer] = {
                playertoinstance_state: 'unknown'
            };
        }
        return players;
    }
    */
    exports.getEntryInstanceIdAsync = function () {
        return new Promise(function (resolve, reject) {
            var timeoutTimer = window.setTimeout(function () {
                // tslint:disable-next-line:max-line-length
                reject(new Error('Timeout (5000ms) waiting for FBInstant to initialize before calling FBInstant.context.getEntryPointData()'));
            }, 5000);
            ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT, function () {
                var instanceId = false;
                window.clearTimeout(timeoutTimer);
                // Just fire this off, side effect will be to get instance data
                ZyngaInstant.getEntryPointData();
                if (commonEntryData !== false && typeof commonEntryData === 'object' && commonEntryData.i) {
                    instanceId = commonEntryData.i;
                }
                resolve(instanceId);
            });
        });
    };
    var writeFields = [
        'instance_state',
        'instance_summary_data',
        'instance_data',
        'players'
    ];
    function prepWriteData(
        // tslint:disable-next-line:max-line-length
        data, options, enforceCAS) {
        var i;
        var key;
        var value;
        var queryOptions = {};
        data = data || {};
        return new Promise(function (resolve, reject) {
            ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
                var body = {};
                var contextId = ZyngaInstant.context.getID();
                if (!isUndef(data.players) && (typeof data.players !== 'object' || Array.isArray(data.players))) {
                    reject(genMatchError(exports.ERRORS.MATCH_INPUT_ERROR, '\'players\' must be of type \'undefined\' or \'object\''));
                    return;
                }
                // summary CAS requirements
                if (enforceCAS &&
                    (!isUndef(data.instance_summary_data) || !isUndef(data.instance_state)) &&
                    isUndef(data.instance_summary_data_cas)) {
                    reject(genMatchError(exports.ERRORS.MATCH_INPUT_ERROR, 'instance_summary_data_cas is required when updating instance_summary_data or instance_status'));
                    return;
                }
                // data CAS requirements
                if (enforceCAS && !isUndef(data.instance_data) && isUndef(data.instance_data_cas)) {
                    reject(genMatchError(exports.ERRORS.MATCH_INPUT_ERROR, 'instance_data_cas is required when updating instance_data'));
                    return;
                }
                for (i = 0; i < writeFields.length; i++) {
                    key = writeFields[i];
                    value = data[key];
                    if (!isUndef(value)) {
                        body[key] = value;
                    }
                }
                // Slap cas values on query string
                if (!isUndef(data.instance_summary_data_cas)) {
                    queryOptions.instance_summary_data_cas = data.instance_summary_data_cas;
                }
                if (!isUndef(data.instance_data_cas)) {
                    queryOptions.instance_data_cas = data.instance_data_cas;
                }
                // Add common query fbig_player_id and context_id values to query string
                queryOptions.fbig_player_id = options.fbig_player_id || ZyngaInstant.player.getID();
                if (!isUndef(options.context_id)) {
                    if (typeof (options.context_id) !== 'boolean') {
                        queryOptions.context_id = options.context_id;
                    }
                    else {
                        if (options.context_id) {
                            queryOptions.context_id = contextId;
                        }
                        else {
                            delete queryOptions.context_id;
                        }
                    }
                }
                if (options.zynga_player_id) {
                    queryOptions.zynga_player_id = playerId;
                    if (!playerId) {
                        reject(genMatchError(exports.ERRORS.MATCH_INPUT_ERROR, 'zynga_player_id asked to be sent, but is not available yet.'));
                    }
                }
                resolve({
                    body: body,
                    queryOptions: queryOptions
                });
            });
        });
    }
    exports.createMatchAsync = function (data, options) {
        options = options || {};
        return new Promise(function (resolve, reject) {
            prepWriteData(data, options, false).then(function (preparedData) {
                var body = preparedData.body;
                var queryOptions = preparedData.queryOptions;
                if (isUndef(body.instance_state)) {
                    body.instance_state = 'started'; // Needed or we get a DB NULL error
                }
                matchCall('POST', '/instance', queryOptions, { body: body }).then(function (results) {
                    var xhr = results.xhr;
                    var statusCode = xhr.status;
                    if ((statusCode >= 200 && statusCode < 300) || statusCode === 304) {
                        resolve(results); // Successful
                    }
                    else {
                        reject(genMatchError(exports.ERRORS.MATCH_SERVER_UNKNOWN, 'Server Error.', results));
                    }
                }, reject);
                // TODO: proper HTTP status code to rejection codes
            }, reject);
        });
    };
    exports.updateMatchDataAsync = function (instanceId, data, options) {
        options = options || {};
        return new Promise(function (resolve, reject) {
            prepWriteData(data, options, true).then(function (preparedData) {
                var body = preparedData.body;
                var queryOptions = preparedData.queryOptions;
                matchCall('PUT', '/instance/' + instanceId, queryOptions, { body: body })
                    .then(function (results) {
                    var xhr = results.xhr;
                    var statusCode = xhr.status;
                    if ((statusCode >= 200 && statusCode < 300) || statusCode === 304) {
                        resolve(results); // Successful
                    }
                    else if (statusCode === 404) {
                        reject(genMatchError(exports.ERRORS.MATCH_SERVER_NOT_FOUND, 'Match with instance_id \'' + instanceId + '\' not found.', results));
                    }
                    else if (statusCode === 409) {
                        reject(genMatchError(exports.ERRORS.MATCH_SERVER_CAS, 'CAS Mismatch.  Fetch again and re-apply changes', results));
                    }
                    else {
                        reject(genMatchError(exports.ERRORS.MATCH_SERVER_UNKNOWN, 'Server Error.', results));
                    }
                }, reject);
            }, reject);
        });
    };
    // tslint:disable-next-line:max-line-length
    exports.getMatchDataAsync = function (instanceId, options) {
        options = options || {};
        if (!options.fields) {
            options.fields = defaultInstanceFields;
        }
        if (options.fields === 'all') {
            delete options.fields;
        }
        return new Promise(function (resolve, reject) {
            matchCall('GET', '/instance/' + instanceId + '/', options).then(function (results) {
                var xhr = results.xhr;
                var statusCode = xhr.status;
                if ((statusCode >= 200 && statusCode < 300) || statusCode === 304) {
                    resolve(results); // Successful
                }
                else if (statusCode === 404) {
                    reject(genMatchError(exports.ERRORS.MATCH_SERVER_NOT_FOUND, 'Match with instance_id \'' + instanceId + '\' not found.', results));
                }
                else if (statusCode === 409) {
                    reject(genMatchError(exports.ERRORS.MATCH_SERVER_CAS, 'CAS Mismatch.  Fetch again and re-apply changes', results));
                }
                else {
                    reject(genMatchError(exports.ERRORS.MATCH_SERVER_UNKNOWN, 'Server Error.', results));
                }
            }, reject);
        });
    };
    exports.getMatchesAsync = function (options) {
        var queryOptions = {};
        if (isUndef(options.fields)) {
            queryOptions.fields = defaultInstancesFields;
        }
        else if (options.fields !== 'all') {
            queryOptions.fields = options.fields;
        }
        if (options.context_id) {
            if (typeof (options.context_id) === 'boolean') {
                Promise.reject(genMatchError(exports.ERRORS.MATCH_INPUT_ERROR, 'obsolete usage. please use "use_context_id". or specify the context_id you want as a string.'));
            }
            else {
                queryOptions.context_id = options.context_id;
            }
        }
        if (options.use_context_id) {
            var contextId = ZyngaInstant.context.getID();
            if (contextId) {
                queryOptions.context_id = contextId;
            }
            else {
                Promise.reject(genMatchError(exports.ERRORS.MATCH_INPUT_ERROR, 'context_id asked to be send, but it is not available. Are you in "SOLO" mode? '));
            }
        }
        if (options.use_zynga_player_id) {
            queryOptions.zynga_player_id = playerId;
            if (!playerId) {
                Promise.reject(genMatchError(exports.ERRORS.MATCH_INPUT_ERROR, 'zynga_player_id asked to be sent, but is not available yet.'));
            }
        }
        if (options.instance_state_in) {
            queryOptions.instance_state_in = options.instance_state_in;
        }
        if (!queryOptions.zynga_player_id && !queryOptions.context_id) {
            Promise.reject(genMatchError(exports.ERRORS.MATCH_INPUT_ERROR, 'zynga_player_id or context_id must be set. Do you want us to get you all the matches? For everyone?'));
        }
        return new Promise(function (resolve, reject) {
            matchCall('GET', '/instances/', queryOptions).then(function (results) {
                var xhr = results.xhr;
                var statusCode = xhr.status;
                if ((statusCode >= 200 && statusCode < 300) || statusCode === 304) {
                    resolve(results); // Successful
                }
                else if (statusCode === 404) {
                    reject(genMatchError(exports.ERRORS.MATCH_SERVER_NOT_FOUND, 'No matches found.', results));
                }
                else {
                    reject(genMatchError(exports.ERRORS.MATCH_SERVER_UNKNOWN, 'Server Error.', results));
                }
            }, reject);
        });
    };
    exports.sendMatchAction = function (instanceId, cmd, options) {
        return matchCall('PATCH', '/instance/' + instanceId, options, { body: cmd });
    };
    exports.customMatchCall = matchCall;
    exports.startTurnAsync = function (instanceId) {
        return new Promise(function (resolve, reject) {
            if (currentInstanceId !== false) {
                reject(new Error('Already have a started match.  End existing match first'));
            }
            else {
                currentInstanceId = instanceId;
                playedInstanceData[instanceId] = {
                    instanceId: instanceId,
                    start: new Date()
                };
                // TODO: ztrack start game session
                resolve();
            }
        });
    };
    exports.endTurnAsync = function (botData) {
        // TODO: Maybe pass in base64 encoded image data for different images
        //       and let this function upload them somewhere the bot can access.
        return new Promise(function (resolve, reject) {
            ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
                var currentMatchData;
                if (currentInstanceId === false) {
                    reject(new Error('No match started'));
                }
                else {
                    currentMatchData = playedInstanceData[currentInstanceId];
                    if (currentMatchData) {
                        currentMatchData.end = new Date();
                        currentMatchData.instanceId = currentInstanceId;
                        if (botData) {
                            currentMatchData.botData = botData;
                        }
                        lastInstanceId = currentInstanceId; // Used by updateAsync to share details for just this instance
                        currentInstanceId = false;
                        ZyngaInstant.setSessionData(undefined); // Triggers our hook to merge game supplied data and our bot data
                        // TODO: Log session end to ztrack
                        resolve();
                    }
                }
            });
        });
    };
    function indexRoundsFetch(response) {
        // index members directly into the instance data for easy access.
        var linkedInstances = {};
        for (var _i = 0, _a = response.instancestoplayers; _i < _a.length; _i++) {
            var instanceToPlayer = _a[_i];
            // denormalize the friend data and the instance-to-friend data as a subrecord of the instance.
            var linkedFriend = response.members[instanceToPlayer.zynga_player_id];
            var zyngaPlayerId = instanceToPlayer.zynga_player_id;
            var linkedInstance = response.instances[instanceToPlayer.instance_id];
            if (linkedInstance) {
                linkedInstance.members = linkedInstance.members || {};
                var friendRecord = linkedInstance.members[zyngaPlayerId];
                linkedInstance.members[zyngaPlayerId] = ObjectAssign({}, friendRecord, instanceToPlayer, linkedFriend);
                linkedInstances[linkedInstance.instance_id] = linkedInstance;
            }
        }
        // todo: index contexts?
        for (var contextId in response.contexts) {
            for (var _b = 0, _c = response.contexts[contextId]; _b < _c.length; _b++) {
                var instanceId = _c[_b];
                var linkedInstance = linkedInstances[instanceId];
                var contextIds = linkedInstance.context_ids = linkedInstance.context_ids || [];
                contextIds.push(contextId);
                linkedInstance.context_id = contextId;
            }
        }
        return __assign({}, response, { instances: linkedInstances });
    }
    function getRoundsDataAsync(options) {
        return ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
            var queryOptions = {};
            queryOptions.fields = options.fields || defaultRoundFetchFields;
            var contextId = ZyngaInstant.context.getID();
            if (contextId) {
                queryOptions.context_id = contextId;
            }
            queryOptions.zynga_player_id = playerId;
            if (options.instance_state_in) {
                queryOptions.instance_state_in = options.instance_state_in;
            }
            if (options.last_query_time) {
                queryOptions.changed_since = options.last_query_time;
            }
            if (!isUndef(options.search_context_history)) {
                queryOptions.search_context_history = options.search_context_history; // check default.
            }
            return matchCall('GET', '/rounds', queryOptions).then(function (results) {
                var xhr = results.xhr;
                var statusCode = xhr.status;
                if ((statusCode >= 200 && statusCode < 300) || statusCode === 304) {
                    return Promise.resolve(indexRoundsFetch(results.body)); // Successful
                }
                else {
                    return Promise.reject(genMatchError(exports.ERRORS.MATCH_SERVER_UNKNOWN, 'Server Error.', results));
                }
            });
        });
    }
    exports.getRoundsDataAsync = getRoundsDataAsync;
    exports.getCurrentMatchId = function () {
        return currentInstanceId;
    };
    exports.getPreviousMatchId = function () {
        return lastInstanceId;
    };
    exports.ERRORS = {
        MATCH_INPUT_ERROR: 'MATCH_INPUT_ERROR',
        MATCH_SERVER_NOT_FOUND: 'MATCH_NOT_FOUND',
        MATCH_SERVER_CAS: 'MATCH_SERVER_CAS',
        MATCH_SERVER_UNKNOWN: 'MATCH_SERVER_UNKNOWN',
        MATCH_UNKNOWN: 'MATCH_UNKNOWN' // Encountered a general error
        // TODO:  Add more known errors?
    };
    exports.MATCH_STATE = {
        STARTED: 'started',
        IN_PROGRESS: 'in_progress',
        COMPLETED: 'completed',
        EXPIRED: 'expired',
        CAN_JOIN: 'can_join'
    };
    exports.PLAYER_STATE = {
        CAN_PLAY: 'can_play',
        WAITING: 'waiting',
        UNKNOWN: 'unknown'
    };
});



define("ZyngaMedia", ["require", "exports", "Zynga", "ZyngaAccount", "ZyngaCore", "ZyngaMd5", "ZyngaNet"], function (require, exports, Zynga, ZyngaAccount, ZyngaCore, ZyngaMd5, ZyngaNet) {
    // tslint:disable-next-line:comment-format
    ///<amd-module name="ZyngaMedia"/>
    /* global Uint8Array */
    'use strict';
    Object.defineProperty(exports, "__esModule", { value: true });
    // for simplicity and code minification
    function isUndef(x) {
        return typeof x === 'undefined';
    }
    function mediaCall(method, path, params, options) {
        return new Promise(function (resolve, reject) {
            var queryParams = [];
            var queryParamsString = '';
            var paramName;
            var paramValue;
            options = options || {};
            params = params || {};
            for (paramName in params) {
                paramValue = params[paramName];
                // encode and optionally turn arrays into comma separated list
                paramValue = Array.isArray(paramValue) ? paramValue.map(encodeURI).join(',') : encodeURI(paramValue);
                queryParams.push(paramName + '=' + paramValue);
            }
            queryParamsString = queryParams.length > 0 ? ('?' + queryParams.join('&')) : '';
            Promise.all([
                Zynga.Event.last(Zynga.Events.APP_ID),
                ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS)
            ]).then(function (results) {
                var appId = results[0];
                var accountDetails = results[1];
                if (Zynga.getApiURLBase('media').indexOf('localhost') > 0) {
                    var headers = options.headers = options.headers || {};
                    headers['App-Id'] = appId;
                    headers['Player-Id'] = accountDetails.playerId;
                    headers['Zid'] = accountDetails.zid;
                }
                options.useToken = accountDetails.token;
                ZyngaNet.api(method, Zynga.getApiURLBase('media') + path + queryParamsString, options).then(resolve, reject);
            });
        });
    }
    function queueMediaUpload(imageDataURI, instanceId) {
        return new Promise(function (resolve) {
            Zynga.Event.last(Zynga.Events.APP_ID, function (gameId) {
                var parts;
                var imgData;
                var binaryData;
                var contentType;
                var md5Checksum;
                var uploadStartTime = new Date().getTime();
                var queryParams = {};
                if (instanceId) {
                    queryParams.instance_id = instanceId;
                }
                parts = imageDataURI.split(',');
                imgData = atob(parts[1]);
                contentType = parts[0].split(':')[1].split(';')[0];
                // Convert to binary data
                binaryData = new Uint8Array(imgData.length);
                for (var i = 0; i < imgData.length; i++) {
                    binaryData[i] = imgData.charCodeAt(i);
                }
                // NOTE: if you are going to override this with your own md5,
                // the zynga version will handling converting of Uint8Array.
                md5Checksum = ZyngaMd5(binaryData);
                mediaCall('POST', '/' + md5Checksum, queryParams, { body: binaryData, headers: { 'Content-Type': contentType } }).then(function (result) {
                    var data = {
                        url: result && result.body && result.body.url,
                        md5: md5Checksum,
                        contentType: contentType,
                        contentLength: binaryData.length,
                        uploadMS: new Date().getTime() - uploadStartTime
                    };
                    // Fire general upload event
                    exports.Event.fire(exports.Events.UPLOAD_COMPLETE, data);
                    // Fire specific upload event for THIS asset
                    exports.Event.fire(md5Checksum, data);
                }, function (error) {
                    exports.Event.fire(exports.Events.UPLOAD_ERROR, error);
                });
                // Resolve ASAP to give the caller the MD5 checksum and probably cdnURL
                resolve({
                    md5: md5Checksum,
                    contentType: contentType,
                    cdnUrl: '//gameservices.cdn.zynga.com/media/' + gameId + '/' + md5Checksum
                });
            });
        });
    }
    exports.queueMediaUpload = queueMediaUpload;
    exports.Event = new ZyngaCore.EventMixin();
    exports.Events = {
        UPLOAD_COMPLETE: 'Media.UploadComplete',
        UPLOAD_ERROR: 'Media.UploadError'
    };
});



define("ZyngaNet", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var tokens = {};
    var defaultSocialNetworkId;
    var refreshTokenHandler = function (token, callback) {
        callback(false);
    };
    function normalizeHeaders(headersObject) {
        var headerName;
        var newName;
        var newHeaders = {};
        for (headerName in headersObject) {
            if (headersObject.hasOwnProperty(headerName)) {
                newName = headerName
                    .split('-')
                    .map(function (part) {
                    return part && part.length ? part[0].toUpperCase() + part.slice(1) : part;
                })
                    .join('-');
                newHeaders[newName] = headersObject[headerName];
            }
        }
        return newHeaders;
    }
    exports.setDefaultToken = function (socialNetworkId) {
        defaultSocialNetworkId = socialNetworkId;
    };
    exports.registerRefreshTokenHandler = function (handler) {
        if (typeof handler === 'function') {
            refreshTokenHandler = handler;
        }
    };
    exports.apiBaseURL = 'https://api.zynga.com';
    exports.setSocialNetworkToken = function (socialNetworkId, token, makeDefault) {
        tokens[socialNetworkId] = token;
        if (makeDefault || defaultSocialNetworkId === undefined) {
            defaultSocialNetworkId = socialNetworkId;
        }
    };
    function api(method, url, options) {
        return new Promise(function (resolve, reject) {
            var apiURL = exports.apiBaseURL.toLowerCase();
            var xhr = new XMLHttpRequest();
            var authToken = tokens[defaultSocialNetworkId] || false;
            var headerName;
            var headers;
            var body;
            var xhrPreSendCallback = null;
            options = typeof options === 'object' ? options : {};
            if (typeof options.beforeSend === 'function') {
                xhrPreSendCallback = options.beforeSend;
            }
            if (options.useToken) {
                // Explicitly told to use this token
                authToken = options.useToken;
            }
            body = options.body;
            headers = normalizeHeaders(options.headers || {});
            if (url.toLowerCase().indexOf('http') === 0 || url.indexOf('//') === 0 || options.noAPI === true) {
                // Caller has specified host as well or it's not an API call.  Use the supplied url as-si.
                apiURL = url;
            }
            else {
                // Relative URL.  Build up an absolute one.
                apiURL = apiURL + ('/' + url).replace(/\/\/+/g, '/');
            }
            // Add default authorization header if one was not provided
            if (!headers.Authorization && authToken && options.noAuth !== true) {
                headers.Authorization = 'token ' + authToken;
            }
            xhr.open(method, apiURL);
            // JSON stringify so long as we are dealing with a real object or array.
            // Skip if Typed Array like Uint8Array, etc... since that means send as binary
            if (typeof body === 'object' && (typeof ArrayBuffer === 'undefined' || (ArrayBuffer && !ArrayBuffer.isView(body)))) {
                try {
                    body = JSON.stringify(body);
                    if (!headers.hasOwnProperty('Content-Type')) {
                        headers['Content-Type'] = 'application/json';
                    }
                }
                catch (e) {
                    reject(new Error('Failed to JSON.stringigy() body'));
                    return;
                }
            }
            // Add request headers
            for (headerName in headers) {
                if (headers.hasOwnProperty(headerName)) {
                    xhr.setRequestHeader(headerName, headers[headerName]);
                }
            }
            // Allow caller to make XHR changes if they like
            if (xhrPreSendCallback) {
                xhrPreSendCallback(xhr);
            }
            xhr.addEventListener('load', function () {
                var parsedBody;
                var contentType = xhr.getResponseHeader('Content-Type');
                var errorCategory = (xhr.getResponseHeader('Error-Category') || '').toString().toLowerCase();
                var attempts = options.attempts || 0;
                if (xhr && xhr.status === 403 &&
                    typeof errorCategory === 'string' &&
                    errorCategory !== '' &&
                    authToken &&
                    attempts === 0) {
                    if (errorCategory === 'pbr.auth.signatureinvalid' ||
                        errorCategory === 'pbr.auth.malformedauth' ||
                        errorCategory === 'pbr.auth.Expired') {
                        // Try to re-auth
                        refreshTokenHandler(authToken, function (newToken) {
                            if (newToken) {
                                // w00t, got a new one
                                // Resend the request with the new token
                                options.useToken = newToken;
                                options.attempts = attempts + 1;
                                if (tokens[defaultSocialNetworkId] === authToken) {
                                    // Set the default token to the new one so long as the old one was set
                                    tokens[defaultSocialNetworkId] = newToken;
                                }
                                api(method, url, options).then(resolve, reject);
                            }
                            else {
                                resolve({ body: body, xhr: xhr });
                            }
                        });
                        return;
                    }
                }
                // Look for STARTING with application/json.  Some silly services add "; charset=utf-8" on the end.
                // I'm looking at YOU optimize service
                if (contentType && contentType.toLowerCase().indexOf('application/json') === 0) {
                    try {
                        parsedBody = JSON.parse(xhr.responseText);
                    }
                    catch (e) {
                        reject(new Error('Failed to JSON.parse() response body'));
                        return;
                    }
                    resolve({ body: parsedBody, xhr: xhr });
                }
                else {
                    // todo: fail here?
                    resolve({ body: xhr.responseText, xhr: xhr });
                }
            });
            xhr.addEventListener('error', reject);
            xhr.addEventListener('abort', reject);
            xhr.send(body);
        });
    }
    exports.api = api;
});



var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
define("ZyngaOptimize", ["require", "exports", "Zynga", "ZyngaAccount", "ZyngaAnalytics", "ZyngaCore", "ZyngaNet"], function (require, exports, Zynga, ZyngaAccount, ZyngaAnalytics, ZyngaCore, ZyngaNet) {
    // tslint:disable-next-line:comment-format
    ///<amd-module name="ZyngaOptimize"/>
    'use strict';
    Object.defineProperty(exports, "__esModule", { value: true });
    var environment = 'production';
    exports.Experiments = new ZyngaCore.EventMixin();
    exports.ENVIRONMENTS = {
        PRODUCTION: 'production',
        STAGING: 'staging',
        DEVELOPMENT: 'development'
    };
    var experimentOverrides = {};
    function setEnvironment(env) {
        switch (env) {
            case exports.ENVIRONMENTS.PRODUCTION:
            case exports.ENVIRONMENTS.STAGING:
            case exports.ENVIRONMENTS.DEVELOPMENT:
                environment = env;
                break;
            default:
                throw Error('Invalid eos environment: ' + env);
        }
    }
    exports.setEnvironment = setEnvironment;
    function clearFakeExperimentData() {
        experimentOverrides = {};
    }
    exports.clearFakeExperimentData = clearFakeExperimentData;
    function setFakeExperimentData(overrideExperimentData) {
        experimentOverrides = overrideExperimentData;
    }
    exports.setFakeExperimentData = setFakeExperimentData;
    function readFileSync(filePath, ignored) {
        var xhr = new XMLHttpRequest();
        var result;
        var error;
        xhr.open('GET', filePath, false);
        xhr.onload = function (e) {
            if (xhr.readyState === 4) {
                if (xhr.status === 200) {
                    result = xhr.responseText;
                }
                else {
                    error = new Error(xhr.statusText);
                }
            }
        };
        xhr.onerror = function (e) {
            error = new Error(xhr.statusText);
        };
        xhr.send(null);
        if (error) {
            throw error;
        }
        return result;
    }
    function fetchFile(filePath) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2 /*return*/, new Promise(function (resolve, reject) {
                        var xhr = new XMLHttpRequest();
                        var result;
                        var error;
                        xhr.open('GET', filePath, true);
                        xhr.onload = function (e) {
                            if (xhr.readyState === 4) {
                                if (xhr.status === 200) {
                                    resolve(xhr.responseText);
                                }
                                else {
                                    reject(xhr.statusText);
                                }
                            }
                        };
                        xhr.onerror = function (e) {
                            reject(xhr.statusText);
                        };
                        xhr.send(null);
                    })];
            });
        });
    }
    // loads the experiment names as [name].json in rootPath.
    // optional: pass in name.variant to get a specific variant.
    function loadFakeExperimentData(rootPath, experimentNames) {
        if (experimentNames.length > 0) {
            for (var _i = 0, experimentNames_1 = experimentNames; _i < experimentNames_1.length; _i++) {
                var experimentNameAndVariant = experimentNames_1[_i];
                var _a = experimentNameAndVariant.split('.'), experimentName = _a[0], experimentVariant = _a[1];
                var filePath = rootPath + "/" + experimentNameAndVariant + ".json";
                var experimentStr = readFileSync(filePath, 'utf8');
                var experimentData = JSON.parse(experimentStr);
                if (!experimentOverrides) {
                    experimentOverrides = {};
                }
                // fix up all keys
                // experimentData = fix_up_experiment_data(experimentData);
                experimentOverrides[experimentName] = experimentData;
            }
        }
    }
    exports.loadFakeExperimentData = loadFakeExperimentData;
    // optional: pass in name.variant to get a specific variant.
    function asyncLoadFakeExperimentData(rootPath, experimentNames) {
        return __awaiter(this, void 0, void 0, function () {
            var promises;
            return __generator(this, function (_a) {
                if (experimentNames.length > 0) {
                    promises = experimentNames.map(function (experimentNameAndVariant, idx, arr) {
                        var _a = experimentNameAndVariant.split('.'), experimentName = _a[0], experimentVariant = _a[1];
                        var filePath = rootPath + "/" + experimentNameAndVariant + ".json";
                        var response = fetchFile(filePath).then(function (experimentStr) {
                            var experimentData = JSON.parse(experimentStr);
                            if (!experimentOverrides) {
                                experimentOverrides = {};
                            }
                            // fix up all keys
                            // experimentData = fix_up_experiment_data(experimentData);
                            experimentOverrides[experimentName] = experimentData;
                        }).catch(function (fail) {
                            // tslint:disable-next-line:no-console
                            console.log('local experiment not found: ' + filePath);
                            return Promise.resolve(null);
                        });
                        return response;
                    });
                    return [2 /*return*/, Promise.all(promises)];
                }
                return [2 /*return*/];
            });
        });
    }
    exports.asyncLoadFakeExperimentData = asyncLoadFakeExperimentData;
    function fetchOptimizeAssignments(names, attributes) {
        var experiments;
        environment = environment || 'production';
        if (typeof names !== 'object' || !names.length) {
            names = [names];
        }
        // The real fetch list after we check our overrides.
        // If we have overrides for everything then we won't fetch anything from eos
        var realFetchList = [];
        for (var n = 0, nc = names.length; n < nc; n++) {
            var name = names[n];
            if (!experimentOverrides[name]) {
                realFetchList.push(name);
            }
        }
        if (!realFetchList.length) {
            // just resolve with local experiment overrides
            experiments = {};
            for (var n = 0, nc = names.length; n < nc; n++) {
                var name = names[n];
                experiments[name] = experimentOverrides[name];
                exports.Experiments.fire(name, experiments[name]);
            }
            return Promise.resolve(experiments);
        }
        else {
            // need to fetch from eos
            experiments = realFetchList.map(function (expName) {
                return {
                    experiment: expName
                };
            });
            attributes = attributes || {};
            return new Promise(function (resolve, reject) {
                var accountPromise = ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS);
                var appIdPromise = Zynga.Event.last(Zynga.Events.APP_ID);
                var clientIdPromise = ZyngaAnalytics.Event.last(ZyngaAnalytics.Events.CLIENT_ID);
                Promise.all([accountPromise, appIdPromise, clientIdPromise]).then(function (results) {
                    var anonAccountDetails = results[0] || {};
                    var appId = results[1];
                    var clientId = results[2];
                    ZyngaNet.api('POST', '/optimize/v3/assignments', {
                        useToken: anonAccountDetails.token,
                        body: {
                            appId: appId,
                            clientId: clientId,
                            zid: anonAccountDetails.zid,
                            environment: environment,
                            assignments: experiments,
                            attributes: attributes
                        }
                    }).then(function (response) {
                        var body = response.body || {};
                        var data = body && body.data;
                        var experiment;
                        var expName;
                        var varName;
                        var varValue;
                        var returnedExperiments = {};
                        var expCount = data && data.length || 0;
                        var i;
                        if (response.xhr.status === 200) {
                            // fill returned array with known overrides
                            for (var eo = 0, ec = names.length; eo < ec; eo++) {
                                expName = names[eo];
                                if (experimentOverrides[expName]) {
                                    returnedExperiments[expName] = experimentOverrides[expName];
                                }
                            }
                            for (i = 0; i < expCount; i++) {
                                experiment = data[i];
                                expName = experiment.experiment;
                                // do not fill with values that are already overriden
                                if (!experimentOverrides[expName]) {
                                    if (!experiment.error) {
                                        // So long as there were not errors add it to the list
                                        returnedExperiments[expName] = experiment;
                                    }
                                    if (experiment.variables) {
                                        for (varName in experiment.variables) {
                                            if (experiment.variables.hasOwnProperty(varName)) {
                                                varValue = experiment.variables[varName];
                                                // Optimize send sends JSON encoded as a string which is dumb.
                                                // Do some basic detection to see if it look like it might be an object or array
                                                if (typeof varValue === 'string' && (varValue.indexOf('{') === 0 || varValue.indexOf('[') === 0)) {
                                                    try {
                                                        experiment.variables[varName] = JSON.parse(varValue);
                                                        // tslint:disable-next-line:no-empty
                                                    }
                                                    catch (e) { }
                                                }
                                            }
                                        }
                                    }
                                }
                                // Fire experiment specific event
                                exports.Experiments.fire(expName, experiment);
                            }
                            resolve(returnedExperiments);
                        }
                        else {
                            reject({
                                error: new Error('Assignmen call failed'),
                                xhr: response.xhr
                            });
                        }
                    }, reject);
                });
            });
        }
    }
    exports.fetchOptimizeAssignments = fetchOptimizeAssignments;
});



define("ZyngaProfile", ["require", "exports", "Zynga", "ZyngaAccount", "ZyngaCore", "ZyngaInstant", "ZyngaNet"], function (require, exports, Zynga, ZyngaAccount, ZyngaCore, ZyngaInstant, ZyngaNet) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Event = new ZyngaCore.EventMixin();
    exports.Events = {
        PROFILE_AUTOUPLOAD: 'Profile.autoUpload' // Process for autouploading the profile has completed.
    };
    exports.ERRORS = {
        INPUT_ERROR: 'PROFILE_INPUT_ERROR',
        SERVER_NOT_FOUND: 'PROFILE_NOT_FOUND',
        SERVER_CAS: 'PROFILE_SERVER_CAS',
        SERVER_UNKNOWN: 'PROFILE_SERVER_UNKNOWN',
        UNKNOWN: 'PROFILE_UNKNOWN' // Encountered a general error
    };
    // cahced profile vars for managing profile data
    exports.lastProfileDataCache = {};
    exports.lastProfileDataCas = 0;
    // for simplicity and code minification
    function isUndef(x) {
        return typeof x === 'undefined';
    }
    function genProfileError(code, message, details) {
        return {
            code: code || exports.ERRORS.UNKNOWN,
            message: message || 'Unknown',
            details: details || {}
        };
    }
    function profileCall(method, path, params, options) {
        return new Promise(function (resolve, reject) {
            var queryParams = [];
            var paramName;
            var paramValue;
            options = options || {};
            params = params || {};
            Promise.all([
                Zynga.Event.last(Zynga.Events.APP_ID),
                ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS)
            ]).then(function (results) {
                var appId = results[0];
                var accountDetails = results[1];
                // as of v1.1, call requires this.
                if (params.use_zynga_player_id && !params.zynga_player_id) {
                    delete params.use_zynga_player_id;
                    params.zynga_player_id = accountDetails.playerId;
                }
                for (paramName in params) {
                    paramValue = params[paramName];
                    // encode and optionally turn arrays into comma separated list
                    paramValue = Array.isArray(paramValue) ? paramValue.map(encodeURI).join(',') : encodeURI(paramValue);
                    queryParams.push(paramName + '=' + paramValue);
                }
                var queryString = queryParams.length > 0 ? ('?' + queryParams.join('&')) : '';
                if (Zynga.getApiURLBase().indexOf('localhost') > 0) {
                    var headers = options.headers = options.headers || {};
                    headers['App-Id'] = appId;
                    headers['Player-Id'] = accountDetails.playerId;
                    headers['Zid'] = accountDetails.zid;
                }
                options.useToken = accountDetails.token;
                ZyngaNet.api(method, Zynga.getApiURLBase() + path + queryString, options).then(resolve, reject);
            });
        });
    }
    exports.profileCall = profileCall;
    function getProfileData(ids, isZyngaIds, fields, maxCacheAge) {
        var path = isZyngaIds ? '/fbig-mapping/zynga_player_ids' : '/fbig-mapping/fbig_player_ids';
        fields = fields || [
            'fbig_player_id',
            'zynga_player_id',
            'display_name',
            'display_picture_url',
            'profile_data',
            'profile_data_cas'
        ];
        // TODO: Cache mapping, name and pic.
        //       If profile_data is not asked for AND all users
        //       can be satisfied from cache then skip talking to the server
        //       #futureoptimization
        if (!Array.isArray(ids)) {
            return Promise.reject(genProfileError(exports.ERRORS.INPUT_ERROR, '\'ids\' must be an array'));
        }
        if (!Array.isArray(fields)) {
            return Promise.reject(genProfileError(exports.ERRORS.INPUT_ERROR, '\'fields\' must be an array'));
        }
        if (ids.length === 0) {
            // skip doing the request. this is a null op.
            return Promise.resolve({
                body: {
                    profiles: []
                },
                xhr: null,
                indexes: {
                    zynga: {},
                    facebook: {}
                },
            });
        }
        for (var k = 0; k < ids.length; ++k) {
            if (!ids[k]) {
                // tslint:disable-next-line:max-line-length
                Promise.reject(genProfileError(exports.ERRORS.INPUT_ERROR, "getProfileData: 'ids' index at " + k + " is invalid. " + JSON.stringify(ids)));
            }
        }
        return profileCall('GET', path, { ids: ids, fields: fields })
            .then(function (profileResponse) {
            var results = profileResponse;
            var i;
            var profile;
            var currentId;
            var xhr = results.xhr;
            var statusCode = xhr.status;
            var indexes = {
                zynga: {},
                facebook: {}
            };
            var currentIndex = isZyngaIds ? indexes.zynga : indexes.facebook;
            if ((statusCode >= 200 && statusCode < 300) || statusCode === 304) {
                for (i = 0; i < results.body.profiles.length; i++) {
                    profile = results.body.profiles[i];
                    if (profile.fbig_player_id) {
                        indexes.facebook[profile.fbig_player_id + ''] = profile;
                    }
                    if (profile.zynga_player_id) {
                        indexes.zynga[profile.zynga_player_id + ''] = profile;
                    }
                }
                results.indexes = indexes;
                for (i = 0; i < ids.length; i++) {
                    currentId = ids[i] + '';
                    currentIndex[currentId] = currentIndex[currentId] || false;
                }
                return results;
            }
            else {
                throw genProfileError(exports.ERRORS.SERVER_UNKNOWN, 'Server Error.', results);
            }
        });
    }
    function getProfilesByZyngaIdAsync(ids, fields, maxCacheAge) {
        return getProfileData(ids, true, fields, maxCacheAge);
    }
    exports.getProfilesByZyngaIdAsync = getProfilesByZyngaIdAsync;
    function getProfilesByFacebookIdAsync(ids, fields, maxCacheAge) {
        return getProfileData(ids, false, fields, maxCacheAge);
    }
    exports.getProfilesByFacebookIdAsync = getProfilesByFacebookIdAsync;
    function getConnectedPlayerProfilesAsync(fields, maxCacheAge) {
        return new Promise(function (resolve, reject) {
            ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT).then(function () {
                ZyngaInstant.player.getConnectedPlayersAsync().then(function (players) {
                    var fbigIds = [];
                    for (var _i = 0, players_1 = players; _i < players_1.length; _i++) {
                        var player = players_1[_i];
                        fbigIds.push(player.getID());
                    }
                    // Fetch profile data
                    getProfilesByFacebookIdAsync(fbigIds, fields, maxCacheAge).then(resolve, reject);
                }, reject);
            });
        });
    }
    exports.getConnectedPlayerProfilesAsync = getConnectedPlayerProfilesAsync;
    // tslint:disable-next-line:max-line-length
    function getProfileDataAsync(fields) {
        fields = fields || ['profile_data', 'profile_data_cas'];
        return new Promise(function (resolve, reject) {
            profileCall('GET', '/profile', { fields: fields, use_zynga_player_id: true })
                .then(function (results) {
                var xhr = results.xhr;
                var statusCode = xhr.status;
                if ((statusCode >= 200 && statusCode < 300) || statusCode === 304) {
                    exports.lastProfileDataCas = results.body.profile.profile_data_cas;
                    exports.lastProfileDataCache = results.body.profile.profile_data || {};
                    resolve(results); // Successful
                }
                else if (statusCode === 404) {
                    reject(genProfileError(exports.ERRORS.SERVER_NOT_FOUND, 'Profile data not found.  User may not have been created yet', results));
                }
                else {
                    reject(genProfileError(exports.ERRORS.SERVER_UNKNOWN, 'Server Error.', results));
                }
            }, reject);
        });
    }
    exports.getProfileDataAsync = getProfileDataAsync;
    // tslint:disable-next-line:max-line-length
    function updateProfileDataAsync(data, dataCAS, options) {
        return new Promise(function (resolve, reject) {
            var body = {
                profile_data: data,
                profile_data_cas: dataCAS
            };
            options = options || {};
            if (!dataCAS) {
                delete body.profile_data_cas;
            }
            options.body = body;
            profileCall('PUT', '/profile', { use_zynga_player_id: true }, options)
                .then(function (results) {
                var xhr = results.xhr;
                var statusCode = xhr.status;
                if ((statusCode >= 200 && statusCode < 300) || statusCode === 304) {
                    exports.lastProfileDataCache = data || {};
                    exports.lastProfileDataCas = results.body.profile_data_cas;
                    resolve(results); // Successful
                }
                else if (statusCode === 409) {
                    reject(genProfileError(exports.ERRORS.SERVER_CAS, 'CAS Mismatch.  Fetch again and re-apply changes', results));
                }
                else {
                    reject(genProfileError(exports.ERRORS.SERVER_UNKNOWN, 'Server Error.', results));
                }
            }, reject);
        });
    }
    exports.updateProfileDataAsync = updateProfileDataAsync;
    function updateMediaUrlAsync(url) {
        return new Promise(function (resolve, reject) {
            ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_INITIALIZED, function () {
                var queryParams = {
                    fbig_player_id: ZyngaInstant.player.getID(),
                    use_zynga_player_id: true,
                };
                profileCall('PUT', '/profile', queryParams, { body: { profile_media_url: url } })
                    .then(function (results) {
                    var xhr = results.xhr;
                    var statusCode = xhr.status;
                    if ((statusCode >= 200 && statusCode < 300) || statusCode === 304) {
                        resolve(results); // Successful
                    }
                    else {
                        reject(genProfileError(exports.ERRORS.SERVER_UNKNOWN, 'Server Error.', results));
                    }
                }, reject);
            });
        });
    }
    exports.updateMediaUrlAsync = updateMediaUrlAsync;
    ZyngaInstant.Event.last(ZyngaInstant.Events.INSTANT_FB_TOS_ACCEPT, function () {
        ZyngaInstant.player.getConnectedPlayersAsync().then(function (connectedPlayers) {
            var i;
            var cachedProfileKey = '__profileCache_' + ZyngaInstant.player.getID();
            var cachedProfileString = window.localStorage.getItem(cachedProfileKey);
            var cachedProfileData;
            var profileData = {
                display_name: ZyngaInstant.player.getName(),
                display_picture_url: ZyngaInstant.player.getPhoto(),
                profile_connected_fbig_player_ids: []
            };
            var queryParams = {
                fbig_player_id: ZyngaInstant.player.getID(),
                use_zynga_player_id: true,
            };
            var wasCached = false;
            // Get connected friend IDs into a sorted array
            if (Array.isArray(connectedPlayers)) {
                for (i = 0; i < connectedPlayers.length; i++) {
                    profileData.profile_connected_fbig_player_ids.push(connectedPlayers[i].getID() + '');
                }
            }
            profileData.profile_connected_fbig_player_ids.sort();
            // Try to un-serialize the cached (last written) friends list
            try {
                cachedProfileData = JSON.parse(cachedProfileString);
                wasCached = !!cachedProfileData;
            }
            catch (e) {
                // Something seriously wrong with the cache, use the default
            }
            // Set default value for cached profile data if we didn't find anything or failed to parse it
            cachedProfileData = cachedProfileData || {
                display_name: '',
                display_picture_url: '',
                profile_connected_fbig_player_ids: []
            };
            if (profileData.display_name !== cachedProfileData.display_name ||
                profileData.display_picture_url !== cachedProfileData.display_picture_url ||
                // tslint:disable-next-line:max-line-length
                JSON.stringify(profileData.profile_connected_fbig_player_ids) !== JSON.stringify(cachedProfileData.profile_connected_fbig_player_ids)) {
                profileCall('PUT', '/fbig-mapping', queryParams, { body: profileData }).then(function (results) {
                    if (results && results.xhr && (results.xhr.status === 200 || results.xhr.status === 201)) {
                        window.localStorage.setItem(cachedProfileKey, JSON.stringify(profileData));
                        // Successful write of changed data
                        exports.Event.fire(exports.Events.PROFILE_AUTOUPLOAD, { cachedData: profileData, hasChanged: true });
                    }
                    else {
                        // Unsuccessful write.  If there was cached data return it as It is better than
                        // nonthing and signifies data was written at some point
                        exports.Event.fire(exports.Events.PROFILE_AUTOUPLOAD, {
                            cachedData: wasCached && cachedProfileData,
                            hasChanged: true
                        });
                        // TODO: ztrack issue
                    }
                }, function () {
                    // Rejections
                    exports.Event.fire(exports.Events.PROFILE_AUTOUPLOAD, {
                        cachedData: wasCached && cachedProfileData,
                        hasChanged: true
                    });
                    // TODO: Also track problem
                });
            }
            else {
                exports.Event.fire(exports.Events.PROFILE_AUTOUPLOAD, { cachedData: profileData, hasChanged: false });
            }
        });
    });
});



define("ZyngaRoundsManager", ["require", "exports", "ZyngaCore", "ZyngaNet", "ZyngaProfile"], function (require, exports, ZyngaCore, ZyngaNet, ZyngaProfile) {
    // tslint:disable-next-line:comment-format
    ///<amd-module name="ZyngaRoundsManager"/>
    'use strict';
    Object.defineProperty(exports, "__esModule", { value: true });
    var win = window;
    var doc = document;
    var eventDOMReady = '_RoundsManager.DOMRdy'; // Fired when the DOM is ready
    var eventCSSNode = '_RoundsManager.CSSNode'; // Fired when the CSS node is ready
    var eventRefreshHandler = '_RoundsManager.RefreshHandler'; // Fired when a refresh handler is registered
    var templatesNode; // Node that contains template information
    var parentNode; // Parent node for rounds manager
    var css = {}; // Current CSS object.  Parsed by ZyngaCore.parseCSS function into proper CSS.
    exports.Event = new ZyngaCore.EventMixin();
    exports.Events = {
        CSS_CHANGE: 'RoundsManager.CSSChange',
        TEMPLATES_CHANGE: 'RoundsManager.TemplatesChange',
        PARENT_NODE_CHANGE: 'RoundsManager.ParentNodeChange',
        CTA_SELECTED: 'RoundsManager.CTASelected',
        CONTENT_CHANGE: 'RoundsManager.ContentChange'
    };
    exports.TEMPLATE_TYPES = {
        DOM_NODE: 'domNode',
        DOM_NODE_ID: 'domNodeId',
        HTML_STRING: 'htmlString',
        HTML_URL: 'htmlUrl'
    };
    exports.ERRORS = {
        UNKNOWN: 'ROUNDS_MANAGER_UNKNOWN',
        INPUT: 'ROUNDS_MANAGER_INPUT',
        ALREADY_REFRESHING: 'ROUNDS_MANAGER_ALREADY_REFRESHING'
    };
    // Array specific forEach function
    function arrayForEach(arr, fn, scope) {
        var len = arr.length;
        var i;
        for (i = 0; i < len; i++) {
            fn.call(scope, arr[i], i);
        }
    }
    function genRoundsManagerError(code, message, details) {
        return {
            code: code || exports.ERRORS.UNKNOWN,
            message: message || 'Unknown',
            details: details || {}
        };
    }
    function genStructuredData(flatData) {
        return new Promise(function (resolve) {
            resolve(flatData);
        });
    }
    // Generate a classList polyfil-like (does not modify prototype) object for browser that do not support.
    function classListRegExp(name) {
        return new RegExp('(^| )' + name + '( |$)');
    }
    function genClassList(element) {
        return element.classList || {
            add: function () {
                arrayForEach(arguments, function (name) {
                    if (!this.contains(name)) {
                        element.className += element.className.length > 0 ? ' ' + name : name;
                    }
                }, this);
            },
            remove: function () {
                arrayForEach(arguments, function (name) {
                    element.className = element.className.replace(classListRegExp(name), '');
                }, this);
            },
            toggle: function (name, toggle) {
                if (toggle === true) {
                    return this.add(name);
                }
                if (toggle === false) {
                    return this.remove(name);
                }
                return this.contains(name) ? (this.remove(name), false) : (this.add(name), true);
            },
            contains: function (name) {
                return classListRegExp(name).test(element.className);
            }
        };
    }
    var splitOnWhitespace = /\S+/g;
    function cssClassesToArray(arrayOrString) {
        var retVal = [];
        if (Array.isArray(arrayOrString)) {
            retVal = arrayOrString;
        }
        else if (typeof arrayOrString === 'string') {
            retVal = arrayOrString.match(splitOnWhitespace) || [];
        }
        return retVal;
    }
    // Generates a function that allows the easy clone child nodes
    // of a specified parent.  Optionally removes the 'id' attribute
    // from the cloned node since it was only there so we could find
    // the original node.
    // tslint:disable-next-line:no-shadowed-variable
    function genCloneTemplateNode(templatesNode, removeId) {
        // Account for <template> nodes.  For these we need to referenct the #document-fragment accessable as .content
        templatesNode = templatesNode && templatesNode.content || templatesNode;
        return function cloneTemplateNodeById(id) {
            var origNode = templatesNode.querySelector('#' + id);
            var clonedNode = origNode && origNode.cloneNode(true);
            if (clonedNode && removeId) {
                clonedNode.removeAttribute('id');
            }
            return clonedNode;
        };
    }
    function createSequentialNodes(currentNode, innerHTMLs, applyFunc) {
        var lastNode;
        var classList;
        var origCopy = currentNode.cloneNode(true);
        // make sure second argumentn is an array
        if (innerHTMLs === false || innerHTMLs === undefined || (Array.isArray(innerHTMLs) && innerHTMLs.length === 0)) {
            // No actual elements
            currentNode.parentNode.removeChild(currentNode);
            return;
        }
        // Make sure second argument is an array
        innerHTMLs = Array.isArray(innerHTMLs) ? innerHTMLs : [innerHTMLs];
        arrayForEach(innerHTMLs, function (innerHTML, i) {
            classList = genClassList(currentNode);
            if (typeof applyFunc === 'function') {
                applyFunc(currentNode, innerHTML, classList);
            }
            else {
                currentNode.innerHTML = innerHTML;
            }
            classList.add('zrm_' + (i + 1));
            if (i > 0) {
                // Equiv to jQuery.insertAfter.  If lastNode.nextSibling is null
                // then this does the same as parentNode.appendChild  This is not
                // intuitive but it is how it works.
                lastNode.parentNode.insertBefore(currentNode, lastNode.nextSibling);
            }
            lastNode = currentNode;
            currentNode = origCopy.cloneNode(true);
        });
    }
    var cachedImages = {};
    function preLoadImage(url, callback) {
        var image;
        if (cachedImages[url]) {
            setTimeout(callback, 0);
        }
        else {
            image = new Image();
            image.crossOrigin = 'anonymous';
            image.onload = function () {
                cachedImages[url] = true; // So we only ever do this once
                callback();
            };
            image.src = url;
        }
    }
    // Object to hold information about the element where a touch/click started
    var ctas = [];
    var touchStartData = {
        target: false,
        top: false,
        left: false,
        x: -1,
        y: -1
    };
    // touchstart / mousedown handler
    function touchStartHandler(e) {
        var pos = e.type === 'touchstart' ? e.touches[0] : e;
        var target = e.target;
        var boundingRect = target.getBoundingClientRect();
        touchStartData.target = target;
        touchStartData.top = boundingRect.top;
        touchStartData.left = boundingRect.left;
        touchStartData.x = Math.round(pos.clientX);
        touchStartData.y = Math.round(pos.clientY);
    }
    // touchmove or mousemove handler
    function touchMoveHandler() {
        // Any move means not a click
        touchStartData.target = false;
        touchStartData.top = false;
        touchStartData.left = false;
        touchStartData.x = -1;
        touchStartData.y = -1;
    }
    function touchEndHandler(e) {
        var target = e.target;
        var boundingRect = e.target.getBoundingClientRect();
        var pos = e.type === 'touchend' ? e.changedTouches[0] : e;
        var newTop = boundingRect.top;
        var newLeft = boundingRect.left;
        var newX = Math.round(pos.clientX);
        var newY = Math.round(pos.clientY);
        var ctaIndex = parseInt(target.getAttribute('data-ctaIndex') || -1, 10);
        var cta = ctas[ctaIndex] || {};
        var retVal = true;
        if (touchStartData.top === newTop &&
            touchStartData.left === newLeft &&
            touchStartData.x === newX &&
            touchStartData.y === newY &&
            touchStartData.target === target &&
            ctaIndex >= 0) {
            // Had a start AND did not scroll X or Y AND did not move position since start.  Must be a valid click/touch
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            if (e.preventDefault && e.cancelable) {
                e.preventDefault();
            }
            exports.Event.fire(exports.Events.CTA_SELECTED, cta.data);
            if (cta.callback) {
                cta.callback(cta.data);
            }
            retVal = false;
        }
        return retVal;
    }
    /*
    function recursiveNodeRemove(node) {
        if (node) {
            while (node.hasChildNodes()) {
                recursiveNodeRemove(node.lastChild);
            }
            node.parentNode.removeChild(node);
        }
    }
    */
    var refreshing = false;
    var cachedFriendsData = false;
    function refreshUI(data) {
        return new Promise(function (resolve, reject) {
            var promiseParentNode = exports.Event.last(exports.Events.PARENT_NODE_CHANGE);
            var promiseTemplateNode = exports.Event.last(exports.Events.TEMPLATES_CHANGE);
            var promiseFormatData = genStructuredData(data);
            var promiseDomReady = exports.Event.last(eventDOMReady);
            var promiseFriendsPlaying = Promise.resolve({}); // By default don't add friends
            if (refreshing) {
                reject(genRoundsManagerError(exports.ERRORS.ALREADY_REFRESHING, 'Please wait until current refresh is complete'));
                return;
            }
            refreshing = true;
            ctas = [];
            if (data.addFriendsPlaying !== false) {
                // Caller didn't tell us not to add friends playing so actually get them
                // tslint:disable-next-line:no-shadowed-variable
                promiseFriendsPlaying = new Promise(function (resolve, reject) {
                    if (cachedFriendsData) {
                        resolve(cachedFriendsData);
                    }
                    else {
                        ZyngaProfile.getConnectedPlayerProfilesAsync([
                            'fbig_player_id',
                            'zynga_player_id',
                            'display_name',
                            'display_picture_url'
                        ]).then(function (profileData) {
                            var defaultResult = [];
                            cachedFriendsData = profileData && profileData.indexes && profileData.indexes.facebook || defaultResult;
                            resolve(cachedFriendsData);
                        }, reject);
                    }
                });
            }
            Promise.all([promiseParentNode,
                promiseTemplateNode,
                promiseFormatData,
                promiseFriendsPlaying,
                promiseDomReady
            ]).then(function (results) {
                // tslint:disable-next-line:no-shadowed-variable
                var parentNode = results[0]; // Rounds Manager parent node
                var templateNode = results[1]; // Template node
                // tslint:disable-next-line:no-shadowed-variable
                var data = results[2]; // Structured data
                var friendsData = results[3]; // Friends playing data
                var tClone = genCloneTemplateNode(templateNode, true); // Template node cloning function. Removes ID attribute.
                var nMain = tClone('zrm_main'); // Main node
                var nGroups = nMain.querySelector('#zrm_groups'); // Groups parent node
                var nGroup; // Reused for each Group node
                var nRounds;
                var nRound;
                var nPlayers;
                var groupIdx = {};
                var classListObj;
                var group;
                var rounds;
                var round;
                var groupId;
                var groupData;
                var fbigId;
                var friend;
                var friendData;
                // Add friend records if any were fetched
                for (fbigId in friendsData) {
                    friend = friendsData[fbigId];
                    if (friend && friend.display_name && friend.display_picture_url) {
                        friendData = {
                            groupId: 'friendsplaying',
                            players: [
                                {
                                    labels: [
                                        {
                                            label: friend.display_name,
                                            cssClasses: ''
                                        }
                                    ],
                                    imgURL: friend.display_picture_url
                                }
                            ],
                            CTAs: [
                                {
                                    label: false,
                                    cssClasses: 'zrm_clickableNoCTA',
                                    data: {
                                        FBIGPlayerId: fbigId
                                    }
                                }
                            ],
                            labels: []
                        };
                        if (friend.zynga_player_id) {
                            friendData.CTAs[0].data.ZyngaPlayerId = friend.zynga_player_id;
                        }
                        data.rounds.push(friendData);
                    }
                }
                for (groupId in data.groups) {
                    groupIdx[groupId] = {
                        group: data.groups[groupId],
                        rounds: []
                    };
                }
                // for instead of arrayForEach so we can break out on error
                // tslint:disable-next-line:prefer-for-of
                for (var i = 0; i < data.rounds.length; i++) {
                    round = data.rounds[i];
                    group = groupIdx[round.groupId];
                    if (group) {
                        group.rounds.push(round);
                    }
                    else {
                        reject(genRoundsManagerError(exports.ERRORS.INPUT, 'A round\'s groupId was not found in the groups object', {
                            groupId: round.groupId,
                            data: data
                        }));
                        return;
                    }
                }
                for (groupId in groupIdx) {
                    nGroup = tClone('zrm_group'); // New group node
                    groupData = groupIdx[groupId].group; // Group data
                    rounds = groupIdx[groupId].rounds; // Rounds data
                    // Set group name
                    (nGroup.querySelector('.zrm_group_name') || {}).innerHTML = groupData.label || '';
                    // Add any group CSS classes if provided.  TODO: this is ugly, refactor
                    classListObj = genClassList(nGroup);
                    classListObj.add.apply(classListObj, cssClassesToArray(groupData.cssClasses || []));
                    // Append to groups node but only if there are rounds
                    if (rounds.length > 0) {
                        nGroups.appendChild(nGroup);
                    }
                    nRounds = nGroup.querySelector('.zrm_group_items');
                    // Add each round
                    // tslint:disable-next-line:no-shadowed-variable
                    arrayForEach(rounds, function (round) {
                        nRound = tClone('zrm_group_item');
                        // Add player "cards"
                        nPlayers = nRound.querySelector('.zrm_group_item_cards');
                        arrayForEach(round.players, function (player) {
                            var nPlayer = tClone('zrm_group_item_card');
                            var nImage = nPlayer.querySelector('.zrm_group_item_card_picture');
                            var classList = genClassList(nImage);
                            classList.add('zrm_imageNone');
                            if (player.imgURL) {
                                preLoadImage(player.imgURL, function () {
                                    classList.remove('zrm_imageLoading');
                                    // Set the now loaded/cached background image
                                    nImage.style['background-image'] = 'url(\'' + player.imgURL + '\')';
                                });
                                classList.remove('zrm_imageNone');
                                classList.add('zrm_imageLoading');
                            }
                            // Create player labels
                            // tslint:disable-next-line:max-line-length
                            // tslint:disable-next-line:no-shadowed-variable
                            createSequentialNodes(nPlayer.querySelector('.zrm_group_item_card_label'), player.labels, function (node, label, classList) {
                                var cssClasses = label.cssClasses || [];
                                if (typeof cssClasses === 'string') {
                                    cssClasses = cssClasses.split(' ');
                                }
                                classList.add.apply(classList, cssClasses);
                                if (label.label) {
                                    node.innerHTML = label.label;
                                }
                            });
                            nPlayers.appendChild(nPlayer);
                        });
                        // Create round labels
                        createSequentialNodes(nRound.querySelector('.zrm_group_item_label'), round.labels);
                        // Create round CTAs
                        createSequentialNodes(nRound.querySelector('.zrm_group_item_cta'), round.CTAs, function (node, cta, classList) {
                            var cssClasses = cta.cssClasses || [];
                            var ctaData = {
                                data: cta.data
                            };
                            if (typeof cta.callback === 'function') {
                                ctaData.callback = cta.callback;
                            }
                            ctas.push(ctaData);
                            node.setAttribute('data-ctaIndex', (ctas.length - 1));
                            if (typeof cssClasses === 'string') {
                                cssClasses = cssClasses.split(' ');
                            }
                            if (cssClasses.length > 0) {
                                classList.add.apply(classList, cssClasses);
                            }
                            if (cta.label) {
                                node.innerHTML = cta.label;
                            }
                        });
                        nRounds.appendChild(nRound);
                    });
                }
                /*
                // Should not be needed, .innerHTML = '' below shold do it
                // This is just ANOTHER hack to try to decrease the likelyhood of the iOS OOM issue happening
                if (parentNode.hasChildNodes()) {
                    recursiveNodeRemove(parentNode.lastChild);
                }
                */
                parentNode.innerHTML = ''; // Wipe out existing content
                parentNode.appendChild(nMain); // Add new content
                exports.Event.fire(exports.Events.CONTENT_CHANGE, nMain);
                // Make sure CTA clicks only happen on clicks
                nMain.addEventListener('mousedown', touchStartHandler);
                nMain.addEventListener('touchstart', touchStartHandler);
                nMain.addEventListener('mousemove', touchMoveHandler, false);
                nMain.addEventListener('touchmove', touchMoveHandler, false);
                nMain.addEventListener('mouseup', touchEndHandler, false);
                nMain.addEventListener('touchend', touchEndHandler, false);
                // disable overscroll
                nMain.addEventListener('touchstart', function () {
                    var top = nMain.scrollTop;
                    var totalScroll = nMain.scrollHeight;
                    var currentScroll = top + nMain.offsetHeight;
                    if (top === 0) {
                        nMain.scrollTop = 1;
                    }
                    else if (currentScroll === totalScroll) {
                        nMain.scrollTop = top - 1;
                    }
                });
                refreshing = false;
                resolve();
            }, reject);
        });
    }
    function setTemplates(templateData, templateType) {
        var oldTemplatesNode = templatesNode;
        templateType = templateType || exports.TEMPLATE_TYPES.HTML_STRING;
        return new Promise(function (resolve, reject) {
            function checkForChanges() {
                if (templatesNode !== oldTemplatesNode) {
                    exports.Event.fire(exports.Events.TEMPLATES_CHANGE, templatesNode);
                }
            }
            function fromString(str) {
                var node = doc.createElement('template');
                node.innerHTML = str;
                // Note: for template elements you need the .content documentFragment
                if ((node.content || node).childElementCount > 0 === false) {
                    node = false;
                }
                return node;
            }
            switch (templateType) {
                case exports.TEMPLATE_TYPES.DOM_NODE:
                    templatesNode = templateData;
                    break;
                case exports.TEMPLATE_TYPES.DOM_NODE_ID:
                    templatesNode = doc.getElementById(templateData);
                    if (!templatesNode) {
                        // Not found, roll back
                        templatesNode = oldTemplatesNode;
                        reject();
                        return;
                    }
                    break;
                case exports.TEMPLATE_TYPES.HTML_STRING:
                    templatesNode = fromString(templateData);
                    if (!templatesNode) {
                        // Bad string, roll back
                        templatesNode = oldTemplatesNode;
                        reject();
                        return;
                    }
                    break;
                case exports.TEMPLATE_TYPES.HTML_URL:
                    ZyngaNet.api('GET', templateData, { noAuth: true, noAPI: true }).then(function (results) {
                        var xhr = results.xhr;
                        var body = results.body;
                        if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) {
                            templatesNode = fromString(body);
                            if (!templatesNode) {
                                // Bad string, roll back
                                templatesNode = oldTemplatesNode;
                                reject();
                                return;
                            }
                            else {
                                // Success
                                checkForChanges();
                            }
                        }
                        else {
                            reject(results);
                            return;
                        }
                    }, reject);
                    return; // important
                default:
                    reject();
                    return;
            }
            checkForChanges();
        });
    }
    exports.setTemplates = setTemplates;
    function setParent(nodeOrId) {
        var oldParentNode = parentNode;
        if (typeof nodeOrId === 'object' && nodeOrId.nodeType > 0) {
            parentNode = nodeOrId;
        }
        else if (typeof nodeOrId === 'string') {
            parentNode = doc.getElementById(nodeOrId);
            if (!parentNode) {
                parentNode = oldParentNode;
                throw new Error('Could not find element with id "' + nodeOrId + '"');
            }
        }
        else {
            throw new TypeError('setParent argument must be of type "string" (element id) or an actual DOM node');
        }
        if (parentNode !== oldParentNode) {
            exports.Event.fire(exports.Events.PARENT_NODE_CHANGE, parentNode);
        }
    }
    exports.setParent = setParent;
    function setCSS(cssObject) {
        var cssStr = JSON.stringify(css);
        var newCssStr;
        if (typeof cssObject !== 'object') {
            throw new TypeError('setCSS requires an object');
        }
        newCssStr = JSON.stringify(cssObject);
        if (cssStr !== newCssStr) {
            css = JSON.parse(newCssStr); // stringify -> parse does a deep clone.  Now it's fully ours
            exports.Event.fire(exports.Events.CSS_CHANGE, css);
        }
    }
    exports.setCSS = setCSS;
    function setRefreshHandler(handler) {
        exports.Event.fire(eventRefreshHandler, handler);
    }
    exports.setRefreshHandler = setRefreshHandler;
    function refresh(userInitiated) {
        return new Promise(function (resolve, reject) {
            // TODO: add refresh class
            exports.Event.last(eventRefreshHandler) // Get the last registered refresh handler or wait for it to be registered
                .then(function (dataRefresh) {
                return dataRefresh(userInitiated); // Call the refresh data function
            })
                .then(refreshUI) // Send the data to th refreshUI function
                .then(function () {
                // TODO: remove refresh class
                resolve();
            })
                .catch(function (error) {
                // TODO: remove refresh class
                reject(error);
            });
        });
    }
    exports.refresh = refresh;
    // Create style element once the DOM is ready
    exports.Event.once(eventDOMReady, function () {
        var head = doc.head || doc.getElementsByTagName('head')[0];
        var styleNode = doc.createElement('style');
        styleNode.type = 'text/css';
        head.appendChild(styleNode);
        exports.Event.fire(eventCSSNode, styleNode);
    }, true);
    // replace CSS node contents each time new CSS JSON appears
    exports.Event.on(exports.Events.CSS_CHANGE, function (newCSSObj) {
        var newCSSStr = ZyngaCore.parseCSS(newCSSObj);
        exports.Event.last(eventCSSNode, function (cssNode) {
            if (cssNode.styleSheet) {
                // Older version of IE
                cssNode.styleSheett.cssText = newCSSStr;
            }
            else if (typeof cssNode.textContent !== 'undefined') {
                cssNode.textContent = newCSSStr;
            }
            else {
                cssNode.innerText = newCSSStr;
            }
        });
    });
    // Dom operations should not happen until the DOM is actually ready.
    function checkDomRdy() {
        var readyState = doc.readyState;
        if (readyState === 'interactive' || readyState === 'complete') {
            // An image stuck loading, even a tracking pixel, can caue readyState 'complete'
            // to never fire.  This is why 'interactive' is good enough
            doc.removeEventListener('readystatechange', checkDomRdy);
            exports.Event.fire(eventDOMReady, true);
        }
    }
    doc.addEventListener('readystatechange', checkDomRdy);
    checkDomRdy();
});



define("ZyngaRoundsManagerCSS", ["require", "exports"], function (require, exports) {
    "use strict";
    // tslint:disable-next-line:comment-format
    ///<amd-module name="ZyngaRoundsManagerCSS"/>
    var defaultCSS = {
        '.zrm_main': {
            position: 'absolute',
            top: 0,
            left: 0,
            width: '100%',
            height: '100%',
            'font-size': '10px',
            overflow: 'scroll',
            'overflow-x': 'hidden',
            'overflow-y': 'scroll',
            'background-color': '#FFF',
            '-webkit-overflow-scrolling': 'touch'
        },
        '.zrm_main ::-webkit-scrollbar, .zrm_main::-webkit-scrollbar': {
            display: 'none',
        },
        '#zrm_chooseOpponent': {
            position: 'fixed',
            top: '0.6em',
            left: '50%',
            height: '2.5em',
            width: '90%',
            'border-radius': '0.7em',
            transform: 'translate3d(-50%, 0, 0)',
            'background-color': 'rgb(0, 118, 255)',
            'font-size': '4em',
            'line-height': '2em',
            'text-align': 'center',
            'font-weight': 'bold',
            color: '#FFF',
            '-moz-box-shadow': '0.3em 0.3em 0.4em -0.1em rgba(0,0,0,0.75)',
            '-webkit-box-shadow': '0.3em 0.3em 0.4em -0.1em rgba(0,0,0,0.75)',
            'box-shadow': '0.3em 0.3em 0.4em -0.1em rgba(0,0,0,0.75)',
            'z-index': 2
        },
        '#zrm_chooseOpponent:after': {
            content: '""',
            position: 'absolute',
            'z-index': -1,
            height: '75%',
            top: '0',
            left: '0',
            right: '0',
            bottom: '1.5em',
            'border-radius': 'inherit',
            'background-color': 'rgb(0, 131, 255)'
        },
        '.zrm_group:first-of-type > .zrm_group_name': {
            'padding-top': '5em',
            background: '#e6e6e6'
        },
        '.zrm_group_name': {
            background: [
                '#e6e6e6',
                '-moz-linear-gradient(top, #c0c0c0 0%, #e6e6e6 8%, #e6e6e6 96%, #e9e9e9 100%)',
                '-webkit-linear-gradient(top, #c0c0c0 0%,#e6e6e6 8%,#e6e6e6 96%,#e9e9e9 100%)',
                'linear-gradient(to bottom, #c0c0c0 0%,#e6e6e6 8%,#e6e6e6 96%,#e9e9e9 100%)' //  W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
            ],
            width: '100%',
            'font-size': '3em',
            padding: '0.3em',
            'font-weight': 'bold'
        },
        '.zrm_group_items': {
            'background-color': '#FFF',
            width: '100%',
            overflow: 'scroll',
            //'overflow-x': 'scroll',
            //'overflow-y': 'hidden',
            'white-space': 'nowrap',
            '-webkit-overflow-scrolling': 'touch'
        },
        '.zrm_group_item': {
            position: 'relative',
            display: 'inline-block',
            width: '43%',
            'margin-top': '1.5%',
            'margin-bottom': '1.5%'
        },
        '.zrm_group_item:first-of-type': {
            'margin-left': '1.5%'
        },
        '.zrm_group_item:last-of-type': {
            'margin-right': '1.5%'
        },
        '.zrm_group_item:before': {
            content: '""',
            width: '100%',
            'padding-top': '100%',
            display: 'block'
        },
        '.zrm_group.zrm_2across  .zrm_group_item': {
            width: '43%'
        },
        '.zrm_group.zrm_3across  .zrm_group_item': {
            width: '28%',
            'font-size': '0.8em'
        },
        '.zrm_group.zrm_4across  .zrm_group_item': {
            width: '22%',
            'font-size': '0.6em'
        },
        '.zrm_group_item > .zrm_group_item_content': {
            position: 'absolute',
            top: '2%',
            left: '2%',
            right: '2%',
            bottom: '2%',
            'border-radius': '5%',
            overflow: 'hidden',
            border: '0.15em solid rgba(0,0,0,0.5)',
            'box-sizing': 'border-box',
            /* hack to fix Chrome */
            '-webkit-mask-image': 'url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC)'
        },
        '.zrm_group_item_label': {
            display: 'none',
            position: 'absolute',
            top: 0,
            left: 0,
            right: 0,
            'font-size': '3.5em',
            color: '#FFF',
            'background-color': 'rgba(0,0,0,0.5)',
            height: '2em',
            'line-height': '2em',
            'text-align': 'right',
            'padding-right': '0.5em',
            'font-weight': 600,
            'text-overflow': 'ellipsis'
        },
        '.zrm_group_item_label.zrm_1': {
            display: 'block'
        },
        '.zrm_group_item_cta': {
            display: 'none',
            position: 'absolute',
            right: '3%',
            bottom: '3%',
            'font-size': '3em',
            color: '#FFF',
            'background-color': '#FFF',
            height: '2.5em',
            'line-height': '2.5em',
            'text-align': 'center',
            'font-weight': 600,
            'border-radius': '0.6em',
            'padding-right': '1em',
            'padding-left': '1em',
            'z-index': 0,
            'box-shadow': '0.2em 0.2em 0.3em -0.1em rgba(0,0,0,0.85)'
        },
        '.zrm_group_item_cta.zrm_1': {
            display: 'block'
        },
        '.zrm_group_item_cta.zrm_2': {
            display: 'block'
        },
        '.zrm_group_item_cta:before': {
            content: '""',
            position: 'absolute',
            top: '0.25em',
            left: '0.25em',
            right: '0.3em',
            bottom: '0.3em',
            'background-color': 'red',
            'border-radius': '0.4em',
            'z-index': '-1',
            'box-shadow': '0.2em 0.2em 0.3em -0.1em rgba(0,0,0,0.4)'
        },
        '.zrm_group_item_cta.zrm_greenCTA:before': {
            'background-color': 'rgb(130, 213, 79)'
        },
        '.zrm_group_item_cta.zrm_blueCTA:before': {
            'background-color': 'rgb(32, 89, 195)'
        },
        '.zrm_group_item_cta.zrm_orangeCTA': {
            'background-color': 'rgba(0,0,0,0.7)',
            height: '2em',
            'line-height': '2em',
            color: 'rgb(255, 175, 28)',
            'padding-left': '0.5em',
            'padding-right': '0.5em',
            right: '4%',
            bottom: '4%'
        },
        '.zrm_group_item_cta.zrm_orangeCTA:before, .zrm_group_item_cta.zrm_clickableNoCTA:before': {
            display: 'none'
        },
        '.zrm_group_item_cta.zrm_clickableNoCTA': {
            'background-color': 'rgba(0,0,0,0)',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0,
            height: '100%',
            width: '100%',
            padding: 0,
            margin: 0,
            'box-shadow': 'none',
            display: 'block'
        },
        '.zrm_friendsPlaying .zrm_group_item_cta:before': {
            display: 'none',
        },
        '.zrm_friendsPlaying .zrm_group_item_content': {
            border: 'none',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0
        },
        '.zrm_friendsPlaying .zrm_group_item_card_picture': {
            top: '5%',
            left: '15%',
            right: '15%',
            bottom: '25%',
            'border-radius': '50%'
        },
        '.zrm_friendsPlaying .zrm_group_item_card_label': {
            bottom: 0,
            left: 0,
            right: 0,
            width: '100%',
            padding: 0,
            margin: 0,
            'font-size': '5em',
            'height': '1.5em',
            'line-height': '1.5em',
            'text-align': 'center',
            color: '#000',
            'text-shadow': 'initial',
            'font-weight': 400
        },
        '.zrm_group_item_cards': {
            position: 'relative',
            width: '100%',
            height: '100%'
        },
        '.zrm_group_item_card': {
            position: 'relative',
            width: '100%',
            height: '100%'
        },
        '.zrm_group_item_card_label': {
            display: 'none',
            position: 'absolute',
            left: '3%',
            bottom: '3%',
            'font-size': '4em',
            color: '#FFF',
            height: '2em',
            width: '55%',
            'line-height': '2em',
            'text-align': 'left',
            'font-weight': 600,
            'padding-left': '0.5em',
            //'-webkit-text-stroke': '1px black',
            'text-shadow': '2px 2px 0 #000, -1px -1px 0 #000,  1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000',
            overflow: 'hidden',
            'white-space': 'nowrap',
            'text-overflow': 'ellipsis'
        },
        '.zrm_group_item_card_label.zrm_1': {
            display: 'block'
        },
        '.zrm_group_item_card_picture': {
            position: 'absolute',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0,
            'background-repeat': 'no-repeat',
            'background-size': 'cover'
        },
        '.zrm_imageNone': {
            'background-image': 'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'632px\' height=\'632px\'%3E%3Cpath fill=\'%239DC3C6\' d=\'M0,0L632,0L632,632L0,632L0,0\'/%3E%3Cg fill=\'%23FFFFFF\'%3E%3Cpath d=\'M400.8,453.5H232.2c-71.3,0-129.7,58.4-129.7,129.7v48c0,0.3,0.3,0.6,0.6,0.6h426.8c0.3,0,0.6-0.3,0.6-0.6v-48C530.5,511.9,472.2,453.5,400.8,453.5\'/%3E%3Cpath d=\'M423.5,81.1l-107,15.3l-107-15.3c0,0-35.7,0-35.7,17.8c0,17.8,35.7,17.8,35.7,17.8l107-15.3l107,15.3 c0,0,35.7,0,35.7-17.8C459.2,81.1,423.5,81.1,423.5,81.1\'/%3E%3Cpath d=\'M325.4,164h-17.8V92.7c0-14.3,17.8-14.3,17.8,0V164z\'/%3E%3Cpath d=\'M464.7,382.3c0,34.5-27.9,62.4-62.4,62.4H230.7c-34.5,0-62.4-27.9-62.4-62.4V210.7c0-34.5,27.9-62.4,62.4-62.4h171.6c34.5,0,62.4,27.9,62.4,62.4V382.3z\'/%3E%3C/g%3E%3Cg fill=\'%239DC3C6\'%3E%3Cpath d=\'M392.4,288.2c0,11.5-9.3,20.9-20.9,20.9s-20.9-9.3-20.9-20.9c0-11.5,9.3-20.9,20.9-20.9S392.4,276.7,392.4,288.2\'/%3E%3Cpath d=\'M282.4,288.2c0,11.5-9.3,20.9-20.9,20.9c-11.5,0-20.9-9.3-20.9-20.9c0-11.5,9.3-20.9,20.9-20.9C273,267.3,282.4,276.7,282.4,288.2\'/%3E%3Cpath d=\'M263,344.8c0,0,0,35.7,53.5,35.7c53.5,0,53.5-35.7,53.5-35.7\'/%3E%3C/g%3E%3C/svg%3E")'
        }
    };
    var minWidth = 400;
    var maxWidth = 3000;
    var fontFactor = 105;
    var screenWidth;
    for (screenWidth = maxWidth; screenWidth >= minWidth; screenWidth -= 50) {
        defaultCSS['@media only screen and (max-width: ' + screenWidth + 'px)'] = {
            '.zrm_main': {
                'font-size': (Math.round(screenWidth / fontFactor * 100) / 100) + 'px'
            }
        };
    }
    // Handle giant screens
    defaultCSS['@media only screen and (min-width: ' + maxWidth + 'px)'] = {
        '.zrm_main': {
            'font-size': (Math.round(maxWidth / fontFactor * 100) / 100) + 'px'
        }
    };
    return defaultCSS;
});
/*
<div id="zrm_main">
    <div id="zrm_chooseOpponent"> CHOOSE AN OPPONENT </div>
    <div id="zrm_groups"></div>
</div>
<div id="zrm_group" class="zrm_group">
    <div class="zrm_group_name"></div>
    <div class="zrm_group_items"></div>
</div>
<div id="zrm_group_item" class="zrm_group_item">
    <div class="zrm_group_item_content">
        <div class="zrm_group_item_cards"></div>
        <div class="zrm_group_item_label"></div>
        <div class="zrm_group_item_cta"></div>
    </div>
</div>
<div id="zrm_group_item_card" class="zrm_group_item_card">
    <div class="zrm_group_item_card_picture"></div>
    <div class="zrm_group_item_card_label"></div>
</div>
 */



define("ZyngaStorage", ["require", "exports", "Zynga", "ZyngaAccount", "ZyngaCore", "ZyngaNet"], function (require, exports, Zynga, ZyngaAccount, ZyngaCore, ZyngaNet) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var ObjectAssign = ZyngaCore.ObjectAssign;
    // todo: expose cas and cached blob data with methods.
    var cachedUserBlobs = {};
    // use with results of:
    // tslint:disable-next-line:max-line-length
    // Promise.all([Zynga.Event.last(Zynga.Events.APP_ID), Zynga.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS)]).then(function (results) {
    // tslint:disable-next-line:max-line-length
    function zyngaServiceCall(appId, accountDetails, method, path, args) {
        var options = {};
        var queryString = '';
        if (args) {
            if (method.toLowerCase() !== 'get') {
                options.body = args;
            }
            else {
                // pass options as query string.
                var queryParams = [];
                for (var paramName in args) {
                    var paramValue = args[paramName];
                    // encode and optionally turn arrays into comma separated list
                    paramValue = Array.isArray(paramValue) ? paramValue.map(encodeURI).join(',') : encodeURI(paramValue);
                    queryParams.push(paramName + '=' + paramValue);
                }
                queryString = queryParams.length > 0 ? ('?' + queryParams.join('&')) : '';
            }
        }
        options.useToken = accountDetails.token;
        return ZyngaNet.api(method, path + queryString, options);
    }
    exports.zyngaServiceCall = zyngaServiceCall;
    /**
     * @param forPlayerId specifiy for which player to load the blob. else it will take logged-in creds.
     */
    function getUserBlob(blobName, forPlayerId) {
        return Promise.all([
            Zynga.Event.last(Zynga.Events.APP_ID),
            ZyngaAccount.Event.last(ZyngaAccount.Events.ACCOUNT_DETAILS)
        ]).then(function (results) {
            var appId = results[0];
            var accountDetails = results[1];
            var playerId = forPlayerId || accountDetails.playerId;
            var endpoint = "https://api.zynga.com/storage/v1/app/" + appId + "/blob/" + blobName + "/user/" + playerId;
            return zyngaServiceCall(appId, accountDetails, 'GET', endpoint, {}).then(cacheResultPassthrough).then(function (result) {
                var blobData = result.body.data[blobName][playerId];
                return blobData.data;
            });
        });
    }
    exports.getUserBlob = getUserBlob;
    function cacheResultPassthrough(result) {
        // a bit lazy here, but this will cache the blob data and the cas in a natural format.
        ObjectAssign(cachedUserBlobs, result.body.data);
        /*for (var blobName in result.body.data) {
            for (var playerId in result.body.data[blobName]) {
                let blobData = result.body.data[blobName][playerId];
                //???
            }
        }*/
        return result;
    }
});



define("ZyngaWallet", ["require", "exports", "ATG-Turns/src/walletportable", "ZyngaAccount", "ZyngaCore"], function (require, exports, walletportable_1, ZyngaAccount, ZyngaCore) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var ObjectAssign = ZyngaCore.ObjectAssign;
    // yes, we actually imported a function from the backend that will be run on the client.
    // Is this the begginging of the apocalypse?
    // import { canCollectDrip } from '../lib/ATG-Turns/src/wallet';
    exports.cachedWallet = null;
    exports.cachedStats = null;
    exports.lastCas = 0;
    function get(params) {
        // tslint:disable-next-line:max-line-length
        return ZyngaAccount.userAuthCall('GET', 'wallet', params).then(cacheResultPassthrough);
    }
    exports.get = get;
    /**
     * Use this to modify your wallet based on wallet deltas returned by the API
     * @param wallet_ref
     * @param delta
     */
    // tslint:disable-next-line:variable-name
    function applyWalletDelta(wallet_ref, delta) {
        for (var v in delta) {
            if (wallet_ref[v]) {
                wallet_ref[v] += delta[v];
            }
            else {
                wallet_ref[v] = delta[v];
            }
        }
    }
    exports.applyWalletDelta = applyWalletDelta;
    // tslint:disable-next-line:max-line-length
    function cacheResultPassthrough(result) {
        exports.lastCas = result.body.cas;
        exports.cachedStats = result.body.stats || exports.cachedStats;
        exports.cachedWallet = result.body.wallet || exports.cachedWallet;
        var deltaBody = result.body;
        if (!result.body.wallet && deltaBody.delta_items) {
            // api call returned delta but no wallet body.
            // currently not an existing case.
        }
        return result;
    }
    function claimDrip(params) {
        // tslint:disable-next-line:max-line-length
        return ZyngaAccount.userAuthCall('PUT', 'wallet/claimDrip', params).then(cacheResultPassthrough);
    }
    exports.claimDrip = claimDrip;
    function endGameGrant(params) {
        // tslint:disable-next-line:max-line-length
        return ZyngaAccount.userAuthCall('PUT', 'wallet/endGameGrant', params).then(cacheResultPassthrough);
    }
    exports.endGameGrant = endGameGrant;
    function purchase(params) {
        // tslint:disable-next-line:max-line-length
        return ZyngaAccount.userAuthCall('PUT', 'wallet/purchase', params).then(cacheResultPassthrough);
    }
    exports.purchase = purchase;
    function openGatcha(params) {
        // tslint:disable-next-line:max-line-length
        return ZyngaAccount.userAuthCall('PUT', 'wallet/openGatcha', params).then(cacheResultPassthrough);
    }
    exports.openGatcha = openGatcha;
    // poor-mans object.values
    function Object_values(o) {
        return Object.keys(o).map(function (k) { return o[k]; });
    }
    exports.Object_values = Object_values;
    // pass in your eos experiments (you've loaded them already, right?) and we return the catalog
    // tslint:disable-next-line:max-line-length
    function parseItemCatalog(catalogNames, allExperiments) {
        // merge all the catalogs and return.
        var allValues = {};
        // filter just itemcatalog experiments.
        var assignments = {};
        catalogNames.forEach(function (e) {
            assignments[e] = allExperiments[e];
        });
        var allVariables = Object_values(assignments).forEach(function (v) {
            return Object_values(v.variables).forEach(function (val) {
                return ObjectAssign(allValues, val);
            });
        });
        return allValues;
    }
    exports.parseItemCatalog = parseItemCatalog;
    // pass in your eos experiments (you've loaded them already, right?) and we return the catalog
    // tslint:disable-next-line:max-line-length
    function parseDripCatalog(dripExperimentName, allExperiments) {
        // merge all the catalogs and return.
        var allValues = {};
        // filter just dropcatalog experiments.
        var assignments = {};
        assignments[dripExperimentName] = allExperiments[dripExperimentName];
        var allVariables = Object_values(assignments).forEach(function (v) {
            return Object_values(v.variables).forEach(function (val) {
                return ObjectAssign(allValues, val);
            });
        });
        return allValues;
    }
    exports.parseDripCatalog = parseDripCatalog;
    // tslint:disable-next-line:max-line-length
    // tslint:disable-next-line:variable-name
    function calculateDripStatus(dripCatalog, now_ts, drip_id, userWallet) {
        var itemDef = dripCatalog[drip_id];
        if (!itemDef) {
            throw new Error('Unable to find drip by id. ' + JSON.stringify({ drip_id: drip_id, dripCatalog: dripCatalog }));
        }
        var dripStaticStatus = userWallet.drips[drip_id];
        var canClaim = walletportable_1.canCollectDrip(itemDef, userWallet.drips[drip_id], now_ts);
        return {
            time_remaining_s: canClaim.time_remaining_s,
            prize_item: itemDef.grants
        };
    }
    exports.calculateDripStatus = calculateDripStatus;
});



// Set up global Zynga namespace
// Mostly for backwards compat
(function (win) {
	var z = win.Zynga = require('./Zynga');
	z.Account = require('./ZyngaAccount');
	z.Analytics = require('./ZyngaAnalytics');
	z.Core = require('./ZyngaCore');
	z.ContextTracker = require('./ZyngaContextTracker');
	z.Instant = require('./ZyngaInstant');
	z.Leaderboard = require('./ZyngaLeaderboard');
	z.LeaderboardUI = require('./ZyngaLeaderboardUI');
	z.LeaderboardUICSS = require('./ZyngaLeaderboardUICSS');
	z.Match = require('./ZyngaMatch');
	z.Media = require('./ZyngaMedia');
	z.Net = require('./ZyngaNet');
	z.Optimize = require('./ZyngaOptimize');
	z.Profile = require('./ZyngaProfile');
	z.RoundsManager = require('./ZyngaRoundsManager');
	z.RoundsManagerCSS = require('./ZyngaRoundsManagerCSS');
})(window);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVzNi1wcm9taXNlLmF1dG8uanMiLCJhbG1vbmQuanMiLCJaeW5nYU1kNS5qcyIsInByZWFjdC5qcyIsIi9zb3VyY2UvWnluZ2EudHMiLCIvc291cmNlL1p5bmdhQWNjb3VudC50cyIsIi9zb3VyY2UvWnluZ2FBbmFseXRpY3MudHMiLCIvc291cmNlL1p5bmdhQ29udGV4dFRyYWNrZXIudHMiLCIvc291cmNlL1p5bmdhQ29yZS50cyIsIi9zb3VyY2UvWnluZ2FEZWJ1Zy50cyIsIi9zb3VyY2UvWnluZ2FIb21lU2NyZWVuLnRzIiwiL3NvdXJjZS9aeW5nYUluc3RhbnQudHMiLCIvc291cmNlL1p5bmdhTGVhZGVyYm9hcmQudHMiLCIvc291cmNlL1p5bmdhTGVhZGVyYm9hcmRVSS50c3giLCIvc291cmNlL1p5bmdhTGVhZGVyYm9hcmRVSUNTUy50cyIsIi9zb3VyY2UvWnluZ2FNYXRjaC50cyIsIi9zb3VyY2UvWnluZ2FNZWRpYS50cyIsIi9zb3VyY2UvWnluZ2FOZXQudHMiLCIvc291cmNlL1p5bmdhT3B0aW1pemUudHMiLCIvc291cmNlL1p5bmdhUHJvZmlsZS50cyIsIi9zb3VyY2UvWnluZ2FSb3VuZHNNYW5hZ2VyLnRzIiwiL3NvdXJjZS9aeW5nYVJvdW5kc01hbmFnZXJDU1MudHMiLCIvc291cmNlL1p5bmdhU3RvcmFnZS50cyIsIi9zb3VyY2UvWnluZ2FXYWxsZXQudHMiLCJaeW5nYUluc3RhbnRTREtHbG9iYWxOYW1lc3BhY2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeG9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5bEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QyxVQUFVLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2xGLElBQUksUUFBUSxHQUFHLCtCQUFjLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDMUUsTUFBTSxDQUFDO1lBQ04sZ0JBQWdCLEVBQUUsUUFBUSxDQUFDLGdCQUFnQjtZQUMzQyxVQUFVLEVBQUUsT0FBTyxDQUFDLE1BQU07U0FDMUIsQ0FBQztJQUNILENBQUM7SUFYRCxrREFXQzs7Ozs7QUN4SUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ilp5bmdhRkJJbnN0YW50U0RLLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxuICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuICogQHZlcnNpb24gICA0LjEuMVxuICovXG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKCdlczYtcHJvbWlzZS5hdXRvJyxmYWN0b3J5KSA6XG5cdChnbG9iYWwuRVM2UHJvbWlzZSA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gb2JqZWN0T3JGdW5jdGlvbih4KSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHg7XG4gIHJldHVybiB4ICE9PSBudWxsICYmICh0eXBlID09PSAnb2JqZWN0JyB8fCB0eXBlID09PSAnZnVuY3Rpb24nKTtcbn1cblxuZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxudmFyIF9pc0FycmF5ID0gdW5kZWZpbmVkO1xuaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xufSBlbHNlIHtcbiAgX2lzQXJyYXkgPSBmdW5jdGlvbiAoeCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gIH07XG59XG5cbnZhciBpc0FycmF5ID0gX2lzQXJyYXk7XG5cbnZhciBsZW4gPSAwO1xudmFyIHZlcnR4TmV4dCA9IHVuZGVmaW5lZDtcbnZhciBjdXN0b21TY2hlZHVsZXJGbiA9IHVuZGVmaW5lZDtcblxudmFyIGFzYXAgPSBmdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBhcmcpIHtcbiAgcXVldWVbbGVuXSA9IGNhbGxiYWNrO1xuICBxdWV1ZVtsZW4gKyAxXSA9IGFyZztcbiAgbGVuICs9IDI7XG4gIGlmIChsZW4gPT09IDIpIHtcbiAgICAvLyBJZiBsZW4gaXMgMiwgdGhhdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gc2NoZWR1bGUgYW4gYXN5bmMgZmx1c2guXG4gICAgLy8gSWYgYWRkaXRpb25hbCBjYWxsYmFja3MgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHF1ZXVlIGlzIGZsdXNoZWQsIHRoZXlcbiAgICAvLyB3aWxsIGJlIHByb2Nlc3NlZCBieSB0aGlzIGZsdXNoIHRoYXQgd2UgYXJlIHNjaGVkdWxpbmcuXG4gICAgaWYgKGN1c3RvbVNjaGVkdWxlckZuKSB7XG4gICAgICBjdXN0b21TY2hlZHVsZXJGbihmbHVzaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxlRmx1c2goKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHNldFNjaGVkdWxlcihzY2hlZHVsZUZuKSB7XG4gIGN1c3RvbVNjaGVkdWxlckZuID0gc2NoZWR1bGVGbjtcbn1cblxuZnVuY3Rpb24gc2V0QXNhcChhc2FwRm4pIHtcbiAgYXNhcCA9IGFzYXBGbjtcbn1cblxudmFyIGJyb3dzZXJXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcbnZhciBicm93c2VyR2xvYmFsID0gYnJvd3NlcldpbmRvdyB8fCB7fTtcbnZhciBCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG52YXIgaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAoe30pLnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJztcblxuLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcbnZhciBpc1dvcmtlciA9IHR5cGVvZiBVaW50OENsYW1wZWRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cbi8vIG5vZGVcbmZ1bmN0aW9uIHVzZU5leHRUaWNrKCkge1xuICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHlcbiAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWpvanMvd2hlbi9pc3N1ZXMvNDEwIGZvciBkZXRhaWxzXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpO1xuICB9O1xufVxuXG4vLyB2ZXJ0eFxuZnVuY3Rpb24gdXNlVmVydHhUaW1lcigpIHtcbiAgaWYgKHR5cGVvZiB2ZXJ0eE5leHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZlcnR4TmV4dChmbHVzaCk7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XG59XG5cbmZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7XG4gIHZhciBpdGVyYXRpb25zID0gMDtcbiAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGZsdXNoKTtcbiAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgbm9kZS5kYXRhID0gaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDI7XG4gIH07XG59XG5cbi8vIHdlYiB3b3JrZXJcbmZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VTZXRUaW1lb3V0KCkge1xuICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBlczYtcHJvbWlzZSB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcbiAgLy8gb3RoZXIgY29kZSBtb2RpZnlpbmcgc2V0VGltZW91dCAobGlrZSBzaW5vbi51c2VGYWtlVGltZXJzKCkpXG4gIHZhciBnbG9iYWxTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2xvYmFsU2V0VGltZW91dChmbHVzaCwgMSk7XG4gIH07XG59XG5cbnZhciBxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcbmZ1bmN0aW9uIGZsdXNoKCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gcXVldWVbaV07XG4gICAgdmFyIGFyZyA9IHF1ZXVlW2kgKyAxXTtcblxuICAgIGNhbGxiYWNrKGFyZyk7XG5cbiAgICBxdWV1ZVtpXSA9IHVuZGVmaW5lZDtcbiAgICBxdWV1ZVtpICsgMV0gPSB1bmRlZmluZWQ7XG4gIH1cblxuICBsZW4gPSAwO1xufVxuXG5mdW5jdGlvbiBhdHRlbXB0VmVydHgoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHIgPSByZXF1aXJlO1xuICAgIHZhciB2ZXJ0eCA9IHIoJ3ZlcnR4Jyk7XG4gICAgdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICByZXR1cm4gdXNlVmVydHhUaW1lcigpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbiAgfVxufVxuXG52YXIgc2NoZWR1bGVGbHVzaCA9IHVuZGVmaW5lZDtcbi8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG5pZiAoaXNOb2RlKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VOZXh0VGljaygpO1xufSBlbHNlIGlmIChCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTXV0YXRpb25PYnNlcnZlcigpO1xufSBlbHNlIGlmIChpc1dvcmtlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTWVzc2FnZUNoYW5uZWwoKTtcbn0gZWxzZSBpZiAoYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSBhdHRlbXB0VmVydHgoKTtcbn0gZWxzZSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VTZXRUaW1lb3V0KCk7XG59XG5cbmZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7XG5cbiAgdmFyIHBhcmVudCA9IHRoaXM7XG5cbiAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XG5cbiAgaWYgKGNoaWxkW1BST01JU0VfSURdID09PSB1bmRlZmluZWQpIHtcbiAgICBtYWtlUHJvbWlzZShjaGlsZCk7XG4gIH1cblxuICB2YXIgX3N0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblxuICBpZiAoX3N0YXRlKSB7XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjYWxsYmFjayA9IF9hcmd1bWVudHNbX3N0YXRlIC0gMV07XG4gICAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUNhbGxiYWNrKF9zdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7XG4gICAgICB9KTtcbiAgICB9KSgpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG4gIH1cblxuICByZXR1cm4gY2hpbGQ7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlXG4gIHBhc3NlZCBgdmFsdWVgLiBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVzb2x2ZSgxKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoMSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZXNvbHZlXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHZhbHVlIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuXG4gIGB2YWx1ZWBcbiovXG5mdW5jdGlvbiByZXNvbHZlJDEob2JqZWN0KSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuXG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICByZXNvbHZlKHByb21pc2UsIG9iamVjdCk7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG52YXIgUFJPTUlTRV9JRCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygxNik7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG52YXIgUEVORElORyA9IHZvaWQgMDtcbnZhciBGVUxGSUxMRUQgPSAxO1xudmFyIFJFSkVDVEVEID0gMjtcblxudmFyIEdFVF9USEVOX0VSUk9SID0gbmV3IEVycm9yT2JqZWN0KCk7XG5cbmZ1bmN0aW9uIHNlbGZGdWxmaWxsbWVudCgpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpO1xufVxuXG5mdW5jdGlvbiBjYW5ub3RSZXR1cm5Pd24oKSB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7XG59XG5cbmZ1bmN0aW9uIGdldFRoZW4ocHJvbWlzZSkge1xuICB0cnkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW47XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBlcnJvcjtcbiAgICByZXR1cm4gR0VUX1RIRU5fRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJ5VGhlbih0aGVuJCQxLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG4gIHRyeSB7XG4gICAgdGhlbiQkMS5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuJCQxKSB7XG4gIGFzYXAoZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICB2YXIgc2VhbGVkID0gZmFsc2U7XG4gICAgdmFyIGVycm9yID0gdHJ5VGhlbih0aGVuJCQxLCB0aGVuYWJsZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG4gICAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuXG4gICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXG4gICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgIH1cbiAgfSwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG4gIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IEZVTEZJTExFRCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgIHJlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIHtcbiAgICBzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkMSkge1xuICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJiB0aGVuJCQxID09PSB0aGVuICYmIG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gcmVzb2x2ZSQxKSB7XG4gICAgaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoZW4kJDEgPT09IEdFVF9USEVOX0VSUk9SKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgR0VUX1RIRU5fRVJST1IuZXJyb3IpO1xuICAgICAgR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAodGhlbiQkMSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGVuJCQxKSkge1xuICAgICAgaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgIHJlamVjdChwcm9taXNlLCBzZWxmRnVsZmlsbG1lbnQoKSk7XG4gIH0gZWxzZSBpZiAob2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCBnZXRUaGVuKHZhbHVlKSk7XG4gIH0gZWxzZSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG4gIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG4gICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuICB9XG5cbiAgcHVibGlzaChwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcbiAgcHJvbWlzZS5fc3RhdGUgPSBGVUxGSUxMRUQ7XG5cbiAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgIGFzYXAocHVibGlzaCwgcHJvbWlzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXG4gIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX3N1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcbiAgdmFyIGxlbmd0aCA9IF9zdWJzY3JpYmVycy5sZW5ndGg7XG5cbiAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblxuICBfc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBSRUpFQ1RFRF0gPSBvblJlamVjdGlvbjtcblxuICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcbiAgICBhc2FwKHB1Ymxpc2gsIHBhcmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7XG4gIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXG4gIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY2hpbGQgPSB1bmRlZmluZWQsXG4gICAgICBjYWxsYmFjayA9IHVuZGVmaW5lZCxcbiAgICAgIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcbiAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblxuICAgIGlmIChjaGlsZCkge1xuICAgICAgaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhkZXRhaWwpO1xuICAgIH1cbiAgfVxuXG4gIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG59XG5cbmZ1bmN0aW9uIEVycm9yT2JqZWN0KCkge1xuICB0aGlzLmVycm9yID0gbnVsbDtcbn1cblxudmFyIFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXG5mdW5jdGlvbiB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgIHZhbHVlID0gdW5kZWZpbmVkLFxuICAgICAgZXJyb3IgPSB1bmRlZmluZWQsXG4gICAgICBzdWNjZWVkZWQgPSB1bmRlZmluZWQsXG4gICAgICBmYWlsZWQgPSB1bmRlZmluZWQ7XG5cbiAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgdmFsdWUgPSB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblxuICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcbiAgICAgIHZhbHVlLmVycm9yID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgIHJlamVjdChwcm9taXNlLCBjYW5ub3RSZXR1cm5Pd24oKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhbHVlID0gZGV0YWlsO1xuICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gIH1cblxuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICAvLyBub29wXG4gIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XG4gICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGZhaWxlZCkge1xuICAgICAgcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBSRUpFQ1RFRCkge1xuICAgICAgcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7XG4gIHRyeSB7XG4gICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpIHtcbiAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJlamVjdChwcm9taXNlLCBlKTtcbiAgfVxufVxuXG52YXIgaWQgPSAwO1xuZnVuY3Rpb24gbmV4dElkKCkge1xuICByZXR1cm4gaWQrKztcbn1cblxuZnVuY3Rpb24gbWFrZVByb21pc2UocHJvbWlzZSkge1xuICBwcm9taXNlW1BST01JU0VfSURdID0gaWQrKztcbiAgcHJvbWlzZS5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gIHByb21pc2UuX3Jlc3VsdCA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fc3Vic2NyaWJlcnMgPSBbXTtcbn1cblxuZnVuY3Rpb24gRW51bWVyYXRvciQxKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoIXRoaXMucHJvbWlzZVtQUk9NSVNFX0lEXSkge1xuICAgIG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG4gIH1cblxuICBpZiAoaXNBcnJheShpbnB1dCkpIHtcbiAgICB0aGlzLmxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICB0aGlzLl9yZW1haW5pbmcgPSBpbnB1dC5sZW5ndGg7XG5cbiAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwO1xuICAgICAgdGhpcy5fZW51bWVyYXRlKGlucHV0KTtcbiAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlamVjdCh0aGlzLnByb21pc2UsIHZhbGlkYXRpb25FcnJvcigpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3IoKSB7XG4gIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xufVxuXG5FbnVtZXJhdG9yJDEucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuICAgIHRoaXMuX2VhY2hFbnRyeShpbnB1dFtpXSwgaSk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IkMS5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uIChlbnRyeSwgaSkge1xuICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG4gIHZhciByZXNvbHZlJCQxID0gYy5yZXNvbHZlO1xuXG4gIGlmIChyZXNvbHZlJCQxID09PSByZXNvbHZlJDEpIHtcbiAgICB2YXIgX3RoZW4gPSBnZXRUaGVuKGVudHJ5KTtcblxuICAgIGlmIChfdGhlbiA9PT0gdGhlbiAmJiBlbnRyeS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIF90aGVuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl9yZW1haW5pbmctLTtcbiAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IGVudHJ5O1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gUHJvbWlzZSQzKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKG5vb3ApO1xuICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgX3RoZW4pO1xuICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHByb21pc2UsIGkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24gKHJlc29sdmUkJDEpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUkJDEoZW50cnkpO1xuICAgICAgfSksIGkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZSQkMShlbnRyeSksIGkpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yJDEucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiAoc3RhdGUsIGksIHZhbHVlKSB7XG4gIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gUEVORElORykge1xuICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXG4gICAgaWYgKHN0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgICAgcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVzdWx0W2ldID0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgfVxufTtcblxuRW51bWVyYXRvciQxLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24gKHByb21pc2UsIGkpIHtcbiAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXG4gIHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoRlVMRklMTEVELCBpLCB2YWx1ZSk7XG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KFJFSkVDVEVELCBpLCByZWFzb24pO1xuICB9KTtcbn07XG5cbi8qKlxuICBgUHJvbWlzZS5hbGxgIGFjY2VwdHMgYW4gYXJyYXkgb2YgcHJvbWlzZXMsIGFuZCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2hcbiAgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgb2YgZnVsZmlsbG1lbnQgdmFsdWVzIGZvciB0aGUgcGFzc2VkIHByb21pc2VzLCBvclxuICByZWplY3RlZCB3aXRoIHRoZSByZWFzb24gb2YgdGhlIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIGJlIHJlamVjdGVkLiBJdCBjYXN0cyBhbGxcbiAgZWxlbWVudHMgb2YgdGhlIHBhc3NlZCBpdGVyYWJsZSB0byBwcm9taXNlcyBhcyBpdCBydW5zIHRoaXMgYWxnb3JpdGhtLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZXNvbHZlKDIpO1xuICBsZXQgcHJvbWlzZTMgPSByZXNvbHZlKDMpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gVGhlIGFycmF5IGhlcmUgd291bGQgYmUgWyAxLCAyLCAzIF07XG4gIH0pO1xuICBgYGBcblxuICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8gYGFsbGAgYXJlIHJlamVjdGVkLCB0aGUgZmlyc3QgcHJvbWlzZVxuICB0aGF0IGlzIHJlamVjdGVkIHdpbGwgYmUgZ2l2ZW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIHJldHVybmVkIHByb21pc2VzJ3NcbiAgcmVqZWN0aW9uIGhhbmRsZXIuIEZvciBleGFtcGxlOlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZWplY3QobmV3IEVycm9yKFwiMlwiKSk7XG4gIGxldCBwcm9taXNlMyA9IHJlamVjdChuZXcgRXJyb3IoXCIzXCIpKTtcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJlIHJlamVjdGVkIHByb21pc2VzIVxuICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgIC8vIGVycm9yLm1lc3NhZ2UgPT09IFwiMlwiXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIGFsbFxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IGVudHJpZXMgYXJyYXkgb2YgcHJvbWlzZXNcbiAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCBgcHJvbWlzZXNgIGhhdmUgYmVlblxuICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC5cbiAgQHN0YXRpY1xuKi9cbmZ1bmN0aW9uIGFsbCQxKGVudHJpZXMpIHtcbiAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yJDEodGhpcywgZW50cmllcykucHJvbWlzZTtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJhY2VgIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaCBpcyBzZXR0bGVkIGluIHRoZSBzYW1lIHdheSBhcyB0aGVcbiAgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gc2V0dGxlLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAyJyk7XG4gICAgfSwgMTAwKTtcbiAgfSk7XG5cbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gcmVzdWx0ID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIGl0IHdhcyByZXNvbHZlZCBiZWZvcmUgcHJvbWlzZTFcbiAgICAvLyB3YXMgcmVzb2x2ZWQuXG4gIH0pO1xuICBgYGBcblxuICBgUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGluIHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0XG4gIHNldHRsZWQgcHJvbWlzZSBtYXR0ZXJzLiBGb3IgZXhhbXBsZSwgZXZlbiBpZiBvdGhlciBwcm9taXNlcyBnaXZlbiB0byB0aGVcbiAgYHByb21pc2VzYCBhcnJheSBhcmd1bWVudCBhcmUgcmVzb2x2ZWQsIGJ1dCB0aGUgZmlyc3Qgc2V0dGxlZCBwcm9taXNlIGhhc1xuICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWRcbiAgcHJvbWlzZSB3aWxsIGJlY29tZSByZWplY3RlZDpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdwcm9taXNlIDInKSk7XG4gICAgfSwgMTAwKTtcbiAgfSk7XG5cbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnNcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBwcm9taXNlIDIgYmVjYW1lIHJlamVjdGVkIGJlZm9yZVxuICAgIC8vIHByb21pc2UgMSBiZWNhbWUgZnVsZmlsbGVkXG4gIH0pO1xuICBgYGBcblxuICBBbiBleGFtcGxlIHJlYWwtd29ybGQgdXNlIGNhc2UgaXMgaW1wbGVtZW50aW5nIHRpbWVvdXRzOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgUHJvbWlzZS5yYWNlKFthamF4KCdmb28uanNvbicpLCB0aW1lb3V0KDUwMDApXSlcbiAgYGBgXG5cbiAgQG1ldGhvZCByYWNlXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gcHJvbWlzZXMgYXJyYXkgb2YgcHJvbWlzZXMgdG8gb2JzZXJ2ZVxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB3aGljaCBzZXR0bGVzIGluIHRoZSBzYW1lIHdheSBhcyB0aGUgZmlyc3QgcGFzc2VkXG4gIHByb21pc2UgdG8gc2V0dGxlLlxuKi9cbmZ1bmN0aW9uIHJhY2UkMShlbnRyaWVzKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKCFpc0FycmF5KGVudHJpZXMpKSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAoXywgcmVqZWN0KSB7XG4gICAgICByZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZWplY3RgIHJldHVybnMgYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIHBhc3NlZCBgcmVhc29uYC5cbiAgSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVqZWN0XG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHJlYXNvbiB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aC5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgZ2l2ZW4gYHJlYXNvbmAuXG4qL1xuZnVuY3Rpb24gcmVqZWN0JDEocmVhc29uKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIG5lZWRzUmVzb2x2ZXIoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3InKTtcbn1cblxuZnVuY3Rpb24gbmVlZHNOZXcoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7XG59XG5cbi8qKlxuICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG4gIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsIHdoaWNoXG4gIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlIHJlYXNvblxuICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICBUZXJtaW5vbG9neVxuICAtLS0tLS0tLS0tLVxuXG4gIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG4gIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cbiAgLSBgdmFsdWVgIGlzIGFueSBsZWdhbCBKYXZhU2NyaXB0IHZhbHVlIChpbmNsdWRpbmcgdW5kZWZpbmVkLCBhIHRoZW5hYmxlLCBvciBhIHByb21pc2UpLlxuICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cbiAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxuICAtIGBzZXR0bGVkYCB0aGUgZmluYWwgcmVzdGluZyBzdGF0ZSBvZiBhIHByb21pc2UsIGZ1bGZpbGxlZCBvciByZWplY3RlZC5cblxuICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXG5cbiAgUHJvbWlzZXMgdGhhdCBhcmUgZnVsZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRoZSBmdWxmaWxsZWRcbiAgc3RhdGUuICBQcm9taXNlcyB0aGF0IGFyZSByZWplY3RlZCBoYXZlIGEgcmVqZWN0aW9uIHJlYXNvbiBhbmQgYXJlIGluIHRoZVxuICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmV2ZXIgYSB0aGVuYWJsZS5cblxuICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcbiAgcHJvbWlzZSwgdGhlbiB0aGUgb3JpZ2luYWwgcHJvbWlzZSdzIHNldHRsZWQgc3RhdGUgd2lsbCBtYXRjaCB0aGUgdmFsdWUnc1xuICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcbiAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxuICBpdHNlbGYgZnVsZmlsbC5cblxuXG4gIEJhc2ljIFVzYWdlOlxuICAtLS0tLS0tLS0tLS1cblxuICBgYGBqc1xuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIC8vIG9uIHN1Y2Nlc3NcbiAgICByZXNvbHZlKHZhbHVlKTtcblxuICAgIC8vIG9uIGZhaWx1cmVcbiAgICByZWplY3QocmVhc29uKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBBZHZhbmNlZCBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tLS0tXG5cbiAgUHJvbWlzZXMgc2hpbmUgd2hlbiBhYnN0cmFjdGluZyBhd2F5IGFzeW5jaHJvbm91cyBpbnRlcmFjdGlvbnMgc3VjaCBhc1xuICBgWE1MSHR0cFJlcXVlc3Rgcy5cblxuICBgYGBqc1xuICBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgeGhyLnNlbmQoKTtcblxuICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gdGhpcy5ET05FKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0SlNPTignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cbiAgYGBganNcbiAgUHJvbWlzZS5hbGwoW1xuICAgIGdldEpTT04oJy9wb3N0cycpLFxuICAgIGdldEpTT04oJy9jb21tZW50cycpXG4gIF0pLnRoZW4oZnVuY3Rpb24odmFsdWVzKXtcbiAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXG4gICAgdmFsdWVzWzFdIC8vID0+IGNvbW1lbnRzSlNPTlxuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfSk7XG4gIGBgYFxuXG4gIEBjbGFzcyBQcm9taXNlXG4gIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQGNvbnN0cnVjdG9yXG4qL1xuZnVuY3Rpb24gUHJvbWlzZSQzKHJlc29sdmVyKSB7XG4gIHRoaXNbUFJPTUlTRV9JRF0gPSBuZXh0SWQoKTtcbiAgdGhpcy5fcmVzdWx0ID0gdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cbiAgaWYgKG5vb3AgIT09IHJlc29sdmVyKSB7XG4gICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIG5lZWRzUmVzb2x2ZXIoKTtcbiAgICB0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSQzID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTtcbiAgfVxufVxuXG5Qcm9taXNlJDMuYWxsID0gYWxsJDE7XG5Qcm9taXNlJDMucmFjZSA9IHJhY2UkMTtcblByb21pc2UkMy5yZXNvbHZlID0gcmVzb2x2ZSQxO1xuUHJvbWlzZSQzLnJlamVjdCA9IHJlamVjdCQxO1xuUHJvbWlzZSQzLl9zZXRTY2hlZHVsZXIgPSBzZXRTY2hlZHVsZXI7XG5Qcm9taXNlJDMuX3NldEFzYXAgPSBzZXRBc2FwO1xuUHJvbWlzZSQzLl9hc2FwID0gYXNhcDtcblxuUHJvbWlzZSQzLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFByb21pc2UkMyxcblxuICAvKipcbiAgICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcbiAgICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxuICAgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG4gICAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZVxuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBDaGFpbmluZ1xuICAgIC0tLS0tLS0tXG4gIFxuICAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXG4gICAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxuICAgIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIHVzZXIubmFtZTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHtcbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcbiAgICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuICAgIH0pO1xuICBcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG4gICAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cbiAgICB9KTtcbiAgICBgYGBcbiAgICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQXNzaW1pbGF0aW9uXG4gICAgLS0tLS0tLS0tLS0tXG4gIFxuICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG4gICAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxuICAgIGZ1bGZpbGxtZW50IG9yIHJlamVjdGlvbiBoYW5kbGVyLiBUaGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgdGhlbiBiZSBwZW5kaW5nXG4gICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG4gICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG4gICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFNpbXBsZSBFeGFtcGxlXG4gICAgLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgU3luY2hyb25vdXMgRXhhbXBsZVxuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgbGV0IHJlc3VsdDtcbiAgXG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH1cbiAgICBgYGBcbiAgXG4gICAgRXJyYmFjayBFeGFtcGxlXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFJlc3VsdChmdW5jdGlvbihyZXN1bHQsIGVycil7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH1cbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgUHJvbWlzZSBFeGFtcGxlO1xuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBBZHZhbmNlZCBFeGFtcGxlXG4gICAgLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgU3luY2hyb25vdXMgRXhhbXBsZVxuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgbGV0IGF1dGhvciwgYm9va3M7XG4gIFxuICAgIHRyeSB7XG4gICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG4gICAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfVxuICAgIGBgYFxuICBcbiAgICBFcnJiYWNrIEV4YW1wbGVcbiAgXG4gICAgYGBganNcbiAgXG4gICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuICBcbiAgICB9XG4gIFxuICAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XG4gIFxuICAgIH1cbiAgXG4gICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7XG4gICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBQcm9taXNlIEV4YW1wbGU7XG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBmaW5kQXV0aG9yKCkuXG4gICAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cbiAgICAgIHRoZW4oZnVuY3Rpb24oYm9va3Mpe1xuICAgICAgICAvLyBmb3VuZCBib29rc1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBAbWV0aG9kIHRoZW5cbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZFxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcbiAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cbiAgdGhlbjogdGhlbixcblxuICAvKipcbiAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG4gICAgYXMgdGhlIGNhdGNoIGJsb2NrIG9mIGEgdHJ5L2NhdGNoIHN0YXRlbWVudC5cbiAgXG4gICAgYGBganNcbiAgICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcbiAgICB9XG4gIFxuICAgIC8vIHN5bmNocm9ub3VzXG4gICAgdHJ5IHtcbiAgICAgIGZpbmRBdXRob3IoKTtcbiAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9XG4gIFxuICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcbiAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEBtZXRob2QgY2F0Y2hcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuICAnY2F0Y2gnOiBmdW5jdGlvbiBfY2F0Y2gob25SZWplY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0aW9uKTtcbiAgfVxufTtcblxuLypnbG9iYWwgc2VsZiovXG5mdW5jdGlvbiBwb2x5ZmlsbCQxKCkge1xuICAgIHZhciBsb2NhbCA9IHVuZGVmaW5lZDtcblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2NhbCA9IGdsb2JhbDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2NhbCA9IHNlbGY7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBQID0gbG9jYWwuUHJvbWlzZTtcblxuICAgIGlmIChQKSB7XG4gICAgICAgIHZhciBwcm9taXNlVG9TdHJpbmcgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJvbWlzZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gc2lsZW50bHkgaWdub3JlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb21pc2VUb1N0cmluZyA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvY2FsLlByb21pc2UgPSBQcm9taXNlJDM7XG59XG5cbi8vIFN0cmFuZ2UgY29tcGF0Li5cblByb21pc2UkMy5wb2x5ZmlsbCA9IHBvbHlmaWxsJDE7XG5Qcm9taXNlJDMuUHJvbWlzZSA9IFByb21pc2UkMztcblxuUHJvbWlzZSQzLnBvbHlmaWxsKCk7XG5cbnJldHVybiBQcm9taXNlJDM7XG5cbn0pKSk7XG5cblxuO1xuIiwiLyoqXG4gKiBAbGljZW5zZSBhbG1vbmQgMC4zLjMgQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMuXG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSwgaHR0cDovL2dpdGh1Yi5jb20vcmVxdWlyZWpzL2FsbW9uZC9MSUNFTlNFXG4gKi9cbi8vR29pbmcgc2xvcHB5IHRvIGF2b2lkICd1c2Ugc3RyaWN0JyBzdHJpbmcgY29zdCwgYnV0IHN0cmljdCBwcmFjdGljZXMgc2hvdWxkXG4vL2JlIGZvbGxvd2VkLlxuLypnbG9iYWwgc2V0VGltZW91dDogZmFsc2UgKi9cblxudmFyIHJlcXVpcmVqcywgcmVxdWlyZSwgZGVmaW5lO1xuKGZ1bmN0aW9uICh1bmRlZikge1xuICAgIHZhciBtYWluLCByZXEsIG1ha2VNYXAsIGhhbmRsZXJzLFxuICAgICAgICBkZWZpbmVkID0ge30sXG4gICAgICAgIHdhaXRpbmcgPSB7fSxcbiAgICAgICAgY29uZmlnID0ge30sXG4gICAgICAgIGRlZmluaW5nID0ge30sXG4gICAgICAgIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksXG4gICAgICAgIGFwcyA9IFtdLnNsaWNlLFxuICAgICAgICBqc1N1ZmZpeFJlZ0V4cCA9IC9cXC5qcyQvO1xuXG4gICAgZnVuY3Rpb24gaGFzUHJvcChvYmosIHByb3ApIHtcbiAgICAgICAgcmV0dXJuIGhhc093bi5jYWxsKG9iaiwgcHJvcCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSByZWxhdGl2ZSBtb2R1bGUgbmFtZSwgbGlrZSAuL3NvbWV0aGluZywgbm9ybWFsaXplIGl0IHRvXG4gICAgICogYSByZWFsIG5hbWUgdGhhdCBjYW4gYmUgbWFwcGVkIHRvIGEgcGF0aC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgcmVsYXRpdmUgbmFtZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlTmFtZSBhIHJlYWwgbmFtZSB0aGF0IHRoZSBuYW1lIGFyZyBpcyByZWxhdGl2ZVxuICAgICAqIHRvLlxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IG5vcm1hbGl6ZWQgbmFtZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZShuYW1lLCBiYXNlTmFtZSkge1xuICAgICAgICB2YXIgbmFtZVBhcnRzLCBuYW1lU2VnbWVudCwgbWFwVmFsdWUsIGZvdW5kTWFwLCBsYXN0SW5kZXgsXG4gICAgICAgICAgICBmb3VuZEksIGZvdW5kU3Rhck1hcCwgc3RhckksIGksIGosIHBhcnQsIG5vcm1hbGl6ZWRCYXNlUGFydHMsXG4gICAgICAgICAgICBiYXNlUGFydHMgPSBiYXNlTmFtZSAmJiBiYXNlTmFtZS5zcGxpdChcIi9cIiksXG4gICAgICAgICAgICBtYXAgPSBjb25maWcubWFwLFxuICAgICAgICAgICAgc3Rhck1hcCA9IChtYXAgJiYgbWFwWycqJ10pIHx8IHt9O1xuXG4gICAgICAgIC8vQWRqdXN0IGFueSByZWxhdGl2ZSBwYXRocy5cbiAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICBsYXN0SW5kZXggPSBuYW1lLmxlbmd0aCAtIDE7XG5cbiAgICAgICAgICAgIC8vIElmIHdhbnRpbmcgbm9kZSBJRCBjb21wYXRpYmlsaXR5LCBzdHJpcCAuanMgZnJvbSBlbmRcbiAgICAgICAgICAgIC8vIG9mIElEcy4gSGF2ZSB0byBkbyB0aGlzIGhlcmUsIGFuZCBub3QgaW4gbmFtZVRvVXJsXG4gICAgICAgICAgICAvLyBiZWNhdXNlIG5vZGUgYWxsb3dzIGVpdGhlciAuanMgb3Igbm9uIC5qcyB0byBtYXBcbiAgICAgICAgICAgIC8vIHRvIHNhbWUgZmlsZS5cbiAgICAgICAgICAgIGlmIChjb25maWcubm9kZUlkQ29tcGF0ICYmIGpzU3VmZml4UmVnRXhwLnRlc3QobmFtZVtsYXN0SW5kZXhdKSkge1xuICAgICAgICAgICAgICAgIG5hbWVbbGFzdEluZGV4XSA9IG5hbWVbbGFzdEluZGV4XS5yZXBsYWNlKGpzU3VmZml4UmVnRXhwLCAnJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFN0YXJ0cyB3aXRoIGEgJy4nIHNvIG5lZWQgdGhlIGJhc2VOYW1lXG4gICAgICAgICAgICBpZiAobmFtZVswXS5jaGFyQXQoMCkgPT09ICcuJyAmJiBiYXNlUGFydHMpIHtcbiAgICAgICAgICAgICAgICAvL0NvbnZlcnQgYmFzZU5hbWUgdG8gYXJyYXksIGFuZCBsb3Agb2ZmIHRoZSBsYXN0IHBhcnQsXG4gICAgICAgICAgICAgICAgLy9zbyB0aGF0IC4gbWF0Y2hlcyB0aGF0ICdkaXJlY3RvcnknIGFuZCBub3QgbmFtZSBvZiB0aGUgYmFzZU5hbWUnc1xuICAgICAgICAgICAgICAgIC8vbW9kdWxlLiBGb3IgaW5zdGFuY2UsIGJhc2VOYW1lIG9mICdvbmUvdHdvL3RocmVlJywgbWFwcyB0b1xuICAgICAgICAgICAgICAgIC8vJ29uZS90d28vdGhyZWUuanMnLCBidXQgd2Ugd2FudCB0aGUgZGlyZWN0b3J5LCAnb25lL3R3bycgZm9yXG4gICAgICAgICAgICAgICAgLy90aGlzIG5vcm1hbGl6YXRpb24uXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZEJhc2VQYXJ0cyA9IGJhc2VQYXJ0cy5zbGljZSgwLCBiYXNlUGFydHMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgbmFtZSA9IG5vcm1hbGl6ZWRCYXNlUGFydHMuY29uY2F0KG5hbWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3N0YXJ0IHRyaW1Eb3RzXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbmFtZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHBhcnQgPSBuYW1lW2ldO1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0ID09PSAnLicpIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGkgLT0gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQgPT09ICcuLicpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgYXQgdGhlIHN0YXJ0LCBvciBwcmV2aW91cyB2YWx1ZSBpcyBzdGlsbCAuLixcbiAgICAgICAgICAgICAgICAgICAgLy8ga2VlcCB0aGVtIHNvIHRoYXQgd2hlbiBjb252ZXJ0ZWQgdG8gYSBwYXRoIGl0IG1heVxuICAgICAgICAgICAgICAgICAgICAvLyBzdGlsbCB3b3JrIHdoZW4gY29udmVydGVkIHRvIGEgcGF0aCwgZXZlbiB0aG91Z2hcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgYW4gSUQgaXQgaXMgbGVzcyB0aGFuIGlkZWFsLiBJbiBsYXJnZXIgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVsZWFzZXMsIG1heSBiZSBiZXR0ZXIgdG8ganVzdCBraWNrIG91dCBhbiBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgKGkgPT09IDEgJiYgbmFtZVsyXSA9PT0gJy4uJykgfHwgbmFtZVtpIC0gMV0gPT09ICcuLicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lLnNwbGljZShpIC0gMSwgMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpIC09IDI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL2VuZCB0cmltRG90c1xuXG4gICAgICAgICAgICBuYW1lID0gbmFtZS5qb2luKCcvJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvL0FwcGx5IG1hcCBjb25maWcgaWYgYXZhaWxhYmxlLlxuICAgICAgICBpZiAoKGJhc2VQYXJ0cyB8fCBzdGFyTWFwKSAmJiBtYXApIHtcbiAgICAgICAgICAgIG5hbWVQYXJ0cyA9IG5hbWUuc3BsaXQoJy8nKTtcblxuICAgICAgICAgICAgZm9yIChpID0gbmFtZVBhcnRzLmxlbmd0aDsgaSA+IDA7IGkgLT0gMSkge1xuICAgICAgICAgICAgICAgIG5hbWVTZWdtZW50ID0gbmFtZVBhcnRzLnNsaWNlKDAsIGkpLmpvaW4oXCIvXCIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGJhc2VQYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAvL0ZpbmQgdGhlIGxvbmdlc3QgYmFzZU5hbWUgc2VnbWVudCBtYXRjaCBpbiB0aGUgY29uZmlnLlxuICAgICAgICAgICAgICAgICAgICAvL1NvLCBkbyBqb2lucyBvbiB0aGUgYmlnZ2VzdCB0byBzbWFsbGVzdCBsZW5ndGhzIG9mIGJhc2VQYXJ0cy5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gYmFzZVBhcnRzLmxlbmd0aDsgaiA+IDA7IGogLT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwVmFsdWUgPSBtYXBbYmFzZVBhcnRzLnNsaWNlKDAsIGopLmpvaW4oJy8nKV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYmFzZU5hbWUgc2VnbWVudCBoYXMgIGNvbmZpZywgZmluZCBpZiBpdCBoYXMgb25lIGZvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzIG5hbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBWYWx1ZSA9IG1hcFZhbHVlW25hbWVTZWdtZW50XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXRjaCwgdXBkYXRlIG5hbWUgdG8gdGhlIG5ldyB2YWx1ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRNYXAgPSBtYXBWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRJID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vQ2hlY2sgZm9yIGEgc3RhciBtYXAgbWF0Y2gsIGJ1dCBqdXN0IGhvbGQgb24gdG8gaXQsXG4gICAgICAgICAgICAgICAgLy9pZiB0aGVyZSBpcyBhIHNob3J0ZXIgc2VnbWVudCBtYXRjaCBsYXRlciBpbiBhIG1hdGNoaW5nXG4gICAgICAgICAgICAgICAgLy9jb25maWcsIHRoZW4gZmF2b3Igb3ZlciB0aGlzIHN0YXIgbWFwLlxuICAgICAgICAgICAgICAgIGlmICghZm91bmRTdGFyTWFwICYmIHN0YXJNYXAgJiYgc3Rhck1hcFtuYW1lU2VnbWVudF0pIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmRTdGFyTWFwID0gc3Rhck1hcFtuYW1lU2VnbWVudF07XG4gICAgICAgICAgICAgICAgICAgIHN0YXJJID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZm91bmRNYXAgJiYgZm91bmRTdGFyTWFwKSB7XG4gICAgICAgICAgICAgICAgZm91bmRNYXAgPSBmb3VuZFN0YXJNYXA7XG4gICAgICAgICAgICAgICAgZm91bmRJID0gc3Rhckk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmb3VuZE1hcCkge1xuICAgICAgICAgICAgICAgIG5hbWVQYXJ0cy5zcGxpY2UoMCwgZm91bmRJLCBmb3VuZE1hcCk7XG4gICAgICAgICAgICAgICAgbmFtZSA9IG5hbWVQYXJ0cy5qb2luKCcvJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlUmVxdWlyZShyZWxOYW1lLCBmb3JjZVN5bmMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vQSB2ZXJzaW9uIG9mIGEgcmVxdWlyZSBmdW5jdGlvbiB0aGF0IHBhc3NlcyBhIG1vZHVsZU5hbWVcbiAgICAgICAgICAgIC8vdmFsdWUgZm9yIGl0ZW1zIHRoYXQgbWF5IG5lZWQgdG9cbiAgICAgICAgICAgIC8vbG9vayB1cCBwYXRocyByZWxhdGl2ZSB0byB0aGUgbW9kdWxlTmFtZVxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcHMuY2FsbChhcmd1bWVudHMsIDApO1xuXG4gICAgICAgICAgICAvL0lmIGZpcnN0IGFyZyBpcyBub3QgcmVxdWlyZSgnc3RyaW5nJyksIGFuZCB0aGVyZSBpcyBvbmx5XG4gICAgICAgICAgICAvL29uZSBhcmcsIGl0IGlzIHRoZSBhcnJheSBmb3JtIHdpdGhvdXQgYSBjYWxsYmFjay4gSW5zZXJ0XG4gICAgICAgICAgICAvL2EgbnVsbCBzbyB0aGF0IHRoZSBmb2xsb3dpbmcgY29uY2F0IGlzIGNvcnJlY3QuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gIT09ICdzdHJpbmcnICYmIGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgYXJncy5wdXNoKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcS5hcHBseSh1bmRlZiwgYXJncy5jb25jYXQoW3JlbE5hbWUsIGZvcmNlU3luY10pKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlTm9ybWFsaXplKHJlbE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplKG5hbWUsIHJlbE5hbWUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VMb2FkKGRlcE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgZGVmaW5lZFtkZXBOYW1lXSA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGxEZXAobmFtZSkge1xuICAgICAgICBpZiAoaGFzUHJvcCh3YWl0aW5nLCBuYW1lKSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB3YWl0aW5nW25hbWVdO1xuICAgICAgICAgICAgZGVsZXRlIHdhaXRpbmdbbmFtZV07XG4gICAgICAgICAgICBkZWZpbmluZ1tuYW1lXSA9IHRydWU7XG4gICAgICAgICAgICBtYWluLmFwcGx5KHVuZGVmLCBhcmdzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaGFzUHJvcChkZWZpbmVkLCBuYW1lKSAmJiAhaGFzUHJvcChkZWZpbmluZywgbmFtZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gJyArIG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZpbmVkW25hbWVdO1xuICAgIH1cblxuICAgIC8vVHVybnMgYSBwbHVnaW4hcmVzb3VyY2UgdG8gW3BsdWdpbiwgcmVzb3VyY2VdXG4gICAgLy93aXRoIHRoZSBwbHVnaW4gYmVpbmcgdW5kZWZpbmVkIGlmIHRoZSBuYW1lXG4gICAgLy9kaWQgbm90IGhhdmUgYSBwbHVnaW4gcHJlZml4LlxuICAgIGZ1bmN0aW9uIHNwbGl0UHJlZml4KG5hbWUpIHtcbiAgICAgICAgdmFyIHByZWZpeCxcbiAgICAgICAgICAgIGluZGV4ID0gbmFtZSA/IG5hbWUuaW5kZXhPZignIScpIDogLTE7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICBwcmVmaXggPSBuYW1lLnN1YnN0cmluZygwLCBpbmRleCk7XG4gICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoaW5kZXggKyAxLCBuYW1lLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtwcmVmaXgsIG5hbWVdO1xuICAgIH1cblxuICAgIC8vQ3JlYXRlcyBhIHBhcnRzIGFycmF5IGZvciBhIHJlbE5hbWUgd2hlcmUgZmlyc3QgcGFydCBpcyBwbHVnaW4gSUQsXG4gICAgLy9zZWNvbmQgcGFydCBpcyByZXNvdXJjZSBJRC4gQXNzdW1lcyByZWxOYW1lIGhhcyBhbHJlYWR5IGJlZW4gbm9ybWFsaXplZC5cbiAgICBmdW5jdGlvbiBtYWtlUmVsUGFydHMocmVsTmFtZSkge1xuICAgICAgICByZXR1cm4gcmVsTmFtZSA/IHNwbGl0UHJlZml4KHJlbE5hbWUpIDogW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZXMgYSBuYW1lIG1hcCwgbm9ybWFsaXppbmcgdGhlIG5hbWUsIGFuZCB1c2luZyBhIHBsdWdpblxuICAgICAqIGZvciBub3JtYWxpemF0aW9uIGlmIG5lY2Vzc2FyeS4gR3JhYnMgYSByZWYgdG8gcGx1Z2luXG4gICAgICogdG9vLCBhcyBhbiBvcHRpbWl6YXRpb24uXG4gICAgICovXG4gICAgbWFrZU1hcCA9IGZ1bmN0aW9uIChuYW1lLCByZWxQYXJ0cykge1xuICAgICAgICB2YXIgcGx1Z2luLFxuICAgICAgICAgICAgcGFydHMgPSBzcGxpdFByZWZpeChuYW1lKSxcbiAgICAgICAgICAgIHByZWZpeCA9IHBhcnRzWzBdLFxuICAgICAgICAgICAgcmVsUmVzb3VyY2VOYW1lID0gcmVsUGFydHNbMV07XG5cbiAgICAgICAgbmFtZSA9IHBhcnRzWzFdO1xuXG4gICAgICAgIGlmIChwcmVmaXgpIHtcbiAgICAgICAgICAgIHByZWZpeCA9IG5vcm1hbGl6ZShwcmVmaXgsIHJlbFJlc291cmNlTmFtZSk7XG4gICAgICAgICAgICBwbHVnaW4gPSBjYWxsRGVwKHByZWZpeCk7XG4gICAgICAgIH1cblxuICAgICAgICAvL05vcm1hbGl6ZSBhY2NvcmRpbmdcbiAgICAgICAgaWYgKHByZWZpeCkge1xuICAgICAgICAgICAgaWYgKHBsdWdpbiAmJiBwbHVnaW4ubm9ybWFsaXplKSB7XG4gICAgICAgICAgICAgICAgbmFtZSA9IHBsdWdpbi5ub3JtYWxpemUobmFtZSwgbWFrZU5vcm1hbGl6ZShyZWxSZXNvdXJjZU5hbWUpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmFtZSA9IG5vcm1hbGl6ZShuYW1lLCByZWxSZXNvdXJjZU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmFtZSA9IG5vcm1hbGl6ZShuYW1lLCByZWxSZXNvdXJjZU5hbWUpO1xuICAgICAgICAgICAgcGFydHMgPSBzcGxpdFByZWZpeChuYW1lKTtcbiAgICAgICAgICAgIHByZWZpeCA9IHBhcnRzWzBdO1xuICAgICAgICAgICAgbmFtZSA9IHBhcnRzWzFdO1xuICAgICAgICAgICAgaWYgKHByZWZpeCkge1xuICAgICAgICAgICAgICAgIHBsdWdpbiA9IGNhbGxEZXAocHJlZml4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vVXNpbmcgcmlkaWN1bG91cyBwcm9wZXJ0eSBuYW1lcyBmb3Igc3BhY2UgcmVhc29uc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZjogcHJlZml4ID8gcHJlZml4ICsgJyEnICsgbmFtZSA6IG5hbWUsIC8vZnVsbE5hbWVcbiAgICAgICAgICAgIG46IG5hbWUsXG4gICAgICAgICAgICBwcjogcHJlZml4LFxuICAgICAgICAgICAgcDogcGx1Z2luXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG1ha2VDb25maWcobmFtZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIChjb25maWcgJiYgY29uZmlnLmNvbmZpZyAmJiBjb25maWcuY29uZmlnW25hbWVdKSB8fCB7fTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBoYW5kbGVycyA9IHtcbiAgICAgICAgcmVxdWlyZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlUmVxdWlyZShuYW1lKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXhwb3J0czogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBlID0gZGVmaW5lZFtuYW1lXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChkZWZpbmVkW25hbWVdID0ge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBtb2R1bGU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiBuYW1lLFxuICAgICAgICAgICAgICAgIHVyaTogJycsXG4gICAgICAgICAgICAgICAgZXhwb3J0czogZGVmaW5lZFtuYW1lXSxcbiAgICAgICAgICAgICAgICBjb25maWc6IG1ha2VDb25maWcobmFtZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgbWFpbiA9IGZ1bmN0aW9uIChuYW1lLCBkZXBzLCBjYWxsYmFjaywgcmVsTmFtZSkge1xuICAgICAgICB2YXIgY2pzTW9kdWxlLCBkZXBOYW1lLCByZXQsIG1hcCwgaSwgcmVsUGFydHMsXG4gICAgICAgICAgICBhcmdzID0gW10sXG4gICAgICAgICAgICBjYWxsYmFja1R5cGUgPSB0eXBlb2YgY2FsbGJhY2ssXG4gICAgICAgICAgICB1c2luZ0V4cG9ydHM7XG5cbiAgICAgICAgLy9Vc2UgbmFtZSBpZiBubyByZWxOYW1lXG4gICAgICAgIHJlbE5hbWUgPSByZWxOYW1lIHx8IG5hbWU7XG4gICAgICAgIHJlbFBhcnRzID0gbWFrZVJlbFBhcnRzKHJlbE5hbWUpO1xuXG4gICAgICAgIC8vQ2FsbCB0aGUgY2FsbGJhY2sgdG8gZGVmaW5lIHRoZSBtb2R1bGUsIGlmIG5lY2Vzc2FyeS5cbiAgICAgICAgaWYgKGNhbGxiYWNrVHlwZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY2FsbGJhY2tUeXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvL1B1bGwgb3V0IHRoZSBkZWZpbmVkIGRlcGVuZGVuY2llcyBhbmQgcGFzcyB0aGUgb3JkZXJlZFxuICAgICAgICAgICAgLy92YWx1ZXMgdG8gdGhlIGNhbGxiYWNrLlxuICAgICAgICAgICAgLy9EZWZhdWx0IHRvIFtyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGVdIGlmIG5vIGRlcHNcbiAgICAgICAgICAgIGRlcHMgPSAhZGVwcy5sZW5ndGggJiYgY2FsbGJhY2subGVuZ3RoID8gWydyZXF1aXJlJywgJ2V4cG9ydHMnLCAnbW9kdWxlJ10gOiBkZXBzO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRlcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBtYXAgPSBtYWtlTWFwKGRlcHNbaV0sIHJlbFBhcnRzKTtcbiAgICAgICAgICAgICAgICBkZXBOYW1lID0gbWFwLmY7XG5cbiAgICAgICAgICAgICAgICAvL0Zhc3QgcGF0aCBDb21tb25KUyBzdGFuZGFyZCBkZXBlbmRlbmNpZXMuXG4gICAgICAgICAgICAgICAgaWYgKGRlcE5hbWUgPT09IFwicmVxdWlyZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBoYW5kbGVycy5yZXF1aXJlKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVwTmFtZSA9PT0gXCJleHBvcnRzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9Db21tb25KUyBtb2R1bGUgc3BlYyAxLjFcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tpXSA9IGhhbmRsZXJzLmV4cG9ydHMobmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHVzaW5nRXhwb3J0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZXBOYW1lID09PSBcIm1vZHVsZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vQ29tbW9uSlMgbW9kdWxlIHNwZWMgMS4xXG4gICAgICAgICAgICAgICAgICAgIGNqc01vZHVsZSA9IGFyZ3NbaV0gPSBoYW5kbGVycy5tb2R1bGUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNQcm9wKGRlZmluZWQsIGRlcE5hbWUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNQcm9wKHdhaXRpbmcsIGRlcE5hbWUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNQcm9wKGRlZmluaW5nLCBkZXBOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBhcmdzW2ldID0gY2FsbERlcChkZXBOYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hcC5wKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcC5wLmxvYWQobWFwLm4sIG1ha2VSZXF1aXJlKHJlbE5hbWUsIHRydWUpLCBtYWtlTG9hZChkZXBOYW1lKSwge30pO1xuICAgICAgICAgICAgICAgICAgICBhcmdzW2ldID0gZGVmaW5lZFtkZXBOYW1lXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobmFtZSArICcgbWlzc2luZyAnICsgZGVwTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXQgPSBjYWxsYmFjayA/IGNhbGxiYWNrLmFwcGx5KGRlZmluZWRbbmFtZV0sIGFyZ3MpIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgICAgICAgIC8vSWYgc2V0dGluZyBleHBvcnRzIHZpYSBcIm1vZHVsZVwiIGlzIGluIHBsYXksXG4gICAgICAgICAgICAgICAgLy9mYXZvciB0aGF0IG92ZXIgcmV0dXJuIHZhbHVlIGFuZCBleHBvcnRzLiBBZnRlciB0aGF0LFxuICAgICAgICAgICAgICAgIC8vZmF2b3IgYSBub24tdW5kZWZpbmVkIHJldHVybiB2YWx1ZSBvdmVyIGV4cG9ydHMgdXNlLlxuICAgICAgICAgICAgICAgIGlmIChjanNNb2R1bGUgJiYgY2pzTW9kdWxlLmV4cG9ydHMgIT09IHVuZGVmICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBjanNNb2R1bGUuZXhwb3J0cyAhPT0gZGVmaW5lZFtuYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICBkZWZpbmVkW25hbWVdID0gY2pzTW9kdWxlLmV4cG9ydHM7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXQgIT09IHVuZGVmIHx8ICF1c2luZ0V4cG9ydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9Vc2UgdGhlIHJldHVybiB2YWx1ZSBmcm9tIHRoZSBmdW5jdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgZGVmaW5lZFtuYW1lXSA9IHJldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobmFtZSkge1xuICAgICAgICAgICAgLy9NYXkganVzdCBiZSBhbiBvYmplY3QgZGVmaW5pdGlvbiBmb3IgdGhlIG1vZHVsZS4gT25seVxuICAgICAgICAgICAgLy93b3JyeSBhYm91dCBkZWZpbmluZyBpZiBoYXZlIGEgbW9kdWxlIG5hbWUuXG4gICAgICAgICAgICBkZWZpbmVkW25hbWVdID0gY2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmVxdWlyZWpzID0gcmVxdWlyZSA9IHJlcSA9IGZ1bmN0aW9uIChkZXBzLCBjYWxsYmFjaywgcmVsTmFtZSwgZm9yY2VTeW5jLCBhbHQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBkZXBzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBpZiAoaGFuZGxlcnNbZGVwc10pIHtcbiAgICAgICAgICAgICAgICAvL2NhbGxiYWNrIGluIHRoaXMgY2FzZSBpcyByZWFsbHkgcmVsTmFtZVxuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyc1tkZXBzXShjYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL0p1c3QgcmV0dXJuIHRoZSBtb2R1bGUgd2FudGVkLiBJbiB0aGlzIHNjZW5hcmlvLCB0aGVcbiAgICAgICAgICAgIC8vZGVwcyBhcmcgaXMgdGhlIG1vZHVsZSBuYW1lLCBhbmQgc2Vjb25kIGFyZyAoaWYgcGFzc2VkKVxuICAgICAgICAgICAgLy9pcyBqdXN0IHRoZSByZWxOYW1lLlxuICAgICAgICAgICAgLy9Ob3JtYWxpemUgbW9kdWxlIG5hbWUsIGlmIGl0IGNvbnRhaW5zIC4gb3IgLi5cbiAgICAgICAgICAgIHJldHVybiBjYWxsRGVwKG1ha2VNYXAoZGVwcywgbWFrZVJlbFBhcnRzKGNhbGxiYWNrKSkuZik7XG4gICAgICAgIH0gZWxzZSBpZiAoIWRlcHMuc3BsaWNlKSB7XG4gICAgICAgICAgICAvL2RlcHMgaXMgYSBjb25maWcgb2JqZWN0LCBub3QgYW4gYXJyYXkuXG4gICAgICAgICAgICBjb25maWcgPSBkZXBzO1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5kZXBzKSB7XG4gICAgICAgICAgICAgICAgcmVxKGNvbmZpZy5kZXBzLCBjb25maWcuY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrLnNwbGljZSkge1xuICAgICAgICAgICAgICAgIC8vY2FsbGJhY2sgaXMgYW4gYXJyYXksIHdoaWNoIG1lYW5zIGl0IGlzIGEgZGVwZW5kZW5jeSBsaXN0LlxuICAgICAgICAgICAgICAgIC8vQWRqdXN0IGFyZ3MgaWYgdGhlcmUgYXJlIGRlcGVuZGVuY2llc1xuICAgICAgICAgICAgICAgIGRlcHMgPSBjYWxsYmFjaztcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IHJlbE5hbWU7XG4gICAgICAgICAgICAgICAgcmVsTmFtZSA9IG51bGw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlcHMgPSB1bmRlZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vU3VwcG9ydCByZXF1aXJlKFsnYSddKVxuICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgICAgIC8vSWYgcmVsTmFtZSBpcyBhIGZ1bmN0aW9uLCBpdCBpcyBhbiBlcnJiYWNrIGhhbmRsZXIsXG4gICAgICAgIC8vc28gcmVtb3ZlIGl0LlxuICAgICAgICBpZiAodHlwZW9mIHJlbE5hbWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJlbE5hbWUgPSBmb3JjZVN5bmM7XG4gICAgICAgICAgICBmb3JjZVN5bmMgPSBhbHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvL1NpbXVsYXRlIGFzeW5jIGNhbGxiYWNrO1xuICAgICAgICBpZiAoZm9yY2VTeW5jKSB7XG4gICAgICAgICAgICBtYWluKHVuZGVmLCBkZXBzLCBjYWxsYmFjaywgcmVsTmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL1VzaW5nIGEgbm9uLXplcm8gdmFsdWUgYmVjYXVzZSBvZiBjb25jZXJuIGZvciB3aGF0IG9sZCBicm93c2Vyc1xuICAgICAgICAgICAgLy9kbywgYW5kIGxhdGVzdCBicm93c2VycyBcInVwZ3JhZGVcIiB0byA0IGlmIGxvd2VyIHZhbHVlIGlzIHVzZWQ6XG4gICAgICAgICAgICAvL2h0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL3RpbWVycy5odG1sI2RvbS13aW5kb3d0aW1lcnMtc2V0dGltZW91dDpcbiAgICAgICAgICAgIC8vSWYgd2FudCBhIHZhbHVlIGltbWVkaWF0ZWx5LCB1c2UgcmVxdWlyZSgnaWQnKSBpbnN0ZWFkIC0tIHNvbWV0aGluZ1xuICAgICAgICAgICAgLy90aGF0IHdvcmtzIGluIGFsbW9uZCBvbiB0aGUgZ2xvYmFsIGxldmVsLCBidXQgbm90IGd1YXJhbnRlZWQgYW5kXG4gICAgICAgICAgICAvL3VubGlrZWx5IHRvIHdvcmsgaW4gb3RoZXIgQU1EIGltcGxlbWVudGF0aW9ucy5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG1haW4odW5kZWYsIGRlcHMsIGNhbGxiYWNrLCByZWxOYW1lKTtcbiAgICAgICAgICAgIH0sIDQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlcTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSnVzdCBkcm9wcyB0aGUgY29uZmlnIG9uIHRoZSBmbG9vciwgYnV0IHJldHVybnMgcmVxIGluIGNhc2VcbiAgICAgKiB0aGUgY29uZmlnIHJldHVybiB2YWx1ZSBpcyB1c2VkLlxuICAgICAqL1xuICAgIHJlcS5jb25maWcgPSBmdW5jdGlvbiAoY2ZnKSB7XG4gICAgICAgIHJldHVybiByZXEoY2ZnKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRXhwb3NlIG1vZHVsZSByZWdpc3RyeSBmb3IgZGVidWdnaW5nIGFuZCB0b29saW5nXG4gICAgICovXG4gICAgcmVxdWlyZWpzLl9kZWZpbmVkID0gZGVmaW5lZDtcblxuICAgIGRlZmluZSA9IGZ1bmN0aW9uIChuYW1lLCBkZXBzLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlZSBhbG1vbmQgUkVBRE1FOiBpbmNvcnJlY3QgbW9kdWxlIGJ1aWxkLCBubyBtb2R1bGUgbmFtZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9UaGlzIG1vZHVsZSBtYXkgbm90IGhhdmUgZGVwZW5kZW5jaWVzXG4gICAgICAgIGlmICghZGVwcy5zcGxpY2UpIHtcbiAgICAgICAgICAgIC8vZGVwcyBpcyBub3QgYW4gYXJyYXksIHNvIHByb2JhYmx5IG1lYW5zXG4gICAgICAgICAgICAvL2FuIG9iamVjdCBsaXRlcmFsIG9yIGZhY3RvcnkgZnVuY3Rpb24gZm9yXG4gICAgICAgICAgICAvL3RoZSB2YWx1ZS4gQWRqdXN0IGFyZ3MuXG4gICAgICAgICAgICBjYWxsYmFjayA9IGRlcHM7XG4gICAgICAgICAgICBkZXBzID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWhhc1Byb3AoZGVmaW5lZCwgbmFtZSkgJiYgIWhhc1Byb3Aod2FpdGluZywgbmFtZSkpIHtcbiAgICAgICAgICAgIHdhaXRpbmdbbmFtZV0gPSBbbmFtZSwgZGVwcywgY2FsbGJhY2tdO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGRlZmluZS5hbWQgPSB7XG4gICAgICAgIGpRdWVyeTogdHJ1ZVxuICAgIH07XG59KCkpO1xuXG5kZWZpbmUoXCJhbG1vbmRcIiwgZnVuY3Rpb24oKXt9KTtcblxuIiwiLyoqXHJcbiAqIFtqcy1tZDVde0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbW4xNzgvanMtbWQ1fVxyXG4gKlxyXG4gKiBAbmFtZXNwYWNlIG1kNVxyXG4gKiBAdmVyc2lvbiAwLjQuMlxyXG4gKiBAYXV0aG9yIENoZW4sIFlpLUN5dWFuIFtlbW4xNzhAZ21haWwuY29tXVxyXG4gKiBAY29weXJpZ2h0IENoZW4sIFlpLUN5dWFuIDIwMTQtMjAxN1xyXG4gKiBAbGljZW5zZSBNSVRcclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICB2YXIgcm9vdCA9IHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnID8gd2luZG93IDoge307XHJcbiAgdmFyIE5PREVfSlMgPSAhcm9vdC5KU19NRDVfTk9fTk9ERV9KUyAmJiB0eXBlb2YgcHJvY2VzcyA9PT0gJ29iamVjdCcgJiYgcHJvY2Vzcy52ZXJzaW9ucyAmJiBwcm9jZXNzLnZlcnNpb25zLm5vZGU7XHJcbiAgaWYgKE5PREVfSlMpIHtcclxuICAgIHJvb3QgPSBnbG9iYWw7XHJcbiAgfVxyXG4gIHZhciBDT01NT05fSlMgPSAhcm9vdC5KU19NRDVfTk9fQ09NTU9OX0pTICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzO1xyXG4gIHZhciBBTUQgPSB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQ7XHJcbiAgdmFyIEFSUkFZX0JVRkZFUiA9ICFyb290LkpTX01ENV9OT19BUlJBWV9CVUZGRVIgJiYgdHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJztcclxuICB2YXIgSEVYX0NIQVJTID0gJzAxMjM0NTY3ODlhYmNkZWYnLnNwbGl0KCcnKTtcclxuICB2YXIgRVhUUkEgPSBbMTI4LCAzMjc2OCwgODM4ODYwOCwgLTIxNDc0ODM2NDhdO1xyXG4gIHZhciBTSElGVCA9IFswLCA4LCAxNiwgMjRdO1xyXG4gIHZhciBPVVRQVVRfVFlQRVMgPSBbJ2hleCcsICdhcnJheScsICdkaWdlc3QnLCAnYnVmZmVyJywgJ2FycmF5QnVmZmVyJ107XHJcblxyXG4gIHZhciBibG9ja3MgPSBbXSwgYnVmZmVyODtcclxuICBpZiAoQVJSQVlfQlVGRkVSKSB7XHJcbiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDY4KTtcclxuICAgIGJ1ZmZlcjggPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xyXG4gICAgYmxvY2tzID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlcik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAbWV0aG9kIGhleFxyXG4gICAqIEBtZW1iZXJvZiBtZDVcclxuICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgaGV4IHN0cmluZ1xyXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ9IG1lc3NhZ2UgbWVzc2FnZSB0byBoYXNoXHJcbiAgICogQHJldHVybnMge1N0cmluZ30gSGV4IHN0cmluZ1xyXG4gICAqIEBleGFtcGxlXHJcbiAgICogbWQ1LmhleCgnVGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZycpO1xyXG4gICAqIC8vIGVxdWFsIHRvXHJcbiAgICogbWQ1KCdUaGUgcXVpY2sgYnJvd24gZm94IGp1bXBzIG92ZXIgdGhlIGxhenkgZG9nJyk7XHJcbiAgICovXHJcbiAgLyoqXHJcbiAgICogQG1ldGhvZCBkaWdlc3RcclxuICAgKiBAbWVtYmVyb2YgbWQ1XHJcbiAgICogQGRlc2NyaXB0aW9uIE91dHB1dCBoYXNoIGFzIGJ5dGVzIGFycmF5XHJcbiAgICogQHBhcmFtIHtTdHJpbmd8QXJyYXl8VWludDhBcnJheXxBcnJheUJ1ZmZlcn0gbWVzc2FnZSBtZXNzYWdlIHRvIGhhc2hcclxuICAgKiBAcmV0dXJucyB7QXJyYXl9IEJ5dGVzIGFycmF5XHJcbiAgICogQGV4YW1wbGVcclxuICAgKiBtZDUuZGlnZXN0KCdUaGUgcXVpY2sgYnJvd24gZm94IGp1bXBzIG92ZXIgdGhlIGxhenkgZG9nJyk7XHJcbiAgICovXHJcbiAgLyoqXHJcbiAgICogQG1ldGhvZCBhcnJheVxyXG4gICAqIEBtZW1iZXJvZiBtZDVcclxuICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgYnl0ZXMgYXJyYXlcclxuICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheXxVaW50OEFycmF5fEFycmF5QnVmZmVyfSBtZXNzYWdlIG1lc3NhZ2UgdG8gaGFzaFxyXG4gICAqIEByZXR1cm5zIHtBcnJheX0gQnl0ZXMgYXJyYXlcclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIG1kNS5hcnJheSgnVGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZycpO1xyXG4gICAqL1xyXG4gIC8qKlxyXG4gICAqIEBtZXRob2QgYXJyYXlCdWZmZXJcclxuICAgKiBAbWVtYmVyb2YgbWQ1XHJcbiAgICogQGRlc2NyaXB0aW9uIE91dHB1dCBoYXNoIGFzIEFycmF5QnVmZmVyXHJcbiAgICogQHBhcmFtIHtTdHJpbmd8QXJyYXl8VWludDhBcnJheXxBcnJheUJ1ZmZlcn0gbWVzc2FnZSBtZXNzYWdlIHRvIGhhc2hcclxuICAgKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9IEFycmF5QnVmZmVyXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiBtZDUuYXJyYXlCdWZmZXIoJ1RoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cnKTtcclxuICAgKi9cclxuICAvKipcclxuICAgKiBAbWV0aG9kIGJ1ZmZlclxyXG4gICAqIEBkZXByZWNhdGVkIFRoaXMgbWF5YmUgY29uZnVzZSB3aXRoIEJ1ZmZlciBpbiBub2RlLmpzLiBQbGVhc2UgdXNlIGFycmF5QnVmZmVyIGluc3RlYWQuXHJcbiAgICogQG1lbWJlcm9mIG1kNVxyXG4gICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBBcnJheUJ1ZmZlclxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ9IG1lc3NhZ2UgbWVzc2FnZSB0byBoYXNoXHJcbiAgICogQHJldHVybnMge0FycmF5QnVmZmVyfSBBcnJheUJ1ZmZlclxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogbWQ1LmJ1ZmZlcignVGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZycpO1xyXG4gICAqL1xyXG4gIHZhciBjcmVhdGVPdXRwdXRNZXRob2QgPSBmdW5jdGlvbiAob3V0cHV0VHlwZSkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgIHJldHVybiBuZXcgTWQ1KHRydWUpLnVwZGF0ZShtZXNzYWdlKVtvdXRwdXRUeXBlXSgpO1xyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbWV0aG9kIGNyZWF0ZVxyXG4gICAqIEBtZW1iZXJvZiBtZDVcclxuICAgKiBAZGVzY3JpcHRpb24gQ3JlYXRlIE1kNSBvYmplY3RcclxuICAgKiBAcmV0dXJucyB7TWQ1fSBNZDUgb2JqZWN0LlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogdmFyIGhhc2ggPSBtZDUuY3JlYXRlKCk7XHJcbiAgICovXHJcbiAgLyoqXHJcbiAgICogQG1ldGhvZCB1cGRhdGVcclxuICAgKiBAbWVtYmVyb2YgbWQ1XHJcbiAgICogQGRlc2NyaXB0aW9uIENyZWF0ZSBhbmQgdXBkYXRlIE1kNSBvYmplY3RcclxuICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheXxVaW50OEFycmF5fEFycmF5QnVmZmVyfSBtZXNzYWdlIG1lc3NhZ2UgdG8gaGFzaFxyXG4gICAqIEByZXR1cm5zIHtNZDV9IE1kNSBvYmplY3QuXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiB2YXIgaGFzaCA9IG1kNS51cGRhdGUoJ1RoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cnKTtcclxuICAgKiAvLyBlcXVhbCB0b1xyXG4gICAqIHZhciBoYXNoID0gbWQ1LmNyZWF0ZSgpO1xyXG4gICAqIGhhc2gudXBkYXRlKCdUaGUgcXVpY2sgYnJvd24gZm94IGp1bXBzIG92ZXIgdGhlIGxhenkgZG9nJyk7XHJcbiAgICovXHJcbiAgdmFyIGNyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtZXRob2QgPSBjcmVhdGVPdXRwdXRNZXRob2QoJ2hleCcpO1xyXG4gICAgaWYgKE5PREVfSlMpIHtcclxuICAgICAgbWV0aG9kID0gbm9kZVdyYXAobWV0aG9kKTtcclxuICAgIH1cclxuICAgIG1ldGhvZC5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHJldHVybiBuZXcgTWQ1KCk7XHJcbiAgICB9O1xyXG4gICAgbWV0aG9kLnVwZGF0ZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgIHJldHVybiBtZXRob2QuY3JlYXRlKCkudXBkYXRlKG1lc3NhZ2UpO1xyXG4gICAgfTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgT1VUUFVUX1RZUEVTLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHZhciB0eXBlID0gT1VUUFVUX1RZUEVTW2ldO1xyXG4gICAgICBtZXRob2RbdHlwZV0gPSBjcmVhdGVPdXRwdXRNZXRob2QodHlwZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWV0aG9kO1xyXG4gIH07XHJcblxyXG4gIHZhciBub2RlV3JhcCA9IGZ1bmN0aW9uIChtZXRob2QpIHtcclxuICAgIHZhciBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcclxuICAgIHZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7XHJcbiAgICB2YXIgbm9kZU1ldGhvZCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gY3J5cHRvLmNyZWF0ZUhhc2goJ21kNScpLnVwZGF0ZShtZXNzYWdlLCAndXRmOCcpLmRpZ2VzdCgnaGV4Jyk7XHJcbiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5jb25zdHJ1Y3RvciA9PT0gQXJyYXlCdWZmZXIpIHtcclxuICAgICAgICBtZXNzYWdlID0gbmV3IFVpbnQ4QXJyYXkobWVzc2FnZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5sZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBtZXRob2QobWVzc2FnZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGNyeXB0by5jcmVhdGVIYXNoKCdtZDUnKS51cGRhdGUobmV3IEJ1ZmZlcihtZXNzYWdlKSkuZGlnZXN0KCdoZXgnKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gbm9kZU1ldGhvZDtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZDUgY2xhc3NcclxuICAgKiBAY2xhc3MgTWQ1XHJcbiAgICogQGRlc2NyaXB0aW9uIFRoaXMgaXMgaW50ZXJuYWwgY2xhc3MuXHJcbiAgICogQHNlZSB7QGxpbmsgbWQ1LmNyZWF0ZX1cclxuICAgKi9cclxuICBmdW5jdGlvbiBNZDUoc2hhcmVkTWVtb3J5KSB7XHJcbiAgICBpZiAoc2hhcmVkTWVtb3J5KSB7XHJcbiAgICAgIGJsb2Nrc1swXSA9IGJsb2Nrc1sxNl0gPSBibG9ja3NbMV0gPSBibG9ja3NbMl0gPSBibG9ja3NbM10gPVxyXG4gICAgICBibG9ja3NbNF0gPSBibG9ja3NbNV0gPSBibG9ja3NbNl0gPSBibG9ja3NbN10gPVxyXG4gICAgICBibG9ja3NbOF0gPSBibG9ja3NbOV0gPSBibG9ja3NbMTBdID0gYmxvY2tzWzExXSA9XHJcbiAgICAgIGJsb2Nrc1sxMl0gPSBibG9ja3NbMTNdID0gYmxvY2tzWzE0XSA9IGJsb2Nrc1sxNV0gPSAwO1xyXG4gICAgICB0aGlzLmJsb2NrcyA9IGJsb2NrcztcclxuICAgICAgdGhpcy5idWZmZXI4ID0gYnVmZmVyODtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChBUlJBWV9CVUZGRVIpIHtcclxuICAgICAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDY4KTtcclxuICAgICAgICB0aGlzLmJ1ZmZlcjggPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xyXG4gICAgICAgIHRoaXMuYmxvY2tzID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlcik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5ibG9ja3MgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuaDAgPSB0aGlzLmgxID0gdGhpcy5oMiA9IHRoaXMuaDMgPSB0aGlzLnN0YXJ0ID0gdGhpcy5ieXRlcyA9IDA7XHJcbiAgICB0aGlzLmZpbmFsaXplZCA9IHRoaXMuaGFzaGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmZpcnN0ID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBtZXRob2QgdXBkYXRlXHJcbiAgICogQG1lbWJlcm9mIE1kNVxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEBkZXNjcmlwdGlvbiBVcGRhdGUgaGFzaFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fFVpbnQ4QXJyYXl8QXJyYXlCdWZmZXJ9IG1lc3NhZ2UgbWVzc2FnZSB0byBoYXNoXHJcbiAgICogQHJldHVybnMge01kNX0gTWQ1IG9iamVjdC5cclxuICAgKiBAc2VlIHtAbGluayBtZDUudXBkYXRlfVxyXG4gICAqL1xyXG4gIE1kNS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgbm90U3RyaW5nID0gdHlwZW9mKG1lc3NhZ2UpICE9ICdzdHJpbmcnO1xyXG4gICAgaWYgKG5vdFN0cmluZyAmJiBtZXNzYWdlLmNvbnN0cnVjdG9yID09IHJvb3QuQXJyYXlCdWZmZXIpIHtcclxuICAgICAgbWVzc2FnZSA9IG5ldyBVaW50OEFycmF5KG1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gICAgdmFyIGNvZGUsIGluZGV4ID0gMCwgaSwgbGVuZ3RoID0gbWVzc2FnZS5sZW5ndGggfHwgMCwgYmxvY2tzID0gdGhpcy5ibG9ja3M7XHJcbiAgICB2YXIgYnVmZmVyOCA9IHRoaXMuYnVmZmVyODtcclxuXHJcbiAgICB3aGlsZSAoaW5kZXggPCBsZW5ndGgpIHtcclxuICAgICAgaWYgKHRoaXMuaGFzaGVkKSB7XHJcbiAgICAgICAgdGhpcy5oYXNoZWQgPSBmYWxzZTtcclxuICAgICAgICBibG9ja3NbMF0gPSBibG9ja3NbMTZdO1xyXG4gICAgICAgIGJsb2Nrc1sxNl0gPSBibG9ja3NbMV0gPSBibG9ja3NbMl0gPSBibG9ja3NbM10gPVxyXG4gICAgICAgIGJsb2Nrc1s0XSA9IGJsb2Nrc1s1XSA9IGJsb2Nrc1s2XSA9IGJsb2Nrc1s3XSA9XHJcbiAgICAgICAgYmxvY2tzWzhdID0gYmxvY2tzWzldID0gYmxvY2tzWzEwXSA9IGJsb2Nrc1sxMV0gPVxyXG4gICAgICAgIGJsb2Nrc1sxMl0gPSBibG9ja3NbMTNdID0gYmxvY2tzWzE0XSA9IGJsb2Nrc1sxNV0gPSAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAobm90U3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKEFSUkFZX0JVRkZFUikge1xyXG4gICAgICAgICAgZm9yIChpID0gdGhpcy5zdGFydDsgaW5kZXggPCBsZW5ndGggJiYgaSA8IDY0OyArK2luZGV4KSB7XHJcbiAgICAgICAgICAgIGJ1ZmZlcjhbaSsrXSA9IG1lc3NhZ2VbaW5kZXhdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBmb3IgKGkgPSB0aGlzLnN0YXJ0OyBpbmRleCA8IGxlbmd0aCAmJiBpIDwgNjQ7ICsraW5kZXgpIHtcclxuICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gbWVzc2FnZVtpbmRleF0gPDwgU0hJRlRbaSsrICYgM107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChBUlJBWV9CVUZGRVIpIHtcclxuICAgICAgICAgIGZvciAoaSA9IHRoaXMuc3RhcnQ7IGluZGV4IDwgbGVuZ3RoICYmIGkgPCA2NDsgKytpbmRleCkge1xyXG4gICAgICAgICAgICBjb2RlID0gbWVzc2FnZS5jaGFyQ29kZUF0KGluZGV4KTtcclxuICAgICAgICAgICAgaWYgKGNvZGUgPCAweDgwKSB7XHJcbiAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gY29kZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2RlIDwgMHg4MDApIHtcclxuICAgICAgICAgICAgICBidWZmZXI4W2krK10gPSAweGMwIHwgKGNvZGUgPj4gNik7XHJcbiAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gMHg4MCB8IChjb2RlICYgMHgzZik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29kZSA8IDB4ZDgwMCB8fCBjb2RlID49IDB4ZTAwMCkge1xyXG4gICAgICAgICAgICAgIGJ1ZmZlcjhbaSsrXSA9IDB4ZTAgfCAoY29kZSA+PiAxMik7XHJcbiAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gMHg4MCB8ICgoY29kZSA+PiA2KSAmIDB4M2YpO1xyXG4gICAgICAgICAgICAgIGJ1ZmZlcjhbaSsrXSA9IDB4ODAgfCAoY29kZSAmIDB4M2YpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNvZGUgPSAweDEwMDAwICsgKCgoY29kZSAmIDB4M2ZmKSA8PCAxMCkgfCAobWVzc2FnZS5jaGFyQ29kZUF0KCsraW5kZXgpICYgMHgzZmYpKTtcclxuICAgICAgICAgICAgICBidWZmZXI4W2krK10gPSAweGYwIHwgKGNvZGUgPj4gMTgpO1xyXG4gICAgICAgICAgICAgIGJ1ZmZlcjhbaSsrXSA9IDB4ODAgfCAoKGNvZGUgPj4gMTIpICYgMHgzZik7XHJcbiAgICAgICAgICAgICAgYnVmZmVyOFtpKytdID0gMHg4MCB8ICgoY29kZSA+PiA2KSAmIDB4M2YpO1xyXG4gICAgICAgICAgICAgIGJ1ZmZlcjhbaSsrXSA9IDB4ODAgfCAoY29kZSAmIDB4M2YpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGZvciAoaSA9IHRoaXMuc3RhcnQ7IGluZGV4IDwgbGVuZ3RoICYmIGkgPCA2NDsgKytpbmRleCkge1xyXG4gICAgICAgICAgICBjb2RlID0gbWVzc2FnZS5jaGFyQ29kZUF0KGluZGV4KTtcclxuICAgICAgICAgICAgaWYgKGNvZGUgPCAweDgwKSB7XHJcbiAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gY29kZSA8PCBTSElGVFtpKysgJiAzXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2RlIDwgMHg4MDApIHtcclxuICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHhjMCB8IChjb2RlID4+IDYpKSA8PCBTSElGVFtpKysgJiAzXTtcclxuICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8IChjb2RlICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvZGUgPCAweGQ4MDAgfHwgY29kZSA+PSAweGUwMDApIHtcclxuICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHhlMCB8IChjb2RlID4+IDEyKSkgPDwgU0hJRlRbaSsrICYgM107XHJcbiAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoKGNvZGUgPj4gNikgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XHJcbiAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoY29kZSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjb2RlID0gMHgxMDAwMCArICgoKGNvZGUgJiAweDNmZikgPDwgMTApIHwgKG1lc3NhZ2UuY2hhckNvZGVBdCgrK2luZGV4KSAmIDB4M2ZmKSk7XHJcbiAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ZjAgfCAoY29kZSA+PiAxOCkpIDw8IFNISUZUW2krKyAmIDNdO1xyXG4gICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKChjb2RlID4+IDEyKSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcclxuICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8ICgoY29kZSA+PiA2KSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcclxuICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8IChjb2RlICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMubGFzdEJ5dGVJbmRleCA9IGk7XHJcbiAgICAgIHRoaXMuYnl0ZXMgKz0gaSAtIHRoaXMuc3RhcnQ7XHJcbiAgICAgIGlmIChpID49IDY0KSB7XHJcbiAgICAgICAgdGhpcy5zdGFydCA9IGkgLSA2NDtcclxuICAgICAgICB0aGlzLmhhc2goKTtcclxuICAgICAgICB0aGlzLmhhc2hlZCA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zdGFydCA9IGk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIE1kNS5wcm90b3R5cGUuZmluYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgdmFyIGJsb2NrcyA9IHRoaXMuYmxvY2tzLCBpID0gdGhpcy5sYXN0Qnl0ZUluZGV4O1xyXG4gICAgYmxvY2tzW2kgPj4gMl0gfD0gRVhUUkFbaSAmIDNdO1xyXG4gICAgaWYgKGkgPj0gNTYpIHtcclxuICAgICAgaWYgKCF0aGlzLmhhc2hlZCkge1xyXG4gICAgICAgIHRoaXMuaGFzaCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGJsb2Nrc1swXSA9IGJsb2Nrc1sxNl07XHJcbiAgICAgIGJsb2Nrc1sxNl0gPSBibG9ja3NbMV0gPSBibG9ja3NbMl0gPSBibG9ja3NbM10gPVxyXG4gICAgICBibG9ja3NbNF0gPSBibG9ja3NbNV0gPSBibG9ja3NbNl0gPSBibG9ja3NbN10gPVxyXG4gICAgICBibG9ja3NbOF0gPSBibG9ja3NbOV0gPSBibG9ja3NbMTBdID0gYmxvY2tzWzExXSA9XHJcbiAgICAgIGJsb2Nrc1sxMl0gPSBibG9ja3NbMTNdID0gYmxvY2tzWzE0XSA9IGJsb2Nrc1sxNV0gPSAwO1xyXG4gICAgfVxyXG4gICAgYmxvY2tzWzE0XSA9IHRoaXMuYnl0ZXMgPDwgMztcclxuICAgIHRoaXMuaGFzaCgpO1xyXG4gIH07XHJcblxyXG4gIE1kNS5wcm90b3R5cGUuaGFzaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhLCBiLCBjLCBkLCBiYywgZGEsIGJsb2NrcyA9IHRoaXMuYmxvY2tzO1xyXG5cclxuICAgIGlmICh0aGlzLmZpcnN0KSB7XHJcbiAgICAgIGEgPSBibG9ja3NbMF0gLSA2ODA4NzY5Mzc7XHJcbiAgICAgIGEgPSAoYSA8PCA3IHwgYSA+Pj4gMjUpIC0gMjcxNzMzODc5IDw8IDA7XHJcbiAgICAgIGQgPSAoLTE3MzI1ODQxOTQgXiBhICYgMjAwNDMxODA3MSkgKyBibG9ja3NbMV0gLSAxMTc4MzA3MDg7XHJcbiAgICAgIGQgPSAoZCA8PCAxMiB8IGQgPj4+IDIwKSArIGEgPDwgMDtcclxuICAgICAgYyA9ICgtMjcxNzMzODc5IF4gKGQgJiAoYSBeIC0yNzE3MzM4NzkpKSkgKyBibG9ja3NbMl0gLSAxMTI2NDc4Mzc1O1xyXG4gICAgICBjID0gKGMgPDwgMTcgfCBjID4+PiAxNSkgKyBkIDw8IDA7XHJcbiAgICAgIGIgPSAoYSBeIChjICYgKGQgXiBhKSkpICsgYmxvY2tzWzNdIC0gMTMxNjI1OTIwOTtcclxuICAgICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyA8PCAwO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYSA9IHRoaXMuaDA7XHJcbiAgICAgIGIgPSB0aGlzLmgxO1xyXG4gICAgICBjID0gdGhpcy5oMjtcclxuICAgICAgZCA9IHRoaXMuaDM7XHJcbiAgICAgIGEgKz0gKGQgXiAoYiAmIChjIF4gZCkpKSArIGJsb2Nrc1swXSAtIDY4MDg3NjkzNjtcclxuICAgICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIDw8IDA7XHJcbiAgICAgIGQgKz0gKGMgXiAoYSAmIChiIF4gYykpKSArIGJsb2Nrc1sxXSAtIDM4OTU2NDU4NjtcclxuICAgICAgZCA9IChkIDw8IDEyIHwgZCA+Pj4gMjApICsgYSA8PCAwO1xyXG4gICAgICBjICs9IChiIF4gKGQgJiAoYSBeIGIpKSkgKyBibG9ja3NbMl0gKyA2MDYxMDU4MTk7XHJcbiAgICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgPDwgMDtcclxuICAgICAgYiArPSAoYSBeIChjICYgKGQgXiBhKSkpICsgYmxvY2tzWzNdIC0gMTA0NDUyNTMzMDtcclxuICAgICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyA8PCAwO1xyXG4gICAgfVxyXG5cclxuICAgIGEgKz0gKGQgXiAoYiAmIChjIF4gZCkpKSArIGJsb2Nrc1s0XSAtIDE3NjQxODg5NztcclxuICAgIGEgPSAoYSA8PCA3IHwgYSA+Pj4gMjUpICsgYiA8PCAwO1xyXG4gICAgZCArPSAoYyBeIChhICYgKGIgXiBjKSkpICsgYmxvY2tzWzVdICsgMTIwMDA4MDQyNjtcclxuICAgIGQgPSAoZCA8PCAxMiB8IGQgPj4+IDIwKSArIGEgPDwgMDtcclxuICAgIGMgKz0gKGIgXiAoZCAmIChhIF4gYikpKSArIGJsb2Nrc1s2XSAtIDE0NzMyMzEzNDE7XHJcbiAgICBjID0gKGMgPDwgMTcgfCBjID4+PiAxNSkgKyBkIDw8IDA7XHJcbiAgICBiICs9IChhIF4gKGMgJiAoZCBeIGEpKSkgKyBibG9ja3NbN10gLSA0NTcwNTk4MztcclxuICAgIGIgPSAoYiA8PCAyMiB8IGIgPj4+IDEwKSArIGMgPDwgMDtcclxuICAgIGEgKz0gKGQgXiAoYiAmIChjIF4gZCkpKSArIGJsb2Nrc1s4XSArIDE3NzAwMzU0MTY7XHJcbiAgICBhID0gKGEgPDwgNyB8IGEgPj4+IDI1KSArIGIgPDwgMDtcclxuICAgIGQgKz0gKGMgXiAoYSAmIChiIF4gYykpKSArIGJsb2Nrc1s5XSAtIDE5NTg0MTQ0MTc7XHJcbiAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIDw8IDA7XHJcbiAgICBjICs9IChiIF4gKGQgJiAoYSBeIGIpKSkgKyBibG9ja3NbMTBdIC0gNDIwNjM7XHJcbiAgICBjID0gKGMgPDwgMTcgfCBjID4+PiAxNSkgKyBkIDw8IDA7XHJcbiAgICBiICs9IChhIF4gKGMgJiAoZCBeIGEpKSkgKyBibG9ja3NbMTFdIC0gMTk5MDQwNDE2MjtcclxuICAgIGIgPSAoYiA8PCAyMiB8IGIgPj4+IDEwKSArIGMgPDwgMDtcclxuICAgIGEgKz0gKGQgXiAoYiAmIChjIF4gZCkpKSArIGJsb2Nrc1sxMl0gKyAxODA0NjAzNjgyO1xyXG4gICAgYSA9IChhIDw8IDcgfCBhID4+PiAyNSkgKyBiIDw8IDA7XHJcbiAgICBkICs9IChjIF4gKGEgJiAoYiBeIGMpKSkgKyBibG9ja3NbMTNdIC0gNDAzNDExMDE7XHJcbiAgICBkID0gKGQgPDwgMTIgfCBkID4+PiAyMCkgKyBhIDw8IDA7XHJcbiAgICBjICs9IChiIF4gKGQgJiAoYSBeIGIpKSkgKyBibG9ja3NbMTRdIC0gMTUwMjAwMjI5MDtcclxuICAgIGMgPSAoYyA8PCAxNyB8IGMgPj4+IDE1KSArIGQgPDwgMDtcclxuICAgIGIgKz0gKGEgXiAoYyAmIChkIF4gYSkpKSArIGJsb2Nrc1sxNV0gKyAxMjM2NTM1MzI5O1xyXG4gICAgYiA9IChiIDw8IDIyIHwgYiA+Pj4gMTApICsgYyA8PCAwO1xyXG4gICAgYSArPSAoYyBeIChkICYgKGIgXiBjKSkpICsgYmxvY2tzWzFdIC0gMTY1Nzk2NTEwO1xyXG4gICAgYSA9IChhIDw8IDUgfCBhID4+PiAyNykgKyBiIDw8IDA7XHJcbiAgICBkICs9IChiIF4gKGMgJiAoYSBeIGIpKSkgKyBibG9ja3NbNl0gLSAxMDY5NTAxNjMyO1xyXG4gICAgZCA9IChkIDw8IDkgfCBkID4+PiAyMykgKyBhIDw8IDA7XHJcbiAgICBjICs9IChhIF4gKGIgJiAoZCBeIGEpKSkgKyBibG9ja3NbMTFdICsgNjQzNzE3NzEzO1xyXG4gICAgYyA9IChjIDw8IDE0IHwgYyA+Pj4gMTgpICsgZCA8PCAwO1xyXG4gICAgYiArPSAoZCBeIChhICYgKGMgXiBkKSkpICsgYmxvY2tzWzBdIC0gMzczODk3MzAyO1xyXG4gICAgYiA9IChiIDw8IDIwIHwgYiA+Pj4gMTIpICsgYyA8PCAwO1xyXG4gICAgYSArPSAoYyBeIChkICYgKGIgXiBjKSkpICsgYmxvY2tzWzVdIC0gNzAxNTU4NjkxO1xyXG4gICAgYSA9IChhIDw8IDUgfCBhID4+PiAyNykgKyBiIDw8IDA7XHJcbiAgICBkICs9IChiIF4gKGMgJiAoYSBeIGIpKSkgKyBibG9ja3NbMTBdICsgMzgwMTYwODM7XHJcbiAgICBkID0gKGQgPDwgOSB8IGQgPj4+IDIzKSArIGEgPDwgMDtcclxuICAgIGMgKz0gKGEgXiAoYiAmIChkIF4gYSkpKSArIGJsb2Nrc1sxNV0gLSA2NjA0NzgzMzU7XHJcbiAgICBjID0gKGMgPDwgMTQgfCBjID4+PiAxOCkgKyBkIDw8IDA7XHJcbiAgICBiICs9IChkIF4gKGEgJiAoYyBeIGQpKSkgKyBibG9ja3NbNF0gLSA0MDU1Mzc4NDg7XHJcbiAgICBiID0gKGIgPDwgMjAgfCBiID4+PiAxMikgKyBjIDw8IDA7XHJcbiAgICBhICs9IChjIF4gKGQgJiAoYiBeIGMpKSkgKyBibG9ja3NbOV0gKyA1Njg0NDY0Mzg7XHJcbiAgICBhID0gKGEgPDwgNSB8IGEgPj4+IDI3KSArIGIgPDwgMDtcclxuICAgIGQgKz0gKGIgXiAoYyAmIChhIF4gYikpKSArIGJsb2Nrc1sxNF0gLSAxMDE5ODAzNjkwO1xyXG4gICAgZCA9IChkIDw8IDkgfCBkID4+PiAyMykgKyBhIDw8IDA7XHJcbiAgICBjICs9IChhIF4gKGIgJiAoZCBeIGEpKSkgKyBibG9ja3NbM10gLSAxODczNjM5NjE7XHJcbiAgICBjID0gKGMgPDwgMTQgfCBjID4+PiAxOCkgKyBkIDw8IDA7XHJcbiAgICBiICs9IChkIF4gKGEgJiAoYyBeIGQpKSkgKyBibG9ja3NbOF0gKyAxMTYzNTMxNTAxO1xyXG4gICAgYiA9IChiIDw8IDIwIHwgYiA+Pj4gMTIpICsgYyA8PCAwO1xyXG4gICAgYSArPSAoYyBeIChkICYgKGIgXiBjKSkpICsgYmxvY2tzWzEzXSAtIDE0NDQ2ODE0Njc7XHJcbiAgICBhID0gKGEgPDwgNSB8IGEgPj4+IDI3KSArIGIgPDwgMDtcclxuICAgIGQgKz0gKGIgXiAoYyAmIChhIF4gYikpKSArIGJsb2Nrc1syXSAtIDUxNDAzNzg0O1xyXG4gICAgZCA9IChkIDw8IDkgfCBkID4+PiAyMykgKyBhIDw8IDA7XHJcbiAgICBjICs9IChhIF4gKGIgJiAoZCBeIGEpKSkgKyBibG9ja3NbN10gKyAxNzM1MzI4NDczO1xyXG4gICAgYyA9IChjIDw8IDE0IHwgYyA+Pj4gMTgpICsgZCA8PCAwO1xyXG4gICAgYiArPSAoZCBeIChhICYgKGMgXiBkKSkpICsgYmxvY2tzWzEyXSAtIDE5MjY2MDc3MzQ7XHJcbiAgICBiID0gKGIgPDwgMjAgfCBiID4+PiAxMikgKyBjIDw8IDA7XHJcbiAgICBiYyA9IGIgXiBjO1xyXG4gICAgYSArPSAoYmMgXiBkKSArIGJsb2Nrc1s1XSAtIDM3ODU1ODtcclxuICAgIGEgPSAoYSA8PCA0IHwgYSA+Pj4gMjgpICsgYiA8PCAwO1xyXG4gICAgZCArPSAoYmMgXiBhKSArIGJsb2Nrc1s4XSAtIDIwMjI1NzQ0NjM7XHJcbiAgICBkID0gKGQgPDwgMTEgfCBkID4+PiAyMSkgKyBhIDw8IDA7XHJcbiAgICBkYSA9IGQgXiBhO1xyXG4gICAgYyArPSAoZGEgXiBiKSArIGJsb2Nrc1sxMV0gKyAxODM5MDMwNTYyO1xyXG4gICAgYyA9IChjIDw8IDE2IHwgYyA+Pj4gMTYpICsgZCA8PCAwO1xyXG4gICAgYiArPSAoZGEgXiBjKSArIGJsb2Nrc1sxNF0gLSAzNTMwOTU1NjtcclxuICAgIGIgPSAoYiA8PCAyMyB8IGIgPj4+IDkpICsgYyA8PCAwO1xyXG4gICAgYmMgPSBiIF4gYztcclxuICAgIGEgKz0gKGJjIF4gZCkgKyBibG9ja3NbMV0gLSAxNTMwOTkyMDYwO1xyXG4gICAgYSA9IChhIDw8IDQgfCBhID4+PiAyOCkgKyBiIDw8IDA7XHJcbiAgICBkICs9IChiYyBeIGEpICsgYmxvY2tzWzRdICsgMTI3Mjg5MzM1MztcclxuICAgIGQgPSAoZCA8PCAxMSB8IGQgPj4+IDIxKSArIGEgPDwgMDtcclxuICAgIGRhID0gZCBeIGE7XHJcbiAgICBjICs9IChkYSBeIGIpICsgYmxvY2tzWzddIC0gMTU1NDk3NjMyO1xyXG4gICAgYyA9IChjIDw8IDE2IHwgYyA+Pj4gMTYpICsgZCA8PCAwO1xyXG4gICAgYiArPSAoZGEgXiBjKSArIGJsb2Nrc1sxMF0gLSAxMDk0NzMwNjQwO1xyXG4gICAgYiA9IChiIDw8IDIzIHwgYiA+Pj4gOSkgKyBjIDw8IDA7XHJcbiAgICBiYyA9IGIgXiBjO1xyXG4gICAgYSArPSAoYmMgXiBkKSArIGJsb2Nrc1sxM10gKyA2ODEyNzkxNzQ7XHJcbiAgICBhID0gKGEgPDwgNCB8IGEgPj4+IDI4KSArIGIgPDwgMDtcclxuICAgIGQgKz0gKGJjIF4gYSkgKyBibG9ja3NbMF0gLSAzNTg1MzcyMjI7XHJcbiAgICBkID0gKGQgPDwgMTEgfCBkID4+PiAyMSkgKyBhIDw8IDA7XHJcbiAgICBkYSA9IGQgXiBhO1xyXG4gICAgYyArPSAoZGEgXiBiKSArIGJsb2Nrc1szXSAtIDcyMjUyMTk3OTtcclxuICAgIGMgPSAoYyA8PCAxNiB8IGMgPj4+IDE2KSArIGQgPDwgMDtcclxuICAgIGIgKz0gKGRhIF4gYykgKyBibG9ja3NbNl0gKyA3NjAyOTE4OTtcclxuICAgIGIgPSAoYiA8PCAyMyB8IGIgPj4+IDkpICsgYyA8PCAwO1xyXG4gICAgYmMgPSBiIF4gYztcclxuICAgIGEgKz0gKGJjIF4gZCkgKyBibG9ja3NbOV0gLSA2NDAzNjQ0ODc7XHJcbiAgICBhID0gKGEgPDwgNCB8IGEgPj4+IDI4KSArIGIgPDwgMDtcclxuICAgIGQgKz0gKGJjIF4gYSkgKyBibG9ja3NbMTJdIC0gNDIxODE1ODM1O1xyXG4gICAgZCA9IChkIDw8IDExIHwgZCA+Pj4gMjEpICsgYSA8PCAwO1xyXG4gICAgZGEgPSBkIF4gYTtcclxuICAgIGMgKz0gKGRhIF4gYikgKyBibG9ja3NbMTVdICsgNTMwNzQyNTIwO1xyXG4gICAgYyA9IChjIDw8IDE2IHwgYyA+Pj4gMTYpICsgZCA8PCAwO1xyXG4gICAgYiArPSAoZGEgXiBjKSArIGJsb2Nrc1syXSAtIDk5NTMzODY1MTtcclxuICAgIGIgPSAoYiA8PCAyMyB8IGIgPj4+IDkpICsgYyA8PCAwO1xyXG4gICAgYSArPSAoYyBeIChiIHwgfmQpKSArIGJsb2Nrc1swXSAtIDE5ODYzMDg0NDtcclxuICAgIGEgPSAoYSA8PCA2IHwgYSA+Pj4gMjYpICsgYiA8PCAwO1xyXG4gICAgZCArPSAoYiBeIChhIHwgfmMpKSArIGJsb2Nrc1s3XSArIDExMjY4OTE0MTU7XHJcbiAgICBkID0gKGQgPDwgMTAgfCBkID4+PiAyMikgKyBhIDw8IDA7XHJcbiAgICBjICs9IChhIF4gKGQgfCB+YikpICsgYmxvY2tzWzE0XSAtIDE0MTYzNTQ5MDU7XHJcbiAgICBjID0gKGMgPDwgMTUgfCBjID4+PiAxNykgKyBkIDw8IDA7XHJcbiAgICBiICs9IChkIF4gKGMgfCB+YSkpICsgYmxvY2tzWzVdIC0gNTc0MzQwNTU7XHJcbiAgICBiID0gKGIgPDwgMjEgfCBiID4+PiAxMSkgKyBjIDw8IDA7XHJcbiAgICBhICs9IChjIF4gKGIgfCB+ZCkpICsgYmxvY2tzWzEyXSArIDE3MDA0ODU1NzE7XHJcbiAgICBhID0gKGEgPDwgNiB8IGEgPj4+IDI2KSArIGIgPDwgMDtcclxuICAgIGQgKz0gKGIgXiAoYSB8IH5jKSkgKyBibG9ja3NbM10gLSAxODk0OTg2NjA2O1xyXG4gICAgZCA9IChkIDw8IDEwIHwgZCA+Pj4gMjIpICsgYSA8PCAwO1xyXG4gICAgYyArPSAoYSBeIChkIHwgfmIpKSArIGJsb2Nrc1sxMF0gLSAxMDUxNTIzO1xyXG4gICAgYyA9IChjIDw8IDE1IHwgYyA+Pj4gMTcpICsgZCA8PCAwO1xyXG4gICAgYiArPSAoZCBeIChjIHwgfmEpKSArIGJsb2Nrc1sxXSAtIDIwNTQ5MjI3OTk7XHJcbiAgICBiID0gKGIgPDwgMjEgfCBiID4+PiAxMSkgKyBjIDw8IDA7XHJcbiAgICBhICs9IChjIF4gKGIgfCB+ZCkpICsgYmxvY2tzWzhdICsgMTg3MzMxMzM1OTtcclxuICAgIGEgPSAoYSA8PCA2IHwgYSA+Pj4gMjYpICsgYiA8PCAwO1xyXG4gICAgZCArPSAoYiBeIChhIHwgfmMpKSArIGJsb2Nrc1sxNV0gLSAzMDYxMTc0NDtcclxuICAgIGQgPSAoZCA8PCAxMCB8IGQgPj4+IDIyKSArIGEgPDwgMDtcclxuICAgIGMgKz0gKGEgXiAoZCB8IH5iKSkgKyBibG9ja3NbNl0gLSAxNTYwMTk4MzgwO1xyXG4gICAgYyA9IChjIDw8IDE1IHwgYyA+Pj4gMTcpICsgZCA8PCAwO1xyXG4gICAgYiArPSAoZCBeIChjIHwgfmEpKSArIGJsb2Nrc1sxM10gKyAxMzA5MTUxNjQ5O1xyXG4gICAgYiA9IChiIDw8IDIxIHwgYiA+Pj4gMTEpICsgYyA8PCAwO1xyXG4gICAgYSArPSAoYyBeIChiIHwgfmQpKSArIGJsb2Nrc1s0XSAtIDE0NTUyMzA3MDtcclxuICAgIGEgPSAoYSA8PCA2IHwgYSA+Pj4gMjYpICsgYiA8PCAwO1xyXG4gICAgZCArPSAoYiBeIChhIHwgfmMpKSArIGJsb2Nrc1sxMV0gLSAxMTIwMjEwMzc5O1xyXG4gICAgZCA9IChkIDw8IDEwIHwgZCA+Pj4gMjIpICsgYSA8PCAwO1xyXG4gICAgYyArPSAoYSBeIChkIHwgfmIpKSArIGJsb2Nrc1syXSArIDcxODc4NzI1OTtcclxuICAgIGMgPSAoYyA8PCAxNSB8IGMgPj4+IDE3KSArIGQgPDwgMDtcclxuICAgIGIgKz0gKGQgXiAoYyB8IH5hKSkgKyBibG9ja3NbOV0gLSAzNDM0ODU1NTE7XHJcbiAgICBiID0gKGIgPDwgMjEgfCBiID4+PiAxMSkgKyBjIDw8IDA7XHJcblxyXG4gICAgaWYgKHRoaXMuZmlyc3QpIHtcclxuICAgICAgdGhpcy5oMCA9IGEgKyAxNzMyNTg0MTkzIDw8IDA7XHJcbiAgICAgIHRoaXMuaDEgPSBiIC0gMjcxNzMzODc5IDw8IDA7XHJcbiAgICAgIHRoaXMuaDIgPSBjIC0gMTczMjU4NDE5NCA8PCAwO1xyXG4gICAgICB0aGlzLmgzID0gZCArIDI3MTczMzg3OCA8PCAwO1xyXG4gICAgICB0aGlzLmZpcnN0ID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmgwID0gdGhpcy5oMCArIGEgPDwgMDtcclxuICAgICAgdGhpcy5oMSA9IHRoaXMuaDEgKyBiIDw8IDA7XHJcbiAgICAgIHRoaXMuaDIgPSB0aGlzLmgyICsgYyA8PCAwO1xyXG4gICAgICB0aGlzLmgzID0gdGhpcy5oMyArIGQgPDwgMDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbWV0aG9kIGhleFxyXG4gICAqIEBtZW1iZXJvZiBNZDVcclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgaGV4IHN0cmluZ1xyXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IEhleCBzdHJpbmdcclxuICAgKiBAc2VlIHtAbGluayBtZDUuaGV4fVxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogaGFzaC5oZXgoKTtcclxuICAgKi9cclxuICBNZDUucHJvdG90eXBlLmhleCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuZmluYWxpemUoKTtcclxuXHJcbiAgICB2YXIgaDAgPSB0aGlzLmgwLCBoMSA9IHRoaXMuaDEsIGgyID0gdGhpcy5oMiwgaDMgPSB0aGlzLmgzO1xyXG5cclxuICAgIHJldHVybiBIRVhfQ0hBUlNbKGgwID4+IDQpICYgMHgwRl0gKyBIRVhfQ0hBUlNbaDAgJiAweDBGXSArXHJcbiAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDEyKSAmIDB4MEZdICsgSEVYX0NIQVJTWyhoMCA+PiA4KSAmIDB4MEZdICtcclxuICAgICAgIEhFWF9DSEFSU1soaDAgPj4gMjApICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgwID4+IDE2KSAmIDB4MEZdICtcclxuICAgICAgIEhFWF9DSEFSU1soaDAgPj4gMjgpICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgwID4+IDI0KSAmIDB4MEZdICtcclxuICAgICAgIEhFWF9DSEFSU1soaDEgPj4gNCkgJiAweDBGXSArIEhFWF9DSEFSU1toMSAmIDB4MEZdICtcclxuICAgICAgIEhFWF9DSEFSU1soaDEgPj4gMTIpICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgxID4+IDgpICYgMHgwRl0gK1xyXG4gICAgICAgSEVYX0NIQVJTWyhoMSA+PiAyMCkgJiAweDBGXSArIEhFWF9DSEFSU1soaDEgPj4gMTYpICYgMHgwRl0gK1xyXG4gICAgICAgSEVYX0NIQVJTWyhoMSA+PiAyOCkgJiAweDBGXSArIEhFWF9DSEFSU1soaDEgPj4gMjQpICYgMHgwRl0gK1xyXG4gICAgICAgSEVYX0NIQVJTWyhoMiA+PiA0KSAmIDB4MEZdICsgSEVYX0NIQVJTW2gyICYgMHgwRl0gK1xyXG4gICAgICAgSEVYX0NIQVJTWyhoMiA+PiAxMikgJiAweDBGXSArIEhFWF9DSEFSU1soaDIgPj4gOCkgJiAweDBGXSArXHJcbiAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDIwKSAmIDB4MEZdICsgSEVYX0NIQVJTWyhoMiA+PiAxNikgJiAweDBGXSArXHJcbiAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDI4KSAmIDB4MEZdICsgSEVYX0NIQVJTWyhoMiA+PiAyNCkgJiAweDBGXSArXHJcbiAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDQpICYgMHgwRl0gKyBIRVhfQ0hBUlNbaDMgJiAweDBGXSArXHJcbiAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDEyKSAmIDB4MEZdICsgSEVYX0NIQVJTWyhoMyA+PiA4KSAmIDB4MEZdICtcclxuICAgICAgIEhFWF9DSEFSU1soaDMgPj4gMjApICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgzID4+IDE2KSAmIDB4MEZdICtcclxuICAgICAgIEhFWF9DSEFSU1soaDMgPj4gMjgpICYgMHgwRl0gKyBIRVhfQ0hBUlNbKGgzID4+IDI0KSAmIDB4MEZdO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBtZXRob2QgdG9TdHJpbmdcclxuICAgKiBAbWVtYmVyb2YgTWQ1XHJcbiAgICogQGluc3RhbmNlXHJcbiAgICogQGRlc2NyaXB0aW9uIE91dHB1dCBoYXNoIGFzIGhleCBzdHJpbmdcclxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSBIZXggc3RyaW5nXHJcbiAgICogQHNlZSB7QGxpbmsgbWQ1LmhleH1cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIGhhc2gudG9TdHJpbmcoKTtcclxuICAgKi9cclxuICBNZDUucHJvdG90eXBlLnRvU3RyaW5nID0gTWQ1LnByb3RvdHlwZS5oZXg7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBtZXRob2QgZGlnZXN0XHJcbiAgICogQG1lbWJlcm9mIE1kNVxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBieXRlcyBhcnJheVxyXG4gICAqIEByZXR1cm5zIHtBcnJheX0gQnl0ZXMgYXJyYXlcclxuICAgKiBAc2VlIHtAbGluayBtZDUuZGlnZXN0fVxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogaGFzaC5kaWdlc3QoKTtcclxuICAgKi9cclxuICBNZDUucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuZmluYWxpemUoKTtcclxuXHJcbiAgICB2YXIgaDAgPSB0aGlzLmgwLCBoMSA9IHRoaXMuaDEsIGgyID0gdGhpcy5oMiwgaDMgPSB0aGlzLmgzO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgaDAgJiAweEZGLCAoaDAgPj4gOCkgJiAweEZGLCAoaDAgPj4gMTYpICYgMHhGRiwgKGgwID4+IDI0KSAmIDB4RkYsXHJcbiAgICAgIGgxICYgMHhGRiwgKGgxID4+IDgpICYgMHhGRiwgKGgxID4+IDE2KSAmIDB4RkYsIChoMSA+PiAyNCkgJiAweEZGLFxyXG4gICAgICBoMiAmIDB4RkYsIChoMiA+PiA4KSAmIDB4RkYsIChoMiA+PiAxNikgJiAweEZGLCAoaDIgPj4gMjQpICYgMHhGRixcclxuICAgICAgaDMgJiAweEZGLCAoaDMgPj4gOCkgJiAweEZGLCAoaDMgPj4gMTYpICYgMHhGRiwgKGgzID4+IDI0KSAmIDB4RkZcclxuICAgIF07XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG1ldGhvZCBhcnJheVxyXG4gICAqIEBtZW1iZXJvZiBNZDVcclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgYnl0ZXMgYXJyYXlcclxuICAgKiBAcmV0dXJucyB7QXJyYXl9IEJ5dGVzIGFycmF5XHJcbiAgICogQHNlZSB7QGxpbmsgbWQ1LmFycmF5fVxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogaGFzaC5hcnJheSgpO1xyXG4gICAqL1xyXG4gIE1kNS5wcm90b3R5cGUuYXJyYXkgPSBNZDUucHJvdG90eXBlLmRpZ2VzdDtcclxuXHJcbiAgLyoqXHJcbiAgICogQG1ldGhvZCBhcnJheUJ1ZmZlclxyXG4gICAqIEBtZW1iZXJvZiBNZDVcclxuICAgKiBAaW5zdGFuY2VcclxuICAgKiBAZGVzY3JpcHRpb24gT3V0cHV0IGhhc2ggYXMgQXJyYXlCdWZmZXJcclxuICAgKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9IEFycmF5QnVmZmVyXHJcbiAgICogQHNlZSB7QGxpbmsgbWQ1LmFycmF5QnVmZmVyfVxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogaGFzaC5hcnJheUJ1ZmZlcigpO1xyXG4gICAqL1xyXG4gIE1kNS5wcm90b3R5cGUuYXJyYXlCdWZmZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmZpbmFsaXplKCk7XHJcblxyXG4gICAgdmFyIGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigxNik7XHJcbiAgICB2YXIgYmxvY2tzID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlcik7XHJcbiAgICBibG9ja3NbMF0gPSB0aGlzLmgwO1xyXG4gICAgYmxvY2tzWzFdID0gdGhpcy5oMTtcclxuICAgIGJsb2Nrc1syXSA9IHRoaXMuaDI7XHJcbiAgICBibG9ja3NbM10gPSB0aGlzLmgzO1xyXG4gICAgcmV0dXJuIGJ1ZmZlcjtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAbWV0aG9kIGJ1ZmZlclxyXG4gICAqIEBkZXByZWNhdGVkIFRoaXMgbWF5YmUgY29uZnVzZSB3aXRoIEJ1ZmZlciBpbiBub2RlLmpzLiBQbGVhc2UgdXNlIGFycmF5QnVmZmVyIGluc3RlYWQuXHJcbiAgICogQG1lbWJlcm9mIE1kNVxyXG4gICAqIEBpbnN0YW5jZVxyXG4gICAqIEBkZXNjcmlwdGlvbiBPdXRwdXQgaGFzaCBhcyBBcnJheUJ1ZmZlclxyXG4gICAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn0gQXJyYXlCdWZmZXJcclxuICAgKiBAc2VlIHtAbGluayBtZDUuYnVmZmVyfVxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogaGFzaC5idWZmZXIoKTtcclxuICAgKi9cclxuICBNZDUucHJvdG90eXBlLmJ1ZmZlciA9IE1kNS5wcm90b3R5cGUuYXJyYXlCdWZmZXI7XHJcblxyXG4gIHZhciBleHBvcnRzID0gY3JlYXRlTWV0aG9kKCk7XHJcblxyXG4gIGlmIChDT01NT05fSlMpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcclxuICB9IGVsc2Uge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAbWV0aG9kIG1kNVxiXHJcbiAgICAgKiBAZGVzY3JpcHRpb24gTWQ1IGhhc2ggZnVuY3Rpb24sIGV4cG9ydCB0byBnbG9iYWwgaW4gYnJvd3NlcnMuXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheXxVaW50OEFycmF5fEFycmF5QnVmZmVyfSBtZXNzYWdlIG1lc3NhZ2UgdG8gaGFzaFxyXG4gICAgICogQHJldHVybnMge1N0cmluZ30gbWQ1IGhhc2hlc1xyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIG1kNSgnJyk7IC8vIGQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlXHJcbiAgICAgKiBtZDUoJ1RoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cnKTsgLy8gOWUxMDdkOWQzNzJiYjY4MjZiZDgxZDM1NDJhNDE5ZDZcclxuICAgICAqIG1kNSgnVGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZy4nKTsgLy8gZTRkOTA5YzI5MGQwZmIxY2EwNjhmZmFkZGYyMmNiZDBcclxuICAgICAqXHJcbiAgICAgKiAvLyBJdCBhbHNvIHN1cHBvcnRzIFVURi04IGVuY29kaW5nXHJcbiAgICAgKiBtZDUoJ+S4reaWhycpOyAvLyBhN2JhYzIyMzlmY2RjYjNhMDY3OTAzZDgwNzdjNGEwN1xyXG4gICAgICpcclxuICAgICAqIC8vIEl0IGFsc28gc3VwcG9ydHMgYnl0ZSBgQXJyYXlgLCBgVWludDhBcnJheWAsIGBBcnJheUJ1ZmZlcmBcclxuICAgICAqIG1kNShbXSk7IC8vIGQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlXHJcbiAgICAgKiBtZDUobmV3IFVpbnQ4QXJyYXkoW10pKTsgLy8gZDQxZDhjZDk4ZjAwYjIwNGU5ODAwOTk4ZWNmODQyN2VcclxuICAgICAqL1xyXG4gICAgcm9vdC5tZDUgPSBleHBvcnRzO1xyXG4gICAgaWYgKEFNRCkge1xyXG4gICAgICBkZWZpbmUoJ21kNScsW10sZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBleHBvcnRzO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn0pKCk7XHJcblxuZGVmaW5lKFwiWnluZ2FNZDVcIiwgW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJtZDVcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBtZDUpIHtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBtZDU7IC8vIEp1c3QgYSB3cmFwcGVyIHRvIHJlbmFtZSBhIGRldmVsb3BlciBzdXBwbGllZCBtZDUgdG8gWnluZ2FNZDVcblx0cmV0dXJuIG1kNTtcbn0pO1xuXG4iLCIhZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIGZ1bmN0aW9uIFZOb2RlKCkge31cbiAgICBmdW5jdGlvbiBoKG5vZGVOYW1lLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIHZhciBsYXN0U2ltcGxlLCBjaGlsZCwgc2ltcGxlLCBpLCBjaGlsZHJlbiA9IEVNUFRZX0NISUxEUkVOO1xuICAgICAgICBmb3IgKGkgPSBhcmd1bWVudHMubGVuZ3RoOyBpLS0gPiAyOyApIHN0YWNrLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXMgJiYgbnVsbCAhPSBhdHRyaWJ1dGVzLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoIXN0YWNrLmxlbmd0aCkgc3RhY2sucHVzaChhdHRyaWJ1dGVzLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIGRlbGV0ZSBhdHRyaWJ1dGVzLmNoaWxkcmVuO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIGlmICgoY2hpbGQgPSBzdGFjay5wb3AoKSkgJiYgdm9pZCAwICE9PSBjaGlsZC5wb3ApIGZvciAoaSA9IGNoaWxkLmxlbmd0aDsgaS0tOyApIHN0YWNrLnB1c2goY2hpbGRbaV0pOyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgnYm9vbGVhbicgPT0gdHlwZW9mIGNoaWxkKSBjaGlsZCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoc2ltcGxlID0gJ2Z1bmN0aW9uJyAhPSB0eXBlb2Ygbm9kZU5hbWUpIGlmIChudWxsID09IGNoaWxkKSBjaGlsZCA9ICcnOyBlbHNlIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgY2hpbGQpIGNoaWxkID0gU3RyaW5nKGNoaWxkKTsgZWxzZSBpZiAoJ3N0cmluZycgIT0gdHlwZW9mIGNoaWxkKSBzaW1wbGUgPSAhMTtcbiAgICAgICAgICAgIGlmIChzaW1wbGUgJiYgbGFzdFNpbXBsZSkgY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV0gKz0gY2hpbGQ7IGVsc2UgaWYgKGNoaWxkcmVuID09PSBFTVBUWV9DSElMRFJFTikgY2hpbGRyZW4gPSBbIGNoaWxkIF07IGVsc2UgY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICAgICAgICBsYXN0U2ltcGxlID0gc2ltcGxlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwID0gbmV3IFZOb2RlKCk7XG4gICAgICAgIHAubm9kZU5hbWUgPSBub2RlTmFtZTtcbiAgICAgICAgcC5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICBwLmF0dHJpYnV0ZXMgPSBudWxsID09IGF0dHJpYnV0ZXMgPyB2b2lkIDAgOiBhdHRyaWJ1dGVzO1xuICAgICAgICBwLmtleSA9IG51bGwgPT0gYXR0cmlidXRlcyA/IHZvaWQgMCA6IGF0dHJpYnV0ZXMua2V5O1xuICAgICAgICBpZiAodm9pZCAwICE9PSBvcHRpb25zLnZub2RlKSBvcHRpb25zLnZub2RlKHApO1xuICAgICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZXh0ZW5kKG9iaiwgcHJvcHMpIHtcbiAgICAgICAgZm9yICh2YXIgaSBpbiBwcm9wcykgb2JqW2ldID0gcHJvcHNbaV07XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsb25lRWxlbWVudCh2bm9kZSwgcHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIGgodm5vZGUubm9kZU5hbWUsIGV4dGVuZChleHRlbmQoe30sIHZub2RlLmF0dHJpYnV0ZXMpLCBwcm9wcyksIGFyZ3VtZW50cy5sZW5ndGggPiAyID8gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpIDogdm5vZGUuY2hpbGRyZW4pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbnF1ZXVlUmVuZGVyKGNvbXBvbmVudCkge1xuICAgICAgICBpZiAoIWNvbXBvbmVudC5fX2QgJiYgKGNvbXBvbmVudC5fX2QgPSAhMCkgJiYgMSA9PSBpdGVtcy5wdXNoKGNvbXBvbmVudCkpIChvcHRpb25zLmRlYm91bmNlUmVuZGVyaW5nIHx8IGRlZmVyKShyZXJlbmRlcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlcmVuZGVyKCkge1xuICAgICAgICB2YXIgcCwgbGlzdCA9IGl0ZW1zO1xuICAgICAgICBpdGVtcyA9IFtdO1xuICAgICAgICB3aGlsZSAocCA9IGxpc3QucG9wKCkpIGlmIChwLl9fZCkgcmVuZGVyQ29tcG9uZW50KHApO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc1NhbWVOb2RlVHlwZShub2RlLCB2bm9kZSwgaHlkcmF0aW5nKSB7XG4gICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2Ygdm5vZGUgfHwgJ251bWJlcicgPT0gdHlwZW9mIHZub2RlKSByZXR1cm4gdm9pZCAwICE9PSBub2RlLnNwbGl0VGV4dDtcbiAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiB2bm9kZS5ub2RlTmFtZSkgcmV0dXJuICFub2RlLl9jb21wb25lbnRDb25zdHJ1Y3RvciAmJiBpc05hbWVkTm9kZShub2RlLCB2bm9kZS5ub2RlTmFtZSk7IGVsc2UgcmV0dXJuIGh5ZHJhdGluZyB8fCBub2RlLl9jb21wb25lbnRDb25zdHJ1Y3RvciA9PT0gdm5vZGUubm9kZU5hbWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzTmFtZWROb2RlKG5vZGUsIG5vZGVOYW1lKSB7XG4gICAgICAgIHJldHVybiBub2RlLl9fbiA9PT0gbm9kZU5hbWUgfHwgbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXROb2RlUHJvcHModm5vZGUpIHtcbiAgICAgICAgdmFyIHByb3BzID0gZXh0ZW5kKHt9LCB2bm9kZS5hdHRyaWJ1dGVzKTtcbiAgICAgICAgcHJvcHMuY2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjtcbiAgICAgICAgdmFyIGRlZmF1bHRQcm9wcyA9IHZub2RlLm5vZGVOYW1lLmRlZmF1bHRQcm9wcztcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gZGVmYXVsdFByb3BzKSBmb3IgKHZhciBpIGluIGRlZmF1bHRQcm9wcykgaWYgKHZvaWQgMCA9PT0gcHJvcHNbaV0pIHByb3BzW2ldID0gZGVmYXVsdFByb3BzW2ldO1xuICAgICAgICByZXR1cm4gcHJvcHM7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZU5vZGUobm9kZU5hbWUsIGlzU3ZnKSB7XG4gICAgICAgIHZhciBub2RlID0gaXNTdmcgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgbm9kZU5hbWUpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSk7XG4gICAgICAgIG5vZGUuX19uID0gbm9kZU5hbWU7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZW1vdmVOb2RlKG5vZGUpIHtcbiAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChwYXJlbnROb2RlKSBwYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRBY2Nlc3Nvcihub2RlLCBuYW1lLCBvbGQsIHZhbHVlLCBpc1N2Zykge1xuICAgICAgICBpZiAoJ2NsYXNzTmFtZScgPT09IG5hbWUpIG5hbWUgPSAnY2xhc3MnO1xuICAgICAgICBpZiAoJ2tleScgPT09IG5hbWUpIDsgZWxzZSBpZiAoJ3JlZicgPT09IG5hbWUpIHtcbiAgICAgICAgICAgIGlmIChvbGQpIG9sZChudWxsKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgdmFsdWUobm9kZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoJ2NsYXNzJyA9PT0gbmFtZSAmJiAhaXNTdmcpIG5vZGUuY2xhc3NOYW1lID0gdmFsdWUgfHwgJyc7IGVsc2UgaWYgKCdzdHlsZScgPT09IG5hbWUpIHtcbiAgICAgICAgICAgIGlmICghdmFsdWUgfHwgJ3N0cmluZycgPT0gdHlwZW9mIHZhbHVlIHx8ICdzdHJpbmcnID09IHR5cGVvZiBvbGQpIG5vZGUuc3R5bGUuY3NzVGV4dCA9IHZhbHVlIHx8ICcnO1xuICAgICAgICAgICAgaWYgKHZhbHVlICYmICdvYmplY3QnID09IHR5cGVvZiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICgnc3RyaW5nJyAhPSB0eXBlb2Ygb2xkKSBmb3IgKHZhciBpIGluIG9sZCkgaWYgKCEoaSBpbiB2YWx1ZSkpIG5vZGUuc3R5bGVbaV0gPSAnJztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHZhbHVlKSBub2RlLnN0eWxlW2ldID0gJ251bWJlcicgPT0gdHlwZW9mIHZhbHVlW2ldICYmICExID09PSBJU19OT05fRElNRU5TSU9OQUwudGVzdChpKSA/IHZhbHVlW2ldICsgJ3B4JyA6IHZhbHVlW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCdkYW5nZXJvdXNseVNldElubmVySFRNTCcgPT09IG5hbWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgbm9kZS5pbm5lckhUTUwgPSB2YWx1ZS5fX2h0bWwgfHwgJyc7XG4gICAgICAgIH0gZWxzZSBpZiAoJ28nID09IG5hbWVbMF0gJiYgJ24nID09IG5hbWVbMV0pIHtcbiAgICAgICAgICAgIHZhciB1c2VDYXB0dXJlID0gbmFtZSAhPT0gKG5hbWUgPSBuYW1lLnJlcGxhY2UoL0NhcHR1cmUkLywgJycpKTtcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyaW5nKDIpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvbGQpIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBldmVudFByb3h5LCB1c2VDYXB0dXJlKTtcbiAgICAgICAgICAgIH0gZWxzZSBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgZXZlbnRQcm94eSwgdXNlQ2FwdHVyZSk7XG4gICAgICAgICAgICAobm9kZS5fX2wgfHwgKG5vZGUuX19sID0ge30pKVtuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2UgaWYgKCdsaXN0JyAhPT0gbmFtZSAmJiAndHlwZScgIT09IG5hbWUgJiYgIWlzU3ZnICYmIG5hbWUgaW4gbm9kZSkge1xuICAgICAgICAgICAgc2V0UHJvcGVydHkobm9kZSwgbmFtZSwgbnVsbCA9PSB2YWx1ZSA/ICcnIDogdmFsdWUpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gdmFsdWUgfHwgITEgPT09IHZhbHVlKSBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBucyA9IGlzU3ZnICYmIG5hbWUgIT09IChuYW1lID0gbmFtZS5yZXBsYWNlKC9eeGxpbmtcXDo/LywgJycpKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHZhbHVlIHx8ICExID09PSB2YWx1ZSkgaWYgKG5zKSBub2RlLnJlbW92ZUF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgbmFtZS50b0xvd2VyQ2FzZSgpKTsgZWxzZSBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTsgZWxzZSBpZiAoJ2Z1bmN0aW9uJyAhPSB0eXBlb2YgdmFsdWUpIGlmIChucykgbm9kZS5zZXRBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIG5hbWUudG9Mb3dlckNhc2UoKSwgdmFsdWUpOyBlbHNlIG5vZGUuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRQcm9wZXJ0eShub2RlLCBuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbm9kZVtuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH1cbiAgICBmdW5jdGlvbiBldmVudFByb3h5KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX19sW2UudHlwZV0ob3B0aW9ucy5ldmVudCAmJiBvcHRpb25zLmV2ZW50KGUpIHx8IGUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmbHVzaE1vdW50cygpIHtcbiAgICAgICAgdmFyIGM7XG4gICAgICAgIHdoaWxlIChjID0gbW91bnRzLnBvcCgpKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hZnRlck1vdW50KSBvcHRpb25zLmFmdGVyTW91bnQoYyk7XG4gICAgICAgICAgICBpZiAoYy5jb21wb25lbnREaWRNb3VudCkgYy5jb21wb25lbnREaWRNb3VudCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpZmYoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwsIHBhcmVudCwgY29tcG9uZW50Um9vdCkge1xuICAgICAgICBpZiAoIWRpZmZMZXZlbCsrKSB7XG4gICAgICAgICAgICBpc1N2Z01vZGUgPSBudWxsICE9IHBhcmVudCAmJiB2b2lkIDAgIT09IHBhcmVudC5vd25lclNWR0VsZW1lbnQ7XG4gICAgICAgICAgICBoeWRyYXRpbmcgPSBudWxsICE9IGRvbSAmJiAhKCdfX3ByZWFjdGF0dHJfJyBpbiBkb20pO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXQgPSBpZGlmZihkb20sIHZub2RlLCBjb250ZXh0LCBtb3VudEFsbCwgY29tcG9uZW50Um9vdCk7XG4gICAgICAgIGlmIChwYXJlbnQgJiYgcmV0LnBhcmVudE5vZGUgIT09IHBhcmVudCkgcGFyZW50LmFwcGVuZENoaWxkKHJldCk7XG4gICAgICAgIGlmICghLS1kaWZmTGV2ZWwpIHtcbiAgICAgICAgICAgIGh5ZHJhdGluZyA9ICExO1xuICAgICAgICAgICAgaWYgKCFjb21wb25lbnRSb290KSBmbHVzaE1vdW50cygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlkaWZmKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsLCBjb21wb25lbnRSb290KSB7XG4gICAgICAgIHZhciBvdXQgPSBkb20sIHByZXZTdmdNb2RlID0gaXNTdmdNb2RlO1xuICAgICAgICBpZiAobnVsbCA9PSB2bm9kZSB8fCAnYm9vbGVhbicgPT0gdHlwZW9mIHZub2RlKSB2bm9kZSA9ICcnO1xuICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHZub2RlIHx8ICdudW1iZXInID09IHR5cGVvZiB2bm9kZSkge1xuICAgICAgICAgICAgaWYgKGRvbSAmJiB2b2lkIDAgIT09IGRvbS5zcGxpdFRleHQgJiYgZG9tLnBhcmVudE5vZGUgJiYgKCFkb20uX2NvbXBvbmVudCB8fCBjb21wb25lbnRSb290KSkge1xuICAgICAgICAgICAgICAgIGlmIChkb20ubm9kZVZhbHVlICE9IHZub2RlKSBkb20ubm9kZVZhbHVlID0gdm5vZGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAoZG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb20ucGFyZW50Tm9kZSkgZG9tLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG91dCwgZG9tKTtcbiAgICAgICAgICAgICAgICAgICAgcmVjb2xsZWN0Tm9kZVRyZWUoZG9tLCAhMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0Ll9fcHJlYWN0YXR0cl8gPSAhMDtcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZub2RlTmFtZSA9IHZub2RlLm5vZGVOYW1lO1xuICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2Ygdm5vZGVOYW1lKSByZXR1cm4gYnVpbGRDb21wb25lbnRGcm9tVk5vZGUoZG9tLCB2bm9kZSwgY29udGV4dCwgbW91bnRBbGwpO1xuICAgICAgICBpc1N2Z01vZGUgPSAnc3ZnJyA9PT0gdm5vZGVOYW1lID8gITAgOiAnZm9yZWlnbk9iamVjdCcgPT09IHZub2RlTmFtZSA/ICExIDogaXNTdmdNb2RlO1xuICAgICAgICB2bm9kZU5hbWUgPSBTdHJpbmcodm5vZGVOYW1lKTtcbiAgICAgICAgaWYgKCFkb20gfHwgIWlzTmFtZWROb2RlKGRvbSwgdm5vZGVOYW1lKSkge1xuICAgICAgICAgICAgb3V0ID0gY3JlYXRlTm9kZSh2bm9kZU5hbWUsIGlzU3ZnTW9kZSk7XG4gICAgICAgICAgICBpZiAoZG9tKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGRvbS5maXJzdENoaWxkKSBvdXQuYXBwZW5kQ2hpbGQoZG9tLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIGlmIChkb20ucGFyZW50Tm9kZSkgZG9tLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG91dCwgZG9tKTtcbiAgICAgICAgICAgICAgICByZWNvbGxlY3ROb2RlVHJlZShkb20sICEwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgZmMgPSBvdXQuZmlyc3RDaGlsZCwgcHJvcHMgPSBvdXQuX19wcmVhY3RhdHRyXywgdmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XG4gICAgICAgIGlmIChudWxsID09IHByb3BzKSB7XG4gICAgICAgICAgICBwcm9wcyA9IG91dC5fX3ByZWFjdGF0dHJfID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gb3V0LmF0dHJpYnV0ZXMsIGkgPSBhLmxlbmd0aDsgaS0tOyApIHByb3BzW2FbaV0ubmFtZV0gPSBhW2ldLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaHlkcmF0aW5nICYmIHZjaGlsZHJlbiAmJiAxID09PSB2Y2hpbGRyZW4ubGVuZ3RoICYmICdzdHJpbmcnID09IHR5cGVvZiB2Y2hpbGRyZW5bMF0gJiYgbnVsbCAhPSBmYyAmJiB2b2lkIDAgIT09IGZjLnNwbGl0VGV4dCAmJiBudWxsID09IGZjLm5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgICBpZiAoZmMubm9kZVZhbHVlICE9IHZjaGlsZHJlblswXSkgZmMubm9kZVZhbHVlID0gdmNoaWxkcmVuWzBdO1xuICAgICAgICB9IGVsc2UgaWYgKHZjaGlsZHJlbiAmJiB2Y2hpbGRyZW4ubGVuZ3RoIHx8IG51bGwgIT0gZmMpIGlubmVyRGlmZk5vZGUob3V0LCB2Y2hpbGRyZW4sIGNvbnRleHQsIG1vdW50QWxsLCBoeWRyYXRpbmcgfHwgbnVsbCAhPSBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCk7XG4gICAgICAgIGRpZmZBdHRyaWJ1dGVzKG91dCwgdm5vZGUuYXR0cmlidXRlcywgcHJvcHMpO1xuICAgICAgICBpc1N2Z01vZGUgPSBwcmV2U3ZnTW9kZTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5uZXJEaWZmTm9kZShkb20sIHZjaGlsZHJlbiwgY29udGV4dCwgbW91bnRBbGwsIGlzSHlkcmF0aW5nKSB7XG4gICAgICAgIHZhciBqLCBjLCBmLCB2Y2hpbGQsIGNoaWxkLCBvcmlnaW5hbENoaWxkcmVuID0gZG9tLmNoaWxkTm9kZXMsIGNoaWxkcmVuID0gW10sIGtleWVkID0ge30sIGtleWVkTGVuID0gMCwgbWluID0gMCwgbGVuID0gb3JpZ2luYWxDaGlsZHJlbi5sZW5ndGgsIGNoaWxkcmVuTGVuID0gMCwgdmxlbiA9IHZjaGlsZHJlbiA/IHZjaGlsZHJlbi5sZW5ndGggOiAwO1xuICAgICAgICBpZiAoMCAhPT0gbGVuKSBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgX2NoaWxkID0gb3JpZ2luYWxDaGlsZHJlbltpXSwgcHJvcHMgPSBfY2hpbGQuX19wcmVhY3RhdHRyXywga2V5ID0gdmxlbiAmJiBwcm9wcyA/IF9jaGlsZC5fY29tcG9uZW50ID8gX2NoaWxkLl9jb21wb25lbnQuX19rIDogcHJvcHMua2V5IDogbnVsbDtcbiAgICAgICAgICAgIGlmIChudWxsICE9IGtleSkge1xuICAgICAgICAgICAgICAgIGtleWVkTGVuKys7XG4gICAgICAgICAgICAgICAga2V5ZWRba2V5XSA9IF9jaGlsZDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcHMgfHwgKHZvaWQgMCAhPT0gX2NoaWxkLnNwbGl0VGV4dCA/IGlzSHlkcmF0aW5nID8gX2NoaWxkLm5vZGVWYWx1ZS50cmltKCkgOiAhMCA6IGlzSHlkcmF0aW5nKSkgY2hpbGRyZW5bY2hpbGRyZW5MZW4rK10gPSBfY2hpbGQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKDAgIT09IHZsZW4pIGZvciAodmFyIGkgPSAwOyBpIDwgdmxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2Y2hpbGQgPSB2Y2hpbGRyZW5baV07XG4gICAgICAgICAgICBjaGlsZCA9IG51bGw7XG4gICAgICAgICAgICB2YXIga2V5ID0gdmNoaWxkLmtleTtcbiAgICAgICAgICAgIGlmIChudWxsICE9IGtleSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXllZExlbiAmJiB2b2lkIDAgIT09IGtleWVkW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBrZXllZFtrZXldO1xuICAgICAgICAgICAgICAgICAgICBrZXllZFtrZXldID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICBrZXllZExlbi0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWNoaWxkICYmIG1pbiA8IGNoaWxkcmVuTGVuKSBmb3IgKGogPSBtaW47IGogPCBjaGlsZHJlbkxlbjsgaisrKSBpZiAodm9pZCAwICE9PSBjaGlsZHJlbltqXSAmJiBpc1NhbWVOb2RlVHlwZShjID0gY2hpbGRyZW5bal0sIHZjaGlsZCwgaXNIeWRyYXRpbmcpKSB7XG4gICAgICAgICAgICAgICAgY2hpbGQgPSBjO1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuW2pdID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChqID09PSBjaGlsZHJlbkxlbiAtIDEpIGNoaWxkcmVuTGVuLS07XG4gICAgICAgICAgICAgICAgaWYgKGogPT09IG1pbikgbWluKys7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGlsZCA9IGlkaWZmKGNoaWxkLCB2Y2hpbGQsIGNvbnRleHQsIG1vdW50QWxsKTtcbiAgICAgICAgICAgIGYgPSBvcmlnaW5hbENoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkICYmIGNoaWxkICE9PSBkb20gJiYgY2hpbGQgIT09IGYpIGlmIChudWxsID09IGYpIGRvbS5hcHBlbmRDaGlsZChjaGlsZCk7IGVsc2UgaWYgKGNoaWxkID09PSBmLm5leHRTaWJsaW5nKSByZW1vdmVOb2RlKGYpOyBlbHNlIGRvbS5pbnNlcnRCZWZvcmUoY2hpbGQsIGYpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXllZExlbikgZm9yICh2YXIgaSBpbiBrZXllZCkgaWYgKHZvaWQgMCAhPT0ga2V5ZWRbaV0pIHJlY29sbGVjdE5vZGVUcmVlKGtleWVkW2ldLCAhMSk7XG4gICAgICAgIHdoaWxlIChtaW4gPD0gY2hpbGRyZW5MZW4pIGlmICh2b2lkIDAgIT09IChjaGlsZCA9IGNoaWxkcmVuW2NoaWxkcmVuTGVuLS1dKSkgcmVjb2xsZWN0Tm9kZVRyZWUoY2hpbGQsICExKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVjb2xsZWN0Tm9kZVRyZWUobm9kZSwgdW5tb3VudE9ubHkpIHtcbiAgICAgICAgdmFyIGNvbXBvbmVudCA9IG5vZGUuX2NvbXBvbmVudDtcbiAgICAgICAgaWYgKGNvbXBvbmVudCkgdW5tb3VudENvbXBvbmVudChjb21wb25lbnQpOyBlbHNlIHtcbiAgICAgICAgICAgIGlmIChudWxsICE9IG5vZGUuX19wcmVhY3RhdHRyXyAmJiBub2RlLl9fcHJlYWN0YXR0cl8ucmVmKSBub2RlLl9fcHJlYWN0YXR0cl8ucmVmKG51bGwpO1xuICAgICAgICAgICAgaWYgKCExID09PSB1bm1vdW50T25seSB8fCBudWxsID09IG5vZGUuX19wcmVhY3RhdHRyXykgcmVtb3ZlTm9kZShub2RlKTtcbiAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuKG5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKG5vZGUpIHtcbiAgICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkO1xuICAgICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICAgICAgdmFyIG5leHQgPSBub2RlLnByZXZpb3VzU2libGluZztcbiAgICAgICAgICAgIHJlY29sbGVjdE5vZGVUcmVlKG5vZGUsICEwKTtcbiAgICAgICAgICAgIG5vZGUgPSBuZXh0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpZmZBdHRyaWJ1dGVzKGRvbSwgYXR0cnMsIG9sZCkge1xuICAgICAgICB2YXIgbmFtZTtcbiAgICAgICAgZm9yIChuYW1lIGluIG9sZCkgaWYgKCghYXR0cnMgfHwgbnVsbCA9PSBhdHRyc1tuYW1lXSkgJiYgbnVsbCAhPSBvbGRbbmFtZV0pIHNldEFjY2Vzc29yKGRvbSwgbmFtZSwgb2xkW25hbWVdLCBvbGRbbmFtZV0gPSB2b2lkIDAsIGlzU3ZnTW9kZSk7XG4gICAgICAgIGZvciAobmFtZSBpbiBhdHRycykgaWYgKCEoJ2NoaWxkcmVuJyA9PT0gbmFtZSB8fCAnaW5uZXJIVE1MJyA9PT0gbmFtZSB8fCBuYW1lIGluIG9sZCAmJiBhdHRyc1tuYW1lXSA9PT0gKCd2YWx1ZScgPT09IG5hbWUgfHwgJ2NoZWNrZWQnID09PSBuYW1lID8gZG9tW25hbWVdIDogb2xkW25hbWVdKSkpIHNldEFjY2Vzc29yKGRvbSwgbmFtZSwgb2xkW25hbWVdLCBvbGRbbmFtZV0gPSBhdHRyc1tuYW1lXSwgaXNTdmdNb2RlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY29sbGVjdENvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgKGNvbXBvbmVudHNbbmFtZV0gfHwgKGNvbXBvbmVudHNbbmFtZV0gPSBbXSkpLnB1c2goY29tcG9uZW50KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50KEN0b3IsIHByb3BzLCBjb250ZXh0KSB7XG4gICAgICAgIHZhciBpbnN0LCBsaXN0ID0gY29tcG9uZW50c1tDdG9yLm5hbWVdO1xuICAgICAgICBpZiAoQ3Rvci5wcm90b3R5cGUgJiYgQ3Rvci5wcm90b3R5cGUucmVuZGVyKSB7XG4gICAgICAgICAgICBpbnN0ID0gbmV3IEN0b3IocHJvcHMsIGNvbnRleHQpO1xuICAgICAgICAgICAgQ29tcG9uZW50LmNhbGwoaW5zdCwgcHJvcHMsIGNvbnRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5zdCA9IG5ldyBDb21wb25lbnQocHJvcHMsIGNvbnRleHQpO1xuICAgICAgICAgICAgaW5zdC5jb25zdHJ1Y3RvciA9IEN0b3I7XG4gICAgICAgICAgICBpbnN0LnJlbmRlciA9IGRvUmVuZGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaXN0KSBmb3IgKHZhciBpID0gbGlzdC5sZW5ndGg7IGktLTsgKSBpZiAobGlzdFtpXS5jb25zdHJ1Y3RvciA9PT0gQ3Rvcikge1xuICAgICAgICAgICAgaW5zdC5fX2IgPSBsaXN0W2ldLl9fYjtcbiAgICAgICAgICAgIGxpc3Quc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluc3Q7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRvUmVuZGVyKHByb3BzLCBzdGF0ZSwgY29udGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldENvbXBvbmVudFByb3BzKGNvbXBvbmVudCwgcHJvcHMsIG9wdHMsIGNvbnRleHQsIG1vdW50QWxsKSB7XG4gICAgICAgIGlmICghY29tcG9uZW50Ll9feCkge1xuICAgICAgICAgICAgY29tcG9uZW50Ll9feCA9ICEwO1xuICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5fX3IgPSBwcm9wcy5yZWYpIGRlbGV0ZSBwcm9wcy5yZWY7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50Ll9fayA9IHByb3BzLmtleSkgZGVsZXRlIHByb3BzLmtleTtcbiAgICAgICAgICAgIGlmICghY29tcG9uZW50LmJhc2UgfHwgbW91bnRBbGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxNb3VudCkgY29tcG9uZW50LmNvbXBvbmVudFdpbGxNb3VudCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcykgY29tcG9uZW50LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMocHJvcHMsIGNvbnRleHQpO1xuICAgICAgICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dCAhPT0gY29tcG9uZW50LmNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudC5fX2MpIGNvbXBvbmVudC5fX2MgPSBjb21wb25lbnQuY29udGV4dDtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbXBvbmVudC5fX3ApIGNvbXBvbmVudC5fX3AgPSBjb21wb25lbnQucHJvcHM7XG4gICAgICAgICAgICBjb21wb25lbnQucHJvcHMgPSBwcm9wcztcbiAgICAgICAgICAgIGNvbXBvbmVudC5fX3ggPSAhMTtcbiAgICAgICAgICAgIGlmICgwICE9PSBvcHRzKSBpZiAoMSA9PT0gb3B0cyB8fCAhMSAhPT0gb3B0aW9ucy5zeW5jQ29tcG9uZW50VXBkYXRlcyB8fCAhY29tcG9uZW50LmJhc2UpIHJlbmRlckNvbXBvbmVudChjb21wb25lbnQsIDEsIG1vdW50QWxsKTsgZWxzZSBlbnF1ZXVlUmVuZGVyKGNvbXBvbmVudCk7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50Ll9fcikgY29tcG9uZW50Ll9fcihjb21wb25lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudChjb21wb25lbnQsIG9wdHMsIG1vdW50QWxsLCBpc0NoaWxkKSB7XG4gICAgICAgIGlmICghY29tcG9uZW50Ll9feCkge1xuICAgICAgICAgICAgdmFyIHJlbmRlcmVkLCBpbnN0LCBjYmFzZSwgcHJvcHMgPSBjb21wb25lbnQucHJvcHMsIHN0YXRlID0gY29tcG9uZW50LnN0YXRlLCBjb250ZXh0ID0gY29tcG9uZW50LmNvbnRleHQsIHByZXZpb3VzUHJvcHMgPSBjb21wb25lbnQuX19wIHx8IHByb3BzLCBwcmV2aW91c1N0YXRlID0gY29tcG9uZW50Ll9fcyB8fCBzdGF0ZSwgcHJldmlvdXNDb250ZXh0ID0gY29tcG9uZW50Ll9fYyB8fCBjb250ZXh0LCBpc1VwZGF0ZSA9IGNvbXBvbmVudC5iYXNlLCBuZXh0QmFzZSA9IGNvbXBvbmVudC5fX2IsIGluaXRpYWxCYXNlID0gaXNVcGRhdGUgfHwgbmV4dEJhc2UsIGluaXRpYWxDaGlsZENvbXBvbmVudCA9IGNvbXBvbmVudC5fY29tcG9uZW50LCBza2lwID0gITE7XG4gICAgICAgICAgICBpZiAoaXNVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQucHJvcHMgPSBwcmV2aW91c1Byb3BzO1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5zdGF0ZSA9IHByZXZpb3VzU3RhdGU7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50LmNvbnRleHQgPSBwcmV2aW91c0NvbnRleHQ7XG4gICAgICAgICAgICAgICAgaWYgKDIgIT09IG9wdHMgJiYgY29tcG9uZW50LnNob3VsZENvbXBvbmVudFVwZGF0ZSAmJiAhMSA9PT0gY29tcG9uZW50LnNob3VsZENvbXBvbmVudFVwZGF0ZShwcm9wcywgc3RhdGUsIGNvbnRleHQpKSBza2lwID0gITA7IGVsc2UgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsVXBkYXRlKSBjb21wb25lbnQuY29tcG9uZW50V2lsbFVwZGF0ZShwcm9wcywgc3RhdGUsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5wcm9wcyA9IHByb3BzO1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXBvbmVudC5fX3AgPSBjb21wb25lbnQuX19zID0gY29tcG9uZW50Ll9fYyA9IGNvbXBvbmVudC5fX2IgPSBudWxsO1xuICAgICAgICAgICAgY29tcG9uZW50Ll9fZCA9ICExO1xuICAgICAgICAgICAgaWYgKCFza2lwKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZWQgPSBjb21wb25lbnQucmVuZGVyKHByb3BzLCBzdGF0ZSwgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5nZXRDaGlsZENvbnRleHQpIGNvbnRleHQgPSBleHRlbmQoZXh0ZW5kKHt9LCBjb250ZXh0KSwgY29tcG9uZW50LmdldENoaWxkQ29udGV4dCgpKTtcbiAgICAgICAgICAgICAgICB2YXIgdG9Vbm1vdW50LCBiYXNlLCBjaGlsZENvbXBvbmVudCA9IHJlbmRlcmVkICYmIHJlbmRlcmVkLm5vZGVOYW1lO1xuICAgICAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBjaGlsZENvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRQcm9wcyA9IGdldE5vZGVQcm9wcyhyZW5kZXJlZCk7XG4gICAgICAgICAgICAgICAgICAgIGluc3QgPSBpbml0aWFsQ2hpbGRDb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0ICYmIGluc3QuY29uc3RydWN0b3IgPT09IGNoaWxkQ29tcG9uZW50ICYmIGNoaWxkUHJvcHMua2V5ID09IGluc3QuX19rKSBzZXRDb21wb25lbnRQcm9wcyhpbnN0LCBjaGlsZFByb3BzLCAxLCBjb250ZXh0LCAhMSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9Vbm1vdW50ID0gaW5zdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fY29tcG9uZW50ID0gaW5zdCA9IGNyZWF0ZUNvbXBvbmVudChjaGlsZENvbXBvbmVudCwgY2hpbGRQcm9wcywgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0Ll9fYiA9IGluc3QuX19iIHx8IG5leHRCYXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdC5fX3UgPSBjb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRDb21wb25lbnRQcm9wcyhpbnN0LCBjaGlsZFByb3BzLCAwLCBjb250ZXh0LCAhMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJDb21wb25lbnQoaW5zdCwgMSwgbW91bnRBbGwsICEwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBiYXNlID0gaW5zdC5iYXNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNiYXNlID0gaW5pdGlhbEJhc2U7XG4gICAgICAgICAgICAgICAgICAgIHRvVW5tb3VudCA9IGluaXRpYWxDaGlsZENvbXBvbmVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvVW5tb3VudCkgY2Jhc2UgPSBjb21wb25lbnQuX2NvbXBvbmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsQmFzZSB8fCAxID09PSBvcHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2Jhc2UpIGNiYXNlLl9jb21wb25lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGRpZmYoY2Jhc2UsIHJlbmRlcmVkLCBjb250ZXh0LCBtb3VudEFsbCB8fCAhaXNVcGRhdGUsIGluaXRpYWxCYXNlICYmIGluaXRpYWxCYXNlLnBhcmVudE5vZGUsICEwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbEJhc2UgJiYgYmFzZSAhPT0gaW5pdGlhbEJhc2UgJiYgaW5zdCAhPT0gaW5pdGlhbENoaWxkQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiYXNlUGFyZW50ID0gaW5pdGlhbEJhc2UucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VQYXJlbnQgJiYgYmFzZSAhPT0gYmFzZVBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVBhcmVudC5yZXBsYWNlQ2hpbGQoYmFzZSwgaW5pdGlhbEJhc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0b1VubW91bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsQmFzZS5fY29tcG9uZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvbGxlY3ROb2RlVHJlZShpbml0aWFsQmFzZSwgITEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0b1VubW91bnQpIHVubW91bnRDb21wb25lbnQodG9Vbm1vdW50KTtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuYmFzZSA9IGJhc2U7XG4gICAgICAgICAgICAgICAgaWYgKGJhc2UgJiYgIWlzQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudFJlZiA9IGNvbXBvbmVudCwgdCA9IGNvbXBvbmVudDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHQgPSB0Ll9fdSkgKGNvbXBvbmVudFJlZiA9IHQpLmJhc2UgPSBiYXNlO1xuICAgICAgICAgICAgICAgICAgICBiYXNlLl9jb21wb25lbnQgPSBjb21wb25lbnRSZWY7XG4gICAgICAgICAgICAgICAgICAgIGJhc2UuX2NvbXBvbmVudENvbnN0cnVjdG9yID0gY29tcG9uZW50UmVmLmNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNVcGRhdGUgfHwgbW91bnRBbGwpIG1vdW50cy51bnNoaWZ0KGNvbXBvbmVudCk7IGVsc2UgaWYgKCFza2lwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnREaWRVcGRhdGUpIGNvbXBvbmVudC5jb21wb25lbnREaWRVcGRhdGUocHJldmlvdXNQcm9wcywgcHJldmlvdXNTdGF0ZSwgcHJldmlvdXNDb250ZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hZnRlclVwZGF0ZSkgb3B0aW9ucy5hZnRlclVwZGF0ZShjb21wb25lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bGwgIT0gY29tcG9uZW50Ll9faCkgd2hpbGUgKGNvbXBvbmVudC5fX2gubGVuZ3RoKSBjb21wb25lbnQuX19oLnBvcCgpLmNhbGwoY29tcG9uZW50KTtcbiAgICAgICAgICAgIGlmICghZGlmZkxldmVsICYmICFpc0NoaWxkKSBmbHVzaE1vdW50cygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkQ29tcG9uZW50RnJvbVZOb2RlKGRvbSwgdm5vZGUsIGNvbnRleHQsIG1vdW50QWxsKSB7XG4gICAgICAgIHZhciBjID0gZG9tICYmIGRvbS5fY29tcG9uZW50LCBvcmlnaW5hbENvbXBvbmVudCA9IGMsIG9sZERvbSA9IGRvbSwgaXNEaXJlY3RPd25lciA9IGMgJiYgZG9tLl9jb21wb25lbnRDb25zdHJ1Y3RvciA9PT0gdm5vZGUubm9kZU5hbWUsIGlzT3duZXIgPSBpc0RpcmVjdE93bmVyLCBwcm9wcyA9IGdldE5vZGVQcm9wcyh2bm9kZSk7XG4gICAgICAgIHdoaWxlIChjICYmICFpc093bmVyICYmIChjID0gYy5fX3UpKSBpc093bmVyID0gYy5jb25zdHJ1Y3RvciA9PT0gdm5vZGUubm9kZU5hbWU7XG4gICAgICAgIGlmIChjICYmIGlzT3duZXIgJiYgKCFtb3VudEFsbCB8fCBjLl9jb21wb25lbnQpKSB7XG4gICAgICAgICAgICBzZXRDb21wb25lbnRQcm9wcyhjLCBwcm9wcywgMywgY29udGV4dCwgbW91bnRBbGwpO1xuICAgICAgICAgICAgZG9tID0gYy5iYXNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG9yaWdpbmFsQ29tcG9uZW50ICYmICFpc0RpcmVjdE93bmVyKSB7XG4gICAgICAgICAgICAgICAgdW5tb3VudENvbXBvbmVudChvcmlnaW5hbENvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgZG9tID0gb2xkRG9tID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGMgPSBjcmVhdGVDb21wb25lbnQodm5vZGUubm9kZU5hbWUsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgICAgIGlmIChkb20gJiYgIWMuX19iKSB7XG4gICAgICAgICAgICAgICAgYy5fX2IgPSBkb207XG4gICAgICAgICAgICAgICAgb2xkRG9tID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldENvbXBvbmVudFByb3BzKGMsIHByb3BzLCAxLCBjb250ZXh0LCBtb3VudEFsbCk7XG4gICAgICAgICAgICBkb20gPSBjLmJhc2U7XG4gICAgICAgICAgICBpZiAob2xkRG9tICYmIGRvbSAhPT0gb2xkRG9tKSB7XG4gICAgICAgICAgICAgICAgb2xkRG9tLl9jb21wb25lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJlY29sbGVjdE5vZGVUcmVlKG9sZERvbSwgITEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkb207XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVubW91bnRDb21wb25lbnQoY29tcG9uZW50KSB7XG4gICAgICAgIGlmIChvcHRpb25zLmJlZm9yZVVubW91bnQpIG9wdGlvbnMuYmVmb3JlVW5tb3VudChjb21wb25lbnQpO1xuICAgICAgICB2YXIgYmFzZSA9IGNvbXBvbmVudC5iYXNlO1xuICAgICAgICBjb21wb25lbnQuX194ID0gITA7XG4gICAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbFVubW91bnQpIGNvbXBvbmVudC5jb21wb25lbnRXaWxsVW5tb3VudCgpO1xuICAgICAgICBjb21wb25lbnQuYmFzZSA9IG51bGw7XG4gICAgICAgIHZhciBpbm5lciA9IGNvbXBvbmVudC5fY29tcG9uZW50O1xuICAgICAgICBpZiAoaW5uZXIpIHVubW91bnRDb21wb25lbnQoaW5uZXIpOyBlbHNlIGlmIChiYXNlKSB7XG4gICAgICAgICAgICBpZiAoYmFzZS5fX3ByZWFjdGF0dHJfICYmIGJhc2UuX19wcmVhY3RhdHRyXy5yZWYpIGJhc2UuX19wcmVhY3RhdHRyXy5yZWYobnVsbCk7XG4gICAgICAgICAgICBjb21wb25lbnQuX19iID0gYmFzZTtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUoYmFzZSk7XG4gICAgICAgICAgICBjb2xsZWN0Q29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgICAgICAgICByZW1vdmVDaGlsZHJlbihiYXNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcG9uZW50Ll9fcikgY29tcG9uZW50Ll9fcihudWxsKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gQ29tcG9uZW50KHByb3BzLCBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX19kID0gITA7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMucHJvcHMgPSBwcm9wcztcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuc3RhdGUgfHwge307XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbmRlcih2bm9kZSwgcGFyZW50LCBtZXJnZSkge1xuICAgICAgICByZXR1cm4gZGlmZihtZXJnZSwgdm5vZGUsIHt9LCAhMSwgcGFyZW50LCAhMSk7XG4gICAgfVxuICAgIHZhciBvcHRpb25zID0ge307XG4gICAgdmFyIHN0YWNrID0gW107XG4gICAgdmFyIEVNUFRZX0NISUxEUkVOID0gW107XG4gICAgdmFyIGRlZmVyID0gJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgUHJvbWlzZSA/IFByb21pc2UucmVzb2x2ZSgpLnRoZW4uYmluZChQcm9taXNlLnJlc29sdmUoKSkgOiBzZXRUaW1lb3V0O1xuICAgIHZhciBJU19OT05fRElNRU5TSU9OQUwgPSAvYWNpdHxleCg/OnN8Z3xufHB8JCl8cnBofG93c3xtbmN8bnR3fGluZVtjaF18em9vfF5vcmQvaTtcbiAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICB2YXIgbW91bnRzID0gW107XG4gICAgdmFyIGRpZmZMZXZlbCA9IDA7XG4gICAgdmFyIGlzU3ZnTW9kZSA9ICExO1xuICAgIHZhciBoeWRyYXRpbmcgPSAhMTtcbiAgICB2YXIgY29tcG9uZW50cyA9IHt9O1xuICAgIGV4dGVuZChDb21wb25lbnQucHJvdG90eXBlLCB7XG4gICAgICAgIHNldFN0YXRlOiBmdW5jdGlvbihzdGF0ZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5fX3MpIHRoaXMuX19zID0gZXh0ZW5kKHt9LCBzKTtcbiAgICAgICAgICAgIGV4dGVuZChzLCAnZnVuY3Rpb24nID09IHR5cGVvZiBzdGF0ZSA/IHN0YXRlKHMsIHRoaXMucHJvcHMpIDogc3RhdGUpO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSAodGhpcy5fX2ggPSB0aGlzLl9faCB8fCBbXSkucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICBlbnF1ZXVlUmVuZGVyKHRoaXMpO1xuICAgICAgICB9LFxuICAgICAgICBmb3JjZVVwZGF0ZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykgKHRoaXMuX19oID0gdGhpcy5fX2ggfHwgW10pLnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgcmVuZGVyQ29tcG9uZW50KHRoaXMsIDIpO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge31cbiAgICB9KTtcbiAgICB2YXIgcHJlYWN0ID0ge1xuICAgICAgICBoOiBoLFxuICAgICAgICBjcmVhdGVFbGVtZW50OiBoLFxuICAgICAgICBjbG9uZUVsZW1lbnQ6IGNsb25lRWxlbWVudCxcbiAgICAgICAgQ29tcG9uZW50OiBDb21wb25lbnQsXG4gICAgICAgIHJlbmRlcjogcmVuZGVyLFxuICAgICAgICByZXJlbmRlcjogcmVyZW5kZXIsXG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICB9O1xuICAgIGlmICgndW5kZWZpbmVkJyAhPSB0eXBlb2YgbW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IHByZWFjdDsgZWxzZSBzZWxmLnByZWFjdCA9IHByZWFjdDtcbn0oKTtcblxuZGVmaW5lKFwicHJlYWN0XCIsIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJldCwgZm47XG4gICAgICAgIHJldHVybiByZXQgfHwgZ2xvYmFsLnByZWFjdDtcbiAgICB9O1xufSh0aGlzKSkpO1xuXG4iLCIvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tbWVudC1mb3JtYXRcbi8vLzxhbWQtbW9kdWxlIG5hbWU9XCJaeW5nYVwiLz5cbmltcG9ydCBaeW5nYUNvcmUgPSByZXF1aXJlKCcuL1p5bmdhQ29yZScpO1xuY29uc3QgT2JqZWN0QXNzaWduID0gWnluZ2FDb3JlLk9iamVjdEFzc2lnbjtcbmV4cG9ydCB0eXBlIFNvY2lhbE5ldHdvcmtJRCA9IDI0IHwgNDI7ICAvLyAyNCA9IFp5bmdhIE1vYmlsZSBBbm9ueW1vdXMgb3IgJ01CJywgNDIgPSBGQiBJbnN0YW50IEdhbWVzIG9yICdGQklHJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFp5bmdhQXBwQ29uZmlnT3ZlcnJpZGVzIHtcblx0YXBwSWQ/OiBudW1iZXI7IC8vIFp5bmdhIEFQUCBJRFxuXHRhdXRoU29jaWFsTmV0d29ya0lEPzogU29jaWFsTmV0d29ya0lEOyAvLyAyNCA9IFp5bmdhIE1vYmlsZSBBbm9ueW1vdXMgb3IgJ01CJywgNDIgPSBGQiBJbnN0YW50IEdhbWVzIG9yICdGQklHJ1xuXHRhcGlVUkxCYXNlPzogc3RyaW5nOyAgICAgICAgICAgICAgICAgICAvLyBBVEcgdHVybnMgYW5kIHByb2ZpbGUgc2VydmljZSBhcGkgVVJMIEJhc2Vcblx0Y2xpZW50VmVyc2lvbj86IHN0cmluZzsgICAgICAgICAgICAgICAgLy8gQ2xpZW50L0dhbWUgdmVyc2lvbiBzdHJpbmdcbn1cblxuLy8gWnluZ2EgY29uZmlnIGZvciBhbiBhcHBcbmV4cG9ydCBpbnRlcmZhY2UgWnluZ2FJbnN0YW50Q29uZmlnIGV4dGVuZHMgWnluZ2FBcHBDb25maWdPdmVycmlkZXMge1xuXHRhcHBzPzoge1xuXHRcdFtpbmRleDogc3RyaW5nXTogWnluZ2FJbnN0YW50Q29uZmlnO1xuXHR9O1xufVxuXG5jb25zdCB6eW5nYURlZmF1bHRDb25maWc6IFp5bmdhSW5zdGFudENvbmZpZyA9IHtcblx0YXV0aFNvY2lhbE5ldHdvcmtJRDogMjQsXG5cdGNsaWVudFZlcnNpb246ICd1bnNldCdcbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBaeW5nYSBJbnN0YW50IFNES1xuICogQHBhcmFtIGNvbmZpZyAtIEEgY29uZmlnIG9iamVjdC4gIENhbiBpbmNsdWRlIHNwZWNpZmljIGFwcCBvdmVycmlkZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluaXQoY29uZmlnOiBaeW5nYUluc3RhbnRDb25maWcpOiB2b2lkIHtcblx0bGV0IG1lcmdlZENvbmZpZzogWnluZ2FJbnN0YW50Q29uZmlnO1xuXHRsZXQgYXBwcyA9IGNvbmZpZyAmJiBjb25maWcuYXBwcyB8fCB7fTtcblx0bGV0IGtleXM6IHN0cmluZ1tdID0gT2JqZWN0LmtleXMoYXBwcyk7XG5cdGxldCBhbGxLZXlzOiBzdHJpbmcgPSBrZXlzLmpvaW4oJycpO1xuXHRsZXQgdXJsOiBzdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblx0dmFyIGZiQXBwSWQgPSBaeW5nYUNvcmUuQXJyYXlGaW5kKGtleXMsIChrZXk6IHN0cmluZykgPT4ge1xuXHRcdC8vIHJldHVybiB0cnVlIHdlIGZpbmQgdGhlIGZiIGFwcCBpZCBpbiB0aGUgVVJMIHN1cnJvdW5kZWQgYnkgbm9uLWRpZ2l0IGNoYXJzXG5cdFx0cmV0dXJuICh1cmwubWF0Y2gobmV3IFJlZ0V4cChgLipbXjAtOV0ke2tleX1bXjAtOV0uKmAsICdnJykpICE9PSBudWxsKTtcblx0fSk7XG5cdGxldCBvdmVycmlkZXMgPSB7fTtcblxuXHRpZiAoZmJBcHBJZCkge1xuXHRcdC8vIFdlIGhhdmUgYXBwLXNwZWNpZmljIG92ZXJyaWRlc1xuXHRcdG92ZXJyaWRlcyA9IGFwcHNbZmJBcHBJZF07XG5cdH1cblxuXHRtZXJnZWRDb25maWcgPSBPYmplY3RBc3NpZ24oe30sIHp5bmdhRGVmYXVsdENvbmZpZywgY29uZmlnLCBvdmVycmlkZXMpO1xuXHRkZWxldGUgbWVyZ2VkQ29uZmlnLmFwcHM7IC8vIE1heSBoYXZlIGluaGVyaXRlZCB0aGlzIGZyb20gXCJjb25maWdcIiwgd2UgZG9uJ3Qgd2FuIGl0XG5cdEV2ZW50LmZpcmUoRXZlbnRzLkNPTkZJRywgbWVyZ2VkQ29uZmlnKTtcbn1cblxuZXhwb3J0IGNvbnN0IEV2ZW50ID0gbmV3IFp5bmdhQ29yZS5FdmVudE1peGluKCk7XG5leHBvcnQgY29uc3QgRXZlbnRzID0ge1xuXHRBUFBfSUQ6ICdaeW5nYS5BcHBJZCcsXG5cdENMSUVOVF9WRVJTSU9OOiAnWnluZ2EuQ2xpZW50VmVyc2lvbicsXG5cdENPTkZJRzogJ1p5bmdhLkNvbmZpZycsXG5cdFVSTF9CQVNFOiAnWnluZ2EuVVJMQmFzZSdcbn07XG5leHBvcnQgZnVuY3Rpb24gc2V0QXBwSWQoYXBwSWQpIHtcblx0aW5pdCh7XG5cdFx0YXBwSWQ6IGFwcElkXG5cdH0pO1xufVxuXG4vLy8gY2FuIGJlIGEgZ2l0IGhhc2gsIGFueXRoaW5nIHlvdSBsaWtlXG5leHBvcnQgdmFyIGNsaWVudFZlcnNpb246IHN0cmluZztcbmV4cG9ydCBmdW5jdGlvbiBzZXRDbGllbnRWZXJzaW9uKHZlcnNpb25TdHJpbmcpIHtcblx0Y2xpZW50VmVyc2lvbiA9IHZlcnNpb25TdHJpbmc7XG5cdEV2ZW50LmZpcmUoRXZlbnRzLkNMSUVOVF9WRVJTSU9OLCB2ZXJzaW9uU3RyaW5nKTtcbn1cblxuZXhwb3J0IHZhciBhcGlVUkxCYXNlID0gJy9hdGctdHVybnMvdjEnO1xuZXhwb3J0IGZ1bmN0aW9uIHNldEFwaVVSTEJhc2UodXJsOiBzdHJpbmcpIHtcblx0YXBpVVJMQmFzZSA9IHVybDtcblx0RXZlbnQuZmlyZShFdmVudHMuVVJMX0JBU0UsIHVybCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBpVVJMQmFzZShzeXN0ZW0/OiBzdHJpbmcpIHtcblx0cmV0dXJuIHN5c3RlbSA/IGAke2FwaVVSTEJhc2V9LyR7c3lzdGVtfWAgOiBhcGlVUkxCYXNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QVBJVmVyc2lvbigpIHtcblx0LyogSW4gdGhlIGZvcm1hdDpcblx0XHRhLmIuYy56XG5cblx0XHR3aGVyZTpcblx0XHQgIGEgPSBGQiBTREsgTWFqb3IgdmVyc2lvblxuXHRcdCAgYiA9IEZCIFNESyBNaW5vciB2ZXJzaW9uXG5cdFx0ICBjID0gRkIgU0RLIERlYnVnIHZlcnNpb24gKG5vdCB0eXBpY2FsbHkgdXNlZCwgdXNlIDApXG5cdFx0ICB6ID0gWnluZ2EgU0RLIHZlcnNpb24gbnVtYmVyLCBpbmNyZW1lbnQgZWFjaCB0aW1lIGEgcmVsZWFzZSBoYXBwZW5zLlxuXHQqL1xuXHRyZXR1cm4gJzYuMC4wLjEwJztcbn1cblxuRXZlbnQubGFzdChFdmVudHMuQ09ORklHLCAoY29uZmlnOiBaeW5nYUluc3RhbnRDb25maWcpID0+IHtcblx0aWYgKGNvbmZpZy5jbGllbnRWZXJzaW9uKSB7XG5cdFx0c2V0Q2xpZW50VmVyc2lvbihjb25maWcuY2xpZW50VmVyc2lvbik7XG5cdH1cblxuXHRpZiAoY29uZmlnLmFwaVVSTEJhc2UpIHtcblx0XHRzZXRBcGlVUkxCYXNlKGNvbmZpZy5hcGlVUkxCYXNlKTtcblx0fVxuXG5cdC8vIE5PVEU6IEltcG9ydGFudCB0aGF0IHRoaXMgaXMgbGFzdCBhcyBzZXR0aW5nIGl0IHdpbGwga2ljayBvZmYgYSBsb3Qgb2Ygb3RoZXJcblx0Ly8gICAgICAgcHJvY2Vzc2VzIHRoYXQgbWF5IHJlbHkgb24gZGF0YSBzZXQgYWJvdmUuXG5cdGlmIChjb25maWcuYXBwSWQpIHtcblx0XHRFdmVudC5maXJlKEV2ZW50cy5BUFBfSUQsIGNvbmZpZy5hcHBJZCk7XG5cdH1cbn0pO1xuIiwiLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNvbW1lbnQtZm9ybWF0XG4vLy88YW1kLW1vZHVsZSBuYW1lPVwiWnluZ2FBY2NvdW50XCIvPlxuaW1wb3J0IFp5bmdhID0gcmVxdWlyZSgnLi9aeW5nYScpO1xuaW1wb3J0IFp5bmdhQ29yZSA9IHJlcXVpcmUoJy4vWnluZ2FDb3JlJyk7XG5pbXBvcnQgWnluZ2FJbnN0YW50ID0gcmVxdWlyZSgnLi9aeW5nYUluc3RhbnQnKTtcbmltcG9ydCBaeW5nYU5ldCA9IHJlcXVpcmUoJy4vWnluZ2FOZXQnKTtcblxuY29uc3QgT2JqZWN0QXNzaWduID0gWnluZ2FDb3JlLk9iamVjdEFzc2lnbjtcblxuY29uc3QgQU5PTl9JTkZPX0tFWSA9ICdfX1pZTkdBX0FOT05fSU5GT18nO1xuY29uc3QgUEFTU1dEX01JTl9MRU4gPSAyMDtcbmNvbnN0IFBBU1NXRF9NQVhfTEVOID0gNDA7XG5jb25zdCBSQU5EX0NIQVJfU1RBUlQgPSAzNTsgLy8gI1xuY29uc3QgUkFORF9DSEFSX0VORCA9IDEyNjsgIC8vIH5cblxuY29uc3QgRkJJR19JTkZPX0tFWSA9ICdfX1pZTkdBX0ZCSUdfSU5GT18nO1xuY29uc3QgRkJJR19JTkZPX0tFWV9EUkFGVDYgPSAnX19aWU5HQV9GQklHX0lORk9fNl8nO1xuXG5jb25zdCBFQVJMWV9SRU5FV19TRUNPTkRTID0gMzA7XG5cbmNvbnN0IFNONDJfVE9LRU5fRFVSQVRJT05fU0VDT05EUyA9IDYwICogNjAgKiAyNCAqIDc7IC8vIDEgd2Vla1xuXG52YXIgbWlncmF0aW9uSGFuZGxlcjsgIC8vIFRoaXMgY2FuIGJlIHNldCB0byBoYW5kbGUgYWNjb3VudCBtaWdyYXRpb25zXG52YXIgd2luOiBhbnkgPSB3aW5kb3c7XG52YXIgbG9jYWxDYWNoZSA9IHdpbi5sb2NhbFN0b3JhZ2UgfHwge1xuXHRnZXRJdGVtOiBmdW5jdGlvbiAoKSB7IHJldHVybiBudWxsOyB9LFxuXHRzZXRJdGVtOiBmdW5jdGlvbiAoKSB7IHJldHVybjsgfVxufTtcblxudmFyIHRva2VuTWFwID0ge307XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlckFjY291bnREZXRhaWxzIHtcblx0c29jaWFsTmV0d29yazogbnVtYmVyO1xuXHR1c2VySWQ6IHN0cmluZztcblx0cGxheWVySWQ6IG51bWJlcjtcblx0emlkOiBudW1iZXI7XG5cdHRva2VuOiBzdHJpbmc7XG5cdGV4cGlyZXM6IG51bWJlcjtcblx0cGFzc3dvcmQ/OiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIE1pZ3JhdGlvbkFjY291bnRzIHtcblx0ZnJvbTogVXNlckFjY291bnREZXRhaWxzO1xuXHR0bzogVXNlckFjY291bnREZXRhaWxzO1xufVxuLyoqKioqKioqKioqKioqKioqKioqL1xuLyogSGVscGVyIGZ1bmN0aW9ucyAqL1xuLyoqKioqKioqKioqKioqKioqKioqL1xuXG4vLyBhbm9uIGluZm8gc3RvcmFnZSBrZXlcbmZ1bmN0aW9uIGdldFN0b3JhZ2VLZXlBc3luYyhrZXlUeXBlOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRyZXR1cm4gWnluZ2EuRXZlbnQubGFzdChaeW5nYS5FdmVudHMuQVBQX0lEKVxuXHRcdC50aGVuKChhcHBJZDogbnVtYmVyKSA9PiB7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGtleVR5cGUgKyBhcHBJZCk7XG5cdFx0fSk7XG59XG5cbi8vIFR5cGUgY2hlY2tpbmcgaGVscGVycy4gIFZlcnkgYmFzaWNcbmZ1bmN0aW9uIGlzT2JqZWN0KHgpIHtcblx0cmV0dXJuIHR5cGVvZiB4ID09PSAnb2JqZWN0Jztcbn1cbmZ1bmN0aW9uIGlzU3RyaW5nKHgpIHtcblx0cmV0dXJuIHR5cGVvZiB4ID09PSAnc3RyaW5nJztcbn1cbmZ1bmN0aW9uIGlzTnVtYmVyKHgpIHtcblx0cmV0dXJuIHR5cGVvZiB4ID09PSAnbnVtYmVyJztcbn1cbmZ1bmN0aW9uIGlzSW50ZWdlcih4KSB7XG5cdHJldHVybiBpc051bWJlcih4KSAmJiAocGFyc2VJbnQoeCArICcnLCAxMCkgPT09IHgpO1xufVxuXG4vLyBCYXNpYyByYW5kb20gc3RyaW5nIHJlbGF0ZWQgaGVscGVyIGZ1bmN0aW9uXG5mdW5jdGlvbiBnZXRSYW5kb20oc3RhcnQsIGVuZCkge1xuXHRyZXR1cm4gc3RhcnQgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAoZW5kIC0gc3RhcnQpKTtcbn1cbmZ1bmN0aW9uIGdldFJhbmRvbUNoYXIoc3RhcnRQb3MsIGVuZFBvcykge1xuXHRyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShnZXRSYW5kb20oc3RhcnRQb3MsIGVuZFBvcykpO1xufVxuZnVuY3Rpb24gZ2V0UmFuZG9tU3RyaW5nKGxlbmd0aCwgY2hhclN0YXJ0UG9zLCBjaGFyRW5kUG9zKSB7XG5cdHZhciBjaGFycyA9IG5ldyBBcnJheShsZW5ndGgpO1xuXHR3aGlsZSAobGVuZ3RoID49IDApIHtcblx0XHRjaGFyc1stLWxlbmd0aF0gPSBnZXRSYW5kb21DaGFyKGNoYXJTdGFydFBvcywgY2hhckVuZFBvcyk7XG5cdH1cblx0cmV0dXJuIGNoYXJzLmpvaW4oJycpO1xufVxuXG4vLyBGb3IgZGVlcCBjbG9uZSBvZiBvYmplY3RzXG5mdW5jdGlvbiBjbG9uZU9iamVjdChvYmopIHtcblx0cmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG59XG5cbi8qKlxuICogVVJMIGFuZCBCYXNlNjQgZGVjb2RlcyBhIHN0cmluZ1xuICogQHBhcmFtIHN0ciBVUkwgYW5kIEJhc2U2NCBFbmNvZGVkIHN0cmluZ1xuICovXG5mdW5jdGlvbiB1cmxCYXNlNjREZWNvZGUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRyZXR1cm4gYXRvYihzdHIucmVwbGFjZSgvLS9nLCAnKycpLnJlcGxhY2UoL18vZywgJy8nKSk7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlUGFzc3dvcmQoKSB7XG5cdHZhciBwYXNzd29yZCA9IGdldFJhbmRvbVN0cmluZyhnZXRSYW5kb20oUEFTU1dEX01JTl9MRU4sIFBBU1NXRF9NQVhfTEVOKSwgUkFORF9DSEFSX1NUQVJULCBSQU5EX0NIQVJfRU5EKTtcblx0dmFyIGZpeENoYXIgPSBnZXRSYW5kb21TdHJpbmcoMSwgMzgsIFJBTkRfQ0hBUl9FTkQpOyAgLy8gR2V0IGEgbmV3IHJhbmRvbSBjaGFyIGluIHRoZSBzYW1lIHJhbmdlIGJ1dCBBQk9WRSAlICgzNylcblx0dmFyIGZpeGVkUGFzc3dvcmQgPSBwYXNzd29yZC5yZXBsYWNlKC8lL2csIGZpeENoYXIpOyAgLy8gUmVwbGFjZSBhbGwgXCIlXCIgY2hhcnMgd2l0aCB0aGUgbmV3IGNoYXJhY3Rlci5cblx0Ly8gVGhlcmUgaXMgYSBidWcgaW4gRkIgQW5kcm9pZCBhcHBzIHdoZXJlIFwiJVwiIGNoYXJzIGNhbiBjYXVzZSBkYXRhIGNvcnJ1cHRpb25cblx0Ly8gb24gcmVhZC4gIFRvIGhlbHAgcHJldmVudCBuZXcgdXNlcnMgZnJvbSBzdWZmZXJpbmcgZnJvbSB0aGlzIG9uIG9sZGVyIGNsaWVudHNcblx0Ly8gd2UgaGF2ZSB0aGlzIHdvcmthcm91bmQgaW4gcGxhY2UgdG8ganVzdCBub3QgdXNlIFwiJVwiXG5cdHJldHVybiBmaXhlZFBhc3N3b3JkO1xufVxuaW50ZXJmYWNlIFBsYXllcklER2V0UmVzdWx0TmV0d29ya0lEIHtcblx0c25JZDogc3RyaW5nO1xuXHR6aWQ6IHN0cmluZztcbn1cbmludGVyZmFjZSBQbGF5ZXJJREdldFJlc3VsdFBsYXllcklEIHtcblx0cGxheWVySWQ6IHN0cmluZztcblx0c25JZDogc3RyaW5nO1xuXHRkZXJpdmVkPzogYm9vbGVhbjtcbn1cbmludGVyZmFjZSBQbGF5ZXJJREdldFJlc3VsdCB7XG5cdG5ldHdvcmtJZDogUGxheWVySURHZXRSZXN1bHROZXR3b3JrSUQ7XG5cdG90aGVyTmV0d29ya0lkczogUGxheWVySURHZXRSZXN1bHROZXR3b3JrSURbXTtcblx0cGxheWVySWRzOiB7XG5cdFx0W2tleTogc3RyaW5nXToge1xuXHRcdFx0W2tleTogc3RyaW5nXTogUGxheWVySURHZXRSZXN1bHRQbGF5ZXJJRDtcblx0XHR9XG5cdH07XG59XG5pbnRlcmZhY2UgUGxheWVySURHZXRSZXN1bHRzIHtcblx0bGlzdDogUGxheWVySURHZXRSZXN1bHRbXTtcbn1cblxuaW50ZXJmYWNlIEZCSUdBdXRoRGV0YWlscyB7XG5cdHVzZXJJZDogc3RyaW5nO1xuXHR0b2tlbjogc3RyaW5nO1xuXHRleHBpcmVzOiBudW1iZXI7XG59XG5mdW5jdGlvbiBnZXROZXdGQklHQXV0aERldGFpbHModmVyc2lvbjogc3RyaW5nID0gJzEnKTogUHJvbWlzZTxGQklHQXV0aERldGFpbHM+IHtcblx0cmV0dXJuIFByb21pc2UuYWxsKFtcblx0XHRaeW5nYS5FdmVudC5sYXN0KFp5bmdhLkV2ZW50cy5BUFBfSUQpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0aGUgYXBwIElEXG5cdFx0WnluZ2FJbnN0YW50LkV2ZW50Lmxhc3QoWnluZ2FJbnN0YW50LkV2ZW50cy5JTlNUQU5UX0ZCX1RPU19BQ0NFUFQpIC8vIFdhaXQgZm9yIFNESyBUT1MgYWNjZXB0YW5jZVxuXHRdKVxuXHRcdC50aGVuKChkZXRhaWxzOiBbbnVtYmVyLCB2b2lkXSkgPT4ge1xuXHRcdFx0Y29uc3QgYXBwSUQgPSBkZXRhaWxzWzBdO1xuXHRcdFx0Y29uc3Qgc3RyaW5nVG9TaWduID0gSlNPTi5zdHJpbmdpZnkoeyBhOiBhcHBJRCB9KTtcblx0XHRcdHJldHVybiBaeW5nYUluc3RhbnQucGxheWVyLmdldFNpZ25lZFBsYXllckluZm9Bc3luYyhzdHJpbmdUb1NpZ24pIC8vIEdldCBGQiB0byBzaWduIG91dCBhcHAgaWQgcGF5bG9hZFxuXHRcdFx0XHQudGhlbigocGxheWVySW5mbzogWnluZ2FJbnN0YW50LnBsYXllci5TaWduZWRQbGF5ZXJJbmZvKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdG9rZW4gPSBgc240MnYke3ZlcnNpb259LiR7cGxheWVySW5mby5nZXRTaWduYXR1cmUoKX1gOyAgICAgICAvLyBTaWduYXR1cmUgaXMgb3VyIGFjdHVhbCB0b2tlbiwgcHJlcGVuZCBzbjQ2LlxuXHRcdFx0XHRcdGNvbnN0IFtoYXNoVXJsQmFzZTY0LCBkYXRhVXJsQmFzZTY0XSA9IHBsYXllckluZm8uZ2V0U2lnbmF0dXJlKCkuc3BsaXQoJy4nKTtcblx0XHRcdFx0XHRjb25zdCBkYXRhID0gSlNPTi5wYXJzZSh1cmxCYXNlNjREZWNvZGUoZGF0YVVybEJhc2U2NCkpIGFzIFp5bmdhSW5zdGFudC5wbGF5ZXIuU2lnbmVkUGxheWVySW5mb0RhdGE7XG5cdFx0XHRcdFx0Y29uc3QgYXV0aERldGFpbHM6IEZCSUdBdXRoRGV0YWlscyA9IHtcblx0XHRcdFx0XHRcdHRva2VuOiB0b2tlbixcblx0XHRcdFx0XHRcdHVzZXJJZDogZGF0YS5wbGF5ZXJfaWQsXG5cdFx0XHRcdFx0XHRleHBpcmVzOiBkYXRhLmlzc3VlZF9hdCArIFNONDJfVE9LRU5fRFVSQVRJT05fU0VDT05EU1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShhdXRoRGV0YWlscyk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xufVxud2luLmxlb24gPSBnZXROZXdGQklHQXV0aERldGFpbHM7XG5cbi8vIHRzbGludDpkaXNhYmxlOm1heC1jbGFzc2VzLXBlci1maWxlXG5hYnN0cmFjdCBjbGFzcyBTb2NpYWxOZXR3b3JrQWNjb3VudCB7XG5cdHB1YmxpYyBub0NyZWF0ZTogYm9vbGVhbiA9IGZhbHNlO1xuXHRwdWJsaWMgZm9yY2VSZWZyZXNoOiBib29sZWFuID0gZmFsc2U7XG5cdHB1YmxpYyBmaXJlRXZlbnRzOiBib29sZWFuID0gdHJ1ZTtcblxuXHRwcm90ZWN0ZWQgYWNjb3VudERldGFpbHM6IFVzZXJBY2NvdW50RGV0YWlscztcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLmFjY291bnREZXRhaWxzID0ge1xuXHRcdFx0c29jaWFsTmV0d29yazogbnVsbCxcblx0XHRcdHRva2VuOiAnJyxcblx0XHRcdHVzZXJJZDogJycsXG5cdFx0XHR6aWQ6IDAsXG5cdFx0XHRwbGF5ZXJJZDogMCxcblx0XHRcdGV4cGlyZXM6IDBcblx0XHR9O1xuXG5cdH1cblx0LyoqXG5cdCAqIFRyeSBhbmQgcmVzdG9yZSBhY2NvdW50RGV0YWlscyBmcm9tIGNhY2hlXG5cdCAqIEBwYXJhbSBjYWNoZVN0cmluZyBPcHRpb25hbCBjYWNoZSBkYXRhIHRvIHNhdmUgdGhlIGxvb2t1cFxuXHQgKi9cblx0cHVibGljIGZyb21DYWNoZShjYWNoZT86IGFueSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW5ldyBhY2NvdW50IGRldGFpbHMgaWYgbmVlZGVkIG9yIGNyZWF0ZSBhIG5ldyBvbmVcblx0ICovXG5cdHB1YmxpYyByZW5ldygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdH1cblxuXHQvKipcblx0ICogUGVyZm9ybSBhbnkgbWlncmF0aW9ucyBuZWVkZWRcblx0ICovXG5cdHB1YmxpYyBtaWdyYXRlKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBCcm9hZGNhc3QgbmV3IHJlYWR5IHRva2VuXG5cdCAqL1xuXHRwdWJsaWMgYnJvYWRjYXN0KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICh0aGlzLmZpcmVFdmVudHMgIT09IGZhbHNlKSB7XG5cdFx0XHRFdmVudC5maXJlKEV2ZW50cy5BQ0NPVU5UX0RFVEFJTFMsIGNsb25lT2JqZWN0KHRoaXMuYWNjb3VudERldGFpbHMpKTtcblx0XHR9XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFdyaXRlIHRvIGNhY2hlIGlmIG5lZWRlZFxuXHQgKi9cblx0cHVibGljIHdyaXRlQ2FjaGUoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXHR9XG5cblx0cHVibGljIGdldERldGFpbHMoKTogVXNlckFjY291bnREZXRhaWxzIHtcblx0XHRyZXR1cm4gT2JqZWN0QXNzaWduKHt9LCB0aGlzLmFjY291bnREZXRhaWxzKSBhcyBVc2VyQWNjb3VudERldGFpbHM7XG5cdH1cblxufVxuXG4vKipcbiAqIFp5bmdhIEFub255bW91cyBOZXR3b3JrIChTTiAyNCkgQWNjb3VudFxuICovXG5jbGFzcyBaeW5nYUFub25OZXR3b3JrQWNjb3VudCBleHRlbmRzIFNvY2lhbE5ldHdvcmtBY2NvdW50IHtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLmFjY291bnREZXRhaWxzLnNvY2lhbE5ldHdvcmsgPSAyNDtcblx0fVxuXG5cdC8qKlxuXHQgKiBUcnkgYW5kIHJlc3RvcmUgYWNjb3VudERldGFpbHMgZnJvbSBjYWNoZXMgb3IgY3JlYXRlIGEgbmV3IG9uZVxuXHQgKiBAcGFyYW0gY2FjaGVTdHJpbmcgT3B0aW9uYWwgY2FjaGUgZGF0YSB0byBzYXZlIHRoZSBsb29rdXBcblx0ICovXG5cdHB1YmxpYyBmcm9tQ2FjaGUoY2FjaGU/OiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBub3dUaW1lc3RhbXA6IG51bWJlciA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcblx0XHRsZXQgb3JpZ0NhY2hlS2V5OiBzdHJpbmcgPSBudWxsO1xuXHRcdHJldHVybiBaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfSU5JVElBTElaRUQpIC8vIFdhaXQgZm9yIFNESyBpbml0aWFsaXphdGlvblxuXHRcdFx0LnRoZW4oKCkgPT4gZ2V0U3RvcmFnZUtleUFzeW5jKEFOT05fSU5GT19LRVkpKSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHNvcmFnZSBrZXkgbmFtZVxuXHRcdFx0LnRoZW4oKHN0b3JhZ2VLZXk6IHN0cmluZyk6IFByb21pc2U8VXNlckFjY291bnREZXRhaWxzPiA9PiB7ICAgICAgICAgIC8vIEZldGNoIGZyb20gbG9jYWxTdG9yYWdlXG5cdFx0XHRcdGNvbnN0IG9sZENhY2hlS2V5OiBzdHJpbmcgPSBzdG9yYWdlS2V5O1xuXHRcdFx0XHRjb25zdCBuZXdDYWNoZUtleTogc3RyaW5nID0gc3RvcmFnZUtleSArICdfJyArIFp5bmdhSW5zdGFudC5wbGF5ZXIuZ2V0SUQoKTtcblx0XHRcdFx0Y29uc3QgY2FjaGVWYWx1ZSA9IGxvY2FsQ2FjaGUuZ2V0SXRlbShuZXdDYWNoZUtleSkgfHwgbG9jYWxDYWNoZS5nZXRJdGVtKG9sZENhY2hlS2V5KTtcblx0XHRcdFx0b3JpZ0NhY2hlS2V5ID0gb2xkQ2FjaGVLZXk7XG5cdFx0XHRcdHZhciBkYXRhOiBVc2VyQWNjb3VudERldGFpbHMgPSBudWxsO1xuXHRcdFx0XHRpZiAoY2FjaGVWYWx1ZSkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRkYXRhID0gSlNPTi5wYXJzZShjYWNoZVZhbHVlKSBhcyBVc2VyQWNjb3VudERldGFpbHM7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0ZGF0YSA9IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoZGF0YSk7XG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oKGNhY2hlZEFjY291bnREYXRhOiBVc2VyQWNjb3VudERldGFpbHMpOiBQcm9taXNlPFVzZXJBY2NvdW50RGV0YWlscz4gPT4geyAgLy8gb3B0aW9uYWxseSBmZXRjaCBmcm9tIEZCIGNsb3VkXG5cdFx0XHRcdGlmIChjYWNoZWRBY2NvdW50RGF0YSkge1xuXHRcdFx0XHRcdC8vIEFscmVhZHkgaGF2ZSBkZXRhaWxzLCBza2lwIHRoZSBuZXh0IG5ldHdvcmsgY2FsbFxuXHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoY2FjaGVkQWNjb3VudERhdGEpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfRkJfVE9TX0FDQ0VQVCkudGhlbigoKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gWnluZ2FJbnN0YW50LnBsYXllci5nZXREYXRhQXN5bmMoW29yaWdDYWNoZUtleV0pLnRoZW4oKGZiRGF0YTogYW55KTogUHJvbWlzZTxVc2VyQWNjb3VudERldGFpbHM+ID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBmYkRhdGEgPT09ICdvYmplY3QnICYmIGZiRGF0YVtvcmlnQ2FjaGVLZXldKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShmYkRhdGFbb3JpZ0NhY2hlS2V5XSBhcyBVc2VyQWNjb3VudERldGFpbHMpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oKGV4aXN0aW5nQWNjb3VudERhdGE6IFVzZXJBY2NvdW50RGV0YWlscyk6IFByb21pc2U8dm9pZD4gPT4geyAgIC8vIHBhcnNlIGV4aXN0aW5nIGFjY291bnQgZGF0YVxuXHRcdFx0XHRsZXQgYWQgPSB0aGlzLmFjY291bnREZXRhaWxzOyAvLyBkZXJlZlxuXHRcdFx0XHRpZiAoYWQgJiYgZXhpc3RpbmdBY2NvdW50RGF0YSkge1xuXHRcdFx0XHRcdGFkLmV4cGlyZXMgPSBleGlzdGluZ0FjY291bnREYXRhLmV4cGlyZXMgfHwgYWQuZXhwaXJlcztcblx0XHRcdFx0XHRhZC5wYXNzd29yZCA9IGV4aXN0aW5nQWNjb3VudERhdGEucGFzc3dvcmQgfHwgYWQucGFzc3dvcmQ7XG5cdFx0XHRcdFx0YWQudG9rZW4gPSBleGlzdGluZ0FjY291bnREYXRhLnRva2VuIHx8IGFkLnRva2VuO1xuXHRcdFx0XHRcdGFkLnVzZXJJZCA9IGV4aXN0aW5nQWNjb3VudERhdGEudXNlcklkIHx8IGFkLnVzZXJJZDtcblx0XHRcdFx0XHRhZC56aWQgPSBleGlzdGluZ0FjY291bnREYXRhLnppZCB8fCBhZC56aWQ7XG5cdFx0XHRcdFx0YWQucGxheWVySWQgPSBleGlzdGluZ0FjY291bnREYXRhLnBsYXllcklkICYmIHBhcnNlSW50KGV4aXN0aW5nQWNjb3VudERhdGEucGxheWVySWQudG9TdHJpbmcoKSwgMTApIHx8IGFkLnBsYXllcklkO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0XHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQgKiBSZW5ldyBhY2NvdW50IGRldGFpbHMgaWYgbmVlZGVkIG9yIGNyZWF0ZSBhIG5ldyBhY2NvdW50XG5cdCAqL1xuXHRwdWJsaWMgcmVuZXcoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0bGV0IHJlbmV3UHJvbWlzZTogUHJvbWlzZTx2b2lkPjtcblx0XHRpZiAodGhpcy5hY2NvdW50RGV0YWlscy51c2VySWQpIHtcblx0XHRcdC8vIEV4aXN0aW5nIGFjY291bnRcblx0XHRcdGxldCBub3dUaW1lc3RhbXAgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7XG5cdFx0XHRpZiAoKCh0aGlzLmFjY291bnREZXRhaWxzLmV4cGlyZXMgLSBub3dUaW1lc3RhbXApIDwgRUFSTFlfUkVORVdfU0VDT05EUykgfHwgdGhpcy5mb3JjZVJlZnJlc2ggPT09IHRydWUpIHtcblx0XHRcdFx0aW50ZXJmYWNlIEF1dGhJc3N1ZVRva2VuUmVzcG9uc2Uge1xuXHRcdFx0XHRcdGV4cGlyZXM6IG51bWJlcjtcblx0XHRcdFx0XHR0b2tlbjogc3RyaW5nO1xuXHRcdFx0XHRcdHppZDogc3RyaW5nO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJlbmV3UHJvbWlzZSA9IFp5bmdhLkV2ZW50Lmxhc3QoWnluZ2EuRXZlbnRzLkFQUF9JRClcblx0XHRcdFx0XHQudGhlbigoYXBwSWQ6IG51bWJlcik6IFByb21pc2U8WnluZ2FOZXQuQXBpUmVzdWx0PEF1dGhJc3N1ZVRva2VuUmVzcG9uc2U+PiA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gWnluZ2FOZXQuYXBpKCdQT1NUJywgJ2F1dGgvaXNzdWVUb2tlbicsIHtcblx0XHRcdFx0XHRcdFx0Ym9keToge1xuXHRcdFx0XHRcdFx0XHRcdHVzZXJJZDogdGhpcy5hY2NvdW50RGV0YWlscy51c2VySWQsXG5cdFx0XHRcdFx0XHRcdFx0cGFzc3dvcmQ6IHRoaXMuYWNjb3VudERldGFpbHMucGFzc3dvcmQsXG5cdFx0XHRcdFx0XHRcdFx0YXBwSWQ6IGFwcElkXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdG5vQXV0aDogdHJ1ZVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQudGhlbigocmVzcG9uc2U6IFp5bmdhTmV0LkFwaVJlc3VsdDxBdXRoSXNzdWVUb2tlblJlc3BvbnNlPikgPT4ge1xuXHRcdFx0XHRcdFx0dmFyIGJvZHkgPSByZXNwb25zZS5ib2R5O1xuXHRcdFx0XHRcdFx0dmFyIHhociA9IHJlc3BvbnNlLnhocjtcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgYm9keSA9PT0gJ29iamVjdCcgJiYgeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG5cdFx0XHRcdFx0XHRcdGxldCBhZCA9IHRoaXMuYWNjb3VudERldGFpbHM7XG5cdFx0XHRcdFx0XHRcdGFkLmV4cGlyZXMgPSBib2R5LmV4cGlyZXM7XG5cdFx0XHRcdFx0XHRcdGFkLnppZCA9IHBhcnNlSW50KGJvZHkuemlkLCAxMCk7XG5cdFx0XHRcdFx0XHRcdGFkLnRva2VuID0gYm9keS50b2tlbjtcblx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuZmlyZUV2ZW50cyAhPT0gZmFsc2UpIHtcblx0XHRcdFx0XHRcdFx0XHRFdmVudC5maXJlKEV2ZW50cy5BQ0NPVU5UX0xPR0lOLCBjbG9uZU9iamVjdChhZCkpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHZhciBlcnJvckNhdCA9IHhoci5nZXRSZXNwb25zZUhlYWRlcignRXJyb3ItQ2F0ZWdvcnknKTtcblx0XHRcdFx0XHRcdFx0dmFyIGVycm9yTXNnID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdFcnJvci1NZXNzYWdlJyk7XG5cdFx0XHRcdFx0XHRcdHZhciBlcnJvclR5cGUgPSAndW5rbm93bic7XG5cdFx0XHRcdFx0XHRcdGlmICh4aHIuc3RhdHVzID09PSA1MDAgJiZcblx0XHRcdFx0XHRcdFx0XHRlcnJvckNhdCAmJiBlcnJvckNhdC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgPT09ICdhdXRoLmdlbmVyYWxlcnJvcicgJiZcblx0XHRcdFx0XHRcdFx0XHRlcnJvck1zZyAmJiBlcnJvck1zZy50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgPT09ICdpbnZhbGlkIHVzZXJpZCBvciBwYXNzd29yZCcpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBXZSBjYXJlIGFib3V0IHRoaXMgcGFydGljdWxhciA1MDAgZXJyb3Igc28gZ2l2ZSBpdCBhIGtub3duIGVycm9yIHN0cmluZ1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yVHlwZSA9ICdiYWRsb2dpbic7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KHtcblx0XHRcdFx0XHRcdFx0XHRlcnJvclR5cGU6IGVycm9yVHlwZSxcblx0XHRcdFx0XHRcdFx0XHR4aHI6IHhocixcblx0XHRcdFx0XHRcdFx0XHRib2R5OiBib2R5XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRXhpc3RpbmcgYnV0IG5vdCBuZWVkIHRvIHJlbmV3XG5cdFx0XHRcdHJlbmV3UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBObyBleGlzdGluZyBhY2NvdW50LCBjcmVhdGUgbmV3XG5cdFx0XHRsZXQgcGFzc3dvcmQ6IHN0cmluZyA9IGdlbmVyYXRlUGFzc3dvcmQoKTtcblxuXHRcdFx0aW50ZXJmYWNlIEF1dGhSZWdpc3RlckRldmljZVJlc3BvbnNlIHtcblx0XHRcdFx0dXNlcklkOiBzdHJpbmc7XG5cdFx0XHRcdHppZDogbnVtYmVyO1xuXHRcdFx0XHR0b2tlbjogc3RyaW5nO1xuXHRcdFx0XHRleHBpcmVzOiBudW1iZXI7XG5cdFx0XHRcdHBsYXllcklkOiBzdHJpbmc7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENyZWF0ZSBhIG5ldyBhY2NvdW50IHVubGVzcyB3ZSB3ZXJlIHRvbGQgbm90IHRvXG5cdFx0XHRyZW5ld1Byb21pc2UgPSB0aGlzLm5vQ3JlYXRlID09PSB0cnVlID8gUHJvbWlzZS5yZXNvbHZlKCkgOiBaeW5nYS5FdmVudC5sYXN0KFp5bmdhLkV2ZW50cy5BUFBfSUQpXG5cdFx0XHRcdC50aGVuKChhcHBJZDogbnVtYmVyKTogUHJvbWlzZTxaeW5nYU5ldC5BcGlSZXN1bHQ8QXV0aFJlZ2lzdGVyRGV2aWNlUmVzcG9uc2U+PiA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIFp5bmdhTmV0LmFwaSgnUE9TVCcsICdhdXRoL3JlZ2lzdGVyRGV2aWNlJywge1xuXHRcdFx0XHRcdFx0Ym9keToge1xuXHRcdFx0XHRcdFx0XHRwYXNzd29yZDogcGFzc3dvcmQsXG5cdFx0XHRcdFx0XHRcdGFwcElkOiBhcHBJZFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdG5vQXV0aDogdHJ1ZVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQudGhlbigocmVzcG9uc2U6IFp5bmdhTmV0LkFwaVJlc3VsdDxBdXRoUmVnaXN0ZXJEZXZpY2VSZXNwb25zZT4pID0+IHtcblx0XHRcdFx0XHRjb25zdCBib2R5OiBBdXRoUmVnaXN0ZXJEZXZpY2VSZXNwb25zZSA9IHJlc3BvbnNlLmJvZHk7XG5cdFx0XHRcdFx0Y29uc3QgeGhyOiBYTUxIdHRwUmVxdWVzdCA9IHJlc3BvbnNlLnhocjtcblx0XHRcdFx0XHRpZiAodHlwZW9mIGJvZHkgPT09ICdvYmplY3QnICYmIHhoci5zdGF0dXMgPT09IDIwMCkge1xuXHRcdFx0XHRcdFx0Ly8gU2F2ZSBTb2NpYWwgTmV0d29yayBJRCBhbmQgcGFzc293cmQgZm9yIGxhdGVyIGFzIHdlbGxcblx0XHRcdFx0XHRcdGxldCBhZCA9IHRoaXMuYWNjb3VudERldGFpbHM7IC8vIERlLXJlZiBvbmNlXG5cdFx0XHRcdFx0XHRhZC5leHBpcmVzID0gYm9keS5leHBpcmVzO1xuXHRcdFx0XHRcdFx0YWQucGFzc3dvcmQgPSBwYXNzd29yZDtcblx0XHRcdFx0XHRcdGFkLnBsYXllcklkID0gcGFyc2VJbnQoYm9keS5wbGF5ZXJJZC50b1N0cmluZygpLCAxMCk7XG5cdFx0XHRcdFx0XHRhZC50b2tlbiA9IGJvZHkudG9rZW47XG5cdFx0XHRcdFx0XHRhZC51c2VySWQgPSBib2R5LnVzZXJJZDtcblx0XHRcdFx0XHRcdGFkLnppZCA9IGJvZHkuemlkO1xuXHRcdFx0XHRcdFx0Ly8gZmlyZSBhbiBldmVudC4gIFVzZWZ1bCBmb3IgaW5zdGFsbCB0cmFja2luZ1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMuZmlyZUV2ZW50cykge1xuXHRcdFx0XHRcdFx0XHRFdmVudC5maXJlKEV2ZW50cy5BQ0NPVU5UX0NSRUFURSwgY2xvbmVPYmplY3QoYWQpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KHtcblx0XHRcdFx0XHRcdFx0ZXJyb3I6ICdBY2NvdW50IGNyZWF0ZSBmYWlsZWQnLFxuXHRcdFx0XHRcdFx0XHR4aHI6IHhocixcblx0XHRcdFx0XHRcdFx0Ym9keTogYm9keVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0XHRcdFx0fSk7XG5cdFx0fVxuXHRcdGlmICghcmVuZXdQcm9taXNlKSB7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoJ1Vua25vd24gYWNjb3VudCBlcnJvcicpO1xuXHRcdH1cblx0XHRyZXR1cm4gcmVuZXdQcm9taXNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFBlcmZvcm0gYW55IG1pZ3JhdGlvbnMgbmVlZGVkXG5cdCAqL1xuXHRwdWJsaWMgbWlncmF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBubyBtaWdyYXRpb25zIG5lZWRlZCBmb3IgU04yNFxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBCcm9hZGNhc3QgbmV3IHJlYWR5IHRva2VuXG5cdCAqL1xuXHRwdWJsaWMgYnJvYWRjYXN0KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHJldHVybiBzdXBlci5icm9hZGNhc3QoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBXcml0ZSB0byBjYWNoZSBpZiBuZWVkZWRcblx0ICovXG5cdHB1YmxpYyB3cml0ZUNhY2hlKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHJldHVybiBnZXRTdG9yYWdlS2V5QXN5bmMoQU5PTl9JTkZPX0tFWSlcblx0XHRcdC50aGVuKChzdG9yYWdlS2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuXHRcdFx0XHQvLyBDcmVhdGUgYSBGQiBJbnN0YW50IHdyaXRlIG9iamVjdFxuXHRcdFx0XHRjb25zdCBvYmogPSB7fTtcblx0XHRcdFx0Y29uc3QgYWQgPSB0aGlzLmFjY291bnREZXRhaWxzO1xuXHRcdFx0XHRvYmpbc3RvcmFnZUtleV0gPSBhZDtcblxuXHRcdFx0XHQvLyBGaXJzdCwgc3RvcmUgaW4gbG9jYWxTdG9yYWdlLCB0aGlzIHdpbGwgaGF2ZSB0aGUgZmFzdGVzIGZ1dHVyZSBhY2Nlc3MgcGF0dGVyblxuXHRcdFx0XHRsb2NhbENhY2hlLnNldEl0ZW0oc3RvcmFnZUtleSArICdfJyArIFp5bmdhSW5zdGFudC5wbGF5ZXIuZ2V0SUQoKSwgSlNPTi5zdHJpbmdpZnkoYWQpKTtcblxuXHRcdFx0XHQvLyBUT0RPOiBDaGVjayBpZiB0aGlzLmFjY291bnREZXRhaWxzIGhhcyBjaGFuZ2VkIGFuZCBvbmx5IGRvIHdyaXRlcyBpZiBpdCBoYXNcblx0XHRcdFx0Ly8gUGVyc2lzdCBpdCAoc2hvdWxkIGJlIGNyb3NzIGRldmljZSkgd2l0aCB0aGUgaW5zdGFudCBTREtcblx0XHRcdFx0cmV0dXJuIFp5bmdhSW5zdGFudC5FdmVudC5sYXN0KFp5bmdhSW5zdGFudC5FdmVudHMuSU5TVEFOVF9GQl9UT1NfQUNDRVBUKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gWnluZ2FJbnN0YW50LnBsYXllci5zZXREYXRhQXN5bmMob2JqKSAvLyBUZWxsIHRoZSBTREsgdG8gc2V0IHRoZSBkYXRhXG5cdFx0XHRcdFx0XHQudGhlbihaeW5nYUluc3RhbnQucGxheWVyLmZsdXNoRGF0YUFzeW5jKSAgLy8gQWxzbyBtYWtlIHN1cmUgRkIgYWN0dWFsbHkgcGVyc2lzdHMgaXQgdG8gdGhlIGNsb3VkXG5cdFx0XHRcdFx0XHQudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLkFDQ09VTlRfUEVSU0lTVEVELCB7XG5cdFx0XHRcdFx0XHRcdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRhY2NvdW50X2RhdGE6IGNsb25lT2JqZWN0KGFkKSxcblx0XHRcdFx0XHRcdFx0XHRlcnJvcjogbnVsbFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdFx0RXZlbnQuZmlyZShFdmVudHMuQUNDT1VOVF9QRVJTSVNURUQsIHtcblx0XHRcdFx0XHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XHRhY2NvdW50X2RhdGE6IGNsb25lT2JqZWN0KGFkKSxcblx0XHRcdFx0XHRcdFx0XHRlcnJvcjogZVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pXG5cdFx0XHQudGhlbigoKSA9PiBQcm9taXNlLnJlc29sdmUoKSk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0RGV0YWlscygpOiBVc2VyQWNjb3VudERldGFpbHMge1xuXHRcdHJldHVybiBjbG9uZU9iamVjdCh0aGlzLmFjY291bnREZXRhaWxzKSBhcyBVc2VyQWNjb3VudERldGFpbHM7XG5cdH1cblxufVxuXG4vKipcbiAqIEZCSUcgU29jaWFsIE5ldHdvcmsgKFNOIDQyKSBBY2NvdW50XG4gKi9cbmNsYXNzIEZCSUdOZXR3b3JrQWNjb3VudCBleHRlbmRzIFNvY2lhbE5ldHdvcmtBY2NvdW50IHtcblx0Y29uc3RydWN0b3IoZmlyZUV2ZW50cz86IGJvb2xlYW4pIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuYWNjb3VudERldGFpbHMuc29jaWFsTmV0d29yayA9IDQyO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRyeSBhbmQgcmVzdG9yZSBhY2NvdW50RGV0YWlscyBmcm9tIGNhY2hlcyBvciBjcmVhdGUgYSBuZXcgb25lXG5cdCAqIEBwYXJhbSBjYWNoZVN0cmluZyBPcHRpb25hbCBjYWNoZSBkYXRhIHRvIHNhdmUgdGhlIGxvb2t1cFxuXHQgKi9cblx0cHVibGljIGZyb21DYWNoZShjYWNoZT86IGFueSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IG5vd1RpbWVzdGFtcDogbnVtYmVyID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xuXHRcdGxldCBjYWNoZUtleTogc3RyaW5nO1xuXHRcdHJldHVybiBaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfSU5JVElBTElaRUQpIC8vIFdhaXQgZm9yIFNESyBpbml0aWFsaXphdGlvblxuXHRcdFx0LnRoZW4oKCkgPT4gZ2V0U3RvcmFnZUtleUFzeW5jKEZCSUdfSU5GT19LRVkpKSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHNvcmFnZSBrZXkgbmFtZVxuXHRcdFx0LnRoZW4oKHN0b3JhZ2VLZXk6IHN0cmluZyk6IFByb21pc2U8VXNlckFjY291bnREZXRhaWxzPiA9PiB7ICAgICAgICAgIC8vIEZldGNoIGZyb20gbG9jYWxTdG9yYWdlXG5cdFx0XHRcdGNvbnN0IGxvY2FsU3RvcmFnZUtleTogc3RyaW5nID0gc3RvcmFnZUtleSArICdfJyArIFp5bmdhSW5zdGFudC5wbGF5ZXIuZ2V0SUQoKTtcblx0XHRcdFx0Y29uc3QgY2FjaGVWYWx1ZSA9IGxvY2FsQ2FjaGUuZ2V0SXRlbShsb2NhbFN0b3JhZ2VLZXkpO1xuXHRcdFx0XHRjYWNoZUtleSA9IHN0b3JhZ2VLZXk7XG5cdFx0XHRcdHZhciBkYXRhOiBVc2VyQWNjb3VudERldGFpbHMgPSBudWxsO1xuXHRcdFx0XHRpZiAoY2FjaGVWYWx1ZSkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRkYXRhID0gSlNPTi5wYXJzZShjYWNoZVZhbHVlKSBhcyBVc2VyQWNjb3VudERldGFpbHM7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0ZGF0YSA9IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoZGF0YSk7XG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oKGNhY2hlZEFjY291bnREYXRhOiBVc2VyQWNjb3VudERldGFpbHMpOiBQcm9taXNlPFVzZXJBY2NvdW50RGV0YWlscz4gPT4geyAgLy8gb3B0aW9uYWxseSBmZXRjaCBmcm9tIEZCIGNsb3VkXG5cdFx0XHRcdGlmIChjYWNoZWRBY2NvdW50RGF0YSkge1xuXHRcdFx0XHRcdC8vIEFscmVhZHkgaGF2ZSBkZXRhaWxzLCBza2lwIHRoZSBuZXh0IG5ldHdvcmsgY2FsbFxuXHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoY2FjaGVkQWNjb3VudERhdGEpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfRkJfVE9TX0FDQ0VQVCkudGhlbigoKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gWnluZ2FJbnN0YW50LnBsYXllci5nZXREYXRhQXN5bmMoW2NhY2hlS2V5XSkudGhlbigoZmJEYXRhOiBhbnkpOiBQcm9taXNlPFVzZXJBY2NvdW50RGV0YWlscz4gPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAodHlwZW9mIGZiRGF0YSA9PT0gJ29iamVjdCcgJiYgZmJEYXRhW2NhY2hlS2V5XSkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoZmJEYXRhW2NhY2hlS2V5XSBhcyBVc2VyQWNjb3VudERldGFpbHMpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnRoZW4oKGV4aXN0aW5nQWNjb3VudERhdGE6IFVzZXJBY2NvdW50RGV0YWlscyk6IFByb21pc2U8dm9pZD4gPT4geyAgIC8vIHBhcnNlIGV4aXN0aW5nIGFjY291bnQgZGF0YVxuXHRcdFx0XHRsZXQgYWQgPSB0aGlzLmFjY291bnREZXRhaWxzOyAvLyBkZXJlZlxuXHRcdFx0XHRpZiAoYWQgJiYgZXhpc3RpbmdBY2NvdW50RGF0YSAmJiB0eXBlb2YgZXhpc3RpbmdBY2NvdW50RGF0YSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0XHRhZC5leHBpcmVzID0gZXhpc3RpbmdBY2NvdW50RGF0YS5leHBpcmVzIHx8IGFkLmV4cGlyZXM7XG5cdFx0XHRcdFx0YWQucGFzc3dvcmQgPSBleGlzdGluZ0FjY291bnREYXRhLnBhc3N3b3JkIHx8IGFkLnBhc3N3b3JkO1xuXHRcdFx0XHRcdGFkLnRva2VuID0gZXhpc3RpbmdBY2NvdW50RGF0YS50b2tlbiB8fCBhZC50b2tlbjtcblx0XHRcdFx0XHRhZC51c2VySWQgPSBleGlzdGluZ0FjY291bnREYXRhLnVzZXJJZCB8fCBhZC51c2VySWQ7XG5cdFx0XHRcdFx0YWQuemlkID0gZXhpc3RpbmdBY2NvdW50RGF0YS56aWQgfHwgYWQuemlkO1xuXHRcdFx0XHRcdGFkLnBsYXllcklkID0gZXhpc3RpbmdBY2NvdW50RGF0YS5wbGF5ZXJJZCAmJiBwYXJzZUludChleGlzdGluZ0FjY291bnREYXRhLnBsYXllcklkLnRvU3RyaW5nKCksIDEwKSB8fCBhZC5wbGF5ZXJJZDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdFx0XHR9KTtcblx0fVxuXHQvKipcblx0ICogUmVuZXcgYWNjb3VudCBkZXRhaWxzIGlmIG5lZWRlZCBvciBjcmVhdGUgYSBuZXcgYWNjb3VudFxuXHQgKi9cblx0cHVibGljIHJlbmV3KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGxldCBub3dUaW1lc3RhbXAgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7XG5cdFx0bGV0IGFkID0gdGhpcy5hY2NvdW50RGV0YWlsczsgLy8gRGVyZWZlcmVuY2Ugb25jZSBhcyB3ZSB1c2UgaXQgYSBmZXcgdGltZXMgYmVsb3dcblx0XHRpZiAoKGFkLmV4cGlyZXMgLSBub3dUaW1lc3RhbXApIDwgRUFSTFlfUkVORVdfU0VDT05EUyB8fCB0aGlzLmZvcmNlUmVmcmVzaCA9PT0gdHJ1ZSkge1xuXHRcdFx0Ly8gTmV3IG9yIG5lYXJseSBleHBpcmVkIGFjY291bnQgT1Igd2UgYXJlIGZvcmNpbmcgYSBmcmVmcmVzaFxuXHRcdFx0cmV0dXJuIGdldE5ld0ZCSUdBdXRoRGV0YWlscygnMScpLnRoZW4oKGZiaWdBdXRoRGV0YWlscykgPT4ge1xuXHRcdFx0XHRhZC5leHBpcmVzID0gZmJpZ0F1dGhEZXRhaWxzLmV4cGlyZXM7XG5cdFx0XHRcdGFkLnVzZXJJZCA9IGZiaWdBdXRoRGV0YWlscy51c2VySWQ7XG5cdFx0XHRcdGFkLnRva2VuID0gZmJpZ0F1dGhEZXRhaWxzLnRva2VuO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEV4aXN0aW5nIGFuZCBub3QgZXhwaXJlZFxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBQZXJmb3JtIGFueSBtaWdyYXRpb25zIG5lZWRlZFxuXHQgKi9cblx0cHVibGljIG1pZ3JhdGUoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0bGV0IGFkID0gdGhpcy5hY2NvdW50RGV0YWlsczsgICAgICAgICAgICAgICAgICAgICAgIC8vIERlcmVmZXJlbmNlIG9uY2UgYXMgd2UgdXNlIGl0IGEgZmV3IHRpbWVzIGJlbG93XG5cdFx0bGV0IHJldHVyblByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcblxuXHRcdC8qKlxuXHRcdCAqIEZsb3cgKGEteiByZXByZXNlbnQgY29uY3VycmVudC9hc3luYyB0YXNrcyk6XG5cdFx0ICogMWEpIEZldGNoIFNOMjQgZGV0YWlscywgcmVuZXcgaWYgZXhwaXJlZFxuXHRcdCAqIDFiKSBGZXRjaCBjdXJyZW50IHBsYXllcklEIGZvciBTTjQyIHRva2VuXG5cdFx0ICogMi4xKSBJZiBwbGF5ZXJJRCBpcyBhbHJlYWR5IGFzc2lnbmVkIG5vdGUgaXQgYW5kIHRoZSBTTjQyIHppZCBhbmQgZXhpdFxuXHRcdCAqIDIuMikgSWYgcGxheWVySUQgaXMgbm90IGFzc2lnbmVkIGFuZCBTTjI0IGRldGFpbHMgZG9uJ3QgZXhpc3Qgbm90ZSBTTjQyIHppZCBhcyBwbGF5ZXJJZFxuXHRcdCAqIDIuMykgSWYgcGxheWVySUQgaXMgbm90IGFzc2lnbmVkIGFuZCBTTjI0IGRldGFpbHMgZG8gZXhpc3QsIG1ha2Ugbm90ZSBvZiBtaWdyYXRpb25cblx0XHQgKiAyLjNhKSBBc3NvY2lhdGUgU04yNCB0b2tlbiB0byBTTjQyIHVzaW5nIFNONDIgdG9rZW4gYXMgcHJpbWFyeSB0byBpZGVudGl0aWVzL2Fzc29jaWF0ZSwgbm90ZSBTTjI0IHppZCBhcyBwbGF5ZXJJZFxuXHRcdCAqIDNhKSBDYWxsIHBsYXllcmlkL2Fzc2lnbiB3aXRoIG5vdGVkIHBsYXllcklkIGZyb20gMi4yIG9yIDIuM2Fcblx0XHQgKiA0YSkgSWYgd2FzIGEgbWlncmF0aW9uLCBmaXJlIG1pZ3JhdGlvbiBldmVudFxuXHRcdCAqIDRiKSBJZiB3YXMgbm90IG1pZ3JhdGlvbiBidXQgcGxheWVySWQgd2FzIGFzc2lnbmVkIGZpcmUgYWNjb3VudCBjcmVhdGUgZXZlbnRcblx0XHQgKi9cblxuXHRcdGxldCBzbjQyQWNjb3VudFN0YXRlOiAnaW5zdGFsbCcgfCAnbWlncmF0aW9uJyB8ICdyZWNvdmVyeSc7XG5cblx0XHRpZiAoYWQuemlkIDw9IDAgfHwgYWQucGxheWVySWQgPD0gMCkge1xuXHRcdFx0Ly8gTmV3IGFjY291bnQsIHByb2JhYmx5LCBhdHRlbXB0IG1pZ3JhdGlvbiBmcm9tIFNOMjRcblx0XHRcdGNvbnN0IGV4aXN0aW5nWnluZ2FBbm9uID0gbmV3IFp5bmdhQW5vbk5ldHdvcmtBY2NvdW50KCk7XG5cdFx0XHRleGlzdGluZ1p5bmdhQW5vbi5ub0NyZWF0ZSA9IHRydWU7ICAgIC8vIE1ha2Ugc3VyZSB3ZSBkb24ndCBjcmVhdGUgYSBuZXcgYW5vbi4gIFdlIG9ubHkgd2FudCBleGlzdGluZ1xuXHRcdFx0ZXhpc3RpbmdaeW5nYUFub24uZmlyZUV2ZW50cyA9IGZhbHNlOyAvLyBUaGlzIGlzIG5vdCBvdXIgcHJpbWFyeSBTTiBkbyBkb24ndCBicm9hZGNhc3QgYWNjdCBkZXRhaWxzLlxuXHRcdFx0Ly8gRmV0Y2ggZXhpc3RpbmcgY2FjaGVkIHNuMjQgYWNjb3VudCBpbmZvcm1hdGlvbiBpZiBpdCBleGlzdHNcblx0XHRcdGxldCBleGlzdGluZ0RldGFpbHNQcm9taXNlOiBQcm9taXNlPFVzZXJBY2NvdW50RGV0YWlscz4gPSBleGlzdGluZ1p5bmdhQW5vbi5mcm9tQ2FjaGUoKVxuXHRcdFx0XHQudGhlbihleGlzdGluZ1p5bmdhQW5vbi5yZW5ldy5iaW5kKGV4aXN0aW5nWnluZ2FBbm9uKSlcblx0XHRcdFx0LnRoZW4oKCkgPT4gZXhpc3RpbmdaeW5nYUFub24uZ2V0RGV0YWlscygpKTtcblx0XHRcdGludGVyZmFjZSBDdXJyZW50UGxheWVySURJbmZvIHtcblx0XHRcdFx0cGxheWVySWQ6IG51bWJlcjtcblx0XHRcdFx0emlkOiBudW1iZXI7XG5cdFx0XHRcdGFwcElkOiBudW1iZXI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZldGNoIGV4aXNpbmcgcGxheWVySUQgaW5mbyBmb3Igc240MiBhY2NvdW50XG5cdFx0XHRsZXQgY3VycmVudFBsYXllcklkSW5mb1Byb21pc2UgPSBaeW5nYU5ldC5hcGkoJ1BPU1QnLCAnL3BsYXllcmlkL2dldCcsIHtcblx0XHRcdFx0dXNlVG9rZW46IGFkLnRva2VuXG5cdFx0XHR9KS50aGVuKChwbGF5ZXJJZFJlc3VsdHM6IFp5bmdhTmV0LkFwaVJlc3VsdDxQbGF5ZXJJREdldFJlc3VsdHM+KSA9PiB7XG5cdFx0XHRcdGxldCBjdXJyZW50SW5mbzogQ3VycmVudFBsYXllcklESW5mbyA9IHtcblx0XHRcdFx0XHRwbGF5ZXJJZDogbnVsbCxcblx0XHRcdFx0XHR6aWQ6IG51bGwsXG5cdFx0XHRcdFx0YXBwSWQ6IG51bGxcblx0XHRcdFx0fTtcblx0XHRcdFx0bGV0IHhociA9IHBsYXllcklkUmVzdWx0cy54aHI7XG5cdFx0XHRcdGxldCByZXN1bHRzID0gcGxheWVySWRSZXN1bHRzLmJvZHk7XG5cdFx0XHRcdGxldCBwbGF5ZXJJZEluZm9Qcm9taXNlOiBQcm9taXNlPEN1cnJlbnRQbGF5ZXJJREluZm8+O1xuXG5cdFx0XHRcdGlmICh4aHIuc3RhdHVzID09PSAyMDAgJiYgcmVzdWx0cyAmJiByZXN1bHRzLmxpc3QgJiYgcmVzdWx0cy5saXN0Lmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRsZXQgcmVzdWx0ID0gcmVzdWx0cy5saXN0WzBdO1xuXHRcdFx0XHRcdGN1cnJlbnRJbmZvLnppZCA9IHBhcnNlSW50KHJlc3VsdC5uZXR3b3JrSWQuemlkLnRvU3RyaW5nKCksIDEwKTtcblx0XHRcdFx0XHRwbGF5ZXJJZEluZm9Qcm9taXNlID0gWnluZ2EuRXZlbnQubGFzdChaeW5nYS5FdmVudHMuQVBQX0lEKS50aGVuKChhcHBJZDogbnVtYmVyKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgYXBwS2V5ID0gYXBwSWQudG9TdHJpbmcoKTtcblx0XHRcdFx0XHRcdGxldCBwbGF5ZXJJZEFwcFJlY29yZCA9IHJlc3VsdC5wbGF5ZXJJZHNbYXBwS2V5XSB8fCB7fTtcblx0XHRcdFx0XHRcdGxldCBwbGF5ZXJJZFJlY29yZCA9IHBsYXllcklkQXBwUmVjb3JkW2N1cnJlbnRJbmZvLnppZC50b1N0cmluZygpXTtcblx0XHRcdFx0XHRcdGN1cnJlbnRJbmZvLnBsYXllcklkID0gcGxheWVySWRSZWNvcmRcblx0XHRcdFx0XHRcdFx0JiYgcGxheWVySWRSZWNvcmQucGxheWVySWRcblx0XHRcdFx0XHRcdFx0JiYgcGFyc2VJbnQocGxheWVySWRSZWNvcmQucGxheWVySWQudG9TdHJpbmcoKSwgMTApXG5cdFx0XHRcdFx0XHRcdHx8IG51bGw7XG5cdFx0XHRcdFx0XHRjdXJyZW50SW5mby5hcHBJZCA9IGFwcElkO1xuXHRcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShjdXJyZW50SW5mbyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cGxheWVySWRJbmZvUHJvbWlzZSA9IFByb21pc2UucmVqZWN0KHtcblx0XHRcdFx0XHRcdG1lc3NhZ2U6ICdQbGF5ZXJJZCBmZXRjaCBmYWlsZWQnLFxuXHRcdFx0XHRcdFx0eGhyOiB4aHIsXG5cdFx0XHRcdFx0XHRyZXN1bHRzOiByZXN1bHRzXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHBsYXllcklkSW5mb1Byb21pc2U7XG5cdFx0XHR9KSBhcyBQcm9taXNlPEN1cnJlbnRQbGF5ZXJJREluZm8+O1xuXG5cdFx0XHRyZXR1cm5Qcm9taXNlID0gUHJvbWlzZS5hbGwoW2V4aXN0aW5nRGV0YWlsc1Byb21pc2UsIGN1cnJlbnRQbGF5ZXJJZEluZm9Qcm9taXNlXSlcblx0XHRcdFx0LnRoZW4oKHZhbHVlOiBbVXNlckFjY291bnREZXRhaWxzLCBDdXJyZW50UGxheWVySURJbmZvXSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHNuMjRBY2NvdW50RGV0YWlscyA9IHZhbHVlWzBdO1xuXHRcdFx0XHRcdGNvbnN0IHNuNDJQbGF5ZXJJZEluZm8gPSB2YWx1ZVsxXTtcblxuXHRcdFx0XHRcdGxldCB6aWQgPSBzbjQyUGxheWVySWRJbmZvLnppZDtcblx0XHRcdFx0XHRpZiAoemlkID4gMCkge1xuXHRcdFx0XHRcdFx0dGhpcy5hY2NvdW50RGV0YWlscy56aWQgPSB6aWQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKHNuNDJQbGF5ZXJJZEluZm8ucGxheWVySWQgJiYgc240MlBsYXllcklkSW5mby5wbGF5ZXJJZC50b1N0cmluZygpLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdC8vIFdlIGFscmVhZHkgaGF2ZSBhIHBsYXllcklEIHNvIHdlIG11c3QgaGF2ZSBqdXN0IG5vdCBzYXZlZC9jYWNoZWQgaXQgYmVmb3JlXG5cdFx0XHRcdFx0XHR0aGlzLmFjY291bnREZXRhaWxzLnBsYXllcklkID0gcGFyc2VJbnQoc240MlBsYXllcklkSW5mby5wbGF5ZXJJZC50b1N0cmluZygpLCAxMCk7XG5cdFx0XHRcdFx0XHRzbjQyQWNjb3VudFN0YXRlID0gJ3JlY292ZXJ5Jztcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0bGV0IHNuMjRQbGF5ZXJJZCA9IChzbjI0QWNjb3VudERldGFpbHMgJiYgc24yNEFjY291bnREZXRhaWxzLnBsYXllcklkIHx8ICcnKS50b1N0cmluZygpO1xuXHRcdFx0XHRcdFx0bGV0IHNuMjRUb2tlbiA9IChzbjI0QWNjb3VudERldGFpbHMgJiYgc24yNEFjY291bnREZXRhaWxzLnRva2VuIHx8ICcnKS50b1N0cmluZygpO1xuXHRcdFx0XHRcdFx0bGV0IGlkZW50aXR5QXNzb2ljYXRlUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpOyAvLyBCeSBkZWZhdWx0IG5vIGFjY29jaWF0aW9uIG5lZWRlZFxuXG5cdFx0XHRcdFx0XHQvLyBBc3N1bWUgaW5zdGFsbCBmb3Igbm93XG5cdFx0XHRcdFx0XHRzbjQyQWNjb3VudFN0YXRlID0gJ2luc3RhbGwnO1xuXHRcdFx0XHRcdFx0dGhpcy5hY2NvdW50RGV0YWlscy5wbGF5ZXJJZCA9IHBhcnNlSW50KHNuNDJQbGF5ZXJJZEluZm8uemlkLnRvU3RyaW5nKCksIDEwKTsgLy8gSW5zdGFsbCwgcGxheWVySUQgc2hvdWxkIGJlIDQyemlkXG5cdFx0XHRcdFx0XHRpZiAoc24yNFBsYXllcklkLmxlbmd0aCA+IDAgJiYgc24yNFRva2VuLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdFx0Ly8gT2gsIGxvb2ssIGEgMjQgYWNjb3VudC4gIE1pZ3JhdGUgaW5zdGVhZC4gIFdlIHByb2JhYmx5IGhhdmUgYSBwbGF5ZXJJZFxuXHRcdFx0XHRcdFx0XHRzbjQyQWNjb3VudFN0YXRlID0gJ21pZ3JhdGlvbic7XG5cdFx0XHRcdFx0XHRcdGludGVyZmFjZSBJZGVudGl0aWVzQXNzb2NpYXRlUGF5bG9hZCB7XG5cdFx0XHRcdFx0XHRcdFx0dG9rZW46IHtcblx0XHRcdFx0XHRcdFx0XHRcdGFwcElkOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdFx0XHRzbklkOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdFx0XHR1c2VySWQ6IHN0cmluZzsgLy8gQWN0dWFsbHkgemlkIDooXG5cdFx0XHRcdFx0XHRcdFx0XHRzZXNzaW9uOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpbnRlcmZhY2UgSWRlbnRpdGllc0Fzc29jaWF0ZVJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0bWFwcGluZ3M6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFtrZXk6IHN0cmluZ106IHN0cmluZztcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGxldCBhc3NvY2lhdGVCb2R5OiBJZGVudGl0aWVzQXNzb2NpYXRlUGF5bG9hZCA9IHtcblx0XHRcdFx0XHRcdFx0XHR0b2tlbjoge1xuXHRcdFx0XHRcdFx0XHRcdFx0YXBwSWQ6IHNuNDJQbGF5ZXJJZEluZm8uYXBwSWQudG9TdHJpbmcoKSxcblx0XHRcdFx0XHRcdFx0XHRcdHNuSWQ6ICcyNCcsXG5cdFx0XHRcdFx0XHRcdFx0XHR1c2VySWQ6IHNuMjRBY2NvdW50RGV0YWlscy56aWQudG9TdHJpbmcoKSxcblx0XHRcdFx0XHRcdFx0XHRcdHNlc3Npb246IHNuMjRUb2tlblxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0aWRlbnRpdHlBc3NvaWNhdGVQcm9taXNlID0gWnluZ2FOZXQuYXBpKCdQT1NUJywgJ2lkZW50aXRpZXMvYXNzb2NpYXRlJywge1xuXHRcdFx0XHRcdFx0XHRcdHVzZVRva2VuOiB0aGlzLmFjY291bnREZXRhaWxzLnRva2VuLFxuXHRcdFx0XHRcdFx0XHRcdGJvZHk6IGFzc29jaWF0ZUJvZHlcblx0XHRcdFx0XHRcdFx0fSkudGhlbigocmVzdWx0OiBaeW5nYU5ldC5BcGlSZXN1bHQ8SWRlbnRpdGllc0Fzc29jaWF0ZVJldHVybj4pID0+IHtcblx0XHRcdFx0XHRcdFx0XHRsZXQgeGhyID0gcmVzdWx0Lnhocjtcblx0XHRcdFx0XHRcdFx0XHRsZXQgYXNzb2NpYXRlUmVzdWx0ID0gcmVzdWx0LmJvZHk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHhoci5zdGF0dXMgPT09IDIwMCAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0YXNzb2NpYXRlUmVzdWx0ICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRhc3NvY2lhdGVSZXN1bHQubWFwcGluZ3MgJiZcblx0XHRcdFx0XHRcdFx0XHRcdGFzc29jaWF0ZVJlc3VsdC5tYXBwaW5nc1tzbjI0QWNjb3VudERldGFpbHMuemlkLnRvU3RyaW5nKCldID09PSAnMjQnXG5cdFx0XHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmFjY291bnREZXRhaWxzLnBsYXllcklkID0gcGFyc2VJbnQoc24yNEFjY291bnREZXRhaWxzLnBsYXllcklkLnRvU3RyaW5nKCksIDEwKTtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bWVzc2FnZTogJ1NOMjQgaWRlbnRpdHkgYXNzb2NpYXRpb24gZmlsZWQnLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHI6IHhocixcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzdWx0czogYXNzb2NpYXRlUmVzdWx0XG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBTaG9ydCBjaXJjdWl0IGFzIHdlIG5lZWQgdG8gc2V0IHBsYXllcklkXG5cdFx0XHRcdFx0XHRyZXR1cm4gaWRlbnRpdHlBc3NvaWNhdGVQcm9taXNlLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gWnluZ2FOZXQuYXBpKCdQT1NUJywgJ3BsYXllcmlkL2Fzc2lnbicsIHtcblx0XHRcdFx0XHRcdFx0XHR1c2VUb2tlbjogdGhpcy5hY2NvdW50RGV0YWlscy50b2tlbixcblx0XHRcdFx0XHRcdFx0XHRib2R5OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwbGF5ZXJJZDogdGhpcy5hY2NvdW50RGV0YWlscy5wbGF5ZXJJZFxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSkudGhlbigocmVzdWx0cykgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGxldCB4aHIgPSByZXN1bHRzLnhocjtcblx0XHRcdFx0XHRcdFx0XHRsZXQgYm9keSA9IHJlc3VsdHMuYm9keTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoc240MkFjY291bnRTdGF0ZSA9PT0gJ2luc3RhbGwnKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLkFDQ09VTlRfQ1JFQVRFLCBjbG9uZU9iamVjdCh0aGlzLmFjY291bnREZXRhaWxzKSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHNuNDJBY2NvdW50U3RhdGUgPT09ICdtaWdyYXRpb24nKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBtaWdyYXRpb25BY2NvdW50czogTWlncmF0aW9uQWNjb3VudHMgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZnJvbTogY2xvbmVPYmplY3Qoc24yNEFjY291bnREZXRhaWxzKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0bzogY2xvbmVPYmplY3QodGhpcy5hY2NvdW50RGV0YWlscylcblx0XHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0RXZlbnQuZmlyZShFdmVudHMuQUNDT1VOVF9NSUdSQVRFRCwgbWlncmF0aW9uQWNjb3VudHMpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3Qoe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRtZXNzYWdlOiAnU040MiBwYWx5ZXJJRCBhc3NpZ24gZmFpbGVkJyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyOiB4aHIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJlc3VsdHM6IGJvZHlcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmV0dXJuUHJvbWlzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBCcm9hZGNhc3QgbmV3IHJlYWR5IHRva2VuXG5cdCAqL1xuXHRwdWJsaWMgYnJvYWRjYXN0KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHJldHVybiBzdXBlci5icm9hZGNhc3QoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBXcml0ZSB0byBjYWNoZSBpZiBuZWVkZWRcblx0ICovXG5cdHB1YmxpYyB3cml0ZUNhY2hlKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHJldHVybiBnZXRTdG9yYWdlS2V5QXN5bmMoRkJJR19JTkZPX0tFWSlcblx0XHRcdC50aGVuKChzdG9yYWdlS2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuXHRcdFx0XHQvLyBDcmVhdGUgYSBGQiBJbnN0YW50IHdyaXRlIG9iamVjdFxuXHRcdFx0XHRjb25zdCBvYmogPSB7fTtcblx0XHRcdFx0Y29uc3QgYWQgPSB0aGlzLmFjY291bnREZXRhaWxzO1xuXHRcdFx0XHRvYmpbc3RvcmFnZUtleV0gPSBhZDtcblxuXHRcdFx0XHQvLyBGaXJzdCwgc3RvcmUgaW4gbG9jYWxTdG9yYWdlLCB0aGlzIHdpbGwgaGF2ZSB0aGUgZmFzdGVzIGZ1dHVyZSBhY2Nlc3MgcGF0dGVyblxuXHRcdFx0XHRsb2NhbENhY2hlLnNldEl0ZW0oc3RvcmFnZUtleSArICdfJyArIFp5bmdhSW5zdGFudC5wbGF5ZXIuZ2V0SUQoKSwgSlNPTi5zdHJpbmdpZnkoYWQpKTtcblxuXHRcdFx0XHQvLyBUT0RPOiBDaGVjayBpZiB0aGlzLmFjY291bnREZXRhaWxzIGhhcyBjaGFuZ2VkIGFuZCBvbmx5IGRvIHdyaXRlcyBpZiBpdCBoYXNcblx0XHRcdFx0Ly8gUGVyc2lzdCBpdCAoc2hvdWxkIGJlIGNyb3NzIGRldmljZSkgd2l0aCB0aGUgaW5zdGFudCBTREtcblx0XHRcdFx0cmV0dXJuIFp5bmdhSW5zdGFudC5FdmVudC5sYXN0KFp5bmdhSW5zdGFudC5FdmVudHMuSU5TVEFOVF9GQl9UT1NfQUNDRVBUKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gWnluZ2FJbnN0YW50LnBsYXllci5zZXREYXRhQXN5bmMob2JqKSAvLyBUZWxsIHRoZSBTREsgdG8gc2V0IHRoZSBkYXRhXG5cdFx0XHRcdFx0XHQudGhlbihaeW5nYUluc3RhbnQucGxheWVyLmZsdXNoRGF0YUFzeW5jKSAgLy8gQWxzbyBtYWtlIHN1cmUgRkIgYWN0dWFsbHkgcGVyc2lzdHMgaXQgdG8gdGhlIGNsb3VkXG5cdFx0XHRcdFx0XHQudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLkFDQ09VTlRfUEVSU0lTVEVELCB7XG5cdFx0XHRcdFx0XHRcdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRhY2NvdW50X2RhdGE6IGNsb25lT2JqZWN0KGFkKSxcblx0XHRcdFx0XHRcdFx0XHRlcnJvcjogbnVsbFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdFx0RXZlbnQuZmlyZShFdmVudHMuQUNDT1VOVF9QRVJTSVNURUQsIHtcblx0XHRcdFx0XHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XHRhY2NvdW50X2RhdGE6IGNsb25lT2JqZWN0KGFkKSxcblx0XHRcdFx0XHRcdFx0XHRlcnJvcjogZVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pXG5cdFx0XHQudGhlbigoKSA9PiBQcm9taXNlLnJlc29sdmUoKSk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0RGV0YWlscygpOiBVc2VyQWNjb3VudERldGFpbHMge1xuXHRcdHJldHVybiBjbG9uZU9iamVjdCh0aGlzLmFjY291bnREZXRhaWxzKSBhcyBVc2VyQWNjb3VudERldGFpbHM7XG5cdH1cblxufVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiBJbml0IHVzZXIgYWNjb3VudCBmb3Igc29jaWFsIG5ldHdvcmsgKi9cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuUHJvbWlzZS5hbGwoW1xuXHRaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfSU5JVElBTElaRUQpIGFzIFByb21pc2U8dm9pZD4sXG5cdFp5bmdhLkV2ZW50Lmxhc3QoWnluZ2EuRXZlbnRzLkNPTkZJRykgYXMgUHJvbWlzZTxaeW5nYS5aeW5nYUluc3RhbnRDb25maWc+XG5dKS50aGVuKChyZXN1bHRzOiBhbnkpID0+IHtcblx0Y29uc3QgY29uZmlnID0gcmVzdWx0c1sxXSBhcyBaeW5nYS5aeW5nYUluc3RhbnRDb25maWc7XG5cdGxldCBzbkFjY291bnQ6IFNvY2lhbE5ldHdvcmtBY2NvdW50O1xuXHRzd2l0Y2ggKGNvbmZpZy5hdXRoU29jaWFsTmV0d29ya0lEKSB7XG5cdFx0Y2FzZSBTT0NJQUxfTkVUV09SS1MuWllOR0FfQU5PTllNT1VTOlxuXHRcdFx0c25BY2NvdW50ID0gbmV3IFp5bmdhQW5vbk5ldHdvcmtBY2NvdW50KCk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFNPQ0lBTF9ORVRXT1JLUy5GQUNFQk9PS19JTlNUQU5UX0dBTUVTOlxuXHRcdFx0c25BY2NvdW50ID0gbmV3IEZCSUdOZXR3b3JrQWNjb3VudCgpO1xuXHRcdFx0YnJlYWs7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHRocm93IG5ldyBFcnJvcignTm8gXCJhdXRoU29jaWFsTmV0d29ya1wiIHNwZWNpZmllZCBpbiB6eW5nYSBjb25maWcnKTtcblx0fVxuXG5cdC8vIEdldC9DcmVhdGUvUmVuZXcgc29jaWFsIG5ldHdvcmsgYXV0aCBkYXRhXG5cdC8vIE5PVEU6IFdlIG5lZWQgdG8gYmluZCBiYWNrIHRvIHNuQWNjb3VudCBvciB0aGUgY2xhc3MgbG9zZXNcblx0Ly8gICAgICAgaXQncyAndGhpcycgZ2l2ZW4gdGhlc2UgcHJvbWlzZXMgd2lsbCB0YWtlIG9uIHRoZVxuXHQvLyAgICAgICBjdXJyZW50IHNjb3BlLiAgQXQgbGVhc3QgbGVhc3QgdGhhdCdzIGhvdyBJIHVuZGVyc3RhbmQgaXQuXG5cdC8vIFRPRE86IFRlc3Qgd3JhcHBpbmcgdGhpcyBpbiBhIGNsb3N1cmUgYm91bmQgdG8gc25BY2NvdW50LiAgTWF5IGJlIG1vcmUgbWFpbmF0aW5hYmxlLlxuXHRQcm9taXNlLnJlc29sdmUoKVxuXHRcdC50aGVuKHNuQWNjb3VudC5mcm9tQ2FjaGUuYmluZChzbkFjY291bnQpKSAgIC8vIFB1bGwgZXhpc2l0bmcgYWNjb3VudCBpbmZvIGZyb20gY2FjaGUvY2xvdWRcblx0XHQudGhlbihzbkFjY291bnQucmVuZXcuYmluZChzbkFjY291bnQpKSAgICAgICAvLyBSZW5ldyB0b2tlbiBpZiBuZWVkZWQuICBTaWRlLUVmZmVjdDogQ2FuIGNyZWF0ZS9icm9hZGNhc3QgbmV3IGFjY291bnRcblx0XHQudGhlbihzbkFjY291bnQubWlncmF0ZS5iaW5kKHNuQWNjb3VudCkpICAgICAvLyBQZXJmb3JtIGFueSBuZWVkZWQgbWlncmF0aW9uc1xuXHRcdC50aGVuKHNuQWNjb3VudC5icm9hZGNhc3QuYmluZChzbkFjY291bnQpKSAgIC8vIEJyb2FkY2FzdCBvdXQgdGhlIGFjY291bnQgaW5mb3JtYXRpb25cblx0XHQudGhlbihzbkFjY291bnQud3JpdGVDYWNoZS5iaW5kKHNuQWNjb3VudCkpICAvLyBXcml0ZSBhY2NvdW50L3Rva2VuIGRhdGEgYmFjayB0byBjYWNoZS9jbG91ZFxuXHRcdC50aGVuKCgpOiB2b2lkID0+IHtcblx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLkFDQ09VTlRfU05fQUNDT1VOVCwgc25BY2NvdW50KTtcblx0XHR9KTtcbn0pO1xuXG5aeW5nYU5ldC5yZWdpc3RlclJlZnJlc2hUb2tlbkhhbmRsZXIoZnVuY3Rpb24gKG9sZFRva2VuLCBjYWxsYmFjaykge1xuXHR2YXIgbmV3VG9rZW4gPSB0b2tlbk1hcFtvbGRUb2tlbl07XG5cdGlmIChuZXdUb2tlbikge1xuXHRcdGNhbGxiYWNrKG5ld1Rva2VuKTtcblx0fSBlbHNlIHtcblx0XHRpZiAobmV3VG9rZW4gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Ly8gRmlyc3Qgb25lLCBmZXRjaCBhIG5ldyBvbmVcblx0XHRcdHZhciBzbkFjY291bnQgPSBFdmVudC5nZXRMYXN0RmlyZWRWYWx1ZShFdmVudHMuQUNDT1VOVF9TTl9BQ0NPVU5UKSBhcyBTb2NpYWxOZXR3b3JrQWNjb3VudDsgIC8vIEN1cnJlbnQgYWNjb3VudFxuXHRcdFx0aWYgKHNuQWNjb3VudCkge1xuXHRcdFx0XHR0b2tlbk1hcFtvbGRUb2tlbl0gPSBmYWxzZTsgLy8gTWFyayB0aGlzIHRva2VuIGFzIHJlZnJlc2hpbmdcblx0XHRcdFx0RXZlbnQuY2xlYXJMYXN0RmlyZWRWYWx1ZShFdmVudHMuQUNDT1VOVF9ERVRBSUxTKTsgIC8vIGNsZWFyIHRoaXMgc28gb3RoZXIgZG9uJ3QgdXNlIHRoaXMgYmFkIHRva2VuXG5cblx0XHRcdFx0c25BY2NvdW50Lm5vQ3JlYXRlID0gdHJ1ZTtcblx0XHRcdFx0c25BY2NvdW50LnJlbmV3KClcblx0XHRcdFx0XHQudGhlbihzbkFjY291bnQuYnJvYWRjYXN0LmJpbmQoc25BY2NvdW50KSlcblx0XHRcdFx0XHQudGhlbihzbkFjY291bnQud3JpdGVDYWNoZS5iaW5kKHNuQWNjb3VudCkpXG5cdFx0XHRcdFx0LnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRcdFx0c25BY2NvdW50Lm5vQ3JlYXRlID0gZmFsc2U7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBub3QgYWNjb3VudCBkZXRhaWxzPyAgSnVzdCBmYWlsXG5cdFx0XHRcdGNhbGxiYWNrKGZhbHNlKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBXYWl0IGZvciBuZXcgQWNjb3VudCBEZXRhaWxzIGV2ZW50XG5cdFx0RXZlbnQub25jZShFdmVudHMuQUNDT1VOVF9ERVRBSUxTLCBmdW5jdGlvbiAobmV4dEFjY291bnREZXRhaWxzKSB7XG5cdFx0XHR2YXIgdG9rZW4gPSBuZXh0QWNjb3VudERldGFpbHMgJiYgbmV4dEFjY291bnREZXRhaWxzLnRva2VuO1xuXHRcdFx0aWYgKHRva2VuICYmIHRva2VuICE9PSBvbGRUb2tlbiAmJiAhdG9rZW5NYXAuaGFzT3duUHJvcGVydHlbdG9rZW5dKSB7XG5cdFx0XHRcdC8vIFdlIGhhdmUgYSB0b2tlbiwgaXQncyBkaWZmZXJlbnQgYW5kIGl0J3Mgbm90IGEgYmFkIG9uZVxuXHRcdFx0XHRmb3IgKHZhciB0IGluIHRva2VuTWFwKSB7XG5cdFx0XHRcdFx0Ly8gTWFyayB0aGlzIGFzIHRoZSBuZXcgdG9rZW4gZm9yIGFsbCBvbGQgdG9rZW5zLiAgQm90aCByZXBsYWNlZCBhbmQgd2FpdGluZ1xuXHRcdFx0XHRcdGlmICh0b2tlbk1hcC5oYXNPd25Qcm9wZXJ0eSh0KSAmJiB0b2tlbk1hcFt0XSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHR0b2tlbk1hcFt0XSA9IHRva2VuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRjYWxsYmFjayh0b2tlbik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYWxsYmFjayhmYWxzZSk7XG5cdFx0XHR9XG5cdFx0fSwgdHJ1ZSk7XG5cdH1cbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gZGVidWdGdWxsUmVzZXRVc2VyKCkge1xuXHRQcm9taXNlLmFsbChbXG5cdFx0Z2V0U3RvcmFnZUtleUFzeW5jKEFOT05fSU5GT19LRVkpLFxuXHRcdGdldFN0b3JhZ2VLZXlBc3luYyhGQklHX0lORk9fS0VZKSxcblx0XHRnZXRTdG9yYWdlS2V5QXN5bmMoRkJJR19JTkZPX0tFWV9EUkFGVDYpXG5cdF0pLnRoZW4oKGtleXM6IHN0cmluZ1tdKTogdm9pZCA9PiB7XG5cdFx0Y29uc3QgcmVzZXRLZXlzOiBhbnkgPSB7fTtcblx0XHRrZXlzLmZvckVhY2goKGtleSkgPT4gcmVzZXRLZXlzW2tleV0gPSBudWxsKTtcblx0XHRaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfRkJfVE9TX0FDQ0VQVCkudGhlbigoKSA9PiB7XG5cdFx0XHRaeW5nYUluc3RhbnQucGxheWVyLnNldERhdGFBc3luYyhyZXNldEtleXMpXG5cdFx0XHRcdC50aGVuKFp5bmdhSW5zdGFudC5wbGF5ZXIuZmx1c2hEYXRhQXN5bmMpO1xuXHRcdFx0d2luLmxvY2FsU3RvcmFnZS5jbGVhcigpO1xuXHRcdH0pO1xuXHR9KTtcbn1cblxuLy8gd2FpdHMgdG8gc2VuZCB0aGUgcmVxdWVzdCB1bnRpbCB0aGUgdXNlciBpcyBhdXRoZWQuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG5leHBvcnQgZnVuY3Rpb24gdXNlckF1dGhDYWxsPFJlc3BvbnNlQm9keT4obWV0aG9kOiBzdHJpbmcsIHBhdGg6IHN0cmluZywgYXJnczogYW55KTogUHJvbWlzZTxaeW5nYU5ldC5BcGlSZXN1bHQ8UmVzcG9uc2VCb2R5Pj4ge1xuXHRyZXR1cm4gUHJvbWlzZS5hbGwoW1p5bmdhLkV2ZW50Lmxhc3QoWnluZ2EuRXZlbnRzLkFQUF9JRCksIEV2ZW50Lmxhc3QoRXZlbnRzLkFDQ09VTlRfREVUQUlMUyksIFp5bmdhLkV2ZW50Lmxhc3QoWnluZ2EuRXZlbnRzLlVSTF9CQVNFKV0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcblx0XHR2YXIgYXBwSWQgPSByZXN1bHRzWzBdO1xuXHRcdHZhciBhY2NvdW50RGV0YWlscyA9IHJlc3VsdHNbMV0gYXMgVXNlckFjY291bnREZXRhaWxzO1xuXHRcdHZhciBvcHRpb25zOiBaeW5nYU5ldC5BcGlPcHRpb25zID0ge307XG5cdFx0aWYgKFp5bmdhLmdldEFwaVVSTEJhc2UoKS5pbmRleE9mKCdsb2NhbGhvc3QnKSA+IDApIHtcblx0XHRcdHZhciBoZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IHt9O1xuXHRcdFx0aGVhZGVyc1snQXBwLUlkJ10gPSBhcHBJZDtcblx0XHRcdGhlYWRlcnNbJ1BsYXllci1JZCddID0gYWNjb3VudERldGFpbHMucGxheWVySWQ7XG5cdFx0XHRoZWFkZXJzWydaaWQnXSA9IGFjY291bnREZXRhaWxzLnppZDtcblx0XHR9XG5cdFx0bGV0IHF1ZXJ5U3RyaW5nID0gJyc7XG5cdFx0aWYgKGFyZ3MpIHtcblx0XHRcdGlmIChtZXRob2QudG9Mb3dlckNhc2UoKSAhPT0gJ2dldCcpIHtcblx0XHRcdFx0b3B0aW9ucy5ib2R5ID0gYXJncztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIHBhc3Mgb3B0aW9ucyBhcyBxdWVyeSBzdHJpbmcuXG5cdFx0XHRcdGxldCBxdWVyeVBhcmFtcyA9IFtdO1xuXHRcdFx0XHRmb3IgKGxldCBwYXJhbU5hbWUgaW4gYXJncykge1xuXHRcdFx0XHRcdHZhciBwYXJhbVZhbHVlID0gYXJnc1twYXJhbU5hbWVdO1xuXHRcdFx0XHRcdC8vIGVuY29kZSBhbmQgb3B0aW9uYWxseSB0dXJuIGFycmF5cyBpbnRvIGNvbW1hIHNlcGFyYXRlZCBsaXN0XG5cdFx0XHRcdFx0cGFyYW1WYWx1ZSA9IEFycmF5LmlzQXJyYXkocGFyYW1WYWx1ZSkgPyBwYXJhbVZhbHVlLm1hcChlbmNvZGVVUkkpLmpvaW4oJywnKSA6IGVuY29kZVVSSShwYXJhbVZhbHVlKTtcblx0XHRcdFx0XHRxdWVyeVBhcmFtcy5wdXNoKHBhcmFtTmFtZSArICc9JyArIHBhcmFtVmFsdWUpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cXVlcnlTdHJpbmcgPSBxdWVyeVBhcmFtcy5sZW5ndGggPiAwID8gKCc/JyArIHF1ZXJ5UGFyYW1zLmpvaW4oJyYnKSkgOiAnJztcblxuXHRcdFx0fVxuXHRcdH1cblx0XHRvcHRpb25zLnVzZVRva2VuID0gYWNjb3VudERldGFpbHMudG9rZW47XG5cdFx0cmV0dXJuIFp5bmdhTmV0LmFwaTxSZXNwb25zZUJvZHk+KG1ldGhvZCwgWnluZ2EuZ2V0QXBpVVJMQmFzZShwYXRoKSArIHF1ZXJ5U3RyaW5nLCBvcHRpb25zKTtcblx0fSk7XG59XG5cbmV4cG9ydCB2YXIgRXZlbnQgPSBuZXcgWnluZ2FDb3JlLkV2ZW50TWl4aW4oKTtcbmV4cG9ydCB2YXIgRXZlbnRzID0ge1xuXHRBQ0NPVU5UX0NSRUFURTogJ0FjY291bnQuQ3JlYXRlJyxcblx0QUNDT1VOVF9MT0dJTjogJ0FjY291bnQuTG9naW4nLFxuXHRBQ0NPVU5UX0RFVEFJTFM6ICdBY2NvdW50LkRldGFpbHMnLFxuXHRBQ0NPVU5UX01JU01BVENIOiAnQWNjb3VudC5NaXNtYXRjaCcsXG5cdEFDQ09VTlRfUEFTU1dPUkRfRkFJTDogJ0FjY291bnQuUGFzc3dvcmRGYWlsJyxcblx0QUNDT1VOVF9QRVJTSVNURUQ6ICdBY2NvdW50LlBlcnNpc3RlZCcsXG5cdEFDQ09VTlRfTUlHUkFURUQ6ICdBY2NvdW50Lk1pZ3JhdGVkJyxcblx0QUNDT1VOVF9TTl9BQ0NPVU5UOiAnQWNjb3VudC5TTi5BY2NvdW50J1xufTtcblxuZXhwb3J0IHZhciBTT0NJQUxfTkVUV09SS1MgPSB7XG5cdFpZTkdBX0FOT05ZTU9VUzogMjQsXG5cdEZBQ0VCT09LX0lOU1RBTlRfR0FNRVM6IDQyXG59O1xuXG4vKlxuZnVuY3Rpb24gZ2V0Q2FjaGVkQWNjb3VudERhdGEoKSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuXHRcdFp5bmdhSW5zdGFudC5FdmVudC5sYXN0KFp5bmdhSW5zdGFudC5FdmVudHMuSU5TVEFOVF9JTklUSUFMSVpFRCwgZnVuY3Rpb24gKCkge1xuXHRcdFx0Ly8gTmVlZCB0byBiZSBpbml0aWFsaXplZCBmb3IgSW5zdGFudC5wbGF5ZXIuZ2V0SUQoKSBiZWxvd1xuXHRcdFx0Z2V0U3RvcmFnZUtleUFzeW5jKCkudGhlbihmdW5jdGlvbiAoc3RvcmFnZUtleSkge1xuXHRcdFx0XHR2YXIgb2xkQ2FjaGVLZXkgPSBzdG9yYWdlS2V5O1xuXHRcdFx0XHR2YXIgbmV3Q2FjaGVLZXkgPSBzdG9yYWdlS2V5ICsgJ18nICsgWnluZ2FJbnN0YW50LnBsYXllci5nZXRJRCgpO1xuXHRcdFx0XHR2YXIgY2FjaGVWYWx1ZSA9IGxvY2FsQ2FjaGUuZ2V0SXRlbShuZXdDYWNoZUtleSkgfHwgbG9jYWxDYWNoZS5nZXRJdGVtKG9sZENhY2hlS2V5KTtcblx0XHRcdFx0dmFyIGRhdGEgPSBmYWxzZTtcblx0XHRcdFx0aWYgKGNhY2hlVmFsdWUpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0ZGF0YSA9IEpTT04ucGFyc2UoY2FjaGVWYWx1ZSk7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0ZGF0YSA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXNvbHZlKGRhdGEpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH0pO1xufVxuKi9cbi8vIFNldCBhY2NvdW50IGRhdGEuICBJbnRlcm5hbCBmdW5jdGlvbi5cbi8vIGFjY291bnREYXRhOiBvYmplY3QgLSB0aGF0IGNvbnRhaW5zIGFjY291bnQgZGV0YWlscy4gIFNlZSBtaWdyYXRpb24gc2VjdGlvbiBmb3IgZm9ybWF0XG4vLyBoYXNDaGFuZ2VkOiBib29sZWFuIC0gYWNjb3VudERhdGEgaXMga25vd24gdG8gYmUgZGlmZmVyZW50IGZyb20gbGFzdCBmZXRjaFxuLy8gbm9GaXJlOiBib29sZWFuIC0gc2V0IHRvIHN1cnByZXNzIEFDQ09VTlRfREVUQUlMIGV2ZW50IGZpcmluZ1xuXG4vKlxuZnVuY3Rpb24gc2V0VmFsaWRBY2NvdW50RGF0YShhY2NvdW50RGF0YSwgaGFzQ2hhbmdlZCwgbm9GaXJlKSB7XG5cblx0aWYgKG5vRmlyZSAhPT0gdHJ1ZSkge1xuXHRcdEV2ZW50LmZpcmUoRXZlbnRzLkFDQ09VTlRfREVUQUlMUywgY2xvbmVPYmplY3QoYWNjb3VudERhdGEpKTtcblx0fVxuXG5cdGlmIChoYXNDaGFuZ2VkID09PSB0cnVlKSB7XG5cdFx0Ly8gQ3JlYXRlIG9iamVjdCBpbiB0aGUgZm9ybWF0IHNldERhdGFBc3luYyBleHBlY3RzXG5cblx0XHRnZXRTdG9yYWdlS2V5QXN5bmMoKS50aGVuKGZ1bmN0aW9uIChzdG9yYWdlS2V5OiBzdHJpbmcpIHtcblx0XHRcdHZhciBvYmogPSB7fTtcblxuXHRcdFx0b2JqW3N0b3JhZ2VLZXldID0gYWNjb3VudERhdGE7XG5cblx0XHRcdC8vIFBlcnNpc3QgaXQgKHNob3VsZCBiZSBjcm9zcyBkZXZpY2UpIHdpdGggdGhlIGluc3RhbnQgU0RLXG5cdFx0XHRaeW5nYUluc3RhbnQucGxheWVyLnNldERhdGFBc3luYyhvYmopICAgICAgIC8vIFRlbGwgdGhlIFNESyB0byBzZXQgdGhlIGRhdGFcblx0XHRcdFx0LnRoZW4oWnluZ2FJbnN0YW50LnBsYXllci5mbHVzaERhdGFBc3luYykgLy8gQWxzbyBtYWtlIHN1cmUgRkIgYWN0dWFsbHkgcGVyc2lzdHMgaXQgdG8gdGhlIGNsb3VkXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRFdmVudC5maXJlKEV2ZW50cy5BQ0NPVU5UX1BFUlNJU1RFRCwge1xuXHRcdFx0XHRcdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRcdFx0XHRcdGFjY291bnRfZGF0YTogY2xvbmVPYmplY3QoYWNjb3VudERhdGEpLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IG51bGxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0RXZlbnQuZmlyZShFdmVudHMuQUNDT1VOVF9QRVJTSVNURUQsIHtcblx0XHRcdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxuXHRcdFx0XHRcdFx0YWNjb3VudF9kYXRhOiBjbG9uZU9iamVjdChhY2NvdW50RGF0YSksXG5cdFx0XHRcdFx0XHRlcnJvcjogZVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0Ly8gVG8gYmUgc2FmZSwgc3RvcmUgaW4gbG9jYWxTdG9yYWdlIGFzIHdlbGwgaW4gY2FzZSB3ZSBuZWVkIGl0IGZyb20gdGhlcmUgaW4gdGhlIGZ1dHVyZSAjZnV0dXJlcHJvb2Zpbmdcblx0XHRcdGxvY2FsQ2FjaGUuc2V0SXRlbShzdG9yYWdlS2V5ICsgJ18nICsgWnluZ2FJbnN0YW50LnBsYXllci5nZXRJRCgpLCBKU09OLnN0cmluZ2lmeShhY2NvdW50RGF0YSkpO1xuXG5cdFx0fSk7XG5cdH1cbn1cbiovXG5cbi8qXG5mdW5jdGlvbiBwYXNzd29yZEZpeEluamVjdFBvc3NpYmxlQ2hhcnMocGFzc3dvcmRzLCBwb3NpdGlvbiwgY2hhcmFjdGVyKSB7XG5cdHZhciBwYXNzd29yZHNDb3B5O1xuXHR2YXIgaTtcblxuXHRjaGFyYWN0ZXIgPSBjaGFyYWN0ZXIudG9Mb3dlckNhc2UoKTtcblxuXHQvLyBGaXJzdCB0aGUgbG93ZXJjYXNlIGNhc2Vcblx0Zm9yIChpID0gMDsgaSA8IHBhc3N3b3Jkcy5sZW5ndGg7IGkrKykge1xuXHRcdHBhc3N3b3Jkc1tpXVtwb3NpdGlvbl0gPSBjaGFyYWN0ZXI7XG5cdH1cblx0Ly8gTm93IHRoZSB1cHBlciBjYXNlIGNhc2Ugc28gbG9uZyBhcyB0aGUgY2hhcmFjdGVyIGlzIChhLWYpXG5cdGlmIChjaGFyYWN0ZXIgIT09IGNoYXJhY3Rlci50b1VwcGVyQ2FzZSgpKSB7XG5cdFx0Ly8gY29weSB0aGUgd2hvbGUgYXJyYXkgdG8gYXBwbHkgdGhlIHVwcGVyIGNhc2UgY2hhcmFjdGVyIHRvXG5cdFx0cGFzc3dvcmRzQ29weSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocGFzc3dvcmRzKSk7IC8vIEpTT04gc3RyaW5naWZ5L3BhcnNlIHRvIGRvIGEgcmVjdXJzaXZlIGRlZXAgY29weVxuXHRcdGNoYXJhY3RlciA9IGNoYXJhY3Rlci50b1VwcGVyQ2FzZSgpO1xuXHRcdC8vIFJlcGxhY2UgdGhlIGxvd2VyIGNhc2UgY2hhcmFjdGVyIHdpdGggdGhlIG5ldyB1cHBlciBjYXNlIG9uZVxuXHRcdC8vIGZvciBldmVyeSBpdGVtIGluIHRoZSBjb3B5XG5cdFx0Zm9yIChpID0gMDsgaSA8IHBhc3N3b3Jkc0NvcHkubGVuZ3RoOyBpKyspIHtcblx0XHRcdHBhc3N3b3Jkc0NvcHlbaV1bcG9zaXRpb25dID0gY2hhcmFjdGVyO1xuXHRcdH1cblx0XHQvLyBDb21iaW5lIChkb3VibGUgaW4gbGVuZ3RoKSB0aGUgbG93ZXIgYW5kIHVwcGVyIGNhc2UgYXJyYXlzXG5cdFx0cGFzc3dvcmRzID0gcGFzc3dvcmRzLmNvbmNhdChwYXNzd29yZHNDb3B5KTtcblx0fVxuXHRyZXR1cm4gcGFzc3dvcmRzO1xufVxuXG5mdW5jdGlvbiBwYXNzd29yZEZpeEdldFBvc3NpYmxlcyhwYXNzd29yZCkge1xuXHR2YXIgbmV3UGFzc3dvcmRQYXJ0cyA9IFtdO1xuXHR2YXIgbmV3UGFzc3dvcmRzO1xuXHR2YXIgaW5zZXJ0cyA9IFtdO1xuXHR2YXIgY2hhckNvZGU7XG5cdHZhciBpO1xuXHR2YXIgaiA9IDA7XG5cdHZhciBzdGFydFBvcztcblx0dmFyIGhleFN0cjtcblx0Zm9yIChpID0gMDsgaSA8IHBhc3N3b3JkLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2hhckNvZGUgPSBwYXNzd29yZC5jaGFyQ29kZUF0KGkpO1xuXHRcdGlmIChjaGFyQ29kZSA+PSBSQU5EX0NIQVJfU1RBUlQgJiYgY2hhckNvZGUgPD0gUkFORF9DSEFSX0VORCkge1xuXHRcdFx0Ly8gVmFsaWQgY2hhciwganVzdCBhZGQgaXRcblx0XHRcdG5ld1Bhc3N3b3JkUGFydHNbaisrXSA9IHBhc3N3b3JkW2ldO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBJbnZhbGlkIGNoYXIgKG91dCBvZiByYW5nZSkuICBGYWNlYm9vayBtdXN0IGhhdmUgcmVwbGFjZWQgJXh4IHdpdGggdGhpcyBjaGFyLlxuXHRcdFx0Ly8gQWRkIGEgJSBhbmQgdHdvIGVtcHR5IGNoYXJzIHRvIGJlIGZpbGxlZCBpbiBsYXRlclxuXHRcdFx0bmV3UGFzc3dvcmRQYXJ0c1tqKytdID0gJyUnO1xuXHRcdFx0aW5zZXJ0cy5wdXNoKFtqLCBjaGFyQ29kZV0pO1xuXHRcdFx0bmV3UGFzc3dvcmRQYXJ0c1tqKytdID0gJyc7XG5cdFx0XHRuZXdQYXNzd29yZFBhcnRzW2orK10gPSAnJztcblx0XHR9XG5cdH1cblx0Ly8gU3RhcnQgb2ZmIHdpdGggYW4gYXJyYXkgb2Ygb25lXG5cdG5ld1Bhc3N3b3JkcyA9IFtuZXdQYXNzd29yZFBhcnRzXTtcblxuXHRmb3IgKGkgPSAwOyBpIDwgaW5zZXJ0cy5sZW5ndGg7IGkrKykge1xuXHRcdGhleFN0ciA9IGluc2VydHNbaV1bMV0udG9TdHJpbmcoMTYpO1xuXHRcdHN0YXJ0UG9zID0gaW5zZXJ0c1tpXVswXTtcblx0XHRpZiAoaGV4U3RyLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0Ly8gemVybyBwYWQgY2hhcnMgPCAxNlxuXHRcdFx0aGV4U3RyID0gJzAnICsgaGV4U3RyO1xuXHRcdH1cblx0XHQvLyBHZW5lcmF0ZSBhbGwgcG9zc2libGUgY29tYmluYXRpb24gb2YgaGV4IGNoYXJzICh1cHBlciBhbmQgbG93ZXIgY2FzZSkgdGhhdFxuXHRcdC8vIGNvdWxkIGJlIGNvcnJlY3Rcblx0XHRuZXdQYXNzd29yZHMgPSBwYXNzd29yZEZpeEluamVjdFBvc3NpYmxlQ2hhcnMobmV3UGFzc3dvcmRzLCBzdGFydFBvcywgaGV4U3RyWzBdKTtcblx0XHRuZXdQYXNzd29yZHMgPSBwYXNzd29yZEZpeEluamVjdFBvc3NpYmxlQ2hhcnMobmV3UGFzc3dvcmRzLCBzdGFydFBvcyArIDEsIGhleFN0clsxXSk7XG5cdH1cblx0Ly8gQ29udmVydCBmcm9tIGFycmF5cyBvZiBjaGFycyB0byBhbiBhcnJheSBvZiBzdHJpbmdzXG5cdHJldHVybiBuZXdQYXNzd29yZHMubWFwKGZ1bmN0aW9uIChwYXNzd29yZENoYXJzKSB7XG5cdFx0cmV0dXJuIHBhc3N3b3JkQ2hhcnMuam9pbignJyk7XG5cdH0pO1xufVxuXG4vLyBOZXcgXCJpbnN0YWxsXCIuICBDcmVhdGVzIGEgbmV3IGFjY291bnQuXG5mdW5jdGlvbiBjcmVhdGVBY2NvdW50KCkge1xuXHRaeW5nYS5FdmVudC5sYXN0KFp5bmdhLkV2ZW50cy5BUFBfSUQsIGZ1bmN0aW9uIChhcHBJZCkge1xuXHRcdHZhciBwYXNzd29yZCA9IGdlbmVyYXRlUGFzc3dvcmQoKTtcblx0XHRaeW5nYU5ldC5hcGkoJ1BPU1QnLCAnYXV0aC9yZWdpc3RlckRldmljZScsIHtcblx0XHRcdGJvZHk6IHtcblx0XHRcdFx0cGFzc3dvcmQ6IHBhc3N3b3JkLFxuXHRcdFx0XHRhcHBJZDogYXBwSWRcblx0XHRcdH0sXG5cdFx0XHRub0F1dGg6IHRydWVcblx0XHR9KS50aGVuKFxuXHRcdFx0ZnVuY3Rpb24gKHJlc3BvbnNlOiBhbnkpIHtcblx0XHRcdFx0dmFyIGJvZHk6IGFueSA9IHJlc3BvbnNlLmJvZHk7XG5cdFx0XHRcdHZhciB4aHIgPSByZXNwb25zZS54aHI7XG5cdFx0XHRcdGlmICh0eXBlb2YgYm9keSA9PT0gJ29iamVjdCcgJiYgeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG5cdFx0XHRcdFx0Ly8gU2F2ZSBTb2NpYWwgTmV0d29yayBJRCBhbmQgcGFzc293cmQgZm9yIGxhdGVyIGFzIHdlbGxcblx0XHRcdFx0XHRib2R5LnNvY2lhbE5ldHdvcmsgPSBTT0NJQUxfTkVUV09SS1MuWllOR0FfQU5PTllNT1VTO1xuXHRcdFx0XHRcdGJvZHkucGFzc3dvcmQgPSBwYXNzd29yZDtcblxuXHRcdFx0XHRcdC8vIHNldCBuZXcgdmFsaWQgYXV0aCBkYXRhLlxuXHRcdFx0XHRcdHNldFZhbGlkQWNjb3VudERhdGEoYm9keSwgdHJ1ZSwgZmFsc2UpO1xuXG5cdFx0XHRcdFx0Ly8gZmlyZSBhbiBldmVudC4gIFVzZWZ1bCBmb3IgaW5zdGFsbCB0cmFja2luZ1xuXHRcdFx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLkFDQ09VTlRfQ1JFQVRFLCBjbG9uZU9iamVjdChib2R5KSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gVE9ETzogZXJyb3IgZmxvd1xuXHRcdFx0XHRcdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ0FjY291bnQgY3JlYXRlIGZhaWxlZCcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0ZnVuY3Rpb24gKGVycm9yKSB7XG5cdFx0XHRcdC8vIFRPRE86IGVycm9yIGZsb3dcblx0XHRcdFx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcblx0XHRcdFx0Y29uc29sZS5sb2coJ0Vycm9yIGR1cmluZyBhdXRoL3JlZ2lzdGVyRGV2aWNlJywgZXJyb3IpO1xuXHRcdFx0fVxuXHRcdFx0KTtcblx0fSk7XG59XG5cbi8vIElzc3VlIGEgbmV3IHRva2VuL2V4cGlyeS5cbmZ1bmN0aW9uIGlzc3VlVG9rZW4odXNlcklkLCBwYXNzd29yZCwgYXBwSWQpIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0XHRaeW5nYU5ldC5hcGkoJ1BPU1QnLCAnYXV0aC9pc3N1ZVRva2VuJywge1xuXHRcdFx0Ym9keToge1xuXHRcdFx0XHR1c2VySWQ6IHVzZXJJZCxcblx0XHRcdFx0cGFzc3dvcmQ6IHBhc3N3b3JkLFxuXHRcdFx0XHRhcHBJZDogYXBwSWRcblx0XHRcdH0sXG5cdFx0XHRub0F1dGg6IHRydWVcblx0XHR9KS50aGVuKFxuXHRcdFx0ZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0XHRcdHZhciBib2R5ID0gcmVzcG9uc2UuYm9keTtcblx0XHRcdFx0dmFyIHhociA9IHJlc3BvbnNlLnhocjtcblx0XHRcdFx0aWYgKHR5cGVvZiBib2R5ID09PSAnb2JqZWN0JyAmJiB4aHIuc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0XHRyZXNvbHZlKGJvZHkpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhciBlcnJvckNhdCA9IHhoci5nZXRSZXNwb25zZUhlYWRlcignRXJyb3ItQ2F0ZWdvcnknKTtcblx0XHRcdFx0XHR2YXIgZXJyb3JNc2cgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ0Vycm9yLU1lc3NhZ2UnKTtcblx0XHRcdFx0XHR2YXIgZXJyb3JUeXBlID0gJ3Vua25vd24nO1xuXHRcdFx0XHRcdGlmICh4aHIuc3RhdHVzID09PSA1MDAgJiZcblx0XHRcdFx0XHRcdGVycm9yQ2F0ICYmIGVycm9yQ2F0LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSA9PT0gJ2F1dGguZ2VuZXJhbGVycm9yJyAmJlxuXHRcdFx0XHRcdFx0ZXJyb3JNc2cgJiYgZXJyb3JNc2cudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpID09PSAnaW52YWxpZCB1c2VyaWQgb3IgcGFzc3dvcmQnKSB7XG5cdFx0XHRcdFx0XHQvLyBXZSBjYXJlIGFib3V0IHRoaXMgcGFydGljdWxhciA1MDAgZXJyb3Igc28gZ2l2ZSBpdCBhIGtub3duIGVycm9yIHN0cmluZ1xuXHRcdFx0XHRcdFx0ZXJyb3JUeXBlID0gJ2JhZGxvZ2luJztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmVqZWN0KHtcblx0XHRcdFx0XHRcdGVycm9yVHlwZTogZXJyb3JUeXBlLFxuXHRcdFx0XHRcdFx0eGhyOiB4aHIsXG5cdFx0XHRcdFx0XHRib2R5OiBib2R5XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRmdW5jdGlvbiAoZXJyb3IpIHtcblx0XHRcdFx0Ly8gTWFqb3IgWEhSIGVycm9yXG5cdFx0XHRcdHJlamVjdCh7XG5cdFx0XHRcdFx0ZXJyb3I6IGVycm9yXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0KTtcblx0fSk7XG59XG5cbi8vIEFjY291bnQgZGV0YWlscyBjaGFuZ2VkIGFzIHRoZSByZXN1bHQgb2YgaXNzdWluZyBhIG5ldyB0b2tlblxuZnVuY3Rpb24gbmV3QWNjb3VudERldGFpbHMob2xkRGV0YWlsczogb2JqZWN0LCBuZXdaaWQsIG5ld0V4cGlyZXMsIG5ld1Rva2VuOiBzdHJpbmcsIG5ld1Bhc3N3b3JkOiBzdHJpbmcpIHtcblx0dmFyIG5ld0RldGFpbHMgPSBjbG9uZU9iamVjdChvbGREZXRhaWxzKTtcblx0bmV3RGV0YWlscy56aWQgPSBuZXdaaWQ7XG5cdG5ld0RldGFpbHMuZXhwaXJlcyA9IG5ld0V4cGlyZXM7XG5cdG5ld0RldGFpbHMudG9rZW4gPSBuZXdUb2tlbjtcblx0aWYgKG5ld1Bhc3N3b3JkICYmIG5ld1Bhc3N3b3JkLmxlbmd0aCA+IDApIHtcblx0XHRuZXdEZXRhaWxzLnBhc3N3b3JkID0gbmV3UGFzc3dvcmQ7XG5cdH1cblx0RXZlbnQuZmlyZShFdmVudHMuQUNDT1VOVF9MT0dJTiwgY2xvbmVPYmplY3QobmV3RGV0YWlscykpO1xuXHRzZXRWYWxpZEFjY291bnREYXRhKGNsb25lT2JqZWN0KG5ld0RldGFpbHMpLCB0cnVlLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIGdlbklzc3VlVG9rZW5Qcm9taXNlKHVzZXJJZCwgcGFzc3dvcmQsIGFwcElkKSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuXHRcdGlzc3VlVG9rZW4odXNlcklkLCBwYXNzd29yZCwgYXBwSWQpLnRoZW4oZnVuY3Rpb24gKGlzc3VlRGF0YTogYW55KSB7XG5cdFx0XHRpc3N1ZURhdGEucGFzc3dvcmQgPSBwYXNzd29yZDsgLy8gQWRkIHRoZSBnb29kIHBhc3N3b3JkIHRvIHRoZSBwYXlsb2FkXG5cdFx0XHRyZXNvbHZlKGlzc3VlRGF0YSk7XG5cdFx0fSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0Ly8gV2UgZG9uJ3QgY2FyZSBhYm91dCByZWplY3Rpb25zLCBqdXN0IHJlc29sdmUgd2l0aCBmYWxzZSB0byBsZXQgdGhlXG5cdFx0XHQvLyBjYWxsZXIga25vdyB0aGlzIHBhc3N3b3JkIGRpZCBub3Qgd29yayBmb3Igd2hhdGV2ZXIgcmVhc29uXG5cdFx0XHRyZXNvbHZlKGZhbHNlKTtcblx0XHR9KTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIHRyeVJldkVuZ2luZWVyZWRQYXNzb3dyZHModXNlcklkLCBiYWRQYXNzd29yZCwgYXBwSWQpIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdFx0dmFyIHBhc3N3b3JkcyA9IHBhc3N3b3JkRml4R2V0UG9zc2libGVzKGJhZFBhc3N3b3JkKTtcblx0XHR2YXIgaTtcblx0XHR2YXIgaXNzdWVUb2tlblByb21pc2VzID0gW107XG5cdFx0Zm9yIChpID0gMDsgaSA8IHBhc3N3b3Jkcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aXNzdWVUb2tlblByb21pc2VzLnB1c2goZ2VuSXNzdWVUb2tlblByb21pc2UodXNlcklkLCBwYXNzd29yZHNbaV0sIGFwcElkKSk7XG5cdFx0fVxuXG5cdFx0UHJvbWlzZS5hbGwoaXNzdWVUb2tlblByb21pc2VzKS50aGVuKGZ1bmN0aW9uIChhdHRlbXB0cykge1xuXHRcdFx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXNoYWRvd2VkLXZhcmlhYmxlXG5cdFx0XHR2YXIgaTtcblx0XHRcdHZhciByZXN1bHQgPSBmYWxzZTtcblx0XHRcdGZvciAoaSA9IDA7IGkgPCBhdHRlbXB0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAoYXR0ZW1wdHNbaV0pIHtcblx0XHRcdFx0XHRyZXN1bHQgPSBhdHRlbXB0c1tpXTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmVzb2x2ZShyZXN1bHQpO1xuXHRcdH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdC8vIE5vIHJlamVjdGlvbnMganVzdCByZXR1cm4gZmFsc2Vcblx0XHRcdHJlc29sdmUoZmFsc2UpO1xuXHRcdH0pO1xuXHR9KTtcbn1cblxuLy8gTG9naW4gdXNlciBhbmQgZ2V0IG5ldyBzZXNzaW9uIGluZm8uXG4vLyBVc2VkIHdoZW4gdGhlIHVzZXIncyBzZXNzaW9uIGhhcyBleHBpcmVkXG5mdW5jdGlvbiBnZXROZXdUb2tlbihhY2NvdW50RGF0YSkge1xuXHR2YXIgYWNjb3VudERhdGFDb3B5ID0gY2xvbmVPYmplY3QoYWNjb3VudERhdGEpO1xuXHRaeW5nYS5FdmVudC5sYXN0KFp5bmdhLkV2ZW50cy5BUFBfSUQsIGZ1bmN0aW9uIChhcHBJZCkge1xuXHRcdGlzc3VlVG9rZW4oYWNjb3VudERhdGEudXNlcklkLCBhY2NvdW50RGF0YS5wYXNzd29yZCwgYXBwSWQpLnRoZW4oZnVuY3Rpb24gKGlzc3VlRGF0YTogYW55KSB7XG5cdFx0XHQvLyBTdWNjZXNzZnVsbHkgZmV0Y2hlZCBuZXcgdG9rZW5cblx0XHRcdG5ld0FjY291bnREZXRhaWxzKGFjY291bnREYXRhLCBpc3N1ZURhdGEuemlkLCBpc3N1ZURhdGEuZXhwaXJlcywgaXNzdWVEYXRhLnRva2VuLCBhY2NvdW50RGF0YS5wYXNzd29yZCk7XG5cdFx0fSwgZnVuY3Rpb24gKGVycm9yKSB7XG5cdFx0XHR2YXIgYmFkTG9naW5EYXRhID0ge1xuXHRcdFx0XHRhY2NvdW50RGV0YWlsczogYWNjb3VudERhdGFDb3B5LFxuXHRcdFx0XHRyZWNvdmVyU3RhdHVzOiAnZmFpbGVkJyxcblx0XHRcdFx0cmVjb3ZlckZyb21DYWNoZTogJ2RpZF9ub3RfdHJ5Jyxcblx0XHRcdFx0cmVjb3ZlclJldkVuZ2luZWVyOiAnZGlkX25vdF90cnknXG5cdFx0XHR9O1xuXHRcdFx0aWYgKGVycm9yLmVycm9yVHlwZSA9PT0gJ2JhZGxvZ2luJykge1xuXHRcdFx0XHQvLyBXZSBjYW4gYmUgY29uZmlkZW50IHRoYXQgdGhpcyBpcyBiZWNhdXNlIHRoaXMgaXMgQW5kcm9pZCBhbmQgZmFjZWJvb2tcblx0XHRcdFx0Ly8gY29ycnVwdGVkIG91ciBwYXNzd29yZCA6KFxuXHRcdFx0XHQvLyBGaXJzdCBzZWUgaWYgd2UgaGF2ZSBhIGNhY2hlZCB2YWx1ZSB0aGF0IG1pZ2h0IGhhdmUgdGhlIG9yaWdpbmFsIHBhc3Nvd3JkXG5cdFx0XHRcdGdldENhY2hlZEFjY291bnREYXRhKCkudGhlbihmdW5jdGlvbiAoY2FjaGVkRGF0YTogYW55KSB7XG5cdFx0XHRcdFx0aWYgKGNhY2hlZERhdGEgJiZcblx0XHRcdFx0XHRcdGNhY2hlZERhdGEudXNlcklkID09PSBhY2NvdW50RGF0YS51c2VySWQgJiZcblx0XHRcdFx0XHRcdGNhY2hlZERhdGEucGFzc3dvcmQgIT09IGFjY291bnREYXRhLnBhc3N3b3JkKSB7XG5cdFx0XHRcdFx0XHQvLyBHcmVhdCwgd2UgaGF2ZSBjYWNoZWQgZGF0YSBmb3IgdGhlIHNhbWUgYW5vbiB1aWQgYW5kIHRoZSBwYXNzb3dyZCBpcyBkaWZmZXJlbnQuXG5cdFx0XHRcdFx0XHQvLyBMaWtlbHkgdGhlIG9yaWdpbmFsIHBhc3N3b3JkIHNvIHRyeSBpdC5cblx0XHRcdFx0XHRcdGlzc3VlVG9rZW4oY2FjaGVkRGF0YS51c2VySWQsIGNhY2hlZERhdGEucGFzc3dvcmQsIGFwcElkKS50aGVuKGZ1bmN0aW9uIChpc3N1ZURhdGE6IGFueSkge1xuXHRcdFx0XHRcdFx0XHQvLyBTdWNjZXNzZnVsbHkgZmV0Y2hlZCBuZXcgdG9rZW5cblx0XHRcdFx0XHRcdFx0bmV3QWNjb3VudERldGFpbHMoYWNjb3VudERhdGEsIGlzc3VlRGF0YS56aWQsIGlzc3VlRGF0YS5leHBpcmVzLCBpc3N1ZURhdGEudG9rZW4sIGNhY2hlZERhdGEucGFzc3dvcmQpO1xuXHRcdFx0XHRcdFx0XHRiYWRMb2dpbkRhdGEucmVjb3ZlclN0YXR1cyA9ICdzdWNjZXNzJztcblx0XHRcdFx0XHRcdFx0YmFkTG9naW5EYXRhLnJlY292ZXJGcm9tQ2FjaGUgPSAnc3VjY2Vzcyc7XG5cdFx0XHRcdFx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLkFDQ09VTlRfUEFTU1dPUkRfRkFJTCwgYmFkTG9naW5EYXRhKTtcblx0XHRcdFx0XHRcdH0sIGZ1bmN0aW9uIChpc3N1ZVRva2VuZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0Ly8gaXNzdWVUb2tlbiB3aXRoIGNhY2hlZCBwYXNzd29yZCBmYWlsZWRcblx0XHRcdFx0XHRcdFx0YmFkTG9naW5EYXRhLnJlY292ZXJGcm9tQ2FjaGUgPSAnZmFpbGVkJztcblx0XHRcdFx0XHRcdFx0aWYgKGlzc3VlVG9rZW5lcnJvci5lcnJvclR5cGUgPT09ICdiYWRsb2dpbicpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBDYWNoZSBwYXNzd29yZCB3YXMgYmFkIGFzIHdlbGxcblx0XHRcdFx0XHRcdFx0XHQvLyBUcnkgdG8gcmV2ZXJzZSBlbmdpbmVlciB0aGUgRkIgc3RvcmVkIHBhc3N3b3JkIGZpcnN0IGFzIGl0J3MgbW9zdCBsaWtlbHkgdG8gc3VjY2VlZFxuXHRcdFx0XHRcdFx0XHRcdHRyeVJldkVuZ2luZWVyZWRQYXNzb3dyZHMoYWNjb3VudERhdGEudXNlcklkLCBhY2NvdW50RGF0YS5wYXNzd29yZCwgYXBwSWQpLnRoZW4oZnVuY3Rpb24gKGZpeGVkRGF0YTogYW55KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZml4ZWREYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGZpeGVkRGF0YSB3aWxsIGFsc28gY29udGFpbiB0aGUgcmVvdmVyZWQgcGFzc3dvcmRcblx0XHRcdFx0XHRcdFx0XHRcdFx0bmV3QWNjb3VudERldGFpbHMoYWNjb3VudERhdGEsIGFjY291bnREYXRhLnppZCwgZml4ZWREYXRhLmV4cGlyZXMsIGZpeGVkRGF0YS50b2tlbiwgZml4ZWREYXRhLnBhc3N3b3JkKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YmFkTG9naW5EYXRhLnJlY292ZXJTdGF0dXMgPSAnc3VjY2Vzcyc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJhZExvZ2luRGF0YS5yZWNvdmVyUmV2RW5naW5lZXIgPSAnc3VjY2Vzcyc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLkFDQ09VTlRfUEFTU1dPUkRfRkFJTCwgYmFkTG9naW5EYXRhKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIExhc3QgZGl0Y2ggZWZmb3J0LiBNYXliZSB3ZSBjYW4gcmV2IGVuZ2luZWVyIHRoZSBiYWQgY2FjaGVkIHBhc3N3b3JkP1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0cnlSZXZFbmdpbmVlcmVkUGFzc293cmRzKGNhY2hlZERhdGEudXNlcklkLCBjYWNoZWREYXRhLnBhc3N3b3JkLCBhcHBJZCkudGhlbihmdW5jdGlvbiAoY2FjaGVGaXhlZERhdGE6IGFueSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChjYWNoZUZpeGVkRGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZml4ZWREYXRhIHdpbGwgYWxzbyBjb250YWluIHRoZSByZW92ZXJlZCBwYXNzd29yZFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bmV3QWNjb3VudERldGFpbHMoYWNjb3VudERhdGEsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhY2hlRml4ZWREYXRhLnppZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FjaGVGaXhlZERhdGEuZXhwaXJlcyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FjaGVGaXhlZERhdGEudG9rZW4sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhY2hlRml4ZWREYXRhLnBhc3N3b3JkXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YmFkTG9naW5EYXRhLnJlY292ZXJTdGF0dXMgPSAnc3VjY2Vzcyc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRiYWRMb2dpbkRhdGEucmVjb3ZlclJldkVuZ2luZWVyID0gJ3N1Y2Nlc3MnO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YmFkTG9naW5EYXRhLnJlY292ZXJGcm9tQ2FjaGUgPSAnc3VjY2Vzcyc7IC8vIEFsc28gc2V0IHRoaXMgc2luY2UgaXQgd2FzIHRoZSBjYWNoZWQgcGFzc3dvcmQgd2UgcmV2IGVuZyBoZXJlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGYnaXQsIG5vIG90aGVyIG9wdGlvbnNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJhZExvZ2luRGF0YS5yZWNvdmVyUmV2RW5naW5lZXIgPSAnZmFpbGVkJztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0RXZlbnQuZmlyZShFdmVudHMuQUNDT1VOVF9QQVNTV09SRF9GQUlMLCBiYWRMb2dpbkRhdGEpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBTdHJhbmdlIGVycm9yIHdpdGggY2FjaGVkIHRva2VuLFxuXHRcdFx0XHRcdFx0XHRcdC8vIFRyeSByZXYgZW5nIG9mIEZCIHN1cHBsaWVkIHRva2VuXG5cdFx0XHRcdFx0XHRcdFx0dHJ5UmV2RW5naW5lZXJlZFBhc3Nvd3JkcyhhY2NvdW50RGF0YS51c2VySWQsIGFjY291bnREYXRhLnBhc3N3b3JkLCBhcHBJZCkudGhlbihmdW5jdGlvbiAoZml4ZWREYXRhOiBhbnkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChmaXhlZERhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZml4ZWREYXRhIHdpbGwgYWxzbyBjb250YWluIHRoZSByZW92ZXJlZCBwYXNzd29yZFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRuZXdBY2NvdW50RGV0YWlscyhhY2NvdW50RGF0YSwgYWNjb3VudERhdGEuemlkLCBmaXhlZERhdGEuZXhwaXJlcywgZml4ZWREYXRhLnRva2VuLCBmaXhlZERhdGEucGFzc3dvcmQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRiYWRMb2dpbkRhdGEucmVjb3ZlclN0YXR1cyA9ICdzdWNjZXNzJztcblx0XHRcdFx0XHRcdFx0XHRcdFx0YmFkTG9naW5EYXRhLnJlY292ZXJSZXZFbmdpbmVlciA9ICdzdWNjZXNzJztcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLkFDQ09VTlRfUEFTU1dPUkRfRkFJTCwgYmFkTG9naW5EYXRhKTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIE5vIHZhbGlkIGNhY2hlZCBkYXRhLlxuXHRcdFx0XHRcdFx0YmFkTG9naW5EYXRhLnJlY292ZXJGcm9tQ2FjaGUgPSAnbm9jYWNoZSc7XG5cdFx0XHRcdFx0XHR0cnlSZXZFbmdpbmVlcmVkUGFzc293cmRzKGFjY291bnREYXRhLnVzZXJJZCwgYWNjb3VudERhdGEucGFzc3dvcmQsIGFwcElkKS50aGVuKGZ1bmN0aW9uIChmaXhlZERhdGE6IGFueSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoZml4ZWREYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gZml4ZWREYXRhIHdpbGwgYWxzbyBjb250YWluIHRoZSByZW92ZXJlZCBwYXNzd29yZFxuXHRcdFx0XHRcdFx0XHRcdG5ld0FjY291bnREZXRhaWxzKGFjY291bnREYXRhLCBhY2NvdW50RGF0YS56aWQsIGZpeGVkRGF0YS5leHBpcmVzLCBmaXhlZERhdGEudG9rZW4sIGZpeGVkRGF0YS5wYXNzd29yZCk7XG5cdFx0XHRcdFx0XHRcdFx0YmFkTG9naW5EYXRhLnJlY292ZXJTdGF0dXMgPSAnc3VjY2Vzcyc7XG5cdFx0XHRcdFx0XHRcdFx0YmFkTG9naW5EYXRhLnJlY292ZXJSZXZFbmdpbmVlciA9ICdzdWNjZXNzJztcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRiYWRMb2dpbkRhdGEucmVjb3ZlclJldkVuZ2luZWVyID0gJ2ZhaWxlZCc7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0RXZlbnQuZmlyZShFdmVudHMuQUNDT1VOVF9QQVNTV09SRF9GQUlMLCBiYWRMb2dpbkRhdGEpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIHVzZUV4aXN0aW5nU2Vzc2lvbihhbm9uRGF0YSwgaGFzQ2hhbmdlZCkge1xuXHR2YXIgbm93TVMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0dmFyIGV4cGlyZXNNUyA9IGFub25EYXRhLmV4cGlyZXMgKiAxMDAwO1xuXHRpZiAoZXhwaXJlc01TID4gbm93TVMpIHtcblx0XHQvLyBFeGlzdGluZyBzZXNzaW9uIGlzIHN0aWxsIGdvb2Rcblx0XHRzZXRWYWxpZEFjY291bnREYXRhKGFub25EYXRhLCBoYXNDaGFuZ2VkLCBmYWxzZSk7XG5cdFx0Ly8gRmV0Y2ggYSBuZXcgdG9rZW4gMzBzIGJlZm9yZSB0aGlzIG9uZSBleHBpcmVzXG5cdFx0d2luLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0Z2V0TmV3VG9rZW4oYW5vbkRhdGEpO1xuXHRcdH0sIE1hdGgubWF4KGV4cGlyZXNNUyAtIG5vd01TIC0gMzAwMDAsIDApKTtcblx0fSBlbHNlIHtcblx0XHQvLyBFeGlzdGluZyBzZXNzaW9uIGhhcyBleHBpcmVkXG5cdFx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcblx0XHRjb25zb2xlLmxvZygnRXhpc3Rpbmcgc2Vzc2lvbiBleHBpcmVkJywgYW5vbkRhdGEpO1xuXHRcdGdldE5ld1Rva2VuKGFub25EYXRhKTtcblx0fVxufVxuXG4vLyBMb2dpbiBmbG93IGxvZ2ljXG5mdW5jdGlvbiBsb2dpbigpIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0XHRFdmVudC5sYXN0KEV2ZW50cy5BQ0NPVU5UX0RFVEFJTFMsIGZ1bmN0aW9uIChhbm9uQWNjb3VudERldGFpbHMpIHtcblx0XHRcdHJlc29sdmUoYW5vbkFjY291bnREZXRhaWxzKTtcblx0XHR9KTtcblx0XHRnZXRTdG9yYWdlS2V5QXN5bmMoKS50aGVuKGZ1bmN0aW9uIChhbm9uSW5mb0tleTogc3RyaW5nKSB7XG5cdFx0XHRaeW5nYUluc3RhbnQucGxheWVyLmdldERhdGFBc3luYyhbYW5vbkluZm9LZXldKS50aGVuKFxuXHRcdFx0XHRmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRcdHZhciBhbm9uRGF0YSA9IGRhdGEgJiYgZGF0YVthbm9uSW5mb0tleV0gfHwgZmFsc2U7XG5cdFx0XHRcdFx0aWYgKGFub25EYXRhKSB7XG5cdFx0XHRcdFx0XHR1c2VFeGlzdGluZ1Nlc3Npb24oYW5vbkRhdGEsIGZhbHNlKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gTm8gZGF0YSBmcm9tIEZCIGJ1dCB0aGV5IGFyZSB1bnJlbGlhYmxlIDooXG5cdFx0XHRcdFx0XHQvLyBJZiB3ZSBoYXZlIHNvbWV0aGlnbiBjYWNoZWQgdGhlbiB1c2UgdGhhdFxuXHRcdFx0XHRcdFx0Z2V0Q2FjaGVkQWNjb3VudERhdGEoKS50aGVuKGZ1bmN0aW9uIChjYWNoZWREYXRhKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChjYWNoZWREYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBsb2NhbGx5IGNhY2hlZCBhdXRoIGluZm9ybWF0aW9uLlxuXHRcdFx0XHRcdFx0XHRcdHVzZUV4aXN0aW5nU2Vzc2lvbihjYWNoZWREYXRhLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRFdmVudC5maXJlKEV2ZW50cy5BQ0NPVU5UX01JU01BVENILCBjbG9uZU9iamVjdChjYWNoZWREYXRhKSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gRmlzdCB0aW1lIHVzZXIuICBDcmVhdGUgbmV3IGFub24gYWNjb3VudFxuXHRcdFx0XHRcdFx0XHRcdGNyZWF0ZUFjY291bnQoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmdW5jdGlvbiAoZXJyb3IpIHtcblx0XHRcdFx0XHQvLyBFcnJvciBmZXRjaGluZyBpbnN0YW50IGRhdGFcblx0XHRcdFx0XHQvLyBXaGF0IGRvIHdlIGRvIG5vdz9cblx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdH0pO1xuXHR9KTtcbn1cbiovXG4iLCIvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tbWVudC1mb3JtYXRcbi8vLzxhbWQtbW9kdWxlIG5hbWU9XCJaeW5nYUFuYWx5dGljc1wiLz5cbid1c2Ugc3RyaWN0JztcbmltcG9ydCBaeW5nYSA9IHJlcXVpcmUoJy4vWnluZ2EnKTtcbmltcG9ydCBaeW5nYUFjY291bnQgPSByZXF1aXJlKCcuL1p5bmdhQWNjb3VudCcpO1xuaW1wb3J0IFp5bmdhQ29yZSA9IHJlcXVpcmUoJy4vWnluZ2FDb3JlJyk7XG5pbXBvcnQgWnluZ2FJbnN0YW50ID0gcmVxdWlyZSgnLi9aeW5nYUluc3RhbnQnKTtcbmltcG9ydCBaeW5nYU1hdGNoID0gcmVxdWlyZSgnLi9aeW5nYU1hdGNoJyk7XG5pbXBvcnQgWnluZ2FOZXQgPSByZXF1aXJlKCcuL1p5bmdhTmV0Jyk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhY2tPcHRpb25zIHtcblx0bWF4QmF0Y2hEZWxheU1TPzogbnVtYmVyO1xuXHRub0JhdGNoPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFeHBhbmRlZFp5bmdhRW50cnlQb2ludERhdGEge1xuXHRzb3VyY2U6ICd1cGRhdGUnXG5cdHwgJ3NoYXJlJ1xuXHR8ICdib3QnXG5cdHwgJ3hwcm9tbydcblx0fCAndW5rbm93bidcblx0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc291cmNlIGZpZWxkIGZvciBpbnN0YWxsL0RBVSlcblx0c2VuZGVyR2FtZUlkPzogbnVtYmVyOyAgICAgICAgLy8gU2VuZGluZyB6eW5nYSBnYW1lIElELiBDYW4gYmUgZGlmZmVyZW50IGdhbWUgZm9yIHhwcm9tbyBhbmQgYm90XG5cdHNlbmRlclp5bmdhUGxheWVySWQ/OiBudW1iZXI7IC8vIFppZCBvZiBzZW5kaW5nIHVzZXIgZm9yIHNlbmRpbmcgZ2FtZVxuXHRjcmVhdGl2ZT86IHN0cmluZzsgICAgICAgICAgICAvLyBjcmVhdGl2ZSBsb2dnZWQgZm9yIGluc3RhbGxzL0RBVVxuXHRjcmVhdGl2ZVR5cGU/OiBzdHJpbmc7ICAgICAgICAvLyBjYW1wYWlnbiBsb2dnZWQgZm9yIGluc3RhbGxzL0RBVVxuXHRjcmVhdGl2ZUlkPzogc3RyaW5nOyAgICAgICAgICAvLyBhZF9uYW1lIGxvZ2dlZCBmb3IgaW5zdGFsbC9EQVVcblx0aW5zdGFuY2VJZD86IG51bWJlcjsgICAgICAgICAgIC8vIHVzZWQgZm9yIHR1cm4gYmFzZWQgZ2FtZXNcblx0Y2Fyb3VzZWxQb3NpdGlvbj86IG51bWJlcjsgICAgLy8gY2Fyb3VzZWwgcG9zaXRpb24gZm9yIGJvdCBtZXNzYWdlIE9SIHhwcm9tb1xuXHR0aW1lc3RhbXA/OiBudW1iZXI7ICAgICAgICAgICAvLyAoc2Vjb25kcykgdXNlZCB0byBkZW5vdGUgc2VudCB0aW1lIG9yIHNlbmRpbmcgZ2FtZSBzdGFydCB0aW1lXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGFjdFp5bmdhRW50cnlQb2ludERhdGEge1xuXHRzOiAndScgfCAncycgfCAnYicgfCAneCc7IC8vIHNvdXJjZTogdT11cGRhdGVBc3luYywgcz1zaGFyZUFzeW5jLCBiPWJvdCwgeD14cHJvbW8gKHNvdXJjZSBmaWVsZCBmb3IgaW5zdGFsbC9EQVUpXG5cdGc/OiBudW1iZXI7ICAgICAgICAgICAgICAgLy8gc2VuZGVyR2FtZUlkIC0gU2VuZGluZyB6eW5nYSBnYW1lIElELiBDYW4gYmUgZGlmZmVyZW50IGdhbWUgZm9yIHhwcm9tbyBhbmQgYm90XG5cdHA/OiBudW1iZXI7ICAgICAgICAgICAgICAgLy8gc2VuZGVyWnluZ2FQbGF5ZXJJZCAtIFppZCBvZiBzZW5kaW5nIHVzZXIgZm9yIHNlbmRpbmcgZ2FtZVxuXHRjPzogc3RyaW5nOyAgICAgICAgICAgICAgIC8vIGNyZWF0aXZlIC0gY3JlYXRpdmUgbG9nZ2VkIGZvciBpbnN0YWxscy9EQVVcblx0Y3Q/OiBzdHJpbmc7ICAgICAgICAgICAgICAvLyBjcmVhdGl2ZVR5cGUgLSAgY2FtcGFpZ24gbG9nZ2VkIGZvciBpbnN0YWxscy9EQVVcblx0Y2k/OiBzdHJpbmc7ICAgICAgICAgICAgICAvLyBjcmVhdGl2ZUlkIC0gYWRfbmFtZSBsb2dnZWQgZm9yIGluc3RhbGwvREFVXG5cdGk/OiBudW1iZXI7ICAgICAgICAgICAgICAgLy8gaW5zdGFuY2VJZCAtIHVzZWQgZm9yIHR1cm4gYmFzZWQgZ2FtZXNcblx0Y3A/OiBudW1iZXI7ICAgICAgICAgICAgICAvLyBjYXJvdXNlbFBvc2l0aW9uIC0gY2Fyb3VzZWwgcG9zaXRpb24gZm9yIGJvdCBtZXNzYWdlIE9SIHhwcm9tb1xuXHR0PzogbnVtYmVyOyAgICAgICAgICAgICAgIC8vIHRpbWVzdGFtbXAgLSAoc2Vjb25kcykgdXNlZCB0byBkZW5vdGUgc2VudCB0aW1lIG9yIHNlbmRpbmcgZ2FtZSBzdGFydCB0aW1lXG59XG5leHBvcnQgaW50ZXJmYWNlIFp5bmdhRW50cnlQb2ludERhdGEge1xuXHQnX196Jz86IENvbXBhY3RaeW5nYUVudHJ5UG9pbnREYXRhO1xufVxuXG5leHBvcnQgdHlwZSB0cmFja01ldGhvZE5hbWUgPSAnbG9nQ291bnQnIHwgJ2NvdW50JyB8XG5cdCdsb2dJbnN0YWxsJyB8ICdpbnN0YWxsJyB8XG5cdCdsb2dWaXNpdCcgfCAndmlzaXQnIHxcblx0J2xvZ0Fzc29jaWF0ZScgfCAnYXNzb2NpYXRlJyB8XG5cdCdsb2dMYW5ndWFnZScgfCAnbGFuZ3VhZ2UnIHxcblx0J2xvZ0RlbW9ncmFwaGljJyB8ICdkZW1vZ3JhcGhpYycgfFxuXHQnbG9nTXVsdGknIHwgJ211bHRpJ1xuXHQ7XG5cbmludGVyZmFjZSBUcmFja0JhdGNoSXRlbXNUaGVuYWJsZXMge1xuXHRyZXNvbHZlcjogKHZhbHVlPzoge30gfCBQcm9taXNlTGlrZTx7fT4pID0+IHZvaWQ7XG5cdHJlamVjdGVyOiAodmFsdWU/OiB7fSB8IFByb21pc2VMaWtlPHt9PikgPT4gdm9pZDtcbn1cblxuaW50ZXJmYWNlIFRyYWNrQmF0Y2hJdGVtIHtcblx0ZXZlbnROYW1lOiB0cmFja01ldGhvZE5hbWU7XG5cdGJvZHk6IG9iamVjdDtcblx0b3B0aW9uczogVHJhY2tPcHRpb25zO1xuXHRwcm9taXNlSWQ6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIENvbW1vblRyYWNrT3B0aW9ucyB7XG5cdGNsaWVudElkOiBudW1iZXI7XG5cdHByaW1hcnlTTjogbnVtYmVyO1xuXHRwcmltYXJ5WmlkOiBzdHJpbmc7XG5cdHppZDogc3RyaW5nO1xufVxuXG52YXIgd2luOiBhbnkgPSB3aW5kb3c7XG52YXIgY3VycmVudENsaWVudElkO1xudmFyIGxvYWRTdGFydDogbnVtYmVyID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG52YXIgc2Vzc2lvbklkID0gTWF0aC5yb3VuZChsb2FkU3RhcnQgLyAxMDAwKTtcbnZhciBzZXNzaW9uSWRCYXNlMTYgPSAnJztcbnZhciBsYXN0QmFzZTEwQ29udGV4dElkID0gJyc7XG52YXIgbGFzdEJhc2UxNkNvbnRleHRJZCA9ICcnO1xudmFyIGxhc3RCYXNlMTBJbnN0YW5jZUlkID0gJyc7XG52YXIgbGFzdEJhc2UxNkluc3RhbmNlSWQgPSAnJztcbmxldCBnYW1lTnVtYmVyOiBudW1iZXIgPSAwO1xubGV0IGdhbWVOdW1iZXJJbmNyZW1lbnRlZDogYm9vbGVhbiA9IGZhbHNlO1xubGV0IGJhc2UxNkdhbWVOdW1iZXI6IHN0cmluZyA9ICcnO1xudmFyIGdhbWVTY29yZSA9IDA7XG52YXIgdXNlckFnZW50ID0gd2luLm5hdmlnYXRvciAmJiB3aW4ubmF2aWdhdG9yLnVzZXJBZ2VudDtcbnZhciB1YVN0YXRzID0ge1xuXHRvczogJ3RvZG8nLFxuXHRvc1ZlcnNpb246ICd0b2RvJyxcblx0YnJvd3NlcjogJ3RvZG8nLFxuXHRicm93c2VyVmVyc2lvbjogJ3RvZG8nXG59O1xudmFyIGluQXBwID0gJ3Vua25vd24nO1xuY29uc3QgdHJhY2tSZXNvbHZlcnM6IHsgW3M6IHN0cmluZ106IFRyYWNrQmF0Y2hJdGVtc1RoZW5hYmxlczsgfSA9IHt9OyAvLyBJbmRleCBvZiB5ZXQgdG8gcmVzb2x2ZSB0cmFjayBjYWxsc1xuY29uc3QgZW1wdHlGdW5jID0gKCkgPT4gey8qIGludGVudGlvbmFsbHkgZW1wdHkgKi8gfTtcbmNvbnN0IGVtcHR5VHJhY2tCYXRjaEl0ZW1zVGhlbmFibGVzOiBUcmFja0JhdGNoSXRlbXNUaGVuYWJsZXMgPSB7XG5cdHJlc29sdmVyOiBlbXB0eUZ1bmMsXG5cdHJlamVjdGVyOiBlbXB0eUZ1bmNcbn07XG5jb25zdCBpbnRlcm5hbEJhdGNoRGVsYXlNUzogbnVtYmVyID0gMjAwMDsgLy8gSW50ZXJuYWwgbWF4aW11bSB3YWl0IHRpbWUgdG8gbG9nIFRpZXIwL1RpZXIxIHN0YXRzXG5sZXQgY3VycmVudE1heEJhdGNoRGVsYXlNUzogbnVtYmVyID0gMTAwMDsgLy8gTWF4aW11bSBudW1iZXIgb2YgbWlsaXNlY29uZHMgdG8gZGVsYXkgYSBsb2dYWFhYIGJlZm9yZSBzZW5kaW5nIGEgYmF0Y2hcbmxldCBjdXJyZW50TWF4QmF0Y2hTaXplOiBudW1iZXIgPSAxMDA7ICAgICAvLyBNYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byBwbGFjZSBpbiBhIGJhdGNoXG5sZXQgdHJhY2tDYWxsQ291bnQ6IG51bWJlciA9IDA7ICAgICAgICAgICAgLy8gSW5jcmVtZW50ZWQgZWFjaCB0aW1lIGEgdHJhY2sgY2FsbCBoYXBwZW5zXG5sZXQgcGVuZGluZ1RyYWNrczogVHJhY2tCYXRjaEl0ZW1bXSA9IFtdOyAgLy8gTGlzdCBvZiBwZW5kaW5nIHRyYWNrIGNhbGxzXG5sZXQgbmV4dFRyYWNrc1NlbmQ6IG51bWJlciA9IEluZmluaXR5OyAgICAgLy8gVGltZSwgaW4gTVMgdGhlIG5leHQgYmF0Y2ggb2YgdHJhY2sgY2FsbHMgaXMgdG8gYmUgc2VuZFxubGV0IG5leHRUcmFja1NlbmRUaW1lb3V0OiBudW1iZXI7ICAgICAgICAgIC8vIHNldFRpbW91dCBJRCBmb3IgbmV4dCB0cmFjayBzZW5kXG5cbmlmICh1c2VyQWdlbnQubWF0Y2goL0ZCQU5cXC9NZXNzZW5nZXJGb3JpT1N8RkJfSUFCXFwvTUVTU0VOR0VSLykpIHtcblx0aW5BcHAgPSAnbWVzc2VuZ2VyJztcbn0gZWxzZSBpZiAodXNlckFnZW50Lm1hdGNoKC9GQkFOXFwvRkJJT1N8RkJfSUFCXFwvRkI0QS8pKSB7XG5cdGluQXBwID0gJ2ZhY2Vib29rJztcbn1cblxubGV0IGxvZ2dlZERlbW9ncmFwaGljcyA9IGZhbHNlOyAvLyBsb2dnZWQgZGVtb2dyYXBoaWNzIHRoaXMgc2Vzc2lvblxuXG4vKiBUT0RPOiB1c2VyIGFnZW50IHBhcnNpbmcuLi4gY29tcGxpY2F0ZWRcblxuaWYgKHVzZXJBZ2VudC5tYXRjaCgvaVBhZC9pKSB8fCB1c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKSkge1xuXHQvLyBpT1MgZGV2aWNlXG5cbn0gZWxzZSBpZiAodXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpKSB7XG5cdC8vIEFuZHJvaWRcblxufSBlbHNlIHtcblxufVxuKi9cblxudmFyIGF1dG9UcmFja09wdGlvbnMgPSB7fTtcblxudmFyIEFUX0lOU1RBTEwgPSAnaW5zdGFsbCc7XG52YXIgQVRfVklTSVQgPSAndmlzaXQnO1xudmFyIEFUX0xPQ0FMRSA9ICdsb2NhbGUnO1xudmFyIEFUX0RFTU9HUkFQSElDUyA9ICdkZW1vZ3JhcGhpY3MnO1xudmFyIEFUX0xPQURfUEVSRiA9ICdsb2FkUGVyZm9ybWFuY2UnO1xudmFyIEFUX0NPVU5UX1NFU1NJT04gPSAnY291bnRTZXNzaW9uJztcbnZhciBBVF9SRVNPTFVUSU9OID0gJ3Jlc29sdXRpb24nO1xudmFyIEFUX09TID0gJ29zJztcbnZhciBBVF9GQl9QTEFURk9STSA9ICdmYlBsYXRmb3JtJztcbnZhciBBVF9GQl9DT05URVhUID0gJ2ZiQ29udGV4dCc7XG52YXIgQVRfR0FNRV9TVEFSVCA9ICdnYW1lU3RhcnQnO1xudmFyIEFUX0dBTUVfRU5EID0gJ2dhbWVTdGFydCc7XG52YXIgQVRfRkJfSURfQVNTT0MgPSAnZmJQbGF5ZXJJZEFzc29jJztcblxudmFyIGN1cnJlbnRVc2VyWmlkID0gMDtcblxubGV0IGluY29taW5nRGF0YU1hcCA9IHtcblx0cDogJ3NlbmRlclp5bmdhUGxheWVySWQnLFxuXHRnOiAnc2VuZGVyR2FtZUlkJyxcblx0czogJ3NvdXJjZScsXG5cdGM6ICdjcmVhdGl2ZScsXG5cdGN0OiAnY3JlYXRpdmVUeXBlJyxcblx0Y2k6ICdjcmVhdGl2ZUlkJyxcblx0aTogJ2luc3RhbmNlSWQnLFxuXHRjcDogJ2Nhcm91c2VsUG9zaXRpb24nLFxuXHR0OiAndGltZXN0YW1wJ1xufTtcbnZhciBvdXRnb2luZ0RhdGFNYXAgPSB7fTtcbi8vIFBvcHVsYXRlIHJldmVyc2UgbWFwXG5mb3IgKHZhciBtYXBQcm9wZXJ0eSBpbiBpbmNvbWluZ0RhdGFNYXApIHtcblx0b3V0Z29pbmdEYXRhTWFwW2luY29taW5nRGF0YU1hcFttYXBQcm9wZXJ0eV1dID0gbWFwUHJvcGVydHk7XG59XG5cbmZ1bmN0aW9uIGRlYnVnKC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG5cdGxldCBvdXRwdXQgPSBhcmdzLm1hcCgodmFsdWUpID0+IHtcblx0XHRpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0dmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgdW5kZWZpbmVkLCAyKTtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG5cdH0pLmpvaW4oJyAnKTtcblx0RXZlbnQuZmlyZShFdmVudHMuREVCVUcsIHtcblx0XHR0aW1lOiBuZXcgRGF0ZSgpLFxuXHRcdGRhdGE6IG91dHB1dFxuXHR9KTtcbn1cblxuZnVuY3Rpb24gb2JqZWN0Q2xvbmUob2JqKSB7XG5cdHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xufVxuXG4vKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuZnVuY3Rpb24gZGVjMmhleChzdHIpIHsgLy8gLnRvU3RyaW5nKDE2KSBvbmx5IHdvcmtzIHVwIHRvIDJeNTNcblx0dmFyIGRlYyA9IHN0ci50b1N0cmluZygpLnNwbGl0KCcnKSwgc3VtID0gW10sIGhleCA9IFtdLCBpLCBzO1xuXHR3aGlsZSAoZGVjLmxlbmd0aCkge1xuXHRcdHMgPSAxICogZGVjLnNoaWZ0KCk7XG5cdFx0Zm9yIChpID0gMDsgcyB8fCBpIDwgc3VtLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRzICs9IChzdW1baV0gfHwgMCkgKiAxMDtcblx0XHRcdHN1bVtpXSA9IHMgJSAxNjtcblx0XHRcdHMgPSAocyAtIHN1bVtpXSkgLyAxNjtcblx0XHR9XG5cdH1cblx0d2hpbGUgKHN1bS5sZW5ndGgpIHtcblx0XHRoZXgucHVzaChzdW0ucG9wKCkudG9TdHJpbmcoMTYpKTtcblx0fVxuXHRyZXR1cm4gaGV4LmpvaW4oJycpIHx8ICcwJztcbn1cbi8qIHRzbGludDplbmFibGUgKi9cblxuZnVuY3Rpb24gY2FuTWFrZVBJSUNhbGwoKSB7XG5cdHJldHVybiBaeW5nYUluc3RhbnQuRXZlbnQuZ2V0TGFzdEZpcmVkVmFsdWUoWnluZ2FJbnN0YW50LkV2ZW50cy5JTlNUQU5UX0ZCX1RPU19BQ0NFUFQpID09PSB0cnVlO1xufVxuXG5zZXNzaW9uSWRCYXNlMTYgPSBkZWMyaGV4KHNlc3Npb25JZC50b1N0cmluZygpKTtcblxuZnVuY3Rpb24gZ2V0VHJhY2tRdWV1ZUtleUFzeW5jKCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdGNvbnN0IGFwcElkUHJvbWlzZTogUHJvbWlzZTxhbnk+ID0gWnluZ2EuRXZlbnQubGFzdChaeW5nYS5FdmVudHMuQVBQX0lEKTtcblx0Y29uc3QgYWNjb3VudFByb21pc2U6IFByb21pc2U8YW55PiA9IFp5bmdhQWNjb3VudC5FdmVudC5sYXN0KFp5bmdhQWNjb3VudC5FdmVudHMuQUNDT1VOVF9ERVRBSUxTKTtcblx0cmV0dXJuIFByb21pc2UuYWxsKFthcHBJZFByb21pc2UsIGFjY291bnRQcm9taXNlXSkudGhlbigocmVzdWx0cykgPT4ge1xuXHRcdGNvbnN0IGFwcElkID0gcmVzdWx0c1swXTtcblx0XHRjb25zdCB6aWQgPSByZXN1bHRzWzFdLnppZDtcblx0XHRyZXR1cm4gWydfX1RSQUNLX1FVRVVFJywgYXBwSWQsIHppZF0uam9pbignXycpO1xuXHR9KTtcbn1cblxuLy8gS2VlcCBhIHByb21pc2UgYXJvdW5kIHNvIHRoYXQgd2Ugb25seSBldmVyIGhhdmUgb25lIHNhdmUgYXQgYSB0aW1lIHF1ZXVlZCB1cC5cbi8vIEdpdmUgaXQgYSBkZWZhdWx0IHZhbHVlIHNvIHRoYXQgbm8gc2F2ZXMgaGFwcGVuIHVudGlsIHdlIHJlc3RvcmUuXG5sZXQgc2F2ZVF1ZXVlVG9DYWNoZVByb21pc2U6IFByb21pc2U8Ym9vbGVhbj4gPSBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuZnVuY3Rpb24gc2F2ZVRyYWNrUXVldWVUb0NhY2hlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRpZiAoc2F2ZVF1ZXVlVG9DYWNoZVByb21pc2UgPT09IHVuZGVmaW5lZCkge1xuXHRcdHNhdmVRdWV1ZVRvQ2FjaGVQcm9taXNlID0gZ2V0VHJhY2tRdWV1ZUtleUFzeW5jKCkudGhlbigoa2V5OiBzdHJpbmcpID0+IHtcblx0XHRcdHZhciBzYXZlZEVudHJpZXMgPSBmYWxzZTtcblx0XHRcdGRlYnVnKCdQZXJzaXN0aW5nIHRvIGRpc2s6ICcgKyBwZW5kaW5nVHJhY2tzLmxlbmd0aCk7XG5cdFx0XHRpZiAocGVuZGluZ1RyYWNrcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdC8vIElmIHRoaXMgZmFpbHMgZm9yIGFueSByZWFzb24gdGhlIHRoaXMgcHJvbWlzZSB3aWxsIHJlamVjdC5cblx0XHRcdFx0Ly8gVGhhdCBpcyB3aHkgbm8gdHJ5L2NhdGNoIGFyb3VuZCB0aGlzLlxuXHRcdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHBlbmRpbmdUcmFja3MpKTtcblx0XHRcdFx0c2F2ZWRFbnRyaWVzID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIENsZWFuIHVwIGFueSBleGlzdGluZyBrZXlcblx0XHRcdFx0bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcblx0XHRcdH1cblx0XHRcdC8vIHJlbW92ZSBwb2ludGVyIHRvIHNlbGYuICBXZSBhcmUgZG9uZSBub3cuXG5cdFx0XHRzYXZlUXVldWVUb0NhY2hlUHJvbWlzZSA9IHVuZGVmaW5lZDtcblxuXHRcdFx0cmV0dXJuIHNhdmVkRW50cmllcztcblx0XHR9KTtcblx0XHRyZXR1cm4gc2F2ZVF1ZXVlVG9DYWNoZVByb21pc2U7XG5cdH1cblx0Ly8gZm9vXG59XG5mdW5jdGlvbiByZXN0b3JlVHJhY2tRdWV1ZUZyb21DYWNoZSgpOiBQcm9taXNlPG51bWJlcj4ge1xuXHRyZXR1cm4gZ2V0VHJhY2tRdWV1ZUtleUFzeW5jKCkudGhlbigoa2V5OiBzdHJpbmcpID0+IHtcblx0XHRjb25zdCBjYWNoZWRCYXRjaFN0cmluZzogc3RyaW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcblx0XHRsZXQgcmVzdG9yZUNvdW50OiBudW1iZXIgPSAwO1xuXHRcdGlmIChjYWNoZWRCYXRjaFN0cmluZykge1xuXHRcdFx0bGV0IG9sZFRyYWNrSXRlbXMgPSBKU09OLnBhcnNlKGNhY2hlZEJhdGNoU3RyaW5nKTtcblx0XHRcdGlmIChBcnJheS5pc0FycmF5KG9sZFRyYWNrSXRlbXMpICYmIG9sZFRyYWNrSXRlbXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRwZW5kaW5nVHJhY2tzID0gb2xkVHJhY2tJdGVtcy5jb25jYXQocGVuZGluZ1RyYWNrcyk7XG5cdFx0XHRcdHJlc3RvcmVDb3VudCA9IG9sZFRyYWNrSXRlbXMubGVuZ3RoO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gcmVzdG9yZUNvdW50O1xuXHR9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldE1heEJhdGNoRGVsYXlNUyhuZXdNYXhCYXRjaERlbGF5TVM6IG51bWJlcik6IHZvaWQge1xuXHRpZiAobmV3TWF4QmF0Y2hEZWxheU1TID49IDApIHtcblx0XHRjdXJyZW50TWF4QmF0Y2hEZWxheU1TID0gbmV3TWF4QmF0Y2hEZWxheU1TO1xuXHR9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF4QmF0Y2hEZWxheU1TKCk6IG51bWJlciB7XG5cdHJldHVybiBjdXJyZW50TWF4QmF0Y2hEZWxheU1TO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0TWF4QmF0Y2hTaXplKG5ld01heEJhdGNoU2l6ZTogbnVtYmVyKTogdm9pZCB7XG5cdGlmIChuZXdNYXhCYXRjaFNpemUgPj0gMCkge1xuXHRcdGN1cnJlbnRNYXhCYXRjaFNpemUgPSBuZXdNYXhCYXRjaFNpemU7XG5cdH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXhCYXRjaFNpemUoKTogbnVtYmVyIHtcblx0cmV0dXJuIGN1cnJlbnRNYXhCYXRjaFNpemU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmbHVzaFRyYWNrQ2FsbHMoKTogdm9pZCB7XG5cdGNvbnN0IHRyYWNrcyA9IHBlbmRpbmdUcmFja3M7XG5cdGNvbnN0IGJhdGNoYWJsZVRyYWNrQm9kaWVzID0gW107XG5cdGNvbnN0IGJhdGNoYWJsZVRyYWNrc1RoZW5hYmxlczogVHJhY2tCYXRjaEl0ZW1zVGhlbmFibGVzW10gPSBbXTtcblx0Ly8gUmVzZXQgYmF0Y2hpbmdcblx0cGVuZGluZ1RyYWNrcyA9IFtdO1xuXHRuZXh0VHJhY2tzU2VuZCA9IEluZmluaXR5O1xuXHRzYXZlVHJhY2tRdWV1ZVRvQ2FjaGUoKTtcblx0Y2xlYXJUaW1lb3V0KG5leHRUcmFja1NlbmRUaW1lb3V0KTtcblx0ZGVidWcoJ0ZsdXNoaW5nIHRyYWNrIGNhbGxzOicsIHRyYWNrcy5sZW5ndGgpO1xuXHRaeW5nYUFjY291bnQuRXZlbnQubGFzdChaeW5nYUFjY291bnQuRXZlbnRzLkFDQ09VTlRfREVUQUlMUywgZnVuY3Rpb24gKGFub25BY2NvdW50RGV0YWlscykge1xuXHRcdEV2ZW50Lmxhc3QoRXZlbnRzLkNMSUVOVF9JRCwgZnVuY3Rpb24gKGNsaWVudElkKSB7XG5cdFx0XHRsZXQgY29tbW9uQm9keSA9IHtcblx0XHRcdFx0cHJpbWFyeVNOOiBhbm9uQWNjb3VudERldGFpbHMuc29jaWFsTmV0d29yayxcblx0XHRcdFx0cHJpbWFyeVppZDogYW5vbkFjY291bnREZXRhaWxzLnppZCxcblx0XHRcdFx0emlkOiBhbm9uQWNjb3VudERldGFpbHMuemlkLCAvLyBSZXF1aXJlZCBldmVuIHRob3VnaCBpdCdzIG5vdCB1c2VkLiAgRHVtYi5cblx0XHRcdFx0Y2xpZW50SWQ6IGNsaWVudElkXG5cdFx0XHR9O1xuXHRcdFx0bGV0IHRyYWNrVGhlbmFibGVzOiBUcmFja0JhdGNoSXRlbXNUaGVuYWJsZXM7XG5cdFx0XHRsZXQgdHJhY2tCb2R5OiBhbnk7XG5cblx0XHRcdHRyYWNrcy5mb3JFYWNoKCh0cmFja0l0ZW0pID0+IHtcblx0XHRcdFx0dHJhY2tCb2R5ID0gdHJhY2tJdGVtLmJvZHk7XG5cdFx0XHRcdC8vIEdldCBwb2ludGVyIHRvIHJlc29sdmVyIGFuZCByZWplY3RvciBmdW5jdGlvbnMgZnJvbSBvcmlnaW5hbCBwcm9taXNlXG5cdFx0XHRcdHRyYWNrVGhlbmFibGVzID0gdHJhY2tSZXNvbHZlcnNbdHJhY2tJdGVtLnByb21pc2VJZF0gfHwgZW1wdHlUcmFja0JhdGNoSXRlbXNUaGVuYWJsZXM7XG5cdFx0XHRcdGRlbGV0ZSB0cmFja1Jlc29sdmVyc1t0cmFja0l0ZW0ucHJvbWlzZUlkXTtcblxuXHRcdFx0XHRpZiAodHJhY2tJdGVtLmV2ZW50TmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSAnbXVsdGknIHx8IHRyYWNrSXRlbS5vcHRpb25zLm5vQmF0Y2ggPT09IHRydWUpIHtcblx0XHRcdFx0XHQvLyBXZSBhcmUgYSBjYWxsIHRoYXQgaXMgbm90IHRvIGJlIGJhdGNoZWRcblx0XHRcdFx0XHQvLyBTZXQgY29tbW9uIGZpZWxkcyBpZiBub3QgcHJvdmlkZWRcblx0XHRcdFx0XHR0cmFja0JvZHkucHJpbWFyeVNOID0gdHJhY2tCb2R5LnByaW1hcnlTTiB8fCBjb21tb25Cb2R5LnByaW1hcnlTTjtcblx0XHRcdFx0XHR0cmFja0JvZHkucHJpbWFyeVppZCA9IHRyYWNrQm9keS5wcmltYXJ5WmlkIHx8IGNvbW1vbkJvZHkucHJpbWFyeVppZDtcblx0XHRcdFx0XHR0cmFja0JvZHkuemlkID0gdHJhY2tCb2R5LnppZCB8fCBjb21tb25Cb2R5LnppZDtcblx0XHRcdFx0XHR0cmFja0JvZHkuY2xpZW50SWQgPSB0cmFja0JvZHkuY2xpZW50SWQgfHwgY29tbW9uQm9keS5jbGllbnRJZDtcblxuXHRcdFx0XHRcdC8vIE1ha2UgdGhlIG5vbi1iYXRjaGFibGUgdHJhY2sgY2FsbFxuXHRcdFx0XHRcdFp5bmdhTmV0LmFwaSgnUE9TVCcsICd0cmFjay9sb2cnICsgdHJhY2tJdGVtLmV2ZW50TmFtZSwge1xuXHRcdFx0XHRcdFx0Ym9keTogdHJhY2tJdGVtLmJvZHksXG5cdFx0XHRcdFx0XHR1c2VUb2tlbjogYW5vbkFjY291bnREZXRhaWxzLnRva2VuXG5cdFx0XHRcdFx0fSkudGhlbih0cmFja1RoZW5hYmxlcy5yZXNvbHZlciwgdHJhY2tUaGVuYWJsZXMucmVqZWN0ZXIpO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gUmVtb3ZlIHJlZHVuZGFudCB0cmFjayBkYXRhIHRoYXQgaXMgc2V0IGF0IGEgYmF0Y2ggbGV2ZWxcblx0XHRcdFx0XHRpZiAodHJhY2tCb2R5LnByaW1hcnlTTiA9PT0gY29tbW9uQm9keS5wcmltYXJ5U04pIHtcblx0XHRcdFx0XHRcdGRlbGV0ZSB0cmFja0JvZHkucHJpbWFyeVNOO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodHJhY2tCb2R5LnByaW1hcnlaaWQgPT09IGNvbW1vbkJvZHkucHJpbWFyeVppZCkge1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRyYWNrQm9keS5wcmltYXJ5WmlkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodHJhY2tCb2R5LnppZCA9PT0gY29tbW9uQm9keS56aWQpIHtcblx0XHRcdFx0XHRcdGRlbGV0ZSB0cmFja0JvZHkuemlkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodHJhY2tCb2R5LmNsaWVudElkID09PSBjb21tb25Cb2R5LmNsaWVudElkKSB7XG5cdFx0XHRcdFx0XHRkZWxldGUgdHJhY2tCb2R5LmNsaWVudElkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBTZXQgdGhlIGJhdGNoIGl0ZW0gbWV0aG9kXG5cdFx0XHRcdFx0dHJhY2tCb2R5Lnp0cmFja0V2ZW50ID0gdHJhY2tJdGVtLmV2ZW50TmFtZTtcblx0XHRcdFx0XHQvLyBBZGQgdHJhY2tCb2RpZXNcblx0XHRcdFx0XHRiYXRjaGFibGVUcmFja0JvZGllcy5wdXNoKHRyYWNrQm9keSk7XG5cdFx0XHRcdFx0YmF0Y2hhYmxlVHJhY2tzVGhlbmFibGVzLnB1c2godHJhY2tUaGVuYWJsZXMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGlmIChiYXRjaGFibGVUcmFja0JvZGllcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGxldCB0cmFja011bHRpQm9keSA9IG9iamVjdENsb25lKGNvbW1vbkJvZHkpO1xuXHRcdFx0XHR0cmFja011bHRpQm9keS5kYXRhID0gYmF0Y2hhYmxlVHJhY2tCb2RpZXM7XG5cdFx0XHRcdC8vIE1ha2UgdGhlIG5vbi1iYXRjaGFibGUgdHJhY2sgY2FsbFxuXHRcdFx0XHRkZWJ1Zygnc2VuZGluZyBiYXRjaDonLCB0cmFja011bHRpQm9keS5kYXRhLmxlbmd0aCk7XG5cdFx0XHRcdFp5bmdhTmV0LmFwaSgnUE9TVCcsICd0cmFjay9sb2dNdWx0aScsIHtcblx0XHRcdFx0XHRib2R5OiB0cmFja011bHRpQm9keSxcblx0XHRcdFx0XHR1c2VUb2tlbjogYW5vbkFjY291bnREZXRhaWxzLnRva2VuXG5cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHRyYWNrUmVzdWx0czogYW55KSB7XG5cdFx0XHRcdFx0bGV0IHRyYWNrUmVzdWx0c0JvZHkgPSB0cmFja1Jlc3VsdHMuYm9keTtcblx0XHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheSh0cmFja1Jlc3VsdHNCb2R5KSkge1xuXHRcdFx0XHRcdFx0dHJhY2tSZXN1bHRzQm9keS5mb3JFYWNoKCh0cmFja1Jlc3VsdCwgaSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRsZXQgdGhlbmFibGVzID0gYmF0Y2hhYmxlVHJhY2tzVGhlbmFibGVzW2ldIHx8IGVtcHR5VHJhY2tCYXRjaEl0ZW1zVGhlbmFibGVzO1xuXHRcdFx0XHRcdFx0XHQvLyBGYWtlIGEgWnluZ2FOZXQgcmVzdWx0IGFzIGlmIHRoaXMgd2FzIGEgc2luZ2xlIHRyYWNrIGNhbGxcblx0XHRcdFx0XHRcdFx0dGhlbmFibGVzLnJlc29sdmVyKHtcblx0XHRcdFx0XHRcdFx0XHR4aHI6IHRyYWNrUmVzdWx0cy54aHIsXG5cdFx0XHRcdFx0XHRcdFx0Ym9keTogdHJhY2tSZXN1bHRcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIGZ1bmN0aW9uICh0cmFja0Vycm9yOiBhbnkpIHtcblx0XHRcdFx0XHQvLyBSZWplY3QgYWxsIGluIHRoZSBiYXRjaFxuXHRcdFx0XHRcdGJhdGNoYWJsZVRyYWNrc1RoZW5hYmxlcy5mb3JFYWNoKCh0aGVuYWJsZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhlbmFibGUucmVqZWN0ZXIodHJhY2tFcnJvcik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRyYWNrcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdC8vIExldCBwZW9wbGUgd2hvIGNhcmUga25vdyB0aGF0IHRoZSBxdWV1ZSBoYXMgYmVlbiBmbHVzaGVkXG5cdFx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLlFVRVVFX0ZMVVNIRUQsIHRyYWNrcy5sZW5ndGgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYWNrTWlsZXN0b25lKCk6IHN0cmluZyB7XG5cdHZhciBjYW5HZXRDb250ZXh0SWQgPSBjYW5NYWtlUElJQ2FsbCgpO1xuXHR2YXIgY29udGV4dElkID0gY2FuR2V0Q29udGV4dElkICYmXG5cdFx0WnluZ2FJbnN0YW50LmNvbnRleHQgJiZcblx0XHRaeW5nYUluc3RhbnQuY29udGV4dC5nZXRJRCAmJlxuXHRcdFp5bmdhSW5zdGFudC5jb250ZXh0LmdldElEKCkgfHwgJyc7XG5cdHZhciBpbnN0YW5jZUlkID0gWnluZ2FNYXRjaCAmJiBaeW5nYU1hdGNoLmdldEN1cnJlbnRNYXRjaElkICYmIFp5bmdhTWF0Y2guZ2V0Q3VycmVudE1hdGNoSWQoKSB8fCAnJztcblxuXHRpZiAoY29udGV4dElkICE9PSBsYXN0QmFzZTEwQ29udGV4dElkKSB7XG5cdFx0bGFzdEJhc2UxMENvbnRleHRJZCA9IGNvbnRleHRJZDtcblx0XHRsYXN0QmFzZTE2Q29udGV4dElkID0gZGVjMmhleChsYXN0QmFzZTEwQ29udGV4dElkKTtcblx0fVxuXG5cdGlmIChpbnN0YW5jZUlkICE9PSBsYXN0QmFzZTEwSW5zdGFuY2VJZCkge1xuXHRcdGxhc3RCYXNlMTBJbnN0YW5jZUlkID0gaW5zdGFuY2VJZCAmJiBpbnN0YW5jZUlkLnRvU3RyaW5nKCkgfHwgJyc7XG5cdFx0bGFzdEJhc2UxNkluc3RhbmNlSWQgPSBkZWMyaGV4KGxhc3RCYXNlMTBJbnN0YW5jZUlkKTtcblx0fVxuXG5cdHJldHVybiBbc2Vzc2lvbklkQmFzZTE2LCBsYXN0QmFzZTE2Q29udGV4dElkLCBsYXN0QmFzZTE2SW5zdGFuY2VJZCwgYmFzZTE2R2FtZU51bWJlcl0uam9pbignOicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3VzdG9tVHJhY2tMb2dDYWxsKFxuXHRtZXRob2ROYW1lOiB0cmFja01ldGhvZE5hbWUsXG5cdGFyZ3M6IGFueSxcblx0dHJhY2tpbmdPcHRpb25zPzogVHJhY2tPcHRpb25zKTogUHJvbWlzZTxhbnk+IHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG5cdGNvbnN0IG5vd01TOiBudW1iZXIgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0Y29uc3QgY2xpZW50VFM6IG51bWJlciA9IE1hdGguZmxvb3Iobm93TVMgLyAxMDAwKTtcblx0Y29uc3QgcHJvbWlzZUlkOiBzdHJpbmcgPSBub3dNUyArICcuJyArIHRyYWNrQ2FsbENvdW50Kys7XG5cdGNvbnN0IHRyYWNrUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0XHQvLyBTYXZlIGEgcG9pbnRlciB0byB0aGVzZSByZXNvbHZlL3JlamVjdCBmdW5jdGlvbnNcblx0XHR0cmFja1Jlc29sdmVyc1twcm9taXNlSWRdID0ge1xuXHRcdFx0cmVqZWN0ZXI6IHJlamVjdCxcblx0XHRcdHJlc29sdmVyOiByZXNvbHZlXG5cdFx0fTtcblx0fSk7XG5cdGxldCBsYXRlc3RTZW5kVGltZTogbnVtYmVyO1xuXHRsZXQgbWF4RGVsYXk6IG51bWJlciA9IGN1cnJlbnRNYXhCYXRjaERlbGF5TVM7XG5cdC8vIFNvIGxvbmcgYXMgdGhlIGNhbGwgaGFzIG5vdCB1c2VkIGF0dHJpYnV0ZSBvciBtaWxlc3RvbmUgKHNhbWUgdGhpbmcpIHdlIGNhbiB1c2UgaXQgZm9yIHNlc3Npb24gaWRlbnRpZmljYXRpb25cblxuXHRhcmdzID0gb2JqZWN0Q2xvbmUoYXJncykgfHwge307XG5cdHRyYWNraW5nT3B0aW9ucyA9IHRyYWNraW5nT3B0aW9ucyB8fCB7fTtcblxuXHRtZXRob2ROYW1lID0gbWV0aG9kTmFtZS50b0xvd2VyQ2FzZSgpIGFzIHRyYWNrTWV0aG9kTmFtZTtcblx0aWYgKG1ldGhvZE5hbWUuaW5kZXhPZignbG9nJykgPT09IDApIHtcblx0XHRtZXRob2ROYW1lID0gbWV0aG9kTmFtZS5zdWJzdHJpbmcoMykgYXMgdHJhY2tNZXRob2ROYW1lO1xuXHR9XG5cblx0aWYgKHRyYWNraW5nT3B0aW9ucyAmJiB0cmFja2luZ09wdGlvbnMubWF4QmF0Y2hEZWxheU1TID49IDApIHtcblx0XHRtYXhEZWxheSA9IHRyYWNraW5nT3B0aW9ucy5tYXhCYXRjaERlbGF5TVM7XG5cdH1cblx0Ly8gQWRkIGRlZmF1bHQgdmFsdWUgZm9yICdhdHRyaWJ1dGUnIHByb3BlcnR5IGZvciBjb3VudCBjYWxsc1xuXHRpZiAobWV0aG9kTmFtZSA9PT0gJ2NvdW50JyAmJiBhcmdzLmF0dHJpYnV0ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0YXJncy5hdHRyaWJ1dGUgPSBnZXRUcmFja01pbGVzdG9uZSgpO1xuXHR9XG5cblx0Ly8gU2V0IHRoZSBjdXJyZW50IGNsaWVudCB0aW1lIGlmIGl0IGRvZXMgbm90IGFscmVhZHkgZXhpc3RzXG5cdGFyZ3MuY2xpZW50RGV2aWNlVHMgPSBhcmdzLmNsaWVudERldmljZVRzIHx8IGNsaWVudFRTO1xuXG5cdGxhdGVzdFNlbmRUaW1lID0gbm93TVMgKyBtYXhEZWxheTtcblxuXHRwZW5kaW5nVHJhY2tzLnB1c2goe1xuXHRcdGV2ZW50TmFtZTogbWV0aG9kTmFtZSxcblx0XHRib2R5OiBhcmdzLFxuXHRcdG9wdGlvbnM6IHRyYWNraW5nT3B0aW9ucyxcblx0XHRwcm9taXNlSWQ6IHByb21pc2VJZFxuXHR9KTtcblxuXHRkZWJ1ZygnQWRkZWQgdHJhY2sgbWV0aG9kIHRvIHF1ZXVlOiAnLCBtZXRob2ROYW1lLCAnUXVldWUgU2l6ZTogJywgcGVuZGluZ1RyYWNrcy5sZW5ndGgpO1xuXG5cdC8vIFBlcnNpc3QgdGhlIHF1ZXVlIHRvIGRpc2tcblx0c2F2ZVRyYWNrUXVldWVUb0NhY2hlKCk7XG5cblx0aWYgKHBlbmRpbmdUcmFja3MubGVuZ3RoID49IGN1cnJlbnRNYXhCYXRjaFNpemUpIHtcblx0XHQvLyBKdXN0IHNlbmQgbm93LiAgQmF0Y2ggaXMgZnVsbC5cblx0XHRsYXRlc3RTZW5kVGltZSA9IG5vd01TO1xuXHRcdG1heERlbGF5ID0gMDtcblx0fVxuXG5cdGlmIChsYXRlc3RTZW5kVGltZSA8IG5leHRUcmFja3NTZW5kKSB7XG5cdFx0Ly8gQ2xlYXIgdGhlIGN1cnJlbnQgdGltZXIgYW5kIGZpcmUgc29vbmVyXG5cdFx0Y2xlYXJUaW1lb3V0KG5leHRUcmFja1NlbmRUaW1lb3V0KTtcblx0XHRzZXRUaW1lb3V0KGZsdXNoVHJhY2tDYWxscywgbWF4RGVsYXkpO1xuXHRcdG5leHRUcmFja3NTZW5kID0gbGF0ZXN0U2VuZFRpbWU7XG5cdH1cblxuXHRyZXR1cm4gdHJhY2tQcm9taXNlO1xuXHQvLyBUT0RPOiBleGFtaW5nIHRyYWNrT3B0aW9ucyBhbmQgZG8gYmF0Y2hpbmcgYW5kIGxvY2FsU3RvcmFnZSBwZXJzaXN0YW5jZVxufVxuXG4vLyBTZWUgaHR0cHM6Ly9zZXJ2aWNlaHViLnp5bmdhLmNvbS9zZXJ2aWNlcy90cmFjayNhcGlzIGZvciBhcmdzIGRlZmluaXRpb25cbi8vIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aFxuZXhwb3J0IGludGVyZmFjZSBMb2dDb3VudFNjaGVtYSB7XG5cdFNOVWlkPzogbnVtYmVyOyAgICAgICAgICAvLyAoT3B0aW9uYWwpIFRoZSBzb2NpYWwgbmV0d29yayB1c2VyLSBpZCBhc3NvY2lhdGVkIHdpdGggdGhlIHppZCBmb3IgdGhlIGNvcnJlc3BvbmRpbmcgc29jaWFsIG5ldHdvcmsgYXR0YWNoZWQgdG8gdGhlIHJlcXVlc3QgYXV0aGVudGljYXRpb24gb3Igc3BlY2lmaWVkIHdpdGggdGhlIG92ZXJyaWRlU25pZCBwYXJhbWV0ZXIuVmVydGljYSBDb2x1bW46IHVzZXJfdWlkIHwgVHlwZTogaW50Lixcblx0YXR0cmlidXRlPzogc3RyaW5nOyAgICAgIC8vIChPcHRpb25hbCkgVXNlciBkZWZpbmVkIGF0dHJpYnV0ZSBmaWVsZC5WZXJ0aWNhIGNvbHVtbjogbWlsZXN0b25lIHwgVHlwZTogdmFyY2hhcig0NSkuLFxuXHRjbGFzcz86IHN0cmluZzsgICAgICAgICAgLy8gKE9wdGlvbmFsKSBVc2VyLSBkZWZpbmVkIGZpZWxkLlVzZWQgdG8gcmVwcmVzZW50IGhpZXJhcmNoaWNhbCBkYXRhIGFsb25nIHdpdGgga2luZ2RvbSwgcGh5bHVtLCBmYW1pbHkgYW5kIGdlbnVzLkRhdGEgbXVzdCBiZSBmaWxsZWQgdXAgaW4gc2VxdWVuY2UsIHN0YXJ0aW5nIGZyb20ga2luZ2RvbSB0aGVuIHBoeWx1bSBhbmQgc28gb24uVmVydGljYSBjb2x1bW46IGNsYXNzIHwgVHlwZTogdmFyY2hhcig0NSkuLFxuXHRjbGllbnREZXZpY2VUcz86IG51bWJlcjsgLy8gKE9wdGlvbmFsKSBUaW1lc3RhbXAgb2YgdGhlIGNsaWVudCBkZXZpY2UgYXQgd2hpY2ggdGhlIGV2ZW50IHdhcyByZWNvcmRlZCAoVVRDKS5WZXJ0aWNhIGNvbHVtbjogY2xpZW50X2RldmljZV90cyB8IFR5cGU6IHRpbWVzdGFtcC4sXG5cdGNsaWVudElkPzogc3RyaW5nOyAgICAgICAvLyAoUmVxdWlyZWQpIFRoZSBjbGllbnQgaWQgdXNlZCB0byBpZGVudGlmeSB0aGUgY2xpZW50IHR5cGUgdGhlIHJlcXVlc3QgaXMgbWFkZSBmcm9tLkZvciBhIGxpc3Qgb2YgYWxsIHBvc3NpYmxlIGNsaWVudElkJ3MsIHZpc2l0IHRoZSBbU3RhdHMgUG9ydGFsIENsaWVudCBJRCBSZXBvcnRdKGh0dHBzOi8vc3RhdHMuenluZ2EuY29tL2FuYWx5dGljcy8jY3VzdG9tL2xfY2xpZW50Lz9nYW1lX2lkPTgwMDAwMDEwKSBwYWdlLiBWZXJ0aWNhIGNvbHVtbjogY2xpZW50X2lkIHwgVHlwZTogaW50Lixcblx0Y291bnRlcj86IHN0cmluZzsgICAgICAgIC8vIChSZXF1aXJlZCkgVGhlIG5hbWUgb2YgdGhlIGNvdW50ZXIgd2hpY2ggaXMgdXNlZCB0byBpZGVudGlmeSB0aGUgZXZlbnQuVmVydGljYSBjb2x1bW46IGNvdW50ZXIgfCBUeXBlOiB2YXJjaGFyKDQ1KS4sXG5cdGZhbWlseT86IHN0cmluZzsgICAgICAgICAvLyAoT3B0aW9uYWwpIFVzZXItIGRlZmluZWQgZmllbGQuVXNlZCB0byByZXByZXNlbnQgaGllcmFyY2hpY2FsIGRhdGEgYWxvbmcgd2l0aCBraW5nZG9tLCBwaHlsdW0sIGNsYXNzIGFuZCBnZW51cy5EYXRhIG11c3QgYmUgZmlsbGVkIHVwIGluIHNlcXVlbmNlLCBzdGFydGluZyBmcm9tIGtpbmdkb20gdGhlbiBwaHlsdW0gYW5kIHNvIG9uLlZlcnRpY2EgY29sdW1uOiBmYW1pbHkgfCBUeXBlOiB2YXJjaGFyKDQ1KS4sXG5cdGdlbnVzPzogc3RyaW5nOyAgICAgICAgICAvLyAoT3B0aW9uYWwpIFVzZXItIGRlZmluZWQgZmllbGQuVXNlZCB0byByZXByZXNlbnQgaGllcmFyY2hpY2FsIGRhdGEgYWxvbmcgd2l0aCBraW5nZG9tLCBwaHlsdW0sIGNsYXNzIGFuZCBmYW1pbHkuRGF0YSBtdXN0IGJlIGZpbGxlZCB1cCBpbiBzZXF1ZW5jZSwgc3RhcnRpbmcgZnJvbSBraW5nZG9tIHRoZW4gcGh5bHVtIGFuZCBzbyBvbi5WZXJ0aWNhIGNvbHVtbjogZ2VudXMgfCBUeXBlOiB2YXJjaGFyKDEwMjQpLixcblx0a2luZ2RvbT86IHN0cmluZzsgICAgICAgIC8vIChPcHRpb25hbCkgVXNlci0gZGVmaW5lZCBmaWVsZC5Vc2VkIHRvIHJlcHJlc2VudCBoaWVyYXJjaGljYWwgZGF0YSBhbG9uZyB3aXRoIHBoeWx1bSwgY2xhc3MsIGZhbWlseSBhbmQgZ2VudXMuRGF0YSBtdXN0IGJlIGZpbGxlZCB1cCBpbiBzZXF1ZW5jZSwgc3RhcnRpbmcgZnJvbSBraW5nZG9tIHRoZW4gcGh5bHVtIGFuZCBzbyBvbi5WZXJ0aWNhIGNvbHVtbjoga2luZ2RvbSB8IFR5cGU6IHZhcmNoYXIoNDUpLixcblx0bG9nV2l0aFNOVWlkPzogYm9vbGVhbjsgIC8vIChPcHRpb25hbCkgVGhpcyBmbGFnIGRpY3RhdGVzIHdoZXRoZXIgdG8gdXNlIFNOVWlkIG9mIHRoZSBhdXRoZW50aWNhdGVkIHVzZXIgdG8gdHJhY2sgZGF0YSBvciB6aWQuSWYgc2V0IHRvIHRydWUsIFNOVWlkIHdpbGwgYmUgdXNlZC5Ob3RlOiBJZiBhbGxvdyBmb3IgemlkIG92ZXJyaWRlIGZsYWcgaXMgbm90IHNldCBhbmQgdGhpcyBpcyBhIGRyYWZ0IDUgZ2FtZXMgKHNlZSBodHRwOi8vc2VydmljZWh1Yi56eW5nYS5jb20vc2VydmljZXMvdHJhY2sjZHJhZnQ1c3VwcG9ydCksIHRoZW4gU05VaWQgd2lsbCBkZWZhdWx0IHRvIHRoZSB1c2VyLWlkIG9mIHRoZSBhdXRoZW50aWNhdGVkIHNlc3Npb24uIFZlcnRpY2EgQ29sdW1uOiBuL2EgfCBUeXBlOiBuL2EsXG5cdG92ZXJyaWRlQXBwSWQ/OiBzdHJpbmc7ICAvLyAoT3B0aW9uYWwpIEFuIGFwcElkIHRvIG92ZXJyaWRlIHRoZSBhcHAgaWQgZnJvbSB0aGUgYXV0aGVudGljYXRlZCByZXF1ZXN0LlZlcnRpY2EgQ29sdW1uOiBnYW1lX2lkIHwgVHlwZTogaW50LFxuXHRvdmVycmlkZVNuaWQ/OiBzdHJpbmc7ICAgLy8gKE9wdGlvbmFsKSBBIHNvY2lhbCBuZXR3b3JrIGlkIHRvIG92ZXJyaWRlIHRoZSB2YWx1ZSByZXRyaWV2ZWQgZnJvbSB0aGUgYXV0aGVudGljYXRlZCBzZXNzaW9uIHJlcXVlc3QsIGlmIGF2YWlsYWJsZS5JZiB0aGUgZ2FtZV9pZCBpcyBhIGZpcnN0IHBhcnR5IGdhbWUsIHRoZSBjYWxsZXIgY2FuIG92ZXJyaWRlIHRoZSBzb2NpYWwgbmV0d29yayBpZCB1c2luZyB0aGlzIHBhcmFtZXRlci5WZXJ0aWNhIENvbHVtbjogc25faWQgfCBUeXBlOiBpbnQsXG5cdHBoeWx1bT86IHN0cmluZzsgICAgICAgICAvLyAoT3B0aW9uYWwpIFVzZXItIGRlZmluZWQgZmllbGQuVXNlZCB0byByZXByZXNlbnQgaGllcmFyY2hpY2FsIGRhdGEgYWxvbmcgd2l0aCBraW5nZG9tLCBjbGFzcywgZmFtaWx5IGFuZCBnZW51cy5EYXRhIG11c3QgYmUgZmlsbGVkIHVwIGluIHNlcXVlbmNlLCBzdGFydGluZyBmcm9tIGtpbmdkb20gdGhlbiBwaHlsdW0gYW5kIHNvIG9uLlZlcnRpY2EgY29sdW1uOiBwaHlsdW0gfCBUeXBlOiB2YXJjaGFyKDQ1KS4sXG5cdHByaW1hcnlTbj86IG51bWJlcjsgICAgICAvLyAoUmVxdWlyZWQgZm9yIGRyYWZ0NSkgVGhlIFByaW1hcnkgU29jaWFsIE5ldHdvcmsgKFByaW1hcnkgU04pIHBhcnQgb2YgdGhlIFByaW1hcnkgSUQgYXNzaWduZWQgdG8gdGhlIHVzZXIncyBjdXJyZW50IGRldmljZS4gVGhpcyBpcyByZXF1aXJlZCBmb3IgYW55IGRyYWZ0IDUgZ2FtZXMuIFZlcnRpY2EgY29sdW1uOiB0aGUgcHJpbWFyeV9zbiBjb2x1bW4uIFZlcnRpY2EgY29sdW1uOiBwcmltYXJ5X3NuIHwgVHlwZTogaW50Lixcblx0cHJpbWFyeVppZD86IG51bWJlcjsgICAgIC8vIChSZXF1aXJlZCBmb3IgZHJhZnQ1KSBUaGUgcHJpbWFyeSB6eW5nYSBJRCBwYXJ0IG9mIHRoZSBwcmltYXJ5IElEIGFzc2lnbmVkIHRvIHRoZSB1c2VyJ3MgY3VycmVudCBkZXZpY2UuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIGRyYWZ0IDUgZ2FtZXMuIFZlcnRpY2EgQ29sdW1uOiBwcmltYXJ5X3ppZCB8IFR5cGU6IGludC4sXG5cdHNhbXBsZUJ5VXNlcj86IGJvb2xlYW47ICAvLyAoT3B0aW9uYWwpIEZsYWcgdG8gcmVxdWVzdCBzYW1wbGluZyBiYXNlZCBvbiB1c2VyLCBpbnN0ZWFkIG9mIHVzaW5nIGEgcmFuZG9tIGludGVnZXIuU2V0IHRoaXMgdG8gZmFsc2UgaWYgdGhlIGNhbGwgaXMgbWFkZSBmcm9tIGEgc2VydmljZSAvIG5vbiAtIHVzZXIuVmVydGljYSBjb2x1bW46IG4gLyBhIHwgVHlwZTogbiAvIGEuLFxuXHRzYW1wbGVSYXRlPzogbnVtYmVyOyAgICAgLy8gKE9wdGlvbmFsKSBSYXRlIHRvIHNhbXBsZS4gKFJhbmdlOiAwLjAwIHRvIDEuMDApIEV4YW1wbGU6IEZvciAxMCUgc2FtcGxpbmcoaS5lLm9ubHkgMTAlIGRhdGEgdG8gYmUgcmVjb3JkZWQgaW4gdGhlIGRiKSwgc3BlY2lmeSBzYW1wbGVSYXRlID0gMC4xLldBUk5JTkc6IHNhbXBsZSByYXRlIGlzIGludmVydGVkIHRvIGFuIGludGVnZXIgYmVmb3JlIGl0J3MgdXNlZC4gIGlmIGFzc2VydChpc19pbnQoMS9zYW1wbGVSYXRlKSkgaXMgbm90IHRydWUsIHlvdXIgdmFsdWUgd2lsbCBiZSBtb2RpZmllZC4gIElmIDAgaXMgcGFzc2VkIGluIGZvciBzYW1wbGVSYXRlLCBzYW1wbGluZyB3aWxsIG5vdCBiZSBhcHBsaWVkIGFuZCB0aGUgYmVoYXZpb3Igd2lsbCBtYXRjaCB0aGF0IG9mIGEgc2FtcGxlUmF0ZSBvZiAxLiAgWnRyYWNrIHdhcyBidWlsdCB3aXRoIHNhbXBsaW5nIGluIHRlcm1zIG9mIFwib25lIG91dCBvZiBOXCIgaGl0cyBhcmUgbG9nZ2VkIGFuZCB0aGlzIGNhbGwgd2FzIGltcGxlbWVudGVkIHdpdGggYSBmbG9hdCB0aGF0IGlzIGNvbnZlcnRlZCBpbnRvIHRoZSB6dHJhY2sgZm9ybWF0IG9mIG9uZSBvdXQgb2YgTi4gIFRoZSBlZmZlY3RpdmUgc2FtcGxlIHJhdGUgd2lsbCBhbHdheXMgYmUgMS9yb3VuZCgxL3NhbXBsZVJhdGUpLiAgRm9yIGV4YW1wbGUsIDAuNjIgd2lsbCBzYW1wbGUgYXQgYSByYXRlIG9mIDAuNSBiZWNhdXNlIHJvdW5kKDEvMC42MikgPSAyIGFuZCAyIGlzIHRoZSB2YWx1ZSB0aGF0IGlzIGFjdHVhbGx5IHBhc3NlZCBpbnRvIHp0cmFjay4gVmVydGljYSBjb2x1bW46IHNhbXBsZV9yYXRlIHwgVHlwZTogaW50Lixcblx0dmFsdWU/OiBudW1iZXI7ICAgICAgICAgIC8vIChPcHRpb25hbCkgVGhlIHZhbHVlIG9mIHRoZSBjb3VudGVyLlZlcnRpY2EgY29sdW1uOiB2YWx1ZSB8IFR5cGU6IGludC4sXG5cdHppZD86IG51bWJlcjsgICAgICAgICAgICAvLyAoUmVxdWlyZWQpIFRoaXMgaXMgdGhlIFpJRCAoWnluZ2EgSUQpIG9mIHRoZSBhdXRoZW50aWNhdGVkIHVzZXIuV2l0aCB1c2VyIHNlc3Npb24gYXV0aGVudGljYXRpb24gdHlwZSwgdGhlIHVzZXItIGlkIGlzIHJldHJpZXZlZCBmcm9tIHRoZSBzZXNzaW9uIGFuZCB0aGlzIHBhcmFtZXRlciBpcyBpZ25vcmVkIHVubGVzcyB0aGUgYXBwLSBpZCBpcyBjb25maWd1cmVkIHRvIGFsbG93IHRyYWNraW5nIHdpdGggYW55IHppZCAodGhpcyBjb25maWd1cmF0aW9uIGlzIG5lZWRlZCBmb3IgZHJhZnQ1IGVuYWJsZWQgZ2FtZXMsIHNlZSBodHRwOi8vc2VydmljZWh1Yi56eW5nYS5jb20vc2VydmljZXMvdHJhY2sjZHJhZnQ1c3VwcG9ydCkuIFRoaXMgcGFyYW1ldGVyIHdpbGwgYmUgaWdub3JlZCAoaG93ZXZlciwgc3RpbGwgcmVxdWlyZWQpIGlmIHRoZSBhdXRoIHR5cGUgaXMgdXNlciBPUiB3aGVuICdTTlVpZCcgcGFyYW1ldGVyIGlzIHByb3ZpZGVkIGFuZCAnbG9nV2l0aFNOVWlkJyBpcyB0cnVlLiBWZXJ0aWNhIENvbHVtbjogdXNlcl91aWQgfCBUeXBlOiBpbnQuXG59XG4vLyB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aFxuXG4vKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2dDb3VudChhcmdzOiBMb2dDb3VudFNjaGVtYSwgdHJhY2tpbmdPcHRpb25zPzogVHJhY2tPcHRpb25zKSB7IHJldHVybiBjdXN0b21UcmFja0xvZ0NhbGwoJ2NvdW50JywgYXJncywgdHJhY2tpbmdPcHRpb25zKTsgfVxuZXhwb3J0IGZ1bmN0aW9uIGxvZ0luc3RhbGwoYXJncywgdHJhY2tpbmdPcHRpb25zPzogVHJhY2tPcHRpb25zKSB7IHJldHVybiBjdXN0b21UcmFja0xvZ0NhbGwoJ2luc3RhbGwnLCBhcmdzLCB0cmFja2luZ09wdGlvbnMpOyB9XG5leHBvcnQgZnVuY3Rpb24gbG9nVmlzaXQoYXJncywgdHJhY2tpbmdPcHRpb25zPzogVHJhY2tPcHRpb25zKSB7IHJldHVybiBjdXN0b21UcmFja0xvZ0NhbGwoJ3Zpc2l0JywgYXJncywgdHJhY2tpbmdPcHRpb25zKTsgfVxuZXhwb3J0IGZ1bmN0aW9uIGxvZ0Fzc29jaWF0ZShhcmdzLCB0cmFja2luZ09wdGlvbnM/OiBUcmFja09wdGlvbnMpIHsgcmV0dXJuIGN1c3RvbVRyYWNrTG9nQ2FsbCgnYXNzb2NpYXRlJywgYXJncywgdHJhY2tpbmdPcHRpb25zKTsgfVxuZXhwb3J0IGZ1bmN0aW9uIGxvZ0xhbmd1YWdlKGFyZ3MsIHRyYWNraW5nT3B0aW9ucz86IFRyYWNrT3B0aW9ucykgeyByZXR1cm4gY3VzdG9tVHJhY2tMb2dDYWxsKCdsYW5ndWFnZScsIGFyZ3MsIHRyYWNraW5nT3B0aW9ucyk7IH1cbmV4cG9ydCBmdW5jdGlvbiBsb2dEZW1vZ3JhcGhpYyhhcmdzLCB0cmFja2luZ09wdGlvbnM/OiBUcmFja09wdGlvbnMpIHsgcmV0dXJuIGN1c3RvbVRyYWNrTG9nQ2FsbCgnZGVtb2dyYXBoaWMnLCBhcmdzLCB0cmFja2luZ09wdGlvbnMpOyB9XG5leHBvcnQgZnVuY3Rpb24gbG9nR2FtZVN0YXJ0KGFyZ3M6IExvZ0NvdW50U2NoZW1hLCB0cmFja2luZ09wdGlvbnM/OiBUcmFja09wdGlvbnMpIHtcblx0aWYgKGJhc2UxNkdhbWVOdW1iZXIpIHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoJ1lvdSBtdXN0IGNhbGwgbG9nR2FtZUNvbXBsZXRlIGJlZm9yZSBjYWxsaW5nIGxvZ0dhbWVTdGFydCBhZ2Fpbi4nKTtcblx0fVxuXHRiYXNlMTZHYW1lTnVtYmVyID0gZGVjMmhleCgrK2dhbWVOdW1iZXIpO1xuXHRhcmdzID0gYXJncyB8fCB7fTtcblx0YXJncy5jb3VudGVyID0gJ2dhbWVfc3RhcnQnO1xuXHRyZXR1cm4gY3VzdG9tVHJhY2tMb2dDYWxsKCdjb3VudCcsIGFyZ3MsIHRyYWNraW5nT3B0aW9ucyk7XG59XG5leHBvcnQgZnVuY3Rpb24gbG9nR2FtZUNvbXBsZXRlKGFyZ3M6IExvZ0NvdW50U2NoZW1hLCB0cmFja2luZ09wdGlvbnM/OiBUcmFja09wdGlvbnMpIHtcblx0YXJncyA9IGFyZ3MgfHwge307XG5cdGFyZ3MuY291bnRlciA9ICdnYW1lX2NvbXBsZXRlJztcblx0bGV0IHRyYWNrUHJvbWlzZSA9IGN1c3RvbVRyYWNrTG9nQ2FsbCgnY291bnQnLCBhcmdzLCB0cmFja2luZ09wdGlvbnMpO1xuXHRiYXNlMTZHYW1lTnVtYmVyID0gJyc7IC8vIExvZyBhcyAnJyB3aGVuIGJldHdlZW4gYWN0aXZlIGdhbWUgcGxheXNcblx0cmV0dXJuIHRyYWNrUHJvbWlzZTtcbn1cbi8qIHRzaGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG5leHBvcnQgdmFyIEV2ZW50ID0gbmV3IFp5bmdhQ29yZS5FdmVudE1peGluKCk7XG5leHBvcnQgdmFyIEV2ZW50cyA9IHtcblx0Q0xJRU5UX0lEOiAnQW5hbHl0aWNzLmNsaWVudElkJyxcblx0UVVFVUVfRkxVU0hFRDogJ0FuYWx5dGljcy5xdWV1ZUZsdXNoZWQnLFxuXHRERUJVRzogJ0FuYWx5dGljcy5kZWJ1Zydcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXNzaW9uSWQoKSB7IHJldHVybiBzZXNzaW9uSWQ7IH1cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50R2FtZU51bWJlcigpOiBudW1iZXIgfCBudWxsIHtcblx0cmV0dXJuIGJhc2UxNkdhbWVOdW1iZXIgPT09ICcnID8gbnVsbCA6IGdhbWVOdW1iZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFzdEdhbWVOdW1iZXIoKTogbnVtYmVyIHwgbnVsbCB7XG5cdHJldHVybiBnYW1lTnVtYmVyIHx8IG51bGw7XG59XG5cbmV4cG9ydCB2YXIgQ0xJRU5UX0lEUyA9IHtcblx0V0VCX1VOS05PV046ICc0MzMnLFxuXHRXRUJfRkFDRUJPT0s6ICc0MjcnLFxuXHRXRUJfTUVTU0VOR0VSOiAnNDI4Jyxcblx0SU9TX1VOS05PV046ICc0MzQnLFxuXHRJT1NfRkFDRUJPT0s6ICc0MjknLFxuXHRJT1NfTUVTU0VOR0VSOiAnNDMwJyxcblx0QU5EUk9JRF9VTktOT1dOOiAnNDM1Jyxcblx0QU5EUk9JRF9GQUNFQk9PSzogJzQzMScsXG5cdEFORFJPSURfTUVTU0VOR0VSOiAnNDMyJ1xufTtcblxuZnVuY3Rpb24gY2hlY2tDbGllbnRJZCgpIHtcblx0dmFyIHBsYXRmb3JtOiBzdHJpbmcgPSBaeW5nYUluc3RhbnQuZ2V0UGxhdGZvcm0oKTtcblx0dmFyIGFwcCA9IGluQXBwOyAvLyBkZXJyaXZlIGZyb20gRkIgSW5zdGFudCBTREsgaWYvd2hlbiBhdmFpbGFibGUuICBGb3Igbm93IHdlIGxvb2sgYXQgdXNlcmFnZW50IHN0cmluZ1xuXHR2YXIgbmV3Q2xpZW50SWQ7XG5cblx0bmV3Q2xpZW50SWQgPSBDTElFTlRfSURTWyhwbGF0Zm9ybSArICdfJyArIGFwcCkudG9VcHBlckNhc2UoKV07XG5cdGlmIChuZXdDbGllbnRJZCAmJiBuZXdDbGllbnRJZCAhPT0gY3VycmVudENsaWVudElkKSB7XG5cdFx0Y3VycmVudENsaWVudElkID0gbmV3Q2xpZW50SWQ7XG5cdFx0RXZlbnQuZmlyZShFdmVudHMuQ0xJRU5UX0lELCBjdXJyZW50Q2xpZW50SWQpO1xuXHR9XG5cbn1cblxuY2hlY2tDbGllbnRJZCgpO1xuXG5mdW5jdGlvbiBhdXRvTG9nQ291bnQocHJlZiwgYXJnczogTG9nQ291bnRTY2hlbWEpIHtcblx0aWYgKGF1dG9UcmFja09wdGlvbnNbcHJlZl0gPT09IHRydWUpIHtcblx0XHRsb2dDb3VudChhcmdzLCB7IG1heEJhdGNoRGVsYXlNUzogaW50ZXJuYWxCYXRjaERlbGF5TVMgfSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2VuQ3JlYXRpdmVJZCh6aWQpIHtcblx0dmFyIG5vd01TID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdHJldHVybiBkZWMyaGV4KHppZCkgKyAnOicgKyBkZWMyaGV4KG5vd01TKTtcbn1cblxuZnVuY3Rpb24gbWFwRmllbGRzKGRhdGEsIG1hcCkge1xuXHR2YXIgbmV3T2JqID0ge307XG5cdGZvciAodmFyIGsgaW4gZGF0YSkge1xuXHRcdGlmIChtYXAuaGFzT3duUHJvcGVydHkoaykpIHtcblx0XHRcdG5ld09ialttYXBba11dID0gZGF0YVtrXTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG5ld09iajtcbn1cblxuZnVuY3Rpb24gZ2VuVXBkYXRlT3JTaGFyZUhvb2soc291cmNlKSB7XG5cdC8vIEFwcGxpZXMgY29tbW9uIGRhdGEgdG9yIHRoZSB1cGRhdGUvc2hhcmUgYXN5bmMgYXJndW1lbnRzXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVPclNoYXJlSG9vayhhcmcpIHtcblx0XHR2YXIgbmV3VmFsID0gYXJnO1xuXHRcdHZhciB6eW5nYTogRXhwYW5kZWRaeW5nYUVudHJ5UG9pbnREYXRhO1xuXHRcdHZhciB6aWQgPSBjdXJyZW50VXNlclppZCB8fCAwO1xuXHRcdC8vIEdldCBpbnN0YW5jZSBJRC5cblx0XHQvLyBGaXJzdCB0cnkgdGhlIGN1cnJlbnQgb25lLiAgRm9yIHdoZW4gdGhpcyBpcyBjYWxsZWQgYmVmb3JlIE1hdGNoLmVuZFR1cm5Bc3luY1xuXHRcdC8vIE5leHQgdHJ5IHRoZSBwcmV2aW91cyBvbmUuICBGb3Igd2hlbiB0aGlzIGlzIGNhbGxlZCBhZnRlciBNYXRjaC5lbmRUdXJuQXN5bmNcblx0XHR2YXIgaW5zdGFuY2VJZCA9IChaeW5nYU1hdGNoICYmIChaeW5nYU1hdGNoLmdldEN1cnJlbnRNYXRjaElkKCkgfHwgWnluZ2FNYXRjaC5nZXRQcmV2aW91c01hdGNoSWQoKSkpIHx8IGZhbHNlO1xuXG5cdFx0bGV0IHNvdXJjZU5hbWUgPSAndW5rbm93bic7XG5cdFx0aWYgKHNvdXJjZSA9PT0gJ3UnKSB7XG5cdFx0XHRzb3VyY2VOYW1lID0gJ3VwZGF0ZSc7XG5cdFx0fSBlbHNlIGlmIChzb3VyY2UgPT09ICdzJykge1xuXHRcdFx0c291cmNlTmFtZSA9ICdzaGFyZSc7XG5cdFx0fVxuXG5cdFx0aWYgKGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0Jykge1xuXHRcdFx0bmV3VmFsID0gb2JqZWN0Q2xvbmUoYXJnKTsgLy8gV2Ugd2FudCBvdXIgb3duIGNvcHlcblx0XHRcdG5ld1ZhbC5kYXRhID0gbmV3VmFsLmRhdGEgfHwge307XG5cdFx0XHR6eW5nYSA9IG5ld1ZhbC5kYXRhLnp5bmdhIHx8IHt9O1xuXG5cdFx0XHR6eW5nYS5zb3VyY2UgPSBzb3VyY2U7IC8vIE5vdGUgdGhpcyBpcyB0aGUgc2hvcnQgaGFuZCB2YWx1ZVxuXG5cdFx0XHQvLyBSZW1vdmUgdGhlIHp5bmdhIG9iamVjdCBwcm9wZXJ0eSBub3cgdGhhdCB3ZSBoYXZlIGEgcmVmZXJlbmNlIHRvIGl0LlxuXHRcdFx0Ly8gV2lsbCBiZSByZXBsYWNlIHdpdGggYW4gJ19feicgcHJvcGVyeSBhbmQgb2JqZWN0XG5cdFx0XHRkZWxldGUgbmV3VmFsLmRhdGEuenluZ2E7XG5cblx0XHRcdGlmICh6aWQpIHtcblx0XHRcdFx0enluZ2Euc2VuZGVyWnluZ2FQbGF5ZXJJZCA9IHp5bmdhLnNlbmRlclp5bmdhUGxheWVySWQgfHwgemlkO1xuXHRcdFx0fVxuXHRcdFx0enluZ2EuY3JlYXRpdmVJZCA9IHp5bmdhLmNyZWF0aXZlSWQgfHwgZ2VuQ3JlYXRpdmVJZCh6aWQpO1xuXHRcdFx0aWYgKGluc3RhbmNlSWQgIT09IGZhbHNlKSB7XG5cdFx0XHRcdHp5bmdhLmluc3RhbmNlSWQgPSArenluZ2EuaW5zdGFuY2VJZCB8fCAraW5zdGFuY2VJZDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVE9ETzogRmluZCBvdXQgZnJvbSBGQiBob3cgbWFueSBjbGllbnRzIHN0aWxsIGV4cGVjdCBCT1QgZGF0YSBvbiB1cGRhdGVBc3luY1xuXHRcdFx0Ly8gICAgICAgSWYgdGhlcmUgYXJlIHN0aWxsIGEgc2lnbmlmaWNhbnQgbnVtYmVyIG91dCB0aGVyZSB0aGVuIGFsc28gYWRkIGJvdFxuXHRcdFx0Ly8gICAgICAgZGF0YSBpbiB0aGUgc2V0U2Vzc2lvbkRhdGEgZm9ybWF0IGZvciB0aGUgYm90IHNlcnZpY2VcblxuXHRcdFx0Ly8gTG9nIHRoZSBzaGFyZS4gIEtpbmQgb2YgbGlrZSBhbiBpbXByZXNzaW9uP1xuXHRcdFx0bG9nQ291bnQoe1xuXHRcdFx0XHRjb3VudGVyOiAnZ2FtZV9zaGFyZScsXG5cdFx0XHRcdGtpbmdkb206IChjYW5NYWtlUElJQ2FsbCgpICYmIFp5bmdhSW5zdGFudC5jb250ZXh0LmdldFR5cGUoKSB8fCAnJykgKyAnOicgKyBzb3VyY2VOYW1lLFxuXHRcdFx0XHRwaHlsdW06IHp5bmdhLmNyZWF0aXZlIHx8ICcnLFxuXHRcdFx0XHQnY2xhc3MnOiAoenluZ2EuY3JlYXRpdmVJZCB8fCAnJykudG9TdHJpbmcoKSxcblx0XHRcdFx0ZmFtaWx5OiAoenluZ2EuY3JlYXRpdmVUeXBlIHx8ICcnKS50b1N0cmluZygpLFxuXHRcdFx0XHRnZW51czogKHp5bmdhLmluc3RhbmNlSWQgfHwgJycpLnRvU3RyaW5nKClcblx0XHRcdH0pO1xuXG5cdFx0XHRuZXdWYWwuZGF0YVsnX196J10gPSBtYXBGaWVsZHMoenluZ2EsIG91dGdvaW5nRGF0YU1hcCk7XG5cdFx0fVxuXHRcdHJldHVybiBbbmV3VmFsXTsgLy8gU2FtZSBvYmplY3QgYnV0IHRoZSBzdHJ1Y3R1cmUgaXMgc2xpZ2h0bHkgbW9kaWZpZWQuXG5cdH07XG59XG5cbmZ1bmN0aW9uIGZpeHVwRW50cnlQb2ludERhdGEoZGF0YSkge1xuXHR2YXIgbmV3RGF0YSA9IGRhdGE7XG5cdHZhciB6eW5nYTogRXhwYW5kZWRaeW5nYUVudHJ5UG9pbnREYXRhO1xuXHRpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcpIHtcblx0XHRuZXdEYXRhID0gb2JqZWN0Q2xvbmUoZGF0YSk7XG5cdFx0Ly8gTWFwIHNob3J0Zm9ybSBmaWVsZCBuYW1lIHRvIGxvbmdmb3JtXG5cdFx0enluZ2EgPSBtYXBGaWVsZHMobmV3RGF0YVsnX196J10gfHwge30sIGluY29taW5nRGF0YU1hcCkgYXMgRXhwYW5kZWRaeW5nYUVudHJ5UG9pbnREYXRhO1xuXHRcdGxldCBzaG9ydGhhbmRTb3VyY2U6IHN0cmluZyA9IHp5bmdhLnNvdXJjZTtcblx0XHRkZWxldGUgbmV3RGF0YVsnX196J107XG5cblx0XHQvLyBIYW5kbGUgb2xkIGJvdCBmb3JtYXQgKHRlbXBvcmFyeSB1bnRpbCBib3QgbG9naWMgbW92ZXMgdG8gbmV3IGZvcm1hdClcblx0XHQvKlxuXHRcdFx0KiB7XG5cdFx0XHQqICAgX206IG1lc3NhZ2VUcmFjZUd1aWQsXG5cdFx0XHQqICAgX3A6IGksXG5cdFx0XHQqICAgX2k6IGJvdEluc3RhbmNlSWQsXG5cdFx0XHQqICAgX2I6IGJvdEluc3RhbmNlRGF0YSxcblx0XHRcdCogICBfdDogbWVzc2FnZVR5cGVcblx0XHRcdCogfVxuXHRcdFx0Ki9cblxuXHRcdGlmIChuZXdEYXRhWydfdCddICYmIG5ld0RhdGFbJ19tJ10gJiYgIXp5bmdhLnNvdXJjZSkge1xuXHRcdFx0c2hvcnRoYW5kU291cmNlID0genluZ2Euc291cmNlIHx8ICdiJzsgLy8gYm90XG5cdFx0XHR6eW5nYS5jcmVhdGl2ZUlkID0genluZ2EuY3JlYXRpdmVJZCB8fCBuZXdEYXRhWydfbSddO1xuXHRcdFx0enluZ2EuaW5zdGFuY2VJZCA9IHp5bmdhLmluc3RhbmNlSWQgfHwgbmV3RGF0YVsnX2knXTtcblx0XHRcdHp5bmdhLmNyZWF0aXZlVHlwZSA9IHp5bmdhLmNyZWF0aXZlVHlwZSB8fCBuZXdEYXRhWydfdCddIHx8ICcnO1xuXHRcdFx0enluZ2EuY2Fyb3VzZWxQb3NpdGlvbiA9IHp5bmdhLmNhcm91c2VsUG9zaXRpb24gfHwgbmV3RGF0YVsnX3AnXSB8fCAnJztcblx0XHR9XG5cblx0XHQvLyB0cmFuc2xhdGUgc291cmNlIHRvIGxvbmdmb3JtXG5cdFx0c3dpdGNoIChzaG9ydGhhbmRTb3VyY2UpIHtcblx0XHRcdGNhc2UgJ2InOlxuXHRcdFx0XHR6eW5nYS5zb3VyY2UgPSAnYm90Jztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICd1Jzpcblx0XHRcdFx0enluZ2Euc291cmNlID0gJ3VwZGF0ZSc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAncyc6XG5cdFx0XHRcdHp5bmdhLnNvdXJjZSA9ICdzaGFyZSc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAneCc6XG5cdFx0XHRcdHp5bmdhLnNvdXJjZSA9ICd4cHJvbW8nO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHp5bmdhLnNvdXJjZSA9ICd1bmtub3duJztcblx0XHR9XG5cblx0XHQvLyBBZGQgdGhlIG5ldyB6eW5nYSBvYmplY3Rcblx0XHRuZXdEYXRhLnp5bmdhID0genluZ2E7XG5cdH1cblx0cmV0dXJuIG5ld0RhdGE7XG59XG4vLyBOb3RlLCB5b3UgY2FuIG9ubHkgY2FsbCB0aGlzIGlmIEZCSUcgVE9TIGhhcyBiZWVuIGFjY2VwdGVkXG5mdW5jdGlvbiBnZXRFbnRyeVRyYWNrRGF0YSgpIHtcblx0dmFyIGVudHJ5UG9pbnREYXRhID0gY2FuTWFrZVBJSUNhbGwoKSAmJiBaeW5nYUluc3RhbnQuZ2V0RW50cnlQb2ludERhdGEoKTtcblx0dmFyIHp5bmdhOiBFeHBhbmRlZFp5bmdhRW50cnlQb2ludERhdGEgPSBlbnRyeVBvaW50RGF0YSAmJiB0eXBlb2YgZW50cnlQb2ludERhdGEgPT09ICdvYmplY3QnICYmIGVudHJ5UG9pbnREYXRhLnp5bmdhIHx8IHt9O1xuXHR2YXIgdHJhY2tEYXRhOiBhbnkgPSB7XG5cdFx0Y2hhbm5lbDogenluZ2Euc291cmNlIHx8ICd1bmtub3duJyxcblx0XHRwaHlsdW06IHp5bmdhLmNyZWF0aXZlIHx8ICcnLFxuXHRcdGZhbWlseTogenluZ2EuY3JlYXRpdmVUeXBlIHx8ICcnLFxuXHRcdCdjbGFzcyc6IHp5bmdhLmNyZWF0aXZlSWQgfHwgJycsXG5cdFx0Z2VudXM6IHp5bmdhLmluc3RhbmNlSWQgfHwgJycsXG5cdFx0a2luZ2RvbTogWnluZ2FJbnN0YW50LmNvbnRleHQuZ2V0VHlwZSgpXG5cdH07XG5cdGlmICh6eW5nYS5zZW5kZXJaeW5nYVBsYXllcklkKSB7XG5cdFx0dHJhY2tEYXRhLmV4dGVybmFsU2VuZElkID0genluZ2Euc2VuZGVyWnluZ2FQbGF5ZXJJZDtcblx0fVxuXHRyZXR1cm4gdHJhY2tEYXRhO1xufVxuXG4vLyBBcHBseSBob29rcyB0byBhZGQgY29tbW9uIGRhdGEgb24gdXBkYXRlL3NoYXJlXG5aeW5nYUluc3RhbnQuenluZ2EucmVnaXN0ZXJNZXRob2RBcmd1bWVudEhvb2soJ3VwZGF0ZUFzeW5jJywgZ2VuVXBkYXRlT3JTaGFyZUhvb2soJ3UnKSk7XG5aeW5nYUluc3RhbnQuenluZ2EucmVnaXN0ZXJNZXRob2RBcmd1bWVudEhvb2soJ3NoYXJlQXN5bmMnLCBnZW5VcGRhdGVPclNoYXJlSG9vaygncycpKTtcblp5bmdhSW5zdGFudC56eW5nYS5yZWdpc3Rlck1ldGhvZFJldHVybkhvb2soJ2dldEVudHJ5UG9pbnREYXRhJywgZml4dXBFbnRyeVBvaW50RGF0YSk7XG5cbi8qKioqKioqKioqKioqKioqKi9cbi8qIEF1dG8gVHJhY2tpbmcgKi9cbi8qKioqKioqKioqKioqKioqKi9cblxuLy8gUHVibGljIGZsYWdzXG5leHBvcnQgdmFyIEFVVE9fVFJBQ0sgPSB7XG5cdElOU1RBTExTOiBBVF9JTlNUQUxMLFxuXHRWSVNJVFM6IEFUX1ZJU0lULFxuXHRMT0NBTEU6IEFUX0xPQ0FMRSxcblx0REVNT0dSQVBISUNTOiBBVF9ERU1PR1JBUEhJQ1MsXG5cdExPQURfUEVSRjogQVRfTE9BRF9QRVJGLFxuXHRDT1VOVF9TRVNTSU9OOiBBVF9DT1VOVF9TRVNTSU9OLFxuXHRSRVNPTFVUSU9OOiBBVF9SRVNPTFVUSU9OLFxuXHRPUzogQVRfT1MsXG5cdFBMQVRGT1JNOiBBVF9GQl9QTEFURk9STSxcblx0RkJfQ09OVEVYVDogQVRfRkJfQ09OVEVYVCxcblx0R0FNRV9TVEFSVDogQVRfR0FNRV9TVEFSVCxcblx0R0FNRV9FTkQ6IEFUX0dBTUVfRU5ELFxuXHRGQUNFQk9PS19JRF9BU1NPQzogQVRfRkJfSURfQVNTT0Ncbn07XG5cbi8vIERlZmF1bHQgYXV0by10cmFjayB2YWx1ZXNcbmZvciAodmFyIG9wdGlvbiBpbiBBVVRPX1RSQUNLKSB7XG5cdGlmIChBVVRPX1RSQUNLLmhhc093blByb3BlcnR5KG9wdGlvbikpIHtcblx0XHRhdXRvVHJhY2tPcHRpb25zW0FVVE9fVFJBQ0tbb3B0aW9uXV0gPSB0cnVlO1xuXHR9XG59XG4vLyBEb24ndCBhdXRvLXRyYWNrIGxvY2FsZS4gIExlYXZlIHRoYXQgdXAgdG8gdGhlIGdhbWUuXG5hdXRvVHJhY2tPcHRpb25zW0FUX0xPQ0FMRV0gPSBmYWxzZTtcblxuLy8gU2V0IGEgdmFsaWQgYXV0by10cmFjayBvcHRpb24gdmFsdWVcbmV4cG9ydCBmdW5jdGlvbiBzZXRBdXRvVHJhY2sodHJhY2tPcHRpb24sIHZhbHVlKSB7XG5cdGlmICghQVVUT19UUkFDSy5oYXNPd25Qcm9wZXJ0eSh0cmFja09wdGlvbikpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdcIm9wdGlvblwiIGlzIG5vdCBvbmUgb2YgWnluZ2EuQW5hbHl0aWNzLkFVVE9fVFJBQ0suKicpO1xuXHR9XG5cdGlmICh0eXBlb2YgdmFsdWUgIT09ICdib29sZWFuJykge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ1widmFsdWVcIiBtdXN0IGJlIG9mIHR5cGUgYm9vbGVhbicpO1xuXHR9XG5cdGF1dG9UcmFja09wdGlvbnNbb3B0aW9uXSA9IHZhbHVlO1xufVxuLy8gR2V0IGEgdmFsaWQgYXV0by10cmFjayBvcHRpb24gdmFsdWVcbmV4cG9ydCBmdW5jdGlvbiBnZXRBdXRvVHJhY2sodHJhY2tPcHRpb24pIHtcblx0aWYgKCFBVVRPX1RSQUNLLmhhc093blByb3BlcnR5KHRyYWNrT3B0aW9uKSkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ1wib3B0aW9uXCIgaXMgbm90IG9uZSBvZiBaeW5nYS5BbmFseXRpY3MuQVVUT19UUkFDSy4qJyk7XG5cdH1cblx0cmV0dXJuIGF1dG9UcmFja09wdGlvbnNbb3B0aW9uXTtcbn1cblxuWnluZ2FJbnN0YW50LkV2ZW50Lmxhc3QoWnluZ2FJbnN0YW50LkV2ZW50cy5JTlNUQU5UX0lOSVRJQUxJWkVELCBmdW5jdGlvbiAoKSB7XG5cdHZhciBjb250ZXh0VHlwZTtcblx0dmFyIGNvbnRleHRJZDtcblxuXHRmdW5jdGlvbiByZXNldENvbnRleHQoKSB7XG5cdFx0dmFyIG5ld0NvbnRleHRUeXBlID0gWnluZ2FJbnN0YW50LmNvbnRleHQgJiYgWnluZ2FJbnN0YW50LmNvbnRleHQuZ2V0VHlwZSAmJiBaeW5nYUluc3RhbnQuY29udGV4dC5nZXRUeXBlKCkgfHwgJ3Vua25vd24nO1xuXHRcdHZhciBuZXdDb250ZXh0SWQgPSBaeW5nYUluc3RhbnQuY29udGV4dCAmJiBaeW5nYUluc3RhbnQuY29udGV4dC5nZXRJRCAmJiBaeW5nYUluc3RhbnQuY29udGV4dC5nZXRJRCgpIHx8ICcnO1xuXG5cdFx0aWYgKG5ld0NvbnRleHRUeXBlICE9PSBjb250ZXh0VHlwZSB8fCBuZXdDb250ZXh0SWQgIT09IGNvbnRleHRJZCkge1xuXHRcdFx0Ly8gTG9nIGZhY2Vib29rICdjb250ZXh0JyBjb3VudGVyXG5cdFx0XHRhdXRvTG9nQ291bnQoQVRfRkJfQ09OVEVYVCwge1xuXHRcdFx0XHRjb3VudGVyOiAnY29udGV4dCcsXG5cdFx0XHRcdGtpbmdkb206IG5ld0NvbnRleHRJZCxcblx0XHRcdFx0cGh5bHVtOiBuZXdDb250ZXh0VHlwZSxcblx0XHRcdFx0J2NsYXNzJzogaW5BcHBcblx0XHRcdH0pO1xuXHRcdFx0aWYgKG5ld0NvbnRleHRJZCAmJiBhdXRvVHJhY2tPcHRpb25zW0FUX0ZCX0NPTlRFWFRdID09PSB0cnVlKSB7XG5cdFx0XHRcdGxvZ0Fzc29jaWF0ZSh7XG5cdFx0XHRcdFx0YXR0cmlidXRlOiAndXNlcl9jb250ZXh0X2NvbnZlcnNhdGlvbicsXG5cdFx0XHRcdFx0dmFsdWUxOiBuZXdDb250ZXh0SWQsXG5cdFx0XHRcdFx0a2luZ2RvbTogbmV3Q29udGV4dFR5cGUgfHwgJ3Vua25vd24nLFxuXHRcdFx0XHR9LCB7IG1heEJhdGNoRGVsYXlNUzogaW50ZXJuYWxCYXRjaERlbGF5TVMgfSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29udGV4dFR5cGUgPSBuZXdDb250ZXh0VHlwZTtcblx0XHRjb250ZXh0SWQgPSBuZXdDb250ZXh0SWQ7XG5cdH1cblxuXHRaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfRkJfVE9TX0FDQ0VQVCwgcmVzZXRDb250ZXh0KTtcblx0Y2hlY2tDbGllbnRJZCgpOyAvLyBjaGVjayB0aGUgY3VycmVudCBjbGlsZW50SWQuXG5cblx0Ly8gTG9nIG1pZ3JhdGlvbnMgc28gYW5hbHl0aWNzIGtub3dzIGl0J3Mgbm90IGEgbmV3IHVzZXJcblx0WnluZ2FBY2NvdW50LkV2ZW50Lmxhc3QoWnluZ2FBY2NvdW50LkV2ZW50cy5BQ0NPVU5UX01JR1JBVEVEKS50aGVuKChtaWdyYXRpb25EYXRhOiBaeW5nYUFjY291bnQuTWlncmF0aW9uQWNjb3VudHMpID0+IHtcblx0XHRsb2dBc3NvY2lhdGUoe1xuXHRcdFx0YXR0cmlidXRlOiAnc251aWRfZGV2aWNlX21hcHBpbmcnLFxuXHRcdFx0dmFsdWUxOiAnJyxcblx0XHRcdHZhbHVlMjogbWlncmF0aW9uRGF0YS5mcm9tLnNvY2lhbE5ldHdvcmssXG5cdFx0XHR2YWx1ZTM6IG1pZ3JhdGlvbkRhdGEuZnJvbS51c2VySWRcblx0XHR9LCB7IG1heEJhdGNoRGVsYXlNUzogaW50ZXJuYWxCYXRjaERlbGF5TVMgfSk7XG5cdH0pO1xuXG5cdFp5bmdhQWNjb3VudC5FdmVudC5sYXN0KFp5bmdhQWNjb3VudC5FdmVudHMuQUNDT1VOVF9DUkVBVEUsIGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoYXV0b1RyYWNrT3B0aW9uc1tBVF9JTlNUQUxMXSA9PT0gdHJ1ZSkge1xuXHRcdFx0bG9nSW5zdGFsbChnZXRFbnRyeVRyYWNrRGF0YSgpLCB7IG1heEJhdGNoRGVsYXlNUzogaW50ZXJuYWxCYXRjaERlbGF5TVMgfSk7XG5cdFx0fVxuXHRcdGlmIChhdXRvVHJhY2tPcHRpb25zW0FUX0ZCX0lEX0FTU09DXSA9PT0gdHJ1ZSkge1xuXHRcdFx0bG9nQXNzb2NpYXRlKHtcblx0XHRcdFx0YXR0cmlidXRlOiAnc251aWRfZGV2aWNlX21hcHBpbmcnLFxuXHRcdFx0XHR2YWx1ZTE6ICcnLFxuXHRcdFx0XHR2YWx1ZTI6IDQyLFxuXHRcdFx0XHR2YWx1ZTM6IFp5bmdhSW5zdGFudC5wbGF5ZXIuZ2V0SUQoKVxuXHRcdFx0fSwgeyBtYXhCYXRjaERlbGF5TVM6IGludGVybmFsQmF0Y2hEZWxheU1TIH0pO1xuXHRcdH1cblx0XHRaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfR0FNRV9TVEFSVEVELCAoKSA9PiB7XG5cdFx0XHRsb2dDb3VudCh7XG5cdFx0XHRcdGNvdW50ZXI6ICdmYmlnX3Rvc19hY2NlcHQnXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fSk7XG5cblx0WnluZ2FJbnN0YW50LkV2ZW50Lmxhc3QoWnluZ2FJbnN0YW50LkV2ZW50cy5JTlNUQU5UX0ZCX1RPU19BQ0NFUFQpLnRoZW4oKCkgPT4ge1xuXHRcdGF1dG9Mb2dDb3VudChBVF9GQl9QTEFURk9STSwge1xuXHRcdFx0Y291bnRlcjogJ2ZiX3BsYXRmb3JtJyxcblx0XHRcdHBoeWx1bTogWnluZ2FJbnN0YW50LmdldFBsYXRmb3JtKCksXG5cdFx0XHQnY2xhc3MnOiBaeW5nYUluc3RhbnQuZ2V0TG9jYWxlKClcblx0XHR9KTtcblx0fSk7XG5cblx0Ly8gUmVzZXQgY29udGV4dCBvbiBjaGFuZ2UgZXZlbnRcblx0WnluZ2FJbnN0YW50LkV2ZW50Lm9uKFp5bmdhSW5zdGFudC5FdmVudHMuSU5TVEFOVF9DT05URVhUX0lEX0NIQU5HRSwgcmVzZXRDb250ZXh0KTtcblxuXHRaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfRkJfVE9TX0FDQ0VQVCkudGhlbigoKSA9PiB7XG5cdFx0Ly8gQXV0byBWaXNpdC9Mb2NhbGUgdHJhY2tpbmdcblx0XHRpZiAoYXV0b1RyYWNrT3B0aW9uc1tBVF9WSVNJVF0gPT09IHRydWUpIHtcblx0XHRcdHZhciBlbnRyeVRyYWNrRGF0YSA9IGdldEVudHJ5VHJhY2tEYXRhKCk7XG5cdFx0XHR2YXIgZW50cnlQb2ludERhdGEgPSBaeW5nYUluc3RhbnQuZ2V0RW50cnlQb2ludERhdGEoKTtcblx0XHRcdHZhciB6eW5nYUVudHJ5RGF0YTogRXhwYW5kZWRaeW5nYUVudHJ5UG9pbnREYXRhID0gZW50cnlQb2ludERhdGEgJiYgZW50cnlQb2ludERhdGEuenluZ2EgfHwge307XG5cdFx0XHRsb2dWaXNpdChlbnRyeVRyYWNrRGF0YSwgeyBtYXhCYXRjaERlbGF5TVM6IGludGVybmFsQmF0Y2hEZWxheU1TIH0pO1xuXHRcdFx0Ly8gQWxzbyBsb2dDb3VudCBhcyBvbmx5IDFzdCBsb2dWaXNpdCBwZXIgZGF5IGlzIHBlcnNpc3RlZFxuXHRcdFx0bG9nQ291bnQoe1xuXHRcdFx0XHRjb3VudGVyOiAnZ2FtZV9lbnRyeScsXG5cdFx0XHRcdGtpbmdkb206IGVudHJ5VHJhY2tEYXRhLmtpbmdkb20gKyAnOicgKyBlbnRyeVRyYWNrRGF0YS5jaGFubmVsLCAvLyBOb3QgZW5vdWdoIHJvb20gZm9yIGFsbCBmaWVsZC4gIEFwcGVuZCBcImNoYW5uZWxcIiB0byBraW5nZG9tXG5cdFx0XHRcdHBoeWx1bTogZW50cnlUcmFja0RhdGEucGh5bHVtLFxuXHRcdFx0XHQnY2xhc3MnOiBlbnRyeVRyYWNrRGF0YVsnY2xhc3MnXSxcblx0XHRcdFx0ZmFtaWx5OiBlbnRyeVRyYWNrRGF0YS5mYW1pbHksXG5cdFx0XHRcdGdlbnVzOiBlbnRyeVRyYWNrRGF0YS5nZW51cyxcblx0XHRcdFx0YXR0cmlidXRlOiBlbnRyeVRyYWNrRGF0YS5leHRlcm5hbFNlbmRJZCB8fCAnJ1xuXHRcdFx0fSk7XG5cblx0XHRcdGlmICh6eW5nYUVudHJ5RGF0YS5zb3VyY2UgPT09ICdib3QnKSB7XG5cdFx0XHRcdC8vIEJvdCBtZXNzYWdlIHNwZWNpZmljIGxvZ2dpbmdcblx0XHRcdFx0bG9nQ291bnQoe1xuXHRcdFx0XHRcdGNvdW50ZXI6ICdib3RfbWVzc2FnZV9yZWNpZXB0Jyxcblx0XHRcdFx0XHR2YWx1ZTogK3p5bmdhRW50cnlEYXRhLmNhcm91c2VsUG9zaXRpb24gfHwgMCxcblx0XHRcdFx0XHRraW5nZG9tOiB6eW5nYUVudHJ5RGF0YS5jcmVhdGl2ZVR5cGUgfHwgJycsXG5cdFx0XHRcdFx0cGh5bHVtOiAnbG9hZCcsXG5cdFx0XHRcdFx0J2NsYXNzJzogKHp5bmdhRW50cnlEYXRhLnNlbmRlclp5bmdhUGxheWVySWQgfHwgJycpLnRvU3RyaW5nKCksXG5cdFx0XHRcdFx0Z2VudXM6IHp5bmdhRW50cnlEYXRhLmNyZWF0aXZlSWQgfHwgJydcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2UgaWYgKHp5bmdhRW50cnlEYXRhLnNvdXJjZSA9PT0gJ3hwcm9tbycpIHtcblx0XHRcdFx0Ly8gWFByb21vIG1lc3NhZ2Ugc3BlY2lmaWMgbG9nZ2luZ1xuXHRcdFx0XHRsb2dDb3VudCh7XG5cdFx0XHRcdFx0Y291bnRlcjogJ3hwcm9tb19sb2FkJyxcblx0XHRcdFx0XHR2YWx1ZTogK3p5bmdhRW50cnlEYXRhLmNhcm91c2VsUG9zaXRpb24gfHwgbnVsbCxcblx0XHRcdFx0XHRraW5nZG9tOiAoenluZ2FFbnRyeURhdGEuY3JlYXRpdmVUeXBlIHx8ICcnKS50b1N0cmluZygpLFxuXHRcdFx0XHRcdHBoeWx1bTogKHp5bmdhRW50cnlEYXRhLnNlbmRlckdhbWVJZCB8fCAnJykudG9TdHJpbmcoKSxcblx0XHRcdFx0XHQnY2xhc3MnOiAoenluZ2FFbnRyeURhdGEuc2VuZGVyWnluZ2FQbGF5ZXJJZCB8fCAnJykudG9TdHJpbmcoKSxcblx0XHRcdFx0XHRmYW1pbHk6ICh6eW5nYUVudHJ5RGF0YS50aW1lc3RhbXAgfHwgJycpLnRvU3RyaW5nKClcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHR9XG5cdFx0Ly8gVE9ETzogTGltaXQgZnJlcXVlbmN5IG9mIHRoaXNcblx0XHRpZiAoYXV0b1RyYWNrT3B0aW9uc1tBVF9MT0NBTEVdID09PSB0cnVlICYmIFp5bmdhSW5zdGFudC5nZXRMb2NhbGUoKSkge1xuXHRcdFx0Ly8gVE9ETzogTGltaXQgdG8gMS93ZWVrIGlmIHVuY2FobmdlZFxuXHRcdFx0bG9nTGFuZ3VhZ2UoeyBsYW5ndWFnZTogWnluZ2FJbnN0YW50LmdldExvY2FsZSgpIH0sIHsgbWF4QmF0Y2hEZWxheU1TOiBpbnRlcm5hbEJhdGNoRGVsYXlNUyB9KTtcblx0XHR9XG5cdH0pO1xuXG5cdFp5bmdhSW5zdGFudC5FdmVudC5vbihaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfR0FNRV9SRVBMQVksIGZ1bmN0aW9uICgpIHtcblx0XHRyZXNldENvbnRleHQoKTtcblx0XHQvLyBBbHNvIGxvZyBhIHZpc2l0IG9uIGV2ZXJ5IHJlcGxheVxuXHRcdGlmIChhdXRvVHJhY2tPcHRpb25zW0FUX1ZJU0lUXSA9PT0gdHJ1ZSkge1xuXHRcdFx0bG9nVmlzaXQoZ2V0RW50cnlUcmFja0RhdGEoKSwgeyBtYXhCYXRjaERlbGF5TVM6IGludGVybmFsQmF0Y2hEZWxheU1TIH0pO1xuXHRcdH1cblx0fSk7XG5cblx0Ly8gTG9nIHNlc3Npb24gSUQuICBTZXNzaW9uIElEIGlzIGluamVjdGVkIGludG8gbWlsZXN0b25lIGF1dG9tYXRpYWxsY3lcblx0YXV0b0xvZ0NvdW50KEFUX0NPVU5UX1NFU1NJT04sIHtcblx0XHRjb3VudGVyOiAnc2Vzc2lvbl9zdGFydCcsXG5cdFx0cGh5bHVtOiBaeW5nYUluc3RhbnQucGxheWVyLmdldElEKCksXG5cdFx0Z2VudXM6IFp5bmdhLmNsaWVudFZlcnNpb24gLy8gb2theSBpZiBudWxsLiB3b3VsZCBicmVhayBiYWNrLWNvbXBhdCBpZiB3ZSB3YWl0ZWQgb24gdGhpcyBvcHRpb25hbCBmZWF0dXJlLlxuXHR9KTtcblxuXHRhdXRvTG9nQ291bnQoQVRfTE9BRF9QRVJGLCB7XG5cdFx0Y291bnRlcjogJ3ByZV9sb2FkJyxcblx0XHRnZW51czogU3RyaW5nKGxvYWRTdGFydCAvIDEwMDApXG5cdH0pO1xuXG5cdGF1dG9Mb2dDb3VudChBVF9SRVNPTFVUSU9OLCB7XG5cdFx0Y291bnRlcjogJ3Jlc29sdXRpb24nLFxuXHRcdGtpbmdkb206IHdpbi5zY3JlZW4ud2lkdGggKyAneCcgKyB3aW4uc2NyZWVuLmhlaWdodCxcblx0XHRwaHlsdW06IHdpbi5pbm5lcldpZHRoICsgJ3gnICsgd2luLmlubmVySGVpZ2h0LFxuXHRcdCdjbGFzcyc6ICdvbnRvdWNoc3RhcnQnIGluIHdpbiA/ICd0b3VjaCcgOiAnbm90b3VjaCdcblx0fSk7XG5cbn0pO1xuXG5aeW5nYUFjY291bnQuRXZlbnQubGFzdChaeW5nYUFjY291bnQuRXZlbnRzLkFDQ09VTlRfREVUQUlMUywgZnVuY3Rpb24gKGFub25BY2NvdW50RGV0YWlscykge1xuXHRjdXJyZW50VXNlclppZCA9IGFub25BY2NvdW50RGV0YWlscy56aWQ7XG59KTtcblxuLy8gVE9ETzogUHJvcGVyIHNlc3Npb24gdHJhY2tpbmcgYXMgcGVyOiBodHRwczovL2dpdGh1Yi1jYS5jb3JwLnp5bmdhLmNvbS9Vbml0eVRlY2gvWnluZ2EuTWV0cmljcy5BbmFseXRpY3MvYmxvYi9kZXZlbG9wbWVudC9Bc3NldHMvWnluZ2EvTWV0cmljcy9BbmFseXRpY3MvRG9jdW1lbnRhdGlvbi9TZXNzaW9uUmVmZXJlbmNlLm1kXG5cbi8vIEdhbWUgaXMgbG9hZGVkIGFuZCB3YWl0aW5nIGZvciB0aGUgdXNlciB0byBwcmVzcyB0aGUgcGxheSBidXR0b24gaW4gdGhlIEZCIHVpXG5aeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLkdBTUVfR0FNRV9TVEFSVCwgZnVuY3Rpb24gKCkge1xuXHR2YXIgbm93OiBudW1iZXIgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0YXV0b0xvZ0NvdW50KEFUX0xPQURfUEVSRiwge1xuXHRcdGNvdW50ZXI6ICdwcmVfbG9hZF9jb21wbGV0ZScsXG5cdFx0dmFsdWU6IG5vdyAtIGxvYWRTdGFydCxcblx0XHRnZW51czogU3RyaW5nKG5vdyAvIDEwMDApXG5cdH0pO1xufSk7XG5cbi8vIEdhbWUgaXMgbG9hZGluZywgdGhlIHVzZXIgcHJlc3NlZCB0aGUgcGxheSBidXR0b24gaW4gdGhlIEZCIHVpXG5aeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfR0FNRV9TVEFSVEVELCBmdW5jdGlvbiAoKSB7XG5cdC8vIFRPRE86IExpbWl0IGZyZXF1ZW5jeSBvZiB0aGlzXG5cdGlmIChhdXRvVHJhY2tPcHRpb25zW0FUX0RFTU9HUkFQSElDU10gPT09IHRydWUgJiYgbG9nZ2VkRGVtb2dyYXBoaWNzID09PSBmYWxzZSkge1xuXHRcdGxvZ0RlbW9ncmFwaGljKHtcblx0XHRcdGxvY2FsZTogWnluZ2FJbnN0YW50LmdldExvY2FsZSgpLFxuXHRcdFx0Zmlyc3ROYW1lOiBaeW5nYUluc3RhbnQucGxheWVyLmdldE5hbWUoKSxcblx0XHRcdHBpY3R1cmVVcmw6IFp5bmdhSW5zdGFudC5wbGF5ZXIuZ2V0UGhvdG8oKSxcblx0XHRcdGFnZTogJycsXG5cdFx0XHRsYXN0TmFtZTogJycsXG5cdFx0XHR1c2VyTmFtZTogJycsXG5cdFx0XHRnZW5kZXI6ICcnLFxuXHRcdFx0ZW1haWw6ICcnLFxuXHRcdFx0dGltZXpvbmU6ICcnXG5cdFx0fSwgeyBtYXhCYXRjaERlbGF5TVM6IGludGVybmFsQmF0Y2hEZWxheU1TIH0pO1xuXHRcdGxvZ2dlZERlbW9ncmFwaGljcyA9IHRydWU7XG5cdH1cbn0pO1xuXG4vKiBsY2FybDogTm8gbG9uZ2VyIGltcG9ydGFudCwgd2FzIHJlYWxseSBvbGQgU0RLIHZlcnNpb25cblxuLy8gR2FtZSBzdGFydC9zdG9wIHJlbGF0ZWRcbmZ1bmN0aW9uIGdhbWVTdGFydCgpIHtcblx0Z2FtZVNjb3JlID0gMDtcblx0c2Vzc2lvbkdhbWVOdW1iZXIrKztcblx0YXV0b0xvZ0NvdW50KEFUX0dBTUVfU1RBUlQsIHtcblx0XHRjb3VudGVyOiAnZ2FtZV9zdGFydCcsXG5cdFx0a2luZ2RvbTogU3RyaW5nKHNlc3Npb25HYW1lTnVtYmVyKVxuXHR9KTtcbn1cblp5bmdhSW5zdGFudC5FdmVudC5vbihaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfR0FNRV9TVEFSVEVELCBnYW1lU3RhcnQpO1xuWnluZ2FJbnN0YW50LkV2ZW50Lm9uKFp5bmdhSW5zdGFudC5FdmVudHMuSU5TVEFOVF9HQU1FX1JFUExBWSwgZ2FtZVN0YXJ0KTtcblxuWnluZ2FJbnN0YW50LkV2ZW50Lm9uKFp5bmdhSW5zdGFudC5FdmVudHMuR0FNRV9HQU1FX0VORCwgZnVuY3Rpb24gKCkge1xuXHRhdXRvTG9nQ291bnQoQVRfR0FNRV9FTkQsIHtcblx0XHRjb3VudGVyOiAnZ2FtZV9lbmQnLFxuXHRcdGtpbmdkb206IFN0cmluZyhzZXNzaW9uR2FtZU51bWJlciksXG5cdFx0dmFsdWU6IGdhbWVTY29yZVxuXHR9KTtcbn0pO1xuWnluZ2FJbnN0YW50LkV2ZW50Lm9uKFp5bmdhSW5zdGFudC5FdmVudHMuR0FNRV9TQ09SRV9DSEFOR0UsIGZ1bmN0aW9uIChzY29yZSkge1xuXHRpZiAoc2NvcmUgPiBnYW1lU2NvcmUpIHtcblx0XHRnYW1lU2NvcmUgPSBzY29yZTtcblx0fVxufSk7XG5cbmxjYXJsOiBlbmQgb2Ygb2xkIGdhbWUgc3RhcnQvc3RvcCBsb2dpYyovXG5cbmF1dG9Mb2dDb3VudChBVF9PUywge1xuXHRjb3VudGVyOiAnb3MnLFxuXHRraW5nZG9tOiB1YVN0YXRzLm9zLFxuXHRwaHlsdW06IHVhU3RhdHMub3NWZXJzaW9uLFxuXHQnY2xhc3MnOiB1YVN0YXRzLmJyb3dzZXIsXG5cdGZhbWlseTogdWFTdGF0cy5icm93c2VyVmVyc2lvbixcblx0Z2VudXM6IHVzZXJBZ2VudFxufSk7XG5cbnJlc3RvcmVUcmFja1F1ZXVlRnJvbUNhY2hlKCkudGhlbigocmVzdG9yZUNvdW50OiBudW1iZXIpID0+IHtcblx0Ly8gT2ssIHdlIGNhbiBub3cgc2F2ZSBvdXIgcXVldWUgdG8gZGlzayBhZ2FpblxuXHRzYXZlUXVldWVUb0NhY2hlUHJvbWlzZSA9IHVuZGVmaW5lZDtcblx0ZGVidWcoJ1Jlc3RvcmVkIGZyb20gZGlzazonLCByZXN0b3JlQ291bnQpO1xuXHRpZiAocmVzdG9yZUNvdW50ID4gMCkge1xuXHRcdC8vIFdlIHJlc3RvcmVkIHNvbWUgY2FjaGVkIHRyYWNrIGNhbGxzIGZyb20gbGFzdCB0aW1lIHdlIGxvYWRlZC5cblx0XHQvLyBTZW5kIHRob3NlIG91dCByaWdodCBub3cuXG5cdFx0Zmx1c2hUcmFja0NhbGxzKCk7XG5cdH1cbn0pLmNhdGNoKCgpID0+IHtcblx0Ly8gSnVzdCB0byBiZSBzYWZlIGFsbG93IHRoZSBxdWV1ZSB0byBzYXZlIHRvIGRpc2sgY2FjaGUgaGVyZSBhcyB3ZWxsXG5cdHNhdmVRdWV1ZVRvQ2FjaGVQcm9taXNlID0gdW5kZWZpbmVkO1xufSk7XG5cblp5bmdhSW5zdGFudC5FdmVudC5vbihaeW5nYUluc3RhbnQuRXZlbnRzLkdBTUVfQURfU1RBVFVTLCAoYWRTdGF0dXM6IFp5bmdhSW5zdGFudC5GYkFkU3RhdHVzKTogdm9pZCA9PiB7XG5cdHZhciB0cmFja1BheWxvYWQ6IGFueSA9IHtcblx0XHRjb3VudGVyOiAnYWRfc3RhdHVzXycgKyBhZFN0YXR1cy5zdGF0dXNUeXBlLnRvTG9jYWxlTG93ZXJDYXNlKCksXG5cdFx0dmFsdWU6IGFkU3RhdHVzLnRpbWUuZ2V0VGltZSgpLFxuXHRcdGtpbmdkb206IGFkU3RhdHVzLnBsYWNlbWVudElkLFxuXHRcdHBoeWx1bTogYWRTdGF0dXMuYWRUeXBlLFxuXHRcdGNsYXNzOiBhZFN0YXR1cy5pZFxuXHR9O1xuXHRzd2l0Y2ggKGFkU3RhdHVzLnN0YXR1c1R5cGUpIHtcblx0XHRjYXNlICdGRVRDSF9FUlJPUic6XG5cdFx0Y2FzZSAnTE9BRF9FUlJPUic6XG5cdFx0Y2FzZSAnU0hPV19FUlJPUic6XG5cdFx0XHRsZXQgY29kZSA9ICdaWU5HQV9VTktOT1dOJztcblx0XHRcdGxldCBtZXNzYWdlID0gJ1p5bmdhIFVua25vd24nO1xuXHRcdFx0aWYgKHR5cGVvZiBhZFN0YXR1cy5kYXRhID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRjb2RlID0gYWRTdGF0dXMuZGF0YS5jb2RlIHx8IGNvZGU7XG5cdFx0XHRcdG1lc3NhZ2UgPSBhZFN0YXR1cy5kYXRhLm1lc3NhZ2UgfHwgbWVzc2FnZTtcblx0XHRcdH1cblx0XHRcdHRyYWNrUGF5bG9hZC5mYW1pbHkgPSBjb2RlO1xuXHRcdFx0dHJhY2tQYXlsb2FkLmdlbnVzID0gbWVzc2FnZTtcblx0fVxuXHRsb2dDb3VudCh0cmFja1BheWxvYWQsIHsgbWF4QmF0Y2hEZWxheU1TOiBpbnRlcm5hbEJhdGNoRGVsYXlNUyB9KTtcbn0sIHRydWUpO1xuIiwiLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNvbW1lbnQtZm9ybWF0XG4vLy88YW1kLW1vZHVsZSBuYW1lPVwiWnluZ2FDb250ZXh0VHJhY2tlclwiLz5cbid1c2Ugc3RyaWN0JztcbmltcG9ydCBaeW5nYSA9IHJlcXVpcmUoJy4vWnluZ2EnKTtcbmltcG9ydCBaeW5nYUNvcmUgPSByZXF1aXJlKCcuL1p5bmdhQ29yZScpO1xuaW1wb3J0IFp5bmdhSW5zdGFudCA9IHJlcXVpcmUoJy4vWnluZ2FJbnN0YW50Jyk7XG5cbmNvbnN0IENPTlRFWFRfSElTVE9SWV9LRVkgPSAnX0NUWF9ISVNUJztcblxuY29uc3QgQ1RYX1NFUCA9ICc7JztcbmNvbnN0IENUWF9JVEVNX1NFUCA9ICc6JztcbmNvbnN0IENUWF9DSEVDS19TRVAgPSAnLCc7XG5jb25zdCBDVFhfUExBWUVSX1NFUCA9ICcsJztcblxuaW50ZXJmYWNlIFNpemVDaGVja1JhbmdlIHtcblx0bWluOiBudW1iZXI7XG5cdG1heDogbnVtYmVyO1xuXHRhY2N1cmFjeT86IG51bWJlcjsgLy8gR2V0IHdpdGhpbiB0aGlzIGFuZCBzdG9wIGxvb2tpbmdcbn1cbmludGVyZmFjZSBTaXplQ2hlY2tzIHtcblx0W2luZGV4OiBzdHJpbmddOiBTaXplQ2hlY2tSYW5nZVtdO1xufVxuXG4vLyBHdWVzcyBwcm9ncmVzc2lvbi5cbi8vIEluaXRpYWwgbnVtYmVycyBhcmUgYmFzZWQgb24ga25vd24gdXNlcnMgcGxheWluZyBwZXIgY29udGV4dFxuLy8gVE9ETzogcmUtYmFsYW5jZSBvbmNlIHdlIGdldCBhY3R1YWwgc2l6ZSBkaXN0cmlidXRpb25cbmNvbnN0IENUWF9UWVBFX1NJWkVfQ0hFQ0tTOiBTaXplQ2hlY2tzID0ge1xuXHRUSFJFQUQ6IFsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaHJlYWRzIGFyZSBzbWFsbGVyLCB1c3VhbGx5IGp1c3QgMS1vbi0xXG5cdFx0eyBtaW46IDIsIG1heDogMiwgYWNjdXJhY3k6IDAgfSwgICAgICAvLyA5Ni4wJSBtYXRjaCByYXRlLCAxIGF0dGVtcHRzXG5cdFx0eyBtaW46IDMsIG1heDogNCwgYWNjdXJhY3k6IDAgfSwgICAgICAvLyAyLjUlICBtYXRjaCByYXRlLCAzIGF0dGVtcHRzXG5cdFx0eyBtaW46IDUsIG1heDogOCwgYWNjdXJhY3k6IDAgfSwgICAgICAvLyAwLjUlICBtYXRjaCByYXRlLCA1IGF0dGVtcHRzXG5cdFx0eyBtaW46IDksIG1heDogMTYsIGFjY3VyYWN5OiAwIH0sICAgICAvLyAwLjA2JSBtYXRjaCByYXRlLCA3IGF0dGVtcHRzXG5cdFx0eyBtaW46IDE3LCBtYXg6IDMyLCBhY2N1cmFjeTogMCB9LCAgICAvLyAwLjAwJSBtYXRjaCByYXRlLCA5IGF0dGVtcHRzXG5cdFx0eyBtaW46IDMzLCBtYXg6IDEwNTYsIGFjY3VyYWN5OiA0IH0sICAvLyAxNiBhdHRlbXB0cyAod2VsbCwgbGVzcyB3aXRoIGFjY3VyYWN5IG9mIDQpXG5cdFx0eyBtaW46IDEwNTcsIG1heDogbnVsbCwgYWNjdXJhY3k6IDAgfSAvLyA3IGF0dGVtcHRzXG5cdF0sXG5cdEdST1VQOiBbICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyb3VwcyBwcm9iYWJseSBoYXZlIGxhcmdlciBudW1iZXJzXG5cdFx0eyBtaW46IDIsIG1heDogNCwgYWNjdXJhY3k6IDAgfSwgICAgICAgICAvLyAyIGF0dGVtcHRzICgyKVxuXHRcdHsgbWluOiA1LCBtYXg6IDEyLCBhY2N1cmFjeTogMCB9LCAgICAgICAgLy8gKzggLSA1IGF0dGVtcHRzICg0ICsgMSlcblx0XHR7IG1pbjogMTMsIG1heDogMjksIGFjY3VyYWN5OiAwIH0sICAgICAgIC8vICsxNiAtIDcgYXR0ZW1wdHMgKDUgKyAyKVxuXHRcdHsgbWluOiAzMCwgbWF4OiAxMDUzLCBhY2N1cmFjeTogNCB9LCAgICAgLy8gKzEwMjQgLSAxNCBhdHRlbXB0cyAoMTEgKyAzKVxuXHRcdHsgbWluOiAxMDU0LCBtYXg6IDUwNTAsIGFjY3VyYWN5OiAzMiB9LCAgLy8gKzQwOTYgLSAxNyBhdHRlbXB0cyAoMTMgKyA0KVxuXHRcdHsgbWluOiA1MDUwLCBtYXg6IG51bGwsIGFjY3VyYWN5OiAwIH0gICAgLy8gNiBhdHRlbXB0c1xuXHRdXG59O1xuXG5sZXQgbGFzdENvbnRleHRJZDogc3RyaW5nID0gbnVsbDtcblxuaW50ZXJmYWNlIENvbnRleHRIaXN0b3J5UGF5bG9hZCB7XG5cdF9DVFhfSElTVD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb250ZXh0U2l6ZUNoZWNrIHtcblx0bWluOiBudW1iZXI7XG5cdG1heDogbnVtYmVyO1xuXHRjaGVja1RpbWU6IERhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udGV4dEhpc3Rvcnkge1xuXHRjb250ZXh0SWQ6IHN0cmluZztcblx0dHlwZTogc3RyaW5nO1xuXHRsYXN0Q2hlY2tTdWNjZXNzOiBDb250ZXh0U2l6ZUNoZWNrO1xuXHRsYXN0Q2hlY2tGYWlsOiBDb250ZXh0U2l6ZUNoZWNrO1xuXHRyZWNlbnRQbGF5ZXJzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb250ZXh0SGlzdG9yaWVzIHtcblx0W2luZGV4OiBzdHJpbmddOiBDb250ZXh0SGlzdG9yeTtcbn1cblxuZXhwb3J0IHZhciBFdmVudCA9IG5ldyBaeW5nYUNvcmUuRXZlbnRNaXhpbigpO1xuZXhwb3J0IHZhciBFdmVudHMgPSB7XG5cdENPTlRFWFRTOiAnQ29udGV4dFRyYWNrZXIuQ29udGV4dHMnLFxuXHRDT05URVhUX0NIQU5HRTogJ0NvbnRleHRUcmFja2VyLkNvbnRleHRDaGFuZ2UnXG59O1xuXG5mdW5jdGlvbiBnZXRUUyh0aW1lOiBEYXRlKTogbnVtYmVyIHtcblx0cmV0dXJuIE1hdGgucm91bmQodGltZS5nZXRUaW1lKCkgLyAxMDAwKTtcbn1cblxuZnVuY3Rpb24gbWluTWF4U2VyaWFsaXplKHZhbDogbnVtYmVyKTogc3RyaW5nIHtcblx0bGV0IHNlcmlhbGl6ZWRWYWw6IHN0cmluZyA9ICcnO1xuXHRpZiAodmFsID49IDAgJiYgdmFsIDwgSW5maW5pdHkpIHtcblx0XHRzZXJpYWxpemVkVmFsID0gdmFsLnRvU3RyaW5nKCk7XG5cdH1cblx0cmV0dXJuIHNlcmlhbGl6ZWRWYWw7XG59XG5cbmZ1bmN0aW9uIG1pbk1heERlc2VyaWFsaXplKHZhbDogc3RyaW5nKTogbnVtYmVyIHtcblx0bGV0IGRlc2VyaWFsaXplZFZhbDogbnVtYmVyID0gbnVsbDtcblx0aWYgKHZhbCAhPT0gJycpIHtcblx0XHRkZXNlcmlhbGl6ZWRWYWwgPSBwYXJzZUludCh2YWwsIDEwKTtcblx0XHRpZiAoaXNOYU4oZGVzZXJpYWxpemVkVmFsKSkge1xuXHRcdFx0ZGVzZXJpYWxpemVkVmFsID0gbnVsbDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGRlc2VyaWFsaXplZFZhbDtcbn1cblxuZnVuY3Rpb24gaGlzdG9yaWVzU2VyaWFsaXplKGhpc3RvcmllczogQ29udGV4dEhpc3Rvcmllcyk6IHN0cmluZyB7XG5cdGNvbnN0IGNvbnRleHRzOiBzdHJpbmdbXSA9IFtdO1xuXHRmb3IgKGxldCBjb250ZXh0SWQgaW4gaGlzdG9yaWVzKSB7XG5cdFx0bGV0IGNvbnRleHQgPSBoaXN0b3JpZXNbY29udGV4dElkXTtcblx0XHRsZXQgcmVjZW50UGxheWVyc1N0ciA9IGNvbnRleHQucmVjZW50UGxheWVycy5zb3J0KCkuam9pbihDVFhfUExBWUVSX1NFUCk7XG5cdFx0bGV0IGNvbnRleHRQYXJ0czogc3RyaW5nW10gPSBbY29udGV4dElkLCBjb250ZXh0LnR5cGUsIHJlY2VudFBsYXllcnNTdHJdO1xuXHRcdGZvciAobGV0IGNvbnRleHRTaXplQ2hlY2tJdGVtIG9mIFtjb250ZXh0Lmxhc3RDaGVja1N1Y2Nlc3MsIGNvbnRleHQubGFzdENoZWNrRmFpbF0pIHtcblx0XHRcdGlmIChjb250ZXh0U2l6ZUNoZWNrSXRlbSkge1xuXHRcdFx0XHRsZXQgdHMgPSBnZXRUUyhjb250ZXh0U2l6ZUNoZWNrSXRlbS5jaGVja1RpbWUpO1xuXHRcdFx0XHRsZXQgbWluID0gbWluTWF4U2VyaWFsaXplKGNvbnRleHRTaXplQ2hlY2tJdGVtLm1pbik7XG5cdFx0XHRcdGxldCBtYXggPSBtaW5NYXhTZXJpYWxpemUoY29udGV4dFNpemVDaGVja0l0ZW0ubWF4KTtcblx0XHRcdFx0Y29udGV4dFBhcnRzLnB1c2goW3RzLCBtaW4sIG1heF0uam9pbihDVFhfQ0hFQ0tfU0VQKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb250ZXh0UGFydHMucHVzaCgnJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnRleHRzLnB1c2goY29udGV4dFBhcnRzLmpvaW4oQ1RYX0lURU1fU0VQKSk7XG5cdH1cblx0cmV0dXJuIGNvbnRleHRzLmpvaW4oQ1RYX1NFUCk7XG59XG5cbmZ1bmN0aW9uIHNpemVDaGVja0Rlc2VyaWFsaXplKHN0cjogc3RyaW5nKSB7XG5cdHZhciBzaXplQ2hlY2s6IENvbnRleHRTaXplQ2hlY2sgPSBudWxsO1xuXHRpZiAoc3RyLmxlbmd0aCA+IDApIHtcblx0XHRsZXQgW3RzLCBtaW5TdHJpbmcsIG1heFN0cmluZ10gPSBzdHIuc3BsaXQoQ1RYX0NIRUNLX1NFUCk7XG5cdFx0c2l6ZUNoZWNrID0ge1xuXHRcdFx0Y2hlY2tUaW1lOiBuZXcgRGF0ZSgocGFyc2VJbnQodHMsIDEwKSkgKiAxMDAwKSxcblx0XHRcdG1pbjogbWluTWF4RGVzZXJpYWxpemUobWluU3RyaW5nKSxcblx0XHRcdG1heDogbWluTWF4RGVzZXJpYWxpemUobWF4U3RyaW5nKVxuXHRcdH07XG5cdH1cblx0cmV0dXJuIHNpemVDaGVjaztcbn1cblxuZnVuY3Rpb24gaGlzdG9yaWVzRGVzZXJpYWxpemUoc2VyaWFsaXplZERhdGE6IHN0cmluZyk6IENvbnRleHRIaXN0b3JpZXMge1xuXHRjb25zdCBoaXN0b3JpZXM6IENvbnRleHRIaXN0b3JpZXMgPSB7fTtcblx0Y29uc3QgY29udGV4dHMgPSBzZXJpYWxpemVkRGF0YS5zcGxpdChDVFhfU0VQKTtcblx0Zm9yIChsZXQgY29udGV4dCBvZiBjb250ZXh0cykge1xuXHRcdGxldCBjb250ZXh0UGFydHMgPSBjb250ZXh0LnNwbGl0KENUWF9JVEVNX1NFUCk7XG5cdFx0bGV0IFtjb250ZXh0SWQsIGNvbnRleHRUeXBlLCByZWNlbnRQbGF5ZXJzU3RyLCBsYXN0U3VjY2Vzc1N0ciwgbGFzdEZhaWxTdHJdID0gY29udGV4dFBhcnRzO1xuXHRcdGxldCBjb250ZXh0SGlzdDogQ29udGV4dEhpc3RvcnkgPSB7XG5cdFx0XHRjb250ZXh0SWQ6IGNvbnRleHRJZCxcblx0XHRcdHR5cGU6IGNvbnRleHRUeXBlLFxuXHRcdFx0cmVjZW50UGxheWVyczogcmVjZW50UGxheWVyc1N0ciA/IHJlY2VudFBsYXllcnNTdHIuc3BsaXQoQ1RYX1BMQVlFUl9TRVApIDogW10sXG5cdFx0XHRsYXN0Q2hlY2tTdWNjZXNzOiBzaXplQ2hlY2tEZXNlcmlhbGl6ZShsYXN0U3VjY2Vzc1N0ciB8fCAnJyksXG5cdFx0XHRsYXN0Q2hlY2tGYWlsOiBzaXplQ2hlY2tEZXNlcmlhbGl6ZShsYXN0RmFpbFN0ciB8fCAnJylcblx0XHR9O1xuXHRcdGlmIChjb250ZXh0SWQpIHtcblx0XHRcdGhpc3Rvcmllc1tjb250ZXh0SWRdID0gY29udGV4dEhpc3Q7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBoaXN0b3JpZXM7XG59XG5cbmZ1bmN0aW9uIGluc3RhbnRGdW5jdGlvblN1cHBvcnRlZChmdW5jdGlvbk5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRsZXQgc3VwcG9ydGVkRnVuY3Rpb25zOiBzdHJpbmdbXSA9IFp5bmdhSW5zdGFudC5nZXRTdXBwb3J0ZWRBUElzKCk7XG5cdHJldHVybiAoc3VwcG9ydGVkRnVuY3Rpb25zLmluZGV4T2YoZnVuY3Rpb25OYW1lKSA+PSAwKTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVDaGVja3NJblJhbmdlKFxuXHRtaW46IG51bWJlcixcblx0bWF4OiBudW1iZXIsXG5cdGxhc3RGYWlsQ2hlY2s6IFNpemVDaGVja1JhbmdlLFxuXHRjaGVja3M/OiBTaXplQ2hlY2tSYW5nZVtdKTogU2l6ZUNoZWNrUmFuZ2VbXSB7XG5cdGlmICghY2hlY2tzKSB7XG5cdFx0Y2hlY2tzID0gW107XG5cdH1cblx0aWYgKGxhc3RGYWlsQ2hlY2sgJiYgbGFzdEZhaWxDaGVjay5tYXggPj0gbWF4KSB7XG5cdFx0cmV0dXJuIGNoZWNrczsgLy8gc2hvcnQgY2lyY3VpdCwgZGVhZCBwYXRoXG5cdH1cblx0aWYgKG1pbiA9PT0gbWF4KSB7XG5cdFx0Y2hlY2tzLnB1c2goe1xuXHRcdFx0bWluOiBtaW4sXG5cdFx0XHRtYXg6IG1heFxuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdGxldCBoYWxmID0gKG1heCAtIG1pbiArIDEpIC8gMjtcblxuXHRcdGlmIChNYXRoLnJvdW5kKGhhbGYpID09PSBoYWxmKSB7XG5cdFx0XHRsZXQgZmlyc3RIYWxmID0ge1xuXHRcdFx0XHRtaW46IG1pbixcblx0XHRcdFx0bWF4OiAobWluICsgaGFsZiAtIDEpXG5cdFx0XHR9O1xuXHRcdFx0bGV0IHNlY29uZEhhbGYgPSB7XG5cdFx0XHRcdG1pbjogKG1pbiArIGhhbGYpLFxuXHRcdFx0XHRtYXg6IG1heFxuXHRcdFx0fTtcblxuXHRcdFx0Y2hlY2tzLnB1c2goZmlyc3RIYWxmKTtcblx0XHRcdGlmIChmaXJzdEhhbGYubWluICE9PSBmaXJzdEhhbGYubWF4KSB7XG5cdFx0XHRcdGdlbmVyYXRlQ2hlY2tzSW5SYW5nZShmaXJzdEhhbGYubWluLCBmaXJzdEhhbGYubWF4LCBsYXN0RmFpbENoZWNrLCBjaGVja3MpO1xuXHRcdFx0fVxuXG5cdFx0XHRjaGVja3MucHVzaChzZWNvbmRIYWxmKTtcblx0XHRcdGlmIChzZWNvbmRIYWxmLm1pbiAhPT0gc2Vjb25kSGFsZi5tYXgpIHtcblx0XHRcdFx0Z2VuZXJhdGVDaGVja3NJblJhbmdlKHNlY29uZEhhbGYubWluLCBzZWNvbmRIYWxmLm1heCwgbGFzdEZhaWxDaGVjaywgY2hlY2tzKTtcblx0XHRcdH1cblxuXHRcdH1cblx0fVxuXHRyZXR1cm4gY2hlY2tzO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVDb250ZXh0SGlzdG9yeShjb250ZXh0OiBDb250ZXh0SGlzdG9yeSk6IFByb21pc2U8dm9pZD4ge1xuXG5cdHJldHVybiBaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfRkJfVE9TX0FDQ0VQVCkudGhlbigoKSA9PiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlOiAoKSA9PiB2b2lkKSA9PiB7XG5cdFx0XHRmdW5jdGlvbiBjaGVja1NpemUoKTogdm9pZCB7XG5cdFx0XHRcdGxldCBzY2hlZHVsZSA9IENUWF9UWVBFX1NJWkVfQ0hFQ0tTW2NvbnRleHQudHlwZS50b1VwcGVyQ2FzZSgpXTtcblx0XHRcdFx0bGV0IG5leHRDaGVjazogU2l6ZUNoZWNrUmFuZ2UgPSBudWxsO1xuXHRcdFx0XHRpZiAoc2NoZWR1bGUpIHtcblx0XHRcdFx0XHRsZXQgbGFzdENoZWNrU3VjY2VzcyA9IGNvbnRleHQubGFzdENoZWNrU3VjY2Vzcztcblx0XHRcdFx0XHRsZXQgbGFzdENoZWNrRmFpbCA9IGNvbnRleHQubGFzdENoZWNrRmFpbDtcblx0XHRcdFx0XHRpZiAobGFzdENoZWNrU3VjY2VzcyA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0Ly8gTm8gbWF0Y2hlcyB5ZXRcblx0XHRcdFx0XHRcdGlmIChsYXN0Q2hlY2tGYWlsKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFdlJ3ZlIHRyaWVkIGFuZCBmYWlsZWQgc28gZmluZCBuZXh0IGluIHRoZSBzY2hlZHVsZVxuXHRcdFx0XHRcdFx0XHRmb3IgKGxldCBpIGluIHNjaGVkdWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0bGV0IHNjaGVkdWxlQ2hlY2sgPSBzY2hlZHVsZVtpXTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoc2NoZWR1bGVDaGVjay5tYXggPiBsYXN0Q2hlY2tGYWlsLm1heCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSnVzdCBjaGVjayBtYXggdG8gYWNjb21vZGF0ZSBzY2hlZHVsZSBjaGFuZ2VzLlxuXHRcdFx0XHRcdFx0XHRcdFx0bmV4dENoZWNrID0gc2NoZWR1bGVDaGVjaztcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gRmlyc3QgY2hlY2sgZXZlciwgdHJ5IHRoZSBmaXJzdCBpbiB0aGUgc2NoZWR1bGVcblx0XHRcdFx0XHRcdFx0bmV4dENoZWNrID0gc2NoZWR1bGVbMF07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIFdlJ3ZlIGhhZCBhIHN1Y2Nlc3MgaW4gdGhlIHBhc3Rcblx0XHRcdFx0XHRcdGlmIChsYXN0Q2hlY2tTdWNjZXNzLm1pbiA9PT0gbGFzdENoZWNrU3VjY2Vzcy5tYXgpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGxhc3RDaGVja0ZhaWwpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBOYXJyb3dlZCBpdCBkb3duIHRvIGEgc2luZ2xlIG51bWJlciBidXQgZmFpbGVkIG9uIHJlLWNoZWNrLlxuXHRcdFx0XHRcdFx0XHRcdC8vIFRPRE86ICBCZSBzbWFydGVyIGFib3V0IGJhY2tncmFja2luZyBzaW5jZSB0aGUgc2l6ZSBoYXMgbGlrZWx5IG5vdCBjaGFuZ2VkIG11Y2hcblx0XHRcdFx0XHRcdFx0XHRjb250ZXh0Lmxhc3RDaGVja1N1Y2Nlc3MgPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRleHQubGFzdENoZWNrRmFpbCA9IG51bGw7XG5cdFx0XHRcdFx0XHRcdFx0bmV4dENoZWNrID0gc2NoZWR1bGVbMF07XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gVHJ5IGFnYWluIHRvIG1ha2Ugc3VyZVxuXHRcdFx0XHRcdFx0XHRcdG5leHRDaGVjayA9IGxhc3RDaGVja1N1Y2Nlc3M7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGxldCBzY2hlZHVsZUJyZWFrZG93biA9IGdlbmVyYXRlQ2hlY2tzSW5SYW5nZShsYXN0Q2hlY2tTdWNjZXNzLm1pbiwgbGFzdENoZWNrU3VjY2Vzcy5tYXgsIGxhc3RDaGVja0ZhaWwpO1xuXHRcdFx0XHRcdFx0XHRpZiAoc2NoZWR1bGVCcmVha2Rvd24ubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0XHRcdG5leHRDaGVjayA9IHNjaGVkdWxlQnJlYWtkb3duWzBdO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdC8vIE5hcnJvd2VkIGl0IGRvd24gdG8gYSBzaW5nbGUgbnVtYmVyIGJ1dCBmYWlsZWQgb24gcmUtY2hlY2suXG5cdFx0XHRcdFx0XHRcdFx0Ly8gVE9ETzogIEJlIHNtYXJ0ZXIgYWJvdXQgYmFja2dyYWNraW5nIHNpbmNlIHRoZSBzaXplIGhhcyBsaWtlbHkgbm90IGNoYW5nZWQgbXVjaFxuXHRcdFx0XHRcdFx0XHRcdGNvbnRleHQubGFzdENoZWNrU3VjY2VzcyA9IG51bGw7XG5cdFx0XHRcdFx0XHRcdFx0Y29udGV4dC5sYXN0Q2hlY2tGYWlsID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0XHRuZXh0Q2hlY2sgPSBzY2hlZHVsZVswXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChuZXh0Q2hlY2sgPT09IG51bGwpIHtcblx0XHRcdFx0XHRcdC8vIE9oIG9oLCBzdGFydCBhZ2FpbiBhdCB0aGUgYmVnaW5uaW5nXG5cdFx0XHRcdFx0XHRjb250ZXh0Lmxhc3RDaGVja0ZhaWwgPSBudWxsO1xuXHRcdFx0XHRcdFx0bmV4dENoZWNrID0gc2NoZWR1bGVbMF07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0bGV0IHNpemVCZXR3ZWVuUmVzdWx0OiBaeW5nYUluc3RhbnQuU2l6ZUJldHdlZW5SZXN1bHQgPVxuXHRcdFx0XHRcdFx0WnluZ2FJbnN0YW50LmNvbnRleHQuaXNTaXplQmV0d2VlbihuZXh0Q2hlY2subWluLCBuZXh0Q2hlY2subWF4KTtcblx0XHRcdFx0XHRpZiAoc2l6ZUJldHdlZW5SZXN1bHQubWluU2l6ZSA9PT0gbmV4dENoZWNrLm1pbiAmJiBzaXplQmV0d2VlblJlc3VsdC5tYXhTaXplID09PSBuZXh0Q2hlY2subWF4KSB7XG5cdFx0XHRcdFx0XHRsZXQgc2l6ZUNoZWNrUmVzdWx0OiBDb250ZXh0U2l6ZUNoZWNrID0ge1xuXHRcdFx0XHRcdFx0XHRtaW46IHNpemVCZXR3ZWVuUmVzdWx0Lm1pblNpemUsXG5cdFx0XHRcdFx0XHRcdG1heDogc2l6ZUJldHdlZW5SZXN1bHQubWF4U2l6ZSxcblx0XHRcdFx0XHRcdFx0Y2hlY2tUaW1lOiBuZXcgRGF0ZSgpXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0aWYgKHNpemVCZXR3ZWVuUmVzdWx0LmFuc3dlciA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdFx0XHRjb250ZXh0Lmxhc3RDaGVja0ZhaWwgPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRjb250ZXh0Lmxhc3RDaGVja1N1Y2Nlc3MgPSBzaXplQ2hlY2tSZXN1bHQ7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb250ZXh0Lmxhc3RDaGVja0ZhaWwgPSBzaXplQ2hlY2tSZXN1bHQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyBDaGVjayBmb3IgY29udGV4dCBwbGF5ZXIgY2hhbmdlcy5cblx0XHRcdC8vIEFueSBwbGF5ZXJzIHRoYXQgaGF2ZSBwbGF5ZWQgdGhlIGdhbWUgaW4gdGhlIGxhc3QgOTBcblx0XHRcdC8vIGRheXMsIGZyaWVuZCBvciBub3QsIHdpbGwgYmUgcmV0dXJuZWQgYnkgdGhpcyBjYWxsXG5cdFx0XHRaeW5nYUluc3RhbnQuY29udGV4dC5nZXRQbGF5ZXJzQXN5bmMoKS50aGVuKGZ1bmN0aW9uIChwbGF5ZXJzKSB7XG5cdFx0XHRcdGxldCBuZXdQbGF5ZXJJZHMgPSBwbGF5ZXJzLm1hcCgocGxheWVyOiBaeW5nYUluc3RhbnQuUGxheWVySW5mbykgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBwbGF5ZXIuZ2V0SUQoKTtcblx0XHRcdFx0fSkuc29ydCgpO1xuXHRcdFx0XHRsZXQgb2xkUGxheWVySWRzID0gY29udGV4dC5yZWNlbnRQbGF5ZXJzLnNvcnQoKTtcblx0XHRcdFx0aWYgKG5ld1BsYXllcklkcy5qb2luKCcsJykgIT09IG9sZFBsYXllcklkcy5qb2luKCcsJykpIHtcblx0XHRcdFx0XHRjb250ZXh0LnJlY2VudFBsYXllcnMgPSBuZXdQbGF5ZXJJZHM7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y2hlY2tTaXplKCk7XG5cdFx0XHR9LCBjaGVja1NpemUpO1xuXHRcdH0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gY29udGV4dENoZWNrKCkge1xuXHRFdmVudC5sYXN0KEV2ZW50cy5DT05URVhUUywgKGNvbnRleHRzOiBDb250ZXh0SGlzdG9yaWVzKSA9PiB7XG5cdFx0WnluZ2FJbnN0YW50LkV2ZW50Lmxhc3QoWnluZ2FJbnN0YW50LkV2ZW50cy5JTlNUQU5UX0ZCX1RPU19BQ0NFUFQpLnRoZW4oKCkgPT4ge1xuXHRcdFx0bGV0IG5ld0NvbnRleHRJZDogc3RyaW5nID0gWnluZ2FJbnN0YW50LmNvbnRleHQuZ2V0SUQoKTtcblx0XHRcdGxldCBzdXBwb3J0c1NpemVDaGVjazogYm9vbGVhbiA9IGluc3RhbnRGdW5jdGlvblN1cHBvcnRlZCgnY29udGV4dC5pc1NpemVCZXR3ZWVuJyk7XG5cdFx0XHRsZXQgY29udGV4dENoYW5nZXM6IGJvb2xlYW4gPSBmYWxzZTtcblx0XHRcdGxldCBjdXJyZW50Q29udGV4dEhpc3Rvcnk6IENvbnRleHRIaXN0b3J5ID0gbnVsbDtcblxuXHRcdFx0aWYgKG5ld0NvbnRleHRJZCAhPT0gbGFzdENvbnRleHRJZCkge1xuXHRcdFx0XHRsYXN0Q29udGV4dElkID0gbmV3Q29udGV4dElkO1xuXHRcdFx0XHRjb250ZXh0c1tuZXdDb250ZXh0SWRdID0gY3VycmVudENvbnRleHRIaXN0b3J5ID0gY29udGV4dHNbbmV3Q29udGV4dElkXSB8fCB7XG5cdFx0XHRcdFx0Y29udGV4dElkOiBuZXdDb250ZXh0SWQsXG5cdFx0XHRcdFx0dHlwZTogWnluZ2FJbnN0YW50LmNvbnRleHQuZ2V0VHlwZSgpLFxuXHRcdFx0XHRcdHJlY2VudFBsYXllcnM6IFtdLFxuXHRcdFx0XHRcdGxhc3RDaGVja1N1Y2Nlc3M6IG51bGwsXG5cdFx0XHRcdFx0bGFzdENoZWNrRmFpbDogbnVsbFxuXHRcdFx0XHR9O1xuXHRcdFx0XHR1cGRhdGVDb250ZXh0SGlzdG9yeShjdXJyZW50Q29udGV4dEhpc3RvcnkpXG5cdFx0XHRcdFx0LnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHBlcnNpc3RDb250ZXh0cyhjb250ZXh0cyk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQudGhlbigoKSA9PiB7XG5cdFx0XHRcdFx0XHRFdmVudC5maXJlKEV2ZW50cy5DT05URVhUX0NIQU5HRSwgY3VycmVudENvbnRleHRIaXN0b3J5KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIHBlcnNpc3RDb250ZXh0cyhjb250ZXh0czogQ29udGV4dEhpc3Rvcmllcykge1xuXHRsZXQgc2VyaWFsaXplZERhdGEgPSBoaXN0b3JpZXNTZXJpYWxpemUoY29udGV4dHMpO1xuXHRsZXQgd3JpdGVEYXRhID0ge307XG5cdHdyaXRlRGF0YVtDT05URVhUX0hJU1RPUllfS0VZXSA9IHNlcmlhbGl6ZWREYXRhO1xuXHRyZXR1cm4gWnluZ2FJbnN0YW50LkV2ZW50Lmxhc3QoWnluZ2FJbnN0YW50LkV2ZW50cy5JTlNUQU5UX0ZCX1RPU19BQ0NFUFQpLnRoZW4oKCkgPT4ge1xuXHRcdHJldHVybiBaeW5nYUluc3RhbnQucGxheWVyLnNldERhdGFBc3luYyh3cml0ZURhdGEpXG5cdFx0XHQudGhlbihaeW5nYUluc3RhbnQucGxheWVyLmZsdXNoRGF0YUFzeW5jKTtcblx0fSk7XG59XG5cblp5bmdhSW5zdGFudC5FdmVudC5sYXN0KFp5bmdhSW5zdGFudC5FdmVudHMuSU5TVEFOVF9GQl9UT1NfQUNDRVBULCAoKSA9PiB7XG5cdFp5bmdhSW5zdGFudC5wbGF5ZXIuZ2V0RGF0YUFzeW5jKFtDT05URVhUX0hJU1RPUllfS0VZXSkudGhlbigoZGF0YTogQ29udGV4dEhpc3RvcnlQYXlsb2FkKSA9PiB7XG5cdFx0bGV0IHNlcmlhbGl6ZWREYXRhID0gZGF0YVtDT05URVhUX0hJU1RPUllfS0VZXSB8fCAnJztcblx0XHRsZXQgaGlzdG9yaWVzID0gaGlzdG9yaWVzRGVzZXJpYWxpemUoc2VyaWFsaXplZERhdGEpO1xuXHRcdEV2ZW50LmZpcmUoRXZlbnRzLkNPTlRFWFRTLCBoaXN0b3JpZXMpO1xuXHRcdGNvbnRleHRDaGVjaygpO1xuXHRcdFp5bmdhSW5zdGFudC5FdmVudC5vbihaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfQ09OVEVYVF9JRF9DSEFOR0UsIGNvbnRleHRDaGVjayk7XG5cdH0pO1xufSwgdHJ1ZSk7XG4iLCIvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tbWVudC1mb3JtYXRcbi8vLzxhbWQtbW9kdWxlIG5hbWU9XCJaeW5nYUNvcmVcIi8+XG5mdW5jdGlvbiBhcHBseU1peGlucyhkZXJpdmVkQ3RvcjogYW55LCBiYXNlQ3RvcnM6IGFueVtdKSB7XG5cdGJhc2VDdG9ycy5mb3JFYWNoKChiYXNlQ3RvcikgPT4ge1xuXHRcdE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGJhc2VDdG9yLnByb3RvdHlwZSkuZm9yRWFjaCgobmFtZSkgPT4ge1xuXHRcdFx0ZGVyaXZlZEN0b3IucHJvdG90eXBlW25hbWVdID0gYmFzZUN0b3IucHJvdG90eXBlW25hbWVdO1xuXHRcdH0pO1xuXHR9KTtcbn1cbmV4cG9ydCB2YXIgWnluZ2FQcm9taXNlID0gUHJvbWlzZTtcblxuLyoqXG4gKiBFUzUgc2FmZSBPYmplY3QuYXNzaWduLiAgV2lsbCBmYWxsIGJhY2sgdG8gcG9seWZpbGwgaWYgbmVlZGVkXG4gKiBAcGFyYW0gdGFyZ2V0IFRhcmdldCBvYmplY3RcbiAqIEBwYXJhbSB2YXJBcmdzIEFueSBudW1iZXIgb2Ygb3RoZXIgb2JqZWN0c1xuICpcbiAqIE5vdGU6IFRha2VuIGZyb206XG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduI1BvbHlmaWxsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBPYmplY3RBc3NpZ24odGFyZ2V0OiBhbnksIC4uLnZhckFyZ3M6IGFueVtdKSB7IC8vIC5sZW5ndGggb2YgZnVuY3Rpb24gaXMgMlxuXHRpZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gPT09ICdmdW5jdGlvbicpIHtcblx0XHRyZXR1cm4gT2JqZWN0LmFzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9IGVsc2Uge1xuXHRcdGlmICh0YXJnZXQgPT0gbnVsbCkgeyAvLyBUeXBlRXJyb3IgaWYgdW5kZWZpbmVkIG9yIG51bGxcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuXHRcdH1cblxuXHRcdHZhciB0byA9IE9iamVjdCh0YXJnZXQpO1xuXG5cdFx0Zm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcblx0XHRcdHZhciBuZXh0U291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcblxuXHRcdFx0aWYgKG5leHRTb3VyY2UgIT0gbnVsbCkgeyAvLyBTa2lwIG92ZXIgaWYgdW5kZWZpbmVkIG9yIG51bGxcblx0XHRcdFx0Zm9yICh2YXIgbmV4dEtleSBpbiBuZXh0U291cmNlKSB7XG5cdFx0XHRcdFx0Ly8gQXZvaWQgYnVncyB3aGVuIGhhc093blByb3BlcnR5IGlzIHNoYWRvd2VkXG5cdFx0XHRcdFx0aWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXh0U291cmNlLCBuZXh0S2V5KSkge1xuXHRcdFx0XHRcdFx0dG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdG87XG5cdH1cbn1cblxuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmZpbmRcbmV4cG9ydCBmdW5jdGlvbiBBcnJheUZpbmQ8VD4odGFyZ2V0OiBUW10sIHByZWRpY2F0ZSk6IFQge1xuXHRpZiAodHlwZW9mIEFycmF5LnByb3RvdHlwZS5maW5kID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0Ly8gR2V0IGFyZ3MgbWludXMgZmlyc3QgYXJnIGFzIGFuIGFycmF5XG5cdFx0bGV0IGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHRcdHJldHVybiBBcnJheS5wcm90b3R5cGUuZmluZC5hcHBseSh0YXJnZXQsIGFyZ3MpO1xuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gMS4gTGV0IE8gYmUgPyBUb09iamVjdCh0aGlzIHZhbHVlKS5cblx0XHRpZiAodGFyZ2V0ID09IG51bGwpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ1widGFyZ2V0XCIgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpO1xuXHRcdH1cblxuXHRcdHZhciBvID0gT2JqZWN0KHRhcmdldCk7XG5cblx0XHQvLyAyLiBMZXQgbGVuIGJlID8gVG9MZW5ndGgoPyBHZXQoTywgXCJsZW5ndGhcIikpLlxuXHRcdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1iaXR3aXNlXG5cdFx0dmFyIGxlbiA9IG8ubGVuZ3RoID4+PiAwO1xuXG5cdFx0Ly8gMy4gSWYgSXNDYWxsYWJsZShwcmVkaWNhdGUpIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG5cdFx0aWYgKHR5cGVvZiBwcmVkaWNhdGUgIT09ICdmdW5jdGlvbicpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ3ByZWRpY2F0ZSBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblx0XHR9XG5cblx0XHQvLyA0LiBJZiB0aGlzQXJnIHdhcyBzdXBwbGllZCwgbGV0IFQgYmUgdGhpc0FyZzsgZWxzZSBsZXQgVCBiZSB1bmRlZmluZWQuXG5cdFx0dmFyIHRoaXNBcmcgPSBhcmd1bWVudHNbMl07XG5cblx0XHQvLyA1LiBMZXQgayBiZSAwLlxuXHRcdHZhciBrID0gMDtcblxuXHRcdC8vIDYuIFJlcGVhdCwgd2hpbGUgayA8IGxlblxuXHRcdHdoaWxlIChrIDwgbGVuKSB7XG5cdFx0XHQvLyBhLiBMZXQgUGsgYmUgISBUb1N0cmluZyhrKS5cblx0XHRcdC8vIGIuIExldCBrVmFsdWUgYmUgPyBHZXQoTywgUGspLlxuXHRcdFx0Ly8gYy4gTGV0IHRlc3RSZXN1bHQgYmUgVG9Cb29sZWFuKD8gQ2FsbChwcmVkaWNhdGUsIFQsIMKrIGtWYWx1ZSwgaywgTyDCuykpLlxuXHRcdFx0Ly8gZC4gSWYgdGVzdFJlc3VsdCBpcyB0cnVlLCByZXR1cm4ga1ZhbHVlLlxuXHRcdFx0dmFyIGtWYWx1ZSA9IG9ba107XG5cdFx0XHRpZiAocHJlZGljYXRlLmNhbGwodGhpc0FyZywga1ZhbHVlLCBrLCBvKSkge1xuXHRcdFx0XHRyZXR1cm4ga1ZhbHVlO1xuXHRcdFx0fVxuXHRcdFx0Ly8gZS4gSW5jcmVhc2UgayBieSAxLlxuXHRcdFx0aysrO1xuXHRcdH1cblxuXHRcdC8vIDcuIFJldHVybiB1bmRlZmluZWQuXG5cdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXZlbnRPYmplY3QoKSB7XG5cdHJldHVybiBuZXcgRXZlbnRNaXhpbigpO1xufVxuLyogUGFyc2VzIGFuIGphdmFzY3JpcHQgb2JqZWN0IENTUyByZXByZXNlbnRhdGlvbiBpbnRvIGEgcHJvcGVyIENTUyBzdHJpbmdcblx0KiBIYW5kbGVkIG5lc3RlZCBydWxlcy4gIExpa2UgbWVkaWEgcXVlcnkgZGVmaW5pdGlvbnNcblx0KiBBbGxvd3MgZm9yIGR1cGxpY2F0ZSB2YWx1ZXMgZm9yIHRoZSBzYW1lIGtleSB2aWEgdmFsdWUgYXJyYXlzLlxuXHQqIEV4YW1wbGU6XG5cdCpcdHtcblx0Klx0XHQnLmZvbyc6ICB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VsZWN0b3JzIGFyZSBvYmplY3QgcHJvcGVydHkgbmFtZXNcblx0Klx0XHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnOyAgICAgICAgICAgICAgICAgICAgLy8gQ1NTIHByb3BlcnRpZXMgYXJlIGFsc28gb2JqZWN0IHByb3BlcnR5IG5hbWVzXG5cdCpcdFx0XHRiYWNrZ3JvdW5kOiBbICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE11bHRpcGxlIHZhbHVlcyBmb3IgdGhlIHNhbWUgY3NzIHByb3BlcnR5IGFzIGFuIEFycmF5XG5cdCpcdFx0XHRcdCdyZ2JhKDE2NCwxNzksODcsMSknLFxuXHQqXHRcdFx0XHQnLW1vei1saW5lYXItZ3JhZGllbnQobGVmdCwgcmdiYSgxNjQsMTc5LDg3LDEpIDAlLCByZ2JhKDExNywxMzcsMTIsMSkgMTAwJSknLFxuXHQqXHRcdFx0XHQnLXdlYmtpdC1ncmFkaWVudChsZWZ0IHRvcCwgcmlnaHQgdG9wLCBjb2xvci1zdG9wKDAlLCByZ2JhKDE2NCwxNzksODcsMSkpLCBjb2xvci1zdG9wKDEwMCUsIHJnYmEoMTE3LDEzNywxMiwxKSkpJyxcblx0Klx0XHRcdFx0Jy13ZWJraXQtbGluZWFyLWdyYWRpZW50KGxlZnQsIHJnYmEoMTY0LDE3OSw4NywxKSAwJSwgcmdiYSgxMTcsMTM3LDEyLDEpIDEwMCUpJyxcblx0Klx0XHRcdFx0Jy1vLWxpbmVhci1ncmFkaWVudChsZWZ0LCByZ2JhKDE2NCwxNzksODcsMSkgMCUsIHJnYmEoMTE3LDEzNywxMiwxKSAxMDAlKScsXG5cdCpcdFx0XHRcdCctbXMtbGluZWFyLWdyYWRpZW50KGxlZnQsIHJnYmEoMTY0LDE3OSw4NywxKSAwJSwgcmdiYSgxMTcsMTM3LDEyLDEpIDEwMCUpJyxcblx0Klx0XHRcdFx0J2xpbmVhci1ncmFkaWVudCh0byByaWdodCwgcmdiYSgxNjQsMTc5LDg3LDEpIDAlLCByZ2JhKDExNywxMzcsMTIsMSkgMTAwJSknXG5cdCpcdFx0XHRdLFxuXHQqXHRcdH1cblx0Klx0XHQnQG1lZGlhIChtYXgtd2lkdGg6IDYwMHB4KSc6IHsgICAgICAgICAgICAvLyBNZWRpYSBxdWVyeSBleGFtcGxlXG5cdCpcdFx0XHQnLmZvbyc6IHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VsZWN0b3JzIGNhbiBiZSBjaGlsZHJlbiBvZiBvdGhlciBzZWxlY3RvcnNcblx0Klx0XHRcdFx0J2JhY2tncm91bmQtY29sb3InOiAncmVkJyAgICAgICAgICAgICAvLyBidXNpbmVzcyBhcyB1c3VhbFxuXHQqXHRcdFx0fVxuXHQqXHRcdH1cblx0KiB9XG5cdCovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDU1MoY3NzT2JqOiBhbnksIGluZGVudGF0aW9uPzogc3RyaW5nKTogc3RyaW5nIHtcblx0dmFyIGl0ZW1zID0gW107XG5cdHZhciBrZXk7XG5cdHZhciB2YWw7XG5cdHZhciBpO1xuXHRpbmRlbnRhdGlvbiA9IGluZGVudGF0aW9uIHx8ICcnO1xuXHRpbmRlbnRhdGlvbiA9IGluZGVudGF0aW9uICsgJ1xcdCc7XG5cblx0Zm9yIChrZXkgaW4gY3NzT2JqKSB7XG5cdFx0dmFsID0gY3NzT2JqW2tleV07XG5cdFx0aWYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KHZhbCkpIHtcblx0XHRcdGl0ZW1zLnB1c2goaW5kZW50YXRpb24gKyBrZXkgKyAnIHsnKTtcblx0XHRcdGl0ZW1zLnB1c2gocGFyc2VDU1ModmFsLCBpbmRlbnRhdGlvbikpO1xuXHRcdFx0aXRlbXMucHVzaChpbmRlbnRhdGlvbiArICd9Jyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICghQXJyYXkuaXNBcnJheSh2YWwpKSB7XG5cdFx0XHRcdHZhbCA9IFt2YWxdO1xuXHRcdFx0fVxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IHZhbC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpdGVtcy5wdXNoKGluZGVudGF0aW9uICsga2V5ICsgJzogJyArIHZhbFtpXSArICc7Jyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBpdGVtcy5qb2luKCdcXG4nKTtcbn1cblxuZXhwb3J0IGNsYXNzIEV2ZW50TWl4aW4ge1xuXHRwcml2YXRlIGhhbmRsZXJzID0ge307XG5cdHByaXZhdGUgbGFzdEFyZ3MgPSB7fTtcblxuXHQvLyBUdXJuIG9uIGFuIGV2ZW50IGhhbmRsZXIsIG9wdGlvbmFsbHk6ICBJc29sYXRlIGFuZC9vciBvbmx5IGNhbGwgb25jZVxuXHRwdWJsaWMgb24gPSAoZXZlbnROYW1lLCBldmVudEhhbmRsZXIsIGlzb2xhdGVIYW5kbGVyPzogYm9vbGVhbiwgb25jZT86IGJvb2xlYW4pID0+IHtcblx0XHR2YXIgaGFuZGxlcnMgPSB0aGlzLmdldEV2ZW50SGFuZGxlcnMoZXZlbnROYW1lKTtcblx0XHR2YXIgaGFuZGxlclBvc2l0aW9uID0gdGhpcy5nZXRIYW5kbGVyUG9zaXRpb24oZXZlbnRIYW5kbGVyLCBoYW5kbGVycyk7XG5cblx0XHRpZiAodHlwZW9mIGV2ZW50SGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignbm90IGEgZnVuY3Rpb24nKTtcblx0XHR9XG5cblx0XHQvLyBPbmx5IHJlZ2lzdGVyIHRoZSBoYW5kbGVyIGlmIGl0J3Mgbm90IGFscmVhZHkgcmVnaXN0ZXJlZFxuXHRcdGlmIChoYW5kbGVyUG9zaXRpb24gPT09IC0xKSB7XG5cdFx0XHRoYW5kbGVycy5wdXNoKHtcblx0XHRcdFx0Zm46IGV2ZW50SGFuZGxlciwgICAgICAgICAgICAgICAgICAvLyBUaGUgYWN0dWFsbCBoYW5kbGVyIChjYWxsYmFjaylcblx0XHRcdFx0aXNvbGF0ZTogaXNvbGF0ZUhhbmRsZXIgIT09IGZhbHNlLCAvLyBJc29sYXRlIHVubGVzcyB0b2xkIG5vdCB0b1xuXHRcdFx0XHRvbmNlOiBvbmNlID09PSB0cnVlICAgICAgICAvLyBPbmx5IGNhbGwgdGhlIGhhbmRsZXIgb25jZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gVHJ1biBvZmYgYW4gZXZlbnQgaGFuZGxlclxuXHRwdWJsaWMgb2ZmID0gKGV2ZW50TmFtZSwgZXZlbnRIYW5kbGVyKSA9PiB7XG5cdFx0dmFyIGhhbmRsZXJzID0gdGhpcy5nZXRFdmVudEhhbmRsZXJzKGV2ZW50TmFtZSk7XG5cdFx0dmFyIGhhbmRsZXJQb3NpdGlvbiA9IHRoaXMuZ2V0SGFuZGxlclBvc2l0aW9uKGV2ZW50SGFuZGxlciwgaGFuZGxlcnMpO1xuXG5cdFx0aWYgKGhhbmRsZXJQb3NpdGlvbiAhPT0gLTEpIHtcblx0XHRcdC8vIHJlbW92ZSBoYW5kbGVyXG5cdFx0XHRoYW5kbGVycy5zcGxpY2UoaGFuZGxlclBvc2l0aW9uLCAxKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgaXNvbGF0ZShmbikge1xuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7IC8vIENvbnZlcnQgaW50byBhY3R1YWwgYXJyYXlcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRmbi5hcHBseShmbiwgYXJncyk7XG5cdFx0XHR9LCAwKTsgLy8gbmljbzogdG9kbzogd2FzIHNldEltbWVkaWF0ZS4gY29uc2VxdWVuY2U/XG5cdFx0fTtcblx0fVxuXG5cdC8vIEZpcmUgYW4gZXZlbnQuXG5cdC8vIGFyZ3VtZW50c1swXSAgICAtIFRoZSBldmVudCBuYW1lXG5cdC8vIGFyZ3VtZW50c1sxLi5uXSAtIEFueSBhcmd1bWVudHMgeW91IHdhbnQgdG8gcGFzcyB0byB0aGUgaGFuZGxlcnNcblx0cHVibGljIGZpcmUgPSAoZXZlbnROYW1lLCAuLi5hcmdzKSA9PiB7XG5cdFx0dmFyIGhhbmRsZXJzID0gdGhpcy5nZXRFdmVudEhhbmRsZXJzKGV2ZW50TmFtZSk7XG5cdFx0dmFyIGhhbmRsZXJDb3VudCA9IGhhbmRsZXJzLmxlbmd0aDtcblx0XHR2YXIgaGFuZGxlcjtcblx0XHR2YXIgaGFuZGxlckZuO1xuXHRcdHZhciBpc29sYXRlZEZuO1xuXHRcdHZhciBpO1xuXHRcdHZhciByZW1vdmVIYW5kbGVycyA9IFtdO1xuXG5cdFx0dGhpcy5sYXN0QXJnc1tldmVudE5hbWVdID0gYXJncztcblxuXHRcdGZvciAoaSA9IDA7IGkgPCBoYW5kbGVyQ291bnQ7IGkrKykge1xuXHRcdFx0aGFuZGxlciA9IGhhbmRsZXJzW2ldO1xuXHRcdFx0aGFuZGxlckZuID0gaGFuZGxlci5mbjtcblx0XHRcdGlzb2xhdGVkRm4gPSBoYW5kbGVyLmlzb2xhdGUgPT09IHRydWUgPyB0aGlzLmlzb2xhdGUoaGFuZGxlckZuKSA6IGhhbmRsZXJGbjtcblxuXHRcdFx0aXNvbGF0ZWRGbi5hcHBseShoYW5kbGVyRm4sIGFyZ3MpO1xuXG5cdFx0XHRpZiAoaGFuZGxlci5vbmNlID09PSB0cnVlKSB7XG5cdFx0XHRcdHJlbW92ZUhhbmRsZXJzLnB1c2goaGFuZGxlckZuKTtcblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdC8vIE5vdyByZW1vdmUgc29tZSBoYW5kbGVycy4gIERvIHRoaXMgb3V0c2lkZSB0aGUgcHJldmlvdXMgbG9vcCBhcyBpdCdzIGRlc3RyY3V0aXZlIHRvIHRoZSBoYW5kbGVyIGFycmF5XG5cdFx0aGFuZGxlckNvdW50ID0gcmVtb3ZlSGFuZGxlcnMubGVuZ3RoO1xuXHRcdGZvciAoaSA9IDA7IGkgPCBoYW5kbGVyQ291bnQ7IGkrKykge1xuXHRcdFx0dGhpcy5vZmYoZXZlbnROYW1lLCByZW1vdmVIYW5kbGVyc1tpXSk7XG5cdFx0fVxuXHR9XG5cdC8vIFJlZ2lzdGVyIGFuIGV2ZW50IGhhbmRsZXIgYnV0IG1ha2Ugc3VyZSBpdCBvbmx5IGZpcmVzIG9uY2Vcblx0Ly8gQ2FuIGJlIGNhbGxlZCBpbiBcImNhbGxiYWNrXCIgbW9kZTpcblx0Ly8gICBvYmoub25jZSgnZm9vJywgZnVuY3Rpb24oeCkge2NvbnNvbGUubG9nKHgpO30sIGRvSXNvbGF0aW9uKTtcblx0Ly8gT3IgaW4gXCJQcm9taXNlXCIgbW9kZVxuXHQvLyAgIG9iai5vbmNlKCdmb28nLCBkb0lzb2xhdGlvbikudGhlbihmdW5jdGlvbiAoeCkgeyBjb25zb2xlLmxvZyh4KTsgfSk7XG5cdC8vIEJvdGggYXJlIHN1cHBvcnRlZFxuXHRwdWJsaWMgb25jZSA9IChldmVudE5hbWUsIGV2ZW50SGFuZGxlciwgaXNvbGF0ZUhhbmRsZXIpID0+IHtcblx0XHRpZiAodHlwZW9mIGV2ZW50SGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Ly8gV2Ugd2VyZSBjYWxsZWQgaW4gUHJvbWlzZSBtb2RlXG5cdFx0XHQvLyBTaGlmdCBpc29sYXRlSGFuZGVyIGFyZyAxIGxlZnRcblx0XHRcdGlzb2xhdGVIYW5kbGVyID0gZXZlbnRIYW5kbGVyO1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlPGFueT4oKHJlc29sdmUpID0+IHtcblx0XHRcdFx0dGhpcy5vbmNlKGV2ZW50TmFtZSwgZnVuY3Rpb24gKC4uLmFyZ3MpIHtcblx0XHRcdFx0XHQvLyByZXNvbHZlIG9ubHkgdGFrZXMgb25lIGFyZ3VtZW50IHNvIG1ha2Ugc3VyZSB3ZSBwYXNzIGFuIGFycmF5IG9mID4gMSBhcmd1bWVudCB3YXMgcHJvdmlkZWRcblx0XHRcdFx0XHR2YXIgYXJnID0gYXJncy5sZW5ndGggPiAxID8gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncykgOiBhcmdzWzBdO1xuXHRcdFx0XHRcdHJlc29sdmUoYXJnKTtcblx0XHRcdFx0fSwgaXNvbGF0ZUhhbmRsZXIpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMub24oZXZlbnROYW1lLCBldmVudEhhbmRsZXIsIGlzb2xhdGVIYW5kbGVyLCB0cnVlKTtcblx0XHR9XG5cdH1cblxuXHQvLyBSZWdpc3RlciBhbiBldmVudCBoYW5kbGVyIHRvIGJlIGNhbGxlZCB3aXRoIHRoZSBsYXN0IGV2ZW50IHZhbHVlLlxuXHQvLyBJZiB0aGUgZXZlbnQgaGFzIG5vdCBoYXBwZW5lZCB5ZXQgKGV2ZXIpIHRoZW4gdHJlYXQgYXMgLm9uY2UoKVxuXHQvLyBDYW4gYmUgY2FsbGVkIGluIFwiY2FsbGJhY2tcIiBtb2RlOlxuXHQvLyAgIG9iai5vbmNlKCdmb28nLCBmdW5jdGlvbih4KSB7Y29uc29sZS5sb2coeCk7fSwgZG9Jc29sYXRpb24pO1xuXHQvLyBPciBpbiBcIlByb21pc2VcIiBtb2RlXG5cdC8vICAgb2JqLm9uY2UoJ2ZvbycsIGRvSXNvbGF0aW9uKS50aGVuKGZ1bmN0aW9uICh4KSB7IGNvbnNvbGUubG9nKHgpOyB9KTtcblx0Ly8gQm90aCBhcmUgc3VwcG9ydGVkXG5cdHB1YmxpYyBsYXN0ID0gKGV2ZW50TmFtZSwgZXZlbnRIYW5kbGVyPywgaXNvbGF0ZUhhbmRsZXI/KSA9PiB7XG5cdFx0dmFyIGxhc3RBcmdzID0gdGhpcy5sYXN0QXJnc1tldmVudE5hbWVdO1xuXHRcdGlmICh0eXBlb2YgZXZlbnRIYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHQvLyBXZSB3ZXJlIGNhbGxlZCBpbiBQcm9taXNlIG1vZGVcblx0XHRcdC8vIFNoaWZ0IGlzb2xhdGVIYW5kZXIgYXJnIDEgbGVmdFxuXHRcdFx0aXNvbGF0ZUhhbmRsZXIgPSBldmVudEhhbmRsZXI7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSkgPT4ge1xuXHRcdFx0XHR0aGlzLmxhc3QoZXZlbnROYW1lLCBmdW5jdGlvbiAoLi4uYXJncykge1xuXHRcdFx0XHRcdC8vIHJlc29sdmUgb25seSB0YWtlcyBvbmUgYXJndW1lbnQgc28gbWFrZSBzdXJlIHdlIHBhc3MgYW4gYXJyYXkgb2YgPiAxIGFyZ3VtZW50IHdhcyBwcm92aWRlZFxuXHRcdFx0XHRcdHZhciBhcmcgPSBhcmdzLmxlbmd0aCA+IDEgPyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzKSA6IGFyZ3NbMF07XG5cdFx0XHRcdFx0cmVzb2x2ZShhcmcpO1xuXHRcdFx0XHR9LCBpc29sYXRlSGFuZGxlcik7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gV2Ugd2VyZSBjYWxsZWQgaW4gY2FsbGJhY2sgbW9kZVxuXHRcdFx0aWYgKGxhc3RBcmdzICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0Ly8gRXZlbnQgaGFzIGZpcmVkIGJlZm9yZS4gRmlyZSB3aXRoIHRob3NlIGFyZ3Ncblx0XHRcdFx0KGlzb2xhdGVIYW5kbGVyID09PSB0cnVlID8gdGhpcy5pc29sYXRlKGV2ZW50SGFuZGxlcikgOiBldmVudEhhbmRsZXIpLmFwcGx5KHVuZGVmaW5lZCwgbGFzdEFyZ3MpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5vbmNlKGV2ZW50TmFtZSwgZXZlbnRIYW5kbGVyLCBpc29sYXRlSGFuZGxlcik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGdldExhc3RGaXJlZFZhbHVlID0gKGV2ZW50TmFtZTogc3RyaW5nKSA9PiB7XG5cdFx0dmFyIGFyZ3MgPSB0aGlzLmxhc3RBcmdzW2V2ZW50TmFtZV07XG5cdFx0cmV0dXJuIGFyZ3MgPyBhcmdzWzBdIDogYXJncztcblx0fVxuXG5cdHB1YmxpYyBjbGVhckxhc3RGaXJlZFZhbHVlID0gKGV2ZW50TmFtZTogc3RyaW5nKSA9PiB7XG5cdFx0ZGVsZXRlIHRoaXMubGFzdEFyZ3NbZXZlbnROYW1lXTtcblx0fVxuXG5cdC8vIFJlZ2lzdGVyIGFuIGV2ZW50IGhhbmRsZXIgdG8gYmUgY2FsbGVkIHdpdGggdGhlIGxhc3QgZXZlbnQgdmFsdWUgQU5EIGFueSBhZnRlciB0aGF0LlxuXHQvLyBJZiB0aGUgZXZlbnQgaGFzIG5vdCBoYXBwZW5lZCB5ZXQgdGhlbiB0aGlzIHNob3VsZCBiZSBtdWNoIGxpa2UgXCJvblwiXG5cdHB1YmxpYyBhbGwgPSAoZXZlbnROYW1lLCBldmVudEhhbmRsZXIsIGlzb2xhdGVIYW5kbGVyKSA9PiB7XG5cdFx0dmFyIGFyZ3MgPSB0aGlzLmxhc3RBcmdzW2V2ZW50TmFtZV07XG5cdFx0aWYgKHR5cGVvZiBldmVudEhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdGlmIChhcmdzICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0Ly8gV2UndmUgYmVlbiBjYWxsZWQgYmVmb3JlXG5cdFx0XHRcdChpc29sYXRlSGFuZGxlciA9PT0gdHJ1ZSA/IHRoaXMuaXNvbGF0ZShldmVudEhhbmRsZXIpIDogZXZlbnRIYW5kbGVyKS5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gQWxzbyByZWdpc3RlciBmb3IgYWxsIHVwY29taW5nIGV2ZW50c1xuXHRcdFx0dGhpcy5vbihldmVudE5hbWUsIGV2ZW50SGFuZGxlciwgaXNvbGF0ZUhhbmRsZXIpO1xuXHRcdH1cblx0fVxuXG5cdC8vIEdldCBhcnJheSBvZiBldmVudCBoYW5kbGVycy5cblx0Ly8gU2lkZSBFZmZlY3RzOiAgQ3JlYXRlcyBlbXB0eSBoYW5kbGVyIGxpc3QgaWYgbm9uIGV4aXN0LlxuXHRwcml2YXRlIGdldEV2ZW50SGFuZGxlcnMoZXZlbnROYW1lKSB7XG5cdFx0dmFyIGV2ZW50SGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzW2V2ZW50TmFtZV0gPSB0aGlzLmhhbmRsZXJzW2V2ZW50TmFtZV0gfHwgW107XG5cdFx0cmV0dXJuIGV2ZW50SGFuZGxlcnM7XG5cdH1cblxuXHQvLyBHZXQgdGhlIHBvc2l0aW9uIG9mIGEgc3BlY2lmaWMgaGFuZGxlciBmdW5jdGlvbiBmb3IgYW4gZXZlbnRcblx0cHJpdmF0ZSBnZXRIYW5kbGVyUG9zaXRpb24oZXZlbnRIYW5kbGVyLCBoYW5kbGVycykge1xuXHRcdHZhciBpO1xuXHRcdHZhciBsZW4gPSBoYW5kbGVycy5sZW5ndGg7XG5cdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoaGFuZGxlcnNbaV0uZm4gPT09IGV2ZW50SGFuZGxlcikge1xuXHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIC0xO1xuXHR9XG5cbn1cbiIsIi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21tZW50LWZvcm1hdFxuLy8vPGFtZC1tb2R1bGUgbmFtZT1cIlp5bmdhRGVidWdcIi8+XG5pbXBvcnQgKiBhcyBaeW5nYSBmcm9tICcuL1p5bmdhJztcbmltcG9ydCAqIGFzIFp5bmdhQWNjb3VudCBmcm9tICcuL1p5bmdhQWNjb3VudCc7XG5pbXBvcnQgeyBsb2dDb3VudCB9IGZyb20gJy4vWnluZ2FBbmFseXRpY3MnO1xuaW1wb3J0ICogYXMgWnluZ2FOZXQgZnJvbSAnLi9aeW5nYU5ldCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERlYnVnIHtcblx0cHVibGljIHN0YXRpYyBsb2dTdHJpbmdzID0gW107XG5cblx0cHVibGljIHN0YXRpYyBlbmFibGVkOiBib29sZWFuID0gdHJ1ZTtcblxuXHQvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dmFyaWFibGUtbmFtZVxuXHRwdWJsaWMgc3RhdGljIHN5c3RlbV9jb25zb2xlX2Vycm9yOiBhbnk7XG5cblx0cHVibGljIHN0YXRpYyBpbml0KCkge1xuXHRcdHdpbmRvdy5vbmVycm9yID0gZnVuY3Rpb24gKG1zZywgdXJsLCBsaW5lLCBjb2wsIGVycm9yKSB7XG5cdFx0XHQvLyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBhbGwgYnJvd3NlcnNcblx0XHRcdHZhciBjb2xTdHJpbmcgPSAhY29sID8gJycgOiAnXFxuY29sdW1uOiAnICsgY29sO1xuXHRcdFx0dmFyIGVycm9yU3RyaW5nID0gIWVycm9yID8gJycgOiAnXFxuZXJyb3I6ICcgKyBlcnJvcjtcblxuXHRcdFx0RGVidWcubG9nRXJyb3IoYEVycm9yOiAke21zZ31cXG51cmw6ICR7dXJsfVxcbmxpbmU6ICR7bGluZX0ke2NvbFN0cmluZ30ke2Vycm9yU3RyaW5nfWApO1xuXG5cdFx0XHQvLyByZXR1cm4gdHJ1ZSBzdXByZXNzZXMgYWxlcnQgZGlhbG9nc1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fTtcblxuXHRcdGNvbnNvbGVbJ3NhdmUnXSA9IGZ1bmN0aW9uIChkYXRhLCBmaWxlbmFtZSkge1xuXHRcdFx0aWYgKCFkYXRhKSB7XG5cdFx0XHRcdERlYnVnLmxvZ0Vycm9yKCdDb25zb2xlLnNhdmU6IE5vIGRhdGEnKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIWZpbGVuYW1lKSB7XG5cdFx0XHRcdGZpbGVuYW1lID0gJ2NvbnNvbGUuanNvbic7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0ZGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIHVuZGVmaW5lZCwgNCk7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBibG9iID0gbmV3IEJsb2IoW2RhdGFdLCB7IHR5cGU6ICd0ZXh0L2pzb24nIH0pO1xuXHRcdFx0dmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudHMnKTtcblx0XHRcdHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXG5cdFx0XHRhLmRvd25sb2FkID0gZmlsZW5hbWU7XG5cdFx0XHRhLmhyZWYgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblx0XHRcdGEuZGF0YXNldC5kb3dubG9hZHVybCA9IFsndGV4dC9qc29uJywgYS5kb3dubG9hZCwgYS5ocmVmXS5qb2luKCc6Jyk7XG5cdFx0XHRlLmluaXRNb3VzZUV2ZW50KCdjbGljaycsIHRydWUsIGZhbHNlLCB3aW5kb3csIDAsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBudWxsKTtcblx0XHRcdGEuZGlzcGF0Y2hFdmVudChlKTtcblx0XHR9O1xuXG5cdFx0aWYgKFByb21pc2VbJ19zZXRVbmhhbmRsZWRSZWplY3Rpb25GbiddKSB7XG5cdFx0XHRQcm9taXNlWydfc2V0VW5oYW5kbGVkUmVqZWN0aW9uRm4nXShEZWJ1Zy51bmhhbmRsZWRSZWplY3QpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJywgZnVuY3Rpb24gKGV2ZW50OiBhbnkpIHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0RGVidWcudW5oYW5kbGVkUmVqZWN0KGV2ZW50LnJlYXNvbik7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyB0b2RvOiBJIGNhbid0IHRlc3QgdGhpcy5cblx0XHRpZiAod2luZG93WydaeW5nYUNvcmUnXSAmJiB3aW5kb3dbJ1p5bmdhQ29yZSddWydQcm9taXNlJ10pIHtcblx0XHRcdHdpbmRvd1snWnluZ2FDb3JlJ11bJ1Byb21pc2UnXVsnX3NldFVuaGFuZGxlZFJlamVjdGlvbkZuJ10oRGVidWcudW5oYW5kbGVkUmVqZWN0KTtcblx0XHR9XG5cblx0XHREZWJ1Zy5zeXN0ZW1fY29uc29sZV9lcnJvciA9IGNvbnNvbGUuZXJyb3I7XG5cblx0XHQvLyByZWRpcmVjdCBjb25zb2xlLmVycm9yIHRvIG91ciBsb2cgZnVuY1xuXHRcdGNvbnNvbGUuZXJyb3IgPSBEZWJ1Zy5sb2dFcnJvcjtcblx0fVxuXG5cdC8vIGZvciB0aGluZ3MgeW91IHdhbnQgdG8gcHVzaCB0byB0aGUgbG9nIHN0cmVhbSwgYnV0IG5vdCBzZWUgYXMgbmFzdHkgZXJyb3IgdGV4dCBpbiB0aGUgY29uc29sZS5cblx0cHVibGljIHN0YXRpYyBsb2coZGF0YSkge1xuXHRcdGlmIChEZWJ1Zy5lbmFibGVkKSB7XG5cdFx0XHRpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG5cdFx0XHRcdGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGRhdGEsIHVuZGVmaW5lZCwgNCkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcblx0XHRcdFx0Y29uc29sZS5sb2coZGF0YSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0RGVidWcubG9nU3RyaW5ncy5wdXNoKGRhdGEpO1xuXHR9XG5cblx0Ly8gdGhpcyBzaG91bGQgYmUgZXhhY3RseSBsaWtlIGNhbGxpbmcgY29uc29sZS5lcnJvcjtcblx0cHVibGljIHN0YXRpYyBsb2dFcnJvciguLi5hcmdzKSB7XG5cdFx0RGVidWcuc3lzdGVtX2NvbnNvbGVfZXJyb3IuYXBwbHkoY29uc29sZSwgYXJncyk7XG5cblx0XHREZWJ1Zy5sb2dTdHJpbmdzLnB1c2goYXJncyk7XG5cblx0XHR2YXIgbWVzc2FnZSA9ICcnO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRhdGEgPSBhcmdzW2ldO1xuXHRcdFx0bWVzc2FnZSArPSAoaSA+IDAgPyAnLCBbJyArIChpIC0gMSkgKyAnXSAnIDogJycpO1xuXHRcdFx0aWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGlmIChkYXRhIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdFx0XHRcdG1lc3NhZ2UgKz0gKGRhdGEuc3RhY2sgfHwgZGF0YS50b1N0cmluZygpKTsgLy8gdGhpcyBpcyBodGUgYmVzdCB3YXkgdG8gc2VyaWFsaXplIGVycm9yIG9iamVjdHM/XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG1lc3NhZ2UgKz0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgdW5kZWZpbmVkLCA0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRtZXNzYWdlICs9IGRhdGE7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1lc3NhZ2UgKz0gZGF0YTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTZW5kIHRvIGxvZyBzZXJ2aWNlXG5cdFx0RGVidWcubG9nQ2FsbCgnZXJyb3InLCB7IG1lc3NhZ2U6IG1lc3NhZ2UgfSwgbnVsbCk7XG5cblx0XHQvLyBTZW5kIHRvIHN0YXRzXG5cdFx0bG9nQ291bnQoe1xuXHRcdFx0Y291bnRlcjogJ3BlcmZvcm1hbmNlJyxcblx0XHRcdGtpbmdkb206ICdlcnJvcicsXG5cdFx0XHRnZW51czogbWVzc2FnZVxuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBkb3dubG9hZExvZyhsb2dOYW1lKSB7XG5cdFx0aWYgKGxvZ05hbWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0bG9nTmFtZSA9ICdjb25zb2xlTG9nLnR4dCc7XG5cdFx0fSBlbHNlIGlmIChsb2dOYW1lLmluZGV4T2YoJy50eHQnKSA9PT0gLTEpIHtcblx0XHRcdGxvZ05hbWUgKz0gJy50eHQnO1xuXHRcdH1cblx0XHRjb25zb2xlWydzYXZlJ10oRGVidWcubG9nU3RyaW5ncywgbG9nTmFtZSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGxvZ0NhbGwobGV2ZWw6IHN0cmluZywgZGF0YTogYW55LCBvcHRpb25zPzogWnluZ2FOZXQuQXBpT3B0aW9ucykge1xuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdFByb21pc2UuYWxsKFtcblx0XHRcdFp5bmdhLkV2ZW50Lmxhc3QoWnluZ2EuRXZlbnRzLkFQUF9JRCksXG5cdFx0XHRaeW5nYUFjY291bnQuRXZlbnQubGFzdChaeW5nYUFjY291bnQuRXZlbnRzLkFDQ09VTlRfREVUQUlMUylcblx0XHRdKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG5cdFx0XHR2YXIgYXBwSWQgPSByZXN1bHRzWzBdO1xuXHRcdFx0dmFyIGFjY291bnREZXRhaWxzID0gcmVzdWx0c1sxXTtcblx0XHRcdG9wdGlvbnMudXNlVG9rZW4gPSBhY2NvdW50RGV0YWlscy50b2tlbjtcblx0XHRcdG9wdGlvbnMuYm9keSA9IGRhdGE7XG5cdFx0XHRyZXR1cm4gWnluZ2FOZXQuYXBpKCdQT1NUJywgJy9sb2cvdjEvYXBwLycgKyBhcHBJZCArICcvbGV2ZWwvJyArIGxldmVsLCBvcHRpb25zKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiAoZSkge1xuXHRcdFx0Ly8ganVzdCBlYXQgaXQuXG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIHVuaGFuZGxlZFJlamVjdChlcnJvcikge1xuXHRcdGVycm9yID0gZXJyb3IgfHwgJ3Vua25vd25fcmVqZWN0aW9uJztcblx0XHREZWJ1Zy5sb2dFcnJvcihlcnJvcik7XG5cdH1cbn1cbiIsIi8vLzxhbWQtbW9kdWxlIG5hbWU9XCJaeW5nYUhvbWVTY3JlZW5cIi8+XG5cbmltcG9ydCAqIGFzIFdhbGxldENvbnRyYWN0cyBmcm9tICdBVEctVHVybnMnXG5pbXBvcnQgKiBhcyBaeW5nYVdhbGxldCBmcm9tICcuL1p5bmdhV2FsbGV0J1xuXG5leHBvcnQgdmFyIGN1cnJlbmN5Q29uZmlnID0ge1xuXHRjYXNoSXRlbUlkOiBcImNhc2hcIixcblx0aG9tZXBhZ2VEcmlwSWQ6IFwiZGFpbHlfZHJpcFwiXG59XG5cblxuXG4vLyBuZWVkcyB0byBiZSBleHBvc2VkIHRvIGJlIGN1c3RvbWl6YWJsZS5cbmNvbnN0IGZhZGVPdXRSYXRlID0gMjtcbmNvbnN0IGZhZGVJblJhdGUgPSAwLjU7XG5jb25zdCBtYXhCbGFjayA9IDAuNztcblxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4UGFnZSgpIHtcblx0cmV0dXJuIHtcblx0XHRyb290OiA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJob21lc2NyZWVuLWNvbnRhaW5lclwiKSxcblx0XHRpbm5lcl9yb290OiA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJob21lc2NyZWVuLWlubmVyXCIpLFxuXHRcdGNhc2g6IDxIVE1MUGFyYWdyYXBoRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhc2gtYW10XCIpLFxuXHRcdGhpZ2hzY29yZTogPEhUTUxQYXJhZ3JhcGhFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NvcmUtYW10LWJlc3RcIiksXG5cdFx0c2NvcmU6IDxIVE1MUGFyYWdyYXBoRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjb3JlLWFtdFwiKSxcblx0XHRsb2dvOiA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dvXCIpLFxuXHRcdGdhbWVfbW9kZV9idG46IDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWUtbW9kZVwiKSxcblx0XHRwbGF5X2J0bjogPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheS1idG5cIiksXG5cblx0XHRkYWlseV9kcmlwOiA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYWlseS1kcmlwXCIpLFxuXHRcdGRhaWx5X2RyaXBfaWNvbjogPEhUTUxJbWFnZUVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYWlseS1kcmlwLWljb25cIiksXG5cdFx0ZGFpbHlfZHJpcF9jb3VudGRvd246IDxIVE1MUGFyYWdyYXBoRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRhaWx5LWRyaXAtY291bnRkb3duXCIpLFxuXG5cdH1cblxufVxuXG4vLyB0b2RvOiBpcyB0aGlzIGxvY2FsZS1hcHByb3ByaWF0ZT9cbmV4cG9ydCBmdW5jdGlvbiBzZWNvbmRzVG9TdHJpbmcodGltZXNwYW5fczogbnVtYmVyKSB7XG5cdHZhciBkYXRlID0gbmV3IERhdGUobnVsbCk7XG5cdGRhdGUuc2V0U2Vjb25kcyh0aW1lc3Bhbl9zKTtcblx0cmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKS5zdWJzdHIoMTEsIDgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmluZENhbGxiYWNrcygpIHtcblx0ZGF0YS5wYWdlSW5kZXguZGFpbHlfZHJpcC5vbmNsaWNrID0gY2FsbGJhY2tzLm9uRGFpbHlEcmlwQ29sbGVjdDtcblx0ZGF0YS5wYWdlSW5kZXgucGxheV9idG4ub25jbGljayA9IGNhbGxiYWNrcy5vblBsYXk7XG59XG5cbmZ1bmN0aW9uIGRhaWx5RHJpcENvbGxlY3QoZXY6IE1vdXNlRXZlbnQpIHtcblx0Ly8gdG9kbzogaW5kaWNhdGUgcHJvY2Vzc2luZyBvbiB0aGUgYnV0dG9uLlxuXHRkYXRhLnBhZ2VJbmRleC5kYWlseV9kcmlwLm9uY2xpY2sgPSBudWxsO1xuXG5cdGRhdGEucGFnZUluZGV4LmRhaWx5X2RyaXBfY291bnRkb3duLmlubmVyVGV4dCA9IFwiLS1cIjtcblxuXHRaeW5nYVdhbGxldC5jbGFpbURyaXAoeyBkcmlwX2lkOiBjdXJyZW5jeUNvbmZpZy5ob21lcGFnZURyaXBJZCwgdHJ5X2dldDogdHJ1ZSB9KS50aGVuKHIgPT4ge1xuXHRcdGNhbGxiYWNrcy5vblJlZnJlc2hVSSgpO1xuXG5cdFx0ZGF0YS5wYWdlSW5kZXguZGFpbHlfZHJpcC5vbmNsaWNrID0gY2FsbGJhY2tzLm9uRGFpbHlEcmlwQ29sbGVjdDtcblx0fSk7XG59XG5cbi8vIHRoaXMgaXMgc3RhcnRpbmcgdG8gbG9vayBhbG90IGxpa2UgcmVhY3QuXG5leHBvcnQgaW50ZXJmYWNlIFByb3BzIHtcblx0d2FsbGV0OiBXYWxsZXRDb250cmFjdHMuV2FsbGV0QmFzZSxcblx0c2NvcmU6IG51bWJlcixcblx0aGlnaHNjb3JlOiBudW1iZXJcbn1cblxuXG4vLyBleHRlbmQ6IG92ZXJyaWRlIG1lIGFuZCBzZXQgbmV3IGluc3RhbmNlIG9uIGRhdGEucHJvcHMuXG5leHBvcnQgY2xhc3MgRGVmYXVsdFByb3BzIGltcGxlbWVudHMgUHJvcHMge1xuXHRnZXQgd2FsbGV0KCk6IFdhbGxldENvbnRyYWN0cy5XYWxsZXRCYXNlIHtcblx0XHRyZXR1cm4gWnluZ2FXYWxsZXQuY2FjaGVkV2FsbGV0O1xuXHR9XG5cblx0Z2V0IHNjb3JlKCkgeyByZXR1cm4gMCB9O1xuXHRnZXQgaGlnaHNjb3JlKCkgeyByZXR1cm4gMCB9O1xufVxuXG4vLyBzZXQgd2l0aCB0aGUgcmlnaHQgZGF0YSwgdGhlbiBjYWxsIHNob3coKVxuZXhwb3J0IHZhciBkYXRhID0ge1xuXHRpdGVtQ2F0YWxvZzogPFp5bmdhV2FsbGV0Lkl0ZW1DYXRhbG9nVHlwZT5udWxsLFxuXHRkcmlwQ2F0YWxvZzogPFp5bmdhV2FsbGV0LkRyaXBDYXRhbG9nVHlwZT5udWxsLFxuXHRwcm9wczogbmV3IERlZmF1bHRQcm9wcygpLFxuXHRwYWdlSW5kZXg6IGluZGV4UGFnZSgpXG59XG5cbi8vIG92ZXJyaWRlIHRoZXNlIHdpdGggeW91ciBvd24gaW1wbGVtZW5hdGlvbnMgaWYgeW91IG5lZWQgdG8gY2hhbmdlIHNvbWV0aGluZy5cbi8vIGlmIHlvdSBjaGFuZ2UgdGhlc2UsIGNhbGwgXCJiaW5kRGVmYXVsdENhbGxiYWNrcygpXCJcbmV4cG9ydCB2YXIgY2FsbGJhY2tzID0ge1xuXHRvblJlZnJlc2hVSTogcmVmcmVzaFVJLFxuXHRvbkRhaWx5RHJpcENvbGxlY3Q6IGRhaWx5RHJpcENvbGxlY3QsXG5cdG9uUGxheTogaGlkZVxufVxuXG5iaW5kQ2FsbGJhY2tzKCk7XG52YXIgZmFkZUluQW1vdW50ID0gMTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZnJlc2hVSSgpIHtcblx0aWYgKGRhdGEucHJvcHMud2FsbGV0ICYmIGRhdGEuaXRlbUNhdGFsb2cgJiYgZGF0YS5kcmlwQ2F0YWxvZykge1xuXHRcdHZhciBub3dfdHMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0XHRsZXQgd2FsbGV0ID0gZGF0YS5wcm9wcy53YWxsZXQ7XG5cblx0XHR2YXIgY2FzaCA9IHdhbGxldC5pdGVtc1tjdXJyZW5jeUNvbmZpZy5jYXNoSXRlbUlkXSB8fCAwO1xuXHRcdGRhdGEucGFnZUluZGV4LmNhc2guaW5uZXJUZXh0ID0gYCR7Y2FzaH1gO1xuXG5cdFx0dmFyIGRyaXBTdGF0dXMgPSBaeW5nYVdhbGxldC5jYWxjdWxhdGVEcmlwU3RhdHVzKGRhdGEuZHJpcENhdGFsb2csIG5vd190cywgY3VycmVuY3lDb25maWcuaG9tZXBhZ2VEcmlwSWQsIHdhbGxldCk7XG5cblx0XHQvLyBkbyBzb21ldGhpbmcgdG8gc2hvdyB0aGUgcHJpemUgaXRlbSEgXG5cdFx0Ly8gZHJpcFN0YXR1cy5wcml6ZV9pdGVtXG5cdFx0ZGF0YS5wYWdlSW5kZXguZGFpbHlfZHJpcF9jb3VudGRvd24uaW5uZXJUZXh0ID0gc2Vjb25kc1RvU3RyaW5nKGRyaXBTdGF0dXMudGltZV9yZW1haW5pbmdfcyk7XG5cdH1cblxuXHRkYXRhLnBhZ2VJbmRleC5oaWdoc2NvcmUuaW5uZXJUZXh0ID0gYCR7ZGF0YS5wcm9wcy5oaWdoc2NvcmV9YDtcblx0ZGF0YS5wYWdlSW5kZXguc2NvcmUuaW5uZXJUZXh0ID0gYCR7ZGF0YS5wcm9wcy5zY29yZX1gO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Zpc2libGUoKSB7XG5cdHJldHVybiB0YXJnZXRWaXNpYmxlO1xufVxuXG5mdW5jdGlvbiBpc1Jvb3RWaXNpYmxlKCkge1xuXHRyZXR1cm4gZGF0YS5wYWdlSW5kZXgucm9vdC5zdHlsZS5kaXNwbGF5ICE9PSBcIm5vbmVcIjtcbn1cblxuZnVuY3Rpb24gaXNJbm5lclJvb3RWaXNpYmxlKCkge1xuXHRyZXR1cm4gZGF0YS5wYWdlSW5kZXguaW5uZXJfcm9vdC5zdHlsZS5kaXNwbGF5ICE9PSBcIm5vbmVcIjtcbn1cblxuZnVuY3Rpb24gZmFkZUluKGR0OiBudW1iZXIpIHtcblx0ZmFkZUluQW1vdW50ICs9IGZhZGVJblJhdGUgKiBkdDtcblx0ZmFkZUluQW1vdW50ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4obWF4QmxhY2ssIGZhZGVJbkFtb3VudCkpO1xuXG5cdGlmIChmYWRlSW5BbW91bnQgPiAwICYmICFpc1Jvb3RWaXNpYmxlKCkpIHtcblx0XHRkYXRhLnBhZ2VJbmRleC5yb290LnN0eWxlLmRpc3BsYXkgPSBudWxsOyAvLyBkZWZhdWx0P1xuXHR9XG5cdGlmIChmYWRlSW5BbW91bnQgPj0gbWF4QmxhY2sgJiYgIWlzSW5uZXJSb290VmlzaWJsZSgpKSB7XG5cdFx0ZGF0YS5wYWdlSW5kZXguaW5uZXJfcm9vdC5zdHlsZS5kaXNwbGF5ID0gbnVsbDsgLy8gZGVmYXVsdD9cblx0fVxuXHRkYXRhLnBhZ2VJbmRleC5yb290LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGByZ2JhKDAsMCwwLCR7ZmFkZUluQW1vdW50fSlgO1xufVxuXG5mdW5jdGlvbiBmYWRlT3V0KGR0OiBudW1iZXIpIHtcblx0ZmFkZUluQW1vdW50IC09IGZhZGVPdXRSYXRlICogZHQ7XG5cdGZhZGVJbkFtb3VudCA9IE1hdGgubWluKG1heEJsYWNrLCBNYXRoLm1heCgwLCBmYWRlSW5BbW91bnQpKTtcblxuXHRpZiAoZmFkZUluQW1vdW50IDwgbWF4QmxhY2sgJiYgaXNJbm5lclJvb3RWaXNpYmxlKCkpIHtcblx0XHQvLyBoaWRlIGlubmVyIGd1dHMgZmlyc3Rcblx0XHRkYXRhLnBhZ2VJbmRleC5pbm5lcl9yb290LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0fVxuXHRpZiAoZmFkZUluQW1vdW50IDw9IDApIHtcblx0XHQvLyB0aGVuIGhpZGUgdGhlIHdob2xlIHRoaW5nLlxuXHRcdGRhdGEucGFnZUluZGV4LnJvb3Quc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHR9XG5cdGRhdGEucGFnZUluZGV4LnJvb3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYHJnYmEoMCwwLDAsJHtmYWRlSW5BbW91bnR9KWA7XG59XG5cbnZhciB0YXJnZXRWaXNpYmxlID0gdHJ1ZTtcbmV4cG9ydCBmdW5jdGlvbiBoaWRlKCkge1xuXHR0YXJnZXRWaXNpYmxlID0gZmFsc2U7XG5cdHByZXZfdHMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0YW5pbWF0ZSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvdygpIHtcblx0dGFyZ2V0VmlzaWJsZSA9IHRydWU7XG5cdHByZXZfdHMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0YW5pbWF0ZSgpO1xufVxuXG4vLyBvbmx5IHB1bXAgYW5pbWF0aW9uIGxvb3Agd2hpbGUgdmlzaWJsZS5cbmxldCBwcmV2X3RzID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5leHBvcnQgZnVuY3Rpb24gYW5pbWF0ZSgpIHtcblx0bGV0IG5vd190cyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHRsZXQgZHQgPSAobm93X3RzIC0gcHJldl90cykgLyAxMDAwOyAvLyBzZWNvbmRzLlxuXHRwcmV2X3RzID0gbm93X3RzO1xuXG5cdGlmICh0YXJnZXRWaXNpYmxlKSB7XG5cdFx0ZmFkZUluKGR0KTtcblx0fVxuXHRlbHNlIHtcblx0XHRmYWRlT3V0KGR0KTtcblx0fVxuXG5cdGlmIChpc0lubmVyUm9vdFZpc2libGUoKSkge1xuXHRcdC8vIHVwZGF0ZSBkYXRhIG1vZGVsIGhlcmUuXG5cdFx0cmVmcmVzaFVJKCk7XG5cdH1cblxuXHRpZiAodGFyZ2V0VmlzaWJsZSA/IGZhZGVJbkFtb3VudCA8IG1heEJsYWNrIDogZmFkZUluQW1vdW50ID4gMCkge1xuXHRcdC8vIGN1cnJlbnRseSBmYWRpbmcsIG5lZWQgZmFzdCB1cGRhdGUuXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdGlmIChpc0lubmVyUm9vdFZpc2libGUoKSkge1xuXHRcdFx0c2V0VGltZW91dChhbmltYXRlLCAxMDAwKTtcblx0XHR9XG5cdH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZUxvZ29BbmRUaXRsZSgpIHtcblx0ZGF0YS5wYWdlSW5kZXgubG9nby5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbn1cbiIsIi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21tZW50LWZvcm1hdFxuLy8vPGFtZC1tb2R1bGUgbmFtZT1cIlp5bmdhSW5zdGFudFwiLz5cbid1c2Ugc3RyaWN0JztcbmltcG9ydCBaeW5nYSA9IHJlcXVpcmUoJy4vWnluZ2EnKTtcbmltcG9ydCBaeW5nYUNvcmUgPSByZXF1aXJlKCcuL1p5bmdhQ29yZScpO1xuXG5leHBvcnQgdHlwZSBjb250ZXh0RmlsdGVyID0gJ05FV19DT05URVhUX09OTFknOyAvLyB8ICd4JyB8ICd5J1xuXG5leHBvcnQgaW50ZXJmYWNlIENob29zZUFzeW5jT3B0aW9ucyB7XG5cdGZpbHRlcnM/OiBjb250ZXh0RmlsdGVyW107XG5cdG1pblNpemU/OiBudW1iZXI7XG5cdG1heFNpemU/OiBudW1iZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIFBsYXllckluZm8ge1xuXHRnZXRJRCgpOiBzdHJpbmc7XG5cdGdldFBob3RvKCk6IHN0cmluZztcblx0Z2V0TmFtZSgpOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2l6ZUJldHdlZW5SZXN1bHQge1xuXHRtaW5TaXplOiBudW1iZXI7XG5cdG1heFNpemU6IG51bWJlcjtcblx0YW5zd2VyOiBib29sZWFuO1xufVxuZXhwb3J0IHR5cGUgdXBkYXRlQXN5bmNTdHJhdGVneSA9ICdMQVNUJyB8ICdJTU1FRElBVEUnIHwgJ0lNTUVESUFURV9DTEVBUic7XG5leHBvcnQgdHlwZSB1cGRhdGVBc3luY05vdGlmaWNhdGlvbiA9ICdOT19QVVNIJyB8ICdQVVNIJztcbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlQXN5bmNPcHRpb25zIHtcblx0YWN0aW9uOiBzdHJpbmc7XG5cdHRlbXBsYXRlOiBzdHJpbmc7XG5cdGN0YT86IHN0cmluZztcblx0aW1hZ2U6IHN0cmluZztcblx0dGV4dDogc3RyaW5nO1xuXHRkYXRhPzogb2JqZWN0O1xuXHRzdHJhdGVneT86IHVwZGF0ZUFzeW5jU3RyYXRlZ3k7XG5cdG5vdGlmaWNhdGlvbj86IHVwZGF0ZUFzeW5jTm90aWZpY2F0aW9uO1xufVxuXG52YXIgRkJJbnN0YW50ID0gd2luZG93WydGQkluc3RhbnQnXTtcbnZhciBpTXNnSW5zdGFudCA9IHdpbmRvd1snaU1zZ0luc3RhbnQnXTtcbnZhciBpbnN0YW50ID0gRkJJbnN0YW50IHx8IGlNc2dJbnN0YW50O1xuXG5pZiAoaW5zdGFudCA9PT0gdW5kZWZpbmVkKSB7XG5cdHRocm93IEVycm9yKCdObyBpbnN0YW50IFNES3Mgd2VyZSBmb3VuZC4gIEVpdGhlciBGQkluc3RhbnQgb3IgaU1zZ0luc3RhbnQgU0RLIGlzIHJlcXVpcmVkLicpO1xufVxuaWYgKEZCSW5zdGFudCAhPT0gdW5kZWZpbmVkICYmIGlNc2dJbnN0YW50ICE9PSB1bmRlZmluZWQpIHtcblx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuXHR0aHJvdyBFcnJvcignVG9vIG1hbnkgaW5zdGFudCBTREtzIHdlcmUgZm91bmQuICBPbmx5IG9uZSBpbnN0YW50IFNESyAoRkJJbnN0YW50IG9yIGlNc2dJbnN0YW50KSBtYXkgYmUgbGFvZGVkIGF0IGEgdGltZS4nKTtcbn1cbnZhciBpbnN0YW50Q29udGV4dElkO1xuXG52YXIgR19JTklUID0gJ0dhbWUuSW5pdGlhbGl6ZSc7XG52YXIgSV9JTklUID0gJ0luc3RhbnQuSW5pdGlhbGl6ZWQnO1xudmFyIEdfU1RBUlQgPSAnR2FtZS5TdGFydEdhbWUnO1xudmFyIElfU1RBUlQgPSAnSW5zdGFudC5TdGFydEdhbWUnO1xudmFyIElfRkJfVE9TX0FDQ0VQVCA9ICdJbnN0YW50LlRPU0FjY2VwdCc7XG52YXIgR19FTkQgPSAnR2FtZS5FbmRHYW1lJztcbnZhciBJX1JFUExBWSA9ICdJbnN0YW50LlJlcGxheUdhbWUnO1xudmFyIElfQ1RYX0NIRyA9ICdJbnN0YW50LkNvbnRleHRJZENoYW5nZSc7XG52YXIgR19TQ09SRSA9ICdHYW1lLlNjb3JlQ2hhbmdlJztcbnZhciBHX0xPQURfUFJPR1JFU1MgPSAnR2FtZS5Mb2FkUHJvZ3Jlc3MnO1xudmFyIEdfU1dJVENIX0NPTlRFWFQgPSAnR2FtZS5Td2l0Y2hDb250ZXh0JztcbnZhciBHX0NIT09TRV9DT05URVhUID0gJ0dhbWUuQ2hvb3NlQ29udGV4dCc7XG52YXIgR19DUkVBVEVfQ09OVEVYVCA9ICdHYW1lLkNyZWF0ZUNvbnRleHQnO1xudmFyIEdfUVVJVCA9ICdHYW1lLlF1aXQnO1xudmFyIEdfQURfU1RBVFVTID0gJ0dhbWUuQWRTdGF0dXMnO1xuXG52YXIgbm9vcCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuOyB9O1xuXG52YXIgbWV0aG9kQXJnSG9va3MgPSB7fTtcbnZhciBtZXRob2RSZXR1cm5Ib29rcyA9IHt9O1xuXG4vLyBOb3Qgc3VyZSBpZiB3ZSB3YW50IHRvIG1vdmUgbWUuZmlyZSgpIG91dCBhbmQgaW50byB0aGlzIGNsb3N1cmUuXG4vLyBUaGlzIHdvdWxkIGVuc3VyZSBub2JvZHkgY2FsbHMgaXQgZnJvbSBvdXRzaWRlIHRoaXMgbW9kdWxlLlxuLy8gTGVhdmluZyBpdCBmb3Igbm93LlxuXG5leHBvcnQgdmFyIEV2ZW50ID0gbmV3IFp5bmdhQ29yZS5FdmVudE1peGluKCk7XG5leHBvcnQgdmFyIEV2ZW50cyA9IHtcblx0R0FNRV9JTklUSUFMSVpFOiBHX0lOSVQsICAgICAgICAgICAgICAgICAgLy8gR2FtZSBjYWxsZWQgRkIgU0RLIHRvIGluaXRpYWxpemVcblx0SU5TVEFOVF9JTklUSUFMSVpFRDogSV9JTklULCAgICAgICAgICAgICAgLy8gSW5zdGFudCBTREsgbGV0IEdhbWUga25vdyBpdCB3YXMgaW50aWFsaXplZFxuXHRHQU1FX0dBTUVfU1RBUlQ6IEdfU1RBUlQsICAgICAgICAgICAgICAgICAvLyBHYW1lIGxldCBGQiBTREsga25vdyBpdCB3YXMgcmVhZHkgdG8gc3RhcnRcblx0SU5TVEFOVF9HQU1FX1NUQVJURUQ6IElfU1RBUlQsICAgICAgICAgICAgLy8gSW5zdGFudCBTREsgbGV0IEdhbWUga25vdyB0aGUgdXNlciB3YW50cyB0byBzdGFydCB0aGUgZ2FtZVxuXHRJTlNUQU5UX0ZCX1RPU19BQ0NFUFQ6IElfRkJfVE9TX0FDQ0VQVCwgIC8vIEZvciBub3cgdGhlIHNhbWUgYXMgSU5TVEFOVF9HQU1FX1NUQVJURUQuICBHYXRlcyBzb21lIEluc3RhbnRTREsgbWV0aG9kc1xuXHRHQU1FX0dBTUVfRU5EOiBHX0VORCwgICAgICAgICAgICAgICAgICAgICAvLyBHYW1lIGxldCBJbnN0YW50IFNESyBrbm93IHRoYXQgZ2FtZSBlbmRlZFxuXHRHQU1FX1NDT1JFX0NIQU5HRTogR19TQ09SRSwgICAgICAgICAgICAgICAvLyBHYW1lIGxldCBJbnRhbnQgU0RLIGtub3cgdGhhdCB0aGUgc2NvcmUgY2hhbmdlZFxuXHRJTlNUQU5UX0dBTUVfUkVQTEFZOiBJX1JFUExBWSwgICAgICAgICAgICAvLyBGQiBTREsgbGV0IGdhbWUga25vdyB0aGF0IHRoZSB1c2VyIHdhbnRzIHRvIHBsYXkgYW5vdGhlciBnYW1lXG5cdElOU1RBTlRfQ09OVEVYVF9JRF9DSEFOR0U6IElfQ1RYX0NIRywgICAgIC8vIENvbnRleHQgSWQgaXMgYXZhaWxhYmxlIG9yIGNoYW5nZWRcblx0R0FNRV9MT0FESU5HX1BSR09HUkVTUzogR19MT0FEX1BST0dSRVNTLCAgLy8gR2FtZSBsZXQgSW5zdGFudCBTREsga25vdyBnYW1lIGxvYWQgcHJvZ3Jlc3MgKDAgLSAxMDApXG5cdEdBTUVfU1dJVENIX0NPTlRFWFQ6IEdfU1dJVENIX0NPTlRFWFQsICAgIC8vIEdhbWUgYXNrZWQgdG8gc3dpdGNoIGNvbnRleHRcblx0R0FNRV9DSE9PU0VfQ09OVEVYVDogR19DSE9PU0VfQ09OVEVYVCwgICAgLy8gR2FtZSBhc2tlZCBmb3IgRkIgY2hvb3NlIG5ldyBjb250ZXh0IGRpYWxvZ1xuXHRHQU1FX0NSRUFURV9DT05URVhUOiBHX0NIT09TRV9DT05URVhULCAgICAvLyBHYW1lIGFza2VkIGZvciBGQiBjcmVhdGUgbmV3IGNvbnRleHQgZGlhbG9nXG5cdEdBTUVfUVVJVDogR19RVUlULCAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdhbWUgYXNrZWQgdG8gcXVpdFxuXHRHQU1FX0FEX1NUQVRVUzogR19BRF9TVEFUVVMgICAgICAgICAgICAgICAvLyBHYW1lIGFkIGZldGNoL2xvYWQvc2hvdyBzdGF0dXMgY2hhbmdlXG59O1xuXG5leHBvcnQgdmFyIHp5bmdhID0ge1xuXHRyZWdpc3Rlck1ldGhvZEFyZ3VtZW50SG9vazogZnVuY3Rpb24gKG1ldGhvZCwgaG9vaykge1xuXHRcdHZhciBob29rcyA9IG1ldGhvZEFyZ0hvb2tzW21ldGhvZF0gPSBtZXRob2RBcmdIb29rc1ttZXRob2RdIHx8IFtdO1xuXHRcdGhvb2tzLnB1c2goaG9vayk7XG5cdH0sXG5cdHJlZ2lzdGVyTWV0aG9kUmV0dXJuSG9vazogZnVuY3Rpb24gKG1ldGhvZCwgaG9vaykge1xuXHRcdHZhciBob29rcyA9IG1ldGhvZFJldHVybkhvb2tzW21ldGhvZF0gPSBtZXRob2RSZXR1cm5Ib29rc1ttZXRob2RdIHx8IFtdO1xuXHRcdGhvb2tzLnB1c2goaG9vayk7XG5cdH1cbn07XG5cbmZ1bmN0aW9uIGdldEluc3RhbnRNZXRob2RGcm9tU3RyaW5nKG1ldGhvZE5hbWUsIGJhc2VPYmopIHtcblx0dmFyIHBhdGggPSBtZXRob2ROYW1lLnNwbGl0KCcuJyk7XG5cdHZhciBmaXJzdE5hbWUgPSBwYXRoLnNoaWZ0KCk7XG5cdGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuXHRcdC8vIEF0IHRoZSBlbmQsIHJldHVybiB0aGUgZnVuY3Rpb25cblx0XHRyZXR1cm4gYmFzZU9ialtmaXJzdE5hbWVdO1xuXHR9IGVsc2Uge1xuXHRcdC8vIFN0aWxsIG5lZWQgdG8gcmVjdXJzZVxuXHRcdHJldHVybiBnZXRJbnN0YW50TWV0aG9kRnJvbVN0cmluZyhwYXRoLmpvaW4oJy4nKSwgYmFzZU9ialtmaXJzdE5hbWVdKTtcblx0fVxufVxuXG4vLyBuaWNvOiBkb24ndCB3YW50IHRvIGV4cG9ydCB0byB3aG9sZSB3b3JsZCwgd2FudCB0byBleHBvcnQgdG8gc3ViLW5hbWVzcGFjZS5cbmZ1bmN0aW9uIHdyYXBJbnN0YW50TWV0aG9kKFxuXHRtZXRob2ROYW1lOiBzdHJpbmcsXG5cdG5lZWRzRkJUT1NBY2NlcHQ6IGJvb2xlYW4sXG5cdHJldHVybnNQcm9taXNlPzogYm9vbGVhbixcblx0ZXZlbnRDYWxsYmFjaz8sXG5cdGV2ZW50UmVzb2x2ZUNhbGxiYWNrP1xuKTogYW55IHtcblx0dmFyIGluc3RhbnRNZXRob2QgPSBnZXRJbnN0YW50TWV0aG9kRnJvbVN0cmluZyhtZXRob2ROYW1lLCBpbnN0YW50KTtcblx0aWYgKCFpbnN0YW50TWV0aG9kKSB7XG5cdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0fVxuXHRldmVudENhbGxiYWNrID0gZXZlbnRDYWxsYmFjayB8fCBub29wO1xuXHRldmVudFJlc29sdmVDYWxsYmFjayA9IGV2ZW50UmVzb2x2ZUNhbGxiYWNrIHx8IG5vb3A7XG5cdC8vIFJldHVybiBhIG5ldyB3cmFwcGVyIGZ1bmN0aW9uIChjbG9zdXJlKVxuXHRyZXR1cm4gZnVuY3Rpb24gKC4uLm1ldGhvZEFyZ3MpIHtcblx0XHQvLyBTYXZlIHRoZSBGQkluc3RhbnQgYXJndW1lbnRzXG5cdFx0dmFyIGFyZ0hvb2tzID0gbWV0aG9kQXJnSG9va3NbbWV0aG9kTmFtZV0gfHwgW107XG5cdFx0dmFyIGFyZ0hvb2tDb3VudCA9IGFyZ0hvb2tzLmxlbmd0aDtcblxuXHRcdHZhciByZXR1cm5Ib29rcyA9IG1ldGhvZFJldHVybkhvb2tzW21ldGhvZE5hbWVdIHx8IFtdO1xuXHRcdHZhciByZXR1cm5Ib29rQ291bnQgPSByZXR1cm5Ib29rcy5sZW5ndGg7XG5cblx0XHR2YXIgaTtcblx0XHR2YXIgcmV0dXJuVmFsdWU7XG5cblx0XHRjb25zdCBUT1NBY2NlcHRlZCA9IEV2ZW50LmdldExhc3RGaXJlZFZhbHVlKElfRkJfVE9TX0FDQ0VQVCkgYXMgYm9vbGVhbjtcblx0XHRpZiAobmVlZHNGQlRPU0FjY2VwdCA9PT0gdHJ1ZSAmJiBUT1NBY2NlcHRlZCAhPT0gdHJ1ZSkge1xuXHRcdFx0aWYgKGNvbnNvbGUudHJhY2UpIHtcblx0XHRcdFx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcblx0XHRcdFx0Y29uc29sZS50cmFjZShgRkJJbnN0YW50LiR7bWV0aG9kTmFtZX0oKSBjYWxsZWQgYmVmb3JlIEZCSW5zdGFudC5zdGFydEdhbWVBc3luYygpYCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuXHRcdFx0XHRjb25zb2xlLmVycm9yKGBGQkluc3RhbnQuJHttZXRob2ROYW1lfSgpIGNhbGxlZCBiZWZvcmUgRkJJbnN0YW50LnN0YXJ0R2FtZUFzeW5jKClgLCBuZXcgRXJyb3IoKS5zdGFjayk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGFyZ0hvb2tDb3VudDsgaSsrKSB7XG5cdFx0XHQvLyBtZXRob2RBcmdzIGNhbiBiZSBtb2RpZmllZC9yZXBsYWNlZCBieSBob29rc1xuXHRcdFx0bWV0aG9kQXJncyA9IGFyZ0hvb2tzW2ldLmFwcGx5KHVuZGVmaW5lZCwgbWV0aG9kQXJncyk7XG5cdFx0fVxuXG5cdFx0Ly8gR2FtZSBjYWxsZWQgRkIgbWV0aG9kLiAgV2UgbWlnaHQgd2FudCB0byBkbyBzb21ldGhpbmcuXG5cdFx0ZXZlbnRDYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIG1ldGhvZEFyZ3MpO1xuXG5cdFx0aWYgKHJldHVybnNQcm9taXNlID09PSBmYWxzZSkge1xuXHRcdFx0Ly8gTm90IGV4cGVjdGluZyBhIHByb21pc2UuICBKdXN0IGNhbGwgdGhlIFNES1xuXHRcdFx0cmV0dXJuVmFsdWUgPSBpbnN0YW50TWV0aG9kLmFwcGx5KGluc3RhbnQsIG1ldGhvZEFyZ3MpO1xuXHRcdFx0Ly8gQXBwbHkgYW55IHJldHVybiB2YWx1ZSBob29rc1xuXHRcdFx0Zm9yIChpID0gMDsgaSA8IHJldHVybkhvb2tDb3VudDsgaSsrKSB7XG5cdFx0XHRcdC8vIG1ldGhvZEFyZ3MgY2FuIGJlIG1vZGlmaWVkL3JlcGxhY2VkIGJ5IGhvb2tzXG5cdFx0XHRcdHJldHVyblZhbHVlID0gcmV0dXJuSG9va3NbaV0uYXBwbHkodW5kZWZpbmVkLCBbcmV0dXJuVmFsdWVdKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXR1cm5WYWx1ZTtcblx0XHR9XG5cdFx0Ly8gUmV0dXJuIG91ciBvd24gUHJvbWlzZVxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvLyBOb3cgY2FsbCB0aGUgb3JpZ2luYWwgRkIgbWV0aG9kXG5cdFx0XHRpbnN0YW50TWV0aG9kLmFwcGx5KGluc3RhbnQsIG1ldGhvZEFyZ3MpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQvLyBXcmFwIHRoZSByZXNvbHZlIGNhbGxiYWNrXG5cdFx0XHRcdHZhciByZXNvbHZlQXJncyA9IGFyZ3VtZW50cztcblx0XHRcdFx0Ly8gVGhlcmUgbWF5IGJlIGhvb2tzIHRvIG1vZGlmeSByZXNvbHZlIGFyZ3VtZW50cy5cblx0XHRcdFx0dmFyIHRoaXNNZXRob2RSZXR1cm5Ib29rcyA9IG1ldGhvZFJldHVybkhvb2tzW21ldGhvZE5hbWVdIHx8IFtdO1xuXHRcdFx0XHR2YXIgdGhpc01ldGhvZFJldHVybkhvb2tDb3VudCA9IHRoaXNNZXRob2RSZXR1cm5Ib29rcy5sZW5ndGg7XG5cdFx0XHRcdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1zaGFkb3dlZC12YXJpYWJsZVxuXHRcdFx0XHR2YXIgaTtcblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IHRoaXNNZXRob2RSZXR1cm5Ib29rQ291bnQ7IGkrKykge1xuXHRcdFx0XHRcdC8vIG1ldGhvZEFyZ3MgY2FuIGJlIG1vZGlmaWVkL3JlcGxhY2VkIGJ5IGhvb2tzXG5cdFx0XHRcdFx0cmVzb2x2ZUFyZ3MgPSB0aGlzTWV0aG9kUmV0dXJuSG9va3NbaV0uYXBwbHkodW5kZWZpbmVkLCBtZXRob2RBcmdzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBGaXJlIG91ciByZXNvbHZlIGV2ZW50XG5cdFx0XHRcdGlmIChldmVudFJlc29sdmVDYWxsYmFjayAhPT0gbm9vcCkge1xuXHRcdFx0XHRcdGV2ZW50UmVzb2x2ZUNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgcmVzb2x2ZUFyZ3MpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIE5vdyBhY3R1YWxseSByZXNvbHZlXG5cdFx0XHRcdHJlc29sdmUuYXBwbHkodW5kZWZpbmVkLCByZXNvbHZlQXJncyk7XG5cdFx0XHR9LCByZWplY3QpO1xuXHRcdH0pO1xuXHR9O1xufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiBJbnN0YW50IFNESyB3cmFwcGVycyAqL1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vLyBIZWxwZXIgZnVjdGlvbiBmb3IgZmlyaW5nIHNwZWNpZmljIGV2ZW50c1xuZnVuY3Rpb24gZ2VuRmlyZUV2ZW50RnVuYyhldmVudE5hbWUpIHtcblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7IC8vIENvbnZlcnQgaW50byBhY3R1YWwgYXJyYXlcblx0XHRhcmdzLnVuc2hpZnQoZXZlbnROYW1lKTtcblx0XHRFdmVudC5maXJlLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG5cdH07XG59XG5cbi8vIFdyYXAgbWV0aG9kcyB0aGF0IHJldHVybiBQcm9taXNlc1xuZXhwb3J0IHZhciBpbml0aWFsaXplQXN5bmMgPSB3cmFwSW5zdGFudE1ldGhvZCgnaW5pdGlhbGl6ZUFzeW5jJywgZmFsc2UsIHRydWUsIGdlbkZpcmVFdmVudEZ1bmMoR19JTklUKSwgZnVuY3Rpb24gKCkge1xuXHQvLyBUaGUgZm9sb3dpbmcgdmFsdWVzIHNob3VsZCBiZSBzZXQgYWZ0ZXIgSW5zdGFudCBpbml0aWFsaXphdGlvbiBpcyBkb25lIGJ1dCBCRUZPUkUgd2UgZmlyZSBvdXIgSV9JTklUIGV2ZW50XG5cdGlmICghaW5zdGFudC5nZXRTREtWZXJzaW9uKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdGQkluc3RhbnQuZ2V0U0RLVmVyc2lvbiBkb2VzIG5vdCBleGlzdHMuICBJcyB0aGlzIHYxLng/ICBXZSBkb25cXCd0IHN1cHBvcnQgdGhhdCBhbnkgbW9yZS4nKTtcblx0fVxuXG5cdEV2ZW50LmZpcmUoSV9JTklULCBhcmd1bWVudHMpO1xufSk7XG5leHBvcnQgdmFyIHN0YXJ0R2FtZUFzeW5jID0gd3JhcEluc3RhbnRNZXRob2QoJ3N0YXJ0R2FtZUFzeW5jJyxcblx0ZmFsc2UsXG5cdHRydWUsXG5cdGdlbkZpcmVFdmVudEZ1bmMoR19TVEFSVCksXG5cdGdlbkZpcmVFdmVudEZ1bmMoSV9TVEFSVClcbik7XG5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1uYW1lc3BhY2VcbmV4cG9ydCBuYW1lc3BhY2UgcGxheWVyIHtcblx0Ly8gV3JhcCBtZXRob2QgdGhhdCByZXR1cm4gUHJvbWlzZXMgYnV0IHdlIGRvbid0IHdhbnQgdG8gaW5qZWN0IGV2ZW50c1xuXHRleHBvcnQgdmFyIGdldERhdGFBc3luYyA9XG5cdFx0Ly8gaW50cm9kdWNlZCBpbiB2MS4xXG5cdFx0d3JhcEluc3RhbnRNZXRob2QoJ3BsYXllci5nZXREYXRhQXN5bmMnLCB0cnVlLCB0cnVlKTtcblxuXHRleHBvcnQgdmFyIHNldERhdGFBc3luYyA9XG5cdFx0Ly8gaW50cm9kdWNlZCBpbiB2MS4xXG5cdFx0d3JhcEluc3RhbnRNZXRob2QoJ3BsYXllci5zZXREYXRhQXN5bmMnLCB0cnVlLCB0cnVlKTtcblxuXHRleHBvcnQgdmFyIGZsdXNoRGF0YUFzeW5jID1cblx0XHQvLyBpbnRyb2R1Y2VkIGluIHYzLjJcblx0XHR3cmFwSW5zdGFudE1ldGhvZCgncGxheWVyLmZsdXNoRGF0YUFzeW5jJywgdHJ1ZSwgdHJ1ZSk7XG5cblx0ZXhwb3J0IHZhciBnZXRJRCA9IHdyYXBJbnN0YW50TWV0aG9kKCdwbGF5ZXIuZ2V0SUQnLCBmYWxzZSwgZmFsc2UpO1xuXHRleHBvcnQgdmFyIGdldE5hbWUgPSB3cmFwSW5zdGFudE1ldGhvZCgncGxheWVyLmdldE5hbWUnLCB0cnVlLCBmYWxzZSk7XG5cdGV4cG9ydCB2YXIgZ2V0UGhvdG8gPSB3cmFwSW5zdGFudE1ldGhvZCgncGxheWVyLmdldFBob3RvJywgdHJ1ZSwgZmFsc2UpO1xuXG5cdC8vIHYzLjArLCB2NC4wKyBmb3IgY29ubmVjdGVkUGxheWVyIG9iamVjdHNcblx0ZXhwb3J0IHZhciBnZXRDb25uZWN0ZWRQbGF5ZXJzQXN5bmM6ICgpID0+IFByb21pc2U8UGxheWVySW5mb1tdPiA9XG5cdFx0d3JhcEluc3RhbnRNZXRob2QoJ3BsYXllci5nZXRDb25uZWN0ZWRQbGF5ZXJzQXN5bmMnLCB0cnVlLCB0cnVlKTtcblxuXHRleHBvcnQgaW50ZXJmYWNlIFNpZ25lZFBsYXllckluZm8ge1xuXHRcdGdldFBsYXllcklEKCk6IHN0cmluZzsgIC8vIEdldCB0aGUgRkIgcGxheWVyIElEXG5cdFx0Z2V0U2lnbmF0dXJlKCk6IHN0cmluZzsgLy8gR2V0IHRoZSBzaWduZWQgcGF5bG9hZFxuXHR9XG5cdGV4cG9ydCBpbnRlcmZhY2UgU2lnbmVkUGxheWVySW5mb0RhdGEge1xuXHRcdGFsZ29yaXRobTogJ0hNQUMtU0hBMjU2Jztcblx0XHRpc3N1ZWRfYXQ6IG51bWJlcjtcblx0XHRwbGF5ZXJfaWQ6IHN0cmluZztcblx0XHRyZXF1ZXN0X3BheWxvYWQ6IHN0cmluZztcblx0fVxuXHRleHBvcnQgdmFyIGdldFNpZ25lZFBsYXllckluZm9Bc3luYzogKGluZm86IHN0cmluZykgPT4gUHJvbWlzZTxTaWduZWRQbGF5ZXJJbmZvPiA9XG5cdFx0d3JhcEluc3RhbnRNZXRob2QoJ3BsYXllci5nZXRTaWduZWRQbGF5ZXJJbmZvQXN5bmMnLCB0cnVlLCB0cnVlKTtcbn1cblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuZXhwb3J0IHZhciBzZXRMb2FkaW5nUHJvZ3Jlc3MgPSB3cmFwSW5zdGFudE1ldGhvZCgnc2V0TG9hZGluZ1Byb2dyZXNzJywgZmFsc2UsIGZhbHNlLCBnZW5GaXJlRXZlbnRGdW5jKEdfTE9BRF9QUk9HUkVTUykpO1xuXG4vLyBXcmFwIHJlZ3VsYXIgbWV0aG9kcyBidXQgd2UgZG9uJ3Qgd2FudCB0byBpbmplY3QgZXZlbnRzXG4vLyBPbGQsIGl0IGlzIG5vdyBjYWxsZWQgcXVpdFxuZXhwb3J0IHZhciBhYm9ydCA9IHdyYXBJbnN0YW50TWV0aG9kKCdhYm9ydCcsIGZhbHNlLCBmYWxzZSk7XG5cbmV4cG9ydCB2YXIgZ2V0U3VwcG9ydGVkQVBJcyA9IHdyYXBJbnN0YW50TWV0aG9kKCdnZXRTdXBwb3J0ZWRBUElzJywgZmFsc2UsIGZhbHNlKTtcblxuZXhwb3J0IHZhciBnZXRTREtWZXJzaW9uID0gd3JhcEluc3RhbnRNZXRob2QoJ2dldFNES1ZlcnNpb24nLCBmYWxzZSwgZmFsc2UpO1xuZXhwb3J0IHR5cGUgRkJQbGF0Zm9ybSA9ICdJT1MnIHwgJ0FORFJPSUQnIHwgJ1dFQicgfCAnTU9CSUxFX1dFQic7XG5leHBvcnQgdmFyIGdldFBsYXRmb3JtID0gd3JhcEluc3RhbnRNZXRob2QoJ2dldFBsYXRmb3JtJywgZmFsc2UsIGZhbHNlKSBhcyAoKSA9PiBGQlBsYXRmb3JtO1xuZXhwb3J0IHZhciBnZXRMb2NhbGUgPSB3cmFwSW5zdGFudE1ldGhvZCgnZ2V0TG9jYWxlJywgdHJ1ZSwgZmFsc2UpO1xuXG5leHBvcnQgdHlwZSBmYkFkVHlwZSA9ICdJbnRlcnN0aXRpYWxBZCcgfCAnUmV3YXJkZWRWaWRlbyc7XG5leHBvcnQgaW50ZXJmYWNlIEZiQWRFcnJvciB7XG5cdGNvZGU6IHN0cmluZztcblx0bWVzc2FnZTogc3RyaW5nO1xufVxuZXhwb3J0IHR5cGUgRmJBZFN0YXR1c1R5cGUgPVxuXHQnRkVUQ0gnIHxcblx0J0ZFVENIX0VSUk9SJyB8XG5cdCdMT0FEX1NUQVJUJyB8XG5cdCdMT0FEX0VORCcgfFxuXHQnTE9BRF9FUlJPUicgfFxuXHQnU0hPV19TVEFSVCcgfFxuXHQnU0hPV19FUlJPUicgfFxuXHQnU0hPV19FTkQnIHxcblx0J0NMSUNLJztcbmV4cG9ydCBpbnRlcmZhY2UgRmJBZFN0YXR1cyB7XG5cdGlkOiBudW1iZXI7XG5cdHBsYWNlbWVudElkOiBzdHJpbmc7XG5cdGFkVHlwZTogZmJBZFR5cGU7XG5cdHN0YXR1c1R5cGU6IEZiQWRTdGF0dXNUeXBlO1xuXHR0aW1lOiBEYXRlO1xuXHRkYXRhPzogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZiQWQge1xuXHRnZXRQbGFjZW1lbnRJRDogKCkgPT4gc3RyaW5nO1xuXHRsb2FkQXN5bmM6ICgpID0+IFByb21pc2U8dm9pZD47XG5cdHNob3dBc3luYzogKCkgPT4gUHJvbWlzZTx2b2lkPjtcblx0b25DbGljaz86IChjaWNrQ2FsbGJhY2s6ICgpID0+IHZvaWQpID0+IHZvaWQ7XG59XG5leHBvcnQgdHlwZSBhZEZldGNoTWV0aG9kID0gKHBsYWNlbWVudElkOiBzdHJpbmcpID0+IFByb21pc2U8RmJBZD47XG5cbmZ1bmN0aW9uIHdyYXBBZE1ldGhvZCh0eXBlOiBmYkFkVHlwZSk6IGFkRmV0Y2hNZXRob2Qge1xuXHRjb25zdCBmdWxsTWV0aG9kTmFtZSA9ICdnZXQnICsgdHlwZSArICdBc3luYyc7XG5cdHJldHVybiAocGxhY2VtZW50SWQ6IHN0cmluZyk6IFByb21pc2U8RmJBZD4gPT4ge1xuXHRcdGxldCBzdGFydFRTID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcblx0XHRsZXQgYWRGZXRjaCA9IEZCSW5zdGFudFtmdWxsTWV0aG9kTmFtZV0gYXMgYWRGZXRjaE1ldGhvZDtcblx0XHRjb25zdCBUT1NBY2NlcHRlZCA9IEV2ZW50LmdldExhc3RGaXJlZFZhbHVlKElfRkJfVE9TX0FDQ0VQVCkgYXMgYm9vbGVhbjtcblx0XHRpZiAoVE9TQWNjZXB0ZWQgIT09IHRydWUpIHtcblx0XHRcdGlmIChjb25zb2xlLnRyYWNlKSB7XG5cdFx0XHRcdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG5cdFx0XHRcdGNvbnNvbGUudHJhY2UoYEZCSW5zdGFudC4ke2Z1bGxNZXRob2ROYW1lfSgpIGNhbGxlZCBiZWZvcmUgRkJJbnN0YW50LnN0YXJ0R2FtZUFzeW5jKClgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEZCSW5zdGFudC4ke2Z1bGxNZXRob2ROYW1lfSgpIGNhbGxlZCBiZWZvcmUgRkJJbnN0YW50LnN0YXJ0R2FtZUFzeW5jKClgLCBuZXcgRXJyb3IoKS5zdGFjayk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGdldEFkU3RhdHVzID0gKGFkU3RhdHVzVHlwZTogRmJBZFN0YXR1c1R5cGUsIGRhdGE/OiBhbnkpOiBGYkFkU3RhdHVzID0+IHtcblx0XHRcdGxldCBhZFN0YXR1czogRmJBZFN0YXR1cyA9IHtcblx0XHRcdFx0aWQ6IHN0YXJ0VFMsXG5cdFx0XHRcdHBsYWNlbWVudElkOiBwbGFjZW1lbnRJZCxcblx0XHRcdFx0YWRUeXBlOiB0eXBlLFxuXHRcdFx0XHRzdGF0dXNUeXBlOiBhZFN0YXR1c1R5cGUsXG5cdFx0XHRcdHRpbWU6IG5ldyBEYXRlKClcblx0XHRcdH07XG5cdFx0XHRpZiAoZGF0YSkge1xuXHRcdFx0XHRhZFN0YXR1cy5kYXRhID0gZGF0YTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBhZFN0YXR1cztcblx0XHR9O1xuXG5cdFx0RXZlbnQuZmlyZShFdmVudHMuR0FNRV9BRF9TVEFUVVMsIGdldEFkU3RhdHVzKCdGRVRDSCcpKTtcblxuXHRcdHJldHVybiBhZEZldGNoKHBsYWNlbWVudElkKS50aGVuKFxuXHRcdFx0KHJlYWxBZDogRmJBZCkgPT4ge1xuXHRcdFx0XHQvLyBTdWNjZXNzXG5cdFx0XHRcdGxldCBhZE9uQ2xpY2s6ICgpID0+IHZvaWQgPSBudWxsO1xuXG5cdFx0XHRcdGlmICh0eXBlb2YgcmVhbEFkLm9uQ2xpY2sgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRyZWFsQWQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRFdmVudC5maXJlKEV2ZW50cy5HQU1FX0FEX1NUQVRVUywgZ2V0QWRTdGF0dXMoJ0NMSUNLJykpO1xuXHRcdFx0XHRcdFx0aWYgKGFkT25DbGljayAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0XHRhZE9uQ2xpY2soKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGxldCBvdXJBZDogRmJBZCA9IHtcblx0XHRcdFx0XHRnZXRQbGFjZW1lbnRJRDogKCkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHBsYWNlbWVudElkO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0bG9hZEFzeW5jOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRFdmVudC5maXJlKEV2ZW50cy5HQU1FX0FEX1NUQVRVUywgZ2V0QWRTdGF0dXMoJ0xPQURfU1RBUlQnKSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVhbEFkLmxvYWRBc3luYygpLnRoZW4oXG5cdFx0XHRcdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRFdmVudC5maXJlKEV2ZW50cy5HQU1FX0FEX1NUQVRVUywgZ2V0QWRTdGF0dXMoJ0xPQURfRU5EJykpO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0KGVycjogRmJBZEVycm9yKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0RXZlbnQuZmlyZShFdmVudHMuR0FNRV9BRF9TVEFUVVMsIGdldEFkU3RhdHVzKCdMT0FEX0VSUk9SJywgZXJyKSk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzaG93QXN5bmM6ICgpID0+IHtcblx0XHRcdFx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLkdBTUVfQURfU1RBVFVTLCBnZXRBZFN0YXR1cygnU0hPV19TVEFSVCcpKTtcblx0XHRcdFx0XHRcdHJldHVybiByZWFsQWQuc2hvd0FzeW5jKCkudGhlbihcblx0XHRcdFx0XHRcdFx0KCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLkdBTUVfQURfU1RBVFVTLCBnZXRBZFN0YXR1cygnU0hPV19FTkQnKSk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQoZXJyOiBGYkFkRXJyb3IpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRFdmVudC5maXJlKEV2ZW50cy5HQU1FX0FEX1NUQVRVUywgZ2V0QWRTdGF0dXMoJ1NIT1dfRVJST1InLCBlcnIpKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG9uQ2xpY2s6IChuZXdPbkNsaWNrOiAoKSA9PiB2b2lkKSA9PiB7XG5cdFx0XHRcdFx0XHRhZE9uQ2xpY2sgPSBuZXdPbkNsaWNrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdFx0Ly8gVG9EbzogbG9nIGZldGNoIHN1Y2Nlc3Ncblx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShvdXJBZCk7XG5cdFx0XHR9LFxuXHRcdFx0KGVycjogRmJBZEVycm9yKSA9PiB7XG5cdFx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLkdBTUVfQURfU1RBVFVTLCBnZXRBZFN0YXR1cygnRkVUQ0hfRVJST1InLCBlcnIpKTtcblx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0KTtcblx0fTtcbn1cblxuLy8gVG9EbzogT3ZlcnJpZGUgdGhlc2Ugd2l0aCBvdXQgb3duIHdyYXBwZXJzIGFsbCB0aGUgd2F5IHRocm91Z2ggZm9yIHRyYWNraW5nXG5leHBvcnQgdmFyIGdldEludGVyc3RpdGlhbEFkQXN5bmMgPSB3cmFwQWRNZXRob2QoJ0ludGVyc3RpdGlhbEFkJyk7XG5leHBvcnQgdmFyIGdldFJld2FyZGVkVmlkZW9Bc3luYyA9IHdyYXBBZE1ldGhvZCgnUmV3YXJkZWRWaWRlbycpO1xuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIGNvbnRleHQge1xuXHRleHBvcnQgdmFyIGdldElEID0gd3JhcEluc3RhbnRNZXRob2QoJ2NvbnRleHQuZ2V0SUQnLCB0cnVlLCBmYWxzZSk7XG5cdC8vIGludHJvZHVjZWQgaW4gdjIuMVxuXHRleHBvcnQgdmFyIGdldFR5cGUgPSB3cmFwSW5zdGFudE1ldGhvZCgnY29udGV4dC5nZXRUeXBlJywgdHJ1ZSwgZmFsc2UpO1xuXG5cdC8vIDMuMFxuXHRleHBvcnQgdmFyIGNob29zZUFzeW5jOiAob3B0aW9ucz86IENob29zZUFzeW5jT3B0aW9ucykgPT4gUHJvbWlzZTx2b2lkPiA9IHdyYXBJbnN0YW50TWV0aG9kKCdjb250ZXh0LmNob29zZUFzeW5jJyxcblx0XHR0cnVlLFxuXHRcdHRydWUsXG5cdFx0Z2VuRmlyZUV2ZW50RnVuYyhHX0NIT09TRV9DT05URVhUKSxcblx0XHRjaGVja0NvbnRleHRJZENoYW5nZVxuXHQpO1xuXHRleHBvcnQgdmFyIHN3aXRjaEFzeW5jID0gd3JhcEluc3RhbnRNZXRob2QoJ2NvbnRleHQuc3dpdGNoQXN5bmMnLFxuXHRcdHRydWUsXG5cdFx0dHJ1ZSxcblx0XHRnZW5GaXJlRXZlbnRGdW5jKEdfU1dJVENIX0NPTlRFWFQpLFxuXHRcdGNoZWNrQ29udGV4dElkQ2hhbmdlXG5cdCk7IC8vIFRPRE86IGZpcmUgZXZlbnRcblxuXHQvLyAzLjJcblx0ZXhwb3J0IHZhciBjcmVhdGVBc3luYyA9IHdyYXBJbnN0YW50TWV0aG9kKCdjb250ZXh0LmNyZWF0ZUFzeW5jJyxcblx0XHR0cnVlLFxuXHRcdHRydWUsXG5cdFx0Z2VuRmlyZUV2ZW50RnVuYyhHX0NSRUFURV9DT05URVhUKSxcblx0XHRjaGVja0NvbnRleHRJZENoYW5nZVxuXHQpO1xuXG5cdC8vIDQuMVxuXHRleHBvcnQgdmFyIGdldFBsYXllcnNBc3luYzogKCkgPT4gUHJvbWlzZTxQbGF5ZXJJbmZvW10+ID0gd3JhcEluc3RhbnRNZXRob2QoJ2NvbnRleHQuZ2V0UGxheWVyc0FzeW5jJywgdHJ1ZSwgdHJ1ZSk7XG5cdGV4cG9ydCB2YXIgaXNTaXplQmV0d2VlbjogKG1pblNpemU6IG51bWJlciwgbWF4U2l6ZTogbnVtYmVyKSA9PiBTaXplQmV0d2VlblJlc3VsdCA9XG5cdFx0d3JhcEluc3RhbnRNZXRob2QoJ2NvbnRleHQuaXNTaXplQmV0d2VlbicsIHRydWUsIGZhbHNlKTtcbn1cbi8vIGludHJvZHVjZWQgaW4gdjIuMVxuZXhwb3J0IHZhciBsb2dFdmVudCA9IHdyYXBJbnN0YW50TWV0aG9kKCdsb2dFdmVudCcsIHRydWUsIGZhbHNlKTtcblxuZXhwb3J0IHZhciB1cGRhdGVBc3luYzogKG9wdGlvbnM/OiBVcGRhdGVBc3luY09wdGlvbnMpID0+IFByb21pc2U8dm9pZD4gPSB3cmFwSW5zdGFudE1ldGhvZCgndXBkYXRlQXN5bmMnLFxuXHR0cnVlLFxuXHR0cnVlLFxuXHRnZW5GaXJlRXZlbnRGdW5jKEdfQ0hPT1NFX0NPTlRFWFQpLFxuXHRjaGVja0NvbnRleHRJZENoYW5nZVxuKTtcblxuZXhwb3J0IHZhciBzaGFyZUFzeW5jID0gd3JhcEluc3RhbnRNZXRob2QoJ3NoYXJlQXN5bmMnLCB0cnVlLCB0cnVlKTtcblxuZXhwb3J0IHZhciBnZXRFbnRyeVBvaW50RGF0YSA9IHdyYXBJbnN0YW50TWV0aG9kKCdnZXRFbnRyeVBvaW50RGF0YScsIHRydWUsIGZhbHNlKTtcblxuZXhwb3J0IHZhciBvblBhdXNlID0gd3JhcEluc3RhbnRNZXRob2QoJ29uUGF1c2UnLCBmYWxzZSwgZmFsc2UpO1xuXG5leHBvcnQgdmFyIHF1aXQgPSB3cmFwSW5zdGFudE1ldGhvZCgncXVpdCcsIGZhbHNlLCBmYWxzZSk7XG5cbmV4cG9ydCB2YXIgc2V0U2Vzc2lvbkRhdGEgPSB3cmFwSW5zdGFudE1ldGhvZCgnc2V0U2Vzc2lvbkRhdGEnLCB0cnVlLCBmYWxzZSk7XG5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbmV4cG9ydCB2YXIgc3dpdGNoR2FtZUFzeW5jID0gd3JhcEluc3RhbnRNZXRob2QoJ3N3aXRjaEdhbWVBc3luYycsIHRydWUsIHRydWUpIGFzIChhcHBpZDogc3RyaW5nLCBkYXRhPzogYW55KSA9PiBQcm9taXNlPHZvaWQ+O1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyogSW50ZXJuYWwgSW5zdGFudCBzcGVjaWZpYyBldmVudHMgKi9cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8vIENoZWNrIEZCSW5zdGFudCBTREsgY29udGV4dCBJRCB2YWx1ZSBhZ2FpbnN0IGxhc3Qga25vd24gdmFsdWVcbmZ1bmN0aW9uIGNoZWNrQ29udGV4dElkQ2hhbmdlKCkge1xuXHR2YXIgbmV3Q29udGV4dElkID0gaW5zdGFudC5jb250ZXh0LmdldElEKCk7XG5cdGlmIChuZXdDb250ZXh0SWQgJiYgbmV3Q29udGV4dElkICE9PSBpbnN0YW50Q29udGV4dElkKSB7XG5cdFx0Ly8gTmV3IG9yIGluaXRpYWwgdmFsdWVcblx0XHRpbnN0YW50Q29udGV4dElkID0gbmV3Q29udGV4dElkO1xuXHRcdEV2ZW50LmZpcmUoSV9DVFhfQ0hHLCBpbnN0YW50Q29udGV4dElkKTtcblx0fVxufVxuRXZlbnQubGFzdChJX1NUQVJULCAoKSA9PiB7XG5cdC8vIElmIHRoZSBnYW1lIGhhcyBzdGFydGVkIHRoZW4gdGhlIFRPUyBoYXMgYmVlbiBhY2NlcHRlZFxuXHRFdmVudC5maXJlKEV2ZW50cy5JTlNUQU5UX0ZCX1RPU19BQ0NFUFQsIHRydWUpO1xufSk7XG5cbi8vIEluaXRpYWwgY29udGV4dCBJRCBpcyBub3Qga25vd24gdW50aWwgYWZ0ZXIgZmFjZWJvb2sgdGVsbHMgdGhlIGdhbWUgdG8gc3RhcnRcbkV2ZW50Lm9uKElfU1RBUlQsIGNoZWNrQ29udGV4dElkQ2hhbmdlKTtcbi8vIENvbnRleHQgaWQgY2FuIGNoYW5nZSBiZXR3ZWVuIHJvdW5kcy5cbkV2ZW50Lm9uKElfUkVQTEFZLCBjaGVja0NvbnRleHRJZENoYW5nZSk7XG4iLCIvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tbWVudC1mb3JtYXRcbi8vLzxhbWQtbW9kdWxlIG5hbWU9XCJaeW5nYUxlYWRlcmJvYXJkXCIvPlxuaW1wb3J0IHsgVXNlclByb2ZpbGVGaWVsZHNUeXBlIH0gZnJvbSAnQVRHLVR1cm5zJztcbmltcG9ydCBaeW5nYSA9IHJlcXVpcmUoJy4vWnluZ2EnKTtcbmltcG9ydCBaeW5nYUFjY291bnQgPSByZXF1aXJlKCcuL1p5bmdhQWNjb3VudCcpO1xuaW1wb3J0IFp5bmdhQ29udGV4dFRyYWNrZXIgPSByZXF1aXJlKCcuL1p5bmdhQ29udGV4dFRyYWNrZXInKTtcbmltcG9ydCBaeW5nYUluc3RhbnQgPSByZXF1aXJlKCcuL1p5bmdhSW5zdGFudCcpO1xuaW1wb3J0IFp5bmdhTmV0ID0gcmVxdWlyZSgnLi9aeW5nYU5ldCcpO1xuaW1wb3J0IFp5bmdhUHJvZmlsZSA9IHJlcXVpcmUoJy4vWnluZ2FQcm9maWxlJyk7XG5cbmNvbnN0IGxlYWRlcmJvYXJkU2VydmljZVZlcnNpb24gPSAndjInO1xuZXhwb3J0IGludGVyZmFjZSBTZXRTY29yZU9wdGlvbnMge1xuXHRleHRyYT86IGFueTsgLy8gQW55IGV4dHJhIGRhdGEgdG8gc3RvcmUgd2l0aCB0aGUgdXNlclxuXHR0aWVyPzogc3RyaW5nOyAvLyBUaWVyIHRvIGFzc2lnbiB0aGUgdXNlclxuXHRvbmx5SWZCZXR0ZXJEaXJlY3Rpb24/OiAnQVNDJyB8ICdERVNDJzsgLy8gT25seSBzZXQgdGhlIHNjb3JlIGlmIGl0J3MgYmV0dGVyIHRoYW4gdGhlIGN1cnJlbnQgdmFsdWVcbn1cbmNvbnN0IERFRkFVTFRfU0VUX1NDT1JFX09QVElPTlMgPSB7fTtcblxuZnVuY3Rpb24gZGVlcENsb25lPFQ+KG9iajogVCk6IFQge1xuXHR2YXIgcmV0VmFsO1xuXHR0cnkge1xuXHRcdHJldFZhbCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHQvLyBuby1vcFxuXHR9XG5cdHJldHVybiByZXRWYWw7XG59XG5cbmludGVyZmFjZSBQbGF5ZXJJbmZvIHtcblx0enluZ2FQbGF5ZXJJZDogc3RyaW5nO1xuXHRmYWNlYm9va1BsYXllcklkOiBzdHJpbmc7XG5cdHByb2ZpbGVNZXRhOiBQbGF5ZXJNZXRhO1xufVxuaW50ZXJmYWNlIFBsYXllck1ldGEge1xuXHRuYW1lOiBzdHJpbmc7XG5cdHBpY3R1cmVVUkw6IHN0cmluZztcblx0c291cmNlOiAncHJvZmlsZV9zZXJ2aWNlJyB8ICdsZWFkZXJib2FyZCcgfCAnZmJpZ19zZGsnO1xuXHR2YWxpZFRpbWU/OiBEYXRlO1xufVxuaW50ZXJmYWNlIFBsYXllcnNJbmZvSW5kZXgge1xuXHRbaW5kZXg6IHN0cmluZ106IFBsYXllckluZm87XG59XG5pbnRlcmZhY2UgUGxheWVyc0luZm8ge1xuXHR6eW5nYVBsYXllcklkSW5kZXg6IFBsYXllcnNJbmZvSW5kZXg7XG5cdGZhY2Vib29rUGxheWVySWRJbmRleDogUGxheWVyc0luZm9JbmRleDtcblx0cGxheWVyczogUGxheWVySW5mb1tdO1xufVxuXG5jb25zdCBwbGF5ZXJJbmZvQ2FjaGU6IFBsYXllcnNJbmZvID0ge1xuXHR6eW5nYVBsYXllcklkSW5kZXg6IHt9LFxuXHRmYWNlYm9va1BsYXllcklkSW5kZXg6IHt9LFxuXHRwbGF5ZXJzOiBbXVxufTtcblxuZXhwb3J0IGludGVyZmFjZSBTZXRTY29yZVJlc3VsdHMge1xuXHRzY29yZTogbnVtYmVyO1xuXHRyYW5rPzogbnVtYmVyOyAvLyByZXR1cm4gcmFuaywgZGVmYXVsdCB0cnVlXG5cdGJ1Y2tldD86IG51bWJlcjsgLy8gcmV0dXJuIGJ1Y2tldCBudW1iZXJcblx0ZW5kVGltZT86IERhdGU7IC8vIGVuZCB0aW1lIGlmIGxlYWRlcmJvYXJkIGlzIHBlcmlvZGljXG5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBMZWFkZXJib2FyZFNlcnZpY2VFcnJvciB7XG5cdGNvZGU6IG51bWJlcjtcblx0Y2F0ZWdvcnk6IHN0cmluZztcblx0bXNnOiBzdHJpbmc7XG5cdHhocj86IFhNTEh0dHBSZXF1ZXN0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExlYWRlcmJvYXJkU2VydmljZVJlc3BvbnNlIHtcblx0c3RhdHVzX2NvZGU6IDAgfCAxO1xuXHRkYXRhOiBhbnk7XG5cdGVycm9yX2RhdGE/OiBMZWFkZXJib2FyZFNlcnZpY2VFcnJvcjtcblx0ZXJyb3JfbWVzc2FnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VyQXBwSW5mbyB7XG5cdGFjY291bnREZXRhaWxzOiBaeW5nYUFjY291bnQuVXNlckFjY291bnREZXRhaWxzO1xuXHRhcHBJZDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgU2V0U2NvcmVTZXJ2aWNlSW5wdXQge1xuXHRzY29yZTogbnVtYmVyO1xuXHRkZXRhaWxzPzogYm9vbGVhbjtcblx0ZXh0cmE/OiBzdHJpbmc7XG5cdHJhbms/OiBib29sZWFuO1xuXHR0aWVyPzogc3RyaW5nO1xufVxuXG5mdW5jdGlvbiBudW1iZXJPclN0cmluZ1RvU3RyaW5nKG9iajogYW55KTogYW55IHtcblx0bGV0IHJldFZhbCA9IG9iajtcblx0aWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBvYmogPT09ICdudW1iZXInKSB7XG5cdFx0cmV0VmFsID0gb2JqLnRvU3RyaW5nKCk7XG5cdH1cblx0cmV0dXJuIHJldFZhbDtcbn1cblxuZnVuY3Rpb24gZ2V0U2VydmljZUNhbGxQcmVyZXFzKCk6IFByb21pc2U8VXNlckFwcEluZm8+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0bGV0IGFjY291bnREZXRhaWxzUHJvbWlzZSA9IFp5bmdhQWNjb3VudC5FdmVudC5sYXN0KFp5bmdhQWNjb3VudC5FdmVudHMuQUNDT1VOVF9ERVRBSUxTKTtcblx0XHRsZXQgYXBwSWRQcm9taXNlID0gWnluZ2EuRXZlbnQubGFzdChaeW5nYS5FdmVudHMuQVBQX0lEKTtcblx0XHRQcm9taXNlLmFsbChbYWNjb3VudERldGFpbHNQcm9taXNlLCBhcHBJZFByb21pc2VdKS50aGVuKChyZXN1bHRzKSA9PiB7XG5cdFx0XHRsZXQgcmV0VmFsOiBVc2VyQXBwSW5mbyA9IHtcblx0XHRcdFx0YWNjb3VudERldGFpbHM6IHJlc3VsdHNbMF0gYXMgWnluZ2FBY2NvdW50LlVzZXJBY2NvdW50RGV0YWlscyxcblx0XHRcdFx0YXBwSWQ6IHBhcnNlSW50KHJlc3VsdHNbMV0sIDEwKSBhcyBudW1iZXJcblx0XHRcdH07XG5cdFx0XHRyZXNvbHZlKHJldFZhbCk7XG5cdFx0fSk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBnZXRMZWFkZXJib2FyZFJlc3BvbnNlKHJlc3BvbnNlOiBaeW5nYU5ldC5BcGlSZXN1bHQ8YW55Pik6IFByb21pc2U8YW55PiB7XG5cdHJldHVybiBuZXcgUHJvbWlzZSgoXG5cdFx0cmVzb2x2ZTogKHJlc3BvbnNlOiBMZWFkZXJib2FyZFNlcnZpY2VSZXNwb25zZSkgPT4gdm9pZCxcblx0XHRyZWplY3Q6IChlcnI6IExlYWRlcmJvYXJkU2VydmljZUVycm9yKSA9PiB2b2lkXG5cdCkgPT4ge1xuXHRcdHZhciByZXNwb25zZU9iaiA9IHJlc3BvbnNlLmJvZHkgYXMgTGVhZGVyYm9hcmRTZXJ2aWNlUmVzcG9uc2U7XG5cdFx0aWYgKHR5cGVvZiByZXNwb25zZU9iaiA9PT0gJ29iamVjdCcgJiYgcmVzcG9uc2VPYmouaGFzT3duUHJvcGVydHkoJ3N0YXR1c19jb2RlJykpIHtcblx0XHRcdC8vIEEgcHJvcGVyIGxlYWRlcmJvYXJkIHJlc3BvbnNlXG5cdFx0XHRpZiAocmVzcG9uc2VPYmouc3RhdHVzX2NvZGUgPT09IDEpIHtcblx0XHRcdFx0bGV0IGVyciA9IHJlc3BvbnNlT2JqLmVycm9yX2RhdGE7XG5cdFx0XHRcdGVyci54aHIgPSByZXNwb25zZS54aHI7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZU9iaik7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlamVjdCh7XG5cdFx0XHRcdGNvZGU6IG51bGwsXG5cdFx0XHRcdGNhdGVnb3J5OiAnVW5rbm93biBlcnJvcicsXG5cdFx0XHRcdG1zZzogJ1Vua25vd24gcmVwb25zZSBwYXlsb2FkIGZvcm1hdCcsXG5cdFx0XHRcdHhocjogcmVzcG9uc2UueGhyXG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xufVxuXG5leHBvcnQgdHlwZSBwYXRoR2VuZXJhdG9yID0gKGluZm86IFVzZXJBcHBJbmZvKSA9PiBzdHJpbmc7XG5leHBvcnQgdHlwZSBib2R5R2VuZXJhdG9yID0gKGluZm86IFVzZXJBcHBJbmZvKSA9PiBhbnk7XG5leHBvcnQgaW50ZXJmYWNlIEN1c3RvbUxlYWRlcmJvYXJkQ2FsbFJlc3BvbnNlIHtcblx0aW5mbzogVXNlckFwcEluZm87XG5cdHJlc3BvbnNlOiBaeW5nYU5ldC5BcGlSZXN1bHQ8TGVhZGVyYm9hcmRTZXJ2aWNlUmVzcG9uc2U+O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbUxlYWRlcmJvYXJkQ2FsbChcblx0bWV0aG9kOiAnR0VUJyB8ICdQT1NUJyB8ICdQVVQnIHwgJ0RFTEVURScgfCAnUEFUQ0gnLFxuXHRwYXRoOiBzdHJpbmcgfCBwYXRoR2VuZXJhdG9yLFxuXHRib2R5PzogYW55IHwgYm9keUdlbmVyYXRvclxuKTogUHJvbWlzZTxDdXN0b21MZWFkZXJib2FyZENhbGxSZXNwb25zZT4ge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdGdldFNlcnZpY2VDYWxsUHJlcmVxcygpLnRoZW4oKGluZm8pID0+IHtcblx0XHRcdGxldCBnZW5lcmF0ZWRQYXRoID0gdHlwZW9mIHBhdGggPT09ICdmdW5jdGlvbicgPyBwYXRoKGluZm8pIDogcGF0aDtcblx0XHRcdGxldCBnZW5lcmF0ZWRCb2R5ID0gdHlwZW9mIGJvZHkgPT09ICdmdW5jdGlvbicgPyBib2R5KGluZm8pIDogYm9keTtcblx0XHRcdGxldCBvcHRpb25zOiBaeW5nYU5ldC5BcGlPcHRpb25zID0ge1xuXHRcdFx0XHR1c2VUb2tlbjogaW5mby5hY2NvdW50RGV0YWlscy50b2tlblxuXHRcdFx0fTtcblxuXHRcdFx0aWYgKGdlbmVyYXRlZEJvZHkgIT09IG51bGwgJiYgZ2VuZXJhdGVkQm9keSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdG9wdGlvbnMuYm9keSA9IGdlbmVyYXRlZEJvZHk7XG5cdFx0XHR9XG5cdFx0XHQvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG5cdFx0XHRaeW5nYU5ldC5hcGkobWV0aG9kLCBnZW5lcmF0ZWRQYXRoLCBvcHRpb25zKS50aGVuKChhcGlSZXN1bHQ6IFp5bmdhTmV0LkFwaVJlc3VsdDxMZWFkZXJib2FyZFNlcnZpY2VSZXNwb25zZT4pID0+IHtcblx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0cmVzcG9uc2U6IGFwaVJlc3VsdCxcblx0XHRcdFx0XHRpbmZvOiBpbmZvXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSwgcmVqZWN0KTtcblx0XHR9KTtcblx0fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRTY29yZShsZWFkZXJib2FyZE5hbWU6IHN0cmluZywgc2NvcmU6IG51bWJlciwgb3B0aW9uczogU2V0U2NvcmVPcHRpb25zKTogUHJvbWlzZTxTZXRTY29yZVJlc3VsdHM+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfRkJfVE9TX0FDQ0VQVCwgKCkgPT4ge1xuXHRcdFx0Y29uc3QgZXh0cmEgPSB7XG5cdFx0XHRcdHA6IHtcblx0XHRcdFx0XHRuOiBaeW5nYUluc3RhbnQucGxheWVyLmdldE5hbWUoKSxcblx0XHRcdFx0XHRwOiBaeW5nYUluc3RhbnQucGxheWVyLmdldFBob3RvKCksXG5cdFx0XHRcdFx0aTogWnluZ2FJbnN0YW50LnBsYXllci5nZXRJRCgpLFxuXHRcdFx0XHRcdHQ6IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRlOiBudWxsXG5cdFx0XHR9O1xuXHRcdFx0Y29uc3QgYm9keTogU2V0U2NvcmVTZXJ2aWNlSW5wdXQgPSB7XG5cdFx0XHRcdGRldGFpbHM6IHRydWUsXG5cdFx0XHRcdHJhbms6IHRydWUsXG5cdFx0XHRcdHNjb3JlOiBzY29yZVxuXHRcdFx0fTtcblx0XHRcdGxldCBjb250aW51ZVByb21pc2UgPSBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG5cblx0XHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IERFRkFVTFRfU0VUX1NDT1JFX09QVElPTlM7XG5cblx0XHRcdGlmIChvcHRpb25zLmV4dHJhKSB7XG5cdFx0XHRcdGV4dHJhLmUgPSBvcHRpb25zLmV4dHJhO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVsZXRlIGV4dHJhLmU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChvcHRpb25zLnRpZXIgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRib2R5LnRpZXIgPSBvcHRpb25zLnRpZXI7XG5cdFx0XHR9XG5cblx0XHRcdGxldCBvbmx5SWZCZXR0ZXJEaXJlY3Rpb24gPSBvcHRpb25zLm9ubHlJZkJldHRlckRpcmVjdGlvbiAmJiBvcHRpb25zLm9ubHlJZkJldHRlckRpcmVjdGlvbi50b1VwcGVyQ2FzZSgpO1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRvbmx5SWZCZXR0ZXJEaXJlY3Rpb24gJiZcblx0XHRcdFx0b25seUlmQmV0dGVyRGlyZWN0aW9uID09PSAnQVNDJyB8fFxuXHRcdFx0XHRvbmx5SWZCZXR0ZXJEaXJlY3Rpb24gPT09ICdERVNDJ1xuXHRcdFx0KSB7XG5cdFx0XHRcdGNvbnRpbnVlUHJvbWlzZSA9IFp5bmdhQWNjb3VudC5FdmVudC5sYXN0KFp5bmdhQWNjb3VudC5FdmVudHMuQUNDT1VOVF9ERVRBSUxTKVxuXHRcdFx0XHRcdC50aGVuKChhY2NvdW50RGV0YWlsczogWnluZ2FBY2NvdW50LlVzZXJBY2NvdW50RGV0YWlscykgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IHppZCA9IGFjY291bnREZXRhaWxzLnppZC50b1N0cmluZygpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGdldFBsYXllclNjb3Jlc0J5WnluZ2FQbGF5ZXJJZHMoW3ppZF0sIFtsZWFkZXJib2FyZE5hbWVdKS50aGVuKChyZXNwb25zZXM6IExlYWRlcmJvYXJkc0dldFJlc3BvbnNlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxldCByZXNwb25zZSA9IHJlc3BvbnNlc1tsZWFkZXJib2FyZE5hbWVdO1xuXHRcdFx0XHRcdFx0XHRsZXQgbXlQbGF5ZXIgPSByZXNwb25zZS5wbGF5ZXJzW3ppZF07XG5cdFx0XHRcdFx0XHRcdGxldCBteVNjb3JlID0gbXlQbGF5ZXIgJiYgbXlQbGF5ZXIuc2NvcmU7XG5cdFx0XHRcdFx0XHRcdGxldCBkb1NldFNjb3JlID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHRcdHNjb3JlICYmXG5cdFx0XHRcdFx0XHRcdFx0KG9ubHlJZkJldHRlckRpcmVjdGlvbiA9PT0gJ0FTQycgJiYgc2NvcmUgPj0gbXlTY29yZSkgfHxcblx0XHRcdFx0XHRcdFx0XHQob25seUlmQmV0dGVyRGlyZWN0aW9uID09PSAnREVTQycgJiYgc2NvcmUgPD0gbXlTY29yZSlcblx0XHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdFx0ZG9TZXRTY29yZSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHJldHVybiBkb1NldFNjb3JlO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnRpbnVlUHJvbWlzZS50aGVuKChkb0NvbnRpbnVlKSA9PiB7XG5cdFx0XHRcdGlmIChkb0NvbnRpbnVlKSB7XG5cdFx0XHRcdFx0bGV0IGV4dHJhU3RyaW5nID0gJyc7XG5cdFx0XHRcdFx0ZXh0cmFTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShleHRyYSk7XG5cblx0XHRcdFx0XHRpZiAoZXh0cmFTdHJpbmcubGVuZ3RoID4gMjA0OCkge1xuXHRcdFx0XHRcdFx0Ly8gVE9ETzogcmVqZWN0IHdpdGggdmFsaWRhdGlvbiBlcnJvclxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRpZiAoZXh0cmFTdHJpbmcubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0XHRib2R5LmV4dHJhID0gZXh0cmFTdHJpbmc7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjdXN0b21MZWFkZXJib2FyZENhbGwoXG5cdFx0XHRcdFx0XHRcdCdQVVQnLFxuXHRcdFx0XHRcdFx0XHQoaW5mbzogVXNlckFwcEluZm8pID0+IHsgIC8vIHBhdGggZ2VuZXJhdGlvbiBmdW5jdGlvbiBzaW5jZSB3ZSBuZWVkIGV4dHJhIGRhdGEgaW4gXCJpbmZvXCJcblx0XHRcdFx0XHRcdFx0XHQvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGAvbGVhZGVyYm9hcmRzLyR7bGVhZGVyYm9hcmRTZXJ2aWNlVmVyc2lvbn0vYXBwLyR7aW5mby5hcHBJZH0vbGVhZGVyYm9hcmQvJHtsZWFkZXJib2FyZE5hbWV9L2lkLyR7aW5mby5hY2NvdW50RGV0YWlscy5wbGF5ZXJJZH1gO1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRib2R5XG5cdFx0XHRcdFx0XHQpLnRoZW4oKGNhbGxSZXNwb25zZTogQ3VzdG9tTGVhZGVyYm9hcmRDYWxsUmVzcG9uc2UpID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IHNldFNjb3JlUmVzdWx0ID0gY2FsbFJlc3BvbnNlLnJlc3BvbnNlO1xuXHRcdFx0XHRcdFx0XHRsZXQgaW5mbyA9IGNhbGxSZXNwb25zZS5pbmZvO1xuXHRcdFx0XHRcdFx0XHRnZXRMZWFkZXJib2FyZFJlc3BvbnNlKHNldFNjb3JlUmVzdWx0KS50aGVuKChyZXNwb25zZTogTGVhZGVyYm9hcmRTZXJ2aWNlUmVzcG9uc2UpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRsZXQgcmVzcG9uc2VEYXRhID0gcmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSB8fCB7fTtcblx0XHRcdFx0XHRcdFx0XHRsZXQgbGVhZGVyYm9hcmREYXRhID0gcmVzcG9uc2UuZGF0YVtsZWFkZXJib2FyZE5hbWVdIHx8IHt9O1xuXHRcdFx0XHRcdFx0XHRcdGxldCB1c2VyRGF0YSA9IGxlYWRlcmJvYXJkRGF0YVtudW1iZXJPclN0cmluZ1RvU3RyaW5nKGluZm8uYWNjb3VudERldGFpbHMucGxheWVySWQpXSB8fCB7fTtcblx0XHRcdFx0XHRcdFx0XHRsZXQgbWV0YURhdGEgPSByZXNwb25zZURhdGEubWV0YWRhdGEgJiYgcmVzcG9uc2VEYXRhLm1ldGFkYXRhW2xlYWRlcmJvYXJkTmFtZV0gfHwge307XG5cdFx0XHRcdFx0XHRcdFx0bGV0IGJ1Y2tldCA9IHVzZXJEYXRhLmJ1Y2tldCB8fCBudWxsO1xuXHRcdFx0XHRcdFx0XHRcdGxldCByYW5rID0gdXNlckRhdGEucmFuayB8fCBudWxsO1xuXHRcdFx0XHRcdFx0XHRcdGxldCBlbmRUaW1lID0gbWV0YURhdGEuZW5kX3RpbWUgPyBuZXcgRGF0ZShtZXRhRGF0YS5lbmRfdGltZSAqIDEwMDApIDogbnVsbDtcblx0XHRcdFx0XHRcdFx0XHRsZXQgcmV0VmFsOiBTZXRTY29yZVJlc3VsdHMgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzY29yZVxuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHJhbmspIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldFZhbC5yYW5rID0gcmFuaztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGJ1Y2tldCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0VmFsLmJ1Y2tldCA9IGJ1Y2tldDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGVuZFRpbWUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldFZhbC5lbmRUaW1lID0gZW5kVGltZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZShyZXRWYWwpO1xuXHRcdFx0XHRcdFx0XHR9LCByZWplY3QpO1xuXHRcdFx0XHRcdFx0fSkuY2F0Y2goKGUpID0+IHtcblx0XHRcdFx0XHRcdFx0Ly8gVG9EbzogIEVycm9yIGhhbmRsaW5nXG5cdFx0XHRcdFx0XHRcdHJlamVjdChlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXNvbHZlKG51bGwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTsgLy8gbGFzdCBaeW5nYUluc2FudC5JTlNUQU5UX0dBTUVfU1RBUlRFRFxuXHR9KTtcbn1cblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWVtcHR5LWludGVyZmFjZVxuZXhwb3J0IGludGVyZmFjZSBMZWFkZXJib2FyZEdldE9wdGlvbnMge1xuXHQvLyB0b2RvXG59XG5leHBvcnQgaW50ZXJmYWNlIExlYWRlcmJvYXJkUGxheWVySW5mbyB7XG5cdG5hbWU6IHN0cmluZztcblx0cGhvdG9VUkw6IHN0cmluZztcblx0enluZ2FQbGF5ZXJJZDogc3RyaW5nO1xuXHRmYWNlYm9va1BsYXllcklkOiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIExlYWRlcmJvYXJkR2V0UGxheWVyIHtcblx0c2NvcmU6IG51bWJlcjtcblx0aW5mbz86IExlYWRlcmJvYXJkUGxheWVySW5mbztcblx0ZGF0YT86IGFueTtcblx0cmFuaz86IG51bWJlcjtcblx0dGllcj86IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgTGVhZGVyYm9hcmRHZXRQbGF5ZXJzIHtcblx0W2luZGV4OiBzdHJpbmddOiBMZWFkZXJib2FyZEdldFBsYXllcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgTGVhZGVyYm9hcmRHZXRSZXNwb25zZSB7XG5cdG5hbWU6IHN0cmluZztcblx0ZW5kVGltZT86IERhdGU7XG5cdHBsYXllcnM6IExlYWRlcmJvYXJkR2V0UGxheWVycztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgTGVhZGVyYm9hcmRzR2V0UmVzcG9uc2Uge1xuXHRbaW5kZXg6IHN0cmluZ106IExlYWRlcmJvYXJkR2V0UmVzcG9uc2U7XG59XG5mdW5jdGlvbiBnZXRQbGF5ZXJzSW5mb09iamVjdCh6eW5nYVBsYXllcklkczogc3RyaW5nW10sIGZhY2Vib29rUGxheWVySWRzOiBzdHJpbmdbXSk6IFByb21pc2U8UGxheWVyc0luZm8+IHtcblx0enluZ2FQbGF5ZXJJZHMgPSB6eW5nYVBsYXllcklkcyB8fCBbXTtcblx0ZmFjZWJvb2tQbGF5ZXJJZHMgPSBmYWNlYm9va1BsYXllcklkcyB8fCBbXTtcblx0bGV0IHBsYXllcnM6IFBsYXllcnNJbmZvID0ge1xuXHRcdHBsYXllcnM6IFtdLFxuXHRcdHp5bmdhUGxheWVySWRJbmRleDoge30sXG5cdFx0ZmFjZWJvb2tQbGF5ZXJJZEluZGV4OiB7fVxuXHR9O1xuXHRmb3IgKGxldCB6eW5nYVBsYXllcklkIG9mIHp5bmdhUGxheWVySWRzKSB7XG5cdFx0bGV0IHBsYXllcjogUGxheWVySW5mbyA9IHtcblx0XHRcdHp5bmdhUGxheWVySWQsXG5cdFx0XHRmYWNlYm9va1BsYXllcklkOiBudWxsLFxuXHRcdFx0cHJvZmlsZU1ldGE6IG51bGxcblx0XHR9O1xuXHRcdHBsYXllcnMucGxheWVycy5wdXNoKHBsYXllcik7XG5cdFx0cGxheWVycy56eW5nYVBsYXllcklkSW5kZXhbenluZ2FQbGF5ZXJJZF0gPSBwbGF5ZXI7XG5cdH1cblx0Zm9yIChsZXQgZmFjZWJvb2tQbGF5ZXJJZCBvZiBmYWNlYm9va1BsYXllcklkcykge1xuXHRcdGxldCBwbGF5ZXI6IFBsYXllckluZm8gPSB7XG5cdFx0XHR6eW5nYVBsYXllcklkOiBudWxsLFxuXHRcdFx0ZmFjZWJvb2tQbGF5ZXJJZCxcblx0XHRcdHByb2ZpbGVNZXRhOiBudWxsXG5cdFx0fTtcblx0XHRwbGF5ZXJzLnBsYXllcnMucHVzaChwbGF5ZXIpO1xuXHRcdHBsYXllcnMuZmFjZWJvb2tQbGF5ZXJJZEluZGV4W2ZhY2Vib29rUGxheWVySWRdID0gcGxheWVyO1xuXHR9XG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUocGxheWVycyk7XG59XG5cbmZ1bmN0aW9uIGdldFBsYXllclNjb3Jlcyhcblx0cGxheWVyczogUGxheWVyc0luZm8sXG5cdGxlYWRlcmJvYXJkTmFtZXM6IHN0cmluZ1tdLFxuXHRvcHRpb25zPzogTGVhZGVyYm9hcmRHZXRPcHRpb25zKTogUHJvbWlzZTxMZWFkZXJib2FyZHNHZXRSZXNwb25zZT4ge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdGxldCB6eW5nYVBsYXllcklkcyA9IE9iamVjdC5rZXlzKHBsYXllcnMuenluZ2FQbGF5ZXJJZEluZGV4KTtcblx0XHRsZWFkZXJib2FyZE5hbWVzID0gQXJyYXkuaXNBcnJheShsZWFkZXJib2FyZE5hbWVzKSA/IGxlYWRlcmJvYXJkTmFtZXMgOiBbbGVhZGVyYm9hcmROYW1lc107XG5cdFx0bGV0IGJvZHkgPSB7XG5cdFx0XHRkZXRhaWxzOiB0cnVlLFxuXHRcdFx0aW5jbHVkZV90aWVyOiB0cnVlLFxuXHRcdFx0ZXh0cmE6IHRydWUsXG5cdFx0XHRsZWFkZXJib2FyZHM6IGxlYWRlcmJvYXJkTmFtZXMsXG5cdFx0XHRpZHM6IHp5bmdhUGxheWVySWRzXG5cdFx0fTtcblxuXHRcdGN1c3RvbUxlYWRlcmJvYXJkQ2FsbChcblx0XHRcdCdQT1NUJyxcblx0XHRcdChpbmZvOiBVc2VyQXBwSW5mbyk6IHN0cmluZyA9PiB7XG5cdFx0XHRcdHJldHVybiBgL2xlYWRlcmJvYXJkcy8ke2xlYWRlcmJvYXJkU2VydmljZVZlcnNpb259L2FwcC8ke2luZm8uYXBwSWR9L2xlYWRlcmJvYXJkc2A7XG5cdFx0XHR9LFxuXHRcdFx0Ym9keVxuXHRcdCkudGhlbigoZ2V0UmVzdWx0OiBDdXN0b21MZWFkZXJib2FyZENhbGxSZXNwb25zZSkgPT4ge1xuXHRcdFx0bGV0IGluZm8gPSBnZXRSZXN1bHQuaW5mbztcblx0XHRcdGxldCBnZXRSZXNwb25zZSA9IGdldFJlc3VsdC5yZXNwb25zZTtcblx0XHRcdGdldExlYWRlcmJvYXJkUmVzcG9uc2UoZ2V0UmVzcG9uc2UpLnRoZW4oKHJlc3BvbnNlOiBMZWFkZXJib2FyZFNlcnZpY2VSZXNwb25zZSkgPT4ge1xuXHRcdFx0XHRsZXQgcmVzcG9uc2VEYXRhID0gcmVzcG9uc2UgJiYgcmVzcG9uc2UuZGF0YSB8fCB7fTtcblx0XHRcdFx0bGV0IG1ldGFEYXRhID0gcmVzcG9uc2VEYXRhLm1ldGFkYXRhIHx8IHt9O1xuXHRcdFx0XHRsZXQgbGVhZGVyYm9hcmRQbGF5ZXJzO1xuXHRcdFx0XHRsZXQgbGVhZGVyYm9hcmRNZXRhZGF0YTtcblx0XHRcdFx0bGV0IGxlYWRlcmJvYXJkRW50cnk6IExlYWRlcmJvYXJkR2V0UmVzcG9uc2U7XG5cdFx0XHRcdGxldCBsZWFkZXJib2FyZHNEYXRhOiBMZWFkZXJib2FyZHNHZXRSZXNwb25zZSA9IHt9O1xuXG5cdFx0XHRcdGZvciAobGV0IGxlYWRlcmJvYXJkIG9mIGxlYWRlcmJvYXJkTmFtZXMpIHtcblx0XHRcdFx0XHRsZWFkZXJib2FyZFBsYXllcnMgPSByZXNwb25zZURhdGFbbGVhZGVyYm9hcmRdIHx8IHt9O1xuXHRcdFx0XHRcdGxlYWRlcmJvYXJkTWV0YWRhdGEgPSBtZXRhRGF0YVtsZWFkZXJib2FyZF07XG5cdFx0XHRcdFx0bGVhZGVyYm9hcmRFbnRyeSA9IHtcblx0XHRcdFx0XHRcdG5hbWU6IGxlYWRlcmJvYXJkLFxuXHRcdFx0XHRcdFx0cGxheWVyczoge31cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGlmIChsZWFkZXJib2FyZE1ldGFkYXRhICYmIGxlYWRlcmJvYXJkTWV0YWRhdGEuZW5kX3RpbWUpIHtcblx0XHRcdFx0XHRcdGxlYWRlcmJvYXJkRW50cnkuZW5kVGltZSA9IG5ldyBEYXRlKGxlYWRlcmJvYXJkTWV0YWRhdGEuZW5kX3RpbWUgKiAxMDAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Zm9yIChsZXQgcGxheWVySWQgaW4gbGVhZGVyYm9hcmRQbGF5ZXJzKSB7XG5cdFx0XHRcdFx0XHRsZXQgc2VydmljZVBsYXllciA9IGxlYWRlcmJvYXJkUGxheWVyc1twbGF5ZXJJZF07XG5cdFx0XHRcdFx0XHRsZXQgY2FjaGVQbGF5ZXIgPSBwbGF5ZXJzLnp5bmdhUGxheWVySWRJbmRleFtwbGF5ZXJJZF07XG5cdFx0XHRcdFx0XHRsZXQgcGxheWVyT2JqOiBMZWFkZXJib2FyZEdldFBsYXllciA9IHtcblx0XHRcdFx0XHRcdFx0c2NvcmU6IHBhcnNlSW50KHNlcnZpY2VQbGF5ZXIuc2NvcmUsIDEwKVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdGlmICh0eXBlb2Ygc2VydmljZVBsYXllci5leHRyYSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRsZXQgaW5mb0NvbXByZXNzZWQgPSBKU09OLnBhcnNlKHNlcnZpY2VQbGF5ZXIuZXh0cmEpO1xuXHRcdFx0XHRcdFx0XHRcdC8vIHJldHVybiB1c2VyIGRhdGEgdG8gYXBwXG5cdFx0XHRcdFx0XHRcdFx0cGxheWVyT2JqLmRhdGEgPSBpbmZvQ29tcHJlc3NlZC5lO1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBpbmZvQ29tcHJlc3NlZC5wID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGV0IHVwZGF0ZVRpbWUgPSBuZXcgRGF0ZShpbmZvQ29tcHJlc3NlZC5wLnQgKiAxMDAwKTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChjYWNoZVBsYXllci5mYWNlYm9va1BsYXllcklkID09PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNhY2hlUGxheWVyLmZhY2Vib29rUGxheWVySWQgPSBudW1iZXJPclN0cmluZ1RvU3RyaW5nKGluZm9Db21wcmVzc2VkLnAuaSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBsYXllcnMuZmFjZWJvb2tQbGF5ZXJJZEluZGV4W2NhY2hlUGxheWVyLmZhY2Vib29rUGxheWVySWRdID0gY2FjaGVQbGF5ZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCFjYWNoZVBsYXllci5wcm9maWxlTWV0YSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQoY2FjaGVQbGF5ZXIucHJvZmlsZU1ldGEgJiYgY2FjaGVQbGF5ZXIucHJvZmlsZU1ldGEudmFsaWRUaW1lIDwgdXBkYXRlVGltZSlcblx0XHRcdFx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjYWNoZVBsYXllci5wcm9maWxlTWV0YSA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwaWN0dXJlVVJMOiBpbmZvQ29tcHJlc3NlZC5wLnAgfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdChjYWNoZVBsYXllci5wcm9maWxlTWV0YSA/IGNhY2hlUGxheWVyLnByb2ZpbGVNZXRhLnBpY3R1cmVVUkwgOiAnJykgfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCcnLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5hbWU6IGluZm9Db21wcmVzc2VkLnAubiB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0KGNhY2hlUGxheWVyLnByb2ZpbGVNZXRhID8gY2FjaGVQbGF5ZXIucHJvZmlsZU1ldGEubmFtZSA6ICcnKSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0JycsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsaWRUaW1lOiB1cGRhdGVUaW1lLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNvdXJjZTogJ2xlYWRlcmJvYXJkJ1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNhY2hlUGxheWVyLnByb2ZpbGVNZXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBsYXllck9iai5pbmZvID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHp5bmdhUGxheWVySWQ6IGNhY2hlUGxheWVyLnp5bmdhUGxheWVySWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZmFjZWJvb2tQbGF5ZXJJZDogY2FjaGVQbGF5ZXIuZmFjZWJvb2tQbGF5ZXJJZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiBjYWNoZVBsYXllci5wcm9maWxlTWV0YS5uYW1lLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBob3RvVVJMOiBjYWNoZVBsYXllci5wcm9maWxlTWV0YS5waWN0dXJlVVJMXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRsZWFkZXJib2FyZEVudHJ5LnBsYXllcnNbcGxheWVySWRdID0gcGxheWVyT2JqO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIG5vdGhpbmdcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRsZWFkZXJib2FyZHNEYXRhW2xlYWRlcmJvYXJkXSA9IGxlYWRlcmJvYXJkRW50cnk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dXBkYXRlWnluZ2FQbGF5ZXJJbmZvTWVtb3J5Q2FjaGUocGxheWVycyk7XG5cdFx0XHRcdHJlc29sdmUobGVhZGVyYm9hcmRzRGF0YSk7XG5cdFx0XHR9LCByZWplY3QpO1xuXHRcdH0sIHJlamVjdCk7XG5cdH0pO1xufVxuXG4vLyBwb3B1bGF0ZSBwbGF5ZXIgSUQgbWFwcGluZ3NcbmZ1bmN0aW9uIGdldFp5bmdhUGxheWVySW5mb0Zyb21NZW1vcnlDYWNoZShwbGF5ZXJzOiBQbGF5ZXJzSW5mbyk6IFByb21pc2U8UGxheWVyc0luZm8+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0cGxheWVycy5wbGF5ZXJzLmZvckVhY2goKHBsYXllcikgPT4ge1xuXHRcdFx0bGV0IGNhY2hlZEluZm8gPSBwbGF5ZXJJbmZvQ2FjaGUuZmFjZWJvb2tQbGF5ZXJJZEluZGV4W3BsYXllci5mYWNlYm9va1BsYXllcklkXSB8fFxuXHRcdFx0XHRwbGF5ZXJJbmZvQ2FjaGUuenluZ2FQbGF5ZXJJZEluZGV4W3BsYXllci56eW5nYVBsYXllcklkXTtcblx0XHRcdGlmIChjYWNoZWRJbmZvKSB7XG5cdFx0XHRcdC8vIGNvcHkgb3ZlciBjYWNoZWQgZGF0YVxuXHRcdFx0XHRwbGF5ZXIuenluZ2FQbGF5ZXJJZCA9IG51bWJlck9yU3RyaW5nVG9TdHJpbmcocGxheWVyLnp5bmdhUGxheWVySWQgfHwgY2FjaGVkSW5mby56eW5nYVBsYXllcklkKTtcblx0XHRcdFx0cGxheWVyLmZhY2Vib29rUGxheWVySWQgPSBudW1iZXJPclN0cmluZ1RvU3RyaW5nKHBsYXllci5mYWNlYm9va1BsYXllcklkIHx8IGNhY2hlZEluZm8uZmFjZWJvb2tQbGF5ZXJJZCk7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRjYWNoZWRJbmZvLnByb2ZpbGVNZXRhICYmXG5cdFx0XHRcdFx0IXBsYXllci5wcm9maWxlTWV0YSB8fFxuXHRcdFx0XHRcdChwbGF5ZXIucHJvZmlsZU1ldGEgJiYgcGxheWVyLnByb2ZpbGVNZXRhLnZhbGlkVGltZSA8IGNhY2hlZEluZm8ucHJvZmlsZU1ldGEudmFsaWRUaW1lKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHQvLyBCZXR0ZXIgbWV0YVxuXHRcdFx0XHRcdHBsYXllci5wcm9maWxlTWV0YSA9IGRlZXBDbG9uZShjYWNoZWRJbmZvLnByb2ZpbGVNZXRhKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBpbmRleCB0aGVtXG5cdFx0XHRcdHBsYXllcnMuZmFjZWJvb2tQbGF5ZXJJZEluZGV4W3BsYXllci5mYWNlYm9va1BsYXllcklkXSA9IHBsYXllcjtcblx0XHRcdFx0cGxheWVycy56eW5nYVBsYXllcklkSW5kZXhbcGxheWVyLnp5bmdhUGxheWVySWRdID0gcGxheWVyO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJlc29sdmUocGxheWVycyk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVaeW5nYVBsYXllckluZm9NZW1vcnlDYWNoZShwbGF5ZXJzOiBQbGF5ZXJzSW5mbykge1xuXHRmb3IgKGxldCBwbGF5ZXIgb2YgcGxheWVycy5wbGF5ZXJzKSB7XG5cdFx0bGV0IGNhY2hlZFBsYXllciA9IHBsYXllckluZm9DYWNoZS56eW5nYVBsYXllcklkSW5kZXhbcGxheWVyLnp5bmdhUGxheWVySWRdIHx8XG5cdFx0XHRwbGF5ZXJJbmZvQ2FjaGUuZmFjZWJvb2tQbGF5ZXJJZEluZGV4W3BsYXllci5mYWNlYm9va1BsYXllcklkXTtcblx0XHRpZiAoIWNhY2hlZFBsYXllclxuXHRcdFx0fHwgIWNhY2hlZFBsYXllci5wcm9maWxlTWV0YVxuXHRcdFx0fHwgKHBsYXllci5wcm9maWxlTWV0YSAmJiBwbGF5ZXIucHJvZmlsZU1ldGEudmFsaWRUaW1lID4gY2FjaGVkUGxheWVyLnByb2ZpbGVNZXRhLnZhbGlkVGltZSlcblx0XHQpIHtcblx0XHRcdGlmICghY2FjaGVkUGxheWVyKSB7XG5cdFx0XHRcdGNhY2hlZFBsYXllciA9IGRlZXBDbG9uZShwbGF5ZXIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2FjaGVkUGxheWVyLnByb2ZpbGVNZXRhID0gZGVlcENsb25lKHBsYXllci5wcm9maWxlTWV0YSk7XG5cdFx0XHRcdGNhY2hlZFBsYXllci5mYWNlYm9va1BsYXllcklkID0gbnVtYmVyT3JTdHJpbmdUb1N0cmluZyhjYWNoZWRQbGF5ZXIuZmFjZWJvb2tQbGF5ZXJJZCB8fCBwbGF5ZXIuZmFjZWJvb2tQbGF5ZXJJZCk7XG5cdFx0XHRcdGNhY2hlZFBsYXllci56eW5nYVBsYXllcklkID0gbnVtYmVyT3JTdHJpbmdUb1N0cmluZyhjYWNoZWRQbGF5ZXIuenluZ2FQbGF5ZXJJZCB8fCBwbGF5ZXIuenluZ2FQbGF5ZXJJZCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoY2FjaGVkUGxheWVyLmZhY2Vib29rUGxheWVySWQpIHtcblx0XHRcdFx0cGxheWVySW5mb0NhY2hlLmZhY2Vib29rUGxheWVySWRJbmRleFtjYWNoZWRQbGF5ZXIuZmFjZWJvb2tQbGF5ZXJJZF0gPSBjYWNoZWRQbGF5ZXI7XG5cdFx0XHR9XG5cdFx0XHRpZiAoY2FjaGVkUGxheWVyLnp5bmdhUGxheWVySWQpIHtcblx0XHRcdFx0cGxheWVySW5mb0NhY2hlLnp5bmdhUGxheWVySWRJbmRleFtjYWNoZWRQbGF5ZXIuenluZ2FQbGF5ZXJJZF0gPSBjYWNoZWRQbGF5ZXI7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGdldFp5bmdhQ3VycmVudFBsYXllckluZm8ocGxheWVyczogUGxheWVyc0luZm8pOiBQcm9taXNlPFBsYXllcnNJbmZvPiB7XG5cdHJldHVybiBQcm9taXNlLmFsbChbXG5cdFx0WnluZ2FBY2NvdW50LkV2ZW50Lmxhc3QoWnluZ2FBY2NvdW50LkV2ZW50cy5BQ0NPVU5UX0RFVEFJTFMpLFxuXHRcdFp5bmdhSW5zdGFudC5FdmVudC5sYXN0KFp5bmdhSW5zdGFudC5FdmVudHMuSU5TVEFOVF9JTklUSUFMSVpFRCksXG5cdFx0WnluZ2FJbnN0YW50LkV2ZW50Lmxhc3QoWnluZ2FJbnN0YW50LkV2ZW50cy5JTlNUQU5UX0ZCX1RPU19BQ0NFUFQpIC8vIFJlcXVpcmVkIHRvIGFjY2VzcyBwbGF5ZXIgcGhvdG8vbmFtZSBiZWxvd1xuXHRdKS50aGVuKChyZXN1bHRzKSA9PiB7XG5cdFx0bGV0IGFjY291bnREZXRhaWxzOiBaeW5nYUFjY291bnQuVXNlckFjY291bnREZXRhaWxzID0gcmVzdWx0c1swXTtcblx0XHRsZXQgemlkID0gYWNjb3VudERldGFpbHMuemlkLnRvU3RyaW5nKCk7XG5cdFx0bGV0IGZiUGxheWVySWQgPSBaeW5nYUluc3RhbnQucGxheWVyLmdldElEKCkudG9TdHJpbmcoKTtcblx0XHRwbGF5ZXJzLnBsYXllcnMuZm9yRWFjaCgocGxheWVyKSA9PiB7XG5cdFx0XHRpZiAocGxheWVyLmZhY2Vib29rUGxheWVySWQgPT09IGZiUGxheWVySWQgfHwgcGxheWVyLnp5bmdhUGxheWVySWQgPT09IHppZCkge1xuXHRcdFx0XHRwbGF5ZXIucHJvZmlsZU1ldGEgPSB7XG5cdFx0XHRcdFx0bmFtZTogWnluZ2FJbnN0YW50LnBsYXllci5nZXROYW1lKCksXG5cdFx0XHRcdFx0cGljdHVyZVVSTDogWnluZ2FJbnN0YW50LnBsYXllci5nZXRQaG90bygpLFxuXHRcdFx0XHRcdHZhbGlkVGltZTogbmV3IERhdGUoKSxcblx0XHRcdFx0XHRzb3VyY2U6ICdmYmlnX3Nkaydcblx0XHRcdFx0fTtcblx0XHRcdFx0cGxheWVyLmZhY2Vib29rUGxheWVySWQgPSBmYlBsYXllcklkO1xuXHRcdFx0XHRwbGF5ZXIuenluZ2FQbGF5ZXJJZCA9IHppZDtcblx0XHRcdFx0cGxheWVycy5mYWNlYm9va1BsYXllcklkSW5kZXhbZmJQbGF5ZXJJZF0gPSBwbGF5ZXI7XG5cdFx0XHRcdHBsYXllcnMuenluZ2FQbGF5ZXJJZEluZGV4W3ppZF0gPSBwbGF5ZXI7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHBsYXllcnM7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBnZXRaeW5nYVBsYXllckluZm9Gcm9tUHJvZmlsZVNlcnZpY2UocGxheWVyczogUGxheWVyc0luZm8pOiBQcm9taXNlPFBsYXllcnNJbmZvPiB7XG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0bGV0IGZhY2Vib29rUGxheWVySWRzOiBzdHJpbmdbXSA9IHBsYXllcnMucGxheWVyc1xuXHRcdFx0LmZpbHRlcigocGxheWVyOiBQbGF5ZXJJbmZvKSA9PiAhcGxheWVyLnp5bmdhUGxheWVySWQpXG5cdFx0XHQubWFwKChwbGF5ZXI6IFBsYXllckluZm8pID0+IHBsYXllci5mYWNlYm9va1BsYXllcklkKTtcblxuXHRcdGNvbnN0IHByb2ZpbGVGaWVsZHM6IFVzZXJQcm9maWxlRmllbGRzVHlwZVtdID0gW1xuXHRcdFx0J2ZiaWdfcGxheWVyX2lkJyxcblx0XHRcdCd6eW5nYV9wbGF5ZXJfaWQnLFxuXHRcdFx0J2Rpc3BsYXlfbmFtZScsXG5cdFx0XHQnZGlzcGxheV9waWN0dXJlX3VybCcsXG5cdFx0XHQncHJvZmlsZV91cGRhdGVkX2F0J1xuXHRcdF07XG5cblx0XHRpZiAoZmFjZWJvb2tQbGF5ZXJJZHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXNvbHZlKHBsYXllcnMpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRaeW5nYVByb2ZpbGUuZ2V0UHJvZmlsZXNCeUZhY2Vib29rSWRBc3luYyhmYWNlYm9va1BsYXllcklkcywgcHJvZmlsZUZpZWxkcykudGhlbigocHJvZmlsZXMpID0+IHtcblx0XHRcdFx0bGV0IGZiSWRJbmRleCA9IHByb2ZpbGVzLmluZGV4ZXMuZmFjZWJvb2s7XG5cdFx0XHRcdGZvciAobGV0IGZhY2Vib29rUGxheWVySWQgaW4gZmJJZEluZGV4KSB7XG5cdFx0XHRcdFx0bGV0IHBsYXllclByb2ZpbGUgPSBmYklkSW5kZXhbZmFjZWJvb2tQbGF5ZXJJZF07XG5cdFx0XHRcdFx0bGV0IHBsYXllciA9IHBsYXllcnMuZmFjZWJvb2tQbGF5ZXJJZEluZGV4W2ZhY2Vib29rUGxheWVySWRdO1xuXHRcdFx0XHRcdGxldCB1cGRhdGVUaW1lID0gbmV3IERhdGUocGxheWVyUHJvZmlsZS5wcm9maWxlX3VwZGF0ZWRfYXQpO1xuXHRcdFx0XHRcdHBsYXllci56eW5nYVBsYXllcklkID0gbnVtYmVyT3JTdHJpbmdUb1N0cmluZyhwbGF5ZXJQcm9maWxlLnp5bmdhX3BsYXllcl9pZCk7XG5cdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0IXBsYXllci5wcm9maWxlTWV0YSB8fFxuXHRcdFx0XHRcdFx0KHBsYXllci5wcm9maWxlTWV0YSAmJiBwbGF5ZXIucHJvZmlsZU1ldGEudmFsaWRUaW1lIDwgdXBkYXRlVGltZSlcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdC8vIEJldHRlciBtZXRhXG5cdFx0XHRcdFx0XHRwbGF5ZXIucHJvZmlsZU1ldGEgPSB7XG5cdFx0XHRcdFx0XHRcdG5hbWU6IHBsYXllclByb2ZpbGUuZGlzcGxheV9uYW1lLFxuXHRcdFx0XHRcdFx0XHRwaWN0dXJlVVJMOiBwbGF5ZXJQcm9maWxlLmRpc3BsYXlfcGljdHVyZV91cmwsXG5cdFx0XHRcdFx0XHRcdHZhbGlkVGltZTogdXBkYXRlVGltZSxcblx0XHRcdFx0XHRcdFx0c291cmNlOiAncHJvZmlsZV9zZXJ2aWNlJ1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cGxheWVycy5mYWNlYm9va1BsYXllcklkSW5kZXhbcGxheWVyLmZhY2Vib29rUGxheWVySWRdID0gcGxheWVyO1xuXHRcdFx0XHRcdHBsYXllcnMuenluZ2FQbGF5ZXJJZEluZGV4W3BsYXllci56eW5nYVBsYXllcklkXSA9IHBsYXllcjtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXNvbHZlKHBsYXllcnMpO1xuXHRcdFx0fSwgcmVqZWN0KTtcblx0XHR9XG5cdH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGxheWVyU2NvcmVzQnlGYWNlYm9va1BsYXllcklkcyhcblx0ZmFjZWJvb2tQbGF5ZXJJZHM6IHN0cmluZ1tdLFxuXHRsZWFkZXJib2FyZE5hbWVzOiBzdHJpbmdbXSxcblx0b3B0aW9ucz86IExlYWRlcmJvYXJkR2V0T3B0aW9uc1xuKTogUHJvbWlzZTxMZWFkZXJib2FyZHNHZXRSZXNwb25zZT4ge1xuXHRyZXR1cm4gZ2V0UGxheWVyc0luZm9PYmplY3QoW10sIGZhY2Vib29rUGxheWVySWRzKVxuXHRcdC50aGVuKGdldFp5bmdhUGxheWVySW5mb0Zyb21NZW1vcnlDYWNoZSlcblx0XHQudGhlbihnZXRaeW5nYUN1cnJlbnRQbGF5ZXJJbmZvKVxuXHRcdC50aGVuKGdldFp5bmdhUGxheWVySW5mb0Zyb21Qcm9maWxlU2VydmljZSlcblx0XHQudGhlbigocGxheWVyczogUGxheWVyc0luZm8pID0+IGdldFBsYXllclNjb3JlcyhwbGF5ZXJzLCBsZWFkZXJib2FyZE5hbWVzLCBvcHRpb25zKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQbGF5ZXJTY29yZXNCeVp5bmdhUGxheWVySWRzKFxuXHR6eW5nYVBsYXllcklkczogc3RyaW5nW10sXG5cdGxlYWRlcmJvYXJkTmFtZXM6IHN0cmluZ1tdLFxuXHRvcHRpb25zPzogTGVhZGVyYm9hcmRHZXRPcHRpb25zXG4pOiBQcm9taXNlPExlYWRlcmJvYXJkc0dldFJlc3BvbnNlPiB7XG5cdHJldHVybiBnZXRQbGF5ZXJzSW5mb09iamVjdCh6eW5nYVBsYXllcklkcywgW10pXG5cdFx0LnRoZW4oZ2V0WnluZ2FQbGF5ZXJJbmZvRnJvbU1lbW9yeUNhY2hlKVxuXHRcdC50aGVuKGdldFp5bmdhQ3VycmVudFBsYXllckluZm8pXG5cdFx0LnRoZW4oZ2V0WnluZ2FQbGF5ZXJJbmZvRnJvbVByb2ZpbGVTZXJ2aWNlKVxuXHRcdC50aGVuKChwbGF5ZXJzOiBQbGF5ZXJzSW5mbykgPT4gZ2V0UGxheWVyU2NvcmVzKHBsYXllcnMsIGxlYWRlcmJvYXJkTmFtZXMsIG9wdGlvbnMpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBsYXllclNjb3Jlc0J5TWl4ZWRJZHMoXG5cdHp5bmdhUGxheWVySWRzOiBzdHJpbmdbXSxcblx0ZmFjZWJvb2tQbGF5ZXJJZHM6IHN0cmluZ1tdLFxuXHRsZWFkZXJib2FyZE5hbWVzOiBzdHJpbmdbXSxcblx0b3B0aW9ucz86IExlYWRlcmJvYXJkR2V0T3B0aW9uc1xuKTogUHJvbWlzZTxMZWFkZXJib2FyZHNHZXRSZXNwb25zZT4ge1xuXHRyZXR1cm4gZ2V0UGxheWVyc0luZm9PYmplY3QoenluZ2FQbGF5ZXJJZHMsIGZhY2Vib29rUGxheWVySWRzKVxuXHRcdC50aGVuKGdldFp5bmdhUGxheWVySW5mb0Zyb21NZW1vcnlDYWNoZSlcblx0XHQudGhlbihnZXRaeW5nYUN1cnJlbnRQbGF5ZXJJbmZvKVxuXHRcdC50aGVuKGdldFp5bmdhUGxheWVySW5mb0Zyb21Qcm9maWxlU2VydmljZSlcblx0XHQudGhlbigocGxheWVyczogUGxheWVyc0luZm8pID0+IGdldFBsYXllclNjb3JlcyhwbGF5ZXJzLCBsZWFkZXJib2FyZE5hbWVzLCBvcHRpb25zKSk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGxheWVyTGlzdHMge1xuXHRpbmNsdWRlQ29ubmVjdGVkRnJpZW5kcz86IGJvb2xlYW47XG5cdGluY2x1ZGVUaGlzQ29udGV4dFBsYXllcnM/OiBib29sZWFuO1xuXHRpbmNsdWRlQWxsQ29udGV4dHNQbGF5ZXJzPzogYm9vbGVhbjtcblx0aW5jbHVkZU1lPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyaWVuZHNTY29yZXMoXG5cdGxlYWRlcmJvYXJkTmFtZXM6IHN0cmluZ1tdLFxuXHRwbGF5ZXJMaXN0T3B0aW9uczogUGxheWVyTGlzdHMsXG5cdG9wdGlvbnM/OiBMZWFkZXJib2FyZEdldE9wdGlvbnMpOiBQcm9taXNlPExlYWRlcmJvYXJkc0dldFJlc3BvbnNlPiB7XG5cblx0bGV0IHByb21pc2VzOiBBcnJheTxQcm9taXNlPHN0cmluZ1tdPj4gPSBbXG5cdFx0Ly8gaGF2ZSBhdCBsZWFzdCBvbmUgcHJvbWlzZSByZXNvbHZpbmcgd2l0aCBhbiBlbXB0eSBhcnJheVxuXHRcdFByb21pc2UucmVzb2x2ZShbXSBhcyBzdHJpbmdbXSlcblx0XTtcblxuXHRwbGF5ZXJMaXN0T3B0aW9ucyA9IHBsYXllckxpc3RPcHRpb25zIHx8IHsgaW5jbHVkZUNvbm5lY3RlZEZyaWVuZHM6IHRydWUgfTtcblxuXHRpZiAocGxheWVyTGlzdE9wdGlvbnMuaW5jbHVkZU1lKSB7XG5cdFx0cHJvbWlzZXMucHVzaChcblx0XHRcdFp5bmdhSW5zdGFudC5FdmVudC5sYXN0KFp5bmdhSW5zdGFudC5FdmVudHMuSU5TVEFOVF9JTklUSUFMSVpFRCkudGhlbigoKTogUHJvbWlzZTxzdHJpbmdbXT4gPT4ge1xuXG5cdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoW1p5bmdhSW5zdGFudC5wbGF5ZXIuZ2V0SUQoKV0pO1xuXHRcdFx0fSlcblx0XHQpO1xuXHR9XG5cblx0aWYgKHBsYXllckxpc3RPcHRpb25zLmluY2x1ZGVDb25uZWN0ZWRGcmllbmRzKSB7XG5cdFx0cHJvbWlzZXMucHVzaChcblx0XHRcdFp5bmdhSW5zdGFudC5FdmVudC5sYXN0KFp5bmdhSW5zdGFudC5FdmVudHMuSU5TVEFOVF9GQl9UT1NfQUNDRVBUKVxuXHRcdFx0XHQudGhlbihaeW5nYUluc3RhbnQucGxheWVyLmdldENvbm5lY3RlZFBsYXllcnNBc3luYylcblx0XHRcdFx0LnRoZW4oKGZiUGxheWVyc09iamVjdHM6IFp5bmdhSW5zdGFudC5QbGF5ZXJJbmZvW10pOiBQcm9taXNlPHN0cmluZ1tdPiA9PiB7XG5cdFx0XHRcdFx0bGV0IGZhY2Vib29rUGxheWVySWRzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdFx0XHRcdGZvciAobGV0IHBsYXllciBvZiBmYlBsYXllcnNPYmplY3RzKSB7XG5cdFx0XHRcdFx0XHRmYWNlYm9va1BsYXllcklkcy5wdXNoKHBsYXllci5nZXRJRCgpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWNlYm9va1BsYXllcklkcyk7XG5cdFx0XHRcdH0pXG5cdFx0KTtcblx0fVxuXG5cdGlmIChwbGF5ZXJMaXN0T3B0aW9ucy5pbmNsdWRlVGhpc0NvbnRleHRQbGF5ZXJzIHx8IHBsYXllckxpc3RPcHRpb25zLmluY2x1ZGVBbGxDb250ZXh0c1BsYXllcnMpIHtcblx0XHRwcm9taXNlcy5wdXNoKFxuXHRcdFx0UHJvbWlzZS5hbGwoW1xuXHRcdFx0XHRaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfRkJfVE9TX0FDQ0VQVCksXG5cdFx0XHRcdFp5bmdhQ29udGV4dFRyYWNrZXIuRXZlbnQubGFzdChaeW5nYUNvbnRleHRUcmFja2VyLkV2ZW50cy5DT05URVhUUylcblx0XHRcdF0pLnRoZW4oKHJlc3VsdHMpID0+IHtcblx0XHRcdFx0bGV0IGNvbnRleHRzUGxheWVyc0RhdGE6IFp5bmdhQ29udGV4dFRyYWNrZXIuQ29udGV4dEhpc3RvcmllcyA9IHJlc3VsdHNbMV07XG5cdFx0XHRcdGxldCBmYWNlYm9va1BsYXllcklkczogc3RyaW5nW10gPSBbXTtcblx0XHRcdFx0bGV0IGluY2x1ZGVBbGwgPSBwbGF5ZXJMaXN0T3B0aW9ucy5pbmNsdWRlQWxsQ29udGV4dHNQbGF5ZXJzO1xuXHRcdFx0XHRsZXQgaW5jbHVkZUN1cnJlbnQgPSBwbGF5ZXJMaXN0T3B0aW9ucy5pbmNsdWRlVGhpc0NvbnRleHRQbGF5ZXJzO1xuXHRcdFx0XHRsZXQgY3VycmVudENvbnRleHQgPSBaeW5nYUluc3RhbnQuY29udGV4dC5nZXRJRCgpO1xuXHRcdFx0XHRmb3IgKGxldCBjb250ZXh0SWQgaW4gY29udGV4dHNQbGF5ZXJzRGF0YSkge1xuXHRcdFx0XHRcdGxldCBjb250ZXh0RGF0YSA9IGNvbnRleHRzUGxheWVyc0RhdGFbY29udGV4dElkXTtcblx0XHRcdFx0XHRpZiAoKGluY2x1ZGVDdXJyZW50ICYmIGNvbnRleHREYXRhICYmIGNvbnRleHREYXRhLmNvbnRleHRJZCA9PT0gY3VycmVudENvbnRleHQpIHx8IChjb250ZXh0RGF0YSAmJiBpbmNsdWRlQWxsKSkge1xuXHRcdFx0XHRcdFx0ZmFjZWJvb2tQbGF5ZXJJZHMucHVzaC5hcHBseShmYWNlYm9va1BsYXllcklkcywgY29udGV4dERhdGEucmVjZW50UGxheWVycyk7IC8vIGRvZXMgYW4gYXBwZW5kXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFjZWJvb2tQbGF5ZXJJZHMpO1xuXHRcdFx0fSlcblx0XHQpO1xuXHR9XG5cblx0cmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKChpZEFycmF5czogc3RyaW5nW11bXSkgPT4ge1xuXHRcdGxldCBpZERpY3QgPSB7fTtcblx0XHRmb3IgKGxldCBpZEFycmF5IG9mIGlkQXJyYXlzKSB7XG5cdFx0XHRmb3IgKGxldCBmYWNlYm9va1BsYXllcklkIG9mIGlkQXJyYXkpIHtcblx0XHRcdFx0aWREaWN0W2ZhY2Vib29rUGxheWVySWRdID0gbnVsbDtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGdldFBsYXllclNjb3Jlc0J5RmFjZWJvb2tQbGF5ZXJJZHMoT2JqZWN0LmtleXMoaWREaWN0KSwgbGVhZGVyYm9hcmROYW1lcywgb3B0aW9ucyk7XG5cdH0pO1xufVxuIiwiLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNvbW1lbnQtZm9ybWF0XG4vLy88YW1kLW1vZHVsZSBuYW1lPVwiWnluZ2FMZWFkZXJib2FyZFVJXCIvPlxuaW1wb3J0IHByZWFjdCA9IHJlcXVpcmUoJ3ByZWFjdCcpO1xuaW1wb3J0IFp5bmdhQW5hbHl0aWNzID0gcmVxdWlyZSgnLi9aeW5nYUFuYWx5dGljcycpO1xuaW1wb3J0IFp5bmdhQ29udGV4dFRyYWNrZXIgPSByZXF1aXJlKCcuL1p5bmdhQ29udGV4dFRyYWNrZXInKTtcbmltcG9ydCBaeW5nYUNvcmUgPSByZXF1aXJlKCcuL1p5bmdhQ29yZScpO1xuaW1wb3J0IFp5bmdhSW5zdGFudCA9IHJlcXVpcmUoJy4vWnluZ2FJbnN0YW50Jyk7XG5pbXBvcnQgWnluZ2FMZWFkZXJib2FyZCA9IHJlcXVpcmUoJy4vWnluZ2FMZWFkZXJib2FyZCcpO1xuaW1wb3J0IFp5bmdhTGVhZGVyYm9hcmRVSUNTUyA9IHJlcXVpcmUoJy4vWnluZ2FMZWFkZXJib2FyZFVJQ1NTJyk7XG4vLyBQcmVhY3QgdXNlcyB0aGUgXCJoXCIgZnVuY3Rpb25cbmNvbnN0IGggPSBwcmVhY3QuaDtcblxuY29uc3QgSW50ZXJuYWxFdmVudCA9IG5ldyBaeW5nYUNvcmUuRXZlbnRNaXhpbigpO1xuY29uc3QgRE9NX1JEWSA9ICdkb21SZWFkeSc7XG5jb25zdCBkb2MgPSBkb2N1bWVudDtcbmNvbnN0IERBWV9TRUNPTkRTID0gNjAgKiA2MCAqIDI0O1xuY29uc3QgSE9VUl9TRUNPTkRTID0gNjAgKiA2MDtcbmNvbnN0IE1JTlVURV9TRUNPTkRTID0gNjA7XG5cbi8vIERvbSBvcGVyYXRpb25zIHNob3VsZCBub3QgaGFwcGVuIHVudGlsIHRoZSBET00gaXMgYWN0dWFsbHkgcmVhZHkuXG5mdW5jdGlvbiBjaGVja0RvbVJkeSgpIHtcblx0dmFyIHJlYWR5U3RhdGUgPSBkb2MucmVhZHlTdGF0ZTtcblx0aWYgKHJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScgfHwgcmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuXHRcdC8vIEFuIGltYWdlIHN0dWNrIGxvYWRpbmcsIGV2ZW4gYSB0cmFja2luZyBwaXhlbCwgY2FuIGNhdWUgcmVhZHlTdGF0ZSAnY29tcGxldGUnXG5cdFx0Ly8gdG8gbmV2ZXIgZmlyZS4gIFRoaXMgaXMgd2h5ICdpbnRlcmFjdGl2ZScgaXMgZ29vZCBlbm91Z2hcblx0XHRkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIGNoZWNrRG9tUmR5KTtcblx0XHRJbnRlcm5hbEV2ZW50LmZpcmUoRE9NX1JEWSwgdHJ1ZSk7XG5cdH1cbn1cbmRvYy5hZGRFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgY2hlY2tEb21SZHkpO1xuY2hlY2tEb21SZHkoKTtcblxuZXhwb3J0IGludGVyZmFjZSBMZWFkZXJib2FyZENUQURhdGEge1xuXHRsZWFkZXJib2FyZE5hbWU6IHN0cmluZztcblx0bGVhZGVyYm9hcmRJZDogc3RyaW5nO1xuXHRjdGFUeXBlOiAnemVyb1N0YXRlJyB8ICdwbGF5ZXInIHwgJ21lJyB8ICdncm91cCcgfCAncGxheU5vdycgfCAnaW52aXRlJztcblx0bGVhZGVyYm9hcmRUeXBlPzogbGVhZGVyYmFvcmRUeXBlO1xuXHRtZVBvc2l0aW9uPzogbnVtYmVyO1xuXHRjb250ZXh0SWQ/OiBzdHJpbmc7XG5cdHVzZXJJbmZvPzogWnluZ2FMZWFkZXJib2FyZC5MZWFkZXJib2FyZFBsYXllckluZm87XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVhZGVyYm9hcmRFbnRyeURhdGEge1xuXHR0eXBlOiBzdHJpbmc7XG5cdHBpY3R1cmVVUkw6IHN0cmluZztcblx0bmFtZTogc3RyaW5nO1xuXHRjaGF0TmFtZT86IHN0cmluZztcblx0c2NvcmU/OiBzdHJpbmc7XG5cdHBvc2l0aW9uPzogbnVtYmVyO1xuXHRpc01lPzogYm9vbGVhbjtcblx0c2NvcmVDaGFsbGVuZ2VMYWJlbD86IHN0cmluZztcblx0Y3RhRGF0YT86IExlYWRlcmJvYXJkQ1RBRGF0YTtcblx0Y3RhTGFiZWw/OiBzdHJpbmc7XG5cdG90aGVyUGxheWVycz86IExlYWRlcmJvYXJkRW50cnlEYXRhW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVhZGVyYm9hcmREYXRhIHtcblx0bmFtZTogc3RyaW5nOyAvLyBUaGUgbmFtZSBsYWJlbFxuXHRjb25maWdOYW1lOiBzdHJpbmc7IC8vIFRoZSBhY3R1YWwgbGVhZGVyYm9hcmQgbmFtZSAoZm9yIHRoZSBzZXJ2aWNlKVxuXHRjb25maWdJZDogc3RyaW5nO1xuXHRsZWFkZXJib2FyZEVudHJpZXM6IExlYWRlcmJvYXJkRW50cnlEYXRhW107XG5cdHZpc2libGU/OiBib29sZWFuO1xuXHRlbmRUaW1lPzogRGF0ZTtcblx0c2Vjb25kc0xlZnQ/OiBudW1iZXI7XG5cdGVuZFRpbWVMYWJlbD86IHN0cmluZztcblx0bXlQb3NpdGlvbj86IG51bWJlcjsgLy8gTXkgcG9zaXRpb24gb24gdGhlIGxlYWRlcmJvYXJkLiAgMCBtZWFucyBubyBwb3NpdGlvbiB5ZXQsIG5vbi1leGlzdGFuY2UgbWVhbnMgTi9BXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVhZGVyYm9hcmRzRGF0YSB7XG5cdG5hbWU6IHN0cmluZztcblx0bGVhZGVyYm9hcmRzOiBMZWFkZXJib2FyZERhdGFbXTtcblx0dmlzaWJsZTogYm9vbGVhbjtcblx0cmVmcmVzaGluZzogYm9vbGVhbjtcblx0c2VsZWN0ZWRMZWFkZXJib2FyZENvbmZpZ05hbWU6IHN0cmluZztcblx0c2VsZWN0ZWRMZWFkZXJib2FyZElkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVhZGVyYm9hcmRPcHRpb25zIHtcblx0cGxheUdhbWU6IChkYXRhOiBMZWFkZXJib2FyZENUQURhdGEpID0+IFByb21pc2U8Ym9vbGVhbj47XG5cdHByZUxvYWQ/OiBib29sZWFuO1xuXHR0ZXN0RGF0YT86IExlYWRlcmJvYXJkc0RhdGE7XG59XG5leHBvcnQgdHlwZSBsZWFkZXJiYW9yZFR5cGUgPSAnY3VycmVudENvbnRleHQnIHwgJ2FsbENvbnRleHRzJyB8ICdnbG9iYWwnO1xuZXhwb3J0IGludGVyZmFjZSBMZWFkZXJib2FyZENvbmZpZyB7XG5cdGxlYWRlcmJvYXJkTmFtZTogc3RyaW5nO1xuXHRsZWFkZXJib2FyZElkOiBzdHJpbmc7XG5cdHR5cGU6IGxlYWRlcmJhb3JkVHlwZTtcblx0b3JkZXI6ICdhc2MnIHwgJ2Rlc2MnO1xuXHRpbmNsdWRlUGxheWVycz86IFp5bmdhTGVhZGVyYm9hcmQuUGxheWVyTGlzdHM7XG59XG5leHBvcnQgaW50ZXJmYWNlIExlYWRlcmJvYXJkQ29uZmlncyB7XG5cdFtpbmRleDogbnVtYmVyXTogTGVhZGVyYm9hcmRDb25maWc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVhZGVyYm9hcmRzUHJvcHMge1xuXHRjb25maWdQcm9taXNlczogQXJyYXk8UHJvbWlzZTxMZWFkZXJib2FyZENvbmZpZ3M+Pjtcblx0b3B0aW9uczogTGVhZGVyYm9hcmRPcHRpb25zO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExlYWRlcmJvYWRFbnRyeUxhYmVsTWFraW5nRGF0YSB7XG5cdGNvbmZpZzogTGVhZGVyYm9hcmRDb25maWc7XG5cdGN0YURhdGE6IExlYWRlcmJvYXJkQ1RBRGF0YTtcblx0cG9zaXRpb246IG51bWJlcjtcbn1cblxuZnVuY3Rpb24gb3JkZXJQbGF5ZXJzKFxuXHRwbGF5ZXJzOiBaeW5nYUxlYWRlcmJvYXJkLkxlYWRlcmJvYXJkR2V0UGxheWVycyxcblx0b3JkZXI6IHN0cmluZyxcblx0bWVGQklEOiBzdHJpbmdcbik6IFp5bmdhTGVhZGVyYm9hcmQuTGVhZGVyYm9hcmRHZXRQbGF5ZXJbXSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhwbGF5ZXJzKVxuXHRcdC5tYXAoKHBJRDogc3RyaW5nKSA9PiBwbGF5ZXJzW3BJRF0pXG5cdFx0LnNvcnQoKGEsIGIpID0+IHtcblx0XHRcdGxldCBsZWZ0ID0gYTtcblx0XHRcdGxldCByaWdodCA9IGI7XG5cdFx0XHRpZiAob3JkZXIgPT09ICdkZXNjJykge1xuXHRcdFx0XHRsZWZ0ID0gYjtcblx0XHRcdFx0cmlnaHQgPSBhO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoYS5zY29yZSA9PT0gYi5zY29yZSAmJiBhLmluZm8uZmFjZWJvb2tQbGF5ZXJJZCA9PT0gbWVGQklEKSB7XG5cdFx0XHRcdC8vIE9yZGVyIGN1cnJlbnQgdXNlciBiZWxvdyBvdGhlciB0aWVkIHVzZXJzXG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGxlZnQuc2NvcmUgLSByaWdodC5zY29yZTtcblx0XHR9KTtcbn1cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtY2xhc3Nlcy1wZXItZmlsZVxuZXhwb3J0IGNsYXNzIExlYWRlcmJvYXJkcyBleHRlbmRzIHByZWFjdC5Db21wb25lbnQ8TGVhZGVyYm9hcmRzUHJvcHMsIExlYWRlcmJvYXJkc0RhdGE+IHtcblxuXHRwdWJsaWMgRXZlbnQ6IFp5bmdhQ29yZS5FdmVudE1peGluO1xuXHRwdWJsaWMgRXZlbnRzID0ge1xuXHRcdENPTkZJRzogJ0xlYWRlcmJvYXJkVUkuQ29uZmlnJyxcblx0XHRCQURfQ09ORklHOiAnTGVhZGVyYm9hcmRVSS5Cb0NvbmZpZycsXG5cdFx0Tk9fQ09ORklHOiAnTGVhZGVyYmFvcmRVSS5Ob0NvbmZpZycsXG5cdFx0Q1RBX0NMSUNLOiAnTGVhZGVyYmFvcmRVSS5DVEFDbGljaycsXG5cdFx0Q0xPU0U6ICdMZWFkZXJiYW9yZFVJLkNsb3NlJyxcblx0XHRPUEVOOiAnTGVhZGVyYmFvcmRVSS5PcGVuJyxcblx0XHRNT1VOVEVEOiAnTGVhZGVyYmFvcmRVSS5Nb3VudGVkJywgLy8gZGlhbG9nIGlzIGluIHRoZSBkb20gdHJlZSBub3dcblx0XHRUQUJfQ0xJQ0s6ICdMZWFkZXJib2FyZFVJLlRhYkNsaWNrJyxcblx0XHRMQl9EQVRBOiAnTGVhZGVyYm9hcmRVSS5MQkRhdGEnLFxuXHRcdFVJX0RBVEE6ICdMZWFkZXJib2FyZFVJLlVJRGF0YScsXG5cdFx0UExBWV9OT1dfQ0xJQ0s6ICdMZWFkZXJib2FyZFVJLlBsYXlOb3dDbGljaydcblx0fTtcblxuXHRwcml2YXRlIHBlbmRpbmdSZWZyZXNoOiBib29sZWFuID0gZmFsc2U7XG5cdHByaXZhdGUgbGVhZGVyYm9hcmRQcmVhY3RFbGVtZW50OiBMZWFkZXJib2FyZHM7XG5cdHByaXZhdGUgY2xvY2tUaW1lb3V0O1xuXHRwcml2YXRlIGNvbnRleHRUcmFja2luZ0RhdGE6IFp5bmdhQ29udGV4dFRyYWNrZXIuQ29udGV4dEhpc3Rvcmllcztcblx0cHJpdmF0ZSBnZXRVSVN0cmluZzogKGxhYmVsTmFtZTogc3RyaW5nLCBkYXRhPzogYW55KSA9PiBzdHJpbmc7XG5cdHByaXZhdGUgQ1RBSGFuZGxlcjogKGRhdGE6IExlYWRlcmJvYXJkQ1RBRGF0YSkgPT4gUHJvbWlzZTxib29sZWFuPjtcblx0cHJpdmF0ZSBwbGF5R2FtZTogKGRhdGE6IExlYWRlcmJvYXJkQ1RBRGF0YSkgPT4gdm9pZDtcblx0cHJpdmF0ZSB0YWJzQ2hhbmdlczogbnVtYmVyO1xuXHRjb25zdHJ1Y3Rvcihwcm9wczogTGVhZGVyYm9hcmRzUHJvcHMpIHtcblx0XHRzdXBlcigpO1xuXHRcdGxldCBvcHRpb25zID0gcHJvcHMgJiYgcHJvcHMub3B0aW9ucyB8fCB7fSBhcyBMZWFkZXJib2FyZE9wdGlvbnM7XG5cdFx0dGhpcy5zdGF0ZSA9IHtcblx0XHRcdG5hbWU6ICcnLFxuXHRcdFx0bGVhZGVyYm9hcmRzOiBbXSxcblx0XHRcdHZpc2libGU6IGZhbHNlLFxuXHRcdFx0cmVmcmVzaGluZzogdHJ1ZVxuXHRcdH0gYXMgTGVhZGVyYm9hcmRzRGF0YTtcblxuXHRcdHRoaXMudGFic0NoYW5nZXMgPSAwO1xuXG5cdFx0dGhpcy5FdmVudCA9IG5ldyBaeW5nYUNvcmUuRXZlbnRNaXhpbigpO1xuXHRcdHRoaXMuRXZlbnQub24odGhpcy5FdmVudHMuQ09ORklHLCB0aGlzLnJlZnJlc2guYmluZCh0aGlzKSwgZmFsc2UpO1xuXHRcdHRoaXMuY29udGV4dFRyYWNraW5nRGF0YSA9IHt9O1xuXG5cdFx0WnluZ2FDb250ZXh0VHJhY2tlci5FdmVudC5vbihcblx0XHRcdFp5bmdhQ29udGV4dFRyYWNrZXIuRXZlbnRzLkNPTlRFWFRTLFxuXHRcdFx0KGNvbnRleHRIaXN0b3JpZXM6IFp5bmdhQ29udGV4dFRyYWNrZXIuQ29udGV4dEhpc3RvcmllcykgPT4ge1xuXHRcdFx0XHR0aGlzLmNvbnRleHRUcmFja2luZ0RhdGEgPSBjb250ZXh0SGlzdG9yaWVzO1xuXHRcdFx0fSxcblx0XHRcdGZhbHNlXG5cdFx0KTtcblxuXHRcdC8vIERlZmF1bHRzXG5cdFx0dGhpcy5DVEFIYW5kbGVyID0gdGhpcy5jb21tb25DVEFIYW5kbGVyO1xuXHRcdHRoaXMuZ2V0VUlTdHJpbmcgPSB0aGlzLmNvbW1vbkdldFVJU3RyaW5nO1xuXG5cdFx0dGhpcy5wbGF5R2FtZSA9IChkYXRhOiBMZWFkZXJib2FyZENUQURhdGEpID0+IHVuZGVmaW5lZDtcblx0XHRpZiAob3B0aW9ucy5wbGF5R2FtZSkge1xuXHRcdFx0dGhpcy5wbGF5R2FtZSA9IG9wdGlvbnMucGxheUdhbWU7XG5cdFx0fVxuXG5cdFx0aWYgKHByb3BzLm9wdGlvbnMgJiYgcHJvcHMub3B0aW9ucy50ZXN0RGF0YSkge1xuXHRcdFx0dGhpcy5zdGF0ZSA9IHByb3BzLm9wdGlvbnMudGVzdERhdGE7XG5cdFx0fSBlbHNlIGlmIChwcm9wcy5jb25maWdQcm9taXNlcykge1xuXHRcdFx0dGhpcy5nZXRGaXJzdFdvcmtpbmdDb25maWcocHJvcHMuY29uZmlnUHJvbWlzZXMpO1xuXHRcdH1cblxuXHRcdGlmIChwcm9wcy5vcHRpb25zICYmIHByb3BzLm9wdGlvbnMucHJlTG9hZCA9PT0gdHJ1ZSkge1xuXHRcdFx0Ly8gQWxsb3cgdGltZSB0byByZWdpc3RlciBoYW5kbGVycyBpbW1lZGlhdGx5IGFmdGVyIGluc3RhbmNpYXRpb25cblx0XHRcdHNldFRpbWVvdXQodGhpcy5yZWZyZXNoLCAwKTtcblx0XHR9XG5cblx0XHRaeW5nYUluc3RhbnQuRXZlbnQub24oXG5cdFx0XHRaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfQ09OVEVYVF9JRF9DSEFOR0UsXG5cdFx0XHQoKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLnN0YXRlLnZpc2libGUgPT09IHRydWUpIHtcblx0XHRcdFx0XHQvLyBJbiB0aGUgcmFyZSBjYXNlIHdoZXJlIHdlIGFyZSBvcGVuIEFORCBjb250ZXh0IGNoYW5nZXNcblx0XHRcdFx0XHQvLyB0aGVuIHdlIHByb2JhYmx5IG5lZWQgdG8gcmVmcmVzaFxuXHRcdFx0XHRcdHRoaXMucmVmcmVzaCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0dHJ1ZVxuXHRcdCk7XG5cblx0XHR0aGlzLnNldHVwVHJhY2tpbmcoKTtcblxuXHRcdHRoaXMuY2xvY2tUaWNrKCk7XG5cdH1cblxuXHRwdWJsaWMgc2hvdygpOiB2b2lkIHtcblx0XHR0aGlzLnRhYnNDaGFuZ2VzKys7XG5cdFx0dGhpcy5zZXRTdGF0ZSh7IHZpc2libGU6IHRydWUgfSk7XG5cdFx0dGhpcy5jbG9ja1RpY2soKTtcblx0XHR0aGlzLkV2ZW50LmZpcmUodGhpcy5FdmVudHMuT1BFTik7XG5cdH1cblx0cHVibGljIGhpZGUoKTogdm9pZCB7XG5cdFx0dGhpcy50YWJzQ2hhbmdlcyA9IDA7XG5cdFx0dGhpcy5zZXRTdGF0ZSh7IHZpc2libGU6IGZhbHNlIH0pO1xuXHRcdHRoaXMuRXZlbnQuZmlyZSh0aGlzLkV2ZW50cy5DTE9TRSk7XG5cdH1cblxuXHRwdWJsaWMgcmVnaXN0ZXJDVEFIYW5kbGVyKGdhbWVDdXN0b21DVEFIYW5kbGVyOiAoZGF0YTogTGVhZGVyYm9hcmRDVEFEYXRhKSA9PiBQcm9taXNlPGJvb2xlYW4+KTogdm9pZCB7XG5cdFx0Ly8gV3JhcCB0aGUgY3VzdG9tIGhhbmRsZXIgc28gd2UgY2FuIGNhbGwgdGhlIGNvbW1vbiBvbmUgaWYgbnVsbCBpcyByZXR1cm5lZFxuXHRcdHRoaXMuQ1RBSGFuZGxlciA9IChkYXRhOiBMZWFkZXJib2FyZENUQURhdGEpID0+IHtcblx0XHRcdHJldHVybiBnYW1lQ3VzdG9tQ1RBSGFuZGxlcihkYXRhKVxuXHRcdFx0XHQudGhlbigoaGFuZGxlclJlc3VsdCkgPT4ge1xuXHRcdFx0XHRcdGlmIChoYW5kbGVyUmVzdWx0ID09PSBudWxsKSB7XG5cdFx0XHRcdFx0XHQvLyBUaGUgY3VzdG9tIGdhbWUgaGFuZGxlciB0b2xkIHVzIHRvIHVzZSB0aGUgY29tbW9uIENUQSBIYW5kbGVyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5jb21tb25DVEFIYW5kbGVyKGRhdGEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gaGFuZGxlclJlc3VsdDtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblx0fVxuXG5cdHB1YmxpYyByZWdpc3RlclVJU3RyaW5nSGFuZGxlcihnYW1lR2V0VUlTdHJpbmdIYW5kbGVyOiAobGFiZWxOYW1lOiBzdHJpbmcsIGRhdGE/OiBhbnkpID0+IHN0cmluZykge1xuXHRcdC8vIFdyYXAgdGhlIGN1c3RvbSBoYW5kbGVyIHNvIHdlIGNhbiBjYWxsIHRoZSBjb21tb24gb25lIGlmIG51bGwgaXMgcmV0dXJuZWRcblx0XHRsZXQgdGhhdCA9IHRoaXM7XG5cdFx0dGhpcy5nZXRVSVN0cmluZyA9IChsYWJlbE5hbWU6IHN0cmluZywgZGF0YT86IGFueSk6IHN0cmluZyA9PiB7XG5cdFx0XHRsZXQgZ2FtZVJlc3VsdCA9IGdhbWVHZXRVSVN0cmluZ0hhbmRsZXIobGFiZWxOYW1lLCBkYXRhKTtcblx0XHRcdGlmIChnYW1lUmVzdWx0ID09PSBudWxsKSB7XG5cdFx0XHRcdC8vIFRoZSBjdXN0b20gZ2FtZSBoYW5kbGVyIHRvbGQgdXMgdG8gdXNlIHRoZSBjb21tb24gZ2V0VUlTdHJpbmdcblx0XHRcdFx0cmV0dXJuIHRoYXQuY29tbW9uR2V0VUlTdHJpbmcobGFiZWxOYW1lLCBkYXRhKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBnYW1lUmVzdWx0O1xuXHRcdH07XG5cdH1cblxuXHRwdWJsaWMgY29tbW9uQ1RBSGFuZGxlcihkYXRhPzogTGVhZGVyYm9hcmRDVEFEYXRhKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGlmIChcblx0XHRcdFx0IWRhdGEgfHxcblx0XHRcdFx0ZGF0YS5jdGFUeXBlID09PSAncGxheU5vdycgfHxcblx0XHRcdFx0KGRhdGEubGVhZGVyYm9hcmRUeXBlID09PSAnY3VycmVudENvbnRleHQnICYmIGRhdGEuY3RhVHlwZSAhPT0gJ2ludml0ZScpIHx8XG5cdFx0XHRcdChkYXRhLmxlYWRlcmJvYXJkVHlwZSA9PT0gJ2dsb2JhbCcgJiYgKGRhdGEuY3RhVHlwZSA9PT0gJ21lJyB8fCBkYXRhLmN0YVR5cGUgPT09ICd6ZXJvU3RhdGUnKSlcblx0XHRcdCkge1xuXHRcdFx0XHRyZXNvbHZlKHRydWUpO1xuXHRcdFx0fSBlbHNlIGlmIChcblx0XHRcdFx0ZGF0YS5sZWFkZXJib2FyZFR5cGUgPT09ICdhbGxDb250ZXh0cycgfHxcblx0XHRcdFx0ZGF0YS5jdGFUeXBlID09PSAnaW52aXRlJyB8fFxuXHRcdFx0XHRkYXRhLmN0YVR5cGUgPT09ICd6ZXJvU3RhdGUnXG5cdFx0XHQpIHtcblx0XHRcdFx0c3dpdGNoIChkYXRhLmN0YVR5cGUpIHtcblx0XHRcdFx0XHRjYXNlICdncm91cCc6XG5cdFx0XHRcdFx0Y2FzZSAnbWUnOlxuXHRcdFx0XHRcdFx0WnluZ2FJbnN0YW50LmNvbnRleHQuc3dpdGNoQXN5bmMoZGF0YS5jb250ZXh0SWQpLnRoZW4oXG5cdFx0XHRcdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKHRydWUpO1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRyZWplY3Rcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdpbnZpdGUnOiAvLyBGYWxsIHRocm91Z2hcblx0XHRcdFx0XHRjYXNlICd6ZXJvU3RhdGUnOlxuXHRcdFx0XHRcdFx0WnluZ2FJbnN0YW50LmNvbnRleHQuY2hvb3NlQXN5bmMoKS50aGVuKFxuXHRcdFx0XHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSh0cnVlKTtcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0cmVqZWN0XG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZGF0YS5sZWFkZXJib2FyZFR5cGUgPT09ICdnbG9iYWwnICYmIGRhdGEuY3RhVHlwZSA9PT0gJ3BsYXllcicpIHtcblx0XHRcdFx0WnluZ2FJbnN0YW50LmNvbnRleHQuY3JlYXRlQXN5bmMoZGF0YS51c2VySW5mby5mYWNlYm9va1BsYXllcklkKS50aGVuKFxuXHRcdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRcdHJlc29sdmUodHJ1ZSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQoZXJyb3IpID0+IHtcblx0XHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdFx0dHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJlxuXHRcdFx0XHRcdFx0XHRlcnJvci5jb2RlICYmXG5cdFx0XHRcdFx0XHRcdGVycm9yLmNvZGUgPT09ICdTQU1FX0NPTlRFWFQnXG5cdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0Ly8gU2FtZSBjb250ZXh0IChwZXJzb24pLiAgV2Ugb25seSBrbm93IHRoaXMgb25jZVxuXHRcdFx0XHRcdFx0XHQvLyB3ZSB0cnkgYW5kIGZhaWxcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZSh0cnVlKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNvbWUgb3RoZXIgZXJyb3IuICBMZWdpdC5cblx0XHRcdFx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgcmVuZGVyKHByb3BzOiBMZWFkZXJib2FyZHNQcm9wcywgc3RhdGU6IExlYWRlcmJvYXJkc0RhdGEpIHtcblx0XHRjb25zdCBtYWluVmlzaWJpbGl0eUNsYXNzID0gc3RhdGUudmlzaWJsZSA/ICcnIDogJyB6X2xiX2hpZGRlbic7XG5cdFx0Y29uc3QgbWFpblJlZnJlc2hpbmdDbGFzcyA9IHN0YXRlLnJlZnJlc2hpbmcgPyAnJyA6ICcgel9sYl9yZWZyZXNoaW5nJztcblx0XHRjb25zdCBsZWFkZXJib2FyZHMgPSBzdGF0ZS5sZWFkZXJib2FyZHM7XG5cdFx0Y29uc3QgdGhhdCA9IHRoaXM7XG5cdFx0Y29uc3QgZ2V0VUlTdHJpbmcgPSB0aGlzLmdldFVJU3RyaW5nO1xuXHRcdGxldCBwbGF5Tm93QXR0cmlidXRlcyA9IHRoaXMudG91Y2hPckNsaWNrKHRoaXMuY3RhQ2xpY2suYmluZCh0aGlzLCB7XG5cdFx0XHRsZWFkZXJib2FyZENvbmZpZ05hbWU6IHN0YXRlLnNlbGVjdGVkTGVhZGVyYm9hcmRDb25maWdOYW1lLFxuXHRcdFx0bGVhZGVyYm9hcmRJZDogc3RhdGUuc2VsZWN0ZWRMZWFkZXJib2FyZElkLFxuXHRcdFx0Y3RhVHlwZTogJ3BsYXlOb3cnXG5cdFx0fSkpO1xuXHRcdHBsYXlOb3dBdHRyaWJ1dGVzWydjbGFzcyddID0gJ3pfbGJfcGxheV9ub3cnO1xuXHRcdGNvbnN0IG1haW5BdHRyaWJ1dGVzID0ge1xuXHRcdFx0Y2xhc3M6ICd6X2xiX21haW4nICsgbWFpblZpc2liaWxpdHlDbGFzcyArIG1haW5SZWZyZXNoaW5nQ2xhc3MsXG5cdFx0XHRzdHlsZTogJ2ZvbnQtc2l6ZTogJyArIE1hdGgucm91bmQod2luZG93LmlubmVyV2lkdGggLyA0MCkgKyAncHg7J1xuXHRcdH07XG5cdFx0Y29uc3QgZG9jdW1lbnRUb3VjaCA9ICh3aW5kb3cgYXMgYW55KS5Eb2N1bWVudFRvdWNoO1xuXHRcdGlmICgoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB8fCBkb2N1bWVudFRvdWNoICYmIGRvY3VtZW50IGluc3RhbmNlb2YgZG9jdW1lbnRUb3VjaCkge1xuXHRcdFx0Ly8gUHVsbGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvZmVhdHVyZS1kZXRlY3RzL3RvdWNoZXZlbnRzLmpzI0w0MFxuXHRcdFx0bWFpbkF0dHJpYnV0ZXMuY2xhc3MgPSBtYWluQXR0cmlidXRlcy5jbGFzcyArICcgel9sYl90b3VjaF9lbmFibGVkJztcblx0XHR9XG5cdFx0cmV0dXJuIDxkaXYgey4uLm1haW5BdHRyaWJ1dGVzfSA+XG5cdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl9jb250YWluZXJcIj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInpfbGJfdG9wX3NwYWNlclwiPjwvZGl2PlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl9ib3hcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl90aXRsZVwiPntzdGF0ZS5uYW1lfTwvZGl2PlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ6X2xiX3RhYnNcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ6X2xiX3RhYnNfcm93XCI+XG5cdFx0XHRcdFx0XHRcdHtsZWFkZXJib2FyZHMubWFwKChsYiwgaWR4KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0bGV0IGF0dHJpYnV0ZXMgPSB0aGlzLnRvdWNoT3JDbGljayh0aGlzLnRhYlNlbGVjdC5iaW5kKHRoaXMsIGlkeCkpO1xuXHRcdFx0XHRcdFx0XHRcdGxldCB0YWJDbGFzc2VzID0gW1xuXHRcdFx0XHRcdFx0XHRcdFx0J3pfbGJfdGFic190YWInLFxuXHRcdFx0XHRcdFx0XHRcdFx0J3pfbGJfdGFiX3RhYl9jb25maWdfaWRfJyArIGxiLmNvbmZpZ0lkXG5cdFx0XHRcdFx0XHRcdFx0XTtcblx0XHRcdFx0XHRcdFx0XHRpZiAobGIudmlzaWJsZSA9PT0gdHJ1ZSkgeyB0YWJDbGFzc2VzLnB1c2goJ3pfbGJfdGFic190YWJfYWN0aXZlJyk7IH1cblx0XHRcdFx0XHRcdFx0XHQvLyBVc2VyJ3MgcGxhY2UgaW4gdGhlIExCLiAgMCBtZWFucyBub3QgcGxhY2VkIHlldC5cblx0XHRcdFx0XHRcdFx0XHRpZiAobGIubXlQb3NpdGlvbiA+PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0YWJDbGFzc2VzLnB1c2goJ3pfbGJfbXlfcGxhY2VfJyArIGxiLm15UG9zaXRpb24pO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRpZiAobGIubXlQb3NpdGlvbiA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGFiQ2xhc3Nlcy5wdXNoKCd6X2xiX25ld190b19tZScpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRpZiAobGIuZW5kVGltZSkgeyB0YWJDbGFzc2VzLnB1c2goJ3pfbGJfaGFzX3RpbWVfcmVtYWluaW5nJyk7IH1cblx0XHRcdFx0XHRcdFx0XHRhdHRyaWJ1dGVzWydjbGFzcyddID0gdGFiQ2xhc3Nlcy5qb2luKCcgJyk7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIDxkaXYgey4uLmF0dHJpYnV0ZXN9PlxuXHRcdFx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInpfbGJfdGFic190YWJfbmFtZV9jb250YWluZXJcIj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInpfbGJfdGFic190YWJfbmFtZVwiPntsYi5uYW1lfTwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl90YWJzX3RhYl90aW1lX3JlbWFpbmluZ19jb250YWluZXJcIj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInpfbGJfdGFic190YWJfdGltZV9yZW1haW5pbmdcIj57Z2V0VUlTdHJpbmcoJ3RpbWVMZWZ0JywgbGIuc2Vjb25kc0xlZnQpfTwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdFx0PC9kaXY+O1xuXHRcdFx0XHRcdFx0XHR9KX1cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdHtsZWFkZXJib2FyZHMubWFwKChsYiwgaWR4KSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgbGJDbGFzc2VzID0gWyd6X2xiX2xlYWRlcmJhb3JkJ107XG5cdFx0XHRcdFx0XHQvLyBzZXRzIGFjdGl2ZSBMQlxuXHRcdFx0XHRcdFx0aWYgKGxiLnZpc2libGUpIHsgbGJDbGFzc2VzLnB1c2goJ3pfbGJfYWN0aXZlJyk7IH1cblx0XHRcdFx0XHRcdGlmIChsYi5lbmRUaW1lKSB7IGxiQ2xhc3Nlcy5wdXNoKCd6X2xiX2hhc190aW1lX3JlbWFpbmluZycpOyB9XG5cblx0XHRcdFx0XHRcdHJldHVybiA8ZGl2IGNsYXNzPXtsYkNsYXNzZXMuam9pbignICcpfT5cblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInpfbGJfdGltZV9yZW1haW5pbmdcIj5cblx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl90aW1lX3JlbWFpbmluZ19sYWJlbFwiPntnZXRVSVN0cmluZygndGltZUxlZnRMYWJlbCcpfTwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ6X2xiX3RpbWVfcmVtYWluaW5nX3JlbWFpbmluZ1wiPntnZXRVSVN0cmluZygndGltZUxlZnQnLCBsYi5zZWNvbmRzTGVmdCl9PC9kaXY+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl9sYl9pdGVtc1wiPlxuXHRcdFx0XHRcdFx0XHRcdHtsYi5sZWFkZXJib2FyZEVudHJpZXMubWFwKChsYkVudHJ5LCBpKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRsZXQgY2xhc3NMaXN0ID0gW1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQnel9sYl9sYl9pdGVtJyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0J3pfbGJfbGJfaXRlbV90eXBlXycgKyBsYkVudHJ5LnR5cGUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCd6X2xiX2xiX2l0ZW1fcG9zXycgKyBpXG5cdFx0XHRcdFx0XHRcdFx0XHRdO1xuXHRcdFx0XHRcdFx0XHRcdFx0bGV0IHBpY3R1cmVBdHRyaWJ1dGVzID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbGFzczogJ3pfbGJfbGJfaXRlbV9waG90bycsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHN0eWxlOiAnYmFja2dyb3VuZC1pbWFnZTogdXJsKFxcJycgKyBsYkVudHJ5LnBpY3R1cmVVUkwgKyAnXFwnKTsnXG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFx0bGV0IGN0YUF0dHJpYnV0ZXMgPSB0aGlzLnRvdWNoT3JDbGljayh0aGlzLmN0YUNsaWNrLmJpbmQodGhpcywgbGJFbnRyeS5jdGFEYXRhKSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRjdGFBdHRyaWJ1dGVzWydjbGFzcyddID0gJ3pfbGJfbGJfaXRlbV9jdGEnO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAobGJFbnRyeS5pc01lKSB7IGNsYXNzTGlzdC5wdXNoKCd6X2xiX2l0ZW1fY3VycmVudF91c2VyJyk7IH1cblx0XHRcdFx0XHRcdFx0XHRcdGlmIChsYkVudHJ5LmN0YURhdGEuY3RhVHlwZSA9PT0gJ3plcm9TdGF0ZScpIHsgY2xhc3NMaXN0LnB1c2goJ3pfbGJfaXRlbV96ZXJvX3N0YXRlJyk7IH1cblx0XHRcdFx0XHRcdFx0XHRcdGlmIChsYkVudHJ5LmN0YURhdGEuY3RhVHlwZSA9PT0gJ2ludml0ZScpIHsgY2xhc3NMaXN0LnB1c2goJ3pfbGJfaXRlbV9pbnZpdGUnKTsgfVxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIDxkaXYgY2xhc3M9e2NsYXNzTGlzdC5qb2luKCcgJyl9PlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl9sYl9pdGVtX2hlaWdodF9wcm92aWRlclwiPjwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl9sYl9pdGVtX3NlY3Rpb25fcmFua1wiPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ6X2xiX2xiX2l0ZW1fc2VjdGlvbl9yYW5rX3ZhbHVlXCI+e2xiRW50cnkucG9zaXRpb259PC9kaXY+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl9sYl9pdGVtX3NlY3Rpb25fcGljdHVyZVwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ6X2xiX2xiX2l0ZW1fcGhvdG9fd3JhcHBlclwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0PGRpdiB7Li4ucGljdHVyZUF0dHJpYnV0ZXN9IC8+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl9sYl9pdGVtX3NlY3Rpb25fbmFtZVwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ6X2xiX2xiX2l0ZW1fd3JhcHBlclwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInpfbGJfbGJfaXRlbV9uYW1lXCI+e2xiRW50cnkubmFtZX08L2Rpdj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ6X2xiX2xiX2l0ZW1fc2VjdGlvbl9jaGF0X25hbWVcIj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl9sYl9pdGVtX3dyYXBwZXJcIj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ6X2xiX2xiX2l0ZW1fY2hhdF9uYW1lXCI+e2xiRW50cnkuY2hhdE5hbWV9PC9kaXY+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl9sYl9pdGVtX3NlY3Rpb25fc2NvcmVcIj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl9sYl9pdGVtX3dyYXBwZXJcIj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ6X2xiX2xiX2l0ZW1fc2NvcmVcIj57bGJFbnRyeS5zY29yZX08L2Rpdj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ6X2xiX2xiX2l0ZW1fc2VjdGlvbl9jaGFsbGVuZ2VcIj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiel9sYl9sYl9pdGVtX3dyYXBwZXJcIj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ6X2xiX2xiX2l0ZW1fY2hhbGxlbmdlXCI+e2xiRW50cnkuc2NvcmVDaGFsbGVuZ2VMYWJlbH08L2Rpdj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ6X2xiX2xiX2l0ZW1fc2VjdGlvbl9jdGFcIj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ8ZGl2IHsuLi5jdGFBdHRyaWJ1dGVzfT57bGJFbnRyeS5jdGFMYWJlbH08L2Rpdj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj47XG5cdFx0XHRcdFx0XHRcdFx0fSl9XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PC9kaXY+O1xuXHRcdFx0XHRcdH0pfVxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PGRpdiB7Li4ucGxheU5vd0F0dHJpYnV0ZXN9PlxuXHRcdFx0XHRcdHtnZXRVSVN0cmluZygncGxheU5vdycsIHsgbGVhZGVyYm9hcmRDb25maWdOYW1lOiBzdGF0ZS5zZWxlY3RlZExlYWRlcmJvYXJkQ29uZmlnTmFtZSB9KX1cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ6X2xiX2JvdHRvbV9zcGFjZXJcIj48L2Rpdj5cblx0XHRcdDwvZGl2PlxuXHRcdFx0PGRpdiB7Li4ucGxheU5vd0F0dHJpYnV0ZXN9PlxuXHRcdFx0XHR7Z2V0VUlTdHJpbmcoJ3BsYXlOb3cnLCB7IGxlYWRlcmJvYXJkQ29uZmlnTmFtZTogc3RhdGUuc2VsZWN0ZWRMZWFkZXJib2FyZENvbmZpZ05hbWUgfSl9XG5cdFx0XHQ8L2Rpdj5cblx0XHQ8L2Rpdj47XG5cdH1cblx0cHVibGljIHJlZnJlc2goKTogdm9pZCB7XG5cdFx0bGV0IGRhdGFQcm9taXNlOiBQcm9taXNlPExlYWRlcmJvYXJkc0RhdGE+O1xuXHRcdGlmICh0aGlzLnByb3BzICYmIHRoaXMucHJvcHMub3B0aW9ucyAmJiB0aGlzLnByb3BzLm9wdGlvbnMudGVzdERhdGEpIHtcblx0XHRcdGRhdGFQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKHRoaXMucHJvcHMub3B0aW9ucy50ZXN0RGF0YSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRhdGFQcm9taXNlID0gUHJvbWlzZS5hbGwoW1xuXHRcdFx0XHR0aGlzLkV2ZW50Lmxhc3QodGhpcy5FdmVudHMuQ09ORklHKSxcblx0XHRcdFx0WnluZ2FJbnN0YW50LkV2ZW50Lmxhc3QoWnluZ2FJbnN0YW50LkV2ZW50cy5JTlNUQU5UX0ZCX1RPU19BQ0NFUFQpXG5cdFx0XHRdKS50aGVuKChhbGxSZXN1bHRzOiBhbnkpID0+IHtcblx0XHRcdFx0Y29uc3QgY29uZmlncyA9IGFsbFJlc3VsdHNbMF0gYXMgTGVhZGVyYm9hcmRDb25maWdzO1xuXG5cdFx0XHRcdGxldCBjdXJyZW50Q29udGV4dElkOiBzdHJpbmcgPSBaeW5nYUluc3RhbnQuY29udGV4dC5nZXRJRCgpO1xuXHRcdFx0XHRsZXQgY3VycmVudENvbnRleHRUeXBlOiBzdHJpbmcgPSBaeW5nYUluc3RhbnQuY29udGV4dC5nZXRUeXBlKCk7XG5cdFx0XHRcdGxldCBsZWFkZXJib2FyZFByb21pc2VzOiBBcnJheTxQcm9taXNlPFp5bmdhTGVhZGVyYm9hcmQuTGVhZGVyYm9hcmRzR2V0UmVzcG9uc2U+PiA9IFtdO1xuXHRcdFx0XHRsZXQgY29udGV4dElkTG9va3VwID0ge307XG5cdFx0XHRcdC8vIEZldGNoIGFwcHJvcHJpYXRlIGxlYWRlcmJhb3JkIGRhdGEgZm9yIGVhY2ggY29uZmlnXG5cdFx0XHRcdGZvciAobGV0IGkgaW4gY29uZmlncykge1xuXHRcdFx0XHRcdGxldCBjb25maWcgPSBjb25maWdzW2ldO1xuXHRcdFx0XHRcdGlmIChjb25maWcudHlwZSA9PT0gJ2N1cnJlbnRDb250ZXh0Jykge1xuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRDb250ZXh0VHlwZSA9PT0gJ1RIUkVBRCcgJiYgY3VycmVudENvbnRleHRJZCkge1xuXHRcdFx0XHRcdFx0XHRsZXQgbGVhZGVyYm9hcmROYW1lID0gY29uZmlnLmxlYWRlcmJvYXJkTmFtZS5yZXBsYWNlKCd7Y29udGV4dElkfScsIGN1cnJlbnRDb250ZXh0SWQpO1xuXHRcdFx0XHRcdFx0XHRsZWFkZXJib2FyZFByb21pc2VzLnB1c2goWnluZ2FMZWFkZXJib2FyZC5nZXRGcmllbmRzU2NvcmVzKFtsZWFkZXJib2FyZE5hbWVdLCBjb25maWcuaW5jbHVkZVBsYXllcnMpKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGxlYWRlcmJvYXJkUHJvbWlzZXMucHVzaChQcm9taXNlLnJlc29sdmUobnVsbCkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoY29uZmlnLnR5cGUgPT09ICdhbGxDb250ZXh0cycpIHtcblx0XHRcdFx0XHRcdGxlYWRlcmJvYXJkUHJvbWlzZXMucHVzaChcblx0XHRcdFx0XHRcdFx0WnluZ2FDb250ZXh0VHJhY2tlci5FdmVudC5sYXN0KFp5bmdhQ29udGV4dFRyYWNrZXIuRXZlbnRzLkNPTlRFWFRTKVxuXHRcdFx0XHRcdFx0XHRcdC50aGVuKChjb250ZXh0czogWnluZ2FDb250ZXh0VHJhY2tlci5Db250ZXh0SGlzdG9yaWVzKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRsZXQgbGVhZGVyYm9hcmROYW1lczogc3RyaW5nW10gPSBbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGZvciAobGV0IGNvbnRleHRJZCBpbiBjb250ZXh0cykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgY29udGV4dERhdGEgPSBjb250ZXh0c1tjb250ZXh0SWRdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY29udGV4dElkICE9PSBjdXJyZW50Q29udGV4dElkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IGxlYWRlcmJvYXJkTmFtZSA9IGNvbmZpZy5sZWFkZXJib2FyZE5hbWUucmVwbGFjZSgne2NvbnRleHRJZH0nLCBjb250ZXh0SWQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChsZWFkZXJib2FyZE5hbWUgIT09IGNvbmZpZy5sZWFkZXJib2FyZE5hbWUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGxlYWRlcmJvYXJkTmFtZXMucHVzaChsZWFkZXJib2FyZE5hbWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGV4dElkTG9va3VwW2xlYWRlcmJvYXJkTmFtZV0gPSBjb250ZXh0SWQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAobGVhZGVyYm9hcmROYW1lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBaeW5nYUxlYWRlcmJvYXJkLmdldEZyaWVuZHNTY29yZXMobGVhZGVyYm9hcmROYW1lcywgY29uZmlnLmluY2x1ZGVQbGF5ZXJzKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoe30gYXMgWnluZ2FMZWFkZXJib2FyZC5MZWFkZXJib2FyZHNHZXRSZXNwb25zZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChjb25maWcudHlwZSA9PT0gJ2dsb2JhbCcpIHtcblx0XHRcdFx0XHRcdGxlYWRlcmJvYXJkUHJvbWlzZXMucHVzaChaeW5nYUxlYWRlcmJvYXJkLmdldEZyaWVuZHNTY29yZXMoW2NvbmZpZy5sZWFkZXJib2FyZE5hbWVdLCBjb25maWcuaW5jbHVkZVBsYXllcnMpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKGxlYWRlcmJvYXJkUHJvbWlzZXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcblx0XHRcdFx0XHRsZXQgbmV3RGF0YTogTGVhZGVyYm9hcmRzRGF0YSA9IHtcblx0XHRcdFx0XHRcdG5hbWU6IHRoaXMuZ2V0VUlTdHJpbmcoJ2xlYWRlcmJvYXJkTWFpbkxhYmVsJyksXG5cdFx0XHRcdFx0XHRsZWFkZXJib2FyZHM6IFtdLFxuXHRcdFx0XHRcdFx0dmlzaWJsZTogdGhpcy5zdGF0ZSA/IHRoaXMuc3RhdGUudmlzaWJsZSA6IHRydWUsXG5cdFx0XHRcdFx0XHRyZWZyZXNoaW5nOiBmYWxzZSxcblx0XHRcdFx0XHRcdHNlbGVjdGVkTGVhZGVyYm9hcmRDb25maWdOYW1lOiAnJyxcblx0XHRcdFx0XHRcdHNlbGVjdGVkTGVhZGVyYm9hcmRJZDogJydcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdHRoaXMuRXZlbnQuZmlyZSh0aGlzLkV2ZW50cy5MQl9EQVRBLCByZXN1bHRzKTtcblx0XHRcdFx0XHQvLyBHZXQgcHJldmlvdXNseSBzZWxlY3RlZC92aXNpYmxlIGxlYWRlcmJhb3JkIG5hbWVcblx0XHRcdFx0XHR0aGlzLnN0YXRlLmxlYWRlcmJvYXJkcy5mb3JFYWNoKChsYikgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGxiLnZpc2libGUpIHtcblx0XHRcdFx0XHRcdFx0bmV3RGF0YS5zZWxlY3RlZExlYWRlcmJvYXJkQ29uZmlnTmFtZSA9IGxiLmNvbmZpZ05hbWU7XG5cdFx0XHRcdFx0XHRcdG5ld0RhdGEuc2VsZWN0ZWRMZWFkZXJib2FyZElkID0gbGIuY29uZmlnSWQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmVzdWx0cy5mb3JFYWNoKChsYlJlc3BvbnNlczogWnluZ2FMZWFkZXJib2FyZC5MZWFkZXJib2FyZHNHZXRSZXNwb25zZSwgaSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGxiUmVzcG9uc2VzICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdGxldCBjb25maWcgPSBjb25maWdzW2ldO1xuXHRcdFx0XHRcdFx0XHRsZXQgbWUgPSBaeW5nYUluc3RhbnQucGxheWVyLmdldElEKCk7XG5cdFx0XHRcdFx0XHRcdGxldCBtZVBvc2l0aW9uID0gMDsgLy8gTXkgcG9zaXRpb24gaXMgbm90IG9uIHRoZSBib2FyZCBieSBkZWZhdWx0XG5cdFx0XHRcdFx0XHRcdGxldCBsYkRhdGE6IExlYWRlcmJvYXJkRGF0YSA9IHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lOiB0aGlzLmdldFVJU3RyaW5nKCd0YWJMYWJlbCcsIGNvbmZpZy5sZWFkZXJib2FyZElkKSxcblx0XHRcdFx0XHRcdFx0XHRjb25maWdOYW1lOiBjb25maWcubGVhZGVyYm9hcmROYW1lLFxuXHRcdFx0XHRcdFx0XHRcdGNvbmZpZ0lkOiBjb25maWcubGVhZGVyYm9hcmRJZCxcblx0XHRcdFx0XHRcdFx0XHRsZWFkZXJib2FyZEVudHJpZXM6IFtdXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdGxldCBpbnZpdGVFbnRyeTogTGVhZGVyYm9hcmRFbnRyeURhdGE7XG5cdFx0XHRcdFx0XHRcdGxldCBjb21tb25JbnZpdGVFbnRyeTogTGVhZGVyYm9hcmRFbnRyeURhdGEgPSB7XG5cdFx0XHRcdFx0XHRcdFx0c2NvcmU6IG51bGwsXG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogY29uZmlnLnR5cGUsXG5cdFx0XHRcdFx0XHRcdFx0Y2hhdE5hbWU6ICcnLFxuXHRcdFx0XHRcdFx0XHRcdG5hbWU6IHRoaXMuZ2V0VUlTdHJpbmcoJ2xlYWRlcmJvYXJkSW52aXRlTGFiZWwnKSxcblx0XHRcdFx0XHRcdFx0XHRwaWN0dXJlVVJMOiAnJyxcblx0XHRcdFx0XHRcdFx0XHRpc01lOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XHRzY29yZUNoYWxsZW5nZUxhYmVsOiAnJyxcblx0XHRcdFx0XHRcdFx0XHRjdGFEYXRhOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRsZWFkZXJib2FyZE5hbWU6IGNvbmZpZy5sZWFkZXJib2FyZE5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRsZWFkZXJib2FyZElkOiBjb25maWcubGVhZGVyYm9hcmRJZCxcblx0XHRcdFx0XHRcdFx0XHRcdGN0YVR5cGU6ICdpbnZpdGUnLFxuXHRcdFx0XHRcdFx0XHRcdFx0bGVhZGVyYm9hcmRUeXBlOiBjb25maWcudHlwZSxcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRleHRJZDogY3VycmVudENvbnRleHRJZCxcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdGN0YUxhYmVsOiB0aGlzLmdldFVJU3RyaW5nKCdsZWFkZXJiYW9yZEludml0ZUNUQScpLFxuXHRcdFx0XHRcdFx0XHRcdHBvc2l0aW9uOiBudWxsXG5cdFx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHRcdFx0aWYgKGNvbmZpZy50eXBlID09PSAnY3VycmVudENvbnRleHQnIHx8IGNvbmZpZy50eXBlID09PSAnZ2xvYmFsJykge1xuXHRcdFx0XHRcdFx0XHRcdGxldCByZXN1bHQgPSBsYlJlc3BvbnNlc1tjb25maWcubGVhZGVyYm9hcmROYW1lLnJlcGxhY2UoJ3tjb250ZXh0SWR9JywgY3VycmVudENvbnRleHRJZCldO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChyZXN1bHQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxldCBwbGF5ZXJzID0gb3JkZXJQbGF5ZXJzKHJlc3VsdC5wbGF5ZXJzLCBjb25maWcub3JkZXIsIG1lKTtcblx0XHRcdFx0XHRcdFx0XHRcdGxldCBoYXNPdGhlcnMgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChyZXN1bHQuZW5kVGltZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRsYkRhdGEuZW5kVGltZSA9IHJlc3VsdC5lbmRUaW1lO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0cGxheWVycy5mb3JFYWNoKChwbGF5ZXIsIHBsYXllclBvc2l0aW9uKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChwbGF5ZXIuaW5mby5mYWNlYm9va1BsYXllcklkID09PSBtZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1lUG9zaXRpb24gPSBwbGF5ZXJQb3NpdGlvbiArIDE7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aGFzT3RoZXJzID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRsYkRhdGEubXlQb3NpdGlvbiA9IG1lUG9zaXRpb247XG5cdFx0XHRcdFx0XHRcdFx0XHRmb3IgKGxldCBwbGF5ZXIgb2YgcGxheWVycykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAocGxheWVyLmluZm8pIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgY3RhRGF0YTogTGVhZGVyYm9hcmRDVEFEYXRhID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGVhZGVyYm9hcmROYW1lOiBjb25maWcubGVhZGVyYm9hcmROYW1lLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGVhZGVyYm9hcmRJZDogY29uZmlnLmxlYWRlcmJvYXJkSWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjdGFUeXBlOiBwbGF5ZXIuaW5mby5mYWNlYm9va1BsYXllcklkID09PSBtZSA/ICdtZScgOiAncGxheWVyJyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGxlYWRlcmJvYXJkVHlwZTogY29uZmlnLnR5cGUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtZVBvc2l0aW9uOiBtZVBvc2l0aW9uLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGV4dElkOiBjdXJyZW50Q29udGV4dElkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dXNlckluZm86IHBsYXllci5pbmZvXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgbGFiZWxNYWtpbmdEYXRhID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uZmlnLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y3RhRGF0YSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBvc2l0aW9uOiBsYkRhdGEubGVhZGVyYm9hcmRFbnRyaWVzLmxlbmd0aCArIDEsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY29yZTogcGxheWVyLnNjb3JlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsYkRhdGEubGVhZGVyYm9hcmRFbnRyaWVzLnB1c2goe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogY29uZmlnLnR5cGUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY29yZTogdGhpcy5nZXRVSVN0cmluZygnbGVhZGVyYm9hcmRJdGVtU2NvcmUnLCBsYWJlbE1ha2luZ0RhdGEpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2hhdE5hbWU6IHRoaXMuZ2V0VUlTdHJpbmcoJ2xlYWRlcmJvYXJkSXRlbUNoYXROYW1lJywgbGFiZWxNYWtpbmdEYXRhKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5hbWU6IHRoaXMuZ2V0VUlTdHJpbmcoJ2xlYWRlcmJvYXJkSXRlbU5hbWUnLCBsYWJlbE1ha2luZ0RhdGEpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGljdHVyZVVSTDogcGxheWVyLmluZm8ucGhvdG9VUkwsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpc01lOiBwbGF5ZXIuaW5mby5mYWNlYm9va1BsYXllcklkID09PSBtZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBvc2l0aW9uOiBsYWJlbE1ha2luZ0RhdGEucG9zaXRpb24sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY29yZUNoYWxsZW5nZUxhYmVsOiB0aGlzLmdldFVJU3RyaW5nKCdsZWFkZXJiYW9yZEl0ZW1TY29yZUNoYWxsZW5nZScsIGxhYmVsTWFraW5nRGF0YSksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjdGFMYWJlbDogdGhpcy5nZXRVSVN0cmluZygnY3RhTGFiZWwnLCBsYWJlbE1ha2luZ0RhdGEpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y3RhRGF0YVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaGFzT3RoZXJzID09PSBmYWxzZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBQdXNoIGEgc3BlY2lhbCBpbnZpdGUgZW50cnlcblx0XHRcdFx0XHRcdFx0XHRcdFx0aW52aXRlRW50cnkgPSBjb21tb25JbnZpdGVFbnRyeTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoY29uZmlnLnR5cGUgPT09ICdhbGxDb250ZXh0cycpIHtcblx0XHRcdFx0XHRcdFx0XHRpbnZpdGVFbnRyeSA9IGNvbW1vbkludml0ZUVudHJ5OyAvLyBBbHdheXMgYWRkIHRoaXMgb24gYWxsQ29udGV4dHMgdHlwZVxuXHRcdFx0XHRcdFx0XHRcdE9iamVjdC5rZXlzKGxiUmVzcG9uc2VzKS5mb3JFYWNoKChsYk5hbWU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGV0IGxiQ29udGV4dElkID0gY29udGV4dElkTG9va3VwW2xiTmFtZV07XG5cdFx0XHRcdFx0XHRcdFx0XHRsZXQgbGJSZXNwb25zZSA9IGxiUmVzcG9uc2VzW2xiTmFtZV07XG5cdFx0XHRcdFx0XHRcdFx0XHRsZXQgbGJQbGF5ZXJzID0gb3JkZXJQbGF5ZXJzKGxiUmVzcG9uc2UucGxheWVycywgY29uZmlnLm9yZGVyLCBtZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAobGJSZXNwb25zZS5lbmRUaW1lKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxiRGF0YS5lbmRUaW1lID0gbGJSZXNwb25zZS5lbmRUaW1lO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGxiUGxheWVycy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxldCB0b3BQbGF5ZXIgPSBsYlBsYXllcnNbMF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0b3BQbGF5ZXIuaW5mbykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGxldCBjdGFEYXRhOiBMZWFkZXJib2FyZENUQURhdGEgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsZWFkZXJib2FyZE5hbWU6IGNvbmZpZy5sZWFkZXJib2FyZE5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsZWFkZXJib2FyZElkOiBjb25maWcubGVhZGVyYm9hcmRJZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN0YVR5cGU6IHRvcFBsYXllci5pbmZvLmZhY2Vib29rUGxheWVySWQgPT09IG1lID8gJ21lJyA6ICdncm91cCcsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsZWFkZXJib2FyZFR5cGU6IGNvbmZpZy50eXBlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGV4dElkOiBsYkNvbnRleHRJZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHVzZXJJbmZvOiB0b3BQbGF5ZXIuaW5mb1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IGxhYmVsTWFraW5nRGF0YSA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbmZpZyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN0YURhdGEsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwb3NpdGlvbjogbnVsbCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjb3JlOiB0b3BQbGF5ZXIuc2NvcmVcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGxiRGF0YS5sZWFkZXJib2FyZEVudHJpZXMucHVzaCh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBjb25maWcudHlwZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjb3JlOiB0aGlzLmdldFVJU3RyaW5nKCdsZWFkZXJib2FyZEl0ZW1TY29yZScsIGxhYmVsTWFraW5nRGF0YSksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjaGF0TmFtZTogdGhpcy5nZXRVSVN0cmluZygnbGVhZGVyYm9hcmRJdGVtQ2hhdE5hbWUnLCBsYWJlbE1ha2luZ0RhdGEpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bmFtZTogdGhpcy5nZXRVSVN0cmluZygnbGVhZGVyYm9hcmRJdGVtTmFtZScsIGxhYmVsTWFraW5nRGF0YSksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwaWN0dXJlVVJMOiB0b3BQbGF5ZXIuaW5mby5waG90b1VSTCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlzTWU6IHRvcFBsYXllci5pbmZvLmZhY2Vib29rUGxheWVySWQgPT09IG1lLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cG9zaXRpb246IG51bGwsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY29yZUNoYWxsZW5nZUxhYmVsOiB0aGlzLmdldFVJU3RyaW5nKCdsZWFkZXJiYW9yZEl0ZW1TY29yZUNoYWxsZW5nZScsIGxhYmVsTWFraW5nRGF0YSksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjdGFMYWJlbDogdGhpcy5nZXRVSVN0cmluZygnY3RhTGFiZWwnLCBsYWJlbE1ha2luZ0RhdGEpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y3RhRGF0YVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU29ydCBieSBiZXN0IHNjb3JlIGZpcnN0XG5cdFx0XHRcdFx0XHRcdFx0bGJEYXRhLmxlYWRlcmJvYXJkRW50cmllcyA9IGxiRGF0YS5sZWFkZXJib2FyZEVudHJpZXMuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgYVNjb3JlID0gcGFyc2VJbnQoYS5zY29yZSwgMTApIHx8IDA7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBiU2NvcmUgPSBwYXJzZUludChiLnNjb3JlLCAxMCkgfHwgMDtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChjb25maWcub3JkZXIgPT09ICdhc2MnKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBhU2NvcmUgLSBiU2NvcmU7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYlNjb3JlIC0gYVNjb3JlO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmIChsYkRhdGEubGVhZGVyYm9hcmRFbnRyaWVzLmxlbmd0aCA9PT0gMCAmJiBjb25maWcudHlwZSAhPT0gJ2FsbENvbnRleHRzJykge1xuXHRcdFx0XHRcdFx0XHRcdC8vIEFkZCBhIFplcm8tU3RhdGUgZW50cnlcblx0XHRcdFx0XHRcdFx0XHRsZXQgY3RhRGF0YTogTGVhZGVyYm9hcmRDVEFEYXRhID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGVhZGVyYm9hcmROYW1lOiBjb25maWcubGVhZGVyYm9hcmROYW1lLFxuXHRcdFx0XHRcdFx0XHRcdFx0bGVhZGVyYm9hcmRJZDogY29uZmlnLmxlYWRlcmJvYXJkSWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRjdGFUeXBlOiAnemVyb1N0YXRlJyxcblx0XHRcdFx0XHRcdFx0XHRcdGxlYWRlcmJvYXJkVHlwZTogY29uZmlnLnR5cGVcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdGxldCBsYWJlbE1ha2luZ0RhdGEgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25maWcsXG5cdFx0XHRcdFx0XHRcdFx0XHRjdGFEYXRhLFxuXHRcdFx0XHRcdFx0XHRcdFx0cG9zaXRpb246IDFcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdGxiRGF0YS5sZWFkZXJib2FyZEVudHJpZXMucHVzaCh7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBjb25maWcudHlwZSxcblx0XHRcdFx0XHRcdFx0XHRcdHNjb3JlOiB0aGlzLmdldFVJU3RyaW5nKCdsZWFkZXJib2FyZEl0ZW1TY29yZScsIGxhYmVsTWFraW5nRGF0YSksXG5cdFx0XHRcdFx0XHRcdFx0XHRjaGF0TmFtZTogdGhpcy5nZXRVSVN0cmluZygnbGVhZGVyYm9hcmRJdGVtQ2hhdE5hbWUnLCBsYWJlbE1ha2luZ0RhdGEpLFxuXHRcdFx0XHRcdFx0XHRcdFx0bmFtZTogdGhpcy5nZXRVSVN0cmluZygnbGVhZGVyYm9hcmRJdGVtTmFtZScsIGxhYmVsTWFraW5nRGF0YSksXG5cdFx0XHRcdFx0XHRcdFx0XHRwaWN0dXJlVVJMOiB0aGlzLmdldFVJU3RyaW5nKCdsZWFkZXJib2FyZEl0ZW1QaWN0dXJlVVJMJywgbGFiZWxNYWtpbmdEYXRhKSxcblx0XHRcdFx0XHRcdFx0XHRcdGlzTWU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdFx0cG9zaXRpb246IGxhYmVsTWFraW5nRGF0YS5wb3NpdGlvbixcblx0XHRcdFx0XHRcdFx0XHRcdHNjb3JlQ2hhbGxlbmdlTGFiZWw6IHRoaXMuZ2V0VUlTdHJpbmcoJ2xlYWRlcmJhb3JkSXRlbVNjb3JlQ2hhbGxlbmdlJywgbGFiZWxNYWtpbmdEYXRhKSxcblx0XHRcdFx0XHRcdFx0XHRcdGN0YUxhYmVsOiB0aGlzLmdldFVJU3RyaW5nKCdjdGFMYWJlbCcsIGxhYmVsTWFraW5nRGF0YSksXG5cdFx0XHRcdFx0XHRcdFx0XHRjdGFEYXRhXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYgKGludml0ZUVudHJ5KSB7XG5cdFx0XHRcdFx0XHRcdFx0bGJEYXRhLmxlYWRlcmJvYXJkRW50cmllcy5wdXNoKGludml0ZUVudHJ5KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRuZXdEYXRhLmxlYWRlcmJvYXJkcy5wdXNoKGxiRGF0YSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgdGhpcyk7XG5cblx0XHRcdFx0XHQvLyBFbnN1cmUgdGhlIG5ldyBkYXRhIGFsc28gaGFzIHRoZSBsYXN0IHNlbGVjdGVkIHRhYiBzZWxlY3RlZC92aXNpYmxlXG5cdFx0XHRcdFx0bGV0IG5ld1NlbGVjdGVkUG9zaXRpb24gPSAwO1xuXHRcdFx0XHRcdG5ld0RhdGEubGVhZGVyYm9hcmRzLmZvckVhY2goKGxiLCBpKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAobGIubmFtZSA9PT0gbmV3RGF0YS5zZWxlY3RlZExlYWRlcmJvYXJkQ29uZmlnTmFtZSkge1xuXHRcdFx0XHRcdFx0XHRuZXdTZWxlY3RlZFBvc2l0aW9uID0gaTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRuZXdEYXRhLmxlYWRlcmJvYXJkc1tuZXdTZWxlY3RlZFBvc2l0aW9uXS52aXNpYmxlID0gdHJ1ZTtcblx0XHRcdFx0XHRyZXR1cm4gbmV3RGF0YTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0ZGF0YVByb21pc2UudGhlbigobmV3U3RhdGUpID0+IHtcblx0XHRcdHRoaXMuRXZlbnQuZmlyZSh0aGlzLkV2ZW50cy5VSV9EQVRBLCBuZXdTdGF0ZSk7XG5cdFx0XHR0aGlzLnNldFN0YXRlKG5ld1N0YXRlKTtcblx0XHRcdHRoaXMuY2xvY2tUaWNrKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG5cdFx0Y2xlYXJUaW1lb3V0KHRoaXMuY2xvY2tUaW1lb3V0KTtcblx0fVxuXG5cdHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcblx0XHR0aGlzLkV2ZW50LmZpcmUodGhpcy5FdmVudHMuTU9VTlRFRCk7XG5cdH1cblxuXHRwdWJsaWMgc2VsZWN0VGFiID0gZnVuY3Rpb24gKGxiSW5kZXgpIHtcblx0XHR0aGlzLnRhYlNlbGVjdChsYkluZGV4KTtcblx0fTtcblxuXHRwcml2YXRlIGxvZ0xlYWRlcmJvYXJkVmlldyhsZWFkZXJib2FyZDogTGVhZGVyYm9hcmREYXRhKSB7XG5cdFx0bGV0IGxiTmFtZSA9IGxlYWRlcmJvYXJkICYmIGxlYWRlcmJvYXJkLmNvbmZpZ05hbWUgfHwgJ3Vua25vd24nO1xuXHRcdGxldCBpdGVtQ291bnQgPSBsZWFkZXJib2FyZCAmJiBsZWFkZXJib2FyZC5sZWFkZXJib2FyZEVudHJpZXNcblx0XHRcdC5maWx0ZXIoKGxiZSkgPT4gKGxiZS5jdGFEYXRhLmN0YVR5cGUgIT09ICd6ZXJvU3RhdGUnKSlcblx0XHRcdC5sZW5ndGg7XG5cblx0XHRaeW5nYUFuYWx5dGljcy5sb2dDb3VudCh7XG5cdFx0XHRjb3VudGVyOiAnbGVhZGVyYm9hcmQnLFxuXHRcdFx0dmFsdWU6IHRoaXMudGFic0NoYW5nZXMsXG5cdFx0XHRraW5nZG9tOiBsZWFkZXJib2FyZC5jb25maWdJZCxcblx0XHRcdHBoeWx1bTogaXRlbUNvdW50LnRvU3RyaW5nKClcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgc2V0dXBUcmFja2luZygpIHtcblx0XHR0aGlzLkV2ZW50Lm9uKFxuXHRcdFx0dGhpcy5FdmVudHMuT1BFTixcblx0XHRcdCgpID0+IHtcblx0XHRcdFx0dGhpcy5FdmVudC5sYXN0KHRoaXMuRXZlbnRzLlVJX0RBVEEsICgpID0+IHtcblx0XHRcdFx0XHQvLyBXYWl0IHVudGlsIHdlIGhhdmUgZGF0YSBpbiBjYXNlIHdlIGFyZSBvcGVuZWQgdG9vIGVhcmx5XG5cdFx0XHRcdFx0dGhpcy5sb2dMZWFkZXJib2FyZFZpZXcodGhpcy5zdGF0ZS5sZWFkZXJib2FyZHNbMF0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0XHR0cnVlXG5cdFx0KTtcblxuXHRcdHRoaXMuRXZlbnQub24oXG5cdFx0XHR0aGlzLkV2ZW50cy5UQUJfQ0xJQ0ssXG5cdFx0XHQobGVhZGVyYm9hcmQ6IExlYWRlcmJvYXJkRGF0YSkgPT4gdGhpcy5sb2dMZWFkZXJib2FyZFZpZXcobGVhZGVyYm9hcmQpLFxuXHRcdFx0dHJ1ZVxuXHRcdCk7XG5cblx0XHR0aGlzLkV2ZW50Lm9uKFxuXHRcdFx0dGhpcy5FdmVudHMuQ1RBX0NMSUNLLFxuXHRcdFx0KGNsaWNrRGF0YTogTGVhZGVyYm9hcmRDVEFEYXRhKTogdm9pZCA9PiB7XG5cdFx0XHRcdGNvbnN0IGxlYWRlcmJvYXJkSWQgPSBjbGlja0RhdGEubGVhZGVyYm9hcmRJZCB8fCAnJztcblx0XHRcdFx0Y29uc3QgY3RhVHlwZSA9IGNsaWNrRGF0YS5jdGFUeXBlIHx8ICcnO1xuXHRcdFx0XHRsZXQgZW50cmllcyA9IFp5bmdhQ29yZS5BcnJheUZpbmQodGhpcy5zdGF0ZS5sZWFkZXJib2FyZHMsXG5cdFx0XHRcdFx0KGxiKSA9PiBsYi5jb25maWdJZCA9PT0gbGVhZGVyYm9hcmRJZCkubGVhZGVyYm9hcmRFbnRyaWVzXG5cdFx0XHRcdFx0LmZpbHRlcigobGJlKSA9PiBsYmUuY3RhRGF0YS5jdGFUeXBlICE9PSAnemVyb1N0YXRlJylcblx0XHRcdFx0XHQubGVuZ3RoOyAvLyBDb3VudCBsYiBlbnRyaWVzIHRoYXQgYXJlIGZyaWVuZHMgb3IgY2hhdHNcblx0XHRcdFx0Y29uc3QgdHJhY2tEYXRhID0ge1xuXHRcdFx0XHRcdGNvdW50ZXI6ICdsZWFkZXJib2FyZF9hY3Rpb24nLFxuXHRcdFx0XHRcdGtpbmdkb206ICdDVEFfY2xpY2tlZCcsXG5cdFx0XHRcdFx0cGh5bHVtOiBlbnRyaWVzLnRvU3RyaW5nKCksXG5cdFx0XHRcdFx0Y2xhc3M6IGxlYWRlcmJvYXJkSWQsXG5cdFx0XHRcdFx0ZmFtaWx5OiBjdGFUeXBlXG5cdFx0XHRcdH07XG5cdFx0XHRcdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG5cdFx0XHRcdGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRyYWNrRGF0YSwgbnVsbCwgMikpO1xuXHRcdFx0XHRaeW5nYUFuYWx5dGljcy5sb2dDb3VudCh0cmFja0RhdGEpO1xuXHRcdFx0fSxcblx0XHRcdHRydWVcblx0XHQpO1xuXHR9XG5cblx0cHJpdmF0ZSBjb21tb25HZXRVSVN0cmluZyhzdHJpbmdOYW1lOiBzdHJpbmcsIGRhdGE/OiBhbnkpOiBzdHJpbmcge1xuXHRcdGxldCByZXRWYWwgPSAnJztcblx0XHRsZXQgY3RhRGF0YTogTGVhZGVyYm9hcmRDVEFEYXRhID0gdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIGRhdGEuY3RhRGF0YTtcblx0XHRsZXQgbGJUeXBlOiBsZWFkZXJiYW9yZFR5cGUgPSBjdGFEYXRhICYmIGN0YURhdGEubGVhZGVyYm9hcmRUeXBlIHx8IG51bGw7XG5cdFx0bGV0IGlzWmVyb1N0YXRlOiBib29sZWFuID0gY3RhRGF0YSAmJiBjdGFEYXRhLmN0YVR5cGUgJiYgY3RhRGF0YS5jdGFUeXBlID09PSAnemVyb1N0YXRlJztcblx0XHRsZXQgdXNlckluZm8gPSBjdGFEYXRhICYmIGN0YURhdGEudXNlckluZm87XG5cdFx0c3dpdGNoIChzdHJpbmdOYW1lKSB7XG5cdFx0XHRjYXNlICdsZWFkZXJib2FyZE1haW5MYWJlbCc6XG5cdFx0XHRcdHJldFZhbCA9ICdMZWFkZXJib2FyZCc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAndGFiTGFiZWwnOlxuXHRcdFx0XHRpZiAoZGF0YSA9PT0gJ3RoaXNDaGF0Jykge1xuXHRcdFx0XHRcdHJldFZhbCA9ICdUSElTIENIQVQnO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGRhdGEgPT09ICdhbGxDaGF0cycpIHtcblx0XHRcdFx0XHRyZXRWYWwgPSAnQUxMIENIQVRTJztcblx0XHRcdFx0fSBlbHNlIGlmIChkYXRhID09PSAnYWxsRnJpZW5kcycpIHtcblx0XHRcdFx0XHRyZXRWYWwgPSAnQUxMIEZSSUVORFMnO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAndGltZUxlZnRMYWJlbCc6XG5cdFx0XHRcdHJldFZhbCA9ICdUaW1lIExlZnQ6Jztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICd0aW1lTGVmdCc6XG5cdFx0XHRcdGxldCBzZWNvbmRzTGVmdCA9IHBhcnNlSW50KGRhdGEsIDEwKSB8fCAwO1xuXHRcdFx0XHRjb25zdCBkYXlzID0gTWF0aC5mbG9vcihzZWNvbmRzTGVmdCAvIERBWV9TRUNPTkRTKTtcblx0XHRcdFx0c2Vjb25kc0xlZnQgPSBzZWNvbmRzTGVmdCAtIChkYXlzICogREFZX1NFQ09ORFMpO1xuXHRcdFx0XHRjb25zdCBob3VycyA9IE1hdGguZmxvb3Ioc2Vjb25kc0xlZnQgLyBIT1VSX1NFQ09ORFMpO1xuXHRcdFx0XHRzZWNvbmRzTGVmdCA9IHNlY29uZHNMZWZ0IC0gKGhvdXJzICogSE9VUl9TRUNPTkRTKTtcblx0XHRcdFx0Y29uc3QgbWludXRlcyA9IE1hdGguZmxvb3Ioc2Vjb25kc0xlZnQgLyBNSU5VVEVfU0VDT05EUyk7XG5cdFx0XHRcdGNvbnN0IHNlY29uZHMgPSBzZWNvbmRzTGVmdCAtIChtaW51dGVzICogTUlOVVRFX1NFQ09ORFMpO1xuXHRcdFx0XHRyZXRWYWwgPSBbXG5cdFx0XHRcdFx0KCcwMCcgKyBkYXlzKS5zbGljZSgtMiksXG5cdFx0XHRcdFx0KCcwMCcgKyBob3Vycykuc2xpY2UoLTIpLFxuXHRcdFx0XHRcdCgnMDAnICsgbWludXRlcykuc2xpY2UoLTIpLFxuXHRcdFx0XHRcdCgnMDAnICsgc2Vjb25kcykuc2xpY2UoLTIpLFxuXHRcdFx0XHRdLmpvaW4oJzonKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdsZWFkZXJib2FyZEl0ZW1TY29yZSc6XG5cdFx0XHRcdGxldCBjdGFUeXBlID0gY3RhRGF0YSAmJiBjdGFEYXRhLmN0YVR5cGU7XG5cdFx0XHRcdGxldCBzY29yZSA9IGRhdGEgJiYgZGF0YS5zY29yZTtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdGN0YVR5cGUgPT09ICdwbGF5ZXInIHx8XG5cdFx0XHRcdFx0Y3RhVHlwZSA9PT0gJ21lJyB8fFxuXHRcdFx0XHRcdGN0YVR5cGUgPT09ICdncm91cCdcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0cmV0VmFsID0gc2NvcmU7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdsZWFkZXJib2FyZEl0ZW1QaWN0dXJlVVJMJzpcblx0XHRcdFx0aWYgKGlzWmVyb1N0YXRlKSB7XG5cdFx0XHRcdFx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuXHRcdFx0XHRcdHJldFZhbCA9ICdkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnJTIweG1sbnMlM0QlMjJodHRwJTNBLy93d3cudzMub3JnLzIwMDAvc3ZnJTIyJTIwd2lkdGglM0QlMjI1MTIlMjIlMjBoZWlnaHQlM0QlMjI1MTIlMjIlMjB2aWV3Qm94JTNEJTIyMCUyMDAlMjA1NjAuNjkzJTIwNTYwLjY5MyUyMiUzRSUzQ2clMjBmaWxsJTNEJTIyJTIzRDgwMDI3JTIyJTNFJTNDcGF0aCUyMGQlM0QlMjJNMTYxLjc5JTIwMTA3LjIzNGM2LjUxNCUyMDQuOTYlMjAxMy40MTQlMjA4LjY5JTIwMjAuOCUyMDEyLjE1JTIwMy4zODYlMjAxLjQ4NSUyMDYuNzg4JTIwMi45MyUyMDEwLjIwMyUyMDQuMzQlMjA4LjYlMjAzLjYwMiUyMDExLjkyOCUyMDcuMSUyMDE4Ljg4MyUyMDEyLjk0LTkuMzU0LTcuODUyLTIwLjE3OCUyMDcuNjY4LTEwLjklMjAxNS40NTYlMjA4LjA1NyUyMDYuNzY2JTIwMTcuMzYlMjA1LjUzJTIwMjUuMTE3LTEuMDM0JTIwMy42OTYtMy4xMyUyMDUuMjE3LTcuMTU0JTIwNS4zNDMtMTEuMzgzJTIwMTAuMjclMjAxNC4wNTglMjAyMS43NDglMjAyNC44NTQlMjAzMy45OCUyMDI5Ljg5NlYyMDNjMCUyMDEuNzkuMzY4JTIwMy40ODUuOTM3JTIwNS4wOEgyNDIuNTJjLTYuMjY2JTIwMC0xMS4zNDUlMjA1LjA4LTExLjM0NSUyMDExLjM0NnYxOC4yMTNjMCUyMDYuMjY2JTIwNS4wOCUyMDExLjM0NSUyMDExLjM0NiUyMDExLjM0NWg3NS42NTNjNi4yNjclMjAwJTIwMTEuMzQ3LTUuMDglMjAxMS4zNDctMTEuMzQ2di0xOC4yMTRjMC02LjI2Ny01LjA4LTExLjM0Ni0xMS4zNDctMTEuMzQ2SDI5NC41NGMuNTczLTEuNTk0LjkzNy0zLjI4Ny45MzctNS4wOHYtMzMuNGMxMi4yMzctNS4wNDMlMjAyMy43MTItMTUuODQyJTIwMzMuOTgtMjkuODk2LjEyNyUyMDQuMjMyJTIwMS42NDclMjA4LjI1NiUyMDUuMzQ0JTIwMTEuMzgzJTIwNy43NiUyMDYuNTY0JTIwMTcuMDYlMjA3Ljc5NyUyMDI1LjExOCUyMDEuMDM0JTIwOS4yNzctNy43ODctMS41NDYtMjMuMzA3LTEwLjktMTUuNDU1JTIwNi45NTYtNS44NCUyMDEwLjI4NS05LjM0JTIwMTguODg0LTEyLjk0JTIwMy40MTUtMS40MDglMjA2LjgxNy0yLjg1NSUyMDEwLjIwMi00LjM0JTIwNy4zOS0zLjQ2JTIwMTQuMjktNy4xOSUyMDIwLjgwMi0xMi4xNSUyMDExLjU2Ni04LjgwNyUyMDE3LjExNy0yMi41NDYlMjAxOC43NjctMzYuNTMzJTIwMy4xMDMtMjYuMzQtMTcuMzEtNDcuOTE0LTQxLjQzLTUzLjUzMi43NzctNi4yMiUyMDEuMTg1LTEyJTIwMS4xODUtMTcuMTdoLTE5NC4xNmMwJTIwNS4xNy40MDclMjAxMC45NSUyMDEuMTg1JTIwMTcuMTctMjQuMTIlMjA1LjYxOC00NC41MzIlMjAyNy4xOS00MS40MyUyMDUzLjUzMiUyMDEuNjQ4JTIwMTMuOTg2JTIwNy4yMDMlMjAyNy43MyUyMDE4Ljc2NiUyMDM2LjUzMnpNMzczLjA1NyUyMDM1Ljk0YzI1LjklMjA3LjQ3OCUyMDM3LjMyJTIwNDIuNDM2JTIwMTAuNjc2JTIwNTkuMTAzLTEwLjg5NCUyMDYuODE1LTI2LjI4NSUyMDEwLjI0LTM3Ljc0MiUyMDE3LjQ4OCUyMDEyLjQ1LTI0LjI1MiUyMDIxLjkxLTUyLjIwMiUyMDI3LjA2Ni03Ni41OXptLTkxLjI1My03LjM3OGgxNS44M3YxMDYuNjA0aC0xNy45MzJ2LTg5LjNoLS40MjJMMjU1LjQ0JTIwNTguNzNsLTMuNTgtMTQuMTM3JTIwMjkuOTQ1LTE2LjAzem0tOTQuMTUzJTIwNy4zNzdjNS4xNTYlMjAyNC4zODglMjAxNC42MTglMjA1Mi4zMzclMjAyNy4wNyUyMDc2LjU5LTExLjQ1OC03LjI0OC0yNi44NTMtMTAuNjcyLTM3Ljc0My0xNy40ODctMjYuNjQ3LTE2LjY2Ny0xNS4yMy01MS42MjUlMjAxMC42NzItNTkuMTA0eiUyMi8lM0UlM0NjaXJjbGUlMjBjeCUzRCUyMjI4MC4zNTUlMjIlMjBjeSUzRCUyMjMyOC45NTMlMjIlMjByJTNEJTIyNTguOTg1JTIyLyUzRSUzQ3BhdGglMjBkJTNEJTIyTTE3My44MjclMjAxNzIuNDUyYy0xMi40MTclMjAwLTIyLjQ4NSUyMDEwLjA2NC0yMi40ODUlMjAyMi40ODV2MTU4LjY0YzAlMjA0LjM5NiUyMDEuMjg4JTIwOC43MDIlMjAzLjcxMiUyMDEyLjM3NGw2MC42MzclMjA5Mi4wMDNzLS40NSUyMDEwMS4yMDctLjQ1JTIwMTAyLjc0aDEzMC4yMzRjMC0xLjUzNi0uNDUtMTAyLjc0LS40NS0xMDIuNzRsNjAuNjM3LTkyLjAwMmMyLjQyNS0zLjY3JTIwMy43MTMtNy45NzclMjAzLjcxMy0xMi4zNzN2LTE1OC42NGMwLTEyLjQxOC0xMC4wNjctMjIuNDg1LTIyLjQ4NC0yMi40ODUtMTIuNDIlMjAwLTIyLjQ4NiUyMDEwLjA2NC0yMi40ODYlMjAyMi40ODV2MTUxLjg5NmwtMzQuOTQlMjA1My4wMThIMjMxLjI1M2wtMzQuOTQtNTMuMDE3VjE5NC45MzhjMC0xMi40Mi0xMC4wNjctMjIuNDg2LTIyLjQ4NS0yMi40ODZ6JTIyLyUzRSUzQy9nJTNFJTNDL3N2ZyUzRSc7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0VmFsID0gdXNlckluZm8gJiYgdXNlckluZm8ucGhvdG9VUkwgfHwgJyc7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdsZWFkZXJib2FyZEl0ZW1OYW1lJzpcblx0XHRcdFx0Ly8gVG9EbzogWmVybyBTdGF0ZVxuXHRcdFx0XHRpZiAoaXNaZXJvU3RhdGUpIHtcblx0XHRcdFx0XHRyZXRWYWwgPSAnTm8gTGVhZGVyJztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXRWYWwgPSB1c2VySW5mbyAmJiB1c2VySW5mby5uYW1lIHx8ICcnO1xuXHRcdFx0XHRcdGlmIChjdGFEYXRhICYmIGN0YURhdGEubGVhZGVyYm9hcmRUeXBlID09PSAnYWxsQ29udGV4dHMnKSB7XG5cdFx0XHRcdFx0XHRsZXQgY29udGV4dElkID0gZGF0YS5jdGFEYXRhLmNvbnRleHRJZDtcblx0XHRcdFx0XHRcdGxldCBjb250ZXh0SGlzdG9yeSA9IHRoaXMuY29udGV4dFRyYWNraW5nRGF0YVtjb250ZXh0SWRdO1xuXHRcdFx0XHRcdFx0aWYgKGNvbnRleHRIaXN0b3J5KSB7XG5cdFx0XHRcdFx0XHRcdGxldCBsYXN0U3VjY2VzcyA9IGNvbnRleHRIaXN0b3J5Lmxhc3RDaGVja1N1Y2Nlc3M7XG5cdFx0XHRcdFx0XHRcdGlmIChsYXN0U3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChsYXN0U3VjY2Vzcy5taW4gPT09IGxhc3RTdWNjZXNzLm1heCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0VmFsID0gcmV0VmFsICsgJyBsZWFkcyAnICsgKGxhc3RTdWNjZXNzLm1pbiAtIDEpICsgJyBvdGhlciBwbGF5ZXInO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKChsYXN0U3VjY2Vzcy5taW4gLSAxKSA+IDEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0VmFsID0gcmV0VmFsICsgJ3MnO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXRWYWwgPSByZXRWYWwgKyAnIGxlYWRzICcgKyBsYXN0U3VjY2Vzcy5taW4gKyAnKyBwbGF5ZXJzJztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoY29udGV4dEhpc3RvcnkucmVjZW50UGxheWVycy5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0VmFsID0gKGNvbnRleHRIaXN0b3J5LnJlY2VudFBsYXllcnMubGVuZ3RoIC0gMSkgKyAnIG90aGVyIGZyaWVuZCc7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKChjb250ZXh0SGlzdG9yeS5yZWNlbnRQbGF5ZXJzLmxlbmd0aCAtIDEpID4gMSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0VmFsID0gcmV0VmFsICsgJ3MnO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2xlYWRlcmJvYXJkSXRlbUNoYXROYW1lJzpcblx0XHRcdFx0cmV0VmFsID0gJyc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnbGVhZGVyYmFvcmRJdGVtU2NvcmVDaGFsbGVuZ2UnOlxuXHRcdFx0XHRsZXQgbXlQb3NpdGlvbk9mZnNldCA9IGN0YURhdGEgJiYgY3RhRGF0YS5tZVBvc2l0aW9uO1xuXHRcdFx0XHRpZiAoaXNaZXJvU3RhdGUpIHtcblx0XHRcdFx0XHRyZXRWYWwgPSAnUGxheSBub3cgdG8gYmUgdGhlIGxlYWRlciEnO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGxiVHlwZSA9PT0gJ2N1cnJlbnRDb250ZXh0JyB8fCBsYlR5cGUgPT09ICdnbG9iYWwnKSB7XG5cdFx0XHRcdFx0aWYgKG15UG9zaXRpb25PZmZzZXQgPD0gMCkge1xuXHRcdFx0XHRcdFx0cmV0VmFsID0gJ0NoYWxsZW5nZSc7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChteVBvc2l0aW9uT2Zmc2V0ID4gMCkge1xuXHRcdFx0XHRcdFx0cmV0VmFsID0gJ0JlYXQgU2NvcmUnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmIChsYlR5cGUgPT09ICdhbGxDb250ZXh0cycpIHtcblx0XHRcdFx0XHRpZiAoY3RhRGF0YS5jdGFUeXBlID09PSAnbWUnKSB7XG5cdFx0XHRcdFx0XHRyZXRWYWwgPSAnQ2hhbGxlbmdlIEdyb3VwJztcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0VmFsID0gJ0JlYXQgbXkgc2NvcmUnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2xlYWRlcmJhb3JkSW52aXRlQ1RBJzpcblx0XHRcdFx0cmV0VmFsID0gJ0ludml0ZSc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnbGVhZGVyYm9hcmRJbnZpdGVMYWJlbCc6XG5cdFx0XHRcdHJldFZhbCA9ICdJbnZpdGUgeW91ciBmcmllbmRzIHRvIHBsYXkhJztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdjdGFMYWJlbCc6XG5cdFx0XHRcdHJldFZhbCA9ICdQbGF5Jztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdwbGF5Tm93Jzpcblx0XHRcdFx0cmV0VmFsID0gJ1BsYXkgTm93Jztcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdHJldHVybiByZXRWYWw7XG5cdH1cblxuXHRwcml2YXRlIGN0YUNsaWNrKGRhdGE/OiBMZWFkZXJib2FyZENUQURhdGEpOiB2b2lkIHtcblx0XHR2YXIgaGFuZGxlciA9IHRoaXMuQ1RBSGFuZGxlcjtcblx0XHR0aGlzLkV2ZW50LmZpcmUodGhpcy5FdmVudHMuQ1RBX0NMSUNLLCBkYXRhKTtcblx0XHRoYW5kbGVyKGRhdGEpLnRoZW4oKHN1Y2VzczogYm9vbGVhbikgPT4ge1xuXHRcdFx0aWYgKHN1Y2Vzcykge1xuXHRcdFx0XHR0aGlzLmhpZGUoKTtcblx0XHRcdFx0dGhpcy5wbGF5R2FtZShkYXRhKTtcblx0XHRcdH1cblx0XHR9LCAoZXJyKSA9PiB7XG5cdFx0XHQvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnIpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBjbG9ja1RpY2soKSB7XG5cdFx0Y29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblx0XHRjb25zdCBub3dNUyA9IG5vdy5nZXRUaW1lKCk7XG5cdFx0Y29uc3Qgbm93U2Vjb25kcyA9IE1hdGguZmxvb3Iobm93TVMgLyAxMDAwKTtcblx0XHRjb25zdCBuZXh0U2Vjb25kID0gbm93U2Vjb25kcyArIDE7XG5cdFx0Y29uc3Qgd2FpdEZvck5leHRUaWNrID0gKG5leHRTZWNvbmQgKiAxMDAwKSAtIG5vd01TICsgMTA7IC8vIG1zIHVudGlsIDEwbXMgYWZ0ZXIgbmV4dCBzZWNvbmRcblxuXHRcdGNsZWFyVGltZW91dCh0aGlzLmNsb2NrVGltZW91dCk7XG5cblx0XHRpZiAoIXRoaXMuc3RhdGUudmlzaWJsZSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGZvciAobGV0IGxiIG9mIHRoaXMuc3RhdGUubGVhZGVyYm9hcmRzKSB7XG5cdFx0XHRsZXQgZW5kVGltZSA9IGxiLmVuZFRpbWU7XG5cdFx0XHRpZiAoZW5kVGltZSkge1xuXHRcdFx0XHRsZXQgZW5kVGltZVNlY29uZHMgPSBNYXRoLnJvdW5kKGVuZFRpbWUuZ2V0VGltZSgpIC8gMTAwMCk7XG5cdFx0XHRcdGxldCBzZWNvbmRzTGVmdCA9IGVuZFRpbWVTZWNvbmRzIC0gbm93U2Vjb25kcztcblx0XHRcdFx0aWYgKHNlY29uZHNMZWZ0IDwgMCkge1xuXHRcdFx0XHRcdHNlY29uZHNMZWZ0ID0gMDtcblx0XHRcdFx0fVxuXHRcdFx0XHRsYi5zZWNvbmRzTGVmdCA9IHNlY29uZHNMZWZ0O1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aGlzLnNldFN0YXRlKHsgbGVhZGVyYm9hcmRzOiB0aGlzLnN0YXRlLmxlYWRlcmJvYXJkcyB9KTtcblx0XHRzZXRUaW1lb3V0KHRoaXMuY2xvY2tUaWNrLmJpbmQodGhpcyksIHdhaXRGb3JOZXh0VGljayk7XG5cdH1cblxuXHRwcml2YXRlIHRhYlNlbGVjdChsYkluZGV4OiBudW1iZXIsIGU/OiBFdmVudCkge1xuXHRcdGNvbnN0IGxicyA9IHRoaXMuc3RhdGUubGVhZGVyYm9hcmRzO1xuXHRcdGxldCBvbGRJbmRleCA9IC0xO1xuXHRcdGxicy5mb3JFYWNoKChsYiwgaSkgPT4ge1xuXHRcdFx0aWYgKGxiLnZpc2libGUpIHtcblx0XHRcdFx0b2xkSW5kZXggPSBpO1xuXHRcdFx0fVxuXHRcdFx0bGIudmlzaWJsZSA9IGZhbHNlO1xuXHRcdH0pO1xuXHRcdGlmIChsYkluZGV4ID49IGxicy5sZW5ndGgpIHtcblx0XHRcdGxiSW5kZXggPSAwO1xuXHRcdH1cblx0XHRsYnNbbGJJbmRleF0udmlzaWJsZSA9IHRydWU7XG5cblx0XHRpZiAobGJJbmRleCAhPT0gb2xkSW5kZXggJiYgZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHQvLyBPbmx5IGZpcmUgaWYgdGhlcmUgaXMgYSBjaGFuZ2UgQU5EIGl0IHdhcyB1c2VyIGluaXRpYXRlZC5cblx0XHRcdC8vIFVzZXIgaW5pdGlhdGVkIHdpbGwgaGF2ZSBhbiBldmVudCBhcyB0aGUgc2Vjb25kIHBhcmFtXG5cdFx0XHR0aGlzLnRhYnNDaGFuZ2VzKys7XG5cdFx0XHR0aGlzLkV2ZW50LmZpcmUodGhpcy5FdmVudHMuVEFCX0NMSUNLLCBsYnNbbGJJbmRleF0pO1xuXHRcdH1cblx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdGxlYWRlcmJvYXJkczogbGJzLFxuXHRcdFx0c2VsZWN0ZWRMZWFkZXJib2FyZENvbmZpZ05hbWU6IGxic1tsYkluZGV4XS5jb25maWdOYW1lLFxuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSB0b3VjaE9yQ2xpY2soY2FsbGJhY2s6IChlOiBFdmVudCkgPT4gdm9pZCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRvbkNsaWNrOiBjYWxsYmFja1xuXHRcdH07XG5cdH1cblxuXHQvLyBHbyB0aHJvdWdoIGFuIGFycmF5IG9mIGNvbmZpZyBwcm9taXNlcyB1bnRpbCB3ZSBnZXQgYSB2YWxpZCBjb25maWdcblx0cHJpdmF0ZSBnZXRGaXJzdFdvcmtpbmdDb25maWcoY29uZmlnUHJvbWlzZXM6IEFycmF5PFByb21pc2U8TGVhZGVyYm9hcmRDb25maWdzPj4pOiB2b2lkIHtcblx0XHRpZiAoQXJyYXkuaXNBcnJheShjb25maWdQcm9taXNlcykgJiYgY29uZmlnUHJvbWlzZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0bGV0IGNvbmZpZ1Byb21pc2UgPSBjb25maWdQcm9taXNlcy5zaGlmdCgpO1xuXHRcdFx0Y29uZmlnUHJvbWlzZS50aGVuKFxuXHRcdFx0XHQoY29uZmlnKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5FdmVudC5maXJlKHRoaXMuRXZlbnRzLkNPTkZJRywgY29uZmlnKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0KGU6IGFueSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuRXZlbnQuZmlyZSh0aGlzLkV2ZW50cy5CQURfQ09ORklHLCBjb25maWdQcm9taXNlKTtcblx0XHRcdFx0XHR0aGlzLmdldEZpcnN0V29ya2luZ0NvbmZpZyhjb25maWdQcm9taXNlcyk7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuRXZlbnQuZmlyZSh0aGlzLkV2ZW50cy5OT19DT05GSUcpO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIExlYWRlcmJvYXJkc1VJQ29tcG9uZW50IHtcblx0RXZlbnQ6IFp5bmdhQ29yZS5FdmVudE1peGluO1xuXHRFdmVudHM6IGFueTtcblx0cmVmcmVzaDogKCkgPT4gdm9pZDtcblx0c2hvdzogKCkgPT4gdm9pZDtcblx0aGlkZTogKCkgPT4gdm9pZDtcblx0c2VsZWN0VGFiOiAobGJJbmRleCkgPT4gdm9pZDtcblx0cmVnaXN0ZXJDVEFIYW5kbGVyOiAoZ2FtZUN1c3RvbUNUQUhhbmRsZXI6IChkYXRhOiBMZWFkZXJib2FyZENUQURhdGEpID0+IFByb21pc2U8Ym9vbGVhbj4pID0+IHZvaWQ7XG5cdHJlZ2lzdGVyVUlTdHJpbmdIYW5kbGVyOiAoZ2FtZUdldFVJU3RyaW5nSGFuZGxlcjogKGxhYmVsTmFtZTogc3RyaW5nLCBkYXRhPzogYW55KSA9PiBzdHJpbmcpID0+IHZvaWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gaW5pdGFsaXplTGVhZGVyYm9hcmRzKFxuXHRkYXRhU291cmNlczogQXJyYXk8UHJvbWlzZTxMZWFkZXJib2FyZENvbmZpZ3M+Pixcblx0cGFyZW50OiBIVE1MRWxlbWVudCxcblx0b3B0aW9uczogTGVhZGVyYm9hcmRPcHRpb25zLFxuXHRjc3NPYmo6IGFueVxuKTogTGVhZGVyYm9hcmRzVUlDb21wb25lbnQge1xuXHRsZXQgcHJvcHM6IExlYWRlcmJvYXJkc1Byb3BzID0ge1xuXHRcdGNvbmZpZ1Byb21pc2VzOiBkYXRhU291cmNlcyxcblx0XHRvcHRpb25zOiBvcHRpb25zXG5cdH07XG5cdGxldCBsZWFkZXJib2FyZHMgPSBwcmVhY3QucmVuZGVyKFxuXHRcdDxMZWFkZXJib2FyZHMgey4uLnByb3BzfSAvPixcblx0XHRwYXJlbnQsXG5cdFx0cGFyZW50WydfX2xidm5vZGUnXSAvLyBSZXBsYWNlIGFuIG9sZCBvbmUgaWYgaXQgZXhpc3RzXG5cdCk7XG5cdGxldCBsYkNvbXBvbmVudCA9IGxlYWRlcmJvYXJkc1snX2NvbXBvbmVudCddIGFzIExlYWRlcmJvYXJkcztcblx0bGV0IGxiQ3NzT2JqID0gY3NzT2JqIHx8IGdldERlZmF1bHRDU1NPYmooKSB8fCB7fTtcblx0Y29uc3QgbmV3Q1NTU3RyID0gWnluZ2FDb3JlLnBhcnNlQ1NTKGxiQ3NzT2JqKTtcblxuXHQvLyBBZGQgcG9pbnRlciB0byBjdXJyZW50IGVsZW1lbnQgc28gd2UgY2FuIHJlcGxhY2UgaXQgaWYgY2FsbGVkIGFnYWluIGZvciB0aGlzIHBhcmVudFxuXHRwYXJlbnRbJ19fbGJ2bm9kZSddID0gbGVhZGVyYm9hcmRzO1xuXHQvLyBCaXQgb2YgYSBoYWNrLiBPbmx5IGV4cG9zZSBhY3R1YWwgcHVibGljIGRhdGEuICBBbGwgd291bGQgYmUgYXZhaWxhYmxlIGluIEVTNSBvdGhlcndpc2UuXG5cblx0SW50ZXJuYWxFdmVudC5sYXN0KERPTV9SRFksIGZ1bmN0aW9uICgpIHtcblx0XHRsZXQgc3R5bGVOb2RlID0gcGFyZW50WydfX2xiY3Nzbm9kZSddO1xuXHRcdGlmICghc3R5bGVOb2RlKSB7XG5cdFx0XHQvLyBDcmVhdGUgYSBuZXcgc3R5bGUgbm9kZSBpbiBoZWFkXG5cdFx0XHRsZXQgaGVhZCA9IGRvYy5oZWFkIHx8IGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuXHRcdFx0c3R5bGVOb2RlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cdFx0XHRzdHlsZU5vZGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cdFx0XHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlTm9kZSk7XG5cdFx0XHRwYXJlbnRbJ19fbGJ2bm9kZSddID0gc3R5bGVOb2RlO1xuXHRcdH1cblxuXHRcdC8vIHdyaXRlIG91dCBDU1MgdG8gc3R5bGUgbm9kZVxuXHRcdGlmIChzdHlsZU5vZGUuc3R5bGVTaGVldCkge1xuXHRcdFx0Ly8gT2xkZXIgdmVyc2lvbiBvZiBJRVxuXHRcdFx0c3R5bGVOb2RlLnN0eWxlU2hlZXR0LmNzc1RleHQgPSBuZXdDU1NTdHI7XG5cdFx0fSBlbHNlIGlmICh0eXBlb2Ygc3R5bGVOb2RlLnRleHRDb250ZW50ICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0c3R5bGVOb2RlLnRleHRDb250ZW50ID0gbmV3Q1NTU3RyO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZU5vZGUuaW5uZXJUZXh0ID0gbmV3Q1NTU3RyO1xuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuIHtcblx0XHRFdmVudDogbGJDb21wb25lbnQuRXZlbnQsXG5cdFx0RXZlbnRzOiBsYkNvbXBvbmVudC5FdmVudHMsXG5cdFx0cmVmcmVzaDogbGJDb21wb25lbnQucmVmcmVzaC5iaW5kKGxiQ29tcG9uZW50KSxcblx0XHRzaG93OiBsYkNvbXBvbmVudC5zaG93LmJpbmQobGJDb21wb25lbnQpLFxuXHRcdGhpZGU6IGxiQ29tcG9uZW50LmhpZGUuYmluZChsYkNvbXBvbmVudCksXG5cdFx0c2VsZWN0VGFiOiBsYkNvbXBvbmVudC5zZWxlY3RUYWIuYmluZChsYkNvbXBvbmVudCksXG5cdFx0cmVnaXN0ZXJDVEFIYW5kbGVyOiBsYkNvbXBvbmVudC5yZWdpc3RlckNUQUhhbmRsZXIuYmluZChsYkNvbXBvbmVudCksXG5cdFx0cmVnaXN0ZXJVSVN0cmluZ0hhbmRsZXI6IGxiQ29tcG9uZW50LnJlZ2lzdGVyVUlTdHJpbmdIYW5kbGVyLmJpbmQobGJDb21wb25lbnQpXG5cdH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0Q1NTT2JqKCk6IGFueSB7XG5cdHJldHVybiBaeW5nYUxlYWRlcmJvYXJkVUlDU1M7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb25maWdQcm9taXNlRnJvbUV4cGVyaW1lbnQoZXhwZXJpbWVudE5hbWU/OiBzdHJpbmcpOiBQcm9taXNlPExlYWRlcmJvYXJkQ29uZmlncz4ge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdHJlamVjdCgnTm90IEltcGxlbWVudGVkJyk7XG5cdH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdENvbmZpZ1Byb21pc2UoKTogUHJvbWlzZTxMZWFkZXJib2FyZENvbmZpZ3M+IHtcblx0Y29uc3QgY29uZmlnczogTGVhZGVyYm9hcmRDb25maWdzID0gW1xuXHRcdHtcblx0XHRcdGxlYWRlcmJvYXJkTmFtZTogJ3dlZWtseS0tLWNvbnRleHR7Y29udGV4dElkfScsXG5cdFx0XHRsZWFkZXJib2FyZElkOiAndGhpc0NoYXQnLFxuXHRcdFx0dHlwZTogJ2N1cnJlbnRDb250ZXh0Jyxcblx0XHRcdG9yZGVyOiAnZGVzYycsXG5cdFx0XHRpbmNsdWRlUGxheWVyczoge1xuXHRcdFx0XHRpbmNsdWRlVGhpc0NvbnRleHRQbGF5ZXJzOiB0cnVlLFxuXHRcdFx0XHRpbmNsdWRlTWU6IHRydWVcblx0XHRcdH1cblx0XHR9LFxuXHRcdHtcblx0XHRcdGxlYWRlcmJvYXJkTmFtZTogJ3dlZWtseS0tLWNvbnRleHR7Y29udGV4dElkfScsXG5cdFx0XHRsZWFkZXJib2FyZElkOiAnYWxsQ2hhdHMnLFxuXHRcdFx0dHlwZTogJ2FsbENvbnRleHRzJyxcblx0XHRcdG9yZGVyOiAnZGVzYycsXG5cdFx0XHRpbmNsdWRlUGxheWVyczoge1xuXHRcdFx0XHRpbmNsdWRlQWxsQ29udGV4dHNQbGF5ZXJzOiB0cnVlLFxuXHRcdFx0XHRpbmNsdWRlTWU6IHRydWVcblx0XHRcdH1cblx0XHR9LFxuXHRcdHtcblx0XHRcdGxlYWRlcmJvYXJkTmFtZTogJ3Blcm0tLS1nbG9iYWwnLFxuXHRcdFx0bGVhZGVyYm9hcmRJZDogJ2FsbEZyaWVuZHMnLFxuXHRcdFx0dHlwZTogJ2dsb2JhbCcsXG5cdFx0XHRvcmRlcjogJ2Rlc2MnLFxuXHRcdFx0aW5jbHVkZVBsYXllcnM6IHtcblx0XHRcdFx0aW5jbHVkZUNvbm5lY3RlZEZyaWVuZHM6IHRydWUsXG5cdFx0XHRcdGluY2x1ZGVNZTogdHJ1ZVxuXHRcdFx0fVxuXHRcdH0sXG5cdF07XG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUoY29uZmlncyk7XG59XG4iLCIvLy8gPGFtZC1tb2R1bGUgbmFtZT1cIlp5bmdhTGVhZGVyYm9hcmRVSUNTU1wiLz5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbnZhciBjbG9ja0JhY2tncm91bmRJbWFnZSA9ICd1cmwoXFwnZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyUyMHhtbG5zJTNEJTIyaHR0cCUzQSUyRiUyRnd3dy53My5vcmclMkYyMDAwJTJGc3ZnJTIyJTIwd2lkdGglM0QlMjIyNTAlMjIlMjBoZWlnaHQlM0QlMjIyNTAlMjIlM0UlM0NnJTIwZmlsbCUzRCUyMiUyM35+Q09MT1J+fiUyMiUzRSUzQ3BhdGglMjBkJTNEJTIyTTE5MC43OCUyMDczLjMzYzIuNTYtMy4zJTIwNS4yMi02LjYyJTIwNy43Ny0xMC4wMiUyMDQuMzQtNS43OSUyMDMuOTEtOS42Ni0xLjU0LTE0LjE3LTIuODItMi4zMy01LjY1LTQuNjctOC42MS02LjgyLTQuNzctMy40Ni05LjQ0LTIuODYtMTMuMTYlMjAxLjYyLTIuNjUlMjAzLjItNSUyMDYuNjgtNy44NyUyMDkuNjdhNS43MyUyMDUuNzMlMjAwJTIwMCUyMDEtNC43NCUyMDEuMjklMjAxOTYuMjglMjAxOTYuMjglMjAwJTIwMCUyMDEtMTcuMDQtNS40NmMtMS4zMi0uNDgtMy4xOC0yLjI3LTMuMDgtMy4yOS4yNy0yLjgtMi4zLTYuNzIlMjAyLjAzLTguMjclMjA0Ljk0LTEuNzglMjA2LjItNS4yOSUyMDYuMjMtMTAuMS4wNC02LjA0LjU2LTEyLjA3LTYuMTktMTUuMjhoLTM4Yy00LjI5JTIwMS43Ni03LjQ2JTIwNC4zMi03LjEyJTIwOS41Ni4zOSUyMDYuMDItMS44NyUyMDEyLjc4JTIwNi4yNSUyMDE2LjI1JTIwMS41OC42NyUyMDEuODIlMjA1LjMlMjAxLjk0JTIwOC4xMy4wNCUyMDEtMS45OSUyMDIuNzEtMy4zNSUyMDMuMDYtMzMuOSUyMDguNzgtNTcuMTUlMjAyOS4zMy02OS4xMSUyMDYyLjMzLTE3LjA2JTIwNDcuMDYlMjA5LjE5JTIwMTAyLjczJTIwNTYuNDUlMjAxMTkuMjMlMjA4LjY3JTIwMy4wMyUyMDE3Ljk0JTIwNC4zNSUyMDI2Ljk0JTIwNi40NmgxM2M5LjQ2LTIuMjklMjAxOS4zOC0zLjQ2JTIwMjguMjktNy4wOCUyMDMyLjY0LTEzLjI5JTIwNTIuNTYtMzcuNjIlMjA1OC42Ny03Mi40MyUyMDUuMzgtMzAuNjYtMy45LTYwLjQxLTI3Ljc2LTg0LjY4bS01Mi45NyUyMDEzNy4xM2MtMzkuNCUyMDcuMjEtNzQuMTItMTkuMTMtODAuOTgtNTUuNjYtMi45OS0xNS45Mi0uMzMtMzEuMDklMjA3LjIzLTQ1LjM4LjktMS43JTIwMi4yNS0zLjE1JTIwMy4zOS00LjcybC0uMTYuMTdjNy4yLTEyLjY3JTIwMTguMS0yMS4xMiUyMDMxLjMyLTI2LjU2JTIwNDIuMzUtMTcuNDQlMjA4OC44JTIwOS42NyUyMDk1LjIlMjA1NS4wMSUyMDQuODElMjAzNC4wMi0xNy45NCUyMDcwLjE3LTU2JTIwNzcuMTQlMjIlMkYlM0UlM0NwYXRoJTIwZCUzRCUyMk0xMjcuMjMlMjAxMzAuODFhMTUuOCUyMDE1LjglMjAwJTIwMCUyMDEtNi42OS0xLjYyJTIwMTQxNi42JTIwMTQxNi42JTIwMCUyMDAlMjAxLTMxLjA2LTE2LjQ0Yy0zLjcyLTIuMDItNy4wMi0yLjUzLTEwLjEyLjkxbC4xNC0uMTVjLS41NCUyMDMuNzIlMjAxLjE0JTIwNi4yNyUyMDMuOTglMjA4LjU3JTIwOS4zMyUyMDcuNTclMjAxOC41NSUyMDE1LjI3JTIwMjcuNzElMjAyMy4wNGExMC45JTIwMTAuOSUyMDAlMjAwJTIwMSUyMDIuOTMlMjA0LjMxYzIuNzQlMjA3LjI4JTIwOS43NSUyMDExLjMxJTIwMTYuOTQlMjA5LjUzJTIwNy4zMy0xLjgxJTIwMTEuODItOC4yNyUyMDEwLjg2LTE1LjYyLTEuMDEtNy43My02LjY2LTEyLjQtMTQuNjktMTIuNTMlMjIlMkYlM0UlM0MlMkZnJTNFJTNDJTJGc3ZnJTNFXFwnKSc7XG52YXIgbGVhZGVyYm9hcmRDU1MgPSB7XG5cdCcuel9sYl9tYWluJzoge1xuXHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuXHRcdHdpZHRoOiAnMTAwJScsXG5cdFx0aGVpZ2h0OiAnMTAwJScsXG5cdFx0dG9wOiAnMCcsXG5cdFx0bGVmdDogJzAnLFxuXHRcdGNvbG9yOiAncmdiKDAsIDE0MSwgMTM3KScsXG5cdFx0J2ZvbnQtZmFtaWx5JzogJ0hlbHZldGljYSBOZXVlLCBTZWdvZSBVSSwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZidcblx0fSxcblx0Jy56X2xiX2hpZGRlbic6IHtcblx0XHRkaXNwbGF5OiAnbm9uZSdcblx0fSxcblx0Jy56X2xiX3JlZnJlc2hpbmcnOiB7XG5cblx0fSxcblx0Jy56X2xiX2NvbnRhaW5lcic6IHtcblx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJyxcblx0XHR0b3A6ICc4ZW0nLFxuXHRcdGJvdHRvbTogJzAnLFxuXHRcdGxlZnQ6ICcwJyxcblx0XHRyaWdodDogJzAnLFxuXHRcdCdvdmVyZmxvdy15JzogJ3Njcm9sbCdcblx0fSxcblx0Jy56X2xiX3RvdWNoX2VuYWJsZWQgLnpfbGJfY29udGFpbmVyJzoge1xuXHRcdC8vIEVuYWJsZSB0b3VjaCBzY3JvbGxpbmcgZm9yIHRvdWNoIGRldmljZXNcblx0XHQnLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmcnOiAndG91Y2gnXG5cdH0sXG5cdCcuel9sYl90b3VjaF9lbmFibGVkIC56X2xiX2NvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXInOiB7XG5cdFx0Ly8gSGlkZSBzY3JvbGxiYXIgb24gdG91Y2ggZGV2aWNlc1xuXHRcdGRpc3BsYXk6ICdub25lJ1xuXHR9LFxuXHQnLnpfbGJfdG9wX3NwYWNlcic6IHtcblx0XHRoZWlnaHQ6ICc1MCUnXG5cdH0sXG5cdCcuel9sYl9ib3gnOiB7XG5cdFx0J2JhY2tncm91bmQtY29sb3InOiAnd2hpdGUnLFxuXHRcdCdib3JkZXItcmFkaXVzJzogJzEuN2VtJyxcblx0XHQnbWluLWhlaWdodCc6ICc1MCUnLFxuXHRcdG92ZXJmbG93OiAnaGlkZGVuJ1xuXHR9LFxuXHQnLnpfbGJfYm94LCAuel9sYl9wbGF5X25vdyc6IHtcblx0XHRwb3NpdGlvbjogJ3JlbGF0aXZlJyxcblx0XHQnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlM2QoMCwgMCwgMCknLCAvLyBBbmRyb2lkIHNjcm9sbCBoYWNrYXJvdW5kXG5cdFx0bGVmdDogJzQlJyxcblx0XHRyaWdodDogJzQlJyxcblx0XHQnbWFyZ2luLWJvdHRvbSc6ICc0JScsXG5cdFx0d2lkdGg6ICc5MiUnLFxuXHRcdCdib3gtc2hhZG93JzogJzAgMnB4IDhweCAycHggcmdiYSgwLDAsMCwuNSknXG5cdH0sXG5cdCcuel9sYl90aXRsZSc6IHtcblx0XHR3aWR0aDogJzEwMCUnLFxuXHRcdCdsaW5lLWhlaWdodCc6ICcxLjVlbScsXG5cdFx0J3BhZGRpbmctdG9wJzogJzAuMjVlbScsXG5cdFx0J2ZvbnQtc2l6ZSc6ICcyLjJlbScsXG5cdFx0J2ZvbnQtd2VpZ2h0JzogJ2JvbGQnLFxuXHRcdGNvbG9yOiAnIzVBNUE1QScsXG5cdFx0J3RleHQtYWxpZ24nOiAnY2VudGVyJ1xuXHR9LFxuXHQnLnpfbGJfdGFicyc6IHtcblx0XHRkaXNwbGF5OiAndGFibGUnLFxuXHRcdCd0YWJsZS1sYXlvdXQnOiAnZml4ZWQnLFxuXHRcdHdpZHRoOiAnOTIlJyxcblx0XHQnYm9yZGVyLXNwYWNpbmcnOiAnMC4yNWVtJyxcblx0XHQnbWFyZ2luLWxlZnQnOiAnNCUnLFxuXHRcdCdtYXJnaW4tcmlnaHQnOiAnNCUnLFxuXHRcdCdtYXJnaW4tdG9wJzogMCxcblx0XHQnbWFyZ2luLWJvdHRvbSc6ICcwLjVlbScsXG5cdFx0aGVpZ2h0OiAnNGVtJyxcblx0XHQnYm94LXNpemluZyc6ICdib3JkZXItYm94Jyxcblx0fSxcblx0Jy56X2xiX3RhYnNfcm93Jzoge1xuXHRcdGRpc3BsYXk6ICd0YWJsZS1yb3cnXG5cdH0sXG5cdCcuel9sYl90YWJzX3RhYic6IHtcblx0XHRkaXNwbGF5OiAndGFibGUtY2VsbCcsXG5cdFx0cG9zaXRpb246ICdyZWxhdGl2ZScsXG5cdFx0Jy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZTNkKDAsIDAsIDApJywgLy8gQW5kcm9pZCBzY3JvbGwgaGFja2Fyb3VuZFxuXHRcdGhlaWdodDogJzRlbScsXG5cdFx0J3doaXRlLXNwYWNlJzogJ25vd3JhcCcsXG5cdFx0J2JveC1zaXppbmcnOiAnYm9yZGVyLWJveCcsXG5cdFx0J3RleHQtYWxpZ24nOiAnY2VudGVyJyxcblx0XHQnZm9udC13ZWlnaHQnOiAnYm9sZCcsXG5cdFx0Ym9yZGVyOiAnMC4xNWVtIHNvbGlkIHJnYigwLCAxNDEsIDEzNyknXG5cdH0sXG5cdCcuel9sYl90YWJzX3RhYi56X2xiX25ld190b19tZTpiZWZvcmUnOiB7XG5cdFx0Y29udGVudDogJ1wiXCInLFxuXHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuXHRcdHRvcDogJy0wLjM1ZW0nLFxuXHRcdGxlZnQ6ICcwLjJlbScsXG5cdFx0aGVpZ2h0OiAnMTAwJScsXG5cdFx0d2lkdGg6ICcxLjc1ZW0nLFxuXHRcdCdiYWNrZ3JvdW5kLXBvc2l0aW9uJzogJzAgMCcsXG5cdFx0J2JhY2tncm91bmQtc2l6ZSc6ICdjb250YWluJyxcblx0XHQnYmFja2dyb3VuZC1yZXBlYXQnOiAnbm8tcmVwZWF0Jyxcblx0XHQvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG5cdFx0J2JhY2tncm91bmQtaW1hZ2UnOiAndXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBRGNBQUFCQkNBWUFBQUIxb0R5YUFBQUZ3MGxFUVZSNEFlMlpBNUFqenhmSGs4bitiTnYyMmJadDI3WnQyN1p0Mjc1YjI4bnMzc2JHOS8rcXExSXppNXp2SnJuL3ZLclBLa2xYUG5uZC9WNzNLalRqZy9DeThuOHFKOHZKY3JLY0xDZkx5WEt5bkN4bnZqUWRicE1HYm5PYUNCNlc2NHVobWZCcUFNdE5mQU11ZlR4eUNvODFBL3pVOXdOWWpqSmpEVHNGdUYwUUJmdmRGbnNOL01TM3hNOGxYZ3NndVhGQmlHcnpMYXpSdHlBT2UySVlJbHYvQ1BVWTlqd21wZHRjRS9xZFRWZzIvVjZPbi9RbTBtWitpYmdldjhFY2ZCN2lzRWJkUkd6M1A4RFArQXI4NUhlZzIxb0gzckRjV0Vxdis5eFA1U2dMNlhOL2hQRm9IemppendCdUozSU1qeHVPeFBNd25SbkROaHh4R0U4TzlUODVmdHBIME85dEExZDZPSjQwWEFZZUdSdHIrNWRjMm96UFlMazZIMW5EYmRMQm5oeEY2KzQyTEdGWFFOL3A5MGk0akJuSUtmaTFveEhYa2ZNZk9YN3FCN0RlV1pOTnluVDlLRkxtZEVGMDU5d0lxL3NSUXFxOWdiQTZIeUs2NDM5SW1ka2V4c3Y3cVZTa1F4eTZveXVSUE9Rai81RXpuUjBIVWJCTXBjenVoSkRLcnhJS2hOVlFJcncyVVlkOUIvM08vaDVjZ1VQeXROWnM5eFNIK2ZKc0d2Y1Y2ZVV5VmhjSDRJRTNiSEgzUUpsaGJ6NmlnUkx4WFVoZ3NBcnFVVUZRanlYb08vMk8rRzRjSWh1UlpCVUZZcm9YaEMwaEZPTFFicWdrc1J6dGpQYllFK0xpektaYS9PQ1NTT3hQVTJ2c3crdGdmSGNPWVRXVmlPbFptTmFoRnQ1d3BGeGw1VVF5dWZ2TDgwTWMyc01yWVl1L0IxQlk3NjZEZGxOMVZzY2VOazd5UUJVVFROc3dIdUxJV0ZOS09qblQ2ZEZDMGl4R2hEZitFa2xqeThDUmNnZWc4Tmgwc041ZUJlM0dxcXpQZkpoZ2VLTlBxQlRjRjliZXBWblN5ZGtpanNJYnBodkhFTjJjUTFndEpWdHo1cHY3QkhGakNpeTNWc0IwY2hoMDIrcjVIQysySFFmRCtWM0N4aFIzVVRvNUp4OEZiOXpmTmcycEk0S1ExRjhGdGpNMi9BSVplK2NoUzdBamozNTNxeHpIUzZYTmhsODdBdDV3cHNkSkorZlNxZUdOOUExRGhDbEd1eUhiQ2F1K0R2WEMzdkRZclJDSEkvbXk3NXE1dkl2UXJlZzBFbVl1UFVsWS9MdEdaYzdDeUNCRXQrSVFYRjVCR1Z3SWNaZ3VyL2E5U1czdUxXUXVJMFU2T1d2MFRhSFpQYjh5NitPc3JzVjE1aERSNkhOb2o2eGlwd0hkaVEySTZmeWp6ekVOSitlSWprYWgwc25wVGdndGwwTVQ0WE5Iakc3SnNmWXJxdDJmQ0svL0thS2FLMzJOU1VLaUQremlMdW5rVW1lMUVCOWgySUV6eCtmUkZDVWh0dEZFTlZVaVpiZ3E1MjVuYldsNFJFY2s5ZUp1MHNuRmRxYTZwT09GTmFLKzVTdDdyTzFLR2FJaVVaL2pzZk9kVURjTmlPMzZqWFJ5Q1QxVTROZU1oRGdzTjVZODhTMFpQQjVoOTkwMm5mV2xrc2xSWGFJMTlCNXNjY0hDN0hUWjJiVWRQL250UisxUFNXd21QRTZoWERqVXNWUW5QNkc2S2ZHcElMWTl4N3A2bWthaVN1MWdVNHk2a1FmZVRXbzMxMkNOdDhkbEV6NGNweDF4L1VvanBnMG4vWkZIUFRvSVliVTV4QStxd0E2b29tQzlwVFAxT3VqU2g5MnA2UGUyaGVGSUw4cnNJaXJrVitDeGFyTTgzNEtFa2JYb3ZNZXhXU0d4bk5EMGhsU21ESFlyQUd2a2RXUUx0NU15WW9ISFlXYmZLYlBJRW14cXgvWXBnZURLS3RiQytkVWRTbEpmRXF5aXBDeCtBTTJLSVhDbUorTlJ3cW5Wc0hzVHFuOElxYVJFWW0rVkg5NWJqbU1aWkZjSndSWHBlOFBQa1RTeEtYVEgxMUUyYjhEQkp6QVJSMW9pdTZUVm45eUk1Q2t0NlpqMEZYcytuU1pZeG1nYy81TVRyOEhZRGh4Q3F5bW9yM3c0b1ZVVmJGTVM2cC9meWdsWnBEZkw2bUJVTTlhWmtDd1RZZCs5blVwQ2R4WFlkajlPL3YrY0xDZkx5WEt5bkFUSWNyS2NMSGVIYUVEa0l2WUV2cHdnVlkvZ0NJV0lRc1N4UUpXN1JkUWhsRXpHTjJXSlM0RWlkNU9vTFVnOU10V0oyLzRxZDUyb0tVZzlFUnpSbUlqd0Y3bHJSQTFCNnBrUVJMUW40cVdTdTBwVUU2U2VDNjhSUFFuTmk1SzdURlFsRkMrUXQ0a2hoUFo1eVYwaUtoTUtDWG1mbUVBWW41WGNCYUlTb2ZBalBpTm1FYllubFR0UFZDQVVmc3kzeEZMQythaHlaNG55aENLQStKWFlRTGg5eVowaHloS0tBT1pmWW85WTdoUlJtbEM4UkJRbWp2MFByV1E3UitHVjdvOEFBQUFBU1VWT1JLNUNZSUk9KScsXG5cdH0sXG5cdCcuel9sYl9ub19uZXdfdG9fbWVfYmFkZ2UgLnpfbGJfdGFic190YWIuel9sYl9uZXdfdG9fbWU6YmVmb3JlJzoge1xuXHRcdGRpc3BsYXk6ICdub25lJ1xuXHR9LFxuXHQnLnpfbGJfdGFic190YWIgPiAuel9sYl90YWJzX3RhYl9uYW1lX2NvbnRhaW5lciwgLnpfbGJfdGFic190YWIgPiAuel9sYl90YWJzX3RhYl90aW1lX3JlbWFpbmluZ19jb250YWluZXInOiB7XG5cdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsXG5cdFx0dG9wOiAnNTAlJyxcblx0XHRsZWZ0OiAnNTAlJyxcblx0XHR0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKSdcblx0fSxcblx0Jy56X2xiX3RhYnNfdGFiID4gLnpfbGJfdGFic190YWJfdGltZV9yZW1haW5pbmdfY29udGFpbmVyJzoge1xuXHRcdHRvcDogJzcwJScsXG5cdFx0ZGlzcGxheTogJ25vbmUnXG5cdH0sXG5cdCcuel9sYl90YWJzX3RhYl9uYW1lJzoge1xuXHRcdCdmb250LXNpemUnOiAnMS4yZW0nXG5cdH0sXG5cdCcuel9sYl90YWJzX3RhYl90aW1lX3JlbWFpbmluZyc6IHtcblx0XHQnZm9udC13ZWlnaHQnOiAnbm9ybWFsJ1xuXHR9LFxuXHQnLnpfbGJfdGFic190YWIuel9sYl9oYXNfdGltZV9yZW1haW5pbmcgLnpfbGJfdGFic190YWJfdGltZV9yZW1haW5pbmdfY29udGFpbmVyJzoge1xuXHRcdGRpc3BsYXk6ICdibG9jaycsXG5cdH0sXG5cdCcuel9sYl90YWJzX3RhYi56X2xiX2hhc190aW1lX3JlbWFpbmluZyAuel9sYl90YWJzX3RhYl9uYW1lX2NvbnRhaW5lcic6IHtcblx0XHR0b3A6ICczMyUnXG5cdH0sXG5cdCcuel9sYl90YWJzX3RhYl90aW1lX3JlbWFpbmluZzpiZWZvcmUnOiB7XG5cdFx0Y29udGVudDogJ1wiXCInLFxuXHRcdHdpZHRoOiAnMWVtJyxcblx0XHRoZWlnaHQ6ICcxZW0nLFxuXHRcdGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuXHRcdHRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKC0wLjJlbSwwLjFlbSwwKSBzY2FsZTNkKDEuMiwgMS4yLCAxLjIpJyxcblx0XHQvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG5cdFx0J2JhY2tncm91bmQtaW1hZ2UnOiBjbG9ja0JhY2tncm91bmRJbWFnZS5yZXBsYWNlKCd+fkNPTE9Sfn4nLCAnMDA4ZDg5JyksXG5cdFx0J2JhY2tncm91bmQtc2l6ZSc6ICdjb250YWluJyxcblx0XHQnYmFja2dyb3VuZC1yZXBlYXQnOiAnbm8tcmVwZWF0J1xuXHR9LFxuXHQnLnpfbGJfdGFic190YWJfYWN0aXZlIC56X2xiX3RhYnNfdGFiX3RpbWVfcmVtYWluaW5nOmJlZm9yZSc6IHtcblx0XHQnYmFja2dyb3VuZC1pbWFnZSc6IGNsb2NrQmFja2dyb3VuZEltYWdlLnJlcGxhY2UoJ35+Q09MT1J+ficsICdGRkZGRkYnKSxcblx0fSxcblx0Jy56X2xiX3RhYnNfdGFiX2FjdGl2ZSc6IHtcblx0XHQnYmFja2dyb3VuZC1jb2xvcic6ICdyZ2IoMCwgMTQxLCAxMzcpJyxcblx0XHRjb2xvcjogJ3doaXRlJ1xuXHR9LFxuXHQnLnpfbGJfbGVhZGVyYmFvcmQnOiB7XG5cdFx0d2lkdGg6ICcxMDAlJyxcblx0XHRkaXNwbGF5OiAnbm9uZScsXG5cdFx0J2JveC1zaXppbmcnOiAnYm9yZGVyLWJveCcsXG5cdFx0J2JvcmRlci10b3AnOiAnbm9uZSdcblx0fSxcblx0Jy56X2xiX2xlYWRlcmJhb3JkLnpfbGJfYWN0aXZlJzoge1xuXHRcdGRpc3BsYXk6ICdibG9jaydcblx0fSxcblx0Jy56X2xiX3RpbWVfcmVtYWluaW5nJzoge1xuXHRcdHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuXHRcdCctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGUzZCgwLDAsMCknLCAvLyBBbmRyb2lkIHNjcm9sbGluZyBmaXg/ICBQdXNoIHJlbmRlciB0byBHUFVcblx0XHRkaXNwbGF5OiAnbm9uZScsXG5cdFx0aGVpZ2h0OiAnMmVtJ1xuXHR9LFxuXHQnLnpfbGJfc2hvd190aW1lX3JlbWFpbmluZ19iZWxvd190YWJzIC56X2xiX2xlYWRlcmJhb3JkLnpfbGJfYWN0aXZlLnpfbGJfaGFzX3RpbWVfcmVtYWluaW5nID4gLnpfbGJfdGltZV9yZW1haW5pbmcnOiB7XG5cdFx0ZGlzcGxheTogJ2Jsb2NrJ1xuXHR9LFxuXHQnLnpfbGJfdGltZV9yZW1haW5pbmdfbGFiZWwsIC56X2xiX3RpbWVfcmVtYWluaW5nX3JlbWFpbmluZyc6IHtcblx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJyxcblx0XHR0b3A6IDAsXG5cdFx0aGVpZ2h0OiAnMTAwJScsXG5cdFx0Y29sb3I6ICdyZ2IoMTM0LDEzNCwxMzQpJyxcblx0XHQnZm9udC13ZWlnaHQnOiAnYm9sZCcsXG5cdFx0ZGlzcGxheTogJ2lubGluZScsXG5cdFx0J3ZlcnRpY2FsLWFsaWduJzogJ3RvcCdcblx0fSxcblx0Jy56X2xiX3RpbWVfcmVtYWluaW5nX2xhYmVsJzoge1xuXHRcdHJpZ2h0OiAnNTAlJyxcblx0XHQndGV4dC1hbGlnbic6ICdyaWdodCcsXG5cdFx0J3BhZGRpbmctcmlnaHQnOiAnMC41ZW0nXG5cdH0sXG5cdCcuel9sYl90aW1lX3JlbWFpbmluZ19yZW1haW5pbmcnOiB7XG5cdFx0bGVmdDogJzUwJScsXG5cdFx0J3RleHQtYWxpZ24nOiAnbGVmdCcsXG5cdFx0J3BhZGRpbmctbGVmdCc6ICcwLjVlbSdcblx0fSxcblx0Jy56X2xiX2xiX2l0ZW1zJzoge1xuXHRcdHdpZHRoOiAnMTAwJSdcblx0fSxcblx0Jy56X2xiX2xiX2l0ZW0nOiB7XG5cdFx0cG9zaXRpb246ICdyZWxhdGl2ZScsXG5cdFx0Jy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZTNkKDAsIDAsIDApJywgLy8gQW5kcm9pZCBzY3JvbGwgaGFja2Fyb3VuZFxuXHRcdHdpZHRoOiAnMTAwJScsXG5cdFx0ZGlzcGxheTogJ2Jsb2NrJyxcblx0XHRjb2xvcjogJyM1QTVBNUEnXG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtLnpfbGJfaXRlbV9jdXJyZW50X3VzZXInOiB7XG5cdFx0J2JhY2tncm91bmQtY29sb3InOiAncmdiYSgwLDAsMCwwLjA1KSdcblx0fSxcblx0Jy56X2xiX2xiX2l0ZW0uel9sYl9pdGVtX3plcm9fc3RhdGUgLnpfbGJfbGJfaXRlbV9zZWN0aW9uX3JhbmsnOiB7XG5cdFx0ZGlzcGxheTogJ25vbmUnXG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtX3R5cGVfcGxheWVyJzoge1xuXG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtX3R5cGVfemVyb19zdGF0ZSc6IHtcblxuXHR9LFxuXHQvLyBTcGVjaWFsIGludml0ZSByZS1mb3JtYXR0aW5nXG5cdCcuel9sYl9sYl9pdGVtLnpfbGJfaXRlbV9pbnZpdGUgPiAuel9sYl9sYl9pdGVtX3NlY3Rpb25fbmFtZSc6IHtcblx0XHRsZWZ0OiAnNSUnLFxuXHRcdHdpZHRoOiAnNzAlJyxcblx0XHRoZWlnaHQ6ICcxMDAlJ1xuXHR9LFxuXHQnLnpfbGJfbGJfaXRlbS56X2xiX2l0ZW1faW52aXRlID4gLnpfbGJfbGJfaXRlbV9zZWN0aW9uX25hbWUgPiAuel9sYl9sYl9pdGVtX3dyYXBwZXInOiB7XG5cdFx0dG9wOiAnNTAlJyxcblx0XHRib3R0b206ICdpbml0aWFsJyxcblx0XHR0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgwLCAtNTAlLCAwKSdcblx0fSxcblx0Jy56X2xiX2xiX2l0ZW0uel9sYl9pdGVtX3plcm9fc3RhdGUgPiAuel9sYl9sYl9pdGVtX3NlY3Rpb25fY2hhbGxlbmdlICAuel9sYl9sYl9pdGVtX2NoYWxsZW5nZSc6IHtcblx0XHRkaXNwbGF5OiAnYmxvY2snXG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtX3R5cGVfZ3JvdXBfbGVhZGVyJzoge1xuXG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtX3Bvc18wJzoge30sXG5cdCcuel9sYl9sYl9pdGVtX3Bvc18xJzoge30sXG5cdCcuel9sYl9sYl9pdGVtX3Bvc18yJzoge30sXG5cdCcuel9sYl9pdGVtX2N1cnJlbnRfdXNlcic6IHtcblxuXHR9LFxuXHQvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG5cdCcuel9sYl9sYl9pdGVtX3NlY3Rpb25fcmFuaywgLnpfbGJfbGJfaXRlbV9zZWN0aW9uX3BpY3R1cmUsIC56X2xiX2xiX2l0ZW1fc2VjdGlvbl9uYW1lLCAuel9sYl9sYl9pdGVtX3NlY3Rpb25fc2NvcmUsIC56X2xiX2xiX2l0ZW1fc2VjdGlvbl9jdGEnOiB7XG5cdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsXG5cdFx0dG9wOiAwLFxuXHRcdGhlaWdodDogJzEwMCUnXG5cdH0sXG5cdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcblx0Jy56X2xiX2xiX2l0ZW1fc2VjdGlvbl9uYW1lLCAuel9sYl9sYl9pdGVtX3NlY3Rpb25fY2hhdF9uYW1lLCAuel9sYl9sYl9pdGVtX3NlY3Rpb25fc2NvcmUsIC56X2xiX2xiX2l0ZW1fc2VjdGlvbl9jaGFsbGVuZ2UnOiB7XG5cdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsXG5cdFx0bGVmdDogJzIzJScsXG5cdFx0cmlnaHQ6ICc4MCUnLFxuXHRcdHRvcDogJzAnLFxuXHRcdGhlaWdodDogJzUwJScsXG5cdFx0d2lkdGg6ICc1NyUnLFxuXHRcdG92ZXJmbG93OiAnaGlkZGVuJyxcblx0XHQnd2hpdGUtc3BhY2UnOiAnbm93cmFwJyxcblx0XHQndGV4dC1vdmVyZmxvdyc6ICdlbGxpcHNpcydcblx0fSxcblx0Jy56X2xiX2xiX2l0ZW1fc2VjdGlvbl9zY29yZSwgLnpfbGJfbGJfaXRlbV9zZWN0aW9uX2NoYWxsZW5nZSc6IHtcblx0XHR0b3A6ICc1MCUnXG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtX3dyYXBwZXInOiB7XG5cdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsXG5cdFx0d2lkdGg6ICcxMDAlJ1xuXHR9LFxuXHQnLnpfbGJfbGJfaXRlbV9zZWN0aW9uX25hbWUgPiAuel9sYl9sYl9pdGVtX3dyYXBwZXIsIC56X2xiX2xiX2l0ZW1fc2VjdGlvbl9jaGF0X25hbWUgPiAuel9sYl9sYl9pdGVtX3dyYXBwZXInOiB7XG5cdFx0Ym90dG9tOiAwXG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtX3NlY3Rpb25fc2NvcmUgPiAuel9sYl9sYl9pdGVtX3dyYXBwZXIsIC56X2xiX2xiX2l0ZW1fc2VjdGlvbl9jaGFsbGVuZ2UgPiAuel9sYl9sYl9pdGVtX3dyYXBwZXInOiB7XG5cdFx0dG9wOiAwXG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtX3NlY3Rpb25fcmFuayc6IHtcblx0XHRsZWZ0OiAnMCUnLFxuXHRcdHdpZHRoOiAnOCUnLFxuXHRcdGNvbG9yOiAncmdiKDEzNCwxMzQsMTM0KScsXG5cdFx0J2ZvbnQtc2l6ZSc6ICcxLjJlbSdcblx0fSxcblx0Jy56X2xiX2xiX2l0ZW1fc2VjdGlvbl9yYW5rX3ZhbHVlJzoge1xuXHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuXHRcdHRvcDogJzUwJScsXG5cdFx0bGVmdDogMCxcblx0XHR3aWR0aDogJzEwMCUnLFxuXHRcdCd0ZXh0LWFsaWduJzogJ2NlbnRlcicsXG5cdFx0dHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMCwgLTUwJSwgMCknLFxuXHRcdG92ZXJmbG93OiAnaGlkZGVuJyxcblx0XHQnd2hpdGUtc3BhY2UnOiAnbm93cmFwJ1xuXHR9LFxuXHQnLnpfbGJfbGJfaXRlbV9zZWN0aW9uX3BpY3R1cmUnOiB7XG5cdFx0bGVmdDogJzYlJ1xuXHR9LFxuXHQnLnpfbGJfbGJfaXRlbV9waG90b193cmFwcGVyJzoge1xuXHRcdHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuXHRcdCctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGUzZCgwLCAwLCAwKScsIC8vIEFuZHJvaWQgc2Nyb2xsIGhhY2thcm91bmRcblx0XHR3aWR0aDogJzEwMCUnXG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtX2hlaWdodF9wcm92aWRlcic6IHtcblx0XHRwb3NpdGlvbjogJ3JlbGF0aXZlJyxcblx0XHQnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlM2QoMCwgMCwgMCknLCAvLyBBbmRyb2lkIHNjcm9sbCBoYWNrYXJvdW5kXG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtX3NlY3Rpb25fcGljdHVyZSwgLnpfbGJfbGJfaXRlbV9oZWlnaHRfcHJvdmlkZXInOiB7XG5cdFx0d2lkdGg6ICcxNSUnLFxuXHR9LFxuXHQnLnpfbGJfbGJfaXRlbV9waG90b193cmFwcGVyOmJlZm9yZSwgLnpfbGJfbGJfaXRlbV9oZWlnaHRfcHJvdmlkZXI6YmVmb3JlJzoge1xuXHRcdGNvbnRlbnQ6ICdcIlwiJyxcblx0XHRkaXNwbGF5OiAnYmxvY2snLFxuXHRcdCdwYWRkaW5nLXRvcCc6ICcxMDAlJ1xuXHR9LFxuXHQnLnpfbGJfbGJfaXRlbV9waG90byc6IHtcblx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJyxcblx0XHR0b3A6ICc1MCUnLFxuXHRcdGxlZnQ6ICc1MCUnLFxuXHRcdHdpZHRoOiAnODAlJyxcblx0XHRoZWlnaHQ6ICc4MCUnLFxuXHRcdCdiYWNrZ3JvdW5kLXNpemUnOiAnY29udGFpbicsXG5cdFx0dHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMCknLFxuXHRcdCdib3JkZXItcmFkaXVzJzogJzUwJScsXG5cdFx0J2JveC1zaXppbmcnOiAnYm9yZGVyLWJveCdcblx0fSxcblx0Jy56X2xiX2xiX2l0ZW1fc2VjdGlvbl9uYW1lJzoge1xuXHRcdCdwYWRkaW5nLWJvdHRvbSc6ICcwLjJlbSdcblx0fSxcblx0Jy56X2xiX2xiX2l0ZW1fbmFtZSwgLnpfbGJfbGJfaXRlbV9jaGF0X25hbWUsIC56X2xiX2xiX2l0ZW1fY2hhbGxlbmdlLCAuel9sYl9sYl9pdGVtX3Njb3JlJzoge1xuXHR9LFxuXHQnLnpfbGJfbGJfaXRlbV9uYW1lJzoge1xuXHRcdCdmb250LXNpemUnOiAnMS41ZW0nLFxuXHRcdCdmb250LXdlaWdodCc6ICdib2xkJyxcblx0XHQncGFkZGluZy1ib3R0b20nOiAnMC4yZW0nXG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtX2NoYXRfbmFtZSc6IHtcblx0XHRkaXNwbGF5OiAnbm9uZScsXG5cdFx0J2ZvbnQtc2l6ZSc6ICcxLjI1ZW0nXG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtX3NlY3Rpb25fc2NvcmUnOiB7XG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtX3Njb3JlJzoge1xuXHRcdCdmb250LXNpemUnOiAnMS41ZW0nLFxuXHRcdCdmb250LXdlaWdodCc6ICdib2xkJyxcblx0XHQncGFkZGluZy10b3AnOiAnMC4yZW0nXG5cdH0sXG5cdCcuel9sYl9sYl9pdGVtX2NoYWxsZW5nZSc6IHtcblx0XHRkaXNwbGF5OiAnbm9uZScsXG5cdFx0J2ZvbnQtc2l6ZSc6ICcxLjFlbScsXG5cdFx0J3BhZGRpbmctdG9wJzogJzAuMmVtJ1xuXHR9LFxuXHQnLnpfbGJfbGJfaXRlbV9zZWN0aW9uX2N0YSc6IHtcblx0XHR3aWR0aDogJzIwJScsXG5cdFx0cmlnaHQ6IDBcblx0fSxcblx0Jy56X2xiX2xiX2l0ZW1fY3RhJzoge1xuXHRcdCdmb250LXdlaWdodCc6ICdib2xkJyxcblx0XHQnZm9udC1zaXplJzogJzEuMmVtJyxcblx0XHQnbGluZS1oZWlnaHQnOiAnMS4yZW0nLFxuXHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuXHRcdHRvcDogJzUwJScsXG5cdFx0cmlnaHQ6ICcxZW0nLFxuXHRcdGN1cnNvcjogJ2hhbmQnLFxuXHRcdHRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKDAsIC01MCUsIDApJyxcblx0XHQnYm9yZGVyLXJhZGl1cyc6ICcwLjFlbScsXG5cdFx0Y29sb3I6ICdyZ2IoMCwgMTQxLCAxMzcpJyxcblx0XHRwYWRkaW5nOiAnMC4zZW0gMWVtJyxcblx0XHRib3JkZXI6ICcwLjExZW0gc29saWQgcmdiKDAsIDE0MSwgMTM3KSdcblx0fSxcblx0Jy56X2xiX3BsYXlfbm93Jzoge1xuXHRcdHBvc2l0aW9uOiAnZml4ZWQnLFxuXHRcdGxlZnQ6ICc1JScsXG5cdFx0cmlnaHQ6ICc1JScsXG5cdFx0d2lkdGg6ICc5MCUnLFxuXHRcdGJvdHRvbTogJzBlbScsXG5cdFx0J2ZvbnQtc2l6ZSc6ICcxLjdlbScsXG5cdFx0aGVpZ2h0OiAnMi4yZW0nLFxuXHRcdCdsaW5lLWhlaWdodCc6ICcyLjJlbScsXG5cdFx0J3RleHQtYWxpZ24nOiAnY2VudGVyJyxcblx0XHQndmVydGljYWwtYWxpZ24nOiAnbWlkZGxlJyxcblx0XHQnYm9yZGVyLXJhZGl1cyc6ICcwLjZlbScsXG5cdFx0J2JhY2tncm91bmQtY29sb3InOiAnIzQwODBGNycsXG5cdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0Y29sb3I6ICd3aGl0ZSdcblx0fSxcblx0Jy56X2xiX2NvbnRhaW5lciA+IC56X2xiX3BsYXlfbm93Jzoge1xuXHRcdGRpc3BsYXk6ICdub25lJywgLy8gSGlkZSBieSBkZWZhdWx0XG5cdFx0cG9zaXRpb246ICdyZWxhdGl2ZScsXG5cdFx0Jy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZTNkKDAsIDAsIDApJywgLy8gQW5kcm9pZCBzY3JvbGwgaGFja2Fyb3VuZFxuXHR9LFxuXHQnLnpfbGJfYm90dG9tX3NwYWNlcic6IHtcblx0XHRoZWlnaHQ6ICc1LjVlbSdcblx0fSxcblx0Jy56X2xiX3BsYXlfbm93X25vX3BpbiAuel9sYl9ib3R0b21fc3BhY2VyJzoge1xuXHRcdGhlaWdodDogMFxuXHR9LFxuXHQnLnpfbGJfcGxheV9ub3dfbm9fcGluIC56X2xiX21haW4gPiAuel9sYl9wbGF5X25vdyc6IHtcblx0XHRkaXNwbGF5OiAnbm9uZScgLy8gSGlkZSBmaXhlZCBwbGF5bm93XG5cdH0sXG5cdCcuel9sYl9wbGF5X25vd19ub19waW4gLnpfbGJfY29udGFpbmVyID4gLnpfbGJfcGxheV9ub3cnOiB7XG5cdFx0ZGlzcGxheTogJ2Jsb2NrJ1xuXHR9XG59O1xuZXhwb3J0ID0gbGVhZGVyYm9hcmRDU1M7XG4iLCIvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tbWVudC1mb3JtYXRcbi8vLzxhbWQtbW9kdWxlIG5hbWU9XCJaeW5nYU1hdGNoXCIvPlxuaW1wb3J0ICogYXMgTWF0Y2hDb250cmFjdHMgZnJvbSAnQVRHLVR1cm5zL3NyYy9jb250cmFjdHMvbWF0Y2gnO1xuaW1wb3J0ICogYXMgUHJvZmlsZUNvbnRyYWN0cyBmcm9tICdBVEctVHVybnMvc3JjL2NvbnRyYWN0cy9wcm9maWxlJztcbmltcG9ydCBaeW5nYSA9IHJlcXVpcmUoJy4vWnluZ2EnKTtcbmltcG9ydCBaeW5nYUFjY291bnQgPSByZXF1aXJlKCcuL1p5bmdhQWNjb3VudCcpO1xuaW1wb3J0IFp5bmdhQ29yZSA9IHJlcXVpcmUoJy4vWnluZ2FDb3JlJyk7XG5pbXBvcnQgWnluZ2FJbnN0YW50ID0gcmVxdWlyZSgnLi9aeW5nYUluc3RhbnQnKTtcbmltcG9ydCBaeW5nYU5ldCA9IHJlcXVpcmUoJy4vWnluZ2FOZXQnKTtcblxuY29uc3QgT2JqZWN0QXNzaWduID0gWnluZ2FDb3JlLk9iamVjdEFzc2lnbjtcblxudmFyIGNvbW1vbkVudHJ5RGF0YSA9IG51bGw7ICAgIC8vIENvbW1vbiBlbnRyeSBwb2ludCBkYXRhIGV4dHJhY3RlZCBmcm9tIHBheWxvYWRcbnZhciBjdXJyZW50SW5zdGFuY2VJZDogYm9vbGVhbiB8IG51bWJlciA9IGZhbHNlOyAvLyBDdXJyZW50IGluc3RhbmNlX2lkLCBmcm9tIHN0YXJ0VHVybkFzeW5jKCk7XG52YXIgbGFzdEluc3RhbmNlSWQ6IGJvb2xlYW4gfCBudW1iZXIgPSBmYWxzZTsgICAgLy8gTGFzdCBlbmRlZCBpbnN0YW5jZSwgZnJvbSBlbmRUdXJuQXN5bmMoKTtcbnZhciBwbGF5ZWRJbnN0YW5jZURhdGEgPSB7fTsgICAvLyBDYWNoZWQgc2Vzc2lvbiBwbGF5ZWQgaW5zdGFuY2UgZGF0YSBmb3IgYm90c1xudmFyIGxhc3RTZXNzaW9uRGF0YSA9IHt9OyAgICAgIC8vIGxhc3QgZGF0YSBzZW5kIGJ5IGdhbWUgdG8gSW5zdGFudC5zZXRTZXNzaW9uRGF0YSgpXG52YXIgbm93ID0gbmV3IERhdGUoKTtcbnZhciB0ek9mZnNldCA9IG5vdy5nZXRUaW1lem9uZU9mZnNldCgpO1xudmFyIGxvY2FsZSA9IGZhbHNlO1xuLy8gd3JhcHBlciBrZXlzIGZvciBjb21tb24gIHBheWxvYWQvc2Vzc2lvbiBkYXRhIHNoYXJpbmdcbi8vICB7XCJmb29cIjpcImJhclwifVxuLy8gd2lsbCBiZWNvbWU6XG4vLyAge1wiX19jXCI6ey4uIGNvbW1vbiBzdHVmZiAuLi59LFwiX19kXCI6e1wiZm9vXCI6XCJiYXJcIn19XG52YXIgY29tbW9uS2V5ID0gJ19fYyc7XG52YXIgZGF0YUtleSA9ICdfX2QnO1xuXG52YXIgcGxheWVySWQgPSAwO1xudmFyIHNlc3Npb25Ub2tlbjogc3RyaW5nID0gbnVsbDtcblxudmFyIGRlZmF1bHRJbnN0YW5jZUZpZWxkczogQXJyYXk8KE1hdGNoQ29udHJhY3RzLk1hdGNoRmV0Y2hGaWVsZHNUeXBlIHwgJ3BsYXllcnMucGxheWVydG9pbnN0YW5jZV9zdGF0ZScpPiA9IFtcblx0J2luc3RhbmNlX3N0YXRlJyxcblx0J2luc3RhbmNlX3N1bW1hcnlfZGF0YScsXG5cdCdpbnN0YW5jZV9zdW1tYXJ5X2RhdGFfY2FzJyxcblx0J2luc3RhbmNlX2RhdGEnLFxuXHQnaW5zdGFuY2VfZGF0YV9jYXMnLFxuXHQncGxheWVycy5wbGF5ZXJ0b2luc3RhbmNlX3N0YXRlJ1xuXTtcbnZhciBkZWZhdWx0SW5zdGFuY2VzRmllbGRzOiBNYXRjaENvbnRyYWN0cy5NYXRjaE11bHRpRmV0Y2hGaWVsZHNUeXBlW10gPSBbXG5cdCdpbnN0YW5jZV9zdGF0ZScsXG5cdCdwbGF5ZXJ0b2luc3RhbmNlX3N0YXRlJyxcblx0J2luc3RhbmNlX3N1bW1hcnlfZGF0YSdcbl07XG5cbi8vIGZpbmQgYSB3YXkgdG8gaW1wb3J0IHRoZXNlIGluc3RlYWQgb2YgY29weS9wYXN0YVxuY29uc3QgZGVmYXVsdFJvdW5kRmV0Y2hGaWVsZHM6IE1hdGNoQ29udHJhY3RzLlJvdW5kc0ZldGNoRmllbGRzVHlwZVtdID0gW1xuXHQnaW5zdGFuY2VfaWQnLFxuXHQnaW5zdGFuY2Vfc2lnJyxcblx0J2luc3RhbmNlX3N0YXRlJyxcblx0J2luc3RhbmNlX2RhdGFfY2FzJyxcblx0J2luc3RhbmNlX2RhdGEnLFxuXHQnaW5zdGFuY2Vfc3VtbWFyeV9kYXRhX2NhcycsXG5cdCdpbnN0YW5jZV9zdW1tYXJ5X2RhdGEnLFxuXHQnaW5zdGFuY2VfY3JlYXRlZF9hdCcsXG5cdCdpbnN0YW5jZV9sYXN0X21vdmVfcGxheWVkX2F0Jyxcblx0J2Rpc3BsYXlfbmFtZScsXG5cdCdkaXNwbGF5X3BpY3R1cmVfdXJsJyxcblx0J3p5bmdhX3BsYXllcl9pZCcsXG5cdCdmYmlnX3BsYXllcl9pZCdcbl07XG5cbi8vIGZvciBzaW1wbGljaXR5IGFuZCBjb2RlIG1pbmlmaWNhdGlvblxuZnVuY3Rpb24gaXNVbmRlZih4KSB7XG5cdHJldHVybiB0eXBlb2YgeCA9PT0gJ3VuZGVmaW5lZCc7XG59XG5cblByb21pc2UuYWxsKFtcblx0WnluZ2FBY2NvdW50LkV2ZW50Lmxhc3QoWnluZ2FBY2NvdW50LkV2ZW50cy5BQ0NPVU5UX0RFVEFJTFMpLFxuXHRaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfRkJfVE9TX0FDQ0VQVClcbl0pLnRoZW4oKGFsbFJlc3VsdHMpID0+IHtcblx0Y29uc3QgZGV0YWlscyA9IGFsbFJlc3VsdHNbMF0gYXMgWnluZ2FBY2NvdW50LlVzZXJBY2NvdW50RGV0YWlscztcblx0cGxheWVySWQgPSBkZXRhaWxzLnBsYXllcklkO1xuXHRzZXNzaW9uVG9rZW4gPSBkZXRhaWxzLnRva2VuO1xuXHRsb2NhbGUgPSBaeW5nYUluc3RhbnQuZ2V0TG9jYWxlICYmIFp5bmdhSW5zdGFudC5nZXRMb2NhbGUoKSB8fCBmYWxzZTtcblx0WnluZ2FJbnN0YW50LnNldFNlc3Npb25EYXRhKHVuZGVmaW5lZCk7IC8vIFRyaWdnZXJzIG91ciBob29rIHRvIG1lcmdlIGdhbWUgc3VwcGxpZWQgZGF0YSBhbmQgb3VyIGJvdCBkYXRhXG59KTtcblxuWnluZ2FJbnN0YW50LkV2ZW50Lmxhc3QoWnluZ2FJbnN0YW50LkV2ZW50cy5JTlNUQU5UX0ZCX1RPU19BQ0NFUFQpLnRoZW4oKCkgPT4ge1xuXHRsb2NhbGUgPSBaeW5nYUluc3RhbnQuZ2V0TG9jYWxlICYmIFp5bmdhSW5zdGFudC5nZXRMb2NhbGUoKSB8fCBmYWxzZTtcbn0pO1xuXG5leHBvcnQgdmFyIGRldk1vZGUgPSBmYWxzZTtcblxuZnVuY3Rpb24gZ2VuTWF0Y2hFcnJvcihjb2RlLCBtZXNzYWdlPywgZGV0YWlscz8pIHtcblx0cmV0dXJuIHtcblx0XHRjb2RlOiBjb2RlIHx8IEVSUk9SUy5NQVRDSF9VTktOT1dOLFxuXHRcdG1lc3NhZ2U6IG1lc3NhZ2UgfHwgJ1Vua25vd24nLFxuXHRcdGRldGFpbHM6IGRldGFpbHMgfHwge31cblx0fTtcbn1cblxuLy8gQ2xlYXIgb3V0IHNldFNlc3Npb25EYXRhIGRhdGEgd2hlbiBjb250ZXh0IGNoYW5nZXNcblp5bmdhSW5zdGFudC5FdmVudC5vbihaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfQ09OVEVYVF9JRF9DSEFOR0UsIGZ1bmN0aW9uICgpIHtcblx0cGxheWVkSW5zdGFuY2VEYXRhID0ge307XG5cdGN1cnJlbnRJbnN0YW5jZUlkID0gZmFsc2U7XG5cdGxhc3RJbnN0YW5jZUlkID0gZmFsc2U7XG5cdGxhc3RTZXNzaW9uRGF0YSA9IHt9O1xuXHRQcm9taXNlLmFsbChbXG5cdFx0WnluZ2FBY2NvdW50LkV2ZW50Lmxhc3QoWnluZ2FBY2NvdW50LkV2ZW50cy5BQ0NPVU5UX0RFVEFJTFMpLFxuXHRcdFp5bmdhSW5zdGFudC5FdmVudC5sYXN0KFp5bmdhSW5zdGFudC5FdmVudHMuSU5TVEFOVF9GQl9UT1NfQUNDRVBUKVxuXHRdKS50aGVuKCgpID0+IHtcblx0XHRaeW5nYUluc3RhbnQuc2V0U2Vzc2lvbkRhdGEodW5kZWZpbmVkKTsgLy8gVHJpZ2dlcnMgb3VyIGhvb2sgdG8gbWVyZ2UgZ2FtZSBzdXBwbGllZCBkYXRhIGFuZCBvdXIgYm90IGRhdGFcblx0fSk7XG59LCBmYWxzZSAvKmlzb2xhdGUqLyk7XG5cbi8vIEFwcGx5IGhvb2sgdG8gcHVsbCBvdXQgY29tbW9uIGRhdGFcblp5bmdhSW5zdGFudC56eW5nYS5yZWdpc3Rlck1ldGhvZFJldHVybkhvb2soJ2dldEVudHJ5UG9pbnREYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcblx0aWYgKGRhdGEgJiYgdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIGRhdGEuaGFzT3duUHJvcGVydHkoY29tbW9uS2V5KSAmJiBkYXRhLmhhc093blByb3BlcnR5KGRhdGFLZXkpKSB7XG5cdFx0Ly8gRGF0YSBpcyBpbiB0aGUgSE9PSydkIGZvcm1hdC4gIEV4dHJhY3Qgd2hhdCB3ZSBuZWVkLlxuXHRcdGlmICghY29tbW9uRW50cnlEYXRhKSB7XG5cdFx0XHRjb21tb25FbnRyeURhdGEgPSBkYXRhW2NvbW1vbktleV07XG5cdFx0XHQvLyBmaXJlIGV2ZW50XG5cdFx0fVxuXHRcdHJldHVybiBkYXRhW2RhdGFLZXldO1xuXHR9XG5cdHJldHVybiBkYXRhO1xufSk7XG5cbmZ1bmN0aW9uIGdlbk1lcmdlZFNlc3Npb25EYXRhKCkge1xuXHR2YXIgZGF0YSA9IHt9O1xuXHR2YXIgaW5zdGFuY2VzID0gW107XG5cdHZhciBpbnN0YW5jZTtcblx0dmFyIGk7XG5cblx0ZGF0YVtkYXRhS2V5XSA9IGxhc3RTZXNzaW9uRGF0YTtcblx0ZGF0YVtjb21tb25LZXldID0ge1xuXHRcdGI6IFtdLFxuXHRcdHA6IHBsYXllcklkXG5cdH07XG5cblx0Ly8gU2VuZCB1cCBvdXIgc2Vzc2lvbiB0b2tlbiBmb3IgZnV0dXJlIHVzZVxuXHRpZiAodHlwZW9mIHNlc3Npb25Ub2tlbiA9PT0gJ3N0cmluZycgJiYgc2Vzc2lvblRva2VuLmxlbmd0aCA+IDApIHtcblx0XHRkYXRhW2NvbW1vbktleV0ucyA9IHNlc3Npb25Ub2tlbjtcblx0fVxuXG5cdC8vIFNlbmQgdXAgbG9jYWxlIGlmIHdlIGhhdmUgaXRcblx0aWYgKGxvY2FsZSAhPT0gZmFsc2UpIHtcblx0XHRkYXRhW2NvbW1vbktleV0ubCA9IGxvY2FsZTtcblx0fVxuXG5cdC8vIFNlbmQgdXAgbG9jYWxlIGlmIHdlIGhhdmUgaXRcblx0aWYgKHR6T2Zmc2V0ID49IC0xNDQwICYmIHR6T2Zmc2V0IDw9IDE0NDApIHtcblx0XHRkYXRhW2NvbW1vbktleV0udHogPSB0ek9mZnNldDtcblx0fVxuXG5cdC8vIENyZWF0ZSBhbiBhcnJheSBvZiBjb21wbGV0ZWQgaW5zdGFuY2VzXG5cdGZvciAoaSBpbiBwbGF5ZWRJbnN0YW5jZURhdGEpIHtcblx0XHRpbnN0YW5jZSA9IHBsYXllZEluc3RhbmNlRGF0YVtpXTtcblx0XHRpZiAoaW5zdGFuY2Uuc3RhcnQgJiYgaW5zdGFuY2UuZW5kKSB7XG5cdFx0XHRpbnN0YW5jZXMucHVzaChpbnN0YW5jZSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gU29ydCBvbGRlc3QgdG8gbmV3ZXN0XG5cdGluc3RhbmNlcyA9IGluc3RhbmNlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG5cdFx0cmV0dXJuIGEuZW5kLmdldFRpbWUoKSAtIGIuZW5kLmdldFRpbWUoKTtcblx0fSk7XG5cblx0Ly8gSW5qZWN0IGluc3RhbmNlIHNwZWNpZmljIGRhdGEgZm9yIGJvdFxuXHRmb3IgKGkgPSAwOyBpIDwgaW5zdGFuY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0aW5zdGFuY2UgPSBpbnN0YW5jZXNbaV07XG5cdFx0ZGF0YVtjb21tb25LZXldLmIucHVzaCh7XG5cdFx0XHRpOiBpbnN0YW5jZS5pbnN0YW5jZUlkLCAvLyBUaGlzIG1hdGNoIGluc3RhbmNlIElEXG5cdFx0XHRkOiBpbnN0YW5jZS5ib3REYXRhICAgICAvLyBBbnkgYm90IGRhdGEgdGhlIGdhbWUgcGFzc2VkIGludG8gc3RvcE1hdGNoQXN5bmMoKVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gUHJ1bmUgZGF0YSB1bnRpbCB3ZSBhcmUgdW5kZXIgdGhlIGFsbG93YWJsZSBzaXplXG5cdHdoaWxlIChKU09OLnN0cmluZ2lmeShkYXRhKS5sZW5ndGggPiAxMDAwKSB7XG5cdFx0aWYgKGRhdGFbY29tbW9uS2V5XS5zKSB7XG5cdFx0XHQvLyBGaXJzdCB0aGluZyB0byByZW1vdmUgaXMgdGhlIHNlc3Npb24gdG9rZW4uXG5cdFx0XHRkZWxldGUgZGF0YVtjb21tb25LZXldLnM7XG5cdFx0fSBlbHNlIGlmIChkYXRhW2NvbW1vbktleV0uYi5sZW5ndGggPiAwKSB7XG5cdFx0XHQvLyBOZXh0IGlzIHRvIHJlbW92ZSBlYWNoIGluc3RhbmNlIHNwZWNpZmljIGNodW5rIG9mIGRhdGEgdW50aWxcblx0XHRcdC8vIGl0IGZpdHMuICBPbGRlc3QgZmlyc3QuXG5cdFx0XHRkYXRhW2NvbW1vbktleV0uYi5zaGlmdCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBHaXZlIHVwLCB0aGVyZSdzIGp1c3QgdG9vIG11Y2ggZGF0YVxuXHRcdFx0Ly8gQWxsb3cgaXQgdG8gZ28gb3V0IGFuZCBoYXZlIHRoZSBGQiBTREsgcmVqZWN0IGl0LlxuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBkYXRhO1xufVxuXG4vLyBBcHBseSBob29rcyB0byBhZGQgY29tbW9uIGRhdGEgdG8gc2V0U2Vzc2lvbkRhdGEgbWV0aG9kXG5aeW5nYUluc3RhbnQuenluZ2EucmVnaXN0ZXJNZXRob2RBcmd1bWVudEhvb2soJ3NldFNlc3Npb25EYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcblx0aWYgKCFpc1VuZGVmKGRhdGEpKSB7XG5cdFx0Ly8gR2FtZSBjYWxsZWQgc2V0U2Vzc2lvbkRhdGEsIHNhdmUgaXRcblx0XHRsYXN0U2Vzc2lvbkRhdGEgPSBkYXRhO1xuXHR9XG5cdC8vIGFjdHVhbGx5IHNldCBvdXIgbWVyZ2VkIHNlc3Npb24gZGF0YSAoY29tbW9uIGFuZCBnYW1lLXByb3ZpZGVkKVxuXHQvLyBOb3RlOiByZWdpc3Rlck1ldGhvZEFyZ3VtZW50SG9vayBleHBlY3RzIGFuIGFyZ3VtZW50cyBhcnJheVxuXHRyZXR1cm4gW2dlbk1lcmdlZFNlc3Npb25EYXRhKCldO1xufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaENhbGw8UmVzcG9uc2VCb2R5PihtZXRob2QsIHBhdGgsIHBhcmFtcz86IGFueSwgb3B0aW9ucz86IFp5bmdhTmV0LkFwaU9wdGlvbnMpIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlPFp5bmdhTmV0LkFwaVJlc3VsdDxSZXNwb25zZUJvZHk+PihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0dmFyIHF1ZXJ5UGFyYW1zOiBzdHJpbmdbXSB8IHN0cmluZyA9IFtdO1xuXHRcdHZhciBwYXJhbU5hbWU7XG5cdFx0dmFyIHBhcmFtVmFsdWU7XG5cblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XHRwYXJhbXMgPSBwYXJhbXMgfHwge307XG5cblx0XHRmb3IgKHBhcmFtTmFtZSBpbiBwYXJhbXMpIHtcblx0XHRcdHBhcmFtVmFsdWUgPSBwYXJhbXNbcGFyYW1OYW1lXTtcblx0XHRcdC8vIGVuY29kZSBhbmQgb3B0aW9uYWxseSB0dXJuIGFycmF5cyBpbnRvIGNvbW1hIHNlcGFyYXRlZCBsaXN0XG5cdFx0XHRwYXJhbVZhbHVlID0gQXJyYXkuaXNBcnJheShwYXJhbVZhbHVlKSA/IHBhcmFtVmFsdWUubWFwKGVuY29kZVVSSSkuam9pbignLCcpIDogZW5jb2RlVVJJKHBhcmFtVmFsdWUpO1xuXHRcdFx0cXVlcnlQYXJhbXMucHVzaChwYXJhbU5hbWUgKyAnPScgKyBwYXJhbVZhbHVlKTtcblx0XHR9XG5cblx0XHRxdWVyeVBhcmFtcyA9IHF1ZXJ5UGFyYW1zLmxlbmd0aCA+IDAgPyAoJz8nICsgcXVlcnlQYXJhbXMuam9pbignJicpKSA6ICcnO1xuXG5cdFx0bGV0IGFwcElkUHJvbWlzZSA9IFp5bmdhLkV2ZW50Lmxhc3QoWnluZ2EuRXZlbnRzLkFQUF9JRCk7XG5cdFx0bGV0IGFjY291bnREZXRhaWxzUHJvbWlzZSA9IFp5bmdhQWNjb3VudC5FdmVudC5sYXN0KFp5bmdhQWNjb3VudC5FdmVudHMuQUNDT1VOVF9ERVRBSUxTKTtcblxuXHRcdFByb21pc2UuYWxsKFthcHBJZFByb21pc2UsIGFjY291bnREZXRhaWxzUHJvbWlzZV0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcblx0XHRcdHZhciBhcHBJZCA9IHJlc3VsdHNbMF07XG5cdFx0XHR2YXIgYWNjb3VudERldGFpbHMgPSByZXN1bHRzWzFdIGFzIFp5bmdhQWNjb3VudC5Vc2VyQWNjb3VudERldGFpbHM7XG5cdFx0XHRpZiAoWnluZ2EuZ2V0QXBpVVJMQmFzZSgnbWF0Y2gnKS5pbmRleE9mKCdsb2NhbGhvc3QnKSA+IDApIHtcblx0XHRcdFx0dmFyIGhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge307XG5cdFx0XHRcdGhlYWRlcnNbJ0FwcC1JZCddID0gYXBwSWQ7XG5cdFx0XHRcdGhlYWRlcnNbJ1BsYXllci1JZCddID0gYWNjb3VudERldGFpbHMucGxheWVySWQ7XG5cdFx0XHRcdGhlYWRlcnNbJ1ppZCddID0gYWNjb3VudERldGFpbHMuemlkO1xuXHRcdFx0fVxuXHRcdFx0b3B0aW9ucy51c2VUb2tlbiA9IGFjY291bnREZXRhaWxzLnRva2VuO1xuXHRcdFx0WnluZ2FOZXQuYXBpPFJlc3BvbnNlQm9keT4obWV0aG9kLCBaeW5nYS5nZXRBcGlVUkxCYXNlKCdtYXRjaCcpICsgcGF0aCArIHF1ZXJ5UGFyYW1zLCBvcHRpb25zKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG5cdFx0fSk7XG5cdH0pO1xufVxuXG4vKlxuZnVuY3Rpb24gYWRkQ3VycmVudFBsYXllcihwbGF5ZXJzLCBjdXJyZW50UGxheWVyKSB7XG5cdGN1cnJlbnRQbGF5ZXIgPSBjdXJyZW50UGxheWVyICYmIChjdXJyZW50UGxheWVyICsgJycpO1xuXG5cdGlmIChwbGF5ZXJzLmhhc093blByb3BlcnR5KGN1cnJlbnRQbGF5ZXIpID09PSBmYWxzZSkge1xuXHRcdHBsYXllcnNbY3VycmVudFBsYXllcl0gPSB7XG5cdFx0XHRwbGF5ZXJ0b2luc3RhbmNlX3N0YXRlOiAndW5rbm93bidcblx0XHR9O1xuXHR9XG5cdHJldHVybiBwbGF5ZXJzO1xufVxuKi9cblxuZXhwb3J0IHZhciBnZXRFbnRyeUluc3RhbmNlSWRBc3luYyA9IGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0XHR2YXIgdGltZW91dFRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuXHRcdFx0cmVqZWN0KG5ldyBFcnJvcignVGltZW91dCAoNTAwMG1zKSB3YWl0aW5nIGZvciBGQkluc3RhbnQgdG8gaW5pdGlhbGl6ZSBiZWZvcmUgY2FsbGluZyBGQkluc3RhbnQuY29udGV4dC5nZXRFbnRyeVBvaW50RGF0YSgpJykpO1xuXHRcdH0sIDUwMDApO1xuXHRcdFp5bmdhSW5zdGFudC5FdmVudC5sYXN0KFp5bmdhSW5zdGFudC5FdmVudHMuSU5TVEFOVF9GQl9UT1NfQUNDRVBULCBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgaW5zdGFuY2VJZCA9IGZhbHNlO1xuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0VGltZXIpO1xuXHRcdFx0Ly8gSnVzdCBmaXJlIHRoaXMgb2ZmLCBzaWRlIGVmZmVjdCB3aWxsIGJlIHRvIGdldCBpbnN0YW5jZSBkYXRhXG5cdFx0XHRaeW5nYUluc3RhbnQuZ2V0RW50cnlQb2ludERhdGEoKTtcblx0XHRcdGlmIChjb21tb25FbnRyeURhdGEgIT09IGZhbHNlICYmIHR5cGVvZiBjb21tb25FbnRyeURhdGEgPT09ICdvYmplY3QnICYmIGNvbW1vbkVudHJ5RGF0YS5pKSB7XG5cdFx0XHRcdGluc3RhbmNlSWQgPSBjb21tb25FbnRyeURhdGEuaTtcblx0XHRcdH1cblx0XHRcdHJlc29sdmUoaW5zdGFuY2VJZCk7XG5cdFx0fSk7XG5cdH0pO1xufTtcblxudmFyIHdyaXRlRmllbGRzID0gW1xuXHQnaW5zdGFuY2Vfc3RhdGUnLFxuXHQnaW5zdGFuY2Vfc3VtbWFyeV9kYXRhJyxcblx0J2luc3RhbmNlX2RhdGEnLFxuXHQncGxheWVycydcbl07XG4vKlxuXHQnaW5zdGFuY2Vfc3VtbWFyeV9kYXRhX2NhcycsXG5cdCdpbnN0YW5jZV9kYXRhX2NhcycsXG4qL1xuZXhwb3J0IGludGVyZmFjZSBQcmVwV3JpdGVEYXRhUmVzdWx0IHtcblx0Ym9keTogUGFydGlhbDxNYXRjaENvbnRyYWN0cy5DcmVhdGVCb2R5ICYgTWF0Y2hDb250cmFjdHMuVXBkYXRlQm9keT47XG5cdHF1ZXJ5T3B0aW9uczogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByZXBXcml0ZURhdGFPcHRpb25zIHtcblx0ZmJpZ19wbGF5ZXJfaWQ/OiBzdHJpbmc7XG5cdGNvbnRleHRfaWQ/OiBzdHJpbmcgfCBib29sZWFuO1xuXHR6eW5nYV9wbGF5ZXJfaWQ/OiBib29sZWFuO1xufVxuZnVuY3Rpb24gcHJlcFdyaXRlRGF0YShcblx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuXHRkYXRhOiBQYXJ0aWFsPE1hdGNoQ29udHJhY3RzLkNyZWF0ZUJvZHkgJiBNYXRjaENvbnRyYWN0cy5DcmVhdGVQYXJhbXMgJiBNYXRjaENvbnRyYWN0cy5VcGRhdGVQYXJhbXMgJiBNYXRjaENvbnRyYWN0cy5VcGRhdGVCb2R5Pixcblx0b3B0aW9uczogUHJlcFdyaXRlRGF0YU9wdGlvbnMsXG5cdGVuZm9yY2VDQVNcbikge1xuXHR2YXIgaTtcblx0dmFyIGtleTtcblx0dmFyIHZhbHVlO1xuXHR2YXIgcXVlcnlPcHRpb25zOiBQYXJ0aWFsPE1hdGNoQ29udHJhY3RzLkNyZWF0ZVBhcmFtcyAmIE1hdGNoQ29udHJhY3RzLlVwZGF0ZVBhcmFtcz4gPSB7fTtcblx0ZGF0YSA9IGRhdGEgfHwge307XG5cblx0cmV0dXJuIG5ldyBQcm9taXNlPFByZXBXcml0ZURhdGFSZXN1bHQ+KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0XHRaeW5nYUluc3RhbnQuRXZlbnQubGFzdChaeW5nYUluc3RhbnQuRXZlbnRzLklOU1RBTlRfRkJfVE9TX0FDQ0VQVCkudGhlbigoKSA9PiB7XG5cdFx0XHR2YXIgYm9keTogUGFydGlhbDxNYXRjaENvbnRyYWN0cy5DcmVhdGVCb2R5ICYgTWF0Y2hDb250cmFjdHMuVXBkYXRlQm9keT4gPSB7fTtcblx0XHRcdHZhciBjb250ZXh0SWQgPSBaeW5nYUluc3RhbnQuY29udGV4dC5nZXRJRCgpO1xuXG5cdFx0XHRpZiAoIWlzVW5kZWYoZGF0YS5wbGF5ZXJzKSAmJiAodHlwZW9mIGRhdGEucGxheWVycyAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShkYXRhLnBsYXllcnMpKSkge1xuXHRcdFx0XHRyZWplY3QoZ2VuTWF0Y2hFcnJvcihFUlJPUlMuTUFUQ0hfSU5QVVRfRVJST1IsICdcXCdwbGF5ZXJzXFwnIG11c3QgYmUgb2YgdHlwZSBcXCd1bmRlZmluZWRcXCcgb3IgXFwnb2JqZWN0XFwnJykpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIHN1bW1hcnkgQ0FTIHJlcXVpcmVtZW50c1xuXHRcdFx0aWYgKGVuZm9yY2VDQVMgJiZcblx0XHRcdFx0KCFpc1VuZGVmKGRhdGEuaW5zdGFuY2Vfc3VtbWFyeV9kYXRhKSB8fCAhaXNVbmRlZihkYXRhLmluc3RhbmNlX3N0YXRlKSkgJiZcblx0XHRcdFx0aXNVbmRlZihkYXRhLmluc3RhbmNlX3N1bW1hcnlfZGF0YV9jYXMpKSB7XG5cdFx0XHRcdHJlamVjdChnZW5NYXRjaEVycm9yKEVSUk9SUy5NQVRDSF9JTlBVVF9FUlJPUixcblx0XHRcdFx0XHQnaW5zdGFuY2Vfc3VtbWFyeV9kYXRhX2NhcyBpcyByZXF1aXJlZCB3aGVuIHVwZGF0aW5nIGluc3RhbmNlX3N1bW1hcnlfZGF0YSBvciBpbnN0YW5jZV9zdGF0dXMnKVxuXHRcdFx0XHQpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIGRhdGEgQ0FTIHJlcXVpcmVtZW50c1xuXHRcdFx0aWYgKGVuZm9yY2VDQVMgJiYgIWlzVW5kZWYoZGF0YS5pbnN0YW5jZV9kYXRhKSAmJiBpc1VuZGVmKGRhdGEuaW5zdGFuY2VfZGF0YV9jYXMpKSB7XG5cdFx0XHRcdHJlamVjdChnZW5NYXRjaEVycm9yKEVSUk9SUy5NQVRDSF9JTlBVVF9FUlJPUiwgJ2luc3RhbmNlX2RhdGFfY2FzIGlzIHJlcXVpcmVkIHdoZW4gdXBkYXRpbmcgaW5zdGFuY2VfZGF0YScpKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgd3JpdGVGaWVsZHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0a2V5ID0gd3JpdGVGaWVsZHNbaV07XG5cdFx0XHRcdHZhbHVlID0gZGF0YVtrZXldO1xuXHRcdFx0XHRpZiAoIWlzVW5kZWYodmFsdWUpKSB7XG5cdFx0XHRcdFx0Ym9keVtrZXldID0gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU2xhcCBjYXMgdmFsdWVzIG9uIHF1ZXJ5IHN0cmluZ1xuXHRcdFx0aWYgKCFpc1VuZGVmKGRhdGEuaW5zdGFuY2Vfc3VtbWFyeV9kYXRhX2NhcykpIHtcblx0XHRcdFx0cXVlcnlPcHRpb25zLmluc3RhbmNlX3N1bW1hcnlfZGF0YV9jYXMgPSBkYXRhLmluc3RhbmNlX3N1bW1hcnlfZGF0YV9jYXM7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWlzVW5kZWYoZGF0YS5pbnN0YW5jZV9kYXRhX2NhcykpIHtcblx0XHRcdFx0cXVlcnlPcHRpb25zLmluc3RhbmNlX2RhdGFfY2FzID0gZGF0YS5pbnN0YW5jZV9kYXRhX2Nhcztcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIGNvbW1vbiBxdWVyeSBmYmlnX3BsYXllcl9pZCBhbmQgY29udGV4dF9pZCB2YWx1ZXMgdG8gcXVlcnkgc3RyaW5nXG5cdFx0XHRxdWVyeU9wdGlvbnMuZmJpZ19wbGF5ZXJfaWQgPSBvcHRpb25zLmZiaWdfcGxheWVyX2lkIHx8IFp5bmdhSW5zdGFudC5wbGF5ZXIuZ2V0SUQoKTtcblx0XHRcdGlmICghaXNVbmRlZihvcHRpb25zLmNvbnRleHRfaWQpKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgKG9wdGlvbnMuY29udGV4dF9pZCkgIT09ICdib29sZWFuJykge1xuXHRcdFx0XHRcdHF1ZXJ5T3B0aW9ucy5jb250ZXh0X2lkID0gb3B0aW9ucy5jb250ZXh0X2lkO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChvcHRpb25zLmNvbnRleHRfaWQpIHtcblx0XHRcdFx0XHRcdHF1ZXJ5T3B0aW9ucy5jb250ZXh0X2lkID0gY29udGV4dElkO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRkZWxldGUgcXVlcnlPcHRpb25zLmNvbnRleHRfaWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChvcHRpb25zLnp5bmdhX3BsYXllcl9pZCkge1xuXHRcdFx0XHRxdWVyeU9wdGlvbnMuenluZ2FfcGxheWVyX2lkID0gcGxheWVySWQ7XG5cblx0XHRcdFx0aWYgKCFwbGF5ZXJJZCkge1xuXHRcdFx0XHRcdHJlamVjdChnZW5NYXRjaEVycm9yKEVSUk9SUy5NQVRDSF9JTlBVVF9FUlJPUiwgJ3p5bmdhX3BsYXllcl9pZCBhc2tlZCB0byBiZSBzZW50LCBidXQgaXMgbm90IGF2YWlsYWJsZSB5ZXQuJykpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJlc29sdmUoe1xuXHRcdFx0XHRib2R5OiBib2R5LFxuXHRcdFx0XHRxdWVyeU9wdGlvbnM6IHF1ZXJ5T3B0aW9uc1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH0pO1xufVxuXG5leHBvcnQgdmFyIGNyZWF0ZU1hdGNoQXN5bmMgPSBmdW5jdGlvbiAoXG5cdGRhdGE6IFBhcnRpYWw8TWF0Y2hDb250cmFjdHMuQ3JlYXRlUGFyYW1zICYgTWF0Y2hDb250cmFjdHMuQ3JlYXRlQm9keT4sXG5cdG9wdGlvbnM6IFByZXBXcml0ZURhdGFPcHRpb25zXG4pIHtcblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdHJldHVybiBuZXcgUHJvbWlzZTxaeW5nYU5ldC5BcGlSZXN1bHQ8TWF0Y2hDb250cmFjdHMuQ3JlYXRlUmVzcG9uc2U+PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0cHJlcFdyaXRlRGF0YShkYXRhLCBvcHRpb25zLCBmYWxzZSkudGhlbihmdW5jdGlvbiAocHJlcGFyZWREYXRhKSB7XG5cdFx0XHR2YXIgYm9keSA9IHByZXBhcmVkRGF0YS5ib2R5O1xuXHRcdFx0dmFyIHF1ZXJ5T3B0aW9ucyA9IHByZXBhcmVkRGF0YS5xdWVyeU9wdGlvbnM7XG5cblx0XHRcdGlmIChpc1VuZGVmKGJvZHkuaW5zdGFuY2Vfc3RhdGUpKSB7XG5cdFx0XHRcdGJvZHkuaW5zdGFuY2Vfc3RhdGUgPSAnc3RhcnRlZCc7IC8vIE5lZWRlZCBvciB3ZSBnZXQgYSBEQiBOVUxMIGVycm9yXG5cdFx0XHR9XG5cblx0XHRcdG1hdGNoQ2FsbDxNYXRjaENvbnRyYWN0cy5DcmVhdGVSZXNwb25zZT4oJ1BPU1QnLCAnL2luc3RhbmNlJywgcXVlcnlPcHRpb25zLCB7IGJvZHk6IGJvZHkgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuXHRcdFx0XHR2YXIgeGhyID0gcmVzdWx0cy54aHI7XG5cdFx0XHRcdHZhciBzdGF0dXNDb2RlID0geGhyLnN0YXR1cztcblx0XHRcdFx0aWYgKChzdGF0dXNDb2RlID49IDIwMCAmJiBzdGF0dXNDb2RlIDwgMzAwKSB8fCBzdGF0dXNDb2RlID09PSAzMDQpIHtcblx0XHRcdFx0XHRyZXNvbHZlKHJlc3VsdHMpOyAvLyBTdWNjZXNzZnVsXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVqZWN0KGdlbk1hdGNoRXJyb3IoRVJST1JTLk1BVENIX1NFUlZFUl9VTktOT1dOLCAnU2VydmVyIEVycm9yLicsIHJlc3VsdHMpKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgcmVqZWN0KTtcblx0XHRcdC8vIFRPRE86IHByb3BlciBIVFRQIHN0YXR1cyBjb2RlIHRvIHJlamVjdGlvbiBjb2Rlc1xuXHRcdH0sIHJlamVjdCk7XG5cdH0pO1xufTtcblxuZXhwb3J0IHZhciB1cGRhdGVNYXRjaERhdGFBc3luYyA9IGZ1bmN0aW9uIChcblx0aW5zdGFuY2VJZDogbnVtYmVyLFxuXHRkYXRhOiBQYXJ0aWFsPE1hdGNoQ29udHJhY3RzLlVwZGF0ZVBhcmFtcyAmIE1hdGNoQ29udHJhY3RzLlVwZGF0ZUJvZHk+LFxuXHRvcHRpb25zOiBQcmVwV3JpdGVEYXRhT3B0aW9uc1xuKTogUHJvbWlzZTxaeW5nYU5ldC5BcGlSZXN1bHQ8TWF0Y2hDb250cmFjdHMuVXBkYXRlUmVzcG9uc2U+PiB7XG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdHByZXBXcml0ZURhdGEoZGF0YSwgb3B0aW9ucywgdHJ1ZSkudGhlbihmdW5jdGlvbiAocHJlcGFyZWREYXRhKSB7XG5cdFx0XHR2YXIgYm9keSA9IHByZXBhcmVkRGF0YS5ib2R5O1xuXHRcdFx0dmFyIHF1ZXJ5T3B0aW9ucyA9IHByZXBhcmVkRGF0YS5xdWVyeU9wdGlvbnM7XG5cblx0XHRcdG1hdGNoQ2FsbDxNYXRjaENvbnRyYWN0cy5VcGRhdGVSZXNwb25zZT4oJ1BVVCcsICcvaW5zdGFuY2UvJyArIGluc3RhbmNlSWQsIHF1ZXJ5T3B0aW9ucywgeyBib2R5OiBib2R5IH0pXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG5cdFx0XHRcdFx0dmFyIHhociA9IHJlc3VsdHMueGhyO1xuXHRcdFx0XHRcdHZhciBzdGF0dXNDb2RlID0geGhyLnN0YXR1cztcblx0XHRcdFx0XHRpZiAoKHN0YXR1c0NvZGUgPj0gMjAwICYmIHN0YXR1c0NvZGUgPCAzMDApIHx8IHN0YXR1c0NvZGUgPT09IDMwNCkge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZShyZXN1bHRzKTsgLy8gU3VjY2Vzc2Z1bFxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoc3RhdHVzQ29kZSA9PT0gNDA0KSB7XG5cdFx0XHRcdFx0XHRyZWplY3QoZ2VuTWF0Y2hFcnJvcihcblx0XHRcdFx0XHRcdFx0RVJST1JTLk1BVENIX1NFUlZFUl9OT1RfRk9VTkQsXG5cdFx0XHRcdFx0XHRcdCdNYXRjaCB3aXRoIGluc3RhbmNlX2lkIFxcJycgKyBpbnN0YW5jZUlkICsgJ1xcJyBub3QgZm91bmQuJyxcblx0XHRcdFx0XHRcdFx0cmVzdWx0c1xuXHRcdFx0XHRcdFx0KSk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChzdGF0dXNDb2RlID09PSA0MDkpIHtcblx0XHRcdFx0XHRcdHJlamVjdChnZW5NYXRjaEVycm9yKEVSUk9SUy5NQVRDSF9TRVJWRVJfQ0FTLCAnQ0FTIE1pc21hdGNoLiAgRmV0Y2ggYWdhaW4gYW5kIHJlLWFwcGx5IGNoYW5nZXMnLCByZXN1bHRzKSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlamVjdChnZW5NYXRjaEVycm9yKEVSUk9SUy5NQVRDSF9TRVJWRVJfVU5LTk9XTiwgJ1NlcnZlciBFcnJvci4nLCByZXN1bHRzKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCByZWplY3QpO1xuXHRcdH0sIHJlamVjdCk7XG5cdH0pO1xufTtcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuZXhwb3J0IHZhciBnZXRNYXRjaERhdGFBc3luYyA9IGZ1bmN0aW9uIChpbnN0YW5jZUlkOiBudW1iZXIsIG9wdGlvbnMpOiBQcm9taXNlPFp5bmdhTmV0LkFwaVJlc3VsdDxNYXRjaENvbnRyYWN0cy5GZXRjaFJlc3BvbnNlPj4ge1xuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0aWYgKCFvcHRpb25zLmZpZWxkcykge1xuXHRcdG9wdGlvbnMuZmllbGRzID0gZGVmYXVsdEluc3RhbmNlRmllbGRzO1xuXHR9XG5cdGlmIChvcHRpb25zLmZpZWxkcyA9PT0gJ2FsbCcpIHtcblx0XHRkZWxldGUgb3B0aW9ucy5maWVsZHM7XG5cdH1cblx0cmV0dXJuIG5ldyBQcm9taXNlPFp5bmdhTmV0LkFwaVJlc3VsdDxNYXRjaENvbnRyYWN0cy5GZXRjaFJlc3BvbnNlPj4oZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdG1hdGNoQ2FsbDxNYXRjaENvbnRyYWN0cy5GZXRjaFJlc3BvbnNlPignR0VUJywgJy9pbnN0YW5jZS8nICsgaW5zdGFuY2VJZCArICcvJywgb3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuXHRcdFx0dmFyIHhociA9IHJlc3VsdHMueGhyO1xuXHRcdFx0dmFyIHN0YXR1c0NvZGUgPSB4aHIuc3RhdHVzO1xuXHRcdFx0aWYgKChzdGF0dXNDb2RlID49IDIwMCAmJiBzdGF0dXNDb2RlIDwgMzAwKSB8fCBzdGF0dXNDb2RlID09PSAzMDQpIHtcblx0XHRcdFx0cmVzb2x2ZShyZXN1bHRzKTsgLy8gU3VjY2Vzc2Z1bFxuXHRcdFx0fSBlbHNlIGlmIChzdGF0dXNDb2RlID09PSA0MDQpIHtcblx0XHRcdFx0cmVqZWN0KGdlbk1hdGNoRXJyb3IoXG5cdFx0XHRcdFx0RVJST1JTLk1BVENIX1NFUlZFUl9OT1RfRk9VTkQsXG5cdFx0XHRcdFx0J01hdGNoIHdpdGggaW5zdGFuY2VfaWQgXFwnJyArIGluc3RhbmNlSWQgKyAnXFwnIG5vdCBmb3VuZC4nLFxuXHRcdFx0XHRcdHJlc3VsdHMpXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2UgaWYgKHN0YXR1c0NvZGUgPT09IDQwOSkge1xuXHRcdFx0XHRyZWplY3QoZ2VuTWF0Y2hFcnJvcihFUlJPUlMuTUFUQ0hfU0VSVkVSX0NBUywgJ0NBUyBNaXNtYXRjaC4gIEZldGNoIGFnYWluIGFuZCByZS1hcHBseSBjaGFuZ2VzJywgcmVzdWx0cykpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVqZWN0KGdlbk1hdGNoRXJyb3IoRVJST1JTLk1BVENIX1NFUlZFUl9VTktOT1dOLCAnU2VydmVyIEVycm9yLicsIHJlc3VsdHMpKTtcblx0XHRcdH1cblx0XHR9LCByZWplY3QpO1xuXHR9KTtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2V0TWF0Y2hlc0FzeW5jT3B0aW9ucyB7XG5cdGZpZWxkcz86IE1hdGNoQ29udHJhY3RzLk1hdGNoTXVsdGlGZXRjaEZpZWxkc1R5cGVbXSB8ICdhbGwnO1xuXHRjb250ZXh0X2lkPzogc3RyaW5nO1xuXHR1c2VfenluZ2FfcGxheWVyX2lkPzogYm9vbGVhbjtcblx0dXNlX2NvbnRleHRfaWQ/OiBib29sZWFuO1xuXHRpbnN0YW5jZV9zdGF0ZV9pbj86IE1hdGNoQ29udHJhY3RzLkluc3RhbmNlU3RhdGVUeXBlW107XG59XG5leHBvcnQgdmFyIGdldE1hdGNoZXNBc3luYyA9IGZ1bmN0aW9uIChvcHRpb25zOiBHZXRNYXRjaGVzQXN5bmNPcHRpb25zKSB7XG5cdGxldCBxdWVyeU9wdGlvbnM6IFBhcnRpYWw8TWF0Y2hDb250cmFjdHMuTXVsdGlGZXRjaFBhcmFtcz4gPSB7fTtcblx0aWYgKGlzVW5kZWYob3B0aW9ucy5maWVsZHMpKSB7XG5cdFx0cXVlcnlPcHRpb25zLmZpZWxkcyA9IGRlZmF1bHRJbnN0YW5jZXNGaWVsZHM7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5maWVsZHMgIT09ICdhbGwnKSB7XG5cdFx0cXVlcnlPcHRpb25zLmZpZWxkcyA9IG9wdGlvbnMuZmllbGRzO1xuXHR9XG5cblx0aWYgKG9wdGlvbnMuY29udGV4dF9pZCkge1xuXHRcdGlmICh0eXBlb2YgKG9wdGlvbnMuY29udGV4dF9pZCkgPT09ICdib29sZWFuJykge1xuXHRcdFx0UHJvbWlzZS5yZWplY3QoZ2VuTWF0Y2hFcnJvcihcblx0XHRcdFx0RVJST1JTLk1BVENIX0lOUFVUX0VSUk9SLFxuXHRcdFx0XHQnb2Jzb2xldGUgdXNhZ2UuIHBsZWFzZSB1c2UgXCJ1c2VfY29udGV4dF9pZFwiLiBvciBzcGVjaWZ5IHRoZSBjb250ZXh0X2lkIHlvdSB3YW50IGFzIGEgc3RyaW5nLicpXG5cdFx0XHQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRxdWVyeU9wdGlvbnMuY29udGV4dF9pZCA9IG9wdGlvbnMuY29udGV4dF9pZDtcblx0XHR9XG5cdH1cblxuXHRpZiAob3B0aW9ucy51c2VfY29udGV4dF9pZCkge1xuXHRcdHZhciBjb250ZXh0SWQgPSBaeW5nYUluc3RhbnQuY29udGV4dC5nZXRJRCgpO1xuXHRcdGlmIChjb250ZXh0SWQpIHtcblx0XHRcdHF1ZXJ5T3B0aW9ucy5jb250ZXh0X2lkID0gY29udGV4dElkO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRQcm9taXNlLnJlamVjdChnZW5NYXRjaEVycm9yKFxuXHRcdFx0XHRFUlJPUlMuTUFUQ0hfSU5QVVRfRVJST1IsXG5cdFx0XHRcdCdjb250ZXh0X2lkIGFza2VkIHRvIGJlIHNlbmQsIGJ1dCBpdCBpcyBub3QgYXZhaWxhYmxlLiBBcmUgeW91IGluIFwiU09MT1wiIG1vZGU/ICcpXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXG5cdGlmIChvcHRpb25zLnVzZV96eW5nYV9wbGF5ZXJfaWQpIHtcblx0XHRxdWVyeU9wdGlvbnMuenluZ2FfcGxheWVyX2lkID0gcGxheWVySWQ7XG5cblx0XHRpZiAoIXBsYXllcklkKSB7XG5cdFx0XHRQcm9taXNlLnJlamVjdChnZW5NYXRjaEVycm9yKFxuXHRcdFx0XHRFUlJPUlMuTUFUQ0hfSU5QVVRfRVJST1IsXG5cdFx0XHRcdCd6eW5nYV9wbGF5ZXJfaWQgYXNrZWQgdG8gYmUgc2VudCwgYnV0IGlzIG5vdCBhdmFpbGFibGUgeWV0LicpXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXHRpZiAob3B0aW9ucy5pbnN0YW5jZV9zdGF0ZV9pbikge1xuXHRcdHF1ZXJ5T3B0aW9ucy5pbnN0YW5jZV9zdGF0ZV9pbiA9IG9wdGlvbnMuaW5zdGFuY2Vfc3RhdGVfaW47XG5cdH1cblxuXHRpZiAoIXF1ZXJ5T3B0aW9ucy56eW5nYV9wbGF5ZXJfaWQgJiYgIXF1ZXJ5T3B0aW9ucy5jb250ZXh0X2lkKSB7XG5cdFx0UHJvbWlzZS5yZWplY3QoZ2VuTWF0Y2hFcnJvcihcblx0XHRcdEVSUk9SUy5NQVRDSF9JTlBVVF9FUlJPUixcblx0XHRcdCd6eW5nYV9wbGF5ZXJfaWQgb3IgY29udGV4dF9pZCBtdXN0IGJlIHNldC4gRG8geW91IHdhbnQgdXMgdG8gZ2V0IHlvdSBhbGwgdGhlIG1hdGNoZXM/IEZvciBldmVyeW9uZT8nKVxuXHRcdCk7XG5cdH1cblxuXHRyZXR1cm4gbmV3IFByb21pc2U8WnluZ2FOZXQuQXBpUmVzdWx0PE1hdGNoQ29udHJhY3RzLk11bHRpRmV0Y2hSZXNwb25zZT4+KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0XHRtYXRjaENhbGw8TWF0Y2hDb250cmFjdHMuTXVsdGlGZXRjaFJlc3BvbnNlPignR0VUJywgJy9pbnN0YW5jZXMvJywgcXVlcnlPcHRpb25zKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG5cdFx0XHR2YXIgeGhyID0gcmVzdWx0cy54aHI7XG5cdFx0XHR2YXIgc3RhdHVzQ29kZSA9IHhoci5zdGF0dXM7XG5cdFx0XHRpZiAoKHN0YXR1c0NvZGUgPj0gMjAwICYmIHN0YXR1c0NvZGUgPCAzMDApIHx8IHN0YXR1c0NvZGUgPT09IDMwNCkge1xuXHRcdFx0XHRyZXNvbHZlKHJlc3VsdHMpOyAvLyBTdWNjZXNzZnVsXG5cdFx0XHR9IGVsc2UgaWYgKHN0YXR1c0NvZGUgPT09IDQwNCkge1xuXHRcdFx0XHRyZWplY3QoZ2VuTWF0Y2hFcnJvcihFUlJPUlMuTUFUQ0hfU0VSVkVSX05PVF9GT1VORCwgJ05vIG1hdGNoZXMgZm91bmQuJywgcmVzdWx0cykpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVqZWN0KGdlbk1hdGNoRXJyb3IoRVJST1JTLk1BVENIX1NFUlZFUl9VTktOT1dOLCAnU2VydmVyIEVycm9yLicsIHJlc3VsdHMpKTtcblx0XHRcdH1cblx0XHR9LCByZWplY3QpO1xuXHR9KTtcbn07XG5cbmV4cG9ydCB2YXIgc2VuZE1hdGNoQWN0aW9uID0gZnVuY3Rpb24gKGluc3RhbmNlSWQsIGNtZCwgb3B0aW9ucykge1xuXHRyZXR1cm4gbWF0Y2hDYWxsKCdQQVRDSCcsICcvaW5zdGFuY2UvJyArIGluc3RhbmNlSWQsIG9wdGlvbnMsIHsgYm9keTogY21kIH0pO1xufTtcblxuZXhwb3J0IHZhciBjdXN0b21NYXRjaENhbGwgPSBtYXRjaENhbGw7XG5cbmV4cG9ydCB2YXIgc3RhcnRUdXJuQXN5bmMgPSBmdW5jdGlvbiAoaW5zdGFuY2VJZDogbnVtYmVyKSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0aWYgKGN1cnJlbnRJbnN0YW5jZUlkICE9PSBmYWxzZSkge1xuXHRcdFx0cmVqZWN0KG5ldyBFcnJvcignQWxyZWFkeSBoYXZlIGEgc3RhcnRlZCBtYXRjaC4gIEVuZCBleGlzdGluZyBtYXRjaCBmaXJzdCcpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VycmVudEluc3RhbmNlSWQgPSBpbnN0YW5jZUlkO1xuXHRcdFx0cGxheWVkSW5zdGFuY2VEYXRhW2luc3RhbmNlSWRdID0ge1xuXHRcdFx0XHRpbnN0YW5jZUlkOiBpbnN0YW5jZUlkLFxuXHRcdFx0XHRzdGFydDogbmV3IERhdGUoKVxuXHRcdFx0fTtcblx0XHRcdC8vIFRPRE86IHp0cmFjayBzdGFydCBnYW1lIHNlc3Npb25cblx0XHRcdHJlc29sdmUoKTtcblx0XHR9XG5cdH0pO1xufTtcblxuZXhwb3J0IHZhciBlbmRUdXJuQXN5bmMgPSBmdW5jdGlvbiAoYm90RGF0YSkge1xuXHQvLyBUT0RPOiBNYXliZSBwYXNzIGluIGJhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEgZm9yIGRpZmZlcmVudCBpbWFnZXNcblx0Ly8gICAgICAgYW5kIGxldCB0aGlzIGZ1bmN0aW9uIHVwbG9hZCB0aGVtIHNvbWV3aGVyZSB0aGUgYm90IGNhbiBhY2Nlc3MuXG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0WnluZ2FJbnN0YW50LkV2ZW50Lmxhc3QoWnluZ2FJbnN0YW50LkV2ZW50cy5JTlNUQU5UX0ZCX1RPU19BQ0NFUFQpLnRoZW4oKCkgPT4ge1xuXHRcdFx0dmFyIGN1cnJlbnRNYXRjaERhdGE7XG5cdFx0XHRpZiAoY3VycmVudEluc3RhbmNlSWQgPT09IGZhbHNlKSB7XG5cdFx0XHRcdHJlamVjdChuZXcgRXJyb3IoJ05vIG1hdGNoIHN0YXJ0ZWQnKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjdXJyZW50TWF0Y2hEYXRhID0gcGxheWVkSW5zdGFuY2VEYXRhW2N1cnJlbnRJbnN0YW5jZUlkIGFzIG51bWJlcl07XG5cdFx0XHRcdGlmIChjdXJyZW50TWF0Y2hEYXRhKSB7XG5cdFx0XHRcdFx0Y3VycmVudE1hdGNoRGF0YS5lbmQgPSBuZXcgRGF0ZSgpO1xuXHRcdFx0XHRcdGN1cnJlbnRNYXRjaERhdGEuaW5zdGFuY2VJZCA9IGN1cnJlbnRJbnN0YW5jZUlkO1xuXHRcdFx0XHRcdGlmIChib3REYXRhKSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50TWF0Y2hEYXRhLmJvdERhdGEgPSBib3REYXRhO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRsYXN0SW5zdGFuY2VJZCA9IGN1cnJlbnRJbnN0YW5jZUlkOyAvLyBVc2VkIGJ5IHVwZGF0ZUFzeW5jIHRvIHNoYXJlIGRldGFpbHMgZm9yIGp1c3QgdGhpcyBpbnN0YW5jZVxuXHRcdFx0XHRcdGN1cnJlbnRJbnN0YW5jZUlkID0gZmFsc2U7XG5cdFx0XHRcdFx0WnluZ2FJbnN0YW50LnNldFNlc3Npb25EYXRhKHVuZGVmaW5lZCk7IC8vIFRyaWdnZXJzIG91ciBob29rIHRvIG1lcmdlIGdhbWUgc3VwcGxpZWQgZGF0YSBhbmQgb3VyIGJvdCBkYXRhXG5cdFx0XHRcdFx0Ly8gVE9ETzogTG9nIHNlc3Npb24gZW5kIHRvIHp0cmFja1xuXHRcdFx0XHRcdHJlc29sdmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2V0Um91bmRzRGF0YUFzeW5jT3B0aW9ucyB7XG5cdGZpZWxkcz86IE1hdGNoQ29udHJhY3RzLlJvdW5kc0ZldGNoRmllbGRzVHlwZVtdO1xuXHRpbnN0YW5jZV9zdGF0ZV9pbj86IE1hdGNoQ29udHJhY3RzLkluc3RhbmNlU3RhdGVUeXBlW107XG5cdGtub3duX2NvbnRleHRfaWRzPzogc3RyaW5nW107XG5cdHNlYXJjaF9jb250ZXh0X2hpc3Rvcnk/OiBib29sZWFuO1xuXHRsYXN0X3F1ZXJ5X3RpbWU/OiBEYXRlOyAvLyBzZW5kIHRoZSBsYXN0IHJlY2VpdmVkIHF1ZXJ5IHRpbWUgdG8gZG8gYW4gaW5jcmVtZW50YWwgZ2V0LlxufVxuXG5leHBvcnQgdHlwZSBSb3VuZHNNZW1iZXJSZWNvcmQgPSBQcm9maWxlQ29udHJhY3RzLlVzZXJQcm9maWxlICYgTWF0Y2hDb250cmFjdHMuSW5zdGFuY2VzVG9GcmllbmRzO1xuXG4vLyBzbGlnaHRseSBtb2RpZmllZCBmcm9tIE1hdGNoLkZldGNoUmVzcG9uc2VcbmV4cG9ydCBpbnRlcmZhY2UgUm91bmRzSW5zdGFuY2VSZWNvcmQge1xuXHRpbnN0YW5jZV9pZDogbnVtYmVyO1xuXHRpbnN0YW5jZV9zaWc6IHN0cmluZztcblx0Y29udGV4dF9pZHM/OiBzdHJpbmdbXTtcblx0Y29udGV4dF9pZD86IHN0cmluZzsgLy8gYXJiaXRyYXJpbHkgY2hvc2VuIGNvbnRleHRfaWQsIGZvciBnYW1lcyBpbiB3aGljaCB0aGVyZSBjYW4gb25seSBiZSBvbmUuXG5cdGluc3RhbmNlX3N0YXRlOiBNYXRjaENvbnRyYWN0cy5JbnN0YW5jZVN0YXRlVHlwZTtcblx0bWVtYmVyczoge1xuXHRcdFtrZXk6IG51bWJlcl06IFBhcnRpYWw8Um91bmRzTWVtYmVyUmVjb3JkPjtcblx0fTtcblx0aW5zdGFuY2Vfc3VtbWFyeV9kYXRhX2Nhcz86IG51bWJlcjtcblx0aW5zdGFuY2VfZGF0YV9jYXM/OiBudW1iZXI7XG5cdGluc3RhbmNlX2RhdGE/OiBhbnk7XG59XG5leHBvcnQgaW50ZXJmYWNlIFJvdW5kc0RhdGFBc3luY1Jlc3BvbnNlIHtcblx0aW5zdGFuY2VzOiB7XG5cdFx0W2tleTogbnVtYmVyXTogUGFydGlhbDxSb3VuZHNJbnN0YW5jZVJlY29yZD47XG5cdH07XG5cdGluc3RhbmNlc3RvcGxheWVyczogTWF0Y2hDb250cmFjdHMuSW5zdGFuY2VzVG9GcmllbmRzW107XG5cdG1lbWJlcnM6IHtcblx0XHRba2V5OiBudW1iZXJdOiBQcm9maWxlQ29udHJhY3RzLlVzZXJQcm9maWxlO1xuXHR9O1xuXHRjb250ZXh0czogTWF0Y2hDb250cmFjdHMuTXVsdGlDb250ZXh0RmV0Y2hSZXNwb25zZTtcblx0cXVlcnlfdGltZTogRGF0ZTtcblx0Y29udGV4dF9vbmx5X21lbWJlcnM/OiB7XG5cdFx0W2tleTogbnVtYmVyXTogbnVtYmVyW107XG5cdH07XG5cdGZpbHRlcmVkX2luc3RhbmNlc19pZHM/OiBudW1iZXJbXTtcbn1cblxuZnVuY3Rpb24gaW5kZXhSb3VuZHNGZXRjaChyZXNwb25zZTogTWF0Y2hDb250cmFjdHMuUm91bmRzRmV0Y2hSZXNwb25zZSk6IFJvdW5kc0RhdGFBc3luY1Jlc3BvbnNlIHtcblxuXHQvLyBpbmRleCBtZW1iZXJzIGRpcmVjdGx5IGludG8gdGhlIGluc3RhbmNlIGRhdGEgZm9yIGVhc3kgYWNjZXNzLlxuXHRsZXQgbGlua2VkSW5zdGFuY2VzOiB7XG5cdFx0W2tleTogbnVtYmVyXTogUGFydGlhbDxSb3VuZHNJbnN0YW5jZVJlY29yZD47XG5cdH0gPSB7fTtcblx0Zm9yICh2YXIgaW5zdGFuY2VUb1BsYXllciBvZiByZXNwb25zZS5pbnN0YW5jZXN0b3BsYXllcnMpIHtcblx0XHQvLyBkZW5vcm1hbGl6ZSB0aGUgZnJpZW5kIGRhdGEgYW5kIHRoZSBpbnN0YW5jZS10by1mcmllbmQgZGF0YSBhcyBhIHN1YnJlY29yZCBvZiB0aGUgaW5zdGFuY2UuXG5cdFx0bGV0IGxpbmtlZEZyaWVuZCA9IHJlc3BvbnNlLm1lbWJlcnNbaW5zdGFuY2VUb1BsYXllci56eW5nYV9wbGF5ZXJfaWRdO1xuXHRcdGxldCB6eW5nYVBsYXllcklkID0gaW5zdGFuY2VUb1BsYXllci56eW5nYV9wbGF5ZXJfaWQ7XG5cdFx0bGV0IGxpbmtlZEluc3RhbmNlOiBQYXJ0aWFsPFJvdW5kc0luc3RhbmNlUmVjb3JkPiA9IHJlc3BvbnNlLmluc3RhbmNlc1tpbnN0YW5jZVRvUGxheWVyLmluc3RhbmNlX2lkXTtcblx0XHRpZiAobGlua2VkSW5zdGFuY2UpIHtcblx0XHRcdGxpbmtlZEluc3RhbmNlLm1lbWJlcnMgPSBsaW5rZWRJbnN0YW5jZS5tZW1iZXJzIHx8IHt9O1xuXHRcdFx0bGV0IGZyaWVuZFJlY29yZCA9IGxpbmtlZEluc3RhbmNlLm1lbWJlcnNbenluZ2FQbGF5ZXJJZF07XG5cdFx0XHRsaW5rZWRJbnN0YW5jZS5tZW1iZXJzW3p5bmdhUGxheWVySWRdID0gT2JqZWN0QXNzaWduKHt9LCBmcmllbmRSZWNvcmQsIGluc3RhbmNlVG9QbGF5ZXIsIGxpbmtlZEZyaWVuZCk7XG5cdFx0XHRsaW5rZWRJbnN0YW5jZXNbbGlua2VkSW5zdGFuY2UuaW5zdGFuY2VfaWRdID0gbGlua2VkSW5zdGFuY2U7XG5cdFx0fVxuXHR9XG5cblx0Ly8gdG9kbzogaW5kZXggY29udGV4dHM/XG5cdGZvciAobGV0IGNvbnRleHRJZCBpbiByZXNwb25zZS5jb250ZXh0cykge1xuXHRcdGZvciAobGV0IGluc3RhbmNlSWQgb2YgcmVzcG9uc2UuY29udGV4dHNbY29udGV4dElkXSkge1xuXHRcdFx0bGV0IGxpbmtlZEluc3RhbmNlID0gbGlua2VkSW5zdGFuY2VzW2luc3RhbmNlSWRdO1xuXHRcdFx0bGV0IGNvbnRleHRJZHMgPSBsaW5rZWRJbnN0YW5jZS5jb250ZXh0X2lkcyA9IGxpbmtlZEluc3RhbmNlLmNvbnRleHRfaWRzIHx8IFtdO1xuXHRcdFx0Y29udGV4dElkcy5wdXNoKGNvbnRleHRJZCk7XG5cdFx0XHRsaW5rZWRJbnN0YW5jZS5jb250ZXh0X2lkID0gY29udGV4dElkO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7XG5cdFx0Li4ucmVzcG9uc2UsXG5cdFx0aW5zdGFuY2VzOiBsaW5rZWRJbnN0YW5jZXMsXG5cdH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSb3VuZHNEYXRhQXN5bmMob3B0aW9uczogR2V0Um91bmRzRGF0YUFzeW5jT3B0aW9ucykge1xuXHRyZXR1cm4gWnluZ2FJbnN0YW50LkV2ZW50Lmxhc3QoWnluZ2FJbnN0YW50LkV2ZW50cy5JTlNUQU5UX0ZCX1RPU19BQ0NFUFQpLnRoZW4oKCkgPT4ge1xuXHRcdGxldCBxdWVyeU9wdGlvbnM6IFBhcnRpYWw8TWF0Y2hDb250cmFjdHMuUm91bmRzRmV0Y2hQYXJhbXM+ID0ge307XG5cdFx0cXVlcnlPcHRpb25zLmZpZWxkcyA9IG9wdGlvbnMuZmllbGRzIHx8IGRlZmF1bHRSb3VuZEZldGNoRmllbGRzO1xuXHRcdGxldCBjb250ZXh0SWQgPSBaeW5nYUluc3RhbnQuY29udGV4dC5nZXRJRCgpO1xuXHRcdGlmIChjb250ZXh0SWQpIHtcblx0XHRcdHF1ZXJ5T3B0aW9ucy5jb250ZXh0X2lkID0gY29udGV4dElkO1xuXHRcdH1cblx0XHRxdWVyeU9wdGlvbnMuenluZ2FfcGxheWVyX2lkID0gcGxheWVySWQ7XG5cdFx0aWYgKG9wdGlvbnMuaW5zdGFuY2Vfc3RhdGVfaW4pIHtcblx0XHRcdHF1ZXJ5T3B0aW9ucy5pbnN0YW5jZV9zdGF0ZV9pbiA9IG9wdGlvbnMuaW5zdGFuY2Vfc3RhdGVfaW47XG5cdFx0fVxuXHRcdGlmIChvcHRpb25zLmxhc3RfcXVlcnlfdGltZSkge1xuXHRcdFx0cXVlcnlPcHRpb25zLmNoYW5nZWRfc2luY2UgPSBvcHRpb25zLmxhc3RfcXVlcnlfdGltZTtcblx0XHR9XG5cdFx0aWYgKCFpc1VuZGVmKG9wdGlvbnMuc2VhcmNoX2NvbnRleHRfaGlzdG9yeSkpIHtcblx0XHRcdHF1ZXJ5T3B0aW9ucy5zZWFyY2hfY29udGV4dF9oaXN0b3J5ID0gb3B0aW9ucy5zZWFyY2hfY29udGV4dF9oaXN0b3J5OyAvLyBjaGVjayBkZWZhdWx0LlxuXHRcdH1cblxuXHRcdHJldHVybiBtYXRjaENhbGw8TWF0Y2hDb250cmFjdHMuUm91bmRzRmV0Y2hSZXNwb25zZT4oJ0dFVCcsICcvcm91bmRzJywgcXVlcnlPcHRpb25zKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG5cdFx0XHR2YXIgeGhyID0gcmVzdWx0cy54aHI7XG5cdFx0XHR2YXIgc3RhdHVzQ29kZSA9IHhoci5zdGF0dXM7XG5cdFx0XHRpZiAoKHN0YXR1c0NvZGUgPj0gMjAwICYmIHN0YXR1c0NvZGUgPCAzMDApIHx8IHN0YXR1c0NvZGUgPT09IDMwNCkge1xuXHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGluZGV4Um91bmRzRmV0Y2gocmVzdWx0cy5ib2R5KSk7IC8vIFN1Y2Nlc3NmdWxcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChnZW5NYXRjaEVycm9yKEVSUk9SUy5NQVRDSF9TRVJWRVJfVU5LTk9XTiwgJ1NlcnZlciBFcnJvci4nLCByZXN1bHRzKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1xufVxuXG5leHBvcnQgdmFyIGdldEN1cnJlbnRNYXRjaElkID0gZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gY3VycmVudEluc3RhbmNlSWQ7XG59O1xuXG5leHBvcnQgdmFyIGdldFByZXZpb3VzTWF0Y2hJZCA9IGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIGxhc3RJbnN0YW5jZUlkO1xufTtcblxuZXhwb3J0IGNvbnN0IEVSUk9SUyA9IHtcblx0TUFUQ0hfSU5QVVRfRVJST1I6ICdNQVRDSF9JTlBVVF9FUlJPUicsICAgICAgLy8gSW5wdXQgZXJyb3IgZW5jb3VudGVyZWRcblx0TUFUQ0hfU0VSVkVSX05PVF9GT1VORDogJ01BVENIX05PVF9GT1VORCcsICAgLy8gU2VydmVyIHJlc291cmNlIGRvZXMgbm90IGV4aXN0ICAgICAtIEEgNDA0IGVycm9yXG5cdE1BVENIX1NFUlZFUl9DQVM6ICdNQVRDSF9TRVJWRVJfQ0FTJywgICAgICAgIC8vIFNlcnZlciBlbmNvdW50ZXJlZCBhIENBUyBlcnJvciAgICAgLSBBIDQwOSBlcnJvclxuXHRNQVRDSF9TRVJWRVJfVU5LTk9XTjogJ01BVENIX1NFUlZFUl9VTktOT1dOJywgLy8gU2VydmVyIGVuY291bnRlcmVkIGEgZ2VuZXJhbCBlcnJvciAtIFVzdWFsbHkgYSA1MDAgZXJyb3Jcblx0TUFUQ0hfVU5LTk9XTjogJ01BVENIX1VOS05PV04nICAgICAgICAgICAgICAgLy8gRW5jb3VudGVyZWQgYSBnZW5lcmFsIGVycm9yXG5cdC8vIFRPRE86ICBBZGQgbW9yZSBrbm93biBlcnJvcnM/XG59O1xuXG5leHBvcnQgY29uc3QgTUFUQ0hfU1RBVEUgPSB7XG5cdFNUQVJURUQ6ICdzdGFydGVkJyBhcyBNYXRjaENvbnRyYWN0cy5JbnN0YW5jZVN0YXRlVHlwZSxcblx0SU5fUFJPR1JFU1M6ICdpbl9wcm9ncmVzcycgYXMgTWF0Y2hDb250cmFjdHMuSW5zdGFuY2VTdGF0ZVR5cGUsXG5cdENPTVBMRVRFRDogJ2NvbXBsZXRlZCcgYXMgTWF0Y2hDb250cmFjdHMuSW5zdGFuY2VTdGF0ZVR5cGUsXG5cdEVYUElSRUQ6ICdleHBpcmVkJyBhcyBNYXRjaENvbnRyYWN0cy5JbnN0YW5jZVN0YXRlVHlwZSxcblx0Q0FOX0pPSU46ICdjYW5fam9pbicgYXMgTWF0Y2hDb250cmFjdHMuSW5zdGFuY2VTdGF0ZVR5cGVcbn07XG5cbmV4cG9ydCBjb25zdCBQTEFZRVJfU1RBVEUgPSB7XG5cdENBTl9QTEFZOiAnY2FuX3BsYXknIGFzIE1hdGNoQ29udHJhY3RzLlBsYXllclRvSW5zdGFuY2VTdGF0ZVR5cGUsXG5cdFdBSVRJTkc6ICd3YWl0aW5nJyBhcyBNYXRjaENvbnRyYWN0cy5QbGF5ZXJUb0luc3RhbmNlU3RhdGVUeXBlLFxuXHRVTktOT1dOOiAndW5rbm93bicgYXMgTWF0Y2hDb250cmFjdHMuUGxheWVyVG9JbnN0YW5jZVN0YXRlVHlwZVxufTtcbiIsIi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21tZW50LWZvcm1hdFxuLy8vPGFtZC1tb2R1bGUgbmFtZT1cIlp5bmdhTWVkaWFcIi8+XG4vKiBnbG9iYWwgVWludDhBcnJheSAqL1xuJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IFp5bmdhID0gcmVxdWlyZSgnLi9aeW5nYScpO1xuaW1wb3J0IFp5bmdhQWNjb3VudCA9IHJlcXVpcmUoJy4vWnluZ2FBY2NvdW50Jyk7XG5pbXBvcnQgWnluZ2FDb3JlID0gcmVxdWlyZSgnLi9aeW5nYUNvcmUnKTtcbmltcG9ydCBaeW5nYU1kNSA9IHJlcXVpcmUoJy4vWnluZ2FNZDUnKTtcbmltcG9ydCBaeW5nYU5ldCA9IHJlcXVpcmUoJy4vWnluZ2FOZXQnKTtcblxuLy8gZm9yIHNpbXBsaWNpdHkgYW5kIGNvZGUgbWluaWZpY2F0aW9uXG5mdW5jdGlvbiBpc1VuZGVmKHgpIHtcblx0cmV0dXJuIHR5cGVvZiB4ID09PSAndW5kZWZpbmVkJztcbn1cblxuZnVuY3Rpb24gbWVkaWFDYWxsKG1ldGhvZCwgcGF0aCwgcGFyYW1zLCBvcHRpb25zKSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0dmFyIHF1ZXJ5UGFyYW1zID0gW107XG5cdFx0dmFyIHF1ZXJ5UGFyYW1zU3RyaW5nID0gJyc7XG5cdFx0dmFyIHBhcmFtTmFtZTtcblx0XHR2YXIgcGFyYW1WYWx1ZTtcblxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdHBhcmFtcyA9IHBhcmFtcyB8fCB7fTtcblxuXHRcdGZvciAocGFyYW1OYW1lIGluIHBhcmFtcykge1xuXHRcdFx0cGFyYW1WYWx1ZSA9IHBhcmFtc1twYXJhbU5hbWVdO1xuXHRcdFx0Ly8gZW5jb2RlIGFuZCBvcHRpb25hbGx5IHR1cm4gYXJyYXlzIGludG8gY29tbWEgc2VwYXJhdGVkIGxpc3Rcblx0XHRcdHBhcmFtVmFsdWUgPSBBcnJheS5pc0FycmF5KHBhcmFtVmFsdWUpID8gcGFyYW1WYWx1ZS5tYXAoZW5jb2RlVVJJKS5qb2luKCcsJykgOiBlbmNvZGVVUkkocGFyYW1WYWx1ZSk7XG5cdFx0XHRxdWVyeVBhcmFtcy5wdXNoKHBhcmFtTmFtZSArICc9JyArIHBhcmFtVmFsdWUpO1xuXHRcdH1cblxuXHRcdHF1ZXJ5UGFyYW1zU3RyaW5nID0gcXVlcnlQYXJhbXMubGVuZ3RoID4gMCA/ICgnPycgKyBxdWVyeVBhcmFtcy5qb2luKCcmJykpIDogJyc7XG5cblx0XHRQcm9taXNlLmFsbChbXG5cdFx0XHRaeW5nYS5FdmVudC5sYXN0KFp5bmdhLkV2ZW50cy5BUFBfSUQpLFxuXHRcdFx0WnluZ2FBY2NvdW50LkV2ZW50Lmxhc3QoWnluZ2FBY2NvdW50LkV2ZW50cy5BQ0NPVU5UX0RFVEFJTFMpXG5cdFx0XSkudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuXHRcdFx0dmFyIGFwcElkID0gcmVzdWx0c1swXTtcblx0XHRcdHZhciBhY2NvdW50RGV0YWlscyA9IHJlc3VsdHNbMV0gYXMgWnluZ2FBY2NvdW50LlVzZXJBY2NvdW50RGV0YWlscztcblx0XHRcdGlmIChaeW5nYS5nZXRBcGlVUkxCYXNlKCdtZWRpYScpLmluZGV4T2YoJ2xvY2FsaG9zdCcpID4gMCkge1xuXHRcdFx0XHR2YXIgaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyB8fCB7fTtcblx0XHRcdFx0aGVhZGVyc1snQXBwLUlkJ10gPSBhcHBJZDtcblx0XHRcdFx0aGVhZGVyc1snUGxheWVyLUlkJ10gPSBhY2NvdW50RGV0YWlscy5wbGF5ZXJJZDtcblx0XHRcdFx0aGVhZGVyc1snWmlkJ10gPSBhY2NvdW50RGV0YWlscy56aWQ7XG5cdFx0XHR9XG5cdFx0XHRvcHRpb25zLnVzZVRva2VuID0gYWNjb3VudERldGFpbHMudG9rZW47XG5cdFx0XHRaeW5nYU5ldC5hcGkobWV0aG9kLCBaeW5nYS5nZXRBcGlVUkxCYXNlKCdtZWRpYScpICsgcGF0aCArIHF1ZXJ5UGFyYW1zU3RyaW5nLCBvcHRpb25zKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG5cdFx0fSk7XG5cdH0pO1xufVxuXG4vLyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHByb2JhYmx5IENETiB1cmwgYW5kIHNvbWUgYWRkaXRpb25hbCBkYXRhXG4vLyBSZXNvbHZlIG9iamVjdCBsb29rcyBsaWtlXG4vLyB7XG4vLyAgIG1kNTogXCI2ZDEzYWE1ZTNiYWQyZmI5MTg2YzFiMmI4M2E4MWE0NlwiLFxuLy8gICBjb250ZW50VHlwZTogXCJpbWFnZS9wbmdcIixcbi8vICAgY2RuVXJsOiBcIi8vZ2FtZXNlcnZpY2VzLmNkbi56eW5nYS5jb20vbWVkaWEvNTAwNDIwNi82ZDEzYWE1ZTNiYWQyZmI5MTg2YzFiMmI4M2E4MWE0NlwiXG4vLyB9XG5leHBvcnQgaW50ZXJmYWNlIFF1ZXVlTWVkaWFVcGxvYWRSZXN1bHQge1xuXHRtZDU6IHN0cmluZztcblx0Y29udGVudFR5cGU6IHN0cmluZztcblx0Y2RuVXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBxdWV1ZU1lZGlhVXBsb2FkKGltYWdlRGF0YVVSSSwgaW5zdGFuY2VJZCkge1xuXHRyZXR1cm4gbmV3IFByb21pc2U8UXVldWVNZWRpYVVwbG9hZFJlc3VsdD4oZnVuY3Rpb24gKHJlc29sdmUpIHtcblx0XHRaeW5nYS5FdmVudC5sYXN0KFp5bmdhLkV2ZW50cy5BUFBfSUQsIGZ1bmN0aW9uIChnYW1lSWQpIHtcblx0XHRcdHZhciBwYXJ0cztcblx0XHRcdHZhciBpbWdEYXRhO1xuXHRcdFx0dmFyIGJpbmFyeURhdGE7XG5cdFx0XHR2YXIgY29udGVudFR5cGU7XG5cdFx0XHR2YXIgbWQ1Q2hlY2tzdW07XG5cdFx0XHR2YXIgdXBsb2FkU3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdFx0XHR2YXIgcXVlcnlQYXJhbXM6IGFueSA9IHt9O1xuXG5cdFx0XHRpZiAoaW5zdGFuY2VJZCkge1xuXHRcdFx0XHRxdWVyeVBhcmFtcy5pbnN0YW5jZV9pZCA9IGluc3RhbmNlSWQ7XG5cdFx0XHR9XG5cblx0XHRcdHBhcnRzID0gaW1hZ2VEYXRhVVJJLnNwbGl0KCcsJyk7XG5cdFx0XHRpbWdEYXRhID0gYXRvYihwYXJ0c1sxXSk7XG5cdFx0XHRjb250ZW50VHlwZSA9IHBhcnRzWzBdLnNwbGl0KCc6JylbMV0uc3BsaXQoJzsnKVswXTtcblx0XHRcdC8vIENvbnZlcnQgdG8gYmluYXJ5IGRhdGFcblx0XHRcdGJpbmFyeURhdGEgPSBuZXcgVWludDhBcnJheShpbWdEYXRhLmxlbmd0aCk7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGltZ0RhdGEubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0YmluYXJ5RGF0YVtpXSA9IGltZ0RhdGEuY2hhckNvZGVBdChpKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTk9URTogaWYgeW91IGFyZSBnb2luZyB0byBvdmVycmlkZSB0aGlzIHdpdGggeW91ciBvd24gbWQ1LFxuXHRcdFx0Ly8gdGhlIHp5bmdhIHZlcnNpb24gd2lsbCBoYW5kbGluZyBjb252ZXJ0aW5nIG9mIFVpbnQ4QXJyYXkuXG5cdFx0XHRtZDVDaGVja3N1bSA9IFp5bmdhTWQ1KGJpbmFyeURhdGEpO1xuXHRcdFx0bWVkaWFDYWxsKFxuXHRcdFx0XHQnUE9TVCcsICcvJyArIG1kNUNoZWNrc3VtLFxuXHRcdFx0XHRxdWVyeVBhcmFtcyxcblx0XHRcdFx0eyBib2R5OiBiaW5hcnlEYXRhLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiBjb250ZW50VHlwZSB9IH1cblx0XHRcdCkudGhlbihmdW5jdGlvbiAocmVzdWx0OiBhbnkpIHtcblx0XHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdFx0dXJsOiByZXN1bHQgJiYgcmVzdWx0LmJvZHkgJiYgcmVzdWx0LmJvZHkudXJsLFxuXHRcdFx0XHRcdG1kNTogbWQ1Q2hlY2tzdW0sXG5cdFx0XHRcdFx0Y29udGVudFR5cGU6IGNvbnRlbnRUeXBlLFxuXHRcdFx0XHRcdGNvbnRlbnRMZW5ndGg6IGJpbmFyeURhdGEubGVuZ3RoLFxuXHRcdFx0XHRcdHVwbG9hZE1TOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHVwbG9hZFN0YXJ0VGltZVxuXHRcdFx0XHR9O1xuXHRcdFx0XHQvLyBGaXJlIGdlbmVyYWwgdXBsb2FkIGV2ZW50XG5cdFx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLlVQTE9BRF9DT01QTEVURSwgZGF0YSk7XG5cdFx0XHRcdC8vIEZpcmUgc3BlY2lmaWMgdXBsb2FkIGV2ZW50IGZvciBUSElTIGFzc2V0XG5cdFx0XHRcdEV2ZW50LmZpcmUobWQ1Q2hlY2tzdW0sIGRhdGEpO1xuXHRcdFx0fSxcblx0XHRcdFx0ZnVuY3Rpb24gKGVycm9yKSB7XG5cdFx0XHRcdFx0RXZlbnQuZmlyZShFdmVudHMuVVBMT0FEX0VSUk9SLCBlcnJvcik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHQvLyBSZXNvbHZlIEFTQVAgdG8gZ2l2ZSB0aGUgY2FsbGVyIHRoZSBNRDUgY2hlY2tzdW0gYW5kIHByb2JhYmx5IGNkblVSTFxuXHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdG1kNTogbWQ1Q2hlY2tzdW0sXG5cdFx0XHRcdGNvbnRlbnRUeXBlOiBjb250ZW50VHlwZSxcblx0XHRcdFx0Y2RuVXJsOiAnLy9nYW1lc2VydmljZXMuY2RuLnp5bmdhLmNvbS9tZWRpYS8nICsgZ2FtZUlkICsgJy8nICsgbWQ1Q2hlY2tzdW1cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH0pO1xufVxuXG5leHBvcnQgdmFyIEV2ZW50ID0gbmV3IFp5bmdhQ29yZS5FdmVudE1peGluKCk7XG5leHBvcnQgdmFyIEV2ZW50cyA9IHtcblx0VVBMT0FEX0NPTVBMRVRFOiAnTWVkaWEuVXBsb2FkQ29tcGxldGUnLFxuXHRVUExPQURfRVJST1I6ICdNZWRpYS5VcGxvYWRFcnJvcidcbn07XG4iLCIvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tbWVudC1mb3JtYXRcbi8vLzxhbWQtbW9kdWxlIG5hbWU9XCJaeW5nYU5ldFwiLz5cbi8qIGdsb2JhbCBBcnJheUJ1ZmZlciAqL1xuaW1wb3J0IFp5bmdhQ29yZSA9IHJlcXVpcmUoJy4vWnluZ2FDb3JlJyk7XG5cbnZhciB0b2tlbnMgPSB7fTtcbnZhciBkZWZhdWx0U29jaWFsTmV0d29ya0lkO1xudmFyIHJlZnJlc2hUb2tlbkhhbmRsZXIgPSBmdW5jdGlvbiAodG9rZW4sIGNhbGxiYWNrKSB7XG5cdGNhbGxiYWNrKGZhbHNlKTtcbn07XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlcnMoaGVhZGVyc09iamVjdCkge1xuXHR2YXIgaGVhZGVyTmFtZTtcblx0dmFyIG5ld05hbWU7XG5cdHZhciBuZXdIZWFkZXJzID0ge307XG5cdGZvciAoaGVhZGVyTmFtZSBpbiBoZWFkZXJzT2JqZWN0KSB7XG5cdFx0aWYgKGhlYWRlcnNPYmplY3QuaGFzT3duUHJvcGVydHkoaGVhZGVyTmFtZSkpIHtcblx0XHRcdG5ld05hbWUgPSBoZWFkZXJOYW1lXG5cdFx0XHRcdC5zcGxpdCgnLScpXG5cdFx0XHRcdC5tYXAoZnVuY3Rpb24gKHBhcnQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcGFydCAmJiBwYXJ0Lmxlbmd0aCA/IHBhcnRbMF0udG9VcHBlckNhc2UoKSArIHBhcnQuc2xpY2UoMSkgOiBwYXJ0O1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuam9pbignLScpO1xuXHRcdFx0bmV3SGVhZGVyc1tuZXdOYW1lXSA9IGhlYWRlcnNPYmplY3RbaGVhZGVyTmFtZV07XG5cdFx0fVxuXHR9XG5cdHJldHVybiBuZXdIZWFkZXJzO1xufVxuXG5leHBvcnQgdmFyIHNldERlZmF1bHRUb2tlbiA9IGZ1bmN0aW9uIChzb2NpYWxOZXR3b3JrSWQpIHtcblx0ZGVmYXVsdFNvY2lhbE5ldHdvcmtJZCA9IHNvY2lhbE5ldHdvcmtJZDtcbn07XG5cbmV4cG9ydCB2YXIgcmVnaXN0ZXJSZWZyZXNoVG9rZW5IYW5kbGVyID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcblx0aWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0cmVmcmVzaFRva2VuSGFuZGxlciA9IGhhbmRsZXI7XG5cdH1cbn07XG5cbmV4cG9ydCB2YXIgYXBpQmFzZVVSTCA9ICdodHRwczovL2FwaS56eW5nYS5jb20nO1xuXG5leHBvcnQgdmFyIHNldFNvY2lhbE5ldHdvcmtUb2tlbiA9IGZ1bmN0aW9uIChzb2NpYWxOZXR3b3JrSWQsIHRva2VuLCBtYWtlRGVmYXVsdCkge1xuXHR0b2tlbnNbc29jaWFsTmV0d29ya0lkXSA9IHRva2VuO1xuXHRpZiAobWFrZURlZmF1bHQgfHwgZGVmYXVsdFNvY2lhbE5ldHdvcmtJZCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0ZGVmYXVsdFNvY2lhbE5ldHdvcmtJZCA9IHNvY2lhbE5ldHdvcmtJZDtcblx0fVxufTtcblxuZXhwb3J0IGludGVyZmFjZSBBcGlSZXN1bHQ8Qj4ge1xuXHRib2R5OiBCO1xuXHR4aHI6IFhNTEh0dHBSZXF1ZXN0O1xufVxuZXhwb3J0IGludGVyZmFjZSBBcGlPcHRpb25zIHtcblx0dXNlVG9rZW4/OiBib29sZWFuIHwgc3RyaW5nO1xuXHRiZWZvcmVTZW5kPzogKFhNTEh0dHBSZXF1ZXN0KSA9PiB2b2lkO1xuXHRib2R5PzogYW55O1xuXHRoZWFkZXJzPzogYW55O1xuXHRub0F1dGg/OiBib29sZWFuO1xuXHRub0FQST86IGJvb2xlYW47XG5cdGF0dGVtcHRzPzogbnVtYmVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFwaTxCPihtZXRob2QsIHVybCwgb3B0aW9ucz86IEFwaU9wdGlvbnMpIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlPEFwaVJlc3VsdDxCPj4oZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdHZhciBhcGlVUkwgPSBhcGlCYXNlVVJMLnRvTG93ZXJDYXNlKCk7XG5cdFx0dmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcdHZhciBhdXRoVG9rZW4gPSB0b2tlbnNbZGVmYXVsdFNvY2lhbE5ldHdvcmtJZF0gfHwgZmFsc2U7XG5cdFx0dmFyIGhlYWRlck5hbWU7XG5cdFx0dmFyIGhlYWRlcnM7XG5cdFx0dmFyIGJvZHk7XG5cdFx0dmFyIHhoclByZVNlbmRDYWxsYmFjayA9IG51bGw7XG5cblx0XHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnID8gb3B0aW9ucyA6IHt9O1xuXG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zLmJlZm9yZVNlbmQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdHhoclByZVNlbmRDYWxsYmFjayA9IG9wdGlvbnMuYmVmb3JlU2VuZDtcblx0XHR9XG5cblx0XHRpZiAob3B0aW9ucy51c2VUb2tlbikge1xuXHRcdFx0Ly8gRXhwbGljaXRseSB0b2xkIHRvIHVzZSB0aGlzIHRva2VuXG5cdFx0XHRhdXRoVG9rZW4gPSBvcHRpb25zLnVzZVRva2VuO1xuXHRcdH1cblxuXHRcdGJvZHkgPSBvcHRpb25zLmJvZHk7XG5cdFx0aGVhZGVycyA9IG5vcm1hbGl6ZUhlYWRlcnMob3B0aW9ucy5oZWFkZXJzIHx8IHt9KTtcblxuXHRcdGlmICh1cmwudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdodHRwJykgPT09IDAgfHwgdXJsLmluZGV4T2YoJy8vJykgPT09IDAgfHwgb3B0aW9ucy5ub0FQSSA9PT0gdHJ1ZSkge1xuXHRcdFx0Ly8gQ2FsbGVyIGhhcyBzcGVjaWZpZWQgaG9zdCBhcyB3ZWxsIG9yIGl0J3Mgbm90IGFuIEFQSSBjYWxsLiAgVXNlIHRoZSBzdXBwbGllZCB1cmwgYXMtc2kuXG5cdFx0XHRhcGlVUkwgPSB1cmw7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFJlbGF0aXZlIFVSTC4gIEJ1aWxkIHVwIGFuIGFic29sdXRlIG9uZS5cblx0XHRcdGFwaVVSTCA9IGFwaVVSTCArICgnLycgKyB1cmwpLnJlcGxhY2UoL1xcL1xcLysvZywgJy8nKTtcblx0XHR9XG5cblx0XHQvLyBBZGQgZGVmYXVsdCBhdXRob3JpemF0aW9uIGhlYWRlciBpZiBvbmUgd2FzIG5vdCBwcm92aWRlZFxuXHRcdGlmICghaGVhZGVycy5BdXRob3JpemF0aW9uICYmIGF1dGhUb2tlbiAmJiBvcHRpb25zLm5vQXV0aCAhPT0gdHJ1ZSkge1xuXHRcdFx0aGVhZGVycy5BdXRob3JpemF0aW9uID0gJ3Rva2VuICcgKyBhdXRoVG9rZW47XG5cdFx0fVxuXG5cdFx0eGhyLm9wZW4obWV0aG9kLCBhcGlVUkwpO1xuXG5cdFx0Ly8gSlNPTiBzdHJpbmdpZnkgc28gbG9uZyBhcyB3ZSBhcmUgZGVhbGluZyB3aXRoIGEgcmVhbCBvYmplY3Qgb3IgYXJyYXkuXG5cdFx0Ly8gU2tpcCBpZiBUeXBlZCBBcnJheSBsaWtlIFVpbnQ4QXJyYXksIGV0Yy4uLiBzaW5jZSB0aGF0IG1lYW5zIHNlbmQgYXMgYmluYXJ5XG5cdFx0aWYgKHR5cGVvZiBib2R5ID09PSAnb2JqZWN0JyAmJiAodHlwZW9mIEFycmF5QnVmZmVyID09PSAndW5kZWZpbmVkJyB8fCAoQXJyYXlCdWZmZXIgJiYgIUFycmF5QnVmZmVyLmlzVmlldyhib2R5KSkpKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRib2R5ID0gSlNPTi5zdHJpbmdpZnkoYm9keSk7XG5cdFx0XHRcdGlmICghaGVhZGVycy5oYXNPd25Qcm9wZXJ0eSgnQ29udGVudC1UeXBlJykpIHtcblx0XHRcdFx0XHRoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRyZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gSlNPTi5zdHJpbmdpZ3koKSBib2R5JykpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHJlcXVlc3QgaGVhZGVyc1xuXHRcdGZvciAoaGVhZGVyTmFtZSBpbiBoZWFkZXJzKSB7XG5cdFx0XHRpZiAoaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShoZWFkZXJOYW1lKSkge1xuXHRcdFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlcihoZWFkZXJOYW1lLCBoZWFkZXJzW2hlYWRlck5hbWVdKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBbGxvdyBjYWxsZXIgdG8gbWFrZSBYSFIgY2hhbmdlcyBpZiB0aGV5IGxpa2Vcblx0XHRpZiAoeGhyUHJlU2VuZENhbGxiYWNrKSB7XG5cdFx0XHR4aHJQcmVTZW5kQ2FsbGJhY2soeGhyKTtcblx0XHR9XG5cblx0XHR4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdGxldCBwYXJzZWRCb2R5OiBCO1xuXHRcdFx0dmFyIGNvbnRlbnRUeXBlID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdDb250ZW50LVR5cGUnKTtcblx0XHRcdHZhciBlcnJvckNhdGVnb3J5ID0gKHhoci5nZXRSZXNwb25zZUhlYWRlcignRXJyb3ItQ2F0ZWdvcnknKSB8fCAnJykudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0dmFyIGF0dGVtcHRzID0gb3B0aW9ucy5hdHRlbXB0cyB8fCAwO1xuXG5cdFx0XHRpZiAoeGhyICYmIHhoci5zdGF0dXMgPT09IDQwMyAmJiAgICAgICAgICAvLyA0MDMgc3RhdHVzLCBjaGVjayBmb3IgUEJSIGVycm9yXG5cdFx0XHRcdHR5cGVvZiBlcnJvckNhdGVnb3J5ID09PSAnc3RyaW5nJyAmJiAgLy8gWXVwLCBhbiBFcnJvci1DYXRlZ29yeSBoZWRlclxuXHRcdFx0XHRlcnJvckNhdGVnb3J5ICE9PSAnJyAmJiAgICAgICAgICAgICAgIC8vIFRoYXQncyBub3QgZW1wdHlcblx0XHRcdFx0YXV0aFRva2VuICYmICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbmQgdGhpcyB3YXMgYW4gYXV0aGVudGljYXRlZCByZXF1ZXN0XG5cdFx0XHRcdGF0dGVtcHRzID09PSAwKSB7ICAgICAgICAgICAgICAgICAgICAvLyBUaGF0IHdhcyB0aGUgZmlyc3QgYXR0ZW1wdFxuXHRcdFx0XHRpZiAoZXJyb3JDYXRlZ29yeSA9PT0gJ3Bici5hdXRoLnNpZ25hdHVyZWludmFsaWQnIHx8IC8vIExpa2VseSB0aGUgenluZ2EgYXBwIHNlY3JldCBjaGFuZ2VkLCByZWF1dGhcblx0XHRcdFx0XHRlcnJvckNhdGVnb3J5ID09PSAncGJyLmF1dGgubWFsZm9ybWVkYXV0aCcgfHwgICAgLy8gU29tZXRoaW5nIGJhZCwgcmVhdXRoIGFuZCBwcmF5XG5cdFx0XHRcdFx0ZXJyb3JDYXRlZ29yeSA9PT0gJ3Bici5hdXRoLkV4cGlyZWQnKSB7ICAgICAgICAgIC8vIFNpbXBsZSBleHBpcmUgZXZlbnQsIHJlYXV0aCBzaG91bGQgYmUgd2hhdCB3ZSBuZWVkXG5cdFx0XHRcdFx0Ly8gVHJ5IHRvIHJlLWF1dGhcblx0XHRcdFx0XHRyZWZyZXNoVG9rZW5IYW5kbGVyKGF1dGhUb2tlbiwgZnVuY3Rpb24gKG5ld1Rva2VuKSB7XG5cdFx0XHRcdFx0XHRpZiAobmV3VG9rZW4pIHtcblx0XHRcdFx0XHRcdFx0Ly8gdzAwdCwgZ290IGEgbmV3IG9uZVxuXHRcdFx0XHRcdFx0XHQvLyBSZXNlbmQgdGhlIHJlcXVlc3Qgd2l0aCB0aGUgbmV3IHRva2VuXG5cdFx0XHRcdFx0XHRcdG9wdGlvbnMudXNlVG9rZW4gPSBuZXdUb2tlbjtcblx0XHRcdFx0XHRcdFx0b3B0aW9ucy5hdHRlbXB0cyA9IGF0dGVtcHRzICsgMTtcblx0XHRcdFx0XHRcdFx0aWYgKHRva2Vuc1tkZWZhdWx0U29jaWFsTmV0d29ya0lkXSA9PT0gYXV0aFRva2VuKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU2V0IHRoZSBkZWZhdWx0IHRva2VuIHRvIHRoZSBuZXcgb25lIHNvIGxvbmcgYXMgdGhlIG9sZCBvbmUgd2FzIHNldFxuXHRcdFx0XHRcdFx0XHRcdHRva2Vuc1tkZWZhdWx0U29jaWFsTmV0d29ya0lkXSA9IG5ld1Rva2VuO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGFwaTxCPihtZXRob2QsIHVybCwgb3B0aW9ucykudGhlbihyZXNvbHZlLCByZWplY3QpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZSh7IGJvZHk6IGJvZHksIHhocjogeGhyIH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBTVEFSVElORyB3aXRoIGFwcGxpY2F0aW9uL2pzb24uICBTb21lIHNpbGx5IHNlcnZpY2VzIGFkZCBcIjsgY2hhcnNldD11dGYtOFwiIG9uIHRoZSBlbmQuXG5cdFx0XHQvLyBJJ20gbG9va2luZyBhdCBZT1Ugb3B0aW1pemUgc2VydmljZVxuXHRcdFx0aWYgKGNvbnRlbnRUeXBlICYmIGNvbnRlbnRUeXBlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignYXBwbGljYXRpb24vanNvbicpID09PSAwKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cGFyc2VkQm9keSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRyZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gSlNPTi5wYXJzZSgpIHJlc3BvbnNlIGJvZHknKSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJlc29sdmUoeyBib2R5OiBwYXJzZWRCb2R5LCB4aHI6IHhociB9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIHRvZG86IGZhaWwgaGVyZT9cblx0XHRcdFx0cmVzb2x2ZSh7IGJvZHk6IHhoci5yZXNwb25zZVRleHQgYXMgYW55LCB4aHI6IHhociB9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHR4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCByZWplY3QpO1xuXHRcdHhoci5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIHJlamVjdCk7XG5cblx0XHR4aHIuc2VuZChib2R5KTtcblx0fSk7XG59XG4iLCIvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tbWVudC1mb3JtYXRcbi8vLzxhbWQtbW9kdWxlIG5hbWU9XCJaeW5nYU9wdGltaXplXCIvPlxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgWnluZ2EgPSByZXF1aXJlKCcuL1p5bmdhJyk7XG5pbXBvcnQgWnluZ2FBY2NvdW50ID0gcmVxdWlyZSgnLi9aeW5nYUFjY291bnQnKTtcbmltcG9ydCBaeW5nYUFuYWx5dGljcyA9IHJlcXVpcmUoJy4vWnluZ2FBbmFseXRpY3MnKTtcbmltcG9ydCBaeW5nYUNvcmUgPSByZXF1aXJlKCcuL1p5bmdhQ29yZScpO1xuaW1wb3J0IFp5bmdhTmV0ID0gcmVxdWlyZSgnLi9aeW5nYU5ldCcpO1xuXG52YXIgZW52aXJvbm1lbnQgPSAncHJvZHVjdGlvbic7XG5cbmV4cG9ydCB2YXIgRXhwZXJpbWVudHMgPSBuZXcgWnluZ2FDb3JlLkV2ZW50TWl4aW4oKTtcblxuZXhwb3J0IHR5cGUgZW9zRW52aXJvbm1lbnQgPSAncHJvZHVjdGlvbicgfCAnc3RhZ2luZycgfCAnZGV2ZWxvcG1lbnQnO1xuXG5leHBvcnQgdmFyIEVOVklST05NRU5UUyA9IHtcblx0UFJPRFVDVElPTjogJ3Byb2R1Y3Rpb24nLFxuXHRTVEFHSU5HOiAnc3RhZ2luZycsXG5cdERFVkVMT1BNRU5UOiAnZGV2ZWxvcG1lbnQnXG59O1xuXG52YXIgZXhwZXJpbWVudE92ZXJyaWRlczogeyBba2V5OiBzdHJpbmddOiBFeHBlcmltZW50c0RhdGFSZXNwb25zZSB9ID0ge307XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEVudmlyb25tZW50KGVudjogZW9zRW52aXJvbm1lbnQpIHtcblx0c3dpdGNoIChlbnYpIHtcblx0XHRjYXNlIEVOVklST05NRU5UUy5QUk9EVUNUSU9OOlxuXHRcdGNhc2UgRU5WSVJPTk1FTlRTLlNUQUdJTkc6XG5cdFx0Y2FzZSBFTlZJUk9OTUVOVFMuREVWRUxPUE1FTlQ6XG5cdFx0XHRlbnZpcm9ubWVudCA9IGVudjtcblx0XHRcdGJyZWFrO1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHR0aHJvdyBFcnJvcignSW52YWxpZCBlb3MgZW52aXJvbm1lbnQ6ICcgKyBlbnYpO1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckZha2VFeHBlcmltZW50RGF0YSgpIHtcblx0ZXhwZXJpbWVudE92ZXJyaWRlcyA9IHt9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0RmFrZUV4cGVyaW1lbnREYXRhKG92ZXJyaWRlRXhwZXJpbWVudERhdGE6IHt9KSB7XG5cdGV4cGVyaW1lbnRPdmVycmlkZXMgPSBvdmVycmlkZUV4cGVyaW1lbnREYXRhO1xufVxuXG5mdW5jdGlvbiByZWFkRmlsZVN5bmMoZmlsZVBhdGg6IHN0cmluZywgaWdub3JlZDogc3RyaW5nKSB7XG5cdHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0dmFyIHJlc3VsdDogc3RyaW5nO1xuXHR2YXIgZXJyb3I6IEVycm9yO1xuXG5cdHhoci5vcGVuKCdHRVQnLCBmaWxlUGF0aCwgZmFsc2UpO1xuXHR4aHIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcblx0XHRpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcblx0XHRcdGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0cmVzdWx0ID0geGhyLnJlc3BvbnNlVGV4dDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVycm9yID0gbmV3IEVycm9yKHhoci5zdGF0dXNUZXh0KTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHhoci5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHtcblx0XHRlcnJvciA9IG5ldyBFcnJvcih4aHIuc3RhdHVzVGV4dCk7XG5cdH07XG5cdHhoci5zZW5kKG51bGwpO1xuXG5cdGlmIChlcnJvcikge1xuXHRcdHRocm93IGVycm9yO1xuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoRmlsZShmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRsZXQgcmVzdWx0OiBzdHJpbmc7XG5cdFx0bGV0IGVycm9yOiBFcnJvcjtcblxuXHRcdHhoci5vcGVuKCdHRVQnLCBmaWxlUGF0aCwgdHJ1ZSk7XG5cdFx0eGhyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcblx0XHRcdFx0aWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuXHRcdFx0XHRcdHJlc29sdmUoeGhyLnJlc3BvbnNlVGV4dCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVqZWN0KHhoci5zdGF0dXNUZXh0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdFx0eGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuXHRcdFx0cmVqZWN0KHhoci5zdGF0dXNUZXh0KTtcblx0XHR9O1xuXHRcdHhoci5zZW5kKG51bGwpO1xuXHR9KTtcbn1cblxuLy8gbG9hZHMgdGhlIGV4cGVyaW1lbnQgbmFtZXMgYXMgW25hbWVdLmpzb24gaW4gcm9vdFBhdGguXG4vLyBvcHRpb25hbDogcGFzcyBpbiBuYW1lLnZhcmlhbnQgdG8gZ2V0IGEgc3BlY2lmaWMgdmFyaWFudC5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkRmFrZUV4cGVyaW1lbnREYXRhKHJvb3RQYXRoOiBzdHJpbmcsIGV4cGVyaW1lbnROYW1lczogc3RyaW5nW10pIHtcblx0aWYgKGV4cGVyaW1lbnROYW1lcy5sZW5ndGggPiAwKSB7XG5cdFx0Zm9yIChsZXQgZXhwZXJpbWVudE5hbWVBbmRWYXJpYW50IG9mIGV4cGVyaW1lbnROYW1lcykge1xuXHRcdFx0bGV0IFtleHBlcmltZW50TmFtZSwgZXhwZXJpbWVudFZhcmlhbnRdID0gZXhwZXJpbWVudE5hbWVBbmRWYXJpYW50LnNwbGl0KCcuJyk7XG5cdFx0XHR2YXIgZmlsZVBhdGggPSBgJHtyb290UGF0aH0vJHtleHBlcmltZW50TmFtZUFuZFZhcmlhbnR9Lmpzb25gO1xuXHRcdFx0bGV0IGV4cGVyaW1lbnRTdHI6IHN0cmluZyA9IHJlYWRGaWxlU3luYyhmaWxlUGF0aCwgJ3V0ZjgnKTtcblx0XHRcdGxldCBleHBlcmltZW50RGF0YSA9IEpTT04ucGFyc2UoZXhwZXJpbWVudFN0cik7XG5cdFx0XHRpZiAoIWV4cGVyaW1lbnRPdmVycmlkZXMpIHtcblx0XHRcdFx0ZXhwZXJpbWVudE92ZXJyaWRlcyA9IHt9O1xuXHRcdFx0fVxuXHRcdFx0Ly8gZml4IHVwIGFsbCBrZXlzXG5cdFx0XHQvLyBleHBlcmltZW50RGF0YSA9IGZpeF91cF9leHBlcmltZW50X2RhdGEoZXhwZXJpbWVudERhdGEpO1xuXHRcdFx0ZXhwZXJpbWVudE92ZXJyaWRlc1tleHBlcmltZW50TmFtZV0gPSBleHBlcmltZW50RGF0YTtcblx0XHR9XG5cdH1cbn1cblxuLy8gb3B0aW9uYWw6IHBhc3MgaW4gbmFtZS52YXJpYW50IHRvIGdldCBhIHNwZWNpZmljIHZhcmlhbnQuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXN5bmNMb2FkRmFrZUV4cGVyaW1lbnREYXRhKHJvb3RQYXRoOiBzdHJpbmcsIGV4cGVyaW1lbnROYW1lczogc3RyaW5nW10pIHtcblx0aWYgKGV4cGVyaW1lbnROYW1lcy5sZW5ndGggPiAwKSB7XG5cdFx0bGV0IHByb21pc2VzID0gZXhwZXJpbWVudE5hbWVzLm1hcCgoZXhwZXJpbWVudE5hbWVBbmRWYXJpYW50LCBpZHgsIGFycikgPT4ge1xuXHRcdFx0bGV0IFtleHBlcmltZW50TmFtZSwgZXhwZXJpbWVudFZhcmlhbnRdID0gZXhwZXJpbWVudE5hbWVBbmRWYXJpYW50LnNwbGl0KCcuJyk7XG5cblx0XHRcdHZhciBmaWxlUGF0aCA9IGAke3Jvb3RQYXRofS8ke2V4cGVyaW1lbnROYW1lQW5kVmFyaWFudH0uanNvbmA7XG5cdFx0XHRsZXQgcmVzcG9uc2UgPSBmZXRjaEZpbGUoZmlsZVBhdGgpLnRoZW4oKGV4cGVyaW1lbnRTdHIpID0+IHtcblx0XHRcdFx0bGV0IGV4cGVyaW1lbnREYXRhID0gSlNPTi5wYXJzZShleHBlcmltZW50U3RyKTtcblx0XHRcdFx0aWYgKCFleHBlcmltZW50T3ZlcnJpZGVzKSB7XG5cdFx0XHRcdFx0ZXhwZXJpbWVudE92ZXJyaWRlcyA9IHt9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGZpeCB1cCBhbGwga2V5c1xuXHRcdFx0XHQvLyBleHBlcmltZW50RGF0YSA9IGZpeF91cF9leHBlcmltZW50X2RhdGEoZXhwZXJpbWVudERhdGEpO1xuXHRcdFx0XHRleHBlcmltZW50T3ZlcnJpZGVzW2V4cGVyaW1lbnROYW1lXSA9IGV4cGVyaW1lbnREYXRhO1xuXHRcdFx0fSkuY2F0Y2goKGZhaWwpID0+IHtcblx0XHRcdFx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcblx0XHRcdFx0Y29uc29sZS5sb2coJ2xvY2FsIGV4cGVyaW1lbnQgbm90IGZvdW5kOiAnICsgZmlsZVBhdGgpO1xuXHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gcmVzcG9uc2U7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcblx0fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEV4cGVyaW1lbnRzRGF0YVJlc3BvbnNlIHtcblx0dmFyaWFibGVzPzogYW55O1xuXHR2YXJpYW50OiBzdHJpbmc7XG5cdGV4cGVyaW1lbnQ6IHN0cmluZztcblx0ZXZlbnRQYXlsb2FkPzogc3RyaW5nO1xuXHRlcnJvcj86IHtcblx0XHRjb2RlOiBzdHJpbmcsXG5cdFx0bWVzc2FnZTogc3RyaW5nLFxuXHR9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hPcHRpbWl6ZUFzc2lnbm1lbnRzKG5hbWVzLCBhdHRyaWJ1dGVzKTogUHJvbWlzZTx7IFtpZDogc3RyaW5nXTogRXhwZXJpbWVudHNEYXRhUmVzcG9uc2U7IH0+IHtcblx0dmFyIGV4cGVyaW1lbnRzO1xuXHRlbnZpcm9ubWVudCA9IGVudmlyb25tZW50IHx8ICdwcm9kdWN0aW9uJztcblx0aWYgKHR5cGVvZiBuYW1lcyAhPT0gJ29iamVjdCcgfHwgIW5hbWVzLmxlbmd0aCkge1xuXHRcdG5hbWVzID0gW25hbWVzXTtcblx0fVxuXG5cdC8vIFRoZSByZWFsIGZldGNoIGxpc3QgYWZ0ZXIgd2UgY2hlY2sgb3VyIG92ZXJyaWRlcy5cblx0Ly8gSWYgd2UgaGF2ZSBvdmVycmlkZXMgZm9yIGV2ZXJ5dGhpbmcgdGhlbiB3ZSB3b24ndCBmZXRjaCBhbnl0aGluZyBmcm9tIGVvc1xuXHR2YXIgcmVhbEZldGNoTGlzdCA9IFtdO1xuXG5cdGZvciAodmFyIG4gPSAwLCBuYyA9IG5hbWVzLmxlbmd0aDsgbiA8IG5jOyBuKyspIHtcblx0XHR2YXIgbmFtZSA9IG5hbWVzW25dO1xuXHRcdGlmICghZXhwZXJpbWVudE92ZXJyaWRlc1tuYW1lXSkge1xuXHRcdFx0cmVhbEZldGNoTGlzdC5wdXNoKG5hbWUpO1xuXHRcdH1cblx0fVxuXG5cdGlmICghcmVhbEZldGNoTGlzdC5sZW5ndGgpIHtcblx0XHQvLyBqdXN0IHJlc29sdmUgd2l0aCBsb2NhbCBleHBlcmltZW50IG92ZXJyaWRlc1xuXHRcdGV4cGVyaW1lbnRzID0ge307XG5cdFx0Zm9yICh2YXIgbiA9IDAsIG5jID0gbmFtZXMubGVuZ3RoOyBuIDwgbmM7IG4rKykge1xuXHRcdFx0dmFyIG5hbWUgPSBuYW1lc1tuXTtcblx0XHRcdGV4cGVyaW1lbnRzW25hbWVdID0gZXhwZXJpbWVudE92ZXJyaWRlc1tuYW1lXTtcblx0XHRcdEV4cGVyaW1lbnRzLmZpcmUobmFtZSwgZXhwZXJpbWVudHNbbmFtZV0pO1xuXHRcdH1cblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGV4cGVyaW1lbnRzKTtcblx0fSBlbHNlIHtcblx0XHQvLyBuZWVkIHRvIGZldGNoIGZyb20gZW9zXG5cdFx0ZXhwZXJpbWVudHMgPSByZWFsRmV0Y2hMaXN0Lm1hcCgoZXhwTmFtZSkgPT4ge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0ZXhwZXJpbWVudDogZXhwTmFtZVxuXHRcdFx0fTtcblx0XHR9KTtcblx0XHRhdHRyaWJ1dGVzID0gYXR0cmlidXRlcyB8fCB7fTtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR2YXIgYWNjb3VudFByb21pc2UgPSBaeW5nYUFjY291bnQuRXZlbnQubGFzdChaeW5nYUFjY291bnQuRXZlbnRzLkFDQ09VTlRfREVUQUlMUyk7XG5cdFx0XHR2YXIgYXBwSWRQcm9taXNlID0gWnluZ2EuRXZlbnQubGFzdChaeW5nYS5FdmVudHMuQVBQX0lEKTtcblx0XHRcdHZhciBjbGllbnRJZFByb21pc2UgPSBaeW5nYUFuYWx5dGljcy5FdmVudC5sYXN0KFp5bmdhQW5hbHl0aWNzLkV2ZW50cy5DTElFTlRfSUQpO1xuXHRcdFx0UHJvbWlzZS5hbGwoW2FjY291bnRQcm9taXNlLCBhcHBJZFByb21pc2UsIGNsaWVudElkUHJvbWlzZV0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcblx0XHRcdFx0dmFyIGFub25BY2NvdW50RGV0YWlsczogYW55ID0gcmVzdWx0c1swXSB8fCB7fTtcblx0XHRcdFx0dmFyIGFwcElkID0gcmVzdWx0c1sxXTtcblx0XHRcdFx0dmFyIGNsaWVudElkID0gcmVzdWx0c1syXTtcblx0XHRcdFx0WnluZ2FOZXQuYXBpKCdQT1NUJywgJy9vcHRpbWl6ZS92My9hc3NpZ25tZW50cycsIHtcblx0XHRcdFx0XHR1c2VUb2tlbjogYW5vbkFjY291bnREZXRhaWxzLnRva2VuLFxuXHRcdFx0XHRcdGJvZHk6IHtcblx0XHRcdFx0XHRcdGFwcElkOiBhcHBJZCxcblx0XHRcdFx0XHRcdGNsaWVudElkOiBjbGllbnRJZCxcblx0XHRcdFx0XHRcdHppZDogYW5vbkFjY291bnREZXRhaWxzLnppZCxcblx0XHRcdFx0XHRcdGVudmlyb25tZW50OiBlbnZpcm9ubWVudCxcblx0XHRcdFx0XHRcdGFzc2lnbm1lbnRzOiBleHBlcmltZW50cyxcblx0XHRcdFx0XHRcdGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXNcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG5cdFx0XHRcdFx0dmFyIGJvZHk6IGFueSA9IHJlc3BvbnNlLmJvZHkgfHwge307XG5cdFx0XHRcdFx0dmFyIGRhdGEgPSBib2R5ICYmIGJvZHkuZGF0YTtcblx0XHRcdFx0XHR2YXIgZXhwZXJpbWVudDtcblx0XHRcdFx0XHR2YXIgZXhwTmFtZTtcblx0XHRcdFx0XHR2YXIgdmFyTmFtZTtcblx0XHRcdFx0XHR2YXIgdmFyVmFsdWU7XG5cdFx0XHRcdFx0dmFyIHJldHVybmVkRXhwZXJpbWVudHMgPSB7fTtcblx0XHRcdFx0XHR2YXIgZXhwQ291bnQgPSBkYXRhICYmIGRhdGEubGVuZ3RoIHx8IDA7XG5cdFx0XHRcdFx0dmFyIGk7XG5cdFx0XHRcdFx0aWYgKHJlc3BvbnNlLnhoci5zdGF0dXMgPT09IDIwMCkge1xuXG5cdFx0XHRcdFx0XHQvLyBmaWxsIHJldHVybmVkIGFycmF5IHdpdGgga25vd24gb3ZlcnJpZGVzXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBlbyA9IDAsIGVjID0gbmFtZXMubGVuZ3RoOyBlbyA8IGVjOyBlbysrKSB7XG5cdFx0XHRcdFx0XHRcdGV4cE5hbWUgPSBuYW1lc1tlb107XG5cdFx0XHRcdFx0XHRcdGlmIChleHBlcmltZW50T3ZlcnJpZGVzW2V4cE5hbWVdKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWRFeHBlcmltZW50c1tleHBOYW1lXSA9IGV4cGVyaW1lbnRPdmVycmlkZXNbZXhwTmFtZV07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGV4cENvdW50OyBpKyspIHtcblx0XHRcdFx0XHRcdFx0ZXhwZXJpbWVudCA9IGRhdGFbaV07XG5cdFx0XHRcdFx0XHRcdGV4cE5hbWUgPSBleHBlcmltZW50LmV4cGVyaW1lbnQ7XG5cblx0XHRcdFx0XHRcdFx0Ly8gZG8gbm90IGZpbGwgd2l0aCB2YWx1ZXMgdGhhdCBhcmUgYWxyZWFkeSBvdmVycmlkZW5cblx0XHRcdFx0XHRcdFx0aWYgKCFleHBlcmltZW50T3ZlcnJpZGVzW2V4cE5hbWVdKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFleHBlcmltZW50LmVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTbyBsb25nIGFzIHRoZXJlIHdlcmUgbm90IGVycm9ycyBhZGQgaXQgdG8gdGhlIGxpc3Rcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkRXhwZXJpbWVudHNbZXhwTmFtZV0gPSBleHBlcmltZW50O1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdGlmIChleHBlcmltZW50LnZhcmlhYmxlcykge1xuXHRcdFx0XHRcdFx0XHRcdFx0Zm9yICh2YXJOYW1lIGluIGV4cGVyaW1lbnQudmFyaWFibGVzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChleHBlcmltZW50LnZhcmlhYmxlcy5oYXNPd25Qcm9wZXJ0eSh2YXJOYW1lKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhclZhbHVlID0gZXhwZXJpbWVudC52YXJpYWJsZXNbdmFyTmFtZV07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT3B0aW1pemUgc2VuZCBzZW5kcyBKU09OIGVuY29kZWQgYXMgYSBzdHJpbmcgd2hpY2ggaXMgZHVtYi5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBEbyBzb21lIGJhc2ljIGRldGVjdGlvbiB0byBzZWUgaWYgaXQgbG9vayBsaWtlIGl0IG1pZ2h0IGJlIGFuIG9iamVjdCBvciBhcnJheVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgdmFyVmFsdWUgPT09ICdzdHJpbmcnICYmICh2YXJWYWx1ZS5pbmRleE9mKCd7JykgPT09IDAgfHwgdmFyVmFsdWUuaW5kZXhPZignWycpID09PSAwKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZXhwZXJpbWVudC52YXJpYWJsZXNbdmFyTmFtZV0gPSBKU09OLnBhcnNlKHZhclZhbHVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWVtcHR5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7IH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0Ly8gRmlyZSBleHBlcmltZW50IHNwZWNpZmljIGV2ZW50XG5cdFx0XHRcdFx0XHRcdEV4cGVyaW1lbnRzLmZpcmUoZXhwTmFtZSwgZXhwZXJpbWVudCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHJldHVybmVkRXhwZXJpbWVudHMpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZWplY3Qoe1xuXHRcdFx0XHRcdFx0XHRlcnJvcjogbmV3IEVycm9yKCdBc3NpZ25tZW4gY2FsbCBmYWlsZWQnKSxcblx0XHRcdFx0XHRcdFx0eGhyOiByZXNwb25zZS54aHJcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgcmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG59XG4iLCIvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tbWVudC1mb3JtYXRcbi8vLzxhbWQtbW9kdWxlIG5hbWU9XCJaeW5nYVByb2ZpbGVcIi8+XG5pbXBvcnQgKiBhcyBUdXJucyBmcm9tICdBVEctVHVybnMnO1xuaW1wb3J0IFp5bmdhID0gcmVxdWlyZSgnLi9aeW5nYScpO1xuaW1wb3J0IFp5bmdhQWNjb3VudCA9IHJlcXVpcmUoJy4vWnluZ2FBY2NvdW50Jyk7XG5pbXBvcnQgWnluZ2FDb3JlID0gcmVxdWlyZSgnLi9aeW5nYUNvcmUnKTtcbmltcG9ydCBaeW5nYUluc3RhbnQgPSByZXF1aXJlKCcuL1p5bmdhSW5zdGFudCcpO1xuaW1wb3J0IFp5bmdhTmV0ID0gcmVxdWlyZSgnLi9aeW5nYU5ldCcpO1xuXG5leHBvcnQgdmFyIEV2ZW50ID0gbmV3IFp5bmdhQ29yZS5FdmVudE1peGluKCk7XG5leHBvcnQgdmFyIEV2ZW50cyA9IHtcblx0UFJPRklMRV9BVVRPVVBMT0FEOiAnUHJvZmlsZS5hdXRvVXBsb2FkJyAvLyBQcm9jZXNzIGZvciBhdXRvdXBsb2FkaW5nIHRoZSBwcm9maWxlIGhhcyBjb21wbGV0ZWQuXG59O1xuZXhwb3J0IHZhciBFUlJPUlMgPSB7XG5cdElOUFVUX0VSUk9SOiAnUFJPRklMRV9JTlBVVF9FUlJPUicsICAgICAgLy8gSW5wdXQgZXJyb3IgZW5jb3VudGVyZWRcblx0U0VSVkVSX05PVF9GT1VORDogJ1BST0ZJTEVfTk9UX0ZPVU5EJywgICAvLyBTZXJ2ZXIgcmVzb3VyY2UgZG9lcyBub3QgZXhpc3QgICAgIC0gQSA0MDQgZXJyb3Jcblx0U0VSVkVSX0NBUzogJ1BST0ZJTEVfU0VSVkVSX0NBUycsICAgICAgICAvLyBTZXJ2ZXIgZW5jb3VudGVyZWQgYSBDQVMgZXJyb3IgICAgIC0gQSA0MDkgZXJyb3Jcblx0U0VSVkVSX1VOS05PV046ICdQUk9GSUxFX1NFUlZFUl9VTktOT1dOJywgLy8gU2VydmVyIGVuY291bnRlcmVkIGEgZ2VuZXJhbCBlcnJvciAtIFVzdWFsbHkgYSA1MDAgZXJyb3Jcblx0VU5LTk9XTjogJ1BST0ZJTEVfVU5LTk9XTicgICAgICAgICAgICAgICAvLyBFbmNvdW50ZXJlZCBhIGdlbmVyYWwgZXJyb3Jcbn07XG5cbi8vIGNhaGNlZCBwcm9maWxlIHZhcnMgZm9yIG1hbmFnaW5nIHByb2ZpbGUgZGF0YVxuZXhwb3J0IHZhciBsYXN0UHJvZmlsZURhdGFDYWNoZTogYW55ID0ge307XG5leHBvcnQgdmFyIGxhc3RQcm9maWxlRGF0YUNhczogbnVtYmVyID0gMDtcblxuLy8gZm9yIHNpbXBsaWNpdHkgYW5kIGNvZGUgbWluaWZpY2F0aW9uXG5mdW5jdGlvbiBpc1VuZGVmKHgpIHtcblx0cmV0dXJuIHR5cGVvZiB4ID09PSAndW5kZWZpbmVkJztcbn1cblxuZnVuY3Rpb24gZ2VuUHJvZmlsZUVycm9yKGNvZGUsIG1lc3NhZ2UsIGRldGFpbHM/KSB7XG5cdHJldHVybiB7XG5cdFx0Y29kZTogY29kZSB8fCBFUlJPUlMuVU5LTk9XTixcblx0XHRtZXNzYWdlOiBtZXNzYWdlIHx8ICdVbmtub3duJyxcblx0XHRkZXRhaWxzOiBkZXRhaWxzIHx8IHt9XG5cdH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZmlsZUNhbGxQYXJhbXMgZXh0ZW5kcyBUdXJucy5Qcm9maWxlUGFyYW1zLCBUdXJucy5VcGRhdGVQcm9maWxlQm9keSB7XG5cdGlkczogc3RyaW5nW10gfCBudW1iZXJbXTtcblx0dXNlX3p5bmdhX3BsYXllcl9pZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByb2ZpbGVDYWxsPFJlc3BvbnNlQm9keT4oXG5cdG1ldGhvZDogc3RyaW5nLFxuXHRwYXRoOiBzdHJpbmcsXG5cdHBhcmFtczogUGFydGlhbDxQcm9maWxlQ2FsbFBhcmFtcz4sXG5cdG9wdGlvbnM/OiBaeW5nYU5ldC5BcGlPcHRpb25zXG4pOiBQcm9taXNlPFp5bmdhTmV0LkFwaVJlc3VsdDxSZXNwb25zZUJvZHk+PiB7XG5cdHJldHVybiBuZXcgUHJvbWlzZTxaeW5nYU5ldC5BcGlSZXN1bHQ8UmVzcG9uc2VCb2R5Pj4oZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdHZhciBxdWVyeVBhcmFtcyA9IFtdO1xuXHRcdHZhciBwYXJhbU5hbWU7XG5cdFx0dmFyIHBhcmFtVmFsdWU7XG5cblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XHRwYXJhbXMgPSBwYXJhbXMgfHwge307XG5cblx0XHRQcm9taXNlLmFsbChbXG5cdFx0XHRaeW5nYS5FdmVudC5sYXN0KFp5bmdhLkV2ZW50cy5BUFBfSUQpLFxuXHRcdFx0WnluZ2FBY2NvdW50LkV2ZW50Lmxhc3QoWnluZ2FBY2NvdW50LkV2ZW50cy5BQ0NPVU5UX0RFVEFJTFMpXG5cdFx0XSkudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuXHRcdFx0dmFyIGFwcElkID0gcmVzdWx0c1swXTtcblx0XHRcdHZhciBhY2NvdW50RGV0YWlscyA9IHJlc3VsdHNbMV0gYXMgWnluZ2FBY2NvdW50LlVzZXJBY2NvdW50RGV0YWlscztcblxuXHRcdFx0Ly8gYXMgb2YgdjEuMSwgY2FsbCByZXF1aXJlcyB0aGlzLlxuXHRcdFx0aWYgKHBhcmFtcy51c2VfenluZ2FfcGxheWVyX2lkICYmICFwYXJhbXMuenluZ2FfcGxheWVyX2lkKSB7XG5cdFx0XHRcdGRlbGV0ZSBwYXJhbXMudXNlX3p5bmdhX3BsYXllcl9pZDtcblx0XHRcdFx0cGFyYW1zLnp5bmdhX3BsYXllcl9pZCA9IGFjY291bnREZXRhaWxzLnBsYXllcklkO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKHBhcmFtTmFtZSBpbiBwYXJhbXMpIHtcblx0XHRcdFx0cGFyYW1WYWx1ZSA9IHBhcmFtc1twYXJhbU5hbWVdO1xuXHRcdFx0XHQvLyBlbmNvZGUgYW5kIG9wdGlvbmFsbHkgdHVybiBhcnJheXMgaW50byBjb21tYSBzZXBhcmF0ZWQgbGlzdFxuXHRcdFx0XHRwYXJhbVZhbHVlID0gQXJyYXkuaXNBcnJheShwYXJhbVZhbHVlKSA/IHBhcmFtVmFsdWUubWFwKGVuY29kZVVSSSkuam9pbignLCcpIDogZW5jb2RlVVJJKHBhcmFtVmFsdWUpO1xuXHRcdFx0XHRxdWVyeVBhcmFtcy5wdXNoKHBhcmFtTmFtZSArICc9JyArIHBhcmFtVmFsdWUpO1xuXHRcdFx0fVxuXG5cdFx0XHRsZXQgcXVlcnlTdHJpbmcgPSBxdWVyeVBhcmFtcy5sZW5ndGggPiAwID8gKCc/JyArIHF1ZXJ5UGFyYW1zLmpvaW4oJyYnKSkgOiAnJztcblxuXHRcdFx0aWYgKFp5bmdhLmdldEFwaVVSTEJhc2UoKS5pbmRleE9mKCdsb2NhbGhvc3QnKSA+IDApIHtcblx0XHRcdFx0dmFyIGhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge307XG5cdFx0XHRcdGhlYWRlcnNbJ0FwcC1JZCddID0gYXBwSWQ7XG5cdFx0XHRcdGhlYWRlcnNbJ1BsYXllci1JZCddID0gYWNjb3VudERldGFpbHMucGxheWVySWQ7XG5cdFx0XHRcdGhlYWRlcnNbJ1ppZCddID0gYWNjb3VudERldGFpbHMuemlkO1xuXHRcdFx0fVxuXHRcdFx0b3B0aW9ucy51c2VUb2tlbiA9IGFjY291bnREZXRhaWxzLnRva2VuO1xuXHRcdFx0WnluZ2FOZXQuYXBpPFJlc3BvbnNlQm9keT4obWV0aG9kLCBaeW5nYS5nZXRBcGlVUkxCYXNlKCkgKyBwYXRoICsgcXVlcnlTdHJpbmcsIG9wdGlvbnMpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcblx0XHR9KTtcblx0fSk7XG59XG5cbi8vIFsnZmJpZ19wbGF5ZXJfaWQnLCAnenluZ2FfcGxheWVyX2lkJywgJ2Rpc3BsYXlfbmFtZScsICdkaXNwbGF5X3BpY3R1cmVfdXJsJywgJ3Byb2ZpbGVfZGF0YScsICdwcm9maWxlX2RhdGFfY2FzJ11cblxuZXhwb3J0IGludGVyZmFjZSBHZXRQcm9maWxlRGF0YVJlc3VsdCBleHRlbmRzIFp5bmdhTmV0LkFwaVJlc3VsdDxUdXJucy5Qcm9maWxlc1Jlc3BvbnNlPiB7XG5cdGluZGV4ZXM/OiB7IHp5bmdhOiBhbnksIGZhY2Vib29rOiBhbnkgfTtcbn1cblxuZnVuY3Rpb24gZ2V0UHJvZmlsZURhdGEoXG5cdGlkcyxcblx0aXNaeW5nYUlkcyxcblx0ZmllbGRzOiBUdXJucy5Vc2VyUHJvZmlsZUZpZWxkc1R5cGVbXSxcblx0bWF4Q2FjaGVBZ2Vcbik6IFByb21pc2U8R2V0UHJvZmlsZURhdGFSZXN1bHQ+IHtcblx0dmFyIHBhdGggPSBpc1p5bmdhSWRzID8gJy9mYmlnLW1hcHBpbmcvenluZ2FfcGxheWVyX2lkcycgOiAnL2ZiaWctbWFwcGluZy9mYmlnX3BsYXllcl9pZHMnO1xuXHRmaWVsZHMgPSBmaWVsZHMgfHwgW1xuXHRcdCdmYmlnX3BsYXllcl9pZCcsXG5cdFx0J3p5bmdhX3BsYXllcl9pZCcsXG5cdFx0J2Rpc3BsYXlfbmFtZScsXG5cdFx0J2Rpc3BsYXlfcGljdHVyZV91cmwnLFxuXHRcdCdwcm9maWxlX2RhdGEnLFxuXHRcdCdwcm9maWxlX2RhdGFfY2FzJ1xuXHRdO1xuXG5cdC8vIFRPRE86IENhY2hlIG1hcHBpbmcsIG5hbWUgYW5kIHBpYy5cblx0Ly8gICAgICAgSWYgcHJvZmlsZV9kYXRhIGlzIG5vdCBhc2tlZCBmb3IgQU5EIGFsbCB1c2Vyc1xuXHQvLyAgICAgICBjYW4gYmUgc2F0aXNmaWVkIGZyb20gY2FjaGUgdGhlbiBza2lwIHRhbGtpbmcgdG8gdGhlIHNlcnZlclxuXHQvLyAgICAgICAjZnV0dXJlb3B0aW1pemF0aW9uXG5cdGlmICghQXJyYXkuaXNBcnJheShpZHMpKSB7XG5cdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGdlblByb2ZpbGVFcnJvcihFUlJPUlMuSU5QVVRfRVJST1IsICdcXCdpZHNcXCcgbXVzdCBiZSBhbiBhcnJheScpKTtcblx0fVxuXHRpZiAoIUFycmF5LmlzQXJyYXkoZmllbGRzKSkge1xuXHRcdHJldHVybiBQcm9taXNlLnJlamVjdChnZW5Qcm9maWxlRXJyb3IoRVJST1JTLklOUFVUX0VSUk9SLCAnXFwnZmllbGRzXFwnIG11c3QgYmUgYW4gYXJyYXknKSk7XG5cdH1cblxuXHRpZiAoaWRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdC8vIHNraXAgZG9pbmcgdGhlIHJlcXVlc3QuIHRoaXMgaXMgYSBudWxsIG9wLlxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuXHRcdFx0Ym9keToge1xuXHRcdFx0XHRwcm9maWxlczogW11cblx0XHRcdH0sXG5cdFx0XHR4aHI6IG51bGwsXG5cdFx0XHRpbmRleGVzOiB7XG5cdFx0XHRcdHp5bmdhOiB7fSxcblx0XHRcdFx0ZmFjZWJvb2s6IHt9XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHR9XG5cblx0Zm9yIChsZXQgayA9IDA7IGsgPCBpZHMubGVuZ3RoOyArK2spIHtcblx0XHRpZiAoIWlkc1trXSkge1xuXHRcdFx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuXHRcdFx0UHJvbWlzZS5yZWplY3QoZ2VuUHJvZmlsZUVycm9yKEVSUk9SUy5JTlBVVF9FUlJPUiwgYGdldFByb2ZpbGVEYXRhOiBcXCdpZHNcXCcgaW5kZXggYXQgJHtrfSBpcyBpbnZhbGlkLiAke0pTT04uc3RyaW5naWZ5KGlkcyl9YCkpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBwcm9maWxlQ2FsbDxUdXJucy5Qcm9maWxlc1Jlc3BvbnNlPignR0VUJywgcGF0aCwgeyBpZHM6IGlkcywgZmllbGRzOiBmaWVsZHMgfSlcblx0XHQudGhlbigocHJvZmlsZVJlc3BvbnNlKSA9PiB7XG5cdFx0XHR2YXIgcmVzdWx0czogR2V0UHJvZmlsZURhdGFSZXN1bHQgPSBwcm9maWxlUmVzcG9uc2U7XG5cdFx0XHR2YXIgaTtcblx0XHRcdHZhciBwcm9maWxlO1xuXHRcdFx0dmFyIGN1cnJlbnRJZDtcblx0XHRcdHZhciB4aHIgPSByZXN1bHRzLnhocjtcblx0XHRcdHZhciBzdGF0dXNDb2RlID0geGhyLnN0YXR1cztcblx0XHRcdHZhciBpbmRleGVzID0ge1xuXHRcdFx0XHR6eW5nYToge30sXG5cdFx0XHRcdGZhY2Vib29rOiB7fVxuXHRcdFx0fTtcblx0XHRcdHZhciBjdXJyZW50SW5kZXggPSBpc1p5bmdhSWRzID8gaW5kZXhlcy56eW5nYSA6IGluZGV4ZXMuZmFjZWJvb2s7XG5cdFx0XHRpZiAoKHN0YXR1c0NvZGUgPj0gMjAwICYmIHN0YXR1c0NvZGUgPCAzMDApIHx8IHN0YXR1c0NvZGUgPT09IDMwNCkge1xuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgcmVzdWx0cy5ib2R5LnByb2ZpbGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0cHJvZmlsZSA9IHJlc3VsdHMuYm9keS5wcm9maWxlc1tpXTtcblx0XHRcdFx0XHRpZiAocHJvZmlsZS5mYmlnX3BsYXllcl9pZCkge1xuXHRcdFx0XHRcdFx0aW5kZXhlcy5mYWNlYm9va1twcm9maWxlLmZiaWdfcGxheWVyX2lkICsgJyddID0gcHJvZmlsZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHByb2ZpbGUuenluZ2FfcGxheWVyX2lkKSB7XG5cdFx0XHRcdFx0XHRpbmRleGVzLnp5bmdhW3Byb2ZpbGUuenluZ2FfcGxheWVyX2lkICsgJyddID0gcHJvZmlsZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmVzdWx0cy5pbmRleGVzID0gaW5kZXhlcztcblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGN1cnJlbnRJZCA9IGlkc1tpXSArICcnO1xuXHRcdFx0XHRcdGN1cnJlbnRJbmRleFtjdXJyZW50SWRdID0gY3VycmVudEluZGV4W2N1cnJlbnRJZF0gfHwgZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHJvdyBnZW5Qcm9maWxlRXJyb3IoRVJST1JTLlNFUlZFUl9VTktOT1dOLCAnU2VydmVyIEVycm9yLicsIHJlc3VsdHMpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9maWxlc0J5WnluZ2FJZEFzeW5jKGlkczogbnVtYmVyW10sIGZpZWxkczogVHVybnMuVXNlclByb2ZpbGVGaWVsZHNUeXBlW10sIG1heENhY2hlQWdlKSB7XG5cdHJldHVybiBnZXRQcm9maWxlRGF0YShpZHMsIHRydWUsIGZpZWxkcywgbWF4Q2FjaGVBZ2UpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvZmlsZXNCeUZhY2Vib29rSWRBc3luYyhpZHM6IHN0cmluZ1tdLCBmaWVsZHM6IFR1cm5zLlVzZXJQcm9maWxlRmllbGRzVHlwZVtdLCBtYXhDYWNoZUFnZT8pIHtcblx0cmV0dXJuIGdldFByb2ZpbGVEYXRhKGlkcywgZmFsc2UsIGZpZWxkcywgbWF4Q2FjaGVBZ2UpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29ubmVjdGVkUGxheWVyUHJvZmlsZXNBc3luYyhmaWVsZHM6IFR1cm5zLlVzZXJQcm9maWxlRmllbGRzVHlwZVtdLCBtYXhDYWNoZUFnZT8pIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlPGFueT4oZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFp5bmdhSW5zdGFudC5FdmVudC5sYXN0KFp5bmdhSW5zdGFudC5FdmVudHMuSU5TVEFOVF9GQl9UT1NfQUNDRVBUKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdFp5bmdhSW5zdGFudC5wbGF5ZXIuZ2V0Q29ubmVjdGVkUGxheWVyc0FzeW5jKCkudGhlbihmdW5jdGlvbiAocGxheWVyczogWnluZ2FJbnN0YW50LlBsYXllckluZm9bXSkge1xuXHRcdFx0XHR2YXIgZmJpZ0lkcyA9IFtdO1xuXHRcdFx0XHRmb3IgKGxldCBwbGF5ZXIgb2YgcGxheWVycykge1xuXHRcdFx0XHRcdGZiaWdJZHMucHVzaChwbGF5ZXIuZ2V0SUQoKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gRmV0Y2ggcHJvZmlsZSBkYXRhXG5cdFx0XHRcdGdldFByb2ZpbGVzQnlGYWNlYm9va0lkQXN5bmMoZmJpZ0lkcywgZmllbGRzLCBtYXhDYWNoZUFnZSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuXHRcdFx0fSwgcmVqZWN0KTtcblx0XHR9KTtcblx0fSk7XG59XG5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9maWxlRGF0YUFzeW5jKGZpZWxkczogVHVybnMuVXNlclByb2ZpbGVGaWVsZHNUeXBlW10pOiBQcm9taXNlPFp5bmdhTmV0LkFwaVJlc3VsdDxUdXJucy5Qcm9maWxlUmVzcG9uc2U+PiB7XG5cdGZpZWxkcyA9IGZpZWxkcyB8fCBbJ3Byb2ZpbGVfZGF0YScsICdwcm9maWxlX2RhdGFfY2FzJ107XG5cdHJldHVybiBuZXcgUHJvbWlzZTxaeW5nYU5ldC5BcGlSZXN1bHQ8VHVybnMuUHJvZmlsZVJlc3BvbnNlPj4oZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdHByb2ZpbGVDYWxsPFR1cm5zLlByb2ZpbGVSZXNwb25zZT4oJ0dFVCcsICcvcHJvZmlsZScsIHsgZmllbGRzOiBmaWVsZHMsIHVzZV96eW5nYV9wbGF5ZXJfaWQ6IHRydWUgfSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG5cdFx0XHRcdHZhciB4aHIgPSByZXN1bHRzLnhocjtcblx0XHRcdFx0dmFyIHN0YXR1c0NvZGUgPSB4aHIuc3RhdHVzO1xuXHRcdFx0XHRpZiAoKHN0YXR1c0NvZGUgPj0gMjAwICYmIHN0YXR1c0NvZGUgPCAzMDApIHx8IHN0YXR1c0NvZGUgPT09IDMwNCkge1xuXHRcdFx0XHRcdGxhc3RQcm9maWxlRGF0YUNhcyA9IHJlc3VsdHMuYm9keS5wcm9maWxlLnByb2ZpbGVfZGF0YV9jYXM7XG5cdFx0XHRcdFx0bGFzdFByb2ZpbGVEYXRhQ2FjaGUgPSByZXN1bHRzLmJvZHkucHJvZmlsZS5wcm9maWxlX2RhdGEgfHwge307XG5cblx0XHRcdFx0XHRyZXNvbHZlKHJlc3VsdHMpOyAvLyBTdWNjZXNzZnVsXG5cdFx0XHRcdH0gZWxzZSBpZiAoc3RhdHVzQ29kZSA9PT0gNDA0KSB7XG5cdFx0XHRcdFx0cmVqZWN0KGdlblByb2ZpbGVFcnJvcihcblx0XHRcdFx0XHRcdEVSUk9SUy5TRVJWRVJfTk9UX0ZPVU5ELFxuXHRcdFx0XHRcdFx0J1Byb2ZpbGUgZGF0YSBub3QgZm91bmQuICBVc2VyIG1heSBub3QgaGF2ZSBiZWVuIGNyZWF0ZWQgeWV0Jyxcblx0XHRcdFx0XHRcdHJlc3VsdHMpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZWplY3QoZ2VuUHJvZmlsZUVycm9yKEVSUk9SUy5TRVJWRVJfVU5LTk9XTiwgJ1NlcnZlciBFcnJvci4nLCByZXN1bHRzKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIHJlamVjdCk7XG5cdH0pO1xufVxuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZURhdGFBc3luYyhkYXRhLCBkYXRhQ0FTOiBudW1iZXIsIG9wdGlvbnM6IFp5bmdhTmV0LkFwaU9wdGlvbnMpOiBQcm9taXNlPFp5bmdhTmV0LkFwaVJlc3VsdDxUdXJucy5Qcm9maWxlUmVzcG9uc2U+PiB7XG5cdHJldHVybiBuZXcgUHJvbWlzZTxaeW5nYU5ldC5BcGlSZXN1bHQ8VHVybnMuUHJvZmlsZVJlc3BvbnNlPj4oZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdHZhciBib2R5ID0ge1xuXHRcdFx0cHJvZmlsZV9kYXRhOiBkYXRhLFxuXHRcdFx0cHJvZmlsZV9kYXRhX2NhczogZGF0YUNBU1xuXHRcdH07XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFx0aWYgKCFkYXRhQ0FTKSB7XG5cdFx0XHRkZWxldGUgYm9keS5wcm9maWxlX2RhdGFfY2FzO1xuXHRcdH1cblx0XHRvcHRpb25zLmJvZHkgPSBib2R5O1xuXHRcdHByb2ZpbGVDYWxsPFR1cm5zLlByb2ZpbGVSZXNwb25zZT4oJ1BVVCcsICcvcHJvZmlsZScsIHsgdXNlX3p5bmdhX3BsYXllcl9pZDogdHJ1ZSB9LCBvcHRpb25zKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcblx0XHRcdFx0dmFyIHhociA9IHJlc3VsdHMueGhyO1xuXHRcdFx0XHR2YXIgc3RhdHVzQ29kZSA9IHhoci5zdGF0dXM7XG5cdFx0XHRcdGlmICgoc3RhdHVzQ29kZSA+PSAyMDAgJiYgc3RhdHVzQ29kZSA8IDMwMCkgfHwgc3RhdHVzQ29kZSA9PT0gMzA0KSB7XG5cdFx0XHRcdFx0bGFzdFByb2ZpbGVEYXRhQ2FjaGUgPSBkYXRhIHx8IHt9O1xuXHRcdFx0XHRcdGxhc3RQcm9maWxlRGF0YUNhcyA9IHJlc3VsdHMuYm9keS5wcm9maWxlX2RhdGFfY2FzO1xuXG5cdFx0XHRcdFx0cmVzb2x2ZShyZXN1bHRzKTsgLy8gU3VjY2Vzc2Z1bFxuXHRcdFx0XHR9IGVsc2UgaWYgKHN0YXR1c0NvZGUgPT09IDQwOSkge1xuXHRcdFx0XHRcdHJlamVjdChnZW5Qcm9maWxlRXJyb3IoRVJST1JTLlNFUlZFUl9DQVMsICdDQVMgTWlzbWF0Y2guICBGZXRjaCBhZ2FpbiBhbmQgcmUtYXBwbHkgY2hhbmdlcycsIHJlc3VsdHMpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZWplY3QoZ2VuUHJvZmlsZUVycm9yKEVSUk9SUy5TRVJWRVJfVU5LTk9XTiwgJ1NlcnZlciBFcnJvci4nLCByZXN1bHRzKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIHJlamVjdCk7XG5cdH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTWVkaWFVcmxBc3luYyh1cmwpOiBQcm9taXNlPFp5bmdhTmV0LkFwaVJlc3VsdDxUdXJucy5Qcm9maWxlUmVzcG9uc2U+PiB7XG5cdHJldHVybiBuZXcgUHJvbWlzZTxaeW5nYU5ldC5BcGlSZXN1bHQ8VHVybnMuUHJvZmlsZVJlc3BvbnNlPj4oZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFp5bmdhSW5zdGFudC5FdmVudC5sYXN0KFp5bmdhSW5zdGFudC5FdmVudHMuSU5TVEFOVF9JTklUSUFMSVpFRCwgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIHF1ZXJ5UGFyYW1zID0ge1xuXHRcdFx0XHRmYmlnX3BsYXllcl9pZDogWnluZ2FJbnN0YW50LnBsYXllci5nZXRJRCgpLFxuXHRcdFx0XHR1c2VfenluZ2FfcGxheWVyX2lkOiB0cnVlLFxuXHRcdFx0fTtcblx0XHRcdHByb2ZpbGVDYWxsPFR1cm5zLlByb2ZpbGVSZXNwb25zZT4oJ1BVVCcsICcvcHJvZmlsZScsIHF1ZXJ5UGFyYW1zLCB7IGJvZHk6IHsgcHJvZmlsZV9tZWRpYV91cmw6IHVybCB9IH0pXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG5cdFx0XHRcdFx0dmFyIHhociA9IHJlc3VsdHMueGhyO1xuXHRcdFx0XHRcdHZhciBzdGF0dXNDb2RlID0geGhyLnN0YXR1cztcblx0XHRcdFx0XHRpZiAoKHN0YXR1c0NvZGUgPj0gMjAwICYmIHN0YXR1c0NvZGUgPCAzMDApIHx8IHN0YXR1c0NvZGUgPT09IDMwNCkge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZShyZXN1bHRzKTsgLy8gU3VjY2Vzc2Z1bFxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZWplY3QoZ2VuUHJvZmlsZUVycm9yKEVSUk9SUy5TRVJWRVJfVU5LTk9XTiwgJ1NlcnZlciBFcnJvci4nLCByZXN1bHRzKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCByZWplY3QpO1xuXHRcdH0pO1xuXHR9KTtcbn1cblxuWnluZ2FJbnN0YW50LkV2ZW50Lmxhc3QoWnluZ2FJbnN0YW50LkV2ZW50cy5JTlNUQU5UX0ZCX1RPU19BQ0NFUFQsIGZ1bmN0aW9uICgpIHtcblxuXHRaeW5nYUluc3RhbnQucGxheWVyLmdldENvbm5lY3RlZFBsYXllcnNBc3luYygpLnRoZW4oZnVuY3Rpb24gKGNvbm5lY3RlZFBsYXllcnMpIHtcblx0XHR2YXIgaTtcblxuXHRcdHZhciBjYWNoZWRQcm9maWxlS2V5ID0gJ19fcHJvZmlsZUNhY2hlXycgKyBaeW5nYUluc3RhbnQucGxheWVyLmdldElEKCk7XG5cdFx0dmFyIGNhY2hlZFByb2ZpbGVTdHJpbmcgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVkUHJvZmlsZUtleSk7XG5cdFx0dmFyIGNhY2hlZFByb2ZpbGVEYXRhO1xuXHRcdHZhciBwcm9maWxlRGF0YSA9IHtcblx0XHRcdGRpc3BsYXlfbmFtZTogWnluZ2FJbnN0YW50LnBsYXllci5nZXROYW1lKCksXG5cdFx0XHRkaXNwbGF5X3BpY3R1cmVfdXJsOiBaeW5nYUluc3RhbnQucGxheWVyLmdldFBob3RvKCksXG5cdFx0XHRwcm9maWxlX2Nvbm5lY3RlZF9mYmlnX3BsYXllcl9pZHM6IFtdXG5cdFx0fTtcblx0XHR2YXIgcXVlcnlQYXJhbXMgPSB7XG5cdFx0XHRmYmlnX3BsYXllcl9pZDogWnluZ2FJbnN0YW50LnBsYXllci5nZXRJRCgpLFxuXHRcdFx0dXNlX3p5bmdhX3BsYXllcl9pZDogdHJ1ZSxcblx0XHR9O1xuXHRcdHZhciB3YXNDYWNoZWQgPSBmYWxzZTtcblxuXHRcdC8vIEdldCBjb25uZWN0ZWQgZnJpZW5kIElEcyBpbnRvIGEgc29ydGVkIGFycmF5XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkoY29ubmVjdGVkUGxheWVycykpIHtcblx0XHRcdGZvciAoaSA9IDA7IGkgPCBjb25uZWN0ZWRQbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHByb2ZpbGVEYXRhLnByb2ZpbGVfY29ubmVjdGVkX2ZiaWdfcGxheWVyX2lkcy5wdXNoKGNvbm5lY3RlZFBsYXllcnNbaV0uZ2V0SUQoKSArICcnKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cHJvZmlsZURhdGEucHJvZmlsZV9jb25uZWN0ZWRfZmJpZ19wbGF5ZXJfaWRzLnNvcnQoKTtcblxuXHRcdC8vIFRyeSB0byB1bi1zZXJpYWxpemUgdGhlIGNhY2hlZCAobGFzdCB3cml0dGVuKSBmcmllbmRzIGxpc3Rcblx0XHR0cnkge1xuXHRcdFx0Y2FjaGVkUHJvZmlsZURhdGEgPSBKU09OLnBhcnNlKGNhY2hlZFByb2ZpbGVTdHJpbmcpO1xuXHRcdFx0d2FzQ2FjaGVkID0gISFjYWNoZWRQcm9maWxlRGF0YTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHQvLyBTb21ldGhpbmcgc2VyaW91c2x5IHdyb25nIHdpdGggdGhlIGNhY2hlLCB1c2UgdGhlIGRlZmF1bHRcblx0XHR9XG5cblx0XHQvLyBTZXQgZGVmYXVsdCB2YWx1ZSBmb3IgY2FjaGVkIHByb2ZpbGUgZGF0YSBpZiB3ZSBkaWRuJ3QgZmluZCBhbnl0aGluZyBvciBmYWlsZWQgdG8gcGFyc2UgaXRcblx0XHRjYWNoZWRQcm9maWxlRGF0YSA9IGNhY2hlZFByb2ZpbGVEYXRhIHx8IHtcblx0XHRcdGRpc3BsYXlfbmFtZTogJycsXG5cdFx0XHRkaXNwbGF5X3BpY3R1cmVfdXJsOiAnJyxcblx0XHRcdHByb2ZpbGVfY29ubmVjdGVkX2ZiaWdfcGxheWVyX2lkczogW11cblx0XHR9O1xuXG5cdFx0aWYgKHByb2ZpbGVEYXRhLmRpc3BsYXlfbmFtZSAhPT0gY2FjaGVkUHJvZmlsZURhdGEuZGlzcGxheV9uYW1lIHx8XG5cdFx0XHRwcm9maWxlRGF0YS5kaXNwbGF5X3BpY3R1cmVfdXJsICE9PSBjYWNoZWRQcm9maWxlRGF0YS5kaXNwbGF5X3BpY3R1cmVfdXJsIHx8XG5cdFx0XHQvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG5cdFx0XHRKU09OLnN0cmluZ2lmeShwcm9maWxlRGF0YS5wcm9maWxlX2Nvbm5lY3RlZF9mYmlnX3BsYXllcl9pZHMpICE9PSBKU09OLnN0cmluZ2lmeShjYWNoZWRQcm9maWxlRGF0YS5wcm9maWxlX2Nvbm5lY3RlZF9mYmlnX3BsYXllcl9pZHMpKSB7XG5cblx0XHRcdHByb2ZpbGVDYWxsKCdQVVQnLCAnL2ZiaWctbWFwcGluZycsIHF1ZXJ5UGFyYW1zLCB7IGJvZHk6IHByb2ZpbGVEYXRhIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcblx0XHRcdFx0aWYgKHJlc3VsdHMgJiYgcmVzdWx0cy54aHIgJiYgKHJlc3VsdHMueGhyLnN0YXR1cyA9PT0gMjAwIHx8IHJlc3VsdHMueGhyLnN0YXR1cyA9PT0gMjAxKSkge1xuXHRcdFx0XHRcdHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShjYWNoZWRQcm9maWxlS2V5LCBKU09OLnN0cmluZ2lmeShwcm9maWxlRGF0YSkpO1xuXHRcdFx0XHRcdC8vIFN1Y2Nlc3NmdWwgd3JpdGUgb2YgY2hhbmdlZCBkYXRhXG5cdFx0XHRcdFx0RXZlbnQuZmlyZShFdmVudHMuUFJPRklMRV9BVVRPVVBMT0FELCB7IGNhY2hlZERhdGE6IHByb2ZpbGVEYXRhLCBoYXNDaGFuZ2VkOiB0cnVlIH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIFVuc3VjY2Vzc2Z1bCB3cml0ZS4gIElmIHRoZXJlIHdhcyBjYWNoZWQgZGF0YSByZXR1cm4gaXQgYXMgSXQgaXMgYmV0dGVyIHRoYW5cblx0XHRcdFx0XHQvLyBub250aGluZyBhbmQgc2lnbmlmaWVzIGRhdGEgd2FzIHdyaXR0ZW4gYXQgc29tZSBwb2ludFxuXHRcdFx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLlBST0ZJTEVfQVVUT1VQTE9BRCwge1xuXHRcdFx0XHRcdFx0Y2FjaGVkRGF0YTogd2FzQ2FjaGVkICYmIGNhY2hlZFByb2ZpbGVEYXRhLFxuXHRcdFx0XHRcdFx0aGFzQ2hhbmdlZDogdHJ1ZVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vIFRPRE86IHp0cmFjayBpc3N1ZVxuXHRcdFx0XHR9XG5cdFx0XHR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdC8vIFJlamVjdGlvbnNcblx0XHRcdFx0RXZlbnQuZmlyZShFdmVudHMuUFJPRklMRV9BVVRPVVBMT0FELCB7XG5cdFx0XHRcdFx0Y2FjaGVkRGF0YTogd2FzQ2FjaGVkICYmIGNhY2hlZFByb2ZpbGVEYXRhLFxuXHRcdFx0XHRcdGhhc0NoYW5nZWQ6IHRydWVcblx0XHRcdFx0fSk7XG5cdFx0XHRcdC8vIFRPRE86IEFsc28gdHJhY2sgcHJvYmxlbVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLlBST0ZJTEVfQVVUT1VQTE9BRCwgeyBjYWNoZWREYXRhOiBwcm9maWxlRGF0YSwgaGFzQ2hhbmdlZDogZmFsc2UgfSk7XG5cdFx0fVxuXHR9KTtcbn0pO1xuIiwiLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNvbW1lbnQtZm9ybWF0XG4vLy88YW1kLW1vZHVsZSBuYW1lPVwiWnluZ2FSb3VuZHNNYW5hZ2VyXCIvPlxuJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IFp5bmdhID0gcmVxdWlyZSgnLi9aeW5nYScpO1xuaW1wb3J0IFp5bmdhQ29yZSA9IHJlcXVpcmUoJy4vWnluZ2FDb3JlJyk7XG5pbXBvcnQgWnluZ2FOZXQgPSByZXF1aXJlKCcuL1p5bmdhTmV0Jyk7XG5pbXBvcnQgWnluZ2FQcm9maWxlID0gcmVxdWlyZSgnLi9aeW5nYVByb2ZpbGUnKTtcblxudmFyIHdpbiA9IHdpbmRvdztcbnZhciBkb2MgPSBkb2N1bWVudDtcblxudmFyIGV2ZW50RE9NUmVhZHkgPSAnX1JvdW5kc01hbmFnZXIuRE9NUmR5JzsgICAgICAgICAgICAgICAvLyBGaXJlZCB3aGVuIHRoZSBET00gaXMgcmVhZHlcbnZhciBldmVudENTU05vZGUgPSAnX1JvdW5kc01hbmFnZXIuQ1NTTm9kZSc7ICAgICAgICAgICAgICAgLy8gRmlyZWQgd2hlbiB0aGUgQ1NTIG5vZGUgaXMgcmVhZHlcbnZhciBldmVudFJlZnJlc2hIYW5kbGVyID0gJ19Sb3VuZHNNYW5hZ2VyLlJlZnJlc2hIYW5kbGVyJzsgLy8gRmlyZWQgd2hlbiBhIHJlZnJlc2ggaGFuZGxlciBpcyByZWdpc3RlcmVkXG5cbnZhciB0ZW1wbGF0ZXNOb2RlOyAvLyBOb2RlIHRoYXQgY29udGFpbnMgdGVtcGxhdGUgaW5mb3JtYXRpb25cbnZhciBwYXJlbnROb2RlOyAgICAvLyBQYXJlbnQgbm9kZSBmb3Igcm91bmRzIG1hbmFnZXJcblxudmFyIGNzcyA9IHt9OyAgICAgIC8vIEN1cnJlbnQgQ1NTIG9iamVjdC4gIFBhcnNlZCBieSBaeW5nYUNvcmUucGFyc2VDU1MgZnVuY3Rpb24gaW50byBwcm9wZXIgQ1NTLlxuXG5leHBvcnQgdmFyIEV2ZW50ID0gbmV3IFp5bmdhQ29yZS5FdmVudE1peGluKCk7XG5leHBvcnQgdmFyIEV2ZW50cyA9IHtcblx0Q1NTX0NIQU5HRTogJ1JvdW5kc01hbmFnZXIuQ1NTQ2hhbmdlJyxcblx0VEVNUExBVEVTX0NIQU5HRTogJ1JvdW5kc01hbmFnZXIuVGVtcGxhdGVzQ2hhbmdlJyxcblx0UEFSRU5UX05PREVfQ0hBTkdFOiAnUm91bmRzTWFuYWdlci5QYXJlbnROb2RlQ2hhbmdlJyxcblx0Q1RBX1NFTEVDVEVEOiAnUm91bmRzTWFuYWdlci5DVEFTZWxlY3RlZCcsXG5cdENPTlRFTlRfQ0hBTkdFOiAnUm91bmRzTWFuYWdlci5Db250ZW50Q2hhbmdlJ1xufTtcblxuZXhwb3J0IHZhciBURU1QTEFURV9UWVBFUyA9IHtcblx0RE9NX05PREU6ICdkb21Ob2RlJyxcblx0RE9NX05PREVfSUQ6ICdkb21Ob2RlSWQnLFxuXHRIVE1MX1NUUklORzogJ2h0bWxTdHJpbmcnLFxuXHRIVE1MX1VSTDogJ2h0bWxVcmwnXG59O1xuXG5leHBvcnQgdmFyIEVSUk9SUyA9IHtcblx0VU5LTk9XTjogJ1JPVU5EU19NQU5BR0VSX1VOS05PV04nLFxuXHRJTlBVVDogJ1JPVU5EU19NQU5BR0VSX0lOUFVUJyxcblx0QUxSRUFEWV9SRUZSRVNISU5HOiAnUk9VTkRTX01BTkFHRVJfQUxSRUFEWV9SRUZSRVNISU5HJ1xufTtcblxuLy8gQXJyYXkgc3BlY2lmaWMgZm9yRWFjaCBmdW5jdGlvblxuZnVuY3Rpb24gYXJyYXlGb3JFYWNoKGFyciwgZm4sIHNjb3BlPykge1xuXHR2YXIgbGVuID0gYXJyLmxlbmd0aDtcblx0dmFyIGk7XG5cdGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHRcdGZuLmNhbGwoc2NvcGUsIGFycltpXSwgaSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2VuUm91bmRzTWFuYWdlckVycm9yKGNvZGUsIG1lc3NhZ2UsIGRldGFpbHM/KSB7XG5cdHJldHVybiB7XG5cdFx0Y29kZTogY29kZSB8fCBFUlJPUlMuVU5LTk9XTixcblx0XHRtZXNzYWdlOiBtZXNzYWdlIHx8ICdVbmtub3duJyxcblx0XHRkZXRhaWxzOiBkZXRhaWxzIHx8IHt9XG5cdH07XG59XG5cbmZ1bmN0aW9uIGdlblN0cnVjdHVyZWREYXRhKGZsYXREYXRhKSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuXHRcdHJlc29sdmUoZmxhdERhdGEpO1xuXHR9KTtcbn1cblxuLy8gR2VuZXJhdGUgYSBjbGFzc0xpc3QgcG9seWZpbC1saWtlIChkb2VzIG5vdCBtb2RpZnkgcHJvdG90eXBlKSBvYmplY3QgZm9yIGJyb3dzZXIgdGhhdCBkbyBub3Qgc3VwcG9ydC5cbmZ1bmN0aW9uIGNsYXNzTGlzdFJlZ0V4cChuYW1lKSB7XG5cdHJldHVybiBuZXcgUmVnRXhwKCcoXnwgKScgKyBuYW1lICsgJyggfCQpJyk7XG59XG5mdW5jdGlvbiBnZW5DbGFzc0xpc3QoZWxlbWVudCkge1xuXHRyZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QgfHwge1xuXHRcdGFkZDogZnVuY3Rpb24gKCkge1xuXHRcdFx0YXJyYXlGb3JFYWNoKGFyZ3VtZW50cywgZnVuY3Rpb24gKG5hbWUpIHtcblx0XHRcdFx0aWYgKCF0aGlzLmNvbnRhaW5zKG5hbWUpKSB7XG5cdFx0XHRcdFx0ZWxlbWVudC5jbGFzc05hbWUgKz0gZWxlbWVudC5jbGFzc05hbWUubGVuZ3RoID4gMCA/ICcgJyArIG5hbWUgOiBuYW1lO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB0aGlzKTtcblx0XHR9LFxuXHRcdHJlbW92ZTogZnVuY3Rpb24gKCkge1xuXHRcdFx0YXJyYXlGb3JFYWNoKGFyZ3VtZW50cywgZnVuY3Rpb24gKG5hbWUpIHtcblx0XHRcdFx0ZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKGNsYXNzTGlzdFJlZ0V4cChuYW1lKSwgJycpO1xuXHRcdFx0fSwgdGhpcyk7XG5cdFx0fSxcblx0XHR0b2dnbGU6IGZ1bmN0aW9uIChuYW1lLCB0b2dnbGUpIHtcblx0XHRcdGlmICh0b2dnbGUgPT09IHRydWUpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuYWRkKG5hbWUpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRvZ2dsZSA9PT0gZmFsc2UpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMucmVtb3ZlKG5hbWUpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXMuY29udGFpbnMobmFtZSkgPyAodGhpcy5yZW1vdmUobmFtZSksIGZhbHNlKSA6ICh0aGlzLmFkZChuYW1lKSwgdHJ1ZSk7XG5cdFx0fSxcblx0XHRjb250YWluczogZnVuY3Rpb24gKG5hbWUpIHtcblx0XHRcdHJldHVybiBjbGFzc0xpc3RSZWdFeHAobmFtZSkudGVzdChlbGVtZW50LmNsYXNzTmFtZSk7XG5cdFx0fVxuXHR9O1xufVxudmFyIHNwbGl0T25XaGl0ZXNwYWNlID0gL1xcUysvZztcbmZ1bmN0aW9uIGNzc0NsYXNzZXNUb0FycmF5KGFycmF5T3JTdHJpbmcpIHtcblx0dmFyIHJldFZhbCA9IFtdO1xuXHRpZiAoQXJyYXkuaXNBcnJheShhcnJheU9yU3RyaW5nKSkge1xuXHRcdHJldFZhbCA9IGFycmF5T3JTdHJpbmc7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGFycmF5T3JTdHJpbmcgPT09ICdzdHJpbmcnKSB7XG5cdFx0cmV0VmFsID0gYXJyYXlPclN0cmluZy5tYXRjaChzcGxpdE9uV2hpdGVzcGFjZSkgfHwgW107XG5cdH1cblx0cmV0dXJuIHJldFZhbDtcbn1cblxuLy8gR2VuZXJhdGVzIGEgZnVuY3Rpb24gdGhhdCBhbGxvd3MgdGhlIGVhc3kgY2xvbmUgY2hpbGQgbm9kZXNcbi8vIG9mIGEgc3BlY2lmaWVkIHBhcmVudC4gIE9wdGlvbmFsbHkgcmVtb3ZlcyB0aGUgJ2lkJyBhdHRyaWJ1dGVcbi8vIGZyb20gdGhlIGNsb25lZCBub2RlIHNpbmNlIGl0IHdhcyBvbmx5IHRoZXJlIHNvIHdlIGNvdWxkIGZpbmRcbi8vIHRoZSBvcmlnaW5hbCBub2RlLlxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXNoYWRvd2VkLXZhcmlhYmxlXG5mdW5jdGlvbiBnZW5DbG9uZVRlbXBsYXRlTm9kZSh0ZW1wbGF0ZXNOb2RlLCByZW1vdmVJZCkge1xuXHQvLyBBY2NvdW50IGZvciA8dGVtcGxhdGU+IG5vZGVzLiAgRm9yIHRoZXNlIHdlIG5lZWQgdG8gcmVmZXJlbmN0IHRoZSAjZG9jdW1lbnQtZnJhZ21lbnQgYWNjZXNzYWJsZSBhcyAuY29udGVudFxuXHR0ZW1wbGF0ZXNOb2RlID0gdGVtcGxhdGVzTm9kZSAmJiB0ZW1wbGF0ZXNOb2RlLmNvbnRlbnQgfHwgdGVtcGxhdGVzTm9kZTtcblx0cmV0dXJuIGZ1bmN0aW9uIGNsb25lVGVtcGxhdGVOb2RlQnlJZChpZCkge1xuXHRcdHZhciBvcmlnTm9kZSA9IHRlbXBsYXRlc05vZGUucXVlcnlTZWxlY3RvcignIycgKyBpZCk7XG5cdFx0dmFyIGNsb25lZE5vZGUgPSBvcmlnTm9kZSAmJiBvcmlnTm9kZS5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0aWYgKGNsb25lZE5vZGUgJiYgcmVtb3ZlSWQpIHtcblx0XHRcdGNsb25lZE5vZGUucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuXHRcdH1cblx0XHRyZXR1cm4gY2xvbmVkTm9kZTtcblx0fTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2VxdWVudGlhbE5vZGVzKGN1cnJlbnROb2RlLCBpbm5lckhUTUxzLCBhcHBseUZ1bmM/KSB7XG5cdHZhciBsYXN0Tm9kZTtcblx0dmFyIGNsYXNzTGlzdDtcblx0dmFyIG9yaWdDb3B5ID0gY3VycmVudE5vZGUuY2xvbmVOb2RlKHRydWUpO1xuXHQvLyBtYWtlIHN1cmUgc2Vjb25kIGFyZ3VtZW50biBpcyBhbiBhcnJheVxuXHRpZiAoaW5uZXJIVE1McyA9PT0gZmFsc2UgfHwgaW5uZXJIVE1McyA9PT0gdW5kZWZpbmVkIHx8IChBcnJheS5pc0FycmF5KGlubmVySFRNTHMpICYmIGlubmVySFRNTHMubGVuZ3RoID09PSAwKSkge1xuXHRcdC8vIE5vIGFjdHVhbCBlbGVtZW50c1xuXHRcdGN1cnJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY3VycmVudE5vZGUpO1xuXHRcdHJldHVybjtcblx0fVxuXHQvLyBNYWtlIHN1cmUgc2Vjb25kIGFyZ3VtZW50IGlzIGFuIGFycmF5XG5cdGlubmVySFRNTHMgPSBBcnJheS5pc0FycmF5KGlubmVySFRNTHMpID8gaW5uZXJIVE1McyA6IFtpbm5lckhUTUxzXTtcblx0YXJyYXlGb3JFYWNoKGlubmVySFRNTHMsIGZ1bmN0aW9uIChpbm5lckhUTUwsIGkpIHtcblx0XHRjbGFzc0xpc3QgPSBnZW5DbGFzc0xpc3QoY3VycmVudE5vZGUpO1xuXHRcdGlmICh0eXBlb2YgYXBwbHlGdW5jID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRhcHBseUZ1bmMoY3VycmVudE5vZGUsIGlubmVySFRNTCwgY2xhc3NMaXN0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VycmVudE5vZGUuaW5uZXJIVE1MID0gaW5uZXJIVE1MO1xuXHRcdH1cblx0XHRjbGFzc0xpc3QuYWRkKCd6cm1fJyArIChpICsgMSkpO1xuXHRcdGlmIChpID4gMCkge1xuXHRcdFx0Ly8gRXF1aXYgdG8galF1ZXJ5Lmluc2VydEFmdGVyLiAgSWYgbGFzdE5vZGUubmV4dFNpYmxpbmcgaXMgbnVsbFxuXHRcdFx0Ly8gdGhlbiB0aGlzIGRvZXMgdGhlIHNhbWUgYXMgcGFyZW50Tm9kZS5hcHBlbmRDaGlsZCAgVGhpcyBpcyBub3Rcblx0XHRcdC8vIGludHVpdGl2ZSBidXQgaXQgaXMgaG93IGl0IHdvcmtzLlxuXHRcdFx0bGFzdE5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY3VycmVudE5vZGUsIGxhc3ROb2RlLm5leHRTaWJsaW5nKTtcblx0XHR9XG5cdFx0bGFzdE5vZGUgPSBjdXJyZW50Tm9kZTtcblx0XHRjdXJyZW50Tm9kZSA9IG9yaWdDb3B5LmNsb25lTm9kZSh0cnVlKTtcblx0fSk7XG59XG5cbnZhciBjYWNoZWRJbWFnZXMgPSB7fTtcbmZ1bmN0aW9uIHByZUxvYWRJbWFnZSh1cmwsIGNhbGxiYWNrKSB7XG5cdHZhciBpbWFnZTtcblx0aWYgKGNhY2hlZEltYWdlc1t1cmxdKSB7XG5cdFx0c2V0VGltZW91dChjYWxsYmFjaywgMCk7XG5cdH0gZWxzZSB7XG5cdFx0aW1hZ2UgPSBuZXcgSW1hZ2UoKTtcblx0XHRpbWFnZS5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnO1xuXHRcdGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdGNhY2hlZEltYWdlc1t1cmxdID0gdHJ1ZTsgLy8gU28gd2Ugb25seSBldmVyIGRvIHRoaXMgb25jZVxuXHRcdFx0Y2FsbGJhY2soKTtcblx0XHR9O1xuXHRcdGltYWdlLnNyYyA9IHVybDtcblx0fVxufVxuXG4vLyBPYmplY3QgdG8gaG9sZCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZWxlbWVudCB3aGVyZSBhIHRvdWNoL2NsaWNrIHN0YXJ0ZWRcbnZhciBjdGFzID0gW107XG52YXIgdG91Y2hTdGFydERhdGEgPSB7XG5cdHRhcmdldDogZmFsc2UsXG5cdHRvcDogZmFsc2UsXG5cdGxlZnQ6IGZhbHNlLFxuXHR4OiAtMSxcblx0eTogLTFcbn07XG5cbi8vIHRvdWNoc3RhcnQgLyBtb3VzZWRvd24gaGFuZGxlclxuZnVuY3Rpb24gdG91Y2hTdGFydEhhbmRsZXIoZSkge1xuXHR2YXIgcG9zID0gZS50eXBlID09PSAndG91Y2hzdGFydCcgPyBlLnRvdWNoZXNbMF0gOiBlO1xuXHR2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG5cdHZhciBib3VuZGluZ1JlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cblx0dG91Y2hTdGFydERhdGEudGFyZ2V0ID0gdGFyZ2V0O1xuXHR0b3VjaFN0YXJ0RGF0YS50b3AgPSBib3VuZGluZ1JlY3QudG9wO1xuXHR0b3VjaFN0YXJ0RGF0YS5sZWZ0ID0gYm91bmRpbmdSZWN0LmxlZnQ7XG5cdHRvdWNoU3RhcnREYXRhLnggPSBNYXRoLnJvdW5kKHBvcy5jbGllbnRYKTtcblx0dG91Y2hTdGFydERhdGEueSA9IE1hdGgucm91bmQocG9zLmNsaWVudFkpO1xufVxuXG4vLyB0b3VjaG1vdmUgb3IgbW91c2Vtb3ZlIGhhbmRsZXJcbmZ1bmN0aW9uIHRvdWNoTW92ZUhhbmRsZXIoKSB7XG5cdC8vIEFueSBtb3ZlIG1lYW5zIG5vdCBhIGNsaWNrXG5cdHRvdWNoU3RhcnREYXRhLnRhcmdldCA9IGZhbHNlO1xuXHR0b3VjaFN0YXJ0RGF0YS50b3AgPSBmYWxzZTtcblx0dG91Y2hTdGFydERhdGEubGVmdCA9IGZhbHNlO1xuXHR0b3VjaFN0YXJ0RGF0YS54ID0gLTE7XG5cdHRvdWNoU3RhcnREYXRhLnkgPSAtMTtcbn1cblxuZnVuY3Rpb24gdG91Y2hFbmRIYW5kbGVyKGUpIHtcblx0dmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuXHR2YXIgYm91bmRpbmdSZWN0ID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdHZhciBwb3MgPSBlLnR5cGUgPT09ICd0b3VjaGVuZCcgPyBlLmNoYW5nZWRUb3VjaGVzWzBdIDogZTtcblx0dmFyIG5ld1RvcCA9IGJvdW5kaW5nUmVjdC50b3A7XG5cdHZhciBuZXdMZWZ0ID0gYm91bmRpbmdSZWN0LmxlZnQ7XG5cdHZhciBuZXdYID0gTWF0aC5yb3VuZChwb3MuY2xpZW50WCk7XG5cdHZhciBuZXdZID0gTWF0aC5yb3VuZChwb3MuY2xpZW50WSk7XG5cdHZhciBjdGFJbmRleCA9IHBhcnNlSW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY3RhSW5kZXgnKSB8fCAtMSwgMTApO1xuXHR2YXIgY3RhID0gY3Rhc1tjdGFJbmRleF0gfHwge307XG5cdHZhciByZXRWYWwgPSB0cnVlO1xuXG5cdGlmICh0b3VjaFN0YXJ0RGF0YS50b3AgPT09IG5ld1RvcCAmJlxuXHRcdHRvdWNoU3RhcnREYXRhLmxlZnQgPT09IG5ld0xlZnQgJiZcblx0XHR0b3VjaFN0YXJ0RGF0YS54ID09PSBuZXdYICYmXG5cdFx0dG91Y2hTdGFydERhdGEueSA9PT0gbmV3WSAmJlxuXHRcdHRvdWNoU3RhcnREYXRhLnRhcmdldCA9PT0gdGFyZ2V0ICYmXG5cdFx0Y3RhSW5kZXggPj0gMCkge1xuXHRcdC8vIEhhZCBhIHN0YXJ0IEFORCBkaWQgbm90IHNjcm9sbCBYIG9yIFkgQU5EIGRpZCBub3QgbW92ZSBwb3NpdGlvbiBzaW5jZSBzdGFydC4gIE11c3QgYmUgYSB2YWxpZCBjbGljay90b3VjaFxuXHRcdGlmIChlLnN0b3BQcm9wYWdhdGlvbikge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdFx0aWYgKGUucHJldmVudERlZmF1bHQgJiYgZS5jYW5jZWxhYmxlKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fVxuXHRcdEV2ZW50LmZpcmUoRXZlbnRzLkNUQV9TRUxFQ1RFRCwgY3RhLmRhdGEpO1xuXHRcdGlmIChjdGEuY2FsbGJhY2spIHtcblx0XHRcdGN0YS5jYWxsYmFjayhjdGEuZGF0YSk7XG5cdFx0fVxuXHRcdHJldFZhbCA9IGZhbHNlO1xuXHR9XG5cdHJldHVybiByZXRWYWw7XG59XG5cbi8qXG5mdW5jdGlvbiByZWN1cnNpdmVOb2RlUmVtb3ZlKG5vZGUpIHtcblx0aWYgKG5vZGUpIHtcblx0XHR3aGlsZSAobm9kZS5oYXNDaGlsZE5vZGVzKCkpIHtcblx0XHRcdHJlY3Vyc2l2ZU5vZGVSZW1vdmUobm9kZS5sYXN0Q2hpbGQpO1xuXHRcdH1cblx0XHRub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG5cdH1cbn1cbiovXG5cbnZhciByZWZyZXNoaW5nID0gZmFsc2U7XG52YXIgY2FjaGVkRnJpZW5kc0RhdGEgPSBmYWxzZTtcbmZ1bmN0aW9uIHJlZnJlc2hVSShkYXRhKSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0dmFyIHByb21pc2VQYXJlbnROb2RlID0gRXZlbnQubGFzdChFdmVudHMuUEFSRU5UX05PREVfQ0hBTkdFKTtcblx0XHR2YXIgcHJvbWlzZVRlbXBsYXRlTm9kZSA9IEV2ZW50Lmxhc3QoRXZlbnRzLlRFTVBMQVRFU19DSEFOR0UpO1xuXHRcdHZhciBwcm9taXNlRm9ybWF0RGF0YSA9IGdlblN0cnVjdHVyZWREYXRhKGRhdGEpO1xuXHRcdHZhciBwcm9taXNlRG9tUmVhZHkgPSBFdmVudC5sYXN0KGV2ZW50RE9NUmVhZHkpO1xuXHRcdHZhciBwcm9taXNlRnJpZW5kc1BsYXlpbmcgPSBQcm9taXNlLnJlc29sdmUoe30pOyAvLyBCeSBkZWZhdWx0IGRvbid0IGFkZCBmcmllbmRzXG5cdFx0aWYgKHJlZnJlc2hpbmcpIHtcblx0XHRcdHJlamVjdChnZW5Sb3VuZHNNYW5hZ2VyRXJyb3IoRVJST1JTLkFMUkVBRFlfUkVGUkVTSElORywgJ1BsZWFzZSB3YWl0IHVudGlsIGN1cnJlbnQgcmVmcmVzaCBpcyBjb21wbGV0ZScpKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0cmVmcmVzaGluZyA9IHRydWU7XG5cdFx0Y3RhcyA9IFtdO1xuXG5cdFx0aWYgKGRhdGEuYWRkRnJpZW5kc1BsYXlpbmcgIT09IGZhbHNlKSB7XG5cdFx0XHQvLyBDYWxsZXIgZGlkbid0IHRlbGwgdXMgbm90IHRvIGFkZCBmcmllbmRzIHBsYXlpbmcgc28gYWN0dWFsbHkgZ2V0IHRoZW1cblx0XHRcdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1zaGFkb3dlZC12YXJpYWJsZVxuXHRcdFx0cHJvbWlzZUZyaWVuZHNQbGF5aW5nID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHRpZiAoY2FjaGVkRnJpZW5kc0RhdGEpIHtcblx0XHRcdFx0XHRyZXNvbHZlKGNhY2hlZEZyaWVuZHNEYXRhKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRaeW5nYVByb2ZpbGUuZ2V0Q29ubmVjdGVkUGxheWVyUHJvZmlsZXNBc3luYyhbXG5cdFx0XHRcdFx0XHQnZmJpZ19wbGF5ZXJfaWQnLFxuXHRcdFx0XHRcdFx0J3p5bmdhX3BsYXllcl9pZCcsXG5cdFx0XHRcdFx0XHQnZGlzcGxheV9uYW1lJyxcblx0XHRcdFx0XHRcdCdkaXNwbGF5X3BpY3R1cmVfdXJsJ1xuXHRcdFx0XHRcdF0pLnRoZW4oZnVuY3Rpb24gKHByb2ZpbGVEYXRhKSB7XG5cdFx0XHRcdFx0XHR2YXIgZGVmYXVsdFJlc3VsdCA9IFtdO1xuXHRcdFx0XHRcdFx0Y2FjaGVkRnJpZW5kc0RhdGEgPSBwcm9maWxlRGF0YSAmJiBwcm9maWxlRGF0YS5pbmRleGVzICYmIHByb2ZpbGVEYXRhLmluZGV4ZXMuZmFjZWJvb2sgfHwgZGVmYXVsdFJlc3VsdDtcblx0XHRcdFx0XHRcdHJlc29sdmUoY2FjaGVkRnJpZW5kc0RhdGEpO1xuXHRcdFx0XHRcdH0sIHJlamVjdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdFByb21pc2UuYWxsKFtwcm9taXNlUGFyZW50Tm9kZSxcblx0XHRcdHByb21pc2VUZW1wbGF0ZU5vZGUsXG5cdFx0XHRwcm9taXNlRm9ybWF0RGF0YSxcblx0XHRcdHByb21pc2VGcmllbmRzUGxheWluZyxcblx0XHRcdHByb21pc2VEb21SZWFkeVxuXHRcdF0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcblx0XHRcdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1zaGFkb3dlZC12YXJpYWJsZVxuXHRcdFx0dmFyIHBhcmVudE5vZGU6IGFueSA9IHJlc3VsdHNbMF07ICAgICAgICAgICAgICAgICAgICAgIC8vIFJvdW5kcyBNYW5hZ2VyIHBhcmVudCBub2RlXG5cdFx0XHR2YXIgdGVtcGxhdGVOb2RlID0gcmVzdWx0c1sxXTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGVtcGxhdGUgbm9kZVxuXHRcdFx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXNoYWRvd2VkLXZhcmlhYmxlXG5cdFx0XHR2YXIgZGF0YTogYW55ID0gcmVzdWx0c1syXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RydWN0dXJlZCBkYXRhXG5cdFx0XHR2YXIgZnJpZW5kc0RhdGEgPSByZXN1bHRzWzNdOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRnJpZW5kcyBwbGF5aW5nIGRhdGFcblx0XHRcdHZhciB0Q2xvbmUgPSBnZW5DbG9uZVRlbXBsYXRlTm9kZSh0ZW1wbGF0ZU5vZGUsIHRydWUpOyAvLyBUZW1wbGF0ZSBub2RlIGNsb25pbmcgZnVuY3Rpb24uIFJlbW92ZXMgSUQgYXR0cmlidXRlLlxuXHRcdFx0dmFyIG5NYWluID0gdENsb25lKCd6cm1fbWFpbicpOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1haW4gbm9kZVxuXHRcdFx0dmFyIG5Hcm91cHMgPSBuTWFpbi5xdWVyeVNlbGVjdG9yKCcjenJtX2dyb3VwcycpOyAgICAgIC8vIEdyb3VwcyBwYXJlbnQgbm9kZVxuXHRcdFx0dmFyIG5Hcm91cDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJldXNlZCBmb3IgZWFjaCBHcm91cCBub2RlXG5cdFx0XHR2YXIgblJvdW5kcztcblx0XHRcdHZhciBuUm91bmQ7XG5cdFx0XHR2YXIgblBsYXllcnM7XG5cdFx0XHR2YXIgZ3JvdXBJZHggPSB7fTtcblx0XHRcdHZhciBjbGFzc0xpc3RPYmo7XG5cdFx0XHR2YXIgZ3JvdXA7XG5cdFx0XHR2YXIgcm91bmRzO1xuXHRcdFx0dmFyIHJvdW5kO1xuXHRcdFx0dmFyIGdyb3VwSWQ7XG5cdFx0XHR2YXIgZ3JvdXBEYXRhO1xuXHRcdFx0dmFyIGZiaWdJZDtcblx0XHRcdHZhciBmcmllbmQ7XG5cdFx0XHR2YXIgZnJpZW5kRGF0YTtcblxuXHRcdFx0Ly8gQWRkIGZyaWVuZCByZWNvcmRzIGlmIGFueSB3ZXJlIGZldGNoZWRcblx0XHRcdGZvciAoZmJpZ0lkIGluIGZyaWVuZHNEYXRhKSB7XG5cdFx0XHRcdGZyaWVuZCA9IGZyaWVuZHNEYXRhW2ZiaWdJZF07XG5cdFx0XHRcdGlmIChmcmllbmQgJiYgZnJpZW5kLmRpc3BsYXlfbmFtZSAmJiBmcmllbmQuZGlzcGxheV9waWN0dXJlX3VybCkge1xuXHRcdFx0XHRcdGZyaWVuZERhdGEgPSB7XG5cdFx0XHRcdFx0XHRncm91cElkOiAnZnJpZW5kc3BsYXlpbmcnLFxuXHRcdFx0XHRcdFx0cGxheWVyczogW1xuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0bGFiZWxzOiBbXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBmcmllbmQuZGlzcGxheV9uYW1lLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjc3NDbGFzc2VzOiAnJ1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdFx0aW1nVVJMOiBmcmllbmQuZGlzcGxheV9waWN0dXJlX3VybFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0Q1RBczogW1xuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0bGFiZWw6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdGNzc0NsYXNzZXM6ICd6cm1fY2xpY2thYmxlTm9DVEEnLFxuXHRcdFx0XHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdFx0XHRcdEZCSUdQbGF5ZXJJZDogZmJpZ0lkXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0bGFiZWxzOiBbXVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0aWYgKGZyaWVuZC56eW5nYV9wbGF5ZXJfaWQpIHtcblx0XHRcdFx0XHRcdGZyaWVuZERhdGEuQ1RBc1swXS5kYXRhLlp5bmdhUGxheWVySWQgPSBmcmllbmQuenluZ2FfcGxheWVyX2lkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkYXRhLnJvdW5kcy5wdXNoKGZyaWVuZERhdGEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZvciAoZ3JvdXBJZCBpbiBkYXRhLmdyb3Vwcykge1xuXHRcdFx0XHRncm91cElkeFtncm91cElkXSA9IHtcblx0XHRcdFx0XHRncm91cDogZGF0YS5ncm91cHNbZ3JvdXBJZF0sXG5cdFx0XHRcdFx0cm91bmRzOiBbXVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0Ly8gZm9yIGluc3RlYWQgb2YgYXJyYXlGb3JFYWNoIHNvIHdlIGNhbiBicmVhayBvdXQgb24gZXJyb3Jcblx0XHRcdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpwcmVmZXItZm9yLW9mXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEucm91bmRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHJvdW5kID0gZGF0YS5yb3VuZHNbaV07XG5cdFx0XHRcdGdyb3VwID0gZ3JvdXBJZHhbcm91bmQuZ3JvdXBJZF07XG5cdFx0XHRcdGlmIChncm91cCkge1xuXHRcdFx0XHRcdGdyb3VwLnJvdW5kcy5wdXNoKHJvdW5kKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZWplY3QoZ2VuUm91bmRzTWFuYWdlckVycm9yKEVSUk9SUy5JTlBVVCwgJ0Egcm91bmRcXCdzIGdyb3VwSWQgd2FzIG5vdCBmb3VuZCBpbiB0aGUgZ3JvdXBzIG9iamVjdCcsIHtcblx0XHRcdFx0XHRcdGdyb3VwSWQ6IHJvdW5kLmdyb3VwSWQsXG5cdFx0XHRcdFx0XHRkYXRhOiBkYXRhXG5cdFx0XHRcdFx0fSkpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Zm9yIChncm91cElkIGluIGdyb3VwSWR4KSB7XG5cdFx0XHRcdG5Hcm91cCA9IHRDbG9uZSgnenJtX2dyb3VwJyk7ICAgICAvLyBOZXcgZ3JvdXAgbm9kZVxuXHRcdFx0XHRncm91cERhdGEgPSBncm91cElkeFtncm91cElkXS5ncm91cDsgLy8gR3JvdXAgZGF0YVxuXHRcdFx0XHRyb3VuZHMgPSBncm91cElkeFtncm91cElkXS5yb3VuZHM7ICAgLy8gUm91bmRzIGRhdGFcblxuXHRcdFx0XHQvLyBTZXQgZ3JvdXAgbmFtZVxuXHRcdFx0XHQobkdyb3VwLnF1ZXJ5U2VsZWN0b3IoJy56cm1fZ3JvdXBfbmFtZScpIHx8IHt9KS5pbm5lckhUTUwgPSBncm91cERhdGEubGFiZWwgfHwgJyc7XG5cdFx0XHRcdC8vIEFkZCBhbnkgZ3JvdXAgQ1NTIGNsYXNzZXMgaWYgcHJvdmlkZWQuICBUT0RPOiB0aGlzIGlzIHVnbHksIHJlZmFjdG9yXG5cdFx0XHRcdGNsYXNzTGlzdE9iaiA9IGdlbkNsYXNzTGlzdChuR3JvdXApO1xuXHRcdFx0XHRjbGFzc0xpc3RPYmouYWRkLmFwcGx5KGNsYXNzTGlzdE9iaiwgY3NzQ2xhc3Nlc1RvQXJyYXkoZ3JvdXBEYXRhLmNzc0NsYXNzZXMgfHwgW10pKTtcblx0XHRcdFx0Ly8gQXBwZW5kIHRvIGdyb3VwcyBub2RlIGJ1dCBvbmx5IGlmIHRoZXJlIGFyZSByb3VuZHNcblx0XHRcdFx0aWYgKHJvdW5kcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0bkdyb3Vwcy5hcHBlbmRDaGlsZChuR3JvdXApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG5Sb3VuZHMgPSBuR3JvdXAucXVlcnlTZWxlY3RvcignLnpybV9ncm91cF9pdGVtcycpO1xuXG5cdFx0XHRcdC8vIEFkZCBlYWNoIHJvdW5kXG5cdFx0XHRcdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1zaGFkb3dlZC12YXJpYWJsZVxuXHRcdFx0XHRhcnJheUZvckVhY2gocm91bmRzLCBmdW5jdGlvbiAocm91bmQpIHtcblx0XHRcdFx0XHRuUm91bmQgPSB0Q2xvbmUoJ3pybV9ncm91cF9pdGVtJyk7XG5cblx0XHRcdFx0XHQvLyBBZGQgcGxheWVyIFwiY2FyZHNcIlxuXHRcdFx0XHRcdG5QbGF5ZXJzID0gblJvdW5kLnF1ZXJ5U2VsZWN0b3IoJy56cm1fZ3JvdXBfaXRlbV9jYXJkcycpO1xuXHRcdFx0XHRcdGFycmF5Rm9yRWFjaChyb3VuZC5wbGF5ZXJzLCBmdW5jdGlvbiAocGxheWVyKSB7XG5cdFx0XHRcdFx0XHR2YXIgblBsYXllciA9IHRDbG9uZSgnenJtX2dyb3VwX2l0ZW1fY2FyZCcpO1xuXHRcdFx0XHRcdFx0dmFyIG5JbWFnZSA9IG5QbGF5ZXIucXVlcnlTZWxlY3RvcignLnpybV9ncm91cF9pdGVtX2NhcmRfcGljdHVyZScpO1xuXHRcdFx0XHRcdFx0dmFyIGNsYXNzTGlzdCA9IGdlbkNsYXNzTGlzdChuSW1hZ2UpO1xuXHRcdFx0XHRcdFx0Y2xhc3NMaXN0LmFkZCgnenJtX2ltYWdlTm9uZScpO1xuXHRcdFx0XHRcdFx0aWYgKHBsYXllci5pbWdVUkwpIHtcblx0XHRcdFx0XHRcdFx0cHJlTG9hZEltYWdlKHBsYXllci5pbWdVUkwsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHRjbGFzc0xpc3QucmVtb3ZlKCd6cm1faW1hZ2VMb2FkaW5nJyk7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU2V0IHRoZSBub3cgbG9hZGVkL2NhY2hlZCBiYWNrZ3JvdW5kIGltYWdlXG5cdFx0XHRcdFx0XHRcdFx0bkltYWdlLnN0eWxlWydiYWNrZ3JvdW5kLWltYWdlJ10gPSAndXJsKFxcJycgKyBwbGF5ZXIuaW1nVVJMICsgJ1xcJyknO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0Y2xhc3NMaXN0LnJlbW92ZSgnenJtX2ltYWdlTm9uZScpO1xuXHRcdFx0XHRcdFx0XHRjbGFzc0xpc3QuYWRkKCd6cm1faW1hZ2VMb2FkaW5nJyk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIENyZWF0ZSBwbGF5ZXIgbGFiZWxzXG5cdFx0XHRcdFx0XHQvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG5cdFx0XHRcdFx0XHQvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tc2hhZG93ZWQtdmFyaWFibGVcblx0XHRcdFx0XHRcdGNyZWF0ZVNlcXVlbnRpYWxOb2RlcyhuUGxheWVyLnF1ZXJ5U2VsZWN0b3IoJy56cm1fZ3JvdXBfaXRlbV9jYXJkX2xhYmVsJyksIHBsYXllci5sYWJlbHMsIGZ1bmN0aW9uIChub2RlLCBsYWJlbCwgY2xhc3NMaXN0KSB7XG5cdFx0XHRcdFx0XHRcdHZhciBjc3NDbGFzc2VzID0gbGFiZWwuY3NzQ2xhc3NlcyB8fCBbXTtcblxuXHRcdFx0XHRcdFx0XHRpZiAodHlwZW9mIGNzc0NsYXNzZXMgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y3NzQ2xhc3NlcyA9IGNzc0NsYXNzZXMuc3BsaXQoJyAnKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRjbGFzc0xpc3QuYWRkLmFwcGx5KGNsYXNzTGlzdCwgY3NzQ2xhc3Nlcyk7XG5cdFx0XHRcdFx0XHRcdGlmIChsYWJlbC5sYWJlbCkge1xuXHRcdFx0XHRcdFx0XHRcdG5vZGUuaW5uZXJIVE1MID0gbGFiZWwubGFiZWw7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRuUGxheWVycy5hcHBlbmRDaGlsZChuUGxheWVyKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvLyBDcmVhdGUgcm91bmQgbGFiZWxzXG5cdFx0XHRcdFx0Y3JlYXRlU2VxdWVudGlhbE5vZGVzKG5Sb3VuZC5xdWVyeVNlbGVjdG9yKCcuenJtX2dyb3VwX2l0ZW1fbGFiZWwnKSwgcm91bmQubGFiZWxzKTtcblx0XHRcdFx0XHQvLyBDcmVhdGUgcm91bmQgQ1RBc1xuXHRcdFx0XHRcdGNyZWF0ZVNlcXVlbnRpYWxOb2RlcyhuUm91bmQucXVlcnlTZWxlY3RvcignLnpybV9ncm91cF9pdGVtX2N0YScpLCByb3VuZC5DVEFzLCBmdW5jdGlvbiAobm9kZSwgY3RhLCBjbGFzc0xpc3QpIHtcblx0XHRcdFx0XHRcdHZhciBjc3NDbGFzc2VzID0gY3RhLmNzc0NsYXNzZXMgfHwgW107XG5cdFx0XHRcdFx0XHR2YXIgY3RhRGF0YTogYW55ID0ge1xuXHRcdFx0XHRcdFx0XHRkYXRhOiBjdGEuZGF0YVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgY3RhLmNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRcdGN0YURhdGEuY2FsbGJhY2sgPSBjdGEuY2FsbGJhY2s7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGN0YXMucHVzaChjdGFEYXRhKTtcblx0XHRcdFx0XHRcdG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLWN0YUluZGV4JywgKGN0YXMubGVuZ3RoIC0gMSkpO1xuXG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIGNzc0NsYXNzZXMgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdFx0XHRcdGNzc0NsYXNzZXMgPSBjc3NDbGFzc2VzLnNwbGl0KCcgJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoY3NzQ2xhc3Nlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdGNsYXNzTGlzdC5hZGQuYXBwbHkoY2xhc3NMaXN0LCBjc3NDbGFzc2VzKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChjdGEubGFiZWwpIHtcblx0XHRcdFx0XHRcdFx0bm9kZS5pbm5lckhUTUwgPSBjdGEubGFiZWw7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0blJvdW5kcy5hcHBlbmRDaGlsZChuUm91bmQpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0Lypcblx0XHRcdC8vIFNob3VsZCBub3QgYmUgbmVlZGVkLCAuaW5uZXJIVE1MID0gJycgYmVsb3cgc2hvbGQgZG8gaXRcblx0XHRcdC8vIFRoaXMgaXMganVzdCBBTk9USEVSIGhhY2sgdG8gdHJ5IHRvIGRlY3JlYXNlIHRoZSBsaWtlbHlob29kIG9mIHRoZSBpT1MgT09NIGlzc3VlIGhhcHBlbmluZ1xuXHRcdFx0aWYgKHBhcmVudE5vZGUuaGFzQ2hpbGROb2RlcygpKSB7XG5cdFx0XHRcdHJlY3Vyc2l2ZU5vZGVSZW1vdmUocGFyZW50Tm9kZS5sYXN0Q2hpbGQpO1xuXHRcdFx0fVxuXHRcdFx0Ki9cblx0XHRcdHBhcmVudE5vZGUuaW5uZXJIVE1MID0gJyc7ICAgICAvLyBXaXBlIG91dCBleGlzdGluZyBjb250ZW50XG5cdFx0XHRwYXJlbnROb2RlLmFwcGVuZENoaWxkKG5NYWluKTsgLy8gQWRkIG5ldyBjb250ZW50XG5cblx0XHRcdEV2ZW50LmZpcmUoRXZlbnRzLkNPTlRFTlRfQ0hBTkdFLCBuTWFpbik7XG5cblx0XHRcdC8vIE1ha2Ugc3VyZSBDVEEgY2xpY2tzIG9ubHkgaGFwcGVuIG9uIGNsaWNrc1xuXHRcdFx0bk1haW4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdG91Y2hTdGFydEhhbmRsZXIpO1xuXHRcdFx0bk1haW4uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRvdWNoU3RhcnRIYW5kbGVyKTtcblx0XHRcdG5NYWluLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRvdWNoTW92ZUhhbmRsZXIsIGZhbHNlKTtcblx0XHRcdG5NYWluLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRvdWNoTW92ZUhhbmRsZXIsIGZhbHNlKTtcblx0XHRcdG5NYWluLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0b3VjaEVuZEhhbmRsZXIsIGZhbHNlKTtcblx0XHRcdG5NYWluLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdG91Y2hFbmRIYW5kbGVyLCBmYWxzZSk7XG5cblx0XHRcdC8vIGRpc2FibGUgb3ZlcnNjcm9sbFxuXHRcdFx0bk1haW4uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dmFyIHRvcCA9IG5NYWluLnNjcm9sbFRvcDtcblx0XHRcdFx0dmFyIHRvdGFsU2Nyb2xsID0gbk1haW4uc2Nyb2xsSGVpZ2h0O1xuXHRcdFx0XHR2YXIgY3VycmVudFNjcm9sbCA9IHRvcCArIG5NYWluLm9mZnNldEhlaWdodDtcblx0XHRcdFx0aWYgKHRvcCA9PT0gMCkge1xuXHRcdFx0XHRcdG5NYWluLnNjcm9sbFRvcCA9IDE7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY3VycmVudFNjcm9sbCA9PT0gdG90YWxTY3JvbGwpIHtcblx0XHRcdFx0XHRuTWFpbi5zY3JvbGxUb3AgPSB0b3AgLSAxO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0cmVmcmVzaGluZyA9IGZhbHNlO1xuXHRcdFx0cmVzb2x2ZSgpO1xuXHRcdH0sIHJlamVjdCk7XG5cdH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0VGVtcGxhdGVzKHRlbXBsYXRlRGF0YSwgdGVtcGxhdGVUeXBlKSB7XG5cdHZhciBvbGRUZW1wbGF0ZXNOb2RlID0gdGVtcGxhdGVzTm9kZTtcblx0dGVtcGxhdGVUeXBlID0gdGVtcGxhdGVUeXBlIHx8IFRFTVBMQVRFX1RZUEVTLkhUTUxfU1RSSU5HO1xuXG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0ZnVuY3Rpb24gY2hlY2tGb3JDaGFuZ2VzKCkge1xuXHRcdFx0aWYgKHRlbXBsYXRlc05vZGUgIT09IG9sZFRlbXBsYXRlc05vZGUpIHtcblx0XHRcdFx0RXZlbnQuZmlyZShFdmVudHMuVEVNUExBVEVTX0NIQU5HRSwgdGVtcGxhdGVzTm9kZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZnJvbVN0cmluZyhzdHIpIHtcblx0XHRcdHZhciBub2RlOiBhbnkgPSBkb2MuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblx0XHRcdG5vZGUuaW5uZXJIVE1MID0gc3RyO1xuXHRcdFx0Ly8gTm90ZTogZm9yIHRlbXBsYXRlIGVsZW1lbnRzIHlvdSBuZWVkIHRoZSAuY29udGVudCBkb2N1bWVudEZyYWdtZW50XG5cdFx0XHRpZiAoKG5vZGUuY29udGVudCB8fCBub2RlKS5jaGlsZEVsZW1lbnRDb3VudCA+IDAgPT09IGZhbHNlKSB7XG5cdFx0XHRcdG5vZGUgPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBub2RlO1xuXHRcdH1cblxuXHRcdHN3aXRjaCAodGVtcGxhdGVUeXBlKSB7XG5cdFx0XHRjYXNlIFRFTVBMQVRFX1RZUEVTLkRPTV9OT0RFOlxuXHRcdFx0XHR0ZW1wbGF0ZXNOb2RlID0gdGVtcGxhdGVEYXRhO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgVEVNUExBVEVfVFlQRVMuRE9NX05PREVfSUQ6XG5cdFx0XHRcdHRlbXBsYXRlc05vZGUgPSBkb2MuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGVEYXRhKTtcblx0XHRcdFx0aWYgKCF0ZW1wbGF0ZXNOb2RlKSB7XG5cdFx0XHRcdFx0Ly8gTm90IGZvdW5kLCByb2xsIGJhY2tcblx0XHRcdFx0XHR0ZW1wbGF0ZXNOb2RlID0gb2xkVGVtcGxhdGVzTm9kZTtcblx0XHRcdFx0XHRyZWplY3QoKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFRFTVBMQVRFX1RZUEVTLkhUTUxfU1RSSU5HOlxuXHRcdFx0XHR0ZW1wbGF0ZXNOb2RlID0gZnJvbVN0cmluZyh0ZW1wbGF0ZURhdGEpO1xuXHRcdFx0XHRpZiAoIXRlbXBsYXRlc05vZGUpIHtcblx0XHRcdFx0XHQvLyBCYWQgc3RyaW5nLCByb2xsIGJhY2tcblx0XHRcdFx0XHR0ZW1wbGF0ZXNOb2RlID0gb2xkVGVtcGxhdGVzTm9kZTtcblx0XHRcdFx0XHRyZWplY3QoKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFRFTVBMQVRFX1RZUEVTLkhUTUxfVVJMOlxuXHRcdFx0XHRaeW5nYU5ldC5hcGkoJ0dFVCcsIHRlbXBsYXRlRGF0YSwgeyBub0F1dGg6IHRydWUsIG5vQVBJOiB0cnVlIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcblx0XHRcdFx0XHR2YXIgeGhyID0gcmVzdWx0cy54aHI7XG5cdFx0XHRcdFx0dmFyIGJvZHkgPSByZXN1bHRzLmJvZHk7XG5cdFx0XHRcdFx0aWYgKCh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB8fCB4aHIuc3RhdHVzID09PSAzMDQpIHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlc05vZGUgPSBmcm9tU3RyaW5nKGJvZHkpO1xuXHRcdFx0XHRcdFx0aWYgKCF0ZW1wbGF0ZXNOb2RlKSB7XG5cdFx0XHRcdFx0XHRcdC8vIEJhZCBzdHJpbmcsIHJvbGwgYmFja1xuXHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZXNOb2RlID0gb2xkVGVtcGxhdGVzTm9kZTtcblx0XHRcdFx0XHRcdFx0cmVqZWN0KCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFN1Y2Nlc3Ncblx0XHRcdFx0XHRcdFx0Y2hlY2tGb3JDaGFuZ2VzKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlamVjdChyZXN1bHRzKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIHJlamVjdCk7XG5cdFx0XHRcdHJldHVybjsgLy8gaW1wb3J0YW50XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRyZWplY3QoKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjaGVja0ZvckNoYW5nZXMoKTtcblx0fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRQYXJlbnQobm9kZU9ySWQpIHtcblx0dmFyIG9sZFBhcmVudE5vZGUgPSBwYXJlbnROb2RlO1xuXHRpZiAodHlwZW9mIG5vZGVPcklkID09PSAnb2JqZWN0JyAmJiBub2RlT3JJZC5ub2RlVHlwZSA+IDApIHtcblx0XHRwYXJlbnROb2RlID0gbm9kZU9ySWQ7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG5vZGVPcklkID09PSAnc3RyaW5nJykge1xuXHRcdHBhcmVudE5vZGUgPSBkb2MuZ2V0RWxlbWVudEJ5SWQobm9kZU9ySWQpO1xuXHRcdGlmICghcGFyZW50Tm9kZSkge1xuXHRcdFx0cGFyZW50Tm9kZSA9IG9sZFBhcmVudE5vZGU7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGVsZW1lbnQgd2l0aCBpZCBcIicgKyBub2RlT3JJZCArICdcIicpO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdzZXRQYXJlbnQgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIFwic3RyaW5nXCIgKGVsZW1lbnQgaWQpIG9yIGFuIGFjdHVhbCBET00gbm9kZScpO1xuXHR9XG5cdGlmIChwYXJlbnROb2RlICE9PSBvbGRQYXJlbnROb2RlKSB7XG5cdFx0RXZlbnQuZmlyZShFdmVudHMuUEFSRU5UX05PREVfQ0hBTkdFLCBwYXJlbnROb2RlKTtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0Q1NTKGNzc09iamVjdCkge1xuXHR2YXIgY3NzU3RyID0gSlNPTi5zdHJpbmdpZnkoY3NzKTtcblx0dmFyIG5ld0Nzc1N0cjtcblx0aWYgKHR5cGVvZiBjc3NPYmplY3QgIT09ICdvYmplY3QnKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignc2V0Q1NTIHJlcXVpcmVzIGFuIG9iamVjdCcpO1xuXHR9XG5cdG5ld0Nzc1N0ciA9IEpTT04uc3RyaW5naWZ5KGNzc09iamVjdCk7XG5cdGlmIChjc3NTdHIgIT09IG5ld0Nzc1N0cikge1xuXHRcdGNzcyA9IEpTT04ucGFyc2UobmV3Q3NzU3RyKTsgLy8gc3RyaW5naWZ5IC0+IHBhcnNlIGRvZXMgYSBkZWVwIGNsb25lLiAgTm93IGl0J3MgZnVsbHkgb3Vyc1xuXHRcdEV2ZW50LmZpcmUoRXZlbnRzLkNTU19DSEFOR0UsIGNzcyk7XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFJlZnJlc2hIYW5kbGVyKGhhbmRsZXIpIHtcblx0RXZlbnQuZmlyZShldmVudFJlZnJlc2hIYW5kbGVyLCBoYW5kbGVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZnJlc2godXNlckluaXRpYXRlZCkge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdC8vIFRPRE86IGFkZCByZWZyZXNoIGNsYXNzXG5cdFx0RXZlbnQubGFzdChldmVudFJlZnJlc2hIYW5kbGVyKSAgICAgICAgLy8gR2V0IHRoZSBsYXN0IHJlZ2lzdGVyZWQgcmVmcmVzaCBoYW5kbGVyIG9yIHdhaXQgZm9yIGl0IHRvIGJlIHJlZ2lzdGVyZWRcblx0XHRcdC50aGVuKGZ1bmN0aW9uIChkYXRhUmVmcmVzaDogYW55KSB7XG5cdFx0XHRcdHJldHVybiBkYXRhUmVmcmVzaCh1c2VySW5pdGlhdGVkKTsgICAvLyBDYWxsIHRoZSByZWZyZXNoIGRhdGEgZnVuY3Rpb25cblx0XHRcdH0pXG5cdFx0XHQudGhlbihyZWZyZXNoVUkpICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VuZCB0aGUgZGF0YSB0byB0aCByZWZyZXNoVUkgZnVuY3Rpb25cblx0XHRcdC50aGVuKGZ1bmN0aW9uICgpIHsgICAgICAgICAgICAgICAgICAgICAvLyBGaW5hbCBzdWNjZXNzXG5cdFx0XHRcdC8vIFRPRE86IHJlbW92ZSByZWZyZXNoIGNsYXNzXG5cdFx0XHRcdHJlc29sdmUoKTtcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7ICAgICAgICAgICAgICAgLy8gQW4gZXJyb3Igb2NjdXJlZCBpbiBhbnkgb25lIG9mIHRoZSBwcmV2aW91cyBwcm9taXNlc1xuXHRcdFx0XHQvLyBUT0RPOiByZW1vdmUgcmVmcmVzaCBjbGFzc1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSk7XG5cdH0pO1xufVxuXG4vLyBDcmVhdGUgc3R5bGUgZWxlbWVudCBvbmNlIHRoZSBET00gaXMgcmVhZHlcbkV2ZW50Lm9uY2UoZXZlbnRET01SZWFkeSwgZnVuY3Rpb24gKCkge1xuXHR2YXIgaGVhZCA9IGRvYy5oZWFkIHx8IGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuXHR2YXIgc3R5bGVOb2RlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cdHN0eWxlTm9kZS50eXBlID0gJ3RleHQvY3NzJztcblx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZU5vZGUpO1xuXHRFdmVudC5maXJlKGV2ZW50Q1NTTm9kZSwgc3R5bGVOb2RlKTtcbn0sIHRydWUpO1xuXG4vLyByZXBsYWNlIENTUyBub2RlIGNvbnRlbnRzIGVhY2ggdGltZSBuZXcgQ1NTIEpTT04gYXBwZWFyc1xuRXZlbnQub24oRXZlbnRzLkNTU19DSEFOR0UsIGZ1bmN0aW9uIChuZXdDU1NPYmopIHtcblx0dmFyIG5ld0NTU1N0ciA9IFp5bmdhQ29yZS5wYXJzZUNTUyhuZXdDU1NPYmopO1xuXHRFdmVudC5sYXN0KGV2ZW50Q1NTTm9kZSwgZnVuY3Rpb24gKGNzc05vZGUpIHtcblx0XHRpZiAoY3NzTm9kZS5zdHlsZVNoZWV0KSB7XG5cdFx0XHQvLyBPbGRlciB2ZXJzaW9uIG9mIElFXG5cdFx0XHRjc3NOb2RlLnN0eWxlU2hlZXR0LmNzc1RleHQgPSBuZXdDU1NTdHI7XG5cdFx0fSBlbHNlIGlmICh0eXBlb2YgY3NzTm9kZS50ZXh0Q29udGVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdGNzc05vZGUudGV4dENvbnRlbnQgPSBuZXdDU1NTdHI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNzc05vZGUuaW5uZXJUZXh0ID0gbmV3Q1NTU3RyO1xuXHRcdH1cblx0fSk7XG59KTtcblxuLy8gRG9tIG9wZXJhdGlvbnMgc2hvdWxkIG5vdCBoYXBwZW4gdW50aWwgdGhlIERPTSBpcyBhY3R1YWxseSByZWFkeS5cbmZ1bmN0aW9uIGNoZWNrRG9tUmR5KCkge1xuXHR2YXIgcmVhZHlTdGF0ZSA9IGRvYy5yZWFkeVN0YXRlO1xuXHRpZiAocmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJyB8fCByZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG5cdFx0Ly8gQW4gaW1hZ2Ugc3R1Y2sgbG9hZGluZywgZXZlbiBhIHRyYWNraW5nIHBpeGVsLCBjYW4gY2F1ZSByZWFkeVN0YXRlICdjb21wbGV0ZSdcblx0XHQvLyB0byBuZXZlciBmaXJlLiAgVGhpcyBpcyB3aHkgJ2ludGVyYWN0aXZlJyBpcyBnb29kIGVub3VnaFxuXHRcdGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgY2hlY2tEb21SZHkpO1xuXHRcdEV2ZW50LmZpcmUoZXZlbnRET01SZWFkeSwgdHJ1ZSk7XG5cdH1cbn1cbmRvYy5hZGRFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgY2hlY2tEb21SZHkpO1xuY2hlY2tEb21SZHkoKTtcbiIsIi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21tZW50LWZvcm1hdFxuLy8vPGFtZC1tb2R1bGUgbmFtZT1cIlp5bmdhUm91bmRzTWFuYWdlckNTU1wiLz5cbnZhciBkZWZhdWx0Q1NTID0ge1xuXHQnLnpybV9tYWluJzoge1xuXHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuXHRcdHRvcDogMCxcblx0XHRsZWZ0OiAwLFxuXHRcdHdpZHRoOiAnMTAwJScsXG5cdFx0aGVpZ2h0OiAnMTAwJScsXG5cdFx0J2ZvbnQtc2l6ZSc6ICcxMHB4Jyxcblx0XHRvdmVyZmxvdzogJ3Njcm9sbCcsXG5cdFx0J292ZXJmbG93LXgnOiAnaGlkZGVuJyxcblx0XHQnb3ZlcmZsb3cteSc6ICdzY3JvbGwnLFxuXHRcdCdiYWNrZ3JvdW5kLWNvbG9yJzogJyNGRkYnLFxuXHRcdCctd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZyc6ICd0b3VjaCdcblx0fSxcblx0Jy56cm1fbWFpbiA6Oi13ZWJraXQtc2Nyb2xsYmFyLCAuenJtX21haW46Oi13ZWJraXQtc2Nyb2xsYmFyJzoge1xuXHRcdGRpc3BsYXk6ICdub25lJyxcblx0fSxcblx0JyN6cm1fY2hvb3NlT3Bwb25lbnQnOiB7XG5cdFx0cG9zaXRpb246ICdmaXhlZCcsXG5cdFx0dG9wOiAnMC42ZW0nLFxuXHRcdGxlZnQ6ICc1MCUnLFxuXHRcdGhlaWdodDogJzIuNWVtJyxcblx0XHR3aWR0aDogJzkwJScsXG5cdFx0J2JvcmRlci1yYWRpdXMnOiAnMC43ZW0nLFxuXHRcdHRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKC01MCUsIDAsIDApJyxcblx0XHQnYmFja2dyb3VuZC1jb2xvcic6ICdyZ2IoMCwgMTE4LCAyNTUpJyxcblx0XHQnZm9udC1zaXplJzogJzRlbScsXG5cdFx0J2xpbmUtaGVpZ2h0JzogJzJlbScsXG5cdFx0J3RleHQtYWxpZ24nOiAnY2VudGVyJyxcblx0XHQnZm9udC13ZWlnaHQnOiAnYm9sZCcsXG5cdFx0Y29sb3I6ICcjRkZGJyxcblx0XHQnLW1vei1ib3gtc2hhZG93JzogJzAuM2VtIDAuM2VtIDAuNGVtIC0wLjFlbSByZ2JhKDAsMCwwLDAuNzUpJyxcblx0XHQnLXdlYmtpdC1ib3gtc2hhZG93JzogJzAuM2VtIDAuM2VtIDAuNGVtIC0wLjFlbSByZ2JhKDAsMCwwLDAuNzUpJyxcblx0XHQnYm94LXNoYWRvdyc6ICcwLjNlbSAwLjNlbSAwLjRlbSAtMC4xZW0gcmdiYSgwLDAsMCwwLjc1KScsXG5cdFx0J3otaW5kZXgnOiAyXG5cdH0sXG5cdCcjenJtX2Nob29zZU9wcG9uZW50OmFmdGVyJzoge1xuXHRcdGNvbnRlbnQ6ICdcIlwiJyxcblx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJyxcblx0XHQnei1pbmRleCc6IC0xLFxuXHRcdGhlaWdodDogJzc1JScsXG5cdFx0dG9wOiAnMCcsXG5cdFx0bGVmdDogJzAnLFxuXHRcdHJpZ2h0OiAnMCcsXG5cdFx0Ym90dG9tOiAnMS41ZW0nLFxuXHRcdCdib3JkZXItcmFkaXVzJzogJ2luaGVyaXQnLFxuXHRcdCdiYWNrZ3JvdW5kLWNvbG9yJzogJ3JnYigwLCAxMzEsIDI1NSknXG5cdH0sXG5cdCcuenJtX2dyb3VwOmZpcnN0LW9mLXR5cGUgPiAuenJtX2dyb3VwX25hbWUnOiB7XG5cdFx0J3BhZGRpbmctdG9wJzogJzVlbScsXG5cdFx0YmFja2dyb3VuZDogJyNlNmU2ZTYnXG5cdH0sXG5cdCcuenJtX2dyb3VwX25hbWUnOiB7XG5cdFx0YmFja2dyb3VuZDogW1xuXHRcdFx0JyNlNmU2ZTYnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2xkIGJyb3dzZXIgZmFsbGJhY2tcblx0XHRcdCctbW96LWxpbmVhci1ncmFkaWVudCh0b3AsICNjMGMwYzAgMCUsICNlNmU2ZTYgOCUsICNlNmU2ZTYgOTYlLCAjZTllOWU5IDEwMCUpJywgLy8gRkYzLjYtMTVcblx0XHRcdCctd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsICNjMGMwYzAgMCUsI2U2ZTZlNiA4JSwjZTZlNmU2IDk2JSwjZTllOWU5IDEwMCUpJywgLy8gQ2hyb21lMTAtMjUsU2FmYXJpNS4xLTYgKi9cblx0XHRcdCdsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjYzBjMGMwIDAlLCNlNmU2ZTYgOCUsI2U2ZTZlNiA5NiUsI2U5ZTllOSAxMDAlKScgICAgLy8gIFczQywgSUUxMCssIEZGMTYrLCBDaHJvbWUyNissIE9wZXJhMTIrLCBTYWZhcmk3KyAqL1xuXHRcdF0sXG5cdFx0d2lkdGg6ICcxMDAlJyxcblx0XHQnZm9udC1zaXplJzogJzNlbScsXG5cdFx0cGFkZGluZzogJzAuM2VtJyxcblx0XHQnZm9udC13ZWlnaHQnOiAnYm9sZCdcblx0fSxcblx0Jy56cm1fZ3JvdXBfaXRlbXMnOiB7XG5cdFx0J2JhY2tncm91bmQtY29sb3InOiAnI0ZGRicsXG5cdFx0d2lkdGg6ICcxMDAlJyxcblx0XHRvdmVyZmxvdzogJ3Njcm9sbCcsXG5cdFx0Ly8nb3ZlcmZsb3cteCc6ICdzY3JvbGwnLFxuXHRcdC8vJ292ZXJmbG93LXknOiAnaGlkZGVuJyxcblx0XHQnd2hpdGUtc3BhY2UnOiAnbm93cmFwJyxcblx0XHQnLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmcnOiAndG91Y2gnXG5cdH0sXG5cdCcuenJtX2dyb3VwX2l0ZW0nOiB7XG5cdFx0cG9zaXRpb246ICdyZWxhdGl2ZScsXG5cdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0d2lkdGg6ICc0MyUnLFxuXHRcdCdtYXJnaW4tdG9wJzogJzEuNSUnLFxuXHRcdCdtYXJnaW4tYm90dG9tJzogJzEuNSUnXG5cdH0sXG5cdCcuenJtX2dyb3VwX2l0ZW06Zmlyc3Qtb2YtdHlwZSc6IHtcblx0XHQnbWFyZ2luLWxlZnQnOiAnMS41JSdcblx0fSxcblx0Jy56cm1fZ3JvdXBfaXRlbTpsYXN0LW9mLXR5cGUnOiB7XG5cdFx0J21hcmdpbi1yaWdodCc6ICcxLjUlJ1xuXHR9LFxuXHQnLnpybV9ncm91cF9pdGVtOmJlZm9yZSc6IHsgLy8gRHVtbXkgZWxlbWVudCB0byBnZXQgMToxIGFzcGVjdCByYXRpb1xuXHRcdGNvbnRlbnQ6ICdcIlwiJyxcblx0XHR3aWR0aDogJzEwMCUnLFxuXHRcdCdwYWRkaW5nLXRvcCc6ICcxMDAlJyxcblx0XHRkaXNwbGF5OiAnYmxvY2snXG5cdH0sXG5cdCcuenJtX2dyb3VwLnpybV8yYWNyb3NzICAuenJtX2dyb3VwX2l0ZW0nOiB7IC8vIDIgYW5kIGEgYml0IHZpc2libGVcblx0XHR3aWR0aDogJzQzJSdcblx0fSxcblx0Jy56cm1fZ3JvdXAuenJtXzNhY3Jvc3MgIC56cm1fZ3JvdXBfaXRlbSc6IHsgLy8gMyBhbmQgYSBiaXQgdmlzaWJsZVxuXHRcdHdpZHRoOiAnMjglJyxcblx0XHQnZm9udC1zaXplJzogJzAuOGVtJ1xuXHR9LFxuXHQnLnpybV9ncm91cC56cm1fNGFjcm9zcyAgLnpybV9ncm91cF9pdGVtJzogeyAvLyA0IGFuZCBhIGJpdCB2aXNpYmxlXG5cdFx0d2lkdGg6ICcyMiUnLFxuXHRcdCdmb250LXNpemUnOiAnMC42ZW0nXG5cdH0sXG5cdCcuenJtX2dyb3VwX2l0ZW0gPiAuenJtX2dyb3VwX2l0ZW1fY29udGVudCc6IHsgLy8gQWN0dWFsIGNvbnRhaW5lclxuXHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuXHRcdHRvcDogJzIlJyxcblx0XHRsZWZ0OiAnMiUnLFxuXHRcdHJpZ2h0OiAnMiUnLFxuXHRcdGJvdHRvbTogJzIlJyxcblx0XHQnYm9yZGVyLXJhZGl1cyc6ICc1JScsXG5cdFx0b3ZlcmZsb3c6ICdoaWRkZW4nLFxuXHRcdGJvcmRlcjogJzAuMTVlbSBzb2xpZCByZ2JhKDAsMCwwLDAuNSknLFxuXHRcdCdib3gtc2l6aW5nJzogJ2JvcmRlci1ib3gnLFxuXHRcdC8qIGhhY2sgdG8gZml4IENocm9tZSAqL1xuXHRcdCctd2Via2l0LW1hc2staW1hZ2UnOiAndXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBSUFBQUNRZDFQZUFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBQTVKUkVGVWVOcGlZR0JnQUFnd0FBQUVBQUdiQStvSkFBQUFBRWxGVGtTdVFtQ0MpJ1xuXHR9LFxuXHQnLnpybV9ncm91cF9pdGVtX2xhYmVsJzoge1xuXHRcdGRpc3BsYXk6ICdub25lJyxcblx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJyxcblx0XHR0b3A6IDAsXG5cdFx0bGVmdDogMCxcblx0XHRyaWdodDogMCxcblx0XHQnZm9udC1zaXplJzogJzMuNWVtJyxcblx0XHRjb2xvcjogJyNGRkYnLFxuXHRcdCdiYWNrZ3JvdW5kLWNvbG9yJzogJ3JnYmEoMCwwLDAsMC41KScsXG5cdFx0aGVpZ2h0OiAnMmVtJyxcblx0XHQnbGluZS1oZWlnaHQnOiAnMmVtJyxcblx0XHQndGV4dC1hbGlnbic6ICdyaWdodCcsXG5cdFx0J3BhZGRpbmctcmlnaHQnOiAnMC41ZW0nLFxuXHRcdCdmb250LXdlaWdodCc6IDYwMCxcblx0XHQndGV4dC1vdmVyZmxvdyc6ICdlbGxpcHNpcydcblx0fSxcblx0Jy56cm1fZ3JvdXBfaXRlbV9sYWJlbC56cm1fMSc6IHtcblx0XHRkaXNwbGF5OiAnYmxvY2snXG5cdH0sXG5cdCcuenJtX2dyb3VwX2l0ZW1fY3RhJzoge1xuXHRcdGRpc3BsYXk6ICdub25lJyxcblx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJyxcblx0XHRyaWdodDogJzMlJyxcblx0XHRib3R0b206ICczJScsXG5cdFx0J2ZvbnQtc2l6ZSc6ICczZW0nLFxuXHRcdGNvbG9yOiAnI0ZGRicsXG5cdFx0J2JhY2tncm91bmQtY29sb3InOiAnI0ZGRicsXG5cdFx0aGVpZ2h0OiAnMi41ZW0nLFxuXHRcdCdsaW5lLWhlaWdodCc6ICcyLjVlbScsXG5cdFx0J3RleHQtYWxpZ24nOiAnY2VudGVyJyxcblx0XHQnZm9udC13ZWlnaHQnOiA2MDAsXG5cdFx0J2JvcmRlci1yYWRpdXMnOiAnMC42ZW0nLFxuXHRcdCdwYWRkaW5nLXJpZ2h0JzogJzFlbScsXG5cdFx0J3BhZGRpbmctbGVmdCc6ICcxZW0nLFxuXHRcdCd6LWluZGV4JzogMCxcblx0XHQnYm94LXNoYWRvdyc6ICcwLjJlbSAwLjJlbSAwLjNlbSAtMC4xZW0gcmdiYSgwLDAsMCwwLjg1KSdcblx0fSxcblx0Jy56cm1fZ3JvdXBfaXRlbV9jdGEuenJtXzEnOiB7XG5cdFx0ZGlzcGxheTogJ2Jsb2NrJ1xuXHR9LFxuXHQnLnpybV9ncm91cF9pdGVtX2N0YS56cm1fMic6IHtcblx0XHRkaXNwbGF5OiAnYmxvY2snXG5cdH0sXG5cdCcuenJtX2dyb3VwX2l0ZW1fY3RhOmJlZm9yZSc6IHtcblx0XHRjb250ZW50OiAnXCJcIicsXG5cdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsXG5cdFx0dG9wOiAnMC4yNWVtJyxcblx0XHRsZWZ0OiAnMC4yNWVtJyxcblx0XHRyaWdodDogJzAuM2VtJyxcblx0XHRib3R0b206ICcwLjNlbScsXG5cdFx0J2JhY2tncm91bmQtY29sb3InOiAncmVkJyxcblx0XHQnYm9yZGVyLXJhZGl1cyc6ICcwLjRlbScsXG5cdFx0J3otaW5kZXgnOiAnLTEnLFxuXHRcdCdib3gtc2hhZG93JzogJzAuMmVtIDAuMmVtIDAuM2VtIC0wLjFlbSByZ2JhKDAsMCwwLDAuNCknXG5cdH0sXG5cdCcuenJtX2dyb3VwX2l0ZW1fY3RhLnpybV9ncmVlbkNUQTpiZWZvcmUnOiB7XG5cdFx0J2JhY2tncm91bmQtY29sb3InOiAncmdiKDEzMCwgMjEzLCA3OSknXG5cdH0sXG5cdCcuenJtX2dyb3VwX2l0ZW1fY3RhLnpybV9ibHVlQ1RBOmJlZm9yZSc6IHtcblx0XHQnYmFja2dyb3VuZC1jb2xvcic6ICdyZ2IoMzIsIDg5LCAxOTUpJ1xuXHR9LFxuXHQnLnpybV9ncm91cF9pdGVtX2N0YS56cm1fb3JhbmdlQ1RBJzoge1xuXHRcdCdiYWNrZ3JvdW5kLWNvbG9yJzogJ3JnYmEoMCwwLDAsMC43KScsXG5cdFx0aGVpZ2h0OiAnMmVtJyxcblx0XHQnbGluZS1oZWlnaHQnOiAnMmVtJyxcblx0XHRjb2xvcjogJ3JnYigyNTUsIDE3NSwgMjgpJyxcblx0XHQncGFkZGluZy1sZWZ0JzogJzAuNWVtJyxcblx0XHQncGFkZGluZy1yaWdodCc6ICcwLjVlbScsXG5cdFx0cmlnaHQ6ICc0JScsXG5cdFx0Ym90dG9tOiAnNCUnXG5cdH0sXG5cdCcuenJtX2dyb3VwX2l0ZW1fY3RhLnpybV9vcmFuZ2VDVEE6YmVmb3JlLCAuenJtX2dyb3VwX2l0ZW1fY3RhLnpybV9jbGlja2FibGVOb0NUQTpiZWZvcmUnOiB7XG5cdFx0ZGlzcGxheTogJ25vbmUnXG5cdH0sXG5cdCcuenJtX2dyb3VwX2l0ZW1fY3RhLnpybV9jbGlja2FibGVOb0NUQSc6IHtcblx0XHQnYmFja2dyb3VuZC1jb2xvcic6ICdyZ2JhKDAsMCwwLDApJyxcblx0XHR0b3A6IDAsXG5cdFx0bGVmdDogMCxcblx0XHRyaWdodDogMCxcblx0XHRib3R0b206IDAsXG5cdFx0aGVpZ2h0OiAnMTAwJScsXG5cdFx0d2lkdGg6ICcxMDAlJyxcblx0XHRwYWRkaW5nOiAwLFxuXHRcdG1hcmdpbjogMCxcblx0XHQnYm94LXNoYWRvdyc6ICdub25lJyxcblx0XHRkaXNwbGF5OiAnYmxvY2snXG5cdH0sXG5cdCcuenJtX2ZyaWVuZHNQbGF5aW5nIC56cm1fZ3JvdXBfaXRlbV9jdGE6YmVmb3JlJzoge1xuXHRcdGRpc3BsYXk6ICdub25lJyxcblx0fSxcblx0Jy56cm1fZnJpZW5kc1BsYXlpbmcgLnpybV9ncm91cF9pdGVtX2NvbnRlbnQnOiB7XG5cdFx0Ym9yZGVyOiAnbm9uZScsXG5cdFx0dG9wOiAwLFxuXHRcdGxlZnQ6IDAsXG5cdFx0cmlnaHQ6IDAsXG5cdFx0Ym90dG9tOiAwXG5cdH0sXG5cdCcuenJtX2ZyaWVuZHNQbGF5aW5nIC56cm1fZ3JvdXBfaXRlbV9jYXJkX3BpY3R1cmUnOiB7XG5cdFx0dG9wOiAnNSUnLFxuXHRcdGxlZnQ6ICcxNSUnLFxuXHRcdHJpZ2h0OiAnMTUlJyxcblx0XHRib3R0b206ICcyNSUnLFxuXHRcdCdib3JkZXItcmFkaXVzJzogJzUwJSdcblx0fSxcblx0Jy56cm1fZnJpZW5kc1BsYXlpbmcgLnpybV9ncm91cF9pdGVtX2NhcmRfbGFiZWwnOiB7XG5cdFx0Ym90dG9tOiAwLFxuXHRcdGxlZnQ6IDAsXG5cdFx0cmlnaHQ6IDAsXG5cdFx0d2lkdGg6ICcxMDAlJyxcblx0XHRwYWRkaW5nOiAwLFxuXHRcdG1hcmdpbjogMCxcblx0XHQnZm9udC1zaXplJzogJzVlbScsXG5cdFx0J2hlaWdodCc6ICcxLjVlbScsXG5cdFx0J2xpbmUtaGVpZ2h0JzogJzEuNWVtJyxcblx0XHQndGV4dC1hbGlnbic6ICdjZW50ZXInLFxuXHRcdGNvbG9yOiAnIzAwMCcsXG5cdFx0J3RleHQtc2hhZG93JzogJ2luaXRpYWwnLFxuXHRcdCdmb250LXdlaWdodCc6IDQwMFxuXHR9LFxuXHQnLnpybV9ncm91cF9pdGVtX2NhcmRzJzoge1xuXHRcdHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuXHRcdHdpZHRoOiAnMTAwJScsXG5cdFx0aGVpZ2h0OiAnMTAwJSdcblx0fSxcblx0Jy56cm1fZ3JvdXBfaXRlbV9jYXJkJzoge1xuXHRcdHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuXHRcdHdpZHRoOiAnMTAwJScsXG5cdFx0aGVpZ2h0OiAnMTAwJSdcblx0fSxcblx0Jy56cm1fZ3JvdXBfaXRlbV9jYXJkX2xhYmVsJzoge1xuXHRcdGRpc3BsYXk6ICdub25lJyxcblx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJyxcblx0XHRsZWZ0OiAnMyUnLFxuXHRcdGJvdHRvbTogJzMlJyxcblx0XHQnZm9udC1zaXplJzogJzRlbScsXG5cdFx0Y29sb3I6ICcjRkZGJyxcblx0XHRoZWlnaHQ6ICcyZW0nLFxuXHRcdHdpZHRoOiAnNTUlJyxcblx0XHQnbGluZS1oZWlnaHQnOiAnMmVtJyxcblx0XHQndGV4dC1hbGlnbic6ICdsZWZ0Jyxcblx0XHQnZm9udC13ZWlnaHQnOiA2MDAsXG5cdFx0J3BhZGRpbmctbGVmdCc6ICcwLjVlbScsXG5cdFx0Ly8nLXdlYmtpdC10ZXh0LXN0cm9rZSc6ICcxcHggYmxhY2snLFxuXHRcdCd0ZXh0LXNoYWRvdyc6ICcycHggMnB4IDAgIzAwMCwgLTFweCAtMXB4IDAgIzAwMCwgIDFweCAtMXB4IDAgIzAwMCwgLTFweCAxcHggMCAjMDAwLCAxcHggMXB4IDAgIzAwMCcsXG5cdFx0b3ZlcmZsb3c6ICdoaWRkZW4nLFxuXHRcdCd3aGl0ZS1zcGFjZSc6ICdub3dyYXAnLFxuXHRcdCd0ZXh0LW92ZXJmbG93JzogJ2VsbGlwc2lzJ1xuXHR9LFxuXHQnLnpybV9ncm91cF9pdGVtX2NhcmRfbGFiZWwuenJtXzEnOiB7XG5cdFx0ZGlzcGxheTogJ2Jsb2NrJ1xuXHR9LFxuXHQnLnpybV9ncm91cF9pdGVtX2NhcmRfcGljdHVyZSc6IHtcblx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJyxcblx0XHR0b3A6IDAsXG5cdFx0bGVmdDogMCxcblx0XHRyaWdodDogMCxcblx0XHRib3R0b206IDAsXG5cdFx0J2JhY2tncm91bmQtcmVwZWF0JzogJ25vLXJlcGVhdCcsXG5cdFx0J2JhY2tncm91bmQtc2l6ZSc6ICdjb3Zlcidcblx0fSxcblx0Jy56cm1faW1hZ2VOb25lJzoge1xuXHRcdCdiYWNrZ3JvdW5kLWltYWdlJzogJ3VybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9XFwnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXCcgd2lkdGg9XFwnNjMycHhcXCcgaGVpZ2h0PVxcJzYzMnB4XFwnJTNFJTNDcGF0aCBmaWxsPVxcJyUyMzlEQzNDNlxcJyBkPVxcJ00wLDBMNjMyLDBMNjMyLDYzMkwwLDYzMkwwLDBcXCcvJTNFJTNDZyBmaWxsPVxcJyUyM0ZGRkZGRlxcJyUzRSUzQ3BhdGggZD1cXCdNNDAwLjgsNDUzLjVIMjMyLjJjLTcxLjMsMC0xMjkuNyw1OC40LTEyOS43LDEyOS43djQ4YzAsMC4zLDAuMywwLjYsMC42LDAuNmg0MjYuOGMwLjMsMCwwLjYtMC4zLDAuNi0wLjZ2LTQ4QzUzMC41LDUxMS45LDQ3Mi4yLDQ1My41LDQwMC44LDQ1My41XFwnLyUzRSUzQ3BhdGggZD1cXCdNNDIzLjUsODEuMWwtMTA3LDE1LjNsLTEwNy0xNS4zYzAsMC0zNS43LDAtMzUuNywxNy44YzAsMTcuOCwzNS43LDE3LjgsMzUuNywxNy44bDEwNy0xNS4zbDEwNywxNS4zIGMwLDAsMzUuNywwLDM1LjctMTcuOEM0NTkuMiw4MS4xLDQyMy41LDgxLjEsNDIzLjUsODEuMVxcJy8lM0UlM0NwYXRoIGQ9XFwnTTMyNS40LDE2NGgtMTcuOFY5Mi43YzAtMTQuMywxNy44LTE0LjMsMTcuOCwwVjE2NHpcXCcvJTNFJTNDcGF0aCBkPVxcJ000NjQuNywzODIuM2MwLDM0LjUtMjcuOSw2Mi40LTYyLjQsNjIuNEgyMzAuN2MtMzQuNSwwLTYyLjQtMjcuOS02Mi40LTYyLjRWMjEwLjdjMC0zNC41LDI3LjktNjIuNCw2Mi40LTYyLjRoMTcxLjZjMzQuNSwwLDYyLjQsMjcuOSw2Mi40LDYyLjRWMzgyLjN6XFwnLyUzRSUzQy9nJTNFJTNDZyBmaWxsPVxcJyUyMzlEQzNDNlxcJyUzRSUzQ3BhdGggZD1cXCdNMzkyLjQsMjg4LjJjMCwxMS41LTkuMywyMC45LTIwLjksMjAuOXMtMjAuOS05LjMtMjAuOS0yMC45YzAtMTEuNSw5LjMtMjAuOSwyMC45LTIwLjlTMzkyLjQsMjc2LjcsMzkyLjQsMjg4LjJcXCcvJTNFJTNDcGF0aCBkPVxcJ00yODIuNCwyODguMmMwLDExLjUtOS4zLDIwLjktMjAuOSwyMC45Yy0xMS41LDAtMjAuOS05LjMtMjAuOS0yMC45YzAtMTEuNSw5LjMtMjAuOSwyMC45LTIwLjlDMjczLDI2Ny4zLDI4Mi40LDI3Ni43LDI4Mi40LDI4OC4yXFwnLyUzRSUzQ3BhdGggZD1cXCdNMjYzLDM0NC44YzAsMCwwLDM1LjcsNTMuNSwzNS43YzUzLjUsMCw1My41LTM1LjcsNTMuNS0zNS43XFwnLyUzRSUzQy9nJTNFJTNDL3N2ZyUzRVwiKSdcblx0fVxufTtcblxudmFyIG1pbldpZHRoID0gNDAwO1xudmFyIG1heFdpZHRoID0gMzAwMDtcbnZhciBmb250RmFjdG9yID0gMTA1O1xudmFyIHNjcmVlbldpZHRoO1xuZm9yIChzY3JlZW5XaWR0aCA9IG1heFdpZHRoOyBzY3JlZW5XaWR0aCA+PSBtaW5XaWR0aDsgc2NyZWVuV2lkdGggLT0gNTApIHtcblx0ZGVmYXVsdENTU1snQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAnICsgc2NyZWVuV2lkdGggKyAncHgpJ10gPSB7XG5cdFx0Jy56cm1fbWFpbic6IHtcblx0XHRcdCdmb250LXNpemUnOiAoTWF0aC5yb3VuZChzY3JlZW5XaWR0aCAvIGZvbnRGYWN0b3IgKiAxMDApIC8gMTAwKSArICdweCdcblx0XHR9XG5cdH07XG59XG4vLyBIYW5kbGUgZ2lhbnQgc2NyZWVuc1xuZGVmYXVsdENTU1snQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAnICsgbWF4V2lkdGggKyAncHgpJ10gPSB7XG5cdCcuenJtX21haW4nOiB7XG5cdFx0J2ZvbnQtc2l6ZSc6IChNYXRoLnJvdW5kKG1heFdpZHRoIC8gZm9udEZhY3RvciAqIDEwMCkgLyAxMDApICsgJ3B4J1xuXHR9XG59O1xuXG5leHBvcnQgPSBkZWZhdWx0Q1NTO1xuLypcbjxkaXYgaWQ9XCJ6cm1fbWFpblwiPlxuXHQ8ZGl2IGlkPVwienJtX2Nob29zZU9wcG9uZW50XCI+IENIT09TRSBBTiBPUFBPTkVOVCA8L2Rpdj5cblx0PGRpdiBpZD1cInpybV9ncm91cHNcIj48L2Rpdj5cbjwvZGl2PlxuPGRpdiBpZD1cInpybV9ncm91cFwiIGNsYXNzPVwienJtX2dyb3VwXCI+XG5cdDxkaXYgY2xhc3M9XCJ6cm1fZ3JvdXBfbmFtZVwiPjwvZGl2PlxuXHQ8ZGl2IGNsYXNzPVwienJtX2dyb3VwX2l0ZW1zXCI+PC9kaXY+XG48L2Rpdj5cbjxkaXYgaWQ9XCJ6cm1fZ3JvdXBfaXRlbVwiIGNsYXNzPVwienJtX2dyb3VwX2l0ZW1cIj5cblx0PGRpdiBjbGFzcz1cInpybV9ncm91cF9pdGVtX2NvbnRlbnRcIj5cblx0XHQ8ZGl2IGNsYXNzPVwienJtX2dyb3VwX2l0ZW1fY2FyZHNcIj48L2Rpdj5cblx0XHQ8ZGl2IGNsYXNzPVwienJtX2dyb3VwX2l0ZW1fbGFiZWxcIj48L2Rpdj5cblx0XHQ8ZGl2IGNsYXNzPVwienJtX2dyb3VwX2l0ZW1fY3RhXCI+PC9kaXY+XG5cdDwvZGl2PlxuPC9kaXY+XG48ZGl2IGlkPVwienJtX2dyb3VwX2l0ZW1fY2FyZFwiIGNsYXNzPVwienJtX2dyb3VwX2l0ZW1fY2FyZFwiPlxuXHQ8ZGl2IGNsYXNzPVwienJtX2dyb3VwX2l0ZW1fY2FyZF9waWN0dXJlXCI+PC9kaXY+XG5cdDxkaXYgY2xhc3M9XCJ6cm1fZ3JvdXBfaXRlbV9jYXJkX2xhYmVsXCI+PC9kaXY+XG48L2Rpdj5cbiAqL1xuXG4iLCIvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tbWVudC1mb3JtYXRcbi8vLzxhbWQtbW9kdWxlIG5hbWU9XCJaeW5nYVN0b3JhZ2VcIi8+XG5pbXBvcnQgKiBhcyBaeW5nYSBmcm9tICcuL1p5bmdhJztcbmltcG9ydCAqIGFzIFp5bmdhQWNjb3VudCBmcm9tICcuL1p5bmdhQWNjb3VudCc7XG5pbXBvcnQgKiBhcyBaeW5nYUNvcmUgZnJvbSAnLi9aeW5nYUNvcmUnO1xuaW1wb3J0ICogYXMgWnluZ2FJbnN0YW50IGZyb20gJy4vWnluZ2FJbnN0YW50JztcbmltcG9ydCAqIGFzIFp5bmdhTmV0IGZyb20gJy4vWnluZ2FOZXQnO1xuXG5jb25zdCBPYmplY3RBc3NpZ24gPSBaeW5nYUNvcmUuT2JqZWN0QXNzaWduO1xuXG4vLyB0b2RvOiBleHBvc2UgY2FzIGFuZCBjYWNoZWQgYmxvYiBkYXRhIHdpdGggbWV0aG9kcy5cbnZhciBjYWNoZWRVc2VyQmxvYnM6IHsgW2tleTogc3RyaW5nXTogU3RvcmFnZVBlckJsb2JLZXlSZXNwb25zZSB9ID0ge307XG5cbi8vIHRvZG86IGZpbGwgb3V0LlxuZXhwb3J0IGludGVyZmFjZSBTdG9yYWdlUmVzcG9uc2Uge1xuXHRzdGF0dXM6IG51bWJlcjsgLy8gaHR0cCBzdGF0dXMgY29kZSwgbm90IGFjdHVhbGx5IHBhcnQgb2YgcmV0dXJuIGJsb2IuXG5cdHN0YXR1c19jb2RlOiBudW1iZXI7IC8vIDAuMCBvciAxLjBcblx0ZXJyb3JfZGF0YTogYW55O1xuXHRkYXRhOiB7XG5cdFx0W2tleTogc3RyaW5nXTogU3RvcmFnZVBlckJsb2JLZXlSZXNwb25zZVxuXHR9O1xufVxuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6aW50ZXJmYWNlLW92ZXItdHlwZS1saXRlcmFsXG5leHBvcnQgdHlwZSBTdG9yYWdlUGVyQmxvYktleVJlc3BvbnNlID0geyBba2V5OiBzdHJpbmddOiBQZXJEYXR1bVJlc3BvbnNlIH07XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyRGF0dW1SZXNwb25zZSB7XG5cdHN0YXR1c19jb2RlOiBudW1iZXI7IC8vIDAuMCBvciAxLjBcblx0ZXJyb3JfZGF0YTogYW55O1xuXHRkYXRhOiBQZXJEYXR1bUdldFJlc3VsdDsgLy8gb3Igc29tZXRoaW5nIGVsc2U/XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyRGF0dW1HZXRSZXN1bHQge1xuXHRibG9iOiBzdHJpbmc7XG5cdGNhczogc3RyaW5nO1xuXHRnZXQ6ICdTdWNjZXNzJyB8ICdGYWlsJztcbn1cblxuLy8gdXNlIHdpdGggcmVzdWx0cyBvZjpcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbi8vIFByb21pc2UuYWxsKFtaeW5nYS5FdmVudC5sYXN0KFp5bmdhLkV2ZW50cy5BUFBfSUQpLCBaeW5nYS5FdmVudC5sYXN0KFp5bmdhQWNjb3VudC5FdmVudHMuQUNDT1VOVF9ERVRBSUxTKV0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuZXhwb3J0IGZ1bmN0aW9uIHp5bmdhU2VydmljZUNhbGw8UmVzcG9uc2VCb2R5PihhcHBJZDogbnVtYmVyLCBhY2NvdW50RGV0YWlsczogYW55LCBtZXRob2Q6IHN0cmluZywgcGF0aDogc3RyaW5nLCBhcmdzOiBhbnkpOiBQcm9taXNlPFp5bmdhTmV0LkFwaVJlc3VsdDxSZXNwb25zZUJvZHk+PiB7XG5cdHZhciBvcHRpb25zOiBaeW5nYU5ldC5BcGlPcHRpb25zID0ge307XG5cblx0bGV0IHF1ZXJ5U3RyaW5nID0gJyc7XG5cdGlmIChhcmdzKSB7XG5cdFx0aWYgKG1ldGhvZC50b0xvd2VyQ2FzZSgpICE9PSAnZ2V0Jykge1xuXHRcdFx0b3B0aW9ucy5ib2R5ID0gYXJncztcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gcGFzcyBvcHRpb25zIGFzIHF1ZXJ5IHN0cmluZy5cblx0XHRcdGxldCBxdWVyeVBhcmFtcyA9IFtdO1xuXHRcdFx0Zm9yIChsZXQgcGFyYW1OYW1lIGluIGFyZ3MpIHtcblx0XHRcdFx0dmFyIHBhcmFtVmFsdWUgPSBhcmdzW3BhcmFtTmFtZV07XG5cdFx0XHRcdC8vIGVuY29kZSBhbmQgb3B0aW9uYWxseSB0dXJuIGFycmF5cyBpbnRvIGNvbW1hIHNlcGFyYXRlZCBsaXN0XG5cdFx0XHRcdHBhcmFtVmFsdWUgPSBBcnJheS5pc0FycmF5KHBhcmFtVmFsdWUpID8gcGFyYW1WYWx1ZS5tYXAoZW5jb2RlVVJJKS5qb2luKCcsJykgOiBlbmNvZGVVUkkocGFyYW1WYWx1ZSk7XG5cdFx0XHRcdHF1ZXJ5UGFyYW1zLnB1c2gocGFyYW1OYW1lICsgJz0nICsgcGFyYW1WYWx1ZSk7XG5cdFx0XHR9XG5cblx0XHRcdHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbXMubGVuZ3RoID4gMCA/ICgnPycgKyBxdWVyeVBhcmFtcy5qb2luKCcmJykpIDogJyc7XG5cblx0XHR9XG5cdH1cblx0b3B0aW9ucy51c2VUb2tlbiA9IGFjY291bnREZXRhaWxzLnRva2VuO1xuXHRyZXR1cm4gWnluZ2FOZXQuYXBpPFJlc3BvbnNlQm9keT4obWV0aG9kLCBwYXRoICsgcXVlcnlTdHJpbmcsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIEBwYXJhbSBmb3JQbGF5ZXJJZCBzcGVjaWZpeSBmb3Igd2hpY2ggcGxheWVyIHRvIGxvYWQgdGhlIGJsb2IuIGVsc2UgaXQgd2lsbCB0YWtlIGxvZ2dlZC1pbiBjcmVkcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJCbG9iKGJsb2JOYW1lOiBzdHJpbmcsIGZvclBsYXllcklkPzogbnVtYmVyKSB7XG5cblx0cmV0dXJuIFByb21pc2UuYWxsKFtcblx0XHRaeW5nYS5FdmVudC5sYXN0KFp5bmdhLkV2ZW50cy5BUFBfSUQpLFxuXHRcdFp5bmdhQWNjb3VudC5FdmVudC5sYXN0KFp5bmdhQWNjb3VudC5FdmVudHMuQUNDT1VOVF9ERVRBSUxTKVxuXHRdKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG5cdFx0dmFyIGFwcElkID0gcmVzdWx0c1swXTtcblx0XHR2YXIgYWNjb3VudERldGFpbHMgPSByZXN1bHRzWzFdO1xuXHRcdGxldCBwbGF5ZXJJZCA9IGZvclBsYXllcklkIHx8IGFjY291bnREZXRhaWxzLnBsYXllcklkO1xuXHRcdGxldCBlbmRwb2ludCA9IGBodHRwczovL2FwaS56eW5nYS5jb20vc3RvcmFnZS92MS9hcHAvJHthcHBJZH0vYmxvYi8ke2Jsb2JOYW1lfS91c2VyLyR7cGxheWVySWR9YDtcblxuXHRcdHJldHVybiB6eW5nYVNlcnZpY2VDYWxsKGFwcElkLCBhY2NvdW50RGV0YWlscywgJ0dFVCcsIGVuZHBvaW50LCB7fSkudGhlbihjYWNoZVJlc3VsdFBhc3N0aHJvdWdoKS50aGVuKChyZXN1bHQpID0+IHtcblx0XHRcdGxldCBibG9iRGF0YSA9IHJlc3VsdC5ib2R5LmRhdGFbYmxvYk5hbWVdW3BsYXllcklkXTtcblx0XHRcdHJldHVybiBibG9iRGF0YS5kYXRhO1xuXHRcdH0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gY2FjaGVSZXN1bHRQYXNzdGhyb3VnaChyZXN1bHQ6IFp5bmdhTmV0LkFwaVJlc3VsdDxTdG9yYWdlUmVzcG9uc2U+KTogWnluZ2FOZXQuQXBpUmVzdWx0PFN0b3JhZ2VSZXNwb25zZT4ge1xuXHQvLyBhIGJpdCBsYXp5IGhlcmUsIGJ1dCB0aGlzIHdpbGwgY2FjaGUgdGhlIGJsb2IgZGF0YSBhbmQgdGhlIGNhcyBpbiBhIG5hdHVyYWwgZm9ybWF0LlxuXHRPYmplY3RBc3NpZ24oY2FjaGVkVXNlckJsb2JzLCByZXN1bHQuYm9keS5kYXRhKTtcblx0Lypmb3IgKHZhciBibG9iTmFtZSBpbiByZXN1bHQuYm9keS5kYXRhKSB7XG5cdFx0Zm9yICh2YXIgcGxheWVySWQgaW4gcmVzdWx0LmJvZHkuZGF0YVtibG9iTmFtZV0pIHtcblx0XHRcdGxldCBibG9iRGF0YSA9IHJlc3VsdC5ib2R5LmRhdGFbYmxvYk5hbWVdW3BsYXllcklkXTtcblx0XHRcdC8vPz8/XG5cdFx0fVxuXHR9Ki9cblx0cmV0dXJuIHJlc3VsdDtcbn1cbiIsIi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21tZW50LWZvcm1hdFxuLy8vPGFtZC1tb2R1bGUgbmFtZT1cIlp5bmdhV2FsbGV0XCIvPlxuaW1wb3J0ICogYXMgV2FsbGV0Q29udHJhY3RzIGZyb20gJ0FURy1UdXJucy9zcmMvY29udHJhY3RzL3dhbGxldCc7XG5pbXBvcnQgeyBjYW5Db2xsZWN0RHJpcCB9IGZyb20gJ0FURy1UdXJucy9zcmMvd2FsbGV0cG9ydGFibGUnO1xuaW1wb3J0ICogYXMgWnluZ2FBY2NvdW50IGZyb20gJy4vWnluZ2FBY2NvdW50JztcbmltcG9ydCAqIGFzIFp5bmdhQ29yZSBmcm9tICcuL1p5bmdhQ29yZSc7XG5pbXBvcnQgKiBhcyBaeW5nYU5ldCBmcm9tICcuL1p5bmdhTmV0JztcbmltcG9ydCB7IEV4cGVyaW1lbnRzRGF0YVJlc3BvbnNlIH0gZnJvbSAnLi9aeW5nYU9wdGltaXplJzsgLy8gb25seSBncmFiIHRoZSB0eXBlLlxuXG5jb25zdCBPYmplY3RBc3NpZ24gPSBaeW5nYUNvcmUuT2JqZWN0QXNzaWduO1xuXG4vLyB5ZXMsIHdlIGFjdHVhbGx5IGltcG9ydGVkIGEgZnVuY3Rpb24gZnJvbSB0aGUgYmFja2VuZCB0aGF0IHdpbGwgYmUgcnVuIG9uIHRoZSBjbGllbnQuXG4vLyBJcyB0aGlzIHRoZSBiZWdnaW5naW5nIG9mIHRoZSBhcG9jYWx5cHNlP1xuLy8gaW1wb3J0IHsgY2FuQ29sbGVjdERyaXAgfSBmcm9tICcuLi9saWIvQVRHLVR1cm5zL3NyYy93YWxsZXQnO1xuXG5leHBvcnQgdmFyIGNhY2hlZFdhbGxldDogV2FsbGV0Q29udHJhY3RzLldhbGxldEJhc2UgPSBudWxsO1xuZXhwb3J0IHZhciBjYWNoZWRTdGF0czogYW55ID0gbnVsbDtcbmV4cG9ydCB2YXIgbGFzdENhczogbnVtYmVyID0gMDtcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmludGVyZmFjZS1vdmVyLXR5cGUtbGl0ZXJhbFxuZXhwb3J0IHR5cGUgSXRlbUNhdGFsb2dUeXBlID0geyBba2V5OiBzdHJpbmddOiBXYWxsZXRDb250cmFjdHMuQ2F0YWxvZ0l0ZW1CYXNlIH07XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6aW50ZXJmYWNlLW92ZXItdHlwZS1saXRlcmFsXG5leHBvcnQgdHlwZSBEcmlwQ2F0YWxvZ1R5cGUgPSB7IFtrZXk6IHN0cmluZ106IFdhbGxldENvbnRyYWN0cy5EcmlwSXRlbUJhc2UgfTtcbmV4cG9ydCB0eXBlIFdhbGxldEJhc2UgPSBXYWxsZXRDb250cmFjdHMuV2FsbGV0QmFzZTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldChwYXJhbXM6IFdhbGxldENvbnRyYWN0cy5Db21tb25XYWxsZXRDbGllbnQpIHtcblx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuXHRyZXR1cm4gWnluZ2FBY2NvdW50LnVzZXJBdXRoQ2FsbDxXYWxsZXRDb250cmFjdHMuQ29tbW9uV2FsbGV0UmVzcG9uc2U+KCdHRVQnLCAnd2FsbGV0JywgcGFyYW1zKS50aGVuKGNhY2hlUmVzdWx0UGFzc3Rocm91Z2gpO1xufVxuXG4vKipcbiAqIFVzZSB0aGlzIHRvIG1vZGlmeSB5b3VyIHdhbGxldCBiYXNlZCBvbiB3YWxsZXQgZGVsdGFzIHJldHVybmVkIGJ5IHRoZSBBUElcbiAqIEBwYXJhbSB3YWxsZXRfcmVmXG4gKiBAcGFyYW0gZGVsdGFcbiAqL1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbmV4cG9ydCBmdW5jdGlvbiBhcHBseVdhbGxldERlbHRhKHdhbGxldF9yZWY6IFdhbGxldENvbnRyYWN0cy5XYWxsZXRCYXNlLCBkZWx0YTogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSkge1xuXHRmb3IgKHZhciB2IGluIGRlbHRhKSB7XG5cdFx0aWYgKHdhbGxldF9yZWZbdl0pIHtcblx0XHRcdHdhbGxldF9yZWZbdl0gKz0gZGVsdGFbdl07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdhbGxldF9yZWZbdl0gPSBkZWx0YVt2XTtcblx0XHR9XG5cdH1cbn1cblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuZnVuY3Rpb24gY2FjaGVSZXN1bHRQYXNzdGhyb3VnaDxUIGV4dGVuZHMgV2FsbGV0Q29udHJhY3RzLkNvbW1vbldhbGxldFJlc3BvbnNlPihyZXN1bHQ6IFp5bmdhTmV0LkFwaVJlc3VsdDxUPik6IFp5bmdhTmV0LkFwaVJlc3VsdDxUPiB7XG5cdGxhc3RDYXMgPSByZXN1bHQuYm9keS5jYXM7XG5cdGNhY2hlZFN0YXRzID0gcmVzdWx0LmJvZHkuc3RhdHMgfHwgY2FjaGVkU3RhdHM7XG5cdGNhY2hlZFdhbGxldCA9IHJlc3VsdC5ib2R5LndhbGxldCB8fCBjYWNoZWRXYWxsZXQ7XG5cblx0bGV0IGRlbHRhQm9keSA9IHJlc3VsdC5ib2R5IGFzIFBhcnRpYWw8V2FsbGV0Q29udHJhY3RzLkNvbW1vblVwZGF0ZVdhbGxldFJlc3BvbnNlPjtcblx0aWYgKCFyZXN1bHQuYm9keS53YWxsZXQgJiYgZGVsdGFCb2R5LmRlbHRhX2l0ZW1zKSB7XG5cdFx0Ly8gYXBpIGNhbGwgcmV0dXJuZWQgZGVsdGEgYnV0IG5vIHdhbGxldCBib2R5LlxuXHRcdC8vIGN1cnJlbnRseSBub3QgYW4gZXhpc3RpbmcgY2FzZS5cblx0fVxuXG5cdHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGFpbURyaXAocGFyYW1zOiBXYWxsZXRDb250cmFjdHMuQ2xhaW1EcmlwQ2xpZW50KSB7XG5cdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcblx0cmV0dXJuIFp5bmdhQWNjb3VudC51c2VyQXV0aENhbGw8V2FsbGV0Q29udHJhY3RzLkNsYWltRHJpcFJlc3BvbnNlPignUFVUJywgJ3dhbGxldC9jbGFpbURyaXAnLCBwYXJhbXMpLnRoZW4oY2FjaGVSZXN1bHRQYXNzdGhyb3VnaCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmRHYW1lR3JhbnQocGFyYW1zOiBXYWxsZXRDb250cmFjdHMuRW5kR2FtZUdyYW50Q2xpZW50KSB7XG5cdC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcblx0cmV0dXJuIFp5bmdhQWNjb3VudC51c2VyQXV0aENhbGw8V2FsbGV0Q29udHJhY3RzLkVuZEdhbWVHcmFudFJlc3BvbnNlPignUFVUJywgJ3dhbGxldC9lbmRHYW1lR3JhbnQnLCBwYXJhbXMpLnRoZW4oY2FjaGVSZXN1bHRQYXNzdGhyb3VnaCk7XG59XG5leHBvcnQgZnVuY3Rpb24gcHVyY2hhc2UocGFyYW1zOiBXYWxsZXRDb250cmFjdHMuUHVyY2hhc2VDbGllbnQpIHtcblx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuXHRyZXR1cm4gWnluZ2FBY2NvdW50LnVzZXJBdXRoQ2FsbDxXYWxsZXRDb250cmFjdHMuUHVyY2hhc2VSZXNwb25zZT4oJ1BVVCcsICd3YWxsZXQvcHVyY2hhc2UnLCBwYXJhbXMpLnRoZW4oY2FjaGVSZXN1bHRQYXNzdGhyb3VnaCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvcGVuR2F0Y2hhKHBhcmFtczogV2FsbGV0Q29udHJhY3RzLk9wZW5HYXRjaGFDbGllbnQpIHtcblx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuXHRyZXR1cm4gWnluZ2FBY2NvdW50LnVzZXJBdXRoQ2FsbDxXYWxsZXRDb250cmFjdHMuT3BlbkdhdGNoYVJlc3BvbnNlPignUFVUJywgJ3dhbGxldC9vcGVuR2F0Y2hhJywgcGFyYW1zKS50aGVuKGNhY2hlUmVzdWx0UGFzc3Rocm91Z2gpO1xufVxuXG4vLyBwb29yLW1hbnMgb2JqZWN0LnZhbHVlc1xuZXhwb3J0IGZ1bmN0aW9uIE9iamVjdF92YWx1ZXM8VD4obzogeyBba2V5OiBzdHJpbmddOiBUIH0pOiBUW10ge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobykubWFwKChrKSA9PiBvW2tdKTtcbn1cblxuLy8gcGFzcyBpbiB5b3VyIGVvcyBleHBlcmltZW50cyAoeW91J3ZlIGxvYWRlZCB0aGVtIGFscmVhZHksIHJpZ2h0PykgYW5kIHdlIHJldHVybiB0aGUgY2F0YWxvZ1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm1heC1saW5lLWxlbmd0aFxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSXRlbUNhdGFsb2coY2F0YWxvZ05hbWVzOiBzdHJpbmdbXSwgYWxsRXhwZXJpbWVudHM6IHsgW2tleTogc3RyaW5nXTogRXhwZXJpbWVudHNEYXRhUmVzcG9uc2UgfSk6IEl0ZW1DYXRhbG9nVHlwZSB7XG5cdC8vIG1lcmdlIGFsbCB0aGUgY2F0YWxvZ3MgYW5kIHJldHVybi5cblx0bGV0IGFsbFZhbHVlczogeyBba2V5OiBzdHJpbmddOiBXYWxsZXRDb250cmFjdHMuQ2F0YWxvZ0l0ZW1CYXNlIH0gPSB7fTtcblxuXHQvLyBmaWx0ZXIganVzdCBpdGVtY2F0YWxvZyBleHBlcmltZW50cy5cblx0dmFyIGFzc2lnbm1lbnRzOiB7IFtrZXk6IHN0cmluZ106IEV4cGVyaW1lbnRzRGF0YVJlc3BvbnNlIH0gPSB7fTtcblx0Y2F0YWxvZ05hbWVzLmZvckVhY2goKGUpID0+IHtcblx0XHRhc3NpZ25tZW50c1tlXSA9IGFsbEV4cGVyaW1lbnRzW2VdO1xuXHR9KTtcblxuXHRsZXQgYWxsVmFyaWFibGVzID0gT2JqZWN0X3ZhbHVlcyhhc3NpZ25tZW50cykuZm9yRWFjaCgodikgPT5cblx0XHRPYmplY3RfdmFsdWVzKHYudmFyaWFibGVzKS5mb3JFYWNoKCh2YWwpID0+XG5cdFx0XHRPYmplY3RBc3NpZ24oYWxsVmFsdWVzLCB2YWwpKVxuXHQpO1xuXG5cdHJldHVybiBhbGxWYWx1ZXM7XG59XG5cbi8vIHBhc3MgaW4geW91ciBlb3MgZXhwZXJpbWVudHMgKHlvdSd2ZSBsb2FkZWQgdGhlbSBhbHJlYWR5LCByaWdodD8pIGFuZCB3ZSByZXR1cm4gdGhlIGNhdGFsb2dcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURyaXBDYXRhbG9nKGRyaXBFeHBlcmltZW50TmFtZTogc3RyaW5nLCBhbGxFeHBlcmltZW50czogeyBba2V5OiBzdHJpbmddOiBFeHBlcmltZW50c0RhdGFSZXNwb25zZSB9KTogRHJpcENhdGFsb2dUeXBlIHtcblx0Ly8gbWVyZ2UgYWxsIHRoZSBjYXRhbG9ncyBhbmQgcmV0dXJuLlxuXHRsZXQgYWxsVmFsdWVzOiB7IFtrZXk6IHN0cmluZ106IFdhbGxldENvbnRyYWN0cy5EcmlwSXRlbUJhc2UgfSA9IHt9O1xuXG5cdC8vIGZpbHRlciBqdXN0IGRyb3BjYXRhbG9nIGV4cGVyaW1lbnRzLlxuXHR2YXIgYXNzaWdubWVudHM6IHsgW2tleTogc3RyaW5nXTogRXhwZXJpbWVudHNEYXRhUmVzcG9uc2UgfSA9IHt9O1xuXHRhc3NpZ25tZW50c1tkcmlwRXhwZXJpbWVudE5hbWVdID0gYWxsRXhwZXJpbWVudHNbZHJpcEV4cGVyaW1lbnROYW1lXTtcblxuXHRsZXQgYWxsVmFyaWFibGVzID0gT2JqZWN0X3ZhbHVlcyhhc3NpZ25tZW50cykuZm9yRWFjaCgodikgPT5cblx0XHRPYmplY3RfdmFsdWVzKHYudmFyaWFibGVzKS5mb3JFYWNoKCh2YWwpID0+XG5cdFx0XHRPYmplY3RBc3NpZ24oYWxsVmFsdWVzLCB2YWwpKVxuXHQpO1xuXG5cdHJldHVybiBhbGxWYWx1ZXM7XG59XG5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTp2YXJpYWJsZS1uYW1lXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlRHJpcFN0YXR1cyhkcmlwQ2F0YWxvZzogRHJpcENhdGFsb2dUeXBlLCBub3dfdHM6IG51bWJlciwgZHJpcF9pZDogc3RyaW5nLCB1c2VyV2FsbGV0OiBXYWxsZXRCYXNlKSB7XG5cdGxldCBpdGVtRGVmID0gZHJpcENhdGFsb2dbZHJpcF9pZF07XG5cdGlmICghaXRlbURlZikge1xuXHRcdHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGZpbmQgZHJpcCBieSBpZC4gJyArIEpTT04uc3RyaW5naWZ5KHsgZHJpcF9pZDogZHJpcF9pZCwgZHJpcENhdGFsb2c6IGRyaXBDYXRhbG9nIH0pKTtcblx0fVxuXHRsZXQgZHJpcFN0YXRpY1N0YXR1czogV2FsbGV0Q29udHJhY3RzLkRyaXBUcmFja2VyVHlwZSA9IHVzZXJXYWxsZXQuZHJpcHNbZHJpcF9pZF07XG5cdGxldCBjYW5DbGFpbSA9IGNhbkNvbGxlY3REcmlwKGl0ZW1EZWYsIHVzZXJXYWxsZXQuZHJpcHNbZHJpcF9pZF0sIG5vd190cyk7XG5cdHJldHVybiB7XG5cdFx0dGltZV9yZW1haW5pbmdfczogY2FuQ2xhaW0udGltZV9yZW1haW5pbmdfcyxcblx0XHRwcml6ZV9pdGVtOiBpdGVtRGVmLmdyYW50c1xuXHR9O1xufVxuIiwiLy8gU2V0IHVwIGdsb2JhbCBaeW5nYSBuYW1lc3BhY2Vcbi8vIE1vc3RseSBmb3IgYmFja3dhcmRzIGNvbXBhdFxuKGZ1bmN0aW9uICh3aW4pIHtcblx0dmFyIHogPSB3aW4uWnluZ2EgPSByZXF1aXJlKCcuL1p5bmdhJyk7XG5cdHouQWNjb3VudCA9IHJlcXVpcmUoJy4vWnluZ2FBY2NvdW50Jyk7XG5cdHouQW5hbHl0aWNzID0gcmVxdWlyZSgnLi9aeW5nYUFuYWx5dGljcycpO1xuXHR6LkNvcmUgPSByZXF1aXJlKCcuL1p5bmdhQ29yZScpO1xuXHR6LkNvbnRleHRUcmFja2VyID0gcmVxdWlyZSgnLi9aeW5nYUNvbnRleHRUcmFja2VyJyk7XG5cdHouSW5zdGFudCA9IHJlcXVpcmUoJy4vWnluZ2FJbnN0YW50Jyk7XG5cdHouTGVhZGVyYm9hcmQgPSByZXF1aXJlKCcuL1p5bmdhTGVhZGVyYm9hcmQnKTtcblx0ei5MZWFkZXJib2FyZFVJID0gcmVxdWlyZSgnLi9aeW5nYUxlYWRlcmJvYXJkVUknKTtcblx0ei5MZWFkZXJib2FyZFVJQ1NTID0gcmVxdWlyZSgnLi9aeW5nYUxlYWRlcmJvYXJkVUlDU1MnKTtcblx0ei5NYXRjaCA9IHJlcXVpcmUoJy4vWnluZ2FNYXRjaCcpO1xuXHR6Lk1lZGlhID0gcmVxdWlyZSgnLi9aeW5nYU1lZGlhJyk7XG5cdHouTmV0ID0gcmVxdWlyZSgnLi9aeW5nYU5ldCcpO1xuXHR6Lk9wdGltaXplID0gcmVxdWlyZSgnLi9aeW5nYU9wdGltaXplJyk7XG5cdHouUHJvZmlsZSA9IHJlcXVpcmUoJy4vWnluZ2FQcm9maWxlJyk7XG5cdHouUm91bmRzTWFuYWdlciA9IHJlcXVpcmUoJy4vWnluZ2FSb3VuZHNNYW5hZ2VyJyk7XG5cdHouUm91bmRzTWFuYWdlckNTUyA9IHJlcXVpcmUoJy4vWnluZ2FSb3VuZHNNYW5hZ2VyQ1NTJyk7XG59KSh3aW5kb3cpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
