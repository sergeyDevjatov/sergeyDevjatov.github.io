var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),poket,poker;(function(n){var t;(function(n){var t=function(){function n(){}return n}();t.CHANGE="change";n.Event=t})(t=n.Client||(n.Client={}))})(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(n){this._metrics={};this._class=n;this._metrics={};this.clearMetrics();this._pool=[]}return n.prototype.alloc=function(){var n;return this._pool.length==0?(n=new this._class,this._metrics.totalalloc++):(n=this._pool.pop(),this._metrics.totalfree--),n},n.prototype.free=function(n){this._pool.push(n);this._metrics.totalfree++},n.prototype.collect=function(){this._pool=[];var n=this._metrics.totalalloc-this._metrics.totalfree;this.clearMetrics(n)},n.prototype.clearMetrics=function(n){n===void 0&&(n=0);this._metrics.totalalloc=n||0;this._metrics.totalfree=0},n}();n.ObjectPool=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return n.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})},n}();n.Guid=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t,i;(function(n){n[n.session_start=0]="session_start";n[n.menu_load=1]="menu_load";n[n.player_table_choose=2]="player_table_choose";n[n.player_table_dropped=3]="player_table_dropped";n[n.player_table_join=4]="player_table_join";n[n.player_table_leave=5]="player_table_leave";n[n.player_table_bust=6]="player_table_bust";n[n.hand_start=7]="hand_start";n[n.hand_flop=8]="hand_flop";n[n.hand_turn=9]="hand_turn";n[n.hand_river=10]="hand_river";n[n.hand_complete=11]="hand_complete";n[n.table_created=12]="table_created";n[n.table_destroyed=13]="table_destroyed";n[n.currency_sink=14]="currency_sink";n[n.currency_source=15]="currency_source";n[n.tap_hourly_drip=16]="tap_hourly_drip";n[n.tap_w2e=17]="tap_w2e"})(t=n.StatCounters||(n.StatCounters={}));i=function(){function i(){}return Object.defineProperty(i,"s",{get:function(){return n.Platform.service},enumerable:!0,configurable:!0}),i.Log=function(n,r,u){var f=u||{};return f.counter=t[n],r!=null&&(f.value=Math.round(r)),i.s.fireStats(f)},i}();n.Statistic=i})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return n.set=function(n,t){store.set(n,t)},n.get=function(n){return store.get(n)},n.remove=function(n){return store.remove(n)},n.clearAll=function(){return store.clearAll()},n}();n.Store=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;return n._tickerID=-1,n._status=i.STOP,n}return __extends(i,t),Object.defineProperty(i.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(i,"instance",{get:function(){return i._instance||(i._instance=new i),i._instance},enumerable:!0,configurable:!0}),i.prototype.run=function(t,r){t===void 0&&(t=!1);r===void 0&&(r=undefined);this._duration=r||n.Config.REWARDED_VIDEO_DELAY_DURATION;t&&(this._duration=0);this._lastRunnedTime=new Date;this._status=i.TICK;clearInterval(this._tickerID);this._tickerID=setInterval(this.tick.bind(this),1e3)},i.run=function(n){n===void 0&&(n=!1);this.instance.run(n)},i.prototype.stop=function(){clearInterval(this._tickerID);this._status=i.STOP;n.trace("[RewardedVideoController] TIMER WAS BE STOPED")},i.stop=function(){this.instance.stop()},i.prototype.tick=function(){var t=this;this.left<=0&&(this.stop(),n.trace("[RewardedVideoController] Try get ADS"),n.Platform.service.requestRewardedVideo(function(r){n.trace(r.message,r);r.code=="OK"||r.code=="UNSUPPORTED"?(t._status=i.AVAILABLE,t.emit(i.AVAILABLE)):(t.run(),t.run(!1,i.TIME_OFFSET),n.trace("[RewardedVideoController] shift timer on 1min. Run time:"+t._lastRunnedTime))}));this.emit(i.TICK,{start:this._lastRunnedTime,expired:this.expired,left:this.left})},i.prototype.show=function(t){var r=this;if(this._status!=i.AVAILABLE)throw new Error("[RewardedVideoController]you cant't show video. Wait again "+this.left+"sec");n.Platform.service.showRewardedVideo(function(i){if(n.trace("[RewardedVideoController] show status:",i),t(i),i.code=="SHOWED")r.run();else throw new Error("[RewardedVideoController] error:"+i);})},Object.defineProperty(i.prototype,"expired",{get:function(){return(Date.now()-this._lastRunnedTime.valueOf())/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return this._duration-this.expired},enumerable:!0,configurable:!0}),i}(PIXI.utils.EventEmitter);t.STOP="Rewarded_timer_STOP";t.TICK="Rewarded_timer_TICK";t.AVAILABLE="Rewarded_AVAILABLE";t.TIME_OFFSET=60;n.RewardedVideoController=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.token="",t.userId="",t.username="",t.signature="",t.userPhotoUrl="",t}return __extends(t,n),t}(PIXI.utils.EventEmitter);t.READY="PlatformBase_READY";t.INIT="PlatformBase_INIT";t.START="PlatformBase_START";n.PlatformBase=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;return n._config={authSocialNetworkID:42,clientVersion:"1.0.32",apiURLBase:"/atg-turns/v1",apps:{"947228248768459":{appName:"Zynga Poker",appId:5004678,interstitialAd:"947228248768459_952386758252608",rewardedVideoAd:"947228248768459_952387361585881"},"1734191989960724":{appName:"Zynga Poker - Stage",appId:5004677,interstitialAd:"1734191989960724_1745121708867752",rewardedVideoAd:"1734191989960724_1745123258867597"},"1875658362720017":{appName:"Zynga Poker - Dev",appId:5004676,interstitialAd:"1875658362720017_1899391040346749",rewardedVideoAd:"1875658362720017_1880351825584004"}}},n._lastVideo=null,n}return __extends(i,t),Object.defineProperty(i.prototype,"FB_REWARDEDVIDEO_PLACEMENT",{get:function(){switch(n.Config.appLocation){case n.APP_LOCATION.PROD:return this._config.apps["947228248768459"].rewardedVideoAd;case n.APP_LOCATION.STAGING:return this._config.apps["1734191989960724"].rewardedVideoAd;case n.APP_LOCATION.DEV:return this._config.apps["1875658362720017"].rewardedVideoAd}},enumerable:!0,configurable:!0}),i.prototype.init=function(){Zynga.init(this._config);Zynga.Instant.initializeAsync().then(this.onInitZyngaInstant.bind(this))},i.prototype.start=function(){Zynga.Instant.startGameAsync().then(this.onStartZyngaInstant.bind(this))},i.prototype.onInitZyngaInstant=function(){this.emit(n.PlatformBase.INIT)},i.prototype.onStartZyngaInstant=function(){this.emit(n.PlatformBase.START);Zynga.Account.Event.last(Zynga.Account.Events.ACCOUNT_DETAILS).then(this.onAccountDetails.bind(this))},i.prototype.onAccountDetails=function(t){this.userId=Zynga.Instant.player.getID();this.username=Zynga.Instant.player.getName();this.userPhotoUrl=Zynga.Instant.player.getPhoto();this.token=t.token;this.emit(n.PlatformBase.READY)},i.prototype.requestRewardedVideo=function(t){var r=this,u=this.FB_REWARDEDVIDEO_PLACEMENT,i;n.trace("[Zynga Games] request ADS ID:",u);i=null;this._lastVideo?(n.trace("[Rewarded] try load last video"),i=this._lastVideo.loadAsync()):i=Zynga.Instant.getRewardedVideoAsync(u).then(function(t){return r._lastVideo=t,n.trace("[Rewarded] Try load video",r._lastVideo),r._lastVideo.loadAsync()});i.then(function(){n.trace("[Rewarded] Video was loaded");t({code:"OK",message:""})}).catch(function(i){t(i);n.trace("[Loading Rewarded ERROR] ",i)})},i.prototype.showRewardedVideo=function(n){var t=this;this._lastVideo&&this._lastVideo.showAsync().then(function(){t._lastVideo=null;n({code:"SHOWED",message:""})},function(i){n(i);t._lastVideo=null})},i.prototype.requestShareAsync=function(n){return n.data=n.data||i.DEFAULT_SHARE.data,n.image=n.image||i.DEFAULT_SHARE.image,n.intent=n.intent||i.DEFAULT_SHARE.intent,n.text=n.text||i.DEFAULT_SHARE.text,Zynga.Instant.shareAsync(n)},i.prototype.getInviteData=function(){return Zynga.Instant.getEntryPointData()},i.prototype.fireStats=function(t){return Zynga.Analytics.logCount(t).then(function(t){n.trace("[ZYNGA STATS SEND]",t)},function(t){n.trace("[ZYNGA STATS ERR]",t)})},Object.defineProperty(i.prototype,"progress",{get:function(){return this._progress},set:function(n){this._progress=n;Zynga.Instant.setLoadingProgress(n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"appId",{get:function(){return-1},enumerable:!0,configurable:!0}),i}(n.PlatformBase);t.APP_ID_DEV="1875658362720017";t.APP_ID_STAGING="1734191989960724";t.APP_ID_PROD="947228248768459";t.DEFAULT_SHARE={text:"Common!",intent:"REQUEST",data:{},image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAE0lEQVR42mM0u5RSz4AEGEkXAAAzAwex00cg9AAAAABJRU5ErkJggg=="};n.ZyngaGames=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return n}();n.AnimationController=t})(t=n.Client||(n.Client={}))}(poket||(poket={})),function(n){var t;(function(n){var t=function(){function t(){}return t.connectToServer=function(t){n.Config.setServerConf(t);n.Server.instance.init();(new n.CommandAuth).login(n.Model.me)},t}();n.AuthController=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(){this._bet=!1;n.ModelEvents.on(n.ModelEvent.MODEL_TABLE,this.onChangeTable,this);n.ModelEvents.on(n.ModelEvent.MODEL_USERS,this.onChangeUsers,this);n.ModelEvents.on(n.ModelEvent.MODEL_ME,this.onChangeMe,this)}return t.prototype.setViews=function(t,i){this._playButtonsView=t;this._raiseView=i;this._playButtonsView.on(n.AppEvent.CLICK_BET,this.onClickBet,this);this._playButtonsView.on(n.AppEvent.CLICK_CALL,this.onClickCall,this);this._playButtonsView.on(n.AppEvent.CLICK_CHECK,this.onClicCheck,this);this._playButtonsView.on(n.AppEvent.CLICK_FOLD,this.onClickFold,this);this._playButtonsView.on(n.AppEvent.CLICK_RAISE,this.onClickRaise,this);this._playButtonsView.on(n.AppEvent.CLICK_ALL_IN,this.onClickAllIn,this);this._playButtonsView.on(n.AppEvent.CLICK_CONFIRM,this.onClickConfirm,this)},t.prototype.onChangeTable=function(t){var i,r,u;this._raiseView.hide();i=n.Model.table.playerBetting&&n.Model.table.playerBetting.id==n.Model.me.id&&t.type!=n.ModelEvent.BET_ACTION;r=n.Model.table.state==n.MTable.STATE_WAIT_BET;this._playButtonsView.updateButtons(i&&r,n.Model.me.stack,n.Model.me.bet,n.Model.table.users.maxBet,n.Model.table.minBetToRaise,n.Model.table.maxBetToRaise);u=n.Model.table.users.maxBet!=0&&n.Model.table.users.maxBet<n.Model.me.stack+n.Model.me.bet;this._raiseView.setMinMaxBets(n.Model.table.minBetToRaise,n.Model.table.maxBetToRaise)},t.prototype.onChangeMe=function(){},t.prototype.onChangeUsers=function(){},t.prototype.onClickBet=function(){this._bet=!0;var t=n.Model.table.potsSum;console.debug("Sum of pots: "+t);this._raiseView.setPot(t);this._raiseView.show();this._playButtonsView.showConfirmButton();n.Sounds.play(n.SoundsHelper.CHIP_STACK)},t.prototype.onClickCall=function(){(new n.CommandAction).call();this._raiseView.hide();this._playButtonsView.hide()},t.prototype.onClicCheck=function(){(new n.CommandAction).check();this._raiseView.hide();this._playButtonsView.hide()},t.prototype.onClickFold=function(){(new n.CommandAction).fold();this._raiseView.hide();this._playButtonsView.hide()},t.prototype.onClickRaise=function(){this._bet=!1;var r=n.Model.table.users.getAll(!0),t=r.reduce(function(n,t){return n+t.bet},0),i=n.Model.table.potsSum;console.debug("Sum of bets: "+t);console.debug("Sum of pots: "+i);this._raiseView.setPot(i+t);this._raiseView.show();this._playButtonsView.showConfirmButton();n.Sounds.play(n.SoundsHelper.CHIP_STACK)},t.prototype.onClickAllIn=function(){(new n.CommandAction).raise(n.Model.table.maxBetToRaise);this._raiseView.hide();this._playButtonsView.hide()},t.prototype.onClickConfirm=function(){this._bet?(new n.CommandAction).bet(this._raiseView.getSelectedBet()):(new n.CommandAction).raise(this._raiseView.getSelectedBet());this._raiseView.hide();this._playButtonsView.hide()},t.prototype.destroy=function(){},t}();n.PlayController=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.setViews=function(n,t){this._tableView=n;this._tableView.setSeatCallback(this.seatClick.bind(this));this._tableView.setAddFriendCallback(this.addFriendClick.bind(this));this._tableCards=t},i.prototype.seatClick=function(n){var t=this.tryToSeat(n);t||this.emit(i.NOT_ENOUGH_BANKROLL)},i.prototype.getFreeSeatId=function(){var t=n.Model.table.seats;return t.find(function(t){return!n.Model.table.users.getUserBySeat(t)})},i.prototype.tryToSeat=function(t){var r=n.Model.me.balance>=n.Model.table.minBuyIn,i;return n.trace("[try to seat: <balance, min buy-in]",n.Model.me.balance,n.Model.table.minBuyIn),r&&(i=t||this.getFreeSeatId(),i!==undefined&&(new n.CommandUser).seat(n.Model.table.id,i)),r},i.prototype.addFriendClick=function(t){n.trace("[Clicled on Add Friend] seatID",t);var i={text:"Play with me!",data:{from:"table",tableId:n.Model.table.id}};n.Platform.service.requestShareAsync(i).then(function(t){n.trace("[Add Player From Table]",t)},function(t){n.trace("[Add Player From Table]",t)})},Object.defineProperty(i.prototype,"enabled",{set:function(t){if(n.ModelEvents.off(n.ModelEvent.MODEL_TABLE,this.onChangeTable,this),n.ModelEvents.off(n.ModelEvent.MODEL_USERS,this.onChangeUsers,this),n.ModelEvents.off(n.ModelEvent.MODEL_ME,this.onChangeMe,this),t){n.ModelEvents.on(n.ModelEvent.MODEL_TABLE,this.onChangeTable,this);n.ModelEvents.on(n.ModelEvent.MODEL_USERS,this.onChangeUsers,this);n.ModelEvents.on(n.ModelEvent.MODEL_ME,this.onChangeMe,this)}},enumerable:!0,configurable:!0}),i.prototype.initGame=function(){var t,i,r;if(n.Model.table.inited){for(this._tableView.removeAllPlayers(),this._tableView.setSeats(n.Model.table.seats),n.Model.table.potsSum>0?this._tableView.showPot(n.Model.table.potsSum):this._tableView.hidePot(),i=n.Model.table.users.getAll(!0),t=0;t<i.length;t++)this._tableView.addPlayer(i[t],i[t].isMe);for(this._tableView.updatePlayer(n.Model.me.id,{isWaitForPlayers:n.Model.table.state==n.MTable.STATE_WAIT_PLAYERS,updateStack:!0,updateBetExpanded:!0,updateBetInfo:!0,updateBetVisible:!0}),n.Model.table.dealer&&this._tableView.updateDealer(n.Model.table.dealer.id),r=n.Model.table.state,r!=n.MTable.STATE_WAIT_PLAYERS&&r!=n.MTable.STATE_START_GAME&&this._tableView.giveOutCards(!0),i=n.Model.table.users.getAll(!0),t=0;t<i.length;t++)i[t].betAction==n.MBet.ACTION_FOLD&&this._tableView.returnCards(i[t].id,!0);n.Model.table.state==n.MTable.STATE_WAIT_BET&&n.Model.table.playerBetting&&this._tableView.waitBet(n.Model.table.playerBetting.id,n.Model.table.bettingTime);n.Model.table.state==n.MTable.STATE_SHOWDOWN||n.Model.table.state==n.MTable.STATE_HAND_RANKING?this._tableView.showPlayersCards():this._tableView.hidePlayersCards();this._tableCards.startRound();this._tableCards.openCards(n.Model.table.cards);this._tableView.updatePlaceButtons(!n.Model.me.seatInGame)}},i.prototype.onChangeTable=function(t){var s,o,r,u,f,h;if(this._tableView)if(t.type==n.ModelEvent.INIT)this.initGame();else if(t.type==n.ModelEvent.SET_SEATS)this._tableView.setSeats(n.Model.table.seats);else if(t.type==n.ModelEvent.TABLE_DEAL)this._tableView.giveOutCards(!1);else if(t.type==n.ModelEvent.BET_ACTION)this._tableView.clearPlayersWaiting(),n.Model.table.playerBetting&&(this._tableView.updatePlayer(n.Model.table.playerBetting.id,{isWaitForPlayers:n.Model.table.state==n.MTable.STATE_WAIT_PLAYERS,updateStack:!0,updateBetExpanded:!0,updateBetInfo:!0,updateBetVisible:!0}),n.Model.table.playerBetting.betAction==n.MBet.ACTION_FOLD?(n.Sounds.play(n.SoundsHelper.FOLD),this._tableView.returnCards(n.Model.table.playerBetting.id,!1)):n.Model.table.playerBetting.betAction==n.MBet.ACTION_All_IN?n.Sounds.play(n.SoundsHelper.ALL_IN):n.Model.table.playerBetting.betAction==n.MBet.ACTION_CHECK&&n.Sounds.play(n.SoundsHelper.CHECK));else if(t.type==n.ModelEvent.BEFORE_CHANGE_STATE)switch(t.data.state){case n.MTable.STATE_FLOP:case n.MTable.STATE_TURN:case n.MTable.STATE_RIVER:case n.MTable.STATE_SHOWDOWN:case n.MTable.STATE_HAND_RANKING:this._tableView.chipsToPot()}else if(t.type==n.ModelEvent.ALL_IN_SHOWDOWN)this._tableView.showPlayersCards();else if(t.type==n.ModelEvent.CHANGE_STATE){this._tableView.clearPlayersWaiting();r=!1;switch(n.Model.table.state){case n.MTable.STATE_WAIT_PLAYERS:this._tableCards.startRound();this._tableView.reset();this._tableView.hidePot();break;case n.MTable.STATE_START_GAME:this._tableCards.startRound();this._tableView.reset();this._tableView.hidePot();this._tableView.hidePlayersCards();this._tableView.hideMyCards();this._tableView.updateDealer(n.Model.table.dealer.id);n.Sounds.play(n.SoundsHelper.SHUFFLE);this._loop_Hand_id=n.Model.table.id+"_"+n.Guid.newGuid();u=n.Model.me.stack;n.Statistic.Log(n.StatCounters.hand_start,u,{kingdom:n.Model.table.users.getAll(!0).length.toString(),attribute:this._loop_Hand_id});r=!0;break;case n.MTable.STATE_WAIT_BET:n.Model.table.playerBetting&&(this._tableView.waitBet(n.Model.table.playerBetting.id,n.Model.table.bettingTime),n.Model.table.playerBetting.id==n.Model.me.id&&n.Sounds.play(n.SoundsHelper.MY_BETTING));break;case n.MTable.STATE_FLOP:r||(u=n.Model.me.stack,f=n.Model.table.users.getAll(!0).filter(function(n){return!n.folded}),n.Statistic.Log(n.StatCounters.hand_flop,u,{kingdom:f.length.toString(),attribute:this._loop_Hand_id}),r=!0);case n.MTable.STATE_TURN:r||(u=n.Model.me.stack,f=n.Model.table.users.getAll(!0).filter(function(n){return!n.folded}),n.Statistic.Log(n.StatCounters.hand_turn,u,{kingdom:f.length.toString(),attribute:this._loop_Hand_id}),r=!0);case n.MTable.STATE_RIVER:n.Model.table.state==n.MTable.STATE_FLOP?n.Sounds.play(n.SoundsHelper.FLOP_DEAL):n.Sounds.play(Math.random()>.5?n.SoundsHelper.OPEN_TABLE_CARDS1:n.SoundsHelper.OPEN_TABLE_CARDS2);this._tableView.updatePlayers({isWaitForPlayers:n.Model.table.state==n.MTable.STATE_WAIT_PLAYERS,updateStack:!0,updateBetExpanded:!0,updateBetInfo:!0,updateBetVisible:!0});this._tableView.showPot(n.Model.table.potsSum);this._tableCards.openCards(n.Model.table.cards);r||(u=n.Model.me.stack,f=n.Model.table.users.getAll(!0).filter(function(n){return!n.folded}),n.Statistic.Log(n.StatCounters.hand_river,u,{kingdom:f.length.toString(),attribute:this._loop_Hand_id}),r=!0);break;case n.MTable.STATE_SHOWDOWN:for(this._tableView.showPlayersCards(),this._tableView.updatePlayers({updateStack:!1,updateBetExpanded:!0,updateBetInfo:!0,updateBetVisible:!0}),o=n.Model.table.users.getAll(!1),s=0;s<o.length;s++)this._tableView.returnCards(o[s].id,!1);break;case n.MTable.STATE_HAND_RANKING:if(this._tableView.showWinState(),this._tableCards.showWinState(),this._tableView.updatePlayers({updateStack:!1,updateBetExpanded:!0,updateBetInfo:!0,updateBetVisible:!0}),o=n.Model.table.users.getWinners(),this._tableView.giveOutPots(o,n.Model.table.pots),n.Sounds.play(n.SoundsHelper.WIN),!r){var u=n.Model.me.stack,f=n.Model.table.users.getAll(!0).filter(function(n){return!n.folded}),e="";n.Model.table.handRankinkResult.banks.forEach(function(t){t.players.length>0&&t.players[0].comb>0&&(e+=n.HandRankCombination[t.players[0].comb]+" ")});e=e.trim();e==""&&(e="fold-win");n.Statistic.Log(n.StatCounters.hand_complete,u,{kingdom:f.length.toString(),phylum:e,attribute:this._loop_Hand_id});r=!0}h=n.Model.me.winner?n.StatCounters.currency_source:n.StatCounters.currency_sink;n.Statistic.Log(h,n.Model.me.earned,{kingdom:(n.Model.me.balance>>0).toString(),phylum:(n.Model.me.stack>>0).toString(),"class":"bet"})}}else t.type==n.ModelEvent.CLEAR&&(this._tableView.clearGame(),this._tableCards.clearGame(),this.emit(i.EXIT_GAME))},i.prototype.onChangeMe=function(){this._tableView.updatePlayer(n.Model.me.id,{isWaitForPlayers:n.Model.table.state==n.MTable.STATE_WAIT_PLAYERS,updateStack:!0,updateBetExpanded:!1,updateBetInfo:!1,updateBetVisible:!1})},i.prototype.onChangeUsers=function(t){var u,r;this._tableView&&(t.type==n.ModelEvent.ADD?(r=t.data.user_id,u=n.Model.table.users.getUserById(r),this._tableView.addPlayer(u,u.isMe),this._tableView.updatePlayer(u.id,{isWaitForPlayers:n.Model.table.state==n.MTable.STATE_WAIT_PLAYERS,updateStack:!0,updateBetExpanded:!0,updateBetInfo:!0,updateBetVisible:!0}),this._tableView.updatePlaceButtons(!n.Model.me.seatInGame)):t.type==n.ModelEvent.DELETE?(r=t.data.user_id,this._tableView.removePlayer(r),this._tableView.updatePlaceButtons(!n.Model.me.seatInGame),n.Model.me.id==r&&n.Model.me.stack<=0&&this.emit(i.MONEY_EXPIRED)):t.type==n.ModelEvent.UPDATE&&this._tableView.updatePlayer(t.data.user_id,{isWaitForPlayers:n.Model.table.state==n.MTable.STATE_WAIT_PLAYERS,updateStack:!0,updateBetExpanded:!0,updateBetInfo:!0,updateBetVisible:!0}))},i.prototype.destroy=function(){this.enabled=!1},i}(PIXI.utils.EventEmitter);t.EXIT_GAME="EXIT_GAME";t.MONEY_EXPIRED="MONEY_EXPIRED";t.NOT_ENOUGH_BANKROLL="NOT_ENOUGH_BANKROLL";n.TableController=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;if(i._instance)throw new Error("AppEvents is singleton");return n}return __extends(i,t),i.emit=function(t,r){r===void 0&&(r=null);i._instance.emit(t,new n.AppEvent(t,r))},i.on=function(n,t,r){r===void 0&&(r=null);i._instance.on(n,t,r)},i.off=function(n,t,r){r===void 0&&(r=null);i._instance.off(n,t,r)},i}(PIXI.utils.EventEmitter);t._instance=new t;n.AppEvents=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(n,t){t===void 0&&(t=null);this.event=n;this.data=t}return n}();t.CLICK_BET="CLICK_BET";t.CLICK_FOLD="CLICK_FOLD";t.CLICK_CHECK="CLICK_CHECK";t.CLICK_CALL="CLICK_CALL";t.CLICK_RAISE="CLICK_RAISE";t.CLICK_ALL_IN="CLICK_ALL_IN";t.CLICK_CONFIRM="CLICK_CONFIRM";n.AppEvent=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(){}return t.init=function(){},t.getEffect=function(t,i){var r=this._anims[t];r==null&&n.trace("[EffectManager] can't found:"+t);r.loaded?i(new r.clipConstructor):PIXI.animate.load(r.clipConstructor,null,function(t){n.trace("[EffectManager] anim loaded:",t);r.loaded=!0;i(t)},r.basePath)},t}();t._anims={Avatar:{clipConstructor:Effects.avatarEffect,basePath:"./assets/effects",loaded:!1}};n.EffectManager=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(n,t,i){i===void 0&&(i=null);this.model=n;this.type=t;this.data=i}return n}();t.MODEL_TABLE="MODEL_TABLE";t.MODEL_ME="MODEL_ME";t.MODEL_ME_MONEY="MODEL_ME_MONEY";t.MODEL_ME_HOURLY_DRIP="MODEL_ME_HOURLY_DRIP";t.MODEL_ME_REWARDED="MODEL_ME_REWARDED";t.MODEL_USERS="MODEL_USERS";t.MODEL_TABLES_CONFIG="MODEL_TABLES_CONFIG";t.INIT=1;t.UPDATE=2;t.ADD=3;t.DELETE=4;t.CLEAR=5;t.START_ROUND=6;t.UPDATE_TABLE_CARDS=7;t.TABLE_DEAL=8;t.SET_SEATS=9;t.BET_ACTION=10;t.CHANGE_STATE=11;t.BEFORE_CHANGE_STATE=12;t.ALL_IN_SHOWDOWN=13;n.ModelEvent=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;if(i._instance)throw new Error("ModelEvents is singleton");return n}return __extends(i,t),i.emit=function(t,r,u){u===void 0&&(u=null);i._instance.emit(t,new n.ModelEvent(t,r,u))},i.on=function(n,t,r){r===void 0&&(r=null);i._instance.on(n,t,r)},i.off=function(n,t,r){r===void 0&&(r=null);i._instance.off(n,t,r)},i}(PIXI.utils.EventEmitter);t._instance=new t;n.ModelEvents=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return n.contains=function(t,i){return i.target?n.containsRecursive(t,i.target):i.data&&i.data.target?n.containsRecursive(t,i.data.target):!1},n.containsRecursive=function(t,i){return t===i?!0:i.parent?n.containsRecursive(t,i.parent):!1},n}();t.MOUSE_OVER="pointerover";t.MOUSE_OUT="pointerout";t.MOUSE_DOWN="pointerdown";t.MOUSE_UP="pointerup";t.MOUSE_MOVE="pointermove";t.MOUSE_OUTSIDE="pointerupoutside";n.MouseEvent=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return n.setSeed=function(t){n._seed=t},n.randomBySeed=function(){var t=Math.sin(n._seed++)*1e4;return t-Math.floor(t)},n.getRandomBySeedMinToMax=function(t,i){return Math.floor(n.randomBySeed()*(i-t+1))+t},n.getRandomMinToMax=function(n,t){return Math.floor(Math.random()*(t-n+1))+n>>0},n}();t._seed=1;n.MathHelper=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return n.numericShortening=function(n,t,i){i===void 0&&(i=2);var r=Math.pow(10,i),u=Math.pow(1e3,Math.min(t,this.MAX_ORDER_FOR_SHORTENING));return Math.floor(n*r/u)/r},n.getSuffix=function(n){switch(n){case 1:return"K";case 2:return"M";default:return"MM"}},n.shortenNumber=function(n){var i,t,r,u;return n?(i=n.toString().length-1,t=Math.floor(i/3),t<=0)?n.toString():(r=this.numericShortening(n,t),u=this.getSuffix(t),""+r+u):""},n.numberWithCommas=function(n){return n&&n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},n}();t.MAX_ORDER_FOR_SHORTENING=3;n.StringHelper=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return n.to=function(n,t,i){return TweenLite.to(n,t,i)},n.killTweensOf=function(n,t,i){t===void 0&&(t=!1);i===void 0&&(i=null);TweenLite.killTweensOf(n,t,i)},n.delayedCall=function(n,t,i,r,u){return i===void 0&&(i=null),r===void 0&&(r=null),u===void 0&&(u=!1),TweenLite.delayedCall(n,t,i,r,u)},n.killDelayedCallsTo=function(n,t){var r,i;for(t===void 0&&(t=null),r=TweenLite.getTweensOf(n),i=0;i<r.length;i++)(r[i].vars.onCompleteScope===t||r[i].vars.callbackScope===t)&&r[i].kill()},n}();t.Power0_easeNone=Power0.easeNone;n.Tweener=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return n.getNewRectByWidth=function(n,t){return new PIXI.Rectangle(0,0,t,t/n.width*n.height)},n.getNewRectByHeight=function(n,t){return new PIXI.Rectangle(0,0,t/n.height*n.width,t)},n}();n.ResizeHelper=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return n.add=function(t,i){n._sounds=t;n._musics=i},Object.defineProperty(n,"musicEnabled",{get:function(){return n._musicEnabled},set:function(t){n._musicEnabled=t;for(var i=0;i<n._musics.length;i++)PIXI.sound.find(n._musics[i]).muted=!t},enumerable:!0,configurable:!0}),Object.defineProperty(n,"globalMute",{set:function(n){PIXI.sound.volumeAll=n?0:1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"soundsEnabled",{get:function(){return n._soundsEnabled},set:function(t){n._soundsEnabled=t;for(var i=0;i<n._sounds.length;i++)PIXI.sound.find(n._sounds[i]).muted=!t},enumerable:!0,configurable:!0}),n.play=function(n,t){return PIXI.sound.exists(n)?PIXI.sound.find(n).play(t):PIXI.sound.add(n,"assets/sounds/"+n+".mp3").play(t)},n.volume=function(n,t){PIXI.sound.exists(n)&&(PIXI.sound.find(n).volume=t)},n.load=function(n,t){return PIXI.sound.add(n,t)},n}();t._musicEnabled=!0;t._soundsEnabled=!0;t._sounds=[];t._musics=[];n.Sounds=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;return n.appId=-1,n}return __extends(i,t),i.prototype.init=function(){var i,t;this.emit(n.PlatformBase.INIT);i=new n.MUsers;i.generateRandomUsers();t=i.getRandomUser();this.userId=t.id;this.username=t.name;this.userPhotoUrl=t.photo;this.token=this.getRandomToken()},i.prototype.getRandomToken=function(){for(var t,r=0;!0&&r<100;){if(t=i.TEST_TOKENS[n.MathHelper.getRandomMinToMax(0,i.TEST_TOKENS.length-1)],n.Store.get(t)){r++;n.trace(" token already used");continue}n.Store.set(t,!0);n.trace(" token found");break}return t},i.prototype.start=function(){this.emit(n.PlatformBase.START);this.emit(n.PlatformBase.READY)},Object.defineProperty(i.prototype,"progress",{get:function(){return this._progress},set:function(n){this._progress=n},enumerable:!0,configurable:!0}),i.prototype.requestRewardedVideo=function(n){console.warn("Method can't support on this platform");n({code:"UNSUPPORTED",message:"Method can't support on this platform"})},i.prototype.showRewardedVideo=function(n){n({code:"SHOWED",message:"Method can't support on this platform"})},i.prototype.requestShareAsync=function(){return console.warn("Method can't support on this platform."),new Promise(function(n,t){setTimeout(function(){t({code:"UNSUPPOROT",message:"Method can't support on this platform"})},0)})},i.prototype.fireStats=function(n){return console.log("[TEST SERVICE STATISTIC]",n),new Promise(function(){})},i.prototype.getInviteData=function(){return null},i}(n.PlatformBase);t.TEST_TOKENS=["sn42v1.h7sZg9C8dDzQVVd5YXgB4RnDeGU3cTfRZhcu1BQWJtk.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTUyMjEwNTA5NSwicGxheWVyX2lkIjoiOWM0MWVhNDctMDA4Zi00ZWM5LWEyMmItNzFhNjMyOWNjYzcyIiwicmVxdWVzdF9wYXlsb2FkIjoie1wiYVwiOjEyM30ifQ","sn42v1.oeL61O3xGW3xcP5soFGlEA2pIaWOjRyJ5YqvGJJicto.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTUyMjEwNTA5NSwicGxheWVyX2lkIjoiMDc2NGZiNzMtNDQwYi00ZTJiLTkyZTItZWIwMTgyMTQ4MzAwIiwicmVxdWVzdF9wYXlsb2FkIjoie1wiYVwiOjEyM30ifQ","sn42v1.nfSCt89ahTBL_94ZzQQdQQosUMmJU6qRbkH6UB58h_s.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTUyMjEwNTA5NSwicGxheWVyX2lkIjoiODZmMjhjN2EtNjdmNC00NTllLTk0YWEtMWQ5ZDU2MTIzYWM2IiwicmVxdWVzdF9wYXlsb2FkIjoie1wiYVwiOjEyM30ifQ","sn42v1.azbDq5-S7T5rM5WZnwAeQ4PvOBbGFH5O3NqC_xO6F98.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTUyMjEwNTA5NSwicGxheWVyX2lkIjoiYWJkMDE4OTAtMThlNi00YWRlLWE2NTUtMTg3NTE1MDJmMGZkIiwicmVxdWVzdF9wYXlsb2FkIjoie1wiYVwiOjEyM30ifQ","sn42v1.kJ858i8zBQ53XHHxev_Fv3jbaysTDdWgfJcPOBiulkQ.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTUyMjEwNTA5NSwicGxheWVyX2lkIjoiMTZmMGRkZTMtNDU5ZS00MDM4LWE4YTctNDgxN2ZmYjIxZTg3IiwicmVxdWVzdF9wYXlsb2FkIjoie1wiYVwiOjEyM30ifQ","sn42v1.lhVrOF5poE0qaQYiR1JbfE1KLSZ1zqzfCFUutBwesWc.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTUyMjEwNTA5NSwicGxheWVyX2lkIjoiNDljMWNiNmQtYzQ2Ny00ZjZkLTk1MTktMWY5NDMzM2VkYzFiIiwicmVxdWVzdF9wYXlsb2FkIjoie1wiYVwiOjEyM30ifQ","sn42v1.S6z7mgL8ruE1rg63JjtaV3b_TbyGL-YMbrLYgzdKlK8.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTUyMjEwNTA5NSwicGxheWVyX2lkIjoiNDRlNGJjZjItNTk2OC00MTcyLTgwZDUtZjAwZThmMmRhMjEzIiwicmVxdWVzdF9wYXlsb2FkIjoie1wiYVwiOjEyM30ifQ","sn42v1.jfujrRYAznB2SMiuuV4Dj6cMkENsWq3X14c_WYirVMc.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTUyMjEwNTA5NSwicGxheWVyX2lkIjoiYjRkOWFlODItODIxZS00ZGQzLWJhNTEtNDc1ZjQ0NjFhODU1IiwicmVxdWVzdF9wYXlsb2FkIjoie1wiYVwiOjEyM30ifQ","sn42v1.2D-gvuBdWd6ZcxGLEXUhETLlAfT7zjPeefkS2H47cfQ.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTUyMjEwNTA5NSwicGxheWVyX2lkIjoiYTBjMWMwZjYtZDhiOS00MWU1LWI4YzEtMTY5ZjQ4NTI4MDNkIiwicmVxdWVzdF9wYXlsb2FkIjoie1wiYVwiOjEyM30ifQ","sn42v1.eDSBlU2RNMWvuDNJLzt6IS3g0M5dSpKWuym17JRzr38.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTUyMjEwNTA5NSwicGxheWVyX2lkIjoiOTgxMzk4MmMtNWZlNi00ZWI3LWJlOTEtOGY5YTlkMDIwNzk4IiwicmVxdWVzdF9wYXlsb2FkIjoie1wiYVwiOjEyM30ifQ"];n.TestService=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;return n._lastVideo=null,n}return __extends(i,t),i.prototype.fireStats=function(){throw new Error("Method not implemented.");},i.prototype.getInviteData=function(){throw new Error("Method not implemented.");},i.prototype.requestShareAsync=function(){throw new Error("Method not implemented.");},i.prototype.init=function(){FBInstant.initializeAsync().then(this.onInitFBInstant.bind(this))},i.prototype.start=function(){FBInstant.startGameAsync().then(this.onStartFBInstant.bind(this))},i.prototype.onInitFBInstant=function(){this.emit(n.PlatformBase.INIT)},i.prototype.onStartFBInstant=function(){this.emit(n.PlatformBase.START);this.userId=FBInstant.player.getID();this.username=FBInstant.player.getName();this.userPhotoUrl=FBInstant.player.getPhoto();this.emit(n.PlatformBase.READY);throw new Error("need create token");},i.prototype.requestRewardedVideo=function(n){var t=this;FBInstant.getRewardedVideoAsync(0).then(function(i){t._lastVideo=i;n({code:"OK",message:""})},n)},i.prototype.showRewardedVideo=function(n){var t=this;this._lastVideo&&this._lastVideo.loadAsync().then(function(){return t._lastVideo.showAsync()},n).then(function(){n({code:"SHOWED",message:""})},n)},Object.defineProperty(i.prototype,"progress",{get:function(){return this._progress},set:function(n){this._progress=n;FBInstant.setLoadingProgress(n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"appId",{get:function(){return-1},enumerable:!0,configurable:!0}),i}(n.PlatformBase);t.FB_REWARDEDVIDEO_PLACEMENT="my_placement_id";n.FBInstantGames=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.createService=function(t){return this.service=t?new n.TestService:new n.ZyngaGames,this.service},i}(PIXI.utils.EventEmitter);n.Platform=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t,i;(function(n){n[n.STAKES=1]="STAKES";n[n.BUY_IN=2]="BUY_IN"})(t=n.StakesType||(n.StakesType={}));i=function(){function t(){this._tables=[]}return t.prototype.setData=function(i){var r=this;i&&i.data&&i.data.tableConfig&&(n.trace("TABLES CONFIG LOADED"),i.data.tableConfig.forEach(function(n){var i=n.table_id,u=n.big_blind,f=n.big_blind/2,e=n.min_buyin,o=n.max_buyin;r._tables[i]={id:i,bigBlind:u,smallBlind:f,minBuyIn:e,maxBuyIn:o,name:t.TABLES_INFO[i].name,type:t.TABLES_INFO[i].type,stakesType:t.TABLES_INFO[i].stakesType,avatarId:t.TABLES_INFO[i].avatarId}}),n.ModelEvents.emit(n.ModelEvent.MODEL_TABLES_CONFIG,n.ModelEvent.UPDATE))},t.prototype.getTable=function(n){return this._tables[n]},t.prototype.getTables=function(){return this._tables},t.prototype.calculateBuyIn=function(t,i){var u=i||0,r=this._tables[t];return r||n.trace("[table config is not exists]"),Math.max(Math.min(u,r.maxBuyIn),r.minBuyIn)},t}();i.TABLES_INFO={1:{name:"BASIC",type:"CASH TABLES",stakesType:t.STAKES,avatarId:3},2:{id:2,name:"STANDARD",type:"CASH TABLES",stakesType:t.STAKES,avatarId:1},3:{id:3,name:"PRO",type:"CASH TABLES",stakesType:t.STAKES,avatarId:2}};n.MDTablesConfig=i})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var r,i,t;(function(n){n[n.HighCard=1]="HighCard";n[n.OnePair=2]="OnePair";n[n.TwoPair=3]="TwoPair";n[n.ThreeKind=4]="ThreeKind";n[n.Straight=5]="Straight";n[n.Flush=6]="Flush";n[n.FullHouse=7]="FullHouse";n[n.FourKind=8]="FourKind";n[n.StraightFlush=9]="StraightFlush";n[n.RoyalFlush=10]="RoyalFlush"})(r=n.HandRankCombination||(n.HandRankCombination={}));i=function(){function t(){}return t.parse=function(n){var i=new t;i.update(n)},t.prototype.update=function(t){var r,f,s,e,u,o,i;for(this.banks=[],r=0,f=t.data;r<f.length;r++){for(s=f[r],e={players:Array()},u=0,o=s;u<o.length;u++)i=o[u],e.players.push({cards:n.MCard.parseCards(i.cards),kickers:n.MCard.parseCards(i.kickers),playerId:i.playerId,comb:i.comb,seatIdx:i.seatIdx,stack:i.stack,winSumm:i.winSumm});this.banks.push(e)}},t}();n.MHandRankingResult=i;t=function(){function t(){this.users=new n.MUsers;this.seats=[1,2,3,4,5];this.pots=[];this.cards=[];this.bettingTime=30;this.handRankinkResult=new i;this.inited=!1}return Object.defineProperty(t.prototype,"fullPot",{get:function(){for(var r,u=this.pots[0]||0,t=0,n=0,i=this.users.getAll(!1);n<i.length;n++)r=i[n],t+=r.bet;return u+t+(this.users.maxBet||0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"halfOfPot",{get:function(){return this.fullPot/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"betStep",{get:function(){return this.bigBlind},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minBetToRaise",{get:function(){return Math.min(this.users.maxBet&&this.users.maxBet*2||this.bigBlind*2,this.maxBetToRaise)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxBetToRaise",{get:function(){var t=this.users.me;return Math.min(n.Model.table.users.maxNotMyFullStack-t.bet,t.stack)},enumerable:!0,configurable:!0}),t.prototype.setData=function(i){var r,u;i&&(r={Flop:t.STATE_FLOP,Turn:t.STATE_TURN,River:t.STATE_RIVER,Showdown:t.STATE_SHOWDOWN,HandRanking:t.STATE_HAND_RANKING},r[i.func]&&n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.BEFORE_CHANGE_STATE,{state:r[i.func]}),i.func=="AddPlayer"&&(u=i.data.data.id,u==this.users.me.id&&this.setSeats(i.data.data.seatIdx)),this.users.setData(i),i.func=="poker.findTable"?this.id=i.data.id:i.func=="Leave"?this.clearGame():i.func=="WaitPlayers"?(this.state=t.STATE_WAIT_PLAYERS,n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.CHANGE_STATE)):i.func=="TableInfo"?(this.smallBet=i.data.smallBet,this.smallBlind=i.data.smallBlind,this.bigBet=i.data.bigBet,this.bigBlind=i.data.bigBlind,this.betType=i.data.betType,this.dealer=this.users.getUserBySeat(i.data.dealerSeat),this.state=i.data.gameState,this.playerBetting=this.users.getUserBySeat(i.data.playerBetting),this.bettingTime=i.data.speed,n.trace("this.users.me.seatId = "+this.users.me.seatId),this.setSeats(this.users.me.seatId),this.cards=n.MCard.parseCards(i.data.cards),this.inited=!0,n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.INIT)):i.func=="StartGame"?(this.cards=[],this.users.setAllActive(),this.state=t.STATE_START_GAME,this.dealer=this.users.getUserBySeat(i.data.data.dealerSeat),this.winSeatIds=[],n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.CHANGE_STATE)):i.func=="Deal"?n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.TABLE_DEAL):i.func=="SmallBlind"?(this.playerBetting=this.users.getUserBySeat(i.data.data.playerBetting),this.smallBlind=i.data.data.bet,this.state=t.STATE_SMALL_BLIND,n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.CHANGE_STATE),n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.BET_ACTION)):i.func=="BigBlind"?(this.playerBetting=this.users.getUserBySeat(i.data.data.playerBetting),this.bigBlind=i.data.data.bet,this.state=t.STATE_BIG_BLIND,n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.CHANGE_STATE),n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.BET_ACTION)):i.func=="Preflop"?(this.playerBetting=this.users.getUserBySeat(i.data.data.playerBetting),this.state=t.STATE_PREFLOP,n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.CHANGE_STATE)):i.func=="Flop"?(this.playerBetting=this.users.getUserBySeat(i.data.data.playerBetting),this.pots=i.data.data.pots,this.cards=n.MCard.parseCards(i.data.data.cards),this.state=t.STATE_FLOP,n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.CHANGE_STATE),this.gotoWaitBet()):i.func=="Turn"||i.func=="River"?(this.playerBetting=this.users.getUserBySeat(i.data.data.playerBetting),this.pots=i.data.data.pots,this.cards.push(n.MCard.parseCard(i.data.data.card)),this.state=i.func=="Turn"?t.STATE_TURN:t.STATE_RIVER,n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.CHANGE_STATE),this.gotoWaitBet()):i.func=="WaitBet"?(this.playerBetting=this.users.getUserBySeat(i.data.data.playerBetting),this.state=t.STATE_WAIT_BET,n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.CHANGE_STATE)):i.func=="Bet"?(this.playerBetting=this.users.getUserBySeat(i.data.data.playerBetting),n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.BET_ACTION)):i.func=="Showdown"?(this.pots=i.data.data.pots,this.state=t.STATE_SHOWDOWN,n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.CHANGE_STATE)):i.func=="AllInShowdown"?(this.pots=i.data.data.pots,n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.ALL_IN_SHOWDOWN)):i.func=="HandRanking"&&(this.state=t.STATE_HAND_RANKING,this.handRankinkResult.update(i.data),n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.CHANGE_STATE)))},t.prototype.setSeats=function(i){var r,u;for(this.seats=[],u=0;u<t.MAX_PLAYERS;u++)r=i+u,r>t.MAX_PLAYERS&&(r-=t.MAX_PLAYERS),this.seats.push(r);n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.SET_SEATS)},Object.defineProperty(t.prototype,"potsSum",{get:function(){for(var t=0,n=0;n<this.pots.length;n++)t+=this.pots[n];return t},enumerable:!0,configurable:!0}),t.prototype.gotoWaitBet=function(){this.state=t.STATE_WAIT_BET;n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.CHANGE_STATE)},t.prototype.clearGame=function(){this.users.clearGame();n.ModelEvents.emit(n.ModelEvent.MODEL_TABLE,n.ModelEvent.CLEAR)},t}();t.STATE_WAIT_PLAYERS=0;t.STATE_START_GAME=1;t.STATE_SMALL_BLIND=2;t.STATE_BIG_BLIND=3;t.STATE_WAIT_BET=4;t.STATE_PREFLOP=5;t.STATE_FLOP=6;t.STATE_TURN=7;t.STATE_RIVER=8;t.STATE_SHOWDOWN=9;t.STATE_HAND_RANKING=10;t.MAX_PLAYERS=5;n.MTable=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return n.getTypeByAction=function(t){return t==n.ACTION_NONE||t==n.ACTION_SMALL_BLIND||t==n.ACTION_BET?n.TYPE_BET_GREEN:t==n.ACTION_BIG_BLIND?n.TYPE_BET_ORANGE:t==n.ACTION_FOLD?n.TYPE_FOLD:t==n.ACTION_CHECK?n.TYPE_CHECK:t==n.ACTION_CALL?n.TYPE_CALL:t==n.ACTION_RAISE||t==n.ACTION_All_IN?n.TYPE_RAISE:void 0},n}(),i;t.ACTION_NONE=0;t.ACTION_SMALL_BLIND=1;t.ACTION_BIG_BLIND=2;t.ACTION_FOLD=3;t.ACTION_CHECK=4;t.ACTION_BET=5;t.ACTION_CALL=6;t.ACTION_RAISE=7;t.ACTION_All_IN=8;t.TYPE_CHIP="bet_chip";t.TYPE_BET_GREEN="bet_b_green";t.TYPE_BET_ORANGE="bet_b_orange";t.TYPE_CALL="bet_call";t.TYPE_FOLD="bet_fold";t.TYPE_CHECK="bet_check";t.TYPE_RAISE="bet_raise";n.MBet=t;i=function(){function i(){this.stack=0;this.dealer=!1;this.seatId=0;this.state=0;this.betAction=0;this.bet=0;this.winPot1=0;this.winPot2=0;this.isMe=!1;this.folded=!1}return i.prototype.setData=function(n){this.id=n.id||n.userId||this.id;this.name=n.display_name||n.name||n.login||n.username||this.name;this.photo=n.photo||this.photo;this.stack=n.stack!=undefined?n.stack:this.stack;this.seatId=n.seatIdx||this.seatId;this.betAction=n.betAction!=undefined?n.betAction:this.betAction;this.state=n.state!=undefined?n.state:this.state;this.updateFolded();n.cards&&this.setCards(n.cards)},i.prototype.setCards=function(t){var i=n.MCard.parseCards(t);i.length>=2&&(this.card1=i[0],this.card2=i[1])},i.prototype.updateFolded=function(){this.folded=this.betAction==t.ACTION_FOLD},i.prototype.clearCards=function(){this.card1=this.card2=null},i.prototype.setWinPot1=function(n){this.winPot1=n},i.prototype.setWinPot2=function(n){this.winPot2=n},i.prototype.updateStackByWin=function(n){n<this.stack||(this.stack=n)},Object.defineProperty(i.prototype,"winner",{get:function(){return this.winPot1>0||this.winPot2>0},enumerable:!0,configurable:!0}),i.prototype.getJSON=function(){return{id:this.id,platformId:this.platformId,name:this.name,photo:this.photo,money:this.stack}},i}();i.STATE_WAIT=0;i.STATE_PLAING=1;i.STATE_GET_UP=2;i.STATE_DISCONNECT=3;i.STATE_NOT_RESPONCE=4;n.MUser=i})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;return n.timeHourlyDrip=i.DEFAULT_TIME_HOURLY_DRIP,n.earned=0,n.level=1,n.xp=0,n.progressForNextLevel=0,n.seatInGame=!1,n.isMe=!0,n}return __extends(i,t),i.prototype.setData=function(n){t.prototype.setData.call(this,n);this.balance=n.bankroll!=undefined?n.bankroll:this.balance},i.prototype.updateBalance=function(t){var i=undefined,r;t.bankroll!=undefined?i=t.bankroll:t.chips!=undefined&&(i=t.chips);r=i-this.balance;this.earned=r!==Number.NaN?r:0;this.balance=i==undefined?this.balance:i;n.ModelEvents.emit(n.ModelEvent.MODEL_ME,n.ModelEvent.UPDATE);n.ModelEvents.emit(n.ModelEvent.MODEL_ME_MONEY,n.ModelEvent.UPDATE);t.isHourlyDrip&&n.ModelEvents.emit(n.ModelEvent.MODEL_ME_HOURLY_DRIP,n.ModelEvent.UPDATE);t.isRewardedVideo&&n.ModelEvents.emit(n.ModelEvent.MODEL_ME_REWARDED,n.ModelEvent.UPDATE)},i.prototype.updateAvailabilities=function(t){t.availableHourlyDrip!==undefined&&(this.availableHourlyDrip=t.availableHourlyDrip);t.timeHourlyDrip!==undefined&&(this.timeHourlyDrip=t.timeHourlyDrip);t.availableRewardedVideo!==undefined&&(this.availableRewardedVideo=t.availableRewardedVideo);n.ModelEvents.emit(n.ModelEvent.MODEL_ME,n.ModelEvent.UPDATE)},i.prototype.updateLevel=function(t){t.xp!==undefined&&(this.xp=t.xp,this.level=n.Model.levels.getLevelByXp(this.xp),this.progressForNextLevel=n.Model.levels.getProgressByXp(this.xp));n.ModelEvents.emit(n.ModelEvent.MODEL_ME,n.ModelEvent.UPDATE)},i.prototype.login=function(i){t.prototype.setData.call(this,i);n.ModelEvents.emit(n.ModelEvent.MODEL_ME,n.ModelEvent.UPDATE)},i.prototype.hourlyDripDecrement=function(){if(this.timeHourlyDrip<=0){this.timeHourlyDrip=0;return}this.timeHourlyDrip--;this.availableHourlyDrip=this.timeHourlyDrip===0;n.ModelEvents.emit(n.ModelEvent.MODEL_ME,n.ModelEvent.UPDATE)},i.prototype.getJSON=function(){return t.prototype.getJSON.call(this)},i}(n.MUser);t.DEFAULT_TIME_HOURLY_DRIP=300;n.MMyUser=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(){this._me=new n.MMyUser;this._users=[]}return Object.defineProperty(t.prototype,"me",{get:function(){return this._me},enumerable:!0,configurable:!0}),t.prototype.initMe=function(n){this._me.platformId=n.userId;this._me.name=n.username;this._me.photo=n.userPhotoUrl},Object.defineProperty(t.prototype,"maxBet",{get:function(){for(var t=0,n=0;n<this._users.length;n++)this._users[n].bet>t&&(t=this._users[n].bet);return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNotMyFullStack",{get:function(){for(var n,t=0,i=0,r=this._users;i<r.length;i++)n=r[i],n.isMe||(t=Math.max(t,n.stack+n.bet));return t},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){var i,r,u,e,s,o;if(t.func=="login")this._me.login(t.data);else if(t.func=="balance")this._me.updateBalance(t.data),this._me.updateAvailabilities(t.data),this._me.updateLevel(t.data);else if(t.func=="UpdateBalance")this._me.updateBalance(t.data);else if(t.func=="UpdateXp")this._me.updateLevel(t.data);else if(t.func=="users_info")for(u=t.data.users,r=0;r<u.length;r++)i=this.getUserById(u[r].id),i&&(i.photo=u[r].avatar_url||i.photo,i.name=u[r].display_name||i.name,n.ModelEvents.emit(n.ModelEvent.MODEL_USERS,n.ModelEvent.UPDATE,{user_id:i.id}));else if(t.func=="TableInfo"){for(this._users=[],r=0;r<t.data.players.length;r++)i=t.data.players[r].id==this._me.id?this._me:new n.MUser,i.setData(t.data.players[r]),this._users.push(i);this._me.seatInGame=this._users.indexOf(this._me)!=-1;n.ModelEvents.emit(n.ModelEvent.MODEL_USERS,n.ModelEvent.INIT)}else if(t.func=="Deal"){for(r=0;r<this._users.length;r++)this._users[r].winPot1=this._users[r].winPot2=0;this._me.setCards(t.data.data.cards)}else if(t.func=="AddPlayer")i=t.data.data.id==this._me.id?this._me:new n.MUser,i.setData(t.data.data),this._users.push(i),this._me.seatInGame=this._users.indexOf(this._me)!=-1,n.ModelEvents.emit(n.ModelEvent.MODEL_USERS,n.ModelEvent.ADD,{user_id:i.id});else if(t.func=="ErasePlayer")e=this.getUserById(t.data.data.id),e&&(s=this._users.indexOf(e),s!=-1&&this._users.splice(s,1),this._me.seatInGame=this._users.indexOf(this._me)!=-1,n.ModelEvents.emit(n.ModelEvent.MODEL_USERS,n.ModelEvent.DELETE,{user_id:e.id}));else if(t.func=="SmallBlind"||t.func=="BigBlind"||t.func=="Bet")i=this.getUserBySeat(t.data.data.playerBetting),i&&(i.stack=t.data.data.stack,i.bet=t.data.data.bet,t.func=="Bet"?(i.betAction=t.data.data.betAction,i.updateFolded()):t.func=="SmallBlind"?i.betAction=n.MBet.ACTION_SMALL_BLIND:t.func=="BigBlind"&&(i.betAction=n.MBet.ACTION_BIG_BLIND),n.ModelEvents.emit(n.ModelEvent.MODEL_USERS,n.ModelEvent.UPDATE,{user_id:i.id}));else if(t.func=="StartGame"||t.func=="Flop"||t.func=="Turn"||t.func=="River")this.clearBets();else if(t.func=="Showdown"||t.func=="AllInShowdown")for(t.func=="Showdown"&&this.clearBets(),o=t.data.data.cards,r=0;r<o.length;r++)i=this.getUserBySeat(o[r].seatIdx),i&&i.setCards(o[r].cards);else if(t.func=="HandRanking"){this.clearBets();var h=t.data.data,f=h[0],c=h.length>1?h[1]:[];for(r=0;r<f.length;r++)i=this.getUserBySeat(f[r].seatIdx),i&&(i.setWinPot1(f[r].winSumm),i.updateStackByWin(f[r].stack));for(r=0;r<c.length;r++)i=this.getUserBySeat(c[r].seatIdx),i&&(i.setWinPot2(f[r].winSumm),i.updateStackByWin(c[r].stack))}},t.prototype.clearBets=function(){for(var t=0;t<this._users.length;t++)this._users[t].bet=0,this._users[t].betAction=n.MBet.ACTION_NONE},t.prototype.getAll=function(n){return n?this._users:this._users.filter(function(n){return!n.isMe})},t.prototype.getWinners=function(){return this._users.filter(function(n){return n.winner})},t.prototype.setAllActive=function(){for(var t=0;t<this._users.length;t++)this._users[t].folded=!1,this._users[t].state==n.MUser.STATE_WAIT&&(this._users[t].state=n.MUser.STATE_PLAING)},t.prototype.getUserById=function(n){if(this._me.id==n)return this._me;for(var t=0;t<this._users.length;t++)if(this._users[t].id==n)return this._users[t];return null},t.prototype.getUserBySeat=function(n){if(this._me.seatId==n)return this._me;for(var t=0;t<this._users.length;t++)if(this._users[t].seatId==n)return this._users[t];return null},t.prototype.getOccupiedSeats=function(){return this._users.map(function(n){return n.seatId})},t.prototype.clearGame=function(){this._me.clearCards();this._users=[]},t.prototype.generateRandomUsers=function(){for(var t,i=0;i<10;i++)t=new n.MUser,t.id=i.toString(),t.name="Test"+i,t.photo="assets/sprites/avatars/avatar"+i+".jpg",this._users.push(t)},t.prototype.getRandomUser=function(){return this._users.length==0?null:this._users[n.MathHelper.getRandomMinToMax(0,this._users.length-1)]},t}();n.MUsers=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(){this._paused=!1}return t.prototype.init=function(n,t,i){this._container=n;this._containerReal=t;this._containerSafe=i},t.prototype.onResize=function(){n.Resources.clearCache()},t.prototype.update=function(){},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.isPaused=function(){return this._paused},t.removeFromParent=function(n){for(var t=0;t<n.length;t++)n[t].parent&&n[t].parent.removeChild(n[t])},t.prototype.destroy=function(){},t}();n.SceneController=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(i){function r(){var r=i.call(this)||this,u;r.USER_PANEL_WIDTH_KOEF=.25;r.USER_PANEL_OFFSET_LEFT_KOEF=.022;r.USER_PANEL_OFFSET_TOP_KOEF=.03;r.SETTINGS_WIDTH_KOEF=.3;r.SETTINGS_HEIGHT_KOEF=1;r.SETTINGS_OFFSET_RIGHT_KOEF=0;r.SETTINGS_OFFSET_TOP_KOEF=0;r.REWARD_VIDEO_POPUP_WIDTH_KOEF=.62;r.REWARD_VIDEO_POPUP_HEIGHT_KOEF=.91;r.TABLE_UNIT_WIDTH_KOEF=.2;r.TABLE_UNIT_OFFSET_LEFT_KOEF=.28;r.TABLE_UNIT_OFFSET_TOP_KOEF=.21;r.TABLE_UNITS_INTERVAL_KOEF=.04;r.FREE_CHIPS_PANEL_WIDTH_KOEF=.195;r.FREE_CHIPS_PANEL_OFFSET_LEFT_KOEF=.035;r.FREE_CHIPS_PANEL_OFFSET_TOP_KOEF=.21;r.OPEN_SETTINGS_BUTTON_WIDTH_KOEF=.082;r.OPEN_SETTINGS_BUTTON_OFFSET_LEFT_KOEF=.9;r.OPEN_SETTINGS_BUTTON_OFFSET_TOP_KOEF=.033;r.ADD_FRIEND_BUTTON_WIDTH_KOEF=.08;r.ADD_FRIEND_BUTTON_OFFSET_LEFT_KOEF=.035;r.ADD_FRIEND_BUTTON_OFFSET_TOP_KOEF=.804;r.CHIP_COUNTER_OFFSET_TOP_KOEF=.066;r.CHIP_COUNTER_HEIGHT_KOEF=.085;r.HOURLY_DRIP_OFFSET_TOP_KOEF=.03;r.HOURLY_DRIP_OFFSET_LEFT_KOEF=.7;r.HOURLY_DRIP_HEIGHT_KOEF=.138;r.HOURLY_DRIP_TIP_FONT_SIZE_KOEF=.051;r._settingsData=[{title:"Sound FX",value:!0},];r._tableUnits=[];r._tableUnitsPairs={};r._showSettings=!1;r._showRewardVideoPopup=!1;r.needConnect=!0;r._lobbyContReal=new PIXI.Container;r._bg=new t.Bg;r._userPanel=new t.UserPanel;r._lobbyContReal.addChild(r._userPanel);r.updateUserPanelData();r._openSettingsButton=new t.OpenSettingsButton;r._openSettingsButton.on(t.OpenSettingsButton.EVENT_CLICK,r.toggleSettings,r);r._lobbyContReal.addChild(r._openSettingsButton);r._addFriendButton=new n.AddFriendButton;r._addFriendButton.on(n.AddFriendButton.EVENT_CLICK,r.onAddFriendButtonClick,r);r._lobbyContReal.addChild(r._addFriendButton);r._chipCounter=new t.ChipCounter;r._lobbyContReal.addChild(r._chipCounter);r._hourlyDrip=new t.HourlyDrip;r._hourlyDrip.visible=!1;r._hourlyDrip.on(t.HourlyDrip.EVENT_CLICK,r.getHourlyDrip,r);r._lobbyContReal.addChild(r._hourlyDrip);r._freeChipsPanel=new t.FreeChipsPanel;r._lobbyContReal.addChild(r._freeChipsPanel);r._freeChipsPanel.disabled=n.RewardedVideoController.instance.status!=n.RewardedVideoController.AVAILABLE;n.RewardedVideoController.instance.on(n.RewardedVideoController.AVAILABLE,function(){r._freeChipsPanel.disabled=!1});n.RewardedVideoController.instance.on(n.RewardedVideoController.TICK,function(){});r._freeChipsPanel.pictureTexture=n.Resources.getTexture("lobby/free_chips_picture/1");r._freeChipsPanel.on(t.FreeChipsPanel.EVENT_CLICK,r.tryWathVideo,r);if(u=r,r._tableUnitsCont=new PIXI.Container,r._lobbyContReal.addChild(r._tableUnitsCont),r.prefarmTables(),r.initChipsCount(),r.initHourlyDrip(),r._settings=new t.Settings(function(){return u.toggleSettings()}),r.initSettings(),r._lobbyContReal.addChild(r._settings),n.Config.isLocalHost||n.Config.isBitball){r._btnsCont=new PIXI.Container;r._btnTest=new t.SelectTableButton("Test");r._btnTest.on(t.SelectTableButton.EVENT_CLICK,r.onButtonConnectClick,r);r._btnDev=new t.SelectTableButton("Dev");r._btnDev.on(t.SelectTableButton.EVENT_CLICK,r.onButtonConnectClick,r);r._btnStaging=new t.SelectTableButton("Staging");r._btnStaging.on(t.SelectTableButton.EVENT_CLICK,r.onButtonConnectClick,r);r._btnProd=new t.SelectTableButton("Prod");r._btnProd.on(t.SelectTableButton.EVENT_CLICK,r.onButtonConnectClick,r);r._btnsCont.addChild(r._btnTest);r._btnsCont.addChild(r._btnDev);r._btnsCont.addChild(r._btnStaging);r._btnsCont.addChild(r._btnProd)}r.initPopups();r._hourlyDripTip=new t.HourlyDripTip;r._lobbyContReal.addChild(r._hourlyDripTip);n.ModelEvents.on(n.ModelEvent.MODEL_ME,r.onChangeMe,r);n.ModelEvents.on(n.ModelEvent.MODEL_ME_MONEY,r.onMoneyUpdated,r);n.ModelEvents.on(n.ModelEvent.MODEL_ME_HOURLY_DRIP,r.onHourlyDrip,r);n.ModelEvents.on(n.ModelEvent.MODEL_TABLE,r.onChangeTable,r);n.ModelEvents.on(n.ModelEvent.MODEL_TABLES_CONFIG,r.onTablesConfigLoaded,r);n.ModelEvents.on(n.ModelEvent.MODEL_ME_REWARDED,function(){r.attachHourlyDripTipToFreeChipsPanel();r._hourlyDripTip.show(n.Model.me.earned);r._freeChipsPanel.disabled=!0;r._rewardVideoPopup.earned=n.Model.me.earned;n.Statistic.Log(n.StatCounters.tap_w2e,n.Model.me.earned,{kingdom:"success"});n.Statistic.Log(n.StatCounters.currency_source,n.Model.me.earned,{kingdom:(n.Model.me.balance>>0).toString(),"class":"w2e"})},r);return window.joinTable=function(t){(new n.CommandUser).joinTable(t)},r}return __extends(r,i),r.prototype.pause=function(){i.prototype.pause.call(this);n.SceneController.removeFromParent([this._bg,this._lobbyContReal]);n.ModelEvents.off(n.ModelEvent.MODEL_ME_REWARDED,this.toggleRewardVideoPopup,this)},r.prototype.resume=function(){i.prototype.resume.call(this);this.onResize();n.ModelEvents.on(n.ModelEvent.MODEL_ME_REWARDED,this.toggleRewardVideoPopup,this);this.onMoneyUpdated();this._container.addChild(this._bg);n.Server.instance&&n.Server.instance.connected||!this._btnsCont||this._lobbyContReal.addChild(this._btnsCont);this._settings.visible=!1;this._containerReal.addChild(this._lobbyContReal);n.Server.instance.once(n.Server.READY,this.onServerConnect,this);if(n.Server.instance&&n.Server.instance.connected)n.Statistic.Log(n.StatCounters.menu_load,n.Model.me.balance);else n.Server.instance.once(n.Server.READY,function(){setTimeout(function(){n.Statistic.Log(n.StatCounters.menu_load,n.Model.me.balance)},100)})},r.prototype.onResize=function(){var t,o,s,h,c,r,u;i.prototype.onResize.call(this);t=n.Model.view;this._bg.setSize(t.gameFullWidth,t.gameFullHeight);this._userPanel.setWidth(t.gameRealWidth*this.USER_PANEL_WIDTH_KOEF);this._userPanel.setPosition(t.gameRealWidth*this.USER_PANEL_OFFSET_LEFT_KOEF,t.gameRealHeight*this.USER_PANEL_OFFSET_TOP_KOEF);this._openSettingsButton.setDiameter(t.gameRealWidth*this.OPEN_SETTINGS_BUTTON_WIDTH_KOEF);this._openSettingsButton.setPosition(t.gameRealWidth*this.OPEN_SETTINGS_BUTTON_OFFSET_LEFT_KOEF,t.gameRealHeight*this.OPEN_SETTINGS_BUTTON_OFFSET_TOP_KOEF);this._addFriendButton.setDiameter(t.gameRealWidth*this.ADD_FRIEND_BUTTON_WIDTH_KOEF);this._addFriendButton.setPosition(t.gameRealWidth*this.ADD_FRIEND_BUTTON_OFFSET_LEFT_KOEF,t.gameRealHeight*this.ADD_FRIEND_BUTTON_OFFSET_TOP_KOEF);this._freeChipsPanel.setWidth(t.gameRealWidth*this.FREE_CHIPS_PANEL_WIDTH_KOEF);this._freeChipsPanel.setPosition(t.gameRealWidth*this.FREE_CHIPS_PANEL_OFFSET_LEFT_KOEF,t.gameRealHeight*this.FREE_CHIPS_PANEL_OFFSET_TOP_KOEF);this._chipCounter.setHeight(t.gameRealHeight*this.CHIP_COUNTER_HEIGHT_KOEF);this._chipCounter.position.set(t.gameRealWidth/2-this._chipCounter.actualWidth/2,t.gameRealHeight*this.CHIP_COUNTER_OFFSET_TOP_KOEF);this._hourlyDrip.setHeight(t.gameRealHeight*this.HOURLY_DRIP_HEIGHT_KOEF);this._hourlyDrip.position.set(t.gameRealWidth*this.HOURLY_DRIP_OFFSET_LEFT_KOEF,t.gameRealHeight*this.HOURLY_DRIP_OFFSET_TOP_KOEF);var f=t.gameRealWidth*this.REWARD_VIDEO_POPUP_WIDTH_KOEF,e=t.gameRealHeight*this.REWARD_VIDEO_POPUP_HEIGHT_KOEF,a=t.gameRealWidth/2-f/2,v=t.gameRealHeight/2-e/2;this._rewardVideoPopup.setSize(f,e);this._rewardVideoPopup.position.set(a,v);var y=t.gameRealWidth*this.REWARD_VIDEO_POPUP_WIDTH_KOEF,p=t.gameRealHeight*this.REWARD_VIDEO_POPUP_HEIGHT_KOEF,w=t.gameRealWidth/2-f/2,b=t.gameRealHeight/2-e/2;this._notEnoughPopup.setSize(y,p);this._notEnoughPopup.position.set(w,b);o=t.gameRealWidth*.9;s=t.gameRealHeight*.9;this._videoPlayer.setSize(o,s);h=(t.gameRealWidth-this._videoPlayer.getWidth())/2;c=(t.gameRealHeight-this._videoPlayer.getHeight())/2;this._videoPlayer.position.set(h,c);this._hourlyDripTip.fontSize=t.gameRealHeight*this.HOURLY_DRIP_TIP_FONT_SIZE_KOEF;this.resizeTableUnits();r=t.gameRealWidth*this.TABLE_UNIT_WIDTH_KOEF/2;u=r*1.1;this._btnsCont&&(this._btnTest.setWidth(r,!0),this._btnDev.setWidth(r,!0),this._btnStaging.setWidth(r,!0),this._btnProd.setWidth(r,!0),this._btnsCont.x=t.gameRealWidth-r*5,this._btnsCont.y=this._addFriendButton.y,this._btnTest.x=0,this._btnDev.x=this._btnTest.x+u,this._btnStaging.x=this._btnDev.x+u,this._btnProd.x=this._btnStaging.x+u);var l=t.gameFullWidth*this.SETTINGS_WIDTH_KOEF,k=t.gameFullHeight*this.SETTINGS_HEIGHT_KOEF,d=t.gameRealWidth*(1-this.SETTINGS_OFFSET_RIGHT_KOEF)-l,g=t.gameRealHeight*this.SETTINGS_OFFSET_TOP_KOEF;this._settings.setSize(l,k);this._settings.setPosition(d,g)},r.prototype.attachHourlyDripTipToHourlyDrip=function(){var t=n.Model.view,i=this._hourlyDrip.x-this._hourlyDripTip.width-t.gameRealWidth*.1,r=this._hourlyDrip.y+this._hourlyDrip.getHeight()-this._hourlyDripTip.height;this._hourlyDripTip.position.set(i,r)},r.prototype.attachHourlyDripTipToFreeChipsPanel=function(){var n=this._freeChipsPanel.x+this._freeChipsPanel.getWidth()/2-this._hourlyDripTip.getWidth()/2,t=this._freeChipsPanel.y+this._freeChipsPanel.getHeight()/2;this._hourlyDripTip.position.set(n,t)},r.prototype.resizeTableUnits=function(){var t=this,i=n.Model.view,r=0;this._tableUnits.forEach(function(n){var u=i.gameRealWidth*t.TABLE_UNIT_WIDTH_KOEF,f=i.gameRealWidth*(t.TABLE_UNIT_OFFSET_LEFT_KOEF+t.TABLE_UNITS_INTERVAL_KOEF*r)+u*r,e=i.gameRealHeight*t.TABLE_UNIT_OFFSET_TOP_KOEF;n.setWidth(u);n.setPosition(f,e);r++})},r.prototype.onChangeMe=function(){this._hourlyDrip.disabled=!n.Model.me.availableHourlyDrip&&n.Model.me.timeHourlyDrip!=0;this._hourlyDrip.time=n.Model.me.timeHourlyDrip;this.updateUserPanelData()},r.prototype.updateUserPanelData=function(){this._userPanel.avatarSource=n.Model.me.photo;this._userPanel.level=n.Model.me.level;this._userPanel.progress=n.Model.me.progressForNextLevel},r.prototype.onVideoStart=function(t){this._videoPlayer.visible=!0;n.trace("video started with source",t)},r.prototype.onVideoFinish=function(t){this._videoPlayer.visible=!1;n.trace("video finished with source",t)},r.prototype.onHourlyDrip=function(){this._hourlyDripTip.show(n.Model.me.earned);this.attachHourlyDripTipToHourlyDrip();this._hourlyDripTip.show(n.Model.me.earned);n.Statistic.Log(n.StatCounters.tap_hourly_drip,n.Model.me.earned,{kingdom:"success"});n.Statistic.Log(n.StatCounters.currency_source,n.Model.me.earned,{kingdom:(n.Model.me.balance>>0).toString(),"class":"hourly_drip"})},r.prototype.onChangeTable=function(t){if(t.type==n.ModelEvent.INIT){n.ScenesManager.goToScene("game");var i=n.Model.me.stack;n.Statistic.Log(n.StatCounters.player_table_join,i,{kingdom:n.Model.table.level.toString()})}},r.prototype.onServerConnect=function(){if(this._btnsCont&&this._btnsCont.parent&&this._btnsCont.parent.removeChild(this._btnsCont),this.needConnect){var t=n.Platform.service.getInviteData();n.trace("[Entry Point Data]",t);t&&t.from=="table"&&((new n.CommandUser).joinTable(t.tableId),this.trackServerRejected())}this.needConnect=!1},r.prototype.trackServerRejected=function(){n.Server.instance.once(n.Server.ERROR,function(t){n.trace("Error:",t);t.code==4&&n.Statistic.Log(n.StatCounters.player_table_dropped,Math.min(n.Model.me.balance,n.Model.table.maxBuyIn),{kingdom:n.Model.table.level.toString()})})},r.prototype.onButtonConnectClick=function(t){if(t===this._btnTest?n.AuthController.connectToServer(n.Config.CONF_TEST):t===this._btnDev?n.AuthController.connectToServer(n.Config.CONF_DEV):t===this._btnStaging?n.AuthController.connectToServer(n.Config.CONF_STAGING):t===this._btnProd&&n.AuthController.connectToServer(n.Config.CONF_PROD),n.Server.instance)n.Server.instance.once(n.Server.READY,this.onServerConnect,this)},r.prototype.getHourlyDrip=function(){(new n.CommandUser).getHourlyDrip()},r.prototype.onMoneyUpdated=function(){var t=n.Model.me.balance;t!==undefined&&(this._hourlyDrip.visible=!0);this._chipCounter.count=t;this.calculateBuyIn()},r.prototype.calculateBuyIn=function(){var r=this,i=n.Model.me.balance,t=null;n.Model.tables.getTables().forEach(function(u){var e=r._tableUnitsPairs[u.id],f;e&&(f=n.Model.tables.calculateBuyIn(u.id,i),t=t!==null?Math.min(t,f):f,e.updateBuyIn(f),e.available=f<=i)});this._notEnoughPopup.visible=i<t},r.prototype.onTablesConfigLoaded=function(){var n=this;this._tableUnits.forEach(function(t){return n._tableUnitsCont.removeChild(t)});this.initTables();this._tableUnits.forEach(function(t){return n._tableUnitsCont.addChild(t)});this.calculateBuyIn()},r.prototype.toggleSettings=function(){var t=this;this._showSettings=!this._showSettings;this._showSettings?(this._settings.musicEnabled=n.Sounds.musicEnabled,this._settings.soundsEnabled=n.Sounds.soundsEnabled,this._settings.visible=!0,this._settings.position.x=n.Model.view.gameRealWidth,n.Tweener.to(this._settings,.25,{pixi:{positionX:n.Model.view.gameRealWidth-this._settings._w}})):n.Tweener.to(this._settings,.25,{pixi:{positionX:n.Model.view.gameRealWidth},onComplete:function(){t._settings.visible=!1}})},r.prototype.onAddFriendButtonClick=function(){n.Platform.service.requestShareAsync({text:"Go to Poker!"}).then(function(){(new n.CommandUser).setBalance(n.Model.me.balance+1e3);console.warn("[FRIEND BUTTON] send ShareToFriend on server for getting reward")},function(n){console.error("[share request rejected]",n)})},r.prototype.onSelectTable=function(t){this.trackServerRejected();(new n.CommandUser).findTable(t);n.Model.table.minBuyIn=n.Model.tables.getTable(t).minBuyIn;n.Model.table.maxBuyIn=n.Model.tables.getTable(t).maxBuyIn;n.Model.table.level=t;var i=Math.min(n.Model.me.balance,n.Model.table.maxBuyIn);n.Statistic.Log(n.StatCounters.player_table_choose,i,{kingdom:n.Model.table.level.toString()})},r.prototype.isWathedOk=function(){console.log("Watch reward video ok");(new n.CommandUser).getRewardedVideo()},r.prototype.tryWathVideo=function(){var t=this;n.RewardedVideoController.instance.show(function(i){i.code=="SHOWED"?t.isWathedOk():n.Statistic.Log(n.StatCounters.tap_w2e,null,{kingdom:"failure"})})},r.prototype.onNotEnoughOk=function(){this.tryWathVideo();this.toggleNotEnoughPopup()},r.prototype.onSelectTableWithSettings=function(n){this.onSelectTable(n)},r.prototype.toggleRewardVideoPopup=function(){this._rewardVideoPopup.visible=!this._rewardVideoPopup.visible;this._freeChipsPanel.interactive=!this._rewardVideoPopup.visible},r.prototype.toggleNotEnoughPopup=function(){console.log("toggle to ",!this._notEnoughPopup.visible);this._notEnoughPopup.disabled=!(n.RewardedVideoController.instance.status===n.RewardedVideoController.AVAILABLE);this._notEnoughPopup.visible=!this._notEnoughPopup.visible},r.prototype.destroy=function(){n.trace("destroy");i.prototype.destroy.call(this);this._container.destroy({children:!0});this._containerReal.destroy({children:!0})},r.prototype.initPopups=function(){this._rewardVideoPopup=new t.RewardVideoPopup;this._rewardVideoPopup.earned=45e3;this._rewardVideoPopup.visible=!1;this._rewardVideoPopup.on(t.RewardVideoPopup.EVENT_CLOSE,this.toggleRewardVideoPopup,this);this._rewardVideoPopup.on(t.RewardVideoPopup.EVENT_OK,this.tryWathVideo,this);this._lobbyContReal.addChild(this._rewardVideoPopup);this._notEnoughPopup=new t.NotEnoughPopup;this._notEnoughPopup.on(t.NotEnoughPopup.EVENT_CLOSE,this.toggleNotEnoughPopup,this);this._notEnoughPopup.on(t.NotEnoughPopup.EVENT_OK,this.onNotEnoughOk,this);this._notEnoughPopup.visible=!1;this._lobbyContReal.addChild(this._notEnoughPopup);this._videoPlayer=new t.VideoPlayer;this._videoPlayer.visible=!1;this._videoPlayer.on(t.VideoPlayer.EVENT_START,this.onVideoStart,this);this._videoPlayer.on(t.VideoPlayer.EVENT_FINISH,this.onVideoFinish,this);this._lobbyContReal.addChild(this._videoPlayer)},r.prototype.initChipsCount=function(){this._chipCounter.count=n.Model.me.balance},r.prototype.initSettings=function(){var t=this,i=this;this._settingsData.forEach(function(r,u){var f=r.title,e=r.value;t._settings.addSettings(f,e,u%2==0,function(r){i._settingsData[u].value=r;f=="Sound FX"?(n.Sounds.soundsEnabled=r,t._settings.soundsEnabled=n.Sounds.soundsEnabled,n.Store.set("sound",{sounds:n.Sounds.soundsEnabled,music:n.Sounds.musicEnabled})):f=="Music"&&(n.Sounds.musicEnabled=r,t._settings.musicEnabled=n.Sounds.musicEnabled,n.Store.set("sound",{sounds:n.Sounds.soundsEnabled,music:n.Sounds.musicEnabled}))})});this._settings.soundsEnabled=n.Sounds.soundsEnabled;this._settings.musicEnabled=n.Sounds.musicEnabled},r.prototype.prefarmTables=function(){for(var n,i=0;i<3;i++)n=new t.TableUnit,n.setParams({name:["BASIC","STANDART","PRO"][i]}),n.available=!1,this._tableUnits.push(n),this._tableUnitsCont.addChild(n)},r.prototype.initTables=function(){var i=this,r=0;n.Model.tables.getTables().forEach(function(n){var u=i._tableUnits[r++];u||(u=new t.TableUnit,i._tableUnits.push(u));i._tableUnitsPairs[n.id]=u;u.setParams(n);u.on(t.TableUnit.EVENT_SELECT_TABLE,function(){return i.onSelectTable(n.id)},i);u.on(t.TableUnit.EVENT_SELECT_TABLE_WITH_SETTINGS,function(){return i.onSelectTableWithSettings(n.id)},i)});this.resizeTableUnits()},r.prototype.initHourlyDrip=function(){setInterval(function(){n.Model.me.hourlyDripDecrement()},1e3)},r}(n.SceneController);t.LobbySceneController=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t,i;(function(n){n[n.AddPlayer=1]="AddPlayer";n[n.ErasePlayer=2]="ErasePlayer";n[n.Leave=9]="Leave";n[n.StartGame=100]="StartGame";n[n.Deal=101]="Deal";n[n.SmallBlind=102]="SmallBlind";n[n.BigBlind=103]="BigBlind";n[n.WaitBet=104]="WaitBet";n[n.Bet=105]="Bet";n[n.Preflop=106]="Preflop";n[n.Flop=107]="Flop";n[n.Turn=108]="Turn";n[n.River=109]="River";n[n.Showdown=110]="Showdown";n[n.HandRanking=111]="HandRanking";n[n.WaitPlayers=112]="WaitPlayers";n[n.AllInShowdown=113]="AllInShowdown"})(t=n.OppCodes||(n.OppCodes={}));i=function(){function i(){}return i.prototype.beforeSend=function(t){var i;return t.func==n.CommandUser.COMMAND_FIND_TABLE?i={rpc:{id:n.CommandUser.COMMAND_FIND_TABLE,payload:JSON.stringify({level:t.data.level})}}:t.func==n.CommandUser.COMMAND_GET_HOURLY_DRIP?i={rpc:{id:"getHourlyDrip",payload:JSON.stringify(undefined)}}:t.func==n.CommandUser.COMMAND_GET_REWARDED_VIDEO?i={rpc:{id:"getRewardVideo",payload:JSON.stringify(undefined)}}:t.func==n.CommandUser.COMMAND_STAND_UP?i={match_data_send:{match_id:t.data.id,op_code:6,data:{}}}:t.func==n.CommandUser.COMMAND_SEAT?i={match_data_send:{match_id:t.data.id,op_code:8,data:{seatIdx:t.data.seatIdx}}}:t.func==n.CommandUser.COMMAND_JOIN_TABLE?i={match_join:{match_id:t.data.id}}:t.func==n.CommandUser.COMMAND_LEAVE_TABLE?i={match_data_send:{match_id:t.data.id,op_code:9,data:{}}}:t.func==n.CommandUser.COMMAND_SET_BALANCE?i={rpc:{id:"setChips",payload:JSON.stringify({chips:t.data.amount})}}:t.func==n.CommandAction.COMMAND_FOLD||t.func==n.CommandAction.COMMAND_CHECK||t.func==n.CommandAction.COMMAND_CALL||t.func==n.CommandAction.COMMAND_BET||t.func==n.CommandAction.COMMAND_RAISE||t.func==n.CommandAction.COMMAND_ALL_IN?(i={match_data_send:{match_id:t.data.table_id,op_code:105,data:{action:t.func}}},(t.func==n.CommandAction.COMMAND_BET||t.func==n.CommandAction.COMMAND_RAISE)&&(i.match_data_send.data.amount=t.data.amount)):i=t,i},i.prototype.beforeReceive=function(i){var r,u,f;return i?(i.user?r={func:"login",data:i.user}:i.users?r={func:"users_info",data:i}:i.payload&&i.payload.chips!==undefined&&i.payload.token?r={func:"balance",data:{bankroll:i.payload.chips,availableHourlyDrip:i.payload.availableHourlyDrip,availableRewardedVideo:i.payload.availableRewardedVideo,timeHourlyDrip:i.payload.timeHourlyDrip,levels:i.payload.levels,xp:i.payload.xp,tableConfig:i.payload.tableConfig}}:i.rpc&&i.rpc.id&&i.rpc.id=="setChips"?(i=JSON.parse(i.rpc.payload),r={func:"balance",data:{bankroll:i.chips}}):i.rpc&&i.rpc.id&&(i.rpc.id=="getHourlyDrip"||i.rpc.id=="getRewardVideo")?(u=JSON.parse(i.rpc.payload),r={func:"balance",data:{isHourlyDrip:i.rpc.id==="getHourlyDrip",isRewardedVideo:i.rpc.id==="getRewardVideo",bankroll:u.chips,availableHourlyDrip:!1,timeHourlyDrip:u.timeHourlyDrip||n.MMyUser.DEFAULT_TIME_HOURLY_DRIP}}):i.op_code?(f=t[i.op_code],r={func:f,data:i.data}):i.rpc&&i.rpc.id?r={func:i.rpc.id,data:JSON.parse(i.rpc.payload).data}:i.subject&&i.subject?(i.content=JSON.parse(i.content),r={func:i.subject,data:i.content}):r=i.match?{func:n.CommandUser.EVENT_MATCH,data:i.match}:i,r):null},i}();n.NakamaHardCode=i})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(){}return t.findTable=function(t){(new n.CommandUser).joinTable(t.data.id)},t.tableInfo=function(){t.loadUsersInfo()},t.addPlayer=function(){t.loadUsersInfo()},t.loadUsersInfo=function(){for(var i=n.Model.table.users.getAll(!0),r=[],t=0;t<i.length;t++)i[t].photo&&i[t].photo.indexOf("assets")==-1||r.push(i[t].id);r.length>0&&(new n.CommandUser).getUsersInfo(r)},t.loginError=function(){},t}();n.ParserUser=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return n.clearCache=function(){var r,i,t;for(r in n._cache)for(i=n._cache[r],t=0;t<i.length;t++)i[t].texture.destroy(!0);n._cache={}},n.addToCache=function(t,i,r,u){n._cache[t]||(n._cache[t]=[]);n._cache[t].push({width:r>>0,height:u>>0,texture:i})},n.getFromCache=function(t,i,r){var f,u;for(n._cache[t]||(n._cache[t]=[]),f=n._cache[t],u=0;u<f.length;u++)if(f[u].width>>0==i>>0&&f[u].height>>0==r>>0)return f[u].texture;return null},n.getTexture=function(t,i,r){var u,e,f,s,h,o;if(i===void 0&&(i=null),r===void 0&&(r=null),u=PIXI.utils.TextureCache[t],!u||!i)return u;if(e=n.getOrigSize(u.baseTexture),f=1,i.scale?f=i.scale:i.width?f=i.width/e.width:i.height&&(f=i.height/e.height),r){for(s=t+"_"+r,n._cache[s]||(n._cache[s]=[]),h=n._cache[s],o=0;o<h.length;o++)if(h[o].width>>0==e.width*f>>0&&h[o].height>>0==e.height*f>>0)return h[o].texture;return u=n.scaleTexture(u,i,r),n._cache[s].push({width:e.width*f>>0,height:e.height*f>>0,texture:u}),u}return n.scaleTexture(u,i)},n.scaleTexture=function(t,i,r){var e,f,u,o;return(r===void 0&&(r=null),e=t.baseTexture.imageUrl&&t.baseTexture.imageUrl.indexOf(".svg")!=-1,!e)?t:(f=n.getOrigSize(t.baseTexture),u=1,i.scale?u=i.scale:i.width?u=i.width/f.width:i.height&&(u=i.height/f.height),u==1&&!r)?t:(o=new PIXI.Rectangle(0,0,f.width*u,f.height*u),i.drawNewTexture||r?t=n.generateNewTexture(t.baseTexture,u):n.scaleBaseTexture(t.baseTexture,u),i.returnNewTexture||r?new PIXI.Texture(t.baseTexture):t)},n.getOrigSize=function(t){var i=t.width,r=t.height;return n._origSizes[t.imageUrl]?(i=n._origSizes[t.imageUrl].width,r=n._origSizes[t.imageUrl].height):n._origSizes[t.imageUrl]={width:t.width,height:t.height},new PIXI.Rectangle(0,0,i,r)},n.scaleBaseTexture=function(t,i){n._origSizes[t.imageUrl]||(n._origSizes[t.imageUrl]={width:t.width,height:t.height});var r=n.getOrigSize(t);t.sourceScale=i;t.realWidth=Math.round(r.width*t.sourceScale);t.realHeight=Math.round(r.height*t.sourceScale);t._updateDimensions();t.source.width=t.realWidth;t.source.height=t.realHeight},n.generateNewTexture=function(t,i){var e=n.getOrigSize(t),r=new PIXI.Rectangle(0,0,e.width*i,e.height*i),u=document.createElement("canvas"),o=u.getContext("2d"),f=t.source;return u.width=r.width,u.height=r.height,o.clearRect(0,0,r.width,r.height),o.drawImage(f,0,0,f.width,f.height,0,0,r.width,r.height),PIXI.Texture.fromCanvas(u)},n}();t.cardsNumbers=["2","3","4","5","6","7","8","9","t","j","q","k","a"];t.cardsSuits=["d","c","h","s"];t.cardsFaces=["jd","jc","jh","js","qd","qc","qh","qs","kd","kc","kh","ks"];t.TABLE_CARD="TABLE_CARD";t.USER_CARD="USER_CARD";t._origSizes={};t._cache={};n.Resources=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return n}();t._origSizes={};n.SvgHelper=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(){}return n.loadFonts=function(t,i,r){var u=[n.FONT_MAIN,n.FONT_MYRIAD,n.FONT_3];Promise.all(u.map(function(n){return new FontFaceObserver(n)}).map(function(n){return n.load(null,t)})).then(i,r)},n}(),i;t.FONT_MAIN="Lato Regular";t.FONT_MYRIAD="Myriad Pro Condensed";t.FONT_3="Bebas Neue";t.fontWhite10={fontFamily:t.FONT_MAIN,fill:16777215,fontSize:10};t.fontFps={fontFamily:t.FONT_MAIN,fill:16777215,fontSize:18};t.fontWhiteStroke16={fontFamily:t.FONT_MAIN,fill:16777215,fontSize:18,stroke:0,strokeThickness:2,align:"center",lineJoin:"round"};t.fontRaiseSwype={fontFamily:t.FONT_MAIN,fill:16232015,fontSize:18,stroke:0,strokeThickness:2,align:"center",lineJoin:"round"};t.fontRaiseBet={fontFamily:t.FONT_MAIN,fill:16777215,fontSize:18,stroke:0,strokeThickness:2,align:"center",lineJoin:"round"};t.fontForButton={fontFamily:t.FONT_MAIN,fill:11315668,fontSize:24,stroke:4274582,strokeThickness:2,align:"center",fontWeight:"bold",lineJoin:"round"};t.fontForButtonBet={fontFamily:t.FONT_MAIN,fill:16777215,fontSize:10,align:"center",fontWeight:"normal",lineJoin:"round"};t.fontForButtonIconBet={fontFamily:t.FONT_MYRIAD,fill:0,fontSize:10,align:"center",fontWeight:"bold",lineJoin:"round"};t.fontWhiteStroke18={fontFamily:"Arial",fill:16777215,fontSize:18,stroke:0,strokeThickness:2,align:"center",fontWeight:"bold",lineJoin:"round"};t.fontWhiteStroke26={fontFamily:"Arial",fill:16777215,fontSize:24,stroke:0,strokeThickness:2,align:"center",fontWeight:"bold",lineJoin:"round"};t.fontForLevelBar={fontFamily:"Lato Regular",fill:16777215,fontSize:10,align:"left",fontWeight:"bold"};t.fontForSelectTableButton={fontFamily:"Myriad Pro Condensed",fill:15980448,fontSize:16,align:"center",letterSpacing:0,fontWeight:"normal"};t.fontForTableUnitBodyStakes={fontFamily:"Myriad Pro Condensed",fill:11888644,fontSize:16,align:"center",letterSpacing:0,fontWeight:"normal"};t.fontForTableUnitBodyName={fontFamily:"Bebas Neue",fill:7936778,fontSize:16,align:"center",letterSpacing:-.4,fontWeight:"bold"};t.fontForTableUnitBodyStakesRange={fontFamily:"Lato Regular",fill:11888644,fontSize:10,align:"right"};t.fontForSettingsHeader={fontFamily:"Myriad Pro Condensed",fill:15980448,fontSize:16,align:"left",letterSpacing:0,fontWeight:"bold"};t.fontForSettingsUnit={fontFamily:"Myriad Pro Condensed",fill:15980448,fontSize:16,align:"left",fontWeight:"bold"};t.fontForNextHandLabel={fontFamily:"Myriad Pro Condensed",fill:16777215,fontSize:16,fontWeight:"bold"};t.fontForChipCounter={fontFamily:"Myriad Pro Condensed",fill:16777215,fontSize:16,align:"left"};t.fontForHourlyDrip={fontFamily:"Myriad Pro Condensed",fill:4327709,fontSize:16,align:"left",lineHeight:8.5,letterSpacing:.3};t.fontForHourlyDripTip={fontFamily:"Myriad Pro Condensed",fill:15980448,fontSize:16,align:"left",dropShadowColor:16777215,dropShadowBlur:1,dropShadowDistance:2};t.fontForFreeChipsButton={fontFamily:"Myriad Pro Condensed",fill:16777215,fontSize:16,align:"center"};t.fontForFreeChipsPanelTopLabel={fontFamily:"Myriad Pro Condensed",fill:16625330,fontSize:16,align:"center"};t.fontForFreeChipsPanelBottomLabel={fontFamily:"Bebas Neue",fill:16777215,fontSize:16,align:"center"};t.fontForRewardVideoPopupHeader={fontFamily:"Bebas Neue",fill:15719868,fontSize:16,align:"center"};t.fontForRewardVideoPopupBody={fontFamily:"Lato Regular",fill:16777215,fontSize:16,align:"center",wordWrap:!0};t.fontForRewardVideoPopupButton={fontFamily:"Bebas Neue",fill:16777215,fontSize:16,align:"center"};t.fontForNotEnoughPopupHeader={fontFamily:"Bebas Neue",fill:16777215,fontSize:16,align:"center"};t.fontForNotEnoughPopupBody={fontFamily:"Lato Regular",fill:16777215,fontSize:16,align:"center",fontWeight:"normal",wordWrap:!0};t.fontForStandUpPopupHeader={fontFamily:"Bebas Neue",fill:15719868,fontSize:16,align:"center"};t.fontForStandUpPopupUnit={fontFamily:"Myriad Pro Condensed",fill:16777215,fontSize:16,align:"center",fontWeight:"normal"};n.Text=t;i=function(){function n(){}return n}();i.fontSmall={font:"font0"};i.fontMedium={font:"font1"};i.fontBig={font:"font2"};n.BitmapText=i})(t=n.FontsHelper||(n.FontsHelper={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(r,u){var f=t.call(this)||this;f._w=1;f._h=1;f._isDown=!1;f._isOver=!1;f._curState=i.STATE_UP;f._w=r;f._h=u;f.interactive=!0;f.buttonMode=!0;f.on(n.MouseEvent.MOUSE_DOWN,f.onDown,f);f.on(n.MouseEvent.MOUSE_UP,f.onUp,f);f.on(n.MouseEvent.MOUSE_OUTSIDE,f.onUp,f);f.on(n.MouseEvent.MOUSE_OVER,f.onOver,f);f.on(n.MouseEvent.MOUSE_OUT,f.onOut,f);return f}return __extends(i,t),Object.defineProperty(i.prototype,"disabled",{get:function(){return this._curState==i.STATE_DISABLED},set:function(n){this._curState=n?i.STATE_DISABLED:i.STATE_UP;this.onChangeState()},enumerable:!0,configurable:!0}),i.prototype.onDown=function(){this.disabled||(this._isDown=!0,this._curState=i.STATE_DOWN,this.onChangeState())},i.prototype.emitClick=function(){this.emit(i.EVENT_CLICK,this);n.Sounds.play(n.SoundsHelper.BUTTON_CLICK)},i.prototype.onUp=function(n){var r,t;this.disabled||(r=this._isDown,this._isDown=!1,this._curState=this._isOver?i.STATE_OVER:i.STATE_UP,this.onChangeState(),r&&(t=n.data.getLocalPosition(this),t.x>0&&t.y>0&&t.x<this._w&&t.y<this._h&&this.emitClick()))},i.prototype.onOver=function(){this.disabled||(this._isOver=!0,this._isDown)||(this._curState=i.STATE_OVER,this.onChangeState())},i.prototype.onOut=function(){this.disabled||(this._isOver=!1,this._isDown)||(this._curState=i.STATE_UP,this.onChangeState())},i.prototype.onChangeState=function(){this.buttonMode=this.interactive=!this.disabled},i.prototype.getWidth=function(){return this._w},i.prototype.setWidth=function(n,t){t===void 0&&(t=!1);var i=n/this._w;this._w=n;t&&(this._h*=i)},i.prototype.getHeight=function(){return this._h},i.prototype.setHeight=function(n,t){t===void 0&&(t=!1);var i=n/this._h;this._h=n;t&&(this._w*=i)},i.prototype.destroy=function(){this.off(n.MouseEvent.MOUSE_DOWN,this.onDown,this);this.off(n.MouseEvent.MOUSE_UP,this.onUp,this);this.off(n.MouseEvent.MOUSE_OUTSIDE,this.onUp,this);this.off(n.MouseEvent.MOUSE_OVER,this.onOver,this);this.off(n.MouseEvent.MOUSE_OUT,this.onOut,this);t.prototype.destroy.call(this)},i}(PIXI.Container);t.EVENT_CLICK="EVENT_CLICK";t.STATE_UP=1;t.STATE_DOWN=2;t.STATE_OVER=3;t.STATE_DISABLED=4;n.ButtonBase=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(n,r,u,f){f===void 0&&(f=null);var e=this,o=i.getTexture(n);return e=t.call(this,o.width,o.height)||this,e._upStr=n,e._overStr=r,e._downStr=u,e._disabledStr=f,e._sprite=new PIXI.Sprite(o),e.addChild(e._sprite),e}return __extends(i,t),i.prototype.onResize=function(){this._sprite.texture=i.getTexture(this.getActualTextureKey(),this._w);this._sprite.width=this._w;this._sprite.height=this._h},i.prototype.setWidth=function(n,i){i===void 0&&(i=!1);t.prototype.setWidth.call(this,n,i);this.onResize()},i.prototype.setHeight=function(n,i){i===void 0&&(i=!1);t.prototype.setHeight.call(this,n,i);this.onResize()},i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);this.alpha=1;var r=this.getActualTextureKey();this._curState!=n.ButtonBase.STATE_DISABLED||this._disabledStr||(this.alpha=.5);this._sprite.texture=i.getTexture(r,this._w)},i.getTexture=function(t,i){return n.Resources.getTexture(t,{width:i,drawNewTexture:!0})},i.prototype.getActualTextureKey=function(){switch(this._curState){case n.ButtonBase.STATE_UP:return this._upStr;case n.ButtonBase.STATE_OVER:return this._overStr;case n.ButtonBase.STATE_DOWN:return this._downStr;case n.ButtonBase.STATE_DISABLED:return this._disabledStr||this._upStr}},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._sprite.destroy()},i}(n.ButtonBase);n.ButtonImage=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(n){var i=this,r=PIXI.loader.resources.atlas.textures["btn_bg.png"];return i=t.call(this,r.orig.width,r.orig.height)||this,i.origSize=r.orig,i._shadowOffset=1,i._shadow=new PIXI.Sprite(PIXI.loader.resources.atlas.textures["btn_bg.png"]),i._shadow.tint=0,i._shadow.filters=[new PIXI.filters.BlurFilter(3)],i.addChild(i._shadow),i._cont=new PIXI.Container,i.addChild(i._cont),i._bg=PIXI.Sprite.fromFrame("btn_bg.png"),i._cont.addChild(i._bg),i._icon=n,i._icon.width=i._w/1.6,i._icon.height=i._h/1.6,i._icon.x=i._w/2-i._icon.width/2,i._icon.y=i._h/2-i._icon.height/2,i._cont.addChild(i._icon),i.onResize(),i.onChangeState(),i}return __extends(i,t),i.prototype.onResize=function(){this._shadowOffset=this._h/24;this._shadow.width=this._w;this._shadow.height=this._h;this._shadow.x=this._shadowOffset;this._shadow.y=this._shadowOffset;this._cont.width=this._w;this._cont.height=this._h},i.prototype.setWidth=function(n,i){i===void 0&&(i=!1);t.prototype.setWidth.call(this,n,i);this.onResize()},i.prototype.setHeight=function(n,i){i===void 0&&(i=!1);t.prototype.setHeight.call(this,n,i);this.onResize()},i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);this._shadow.visible=this._curState!=n.ButtonBase.STATE_DOWN;this._cont.x=this._curState==n.ButtonBase.STATE_DOWN?this._shadowOffset:0;this._cont.y=this._curState==n.ButtonBase.STATE_DOWN?this._shadowOffset:0},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bg.destroy();this._icon.destroy();this._shadow.destroy();this._cont.destroy()},i}(n.ButtonBase);n.ButtonIcon=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(i,r,u,f){var e,o,s;return f===void 0&&(f=1),e=this,o=PIXI.loader.resources.atlas.textures["btn_bg.png"],e=t.call(this,r,u)||this,e._textScale=f,e._shadowOffset=1,e._origSize=o.orig,e._shadow=new PIXI.mesh.NineSlicePlane(o,120,110,120,110),e._shadow.tint=0,e._shadow.filters=[new PIXI.filters.BlurFilter(3)],e.addChild(e._shadow),e._bg=new PIXI.mesh.NineSlicePlane(o,120,110,120,110),e.addChild(e._bg),s=n.FontsHelper.Text.fontForButton,e._label=new PIXI.Text(i,n.FontsHelper.Text.fontForButton),e.addChild(e._label),e.onResize(),e.onChangeState(),e}return __extends(i,t),i.prototype.onResize=function(){var n=this._h/this._origSize.height;this._shadowOffset=this._h/24;this._shadow.width=this._w/n;this._shadow.scale.set(n,n);this._shadow.x=this._shadowOffset;this._shadow.y=this._shadowOffset;this._bg.width=this._w/n;this._bg.scale.set(n,n);this._label.style.fontSize=this._h/2.5*this._textScale;this._label.x=this._w/2-this._label.width/2;this._label.y=this._h/2-this._label.height/2},i.prototype.setWidth=function(n,i){i===void 0&&(i=!1);t.prototype.setWidth.call(this,n,i);this.onResize()},i.prototype.setHeight=function(n,i){i===void 0&&(i=!1);t.prototype.setHeight.call(this,n,i);this.onResize()},i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);this._shadow.visible=this._curState!=n.ButtonBase.STATE_DOWN;var i=this._curState==n.ButtonBase.STATE_DOWN?this._shadowOffset:0;this._bg.x=i;this._bg.y=i;this._label.x=this._w/2-this._label.width/2+i;this._label.y=this._h/2-this._label.height/2+i},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bg.destroy();this._label.destroy();this._shadow.destroy()},i}(n.ButtonBase);n.ButtonText=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this,"",n.FontsHelper.Text.fontFps)||this;return i._filterStrength=20,i._frameTime=0,i._lastLoop=new Date,i._thisLoop=new Date,i}return __extends(i,t),i.prototype.onRender=function(){this._thisLoop=new Date;var n=this._thisLoop.getTime()-this._lastLoop.getTime();this._frameTime+=(n-this._frameTime)/this._filterStrength;this._lastLoop=this._thisLoop;this.text=(1e3/this._frameTime).toFixed(0)+" fps"},i.prototype.destroy=function(){t.prototype.destroy.call(this)},i}(PIXI.Text);n.FPSCounter=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(){}return t.init=function(n,i,r){t._container=n;t._containerReal=i;t._containerSafe=r},t.onResize=function(){t.currentScene&&t.currentScene.onResize()},t.loop=function(){t.currentScene&&!t.currentScene.isPaused()&&t.currentScene.update()},t.createScene=function(i,r){if(r===void 0&&(r=n.SceneController),t._scenes[i])return t._scenes[i];var u=new r;return u.init(t._container,t._containerReal,t._containerSafe),t._scenes[i]=u,u},t.goToScene=function(n){return t._scenes[n]?(t.currentScene&&t.currentScene.pause(),t.currentScene=t._scenes[n],t.currentScene.resume(),!0):!1},t}();t._scenes={};n.ScenesManager=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(){}return t.prototype.sendCommand=function(t,i){if(i===void 0&&(i=null),n.Server.instance)if(i||(i={}),t==n.CommandAuth.COMMAND_LOGIN)n.Server.instance.send({func:t,data:i});else{if(!n.Server.instance.connected)return;n.Server.instance.send({func:t,data:i})}},t}();n.Command=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(n){function t(){var t=n.call(this)||this;return window.SetBalance=t.setBalance.bind(t),t}return __extends(t,n),t.prototype.getUsersInfo=function(i){n.prototype.sendCommand.call(this,t.COMMAND_USERS_INFO,{ids:i})},t.prototype.findTable=function(i){n.prototype.sendCommand.call(this,t.COMMAND_FIND_TABLE,{level:i})},t.prototype.joinTable=function(i){n.prototype.sendCommand.call(this,t.COMMAND_JOIN_TABLE,{id:i})},t.prototype.leaveTable=function(i){n.prototype.sendCommand.call(this,t.COMMAND_LEAVE_TABLE,{id:i})},t.prototype.setBalance=function(i){n.prototype.sendCommand.call(this,t.COMMAND_SET_BALANCE,{amount:i})},t.prototype.getHourlyDrip=function(){n.prototype.sendCommand.call(this,t.COMMAND_GET_HOURLY_DRIP)},t.prototype.getRewardedVideo=function(){n.prototype.sendCommand.call(this,t.COMMAND_GET_REWARDED_VIDEO)},t.prototype.standUp=function(i){n.prototype.sendCommand.call(this,t.COMMAND_STAND_UP,{id:i})},t.prototype.seat=function(i,r){n.prototype.sendCommand.call(this,t.COMMAND_SEAT,{id:i,seatIdx:r})},t}(n.Command);t.COMMAND_FIND_TABLE="poker.findTable";t.COMMAND_JOIN_TABLE="poker.joinTable";t.COMMAND_LEAVE_TABLE="poker.leaveTable";t.COMMAND_USERS_INFO="poker.usersInfo";t.COMMAND_SET_BALANCE="poker.setBalance";t.COMMAND_GET_HOURLY_DRIP="poker.getHourlyDrip";t.COMMAND_GET_REWARDED_VIDEO="poker.getRewardedVideo";t.COMMAND_STAND_UP="poker.standUp";t.COMMAND_SEAT="poker.seat";t.EVENT_TABLE_INFO="TableInfo";t.EVENT_MATCH="match";n.CommandUser=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(n){function t(){return n.call(this)||this}return __extends(t,n),t.prototype.login=function(i){n.prototype.sendCommand.call(this,t.COMMAND_LOGIN,{player:i.getJSON()})},t.prototype.logout=function(){n.prototype.sendCommand.call(this,t.COMMAND_LOGOUT)},t}(n.Command);t.COMMAND_LOGIN="login";t.COMMAND_LOGOUT="logout";n.CommandAuth=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.fold=function(){t.prototype.sendCommand.call(this,i.COMMAND_FOLD,{table_id:n.Model.table.id})},i.prototype.check=function(){t.prototype.sendCommand.call(this,i.COMMAND_CHECK,{table_id:n.Model.table.id})},i.prototype.bet=function(r){t.prototype.sendCommand.call(this,i.COMMAND_BET,{table_id:n.Model.table.id,amount:r})},i.prototype.call=function(){t.prototype.sendCommand.call(this,i.COMMAND_CALL,{table_id:n.Model.table.id})},i.prototype.raise=function(r){t.prototype.sendCommand.call(this,i.COMMAND_RAISE,{table_id:n.Model.table.id,amount:r})},i.prototype.allIn=function(){t.prototype.sendCommand.call(this,i.COMMAND_ALL_IN,{table_id:n.Model.table.id})},i}(n.Command);t.COMMAND_FOLD="Fold";t.COMMAND_CHECK="Check";t.COMMAND_BET="Bet";t.COMMAND_CALL="Call";t.COMMAND_RAISE="Raise";t.COMMAND_ALL_IN="AllIn";n.CommandAction=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return n.login=function(){},n.loginError=function(){},n}();n.ParserAuth=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(){}return t.parseMessage=function(i){var r=null;try{r=JSON.parse(i);t.parseData(r)}catch(u){n.trace(u.message+"\nJson:"+i)}},t.parseData=function(i){var r,u;i.status&&(i.status=i.status.toUpperCase());i.status!="ERROR"?(n.Model.setData(i),t._dataFunctions[i.func]&&t._dataFunctions[i.func](i)):(i.error||(i.error={}),i.func||(r="none",i.error.request&&(i.error.request.email||i.error.request.custom)&&(r="login"),i.func=r),u=i.error.message?i.error.message:"",n.trace("Message parser Status = ERROR: "+u),t._dataErrorFunctions[i.func]&&t._dataErrorFunctions[i.func](i))},t}();t._dataFunctions={login:n.ParserAuth.login,"poker.findTable":n.ParserUser.findTable,TableInfo:n.ParserUser.tableInfo,AddPlayer:n.ParserUser.addPlayer};t._dataErrorFunctions={login:n.ParserAuth.loginError};n.MessageParser=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;return n._timeout=1e4,n._connected=!1,n}return __extends(i,t),Object.defineProperty(i,"instance",{get:function(){return i._instance||(i._instance=new i),i._instance},enumerable:!0,configurable:!0}),i.prototype.receive=function(n){this.onMessage(n)},i.create=function(){if(i.instance)throw new Error("Server is singleton");},i.prototype.init=function(){nakamajs&&(n.Platform.service instanceof n.ZyngaGames&&(n.trace("-----USING ZYNGA TOKEN IN FB----"),n.trace(n.Platform.service.token)),n.trace("connecting to: "+n.Config.host),this.zToken=n.Platform.service.token,this._client=new nakamajs.Client(n.Config.serverKey,n.Config.host,n.Config.port,n.Config.useSSL,this._timeout),this._client.verbose=n.Config.useDebug,this._nakamaHardCode=new n.NakamaHardCode)},i.prototype.loginCustom=function(){var t=n.Store.get("custom_id")||Date.now().toString();this._client.authenticateCustom({id:t}).then(this.onSession.bind(this)).catch(this.onError.bind(this));n.Store.set("custom_id",t)},i.prototype.loginFake=function(t){var r=this,i;this._playerName=t.name;this._playerPhoto=t.photo;i=this._playerName;this._client.rpcGet("authFake",null,n.Config.httpKey,{idFake:i}).then(function(n){r.onMessage(n);return nakamajs.Session.restore(n.payload.token)}).then(this.onSession.bind(this)).catch(this.onError.bind(this))},i.prototype.login=function(t){var i=this;this._playerName=t.name;this._playerPhoto=t.photo;this._client.rpcGet("zauth.authenticate",null,n.Config.httpKey,{ztoken:this.zToken}).then(function(n){i.onMessage(n);return nakamajs.Session.restore(n.payload.token)}).then(this.onSession.bind(this)).catch(this.onError.bind(this))},i.prototype.onSession=function(t){this._session=t;var i=Math.floor(Date.now()/1e3);n.trace("isexpired : "+t.isexpired(i));this._client.getAccount(t).then(this.onAccount.bind(this)).catch(this.onError.bind(this))},i.prototype.onAccount=function(t){this.onMessage(t);(t.user.display_name!=this._playerName||t.user.avatar_url!=this._playerPhoto)&&this._client.updateAccount(this._session,{display_name:this._playerName,avatar_url:this._playerPhoto});n.trace("account.user.id = "+t.user.id);n.trace("account.user.username = "+t.user.display_name);this._socket=this._client.createSocket(n.Config.useSSL,n.Config.useDebug);this._socket.ondisconnect=this.onDisconnect.bind(this);this._socket.onnotification=this.onMessage.bind(this);this._socket.onmatchdata=this.onMessage.bind(this);this._socket.connect(this._session).then(this.onConnect.bind(this)).catch(this.onError.bind(this))},i.prototype.onConnect=function(){this._connected=!0;n.trace("onConnect");this.emit(i.READY)},i.prototype.onMessage=function(t){t&&t!=undefined&&(t=this._nakamaHardCode.beforeReceive(t),n.trace("rcvd: "+JSON.stringify(t)),n.trace("-------------------"),n.MessageParser.parseData(t))},i.prototype.onError=function(t){n.MessageParser.parseData({status:"error",error:t});this.emit(i.ERROR,t)},i.prototype.send=function(t){t=this._nakamaHardCode.beforeSend(t);n.trace("send: "+JSON.stringify(t));n.trace("-------------------");t.func==n.CommandAuth.COMMAND_LOGIN?n.Config.isLocalHost||n.Config.isBitball?this.loginFake(t.data.player):this.login(t.data.player):t.func==n.CommandAuth.COMMAND_LOGOUT?this.logout():t.func==n.CommandUser.COMMAND_USERS_INFO?this._client.getUsers(this._session,t.data.ids).then(this.onMessage.bind(this)).catch(this.onError.bind(this)):this._socket.send(t).then(this.onMessage.bind(this)).catch(this.onError.bind(this))},i.prototype.logout=function(){n.Store.remove(this.zToken);this._socket.disconnect();this._connected=!1},Object.defineProperty(i.prototype,"connected",{get:function(){return this._connected},enumerable:!0,configurable:!0}),i.prototype.onDisconnect=function(t){n.trace("Disconnected from the server. Event: %o",t);this._connected=!1},i}(PIXI.utils.EventEmitter);t.READY="Server_READY";t.ERROR="Server_ERROR";n.Server=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var i,t;(function(n){n[n.DEV=0]="DEV";n[n.STAGING=1]="STAGING";n[n.PROD=2]="PROD";n[n.BITBALL=3]="BITBALL";n[n.LOCAL=4]="LOCAL"})(i=n.APP_LOCATION||(n.APP_LOCATION={}));t=function(){function t(){}return t.setServerConf=function(n){n==t.CONF_TEST?t.currentConf=t._confTest:n==t.CONF_AWS1?t.currentConf=t._confAws1:n==t.CONF_AWS2?t.currentConf=t._confAws2:n==t.CONF_DEV?t.currentConf=t._confDev:n==t.CONF_STAGING?t.currentConf=t._confStaging:n==t.CONF_PROD&&(t.currentConf=t._confProd)},Object.defineProperty(t,"isLocalHost",{get:function(){return window.location.hostname=="localhost"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isBitball",{get:function(){return window.location.hostname=="bitball.io"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isDev",{get:function(){return window.location.hostname.indexOf(n.ZyngaGames.APP_ID_DEV)!=-1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isStaging",{get:function(){return window.location.hostname.indexOf(n.ZyngaGames.APP_ID_STAGING)!=-1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isProd",{get:function(){return window.location.hostname.indexOf(n.ZyngaGames.APP_ID_PROD)!=-1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"appLocation",{get:function(){return this.isDev?i.DEV:this.isStaging?i.STAGING:this.isProd?i.PROD:this.isBitball?i.BITBALL:this.isLocalHost?i.LOCAL:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"host",{get:function(){return t.currentConf.host},enumerable:!0,configurable:!0}),Object.defineProperty(t,"port",{get:function(){return t.currentConf.port},enumerable:!0,configurable:!0}),Object.defineProperty(t,"useSSL",{get:function(){return t.currentConf.ssl},enumerable:!0,configurable:!0}),Object.defineProperty(t,"httpKey",{get:function(){return t.currentConf.httpKey},enumerable:!0,configurable:!0}),Object.defineProperty(t,"serverKey",{get:function(){return t.currentConf.serverKey},enumerable:!0,configurable:!0}),Object.defineProperty(t,"useDebug",{get:function(){return t.currentConf.debug},enumerable:!0,configurable:!0}),t}();t.CONF_TEST="test";t.CONF_AWS1="aws1";t.CONF_AWS2="aws2";t.CONF_DEV="dev";t.CONF_QA="qa";t.CONF_PROD="prod";t.CONF_STAGING="staging";t.REWARDED_VIDEO_DELAY_DURATION=300;t.locale="en";t._confTest={host:"37.143.15.166",port:7349,httpKey:"defaultkey",serverKey:"defaultkey",ssl:!1,debug:!1};t._confAws1={host:"ec2-54-187-235-102.us-west-2.compute.amazonaws.com",port:7349,httpKey:"defaultkey",serverKey:"defaultkey",ssl:!1,debug:!1};t._confAws2={host:"ec2-18-236-100-240.us-west-2.compute.amazonaws.com",port:7349,httpKey:"defaultkey",serverKey:"defaultkey",ssl:!1,debug:!1};t._confDev={host:"poker-dev1-us-west1.zyheroes.com",port:443,httpKey:"usEdJ8XufjQYDUAoTJW",serverKey:"EkpUsEHPV4XYuZPjZmh",ssl:!0,debug:!1};t._confStaging={host:"poker-qa1-us-west1.zyheroes.com",port:443,httpKey:"BPGZdNz%tTpuWoWN8CYo",serverKey:"VjsBXw7k[XRdEAVxCyGw",ssl:!0,debug:!1};t._confProd={host:"poker-prod1-us-west1.zyheroes.com",port:443,httpKey:"F%rssMze2emMNEpoPvqw",serverKey:"Rw/dqw9fUCWPRhULpiqP",ssl:!0,debug:!1};t.currentConf=t._confTest;n.Config=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(){var r=this,i,u;this.MAX_RES={w:1920,h:1080};this._latestRWSatus=!1;t.instance=this;i=new n.CommandUser;Object.defineProperty(window,"setBalance",{value:i.setBalance.bind(i)});u=document.getElementById("canv");this._renderer=PIXI.autoDetectRenderer(1920,1080,{backgroundColor:1087931,view:u,antialias:!0,roundPixels:!0,resolution:1});this._renderer.clearBeforeRender=!1;n.Config.renderer=this._renderer;this._stage=new PIXI.Container;n.Config.stage=this._stage;this._container=new PIXI.Graphics;this._stage.addChild(this._container);this._containerReal=new PIXI.Graphics;this._stage.addChild(this._containerReal);this._containerSafe=new PIXI.Graphics;this._stage.addChild(this._containerSafe);n.ScenesManager.init(this._container,this._containerReal,this._containerSafe);window.addEventListener("resize",function(){setTimeout(r.onResize.bind(r),100)},!1);window.onbeforeunload=this.onUnloadPage.bind(this);n.Logger.init();this.init()}return t.prototype.init=function(){PIXI.loader.resources.locale_lang&&n.Model.locale.parse(PIXI.loader.resources.locale_lang.data,PIXI.loader.resources.locale_en?PIXI.loader.resources.locale_en.data:null);n.Model.view.devicePixelRatio=this._renderer.resolution;this._tfFPS=new n.FPSCounter;this._tfFPS.x=10;this._tfFPS.y=10;this._stage.addChild(this._tfFPS);this._btnSendLogs=new n.Lobby.SelectTableButton("SEND LOGS");this._btnSendLogs.on(n.ButtonBase.EVENT_CLICK,this.onSendLogs,this);this._stage.addChild(this._btnSendLogs);this.onResize(!0);n.SoundsHelper.init();n.EffectManager.init();this.onPlatformReady();this.loop();this.connectToServer()},t.prototype.connectToServer=function(){n.Config.isLocalHost?n.AuthController.connectToServer(n.Config.CONF_TEST):n.Config.isDev?n.AuthController.connectToServer(n.Config.CONF_DEV):n.Config.isStaging?n.AuthController.connectToServer(n.Config.CONF_STAGING):n.Config.isProd&&n.AuthController.connectToServer(n.Config.CONF_PROD)},t.prototype.onPlatformReady=function(){var t=this;n.Model.initMe(n.Platform.service);n.ScenesManager.createScene("game",n.GameSceneController);n.ScenesManager.createScene("lobby",n.Lobby.LobbySceneController);n.ScenesManager.goToScene("lobby");n.ModelEvents.on(n.ModelEvent.MODEL_ME,function(){n.Model.me.availableRewardedVideo!=t._latestRWSatus&&n.Model.me.availableRewardedVideo&&n.RewardedVideoController.run(n.Model.me.availableRewardedVideo);t._latestRWSatus=n.Model.me.availableRewardedVideo});n.Statistic.Log(n.StatCounters.session_start,null,{kingdom:"player_wallet"})},t.prototype.loop=function(){this._tfFPS.onRender();n.ScenesManager.loop();this._renderer.render(this._stage);requestAnimationFrame(this.loop.bind(this))},t.prototype.onResize=function(t){var r,u,i;t===void 0&&(t=!1);r=window.innerWidth*window.devicePixelRatio;u=window.innerHeight*window.devicePixelRatio;this._renderer.resize(r,u);this._renderer.view.width=r;this._renderer.view.height=u;this._renderer.view.style.width=window.innerWidth+"px";this._renderer.view.style.height=window.innerHeight+"px";this._renderer.screen.width=window.innerWidth;this._renderer.screen.height=window.innerHeight;i=n.Model.view;i.setScreenSize(r,u);this._container.x=i.gameFullX;this._container.y=i.gameFullY;this._container.clear();this._container.lineStyle(10,16711680);this._containerReal.x=i.gameRealX;this._containerReal.y=i.gameRealY;this._containerReal.clear();this._containerReal.lineStyle(5,65280);this._containerSafe.x=i.gameSafeX;this._containerSafe.y=i.gameSafeY;this._containerSafe.clear();this._containerSafe.lineStyle(1,16776960);n.ScenesManager.onResize();this._btnSendLogs.setWidth(i.screenWidth*.1,!0);this._btnSendLogs.x=this._btnSendLogs.getWidth()*1.4;this._btnSendLogs.y=i.gameRealHeight-this._btnSendLogs.getHeight()*2},t.prototype.calculateTargetResolution=function(){if(n.Config.isBitball||n.Config.isLocalHost)return this.MAX_RES;return{w:window.innerWidth*window.devicePixelRatio,h:window.innerHeight*window.devicePixelRatio}},t.prototype.onUnloadPage=function(){(new n.CommandAuth).logout()},t.prototype.onSendLogs=function(){n.Logger.sendLogs()},t}();t.USE_SCALING=!1;t.STATE_PRELOADER="preloader";n.AppMain=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){n.trace=console.log;var t=function(){function t(){}return t.init=function(){console._log=console.log;console._info=console.info;console._warn=console.warn;console._error=console.error;console._debug=console.debug;console.history=[];n.trace=console.log=function(){return console._intercept("log",arguments)};console.info=function(){return console._intercept("info",arguments)};console.warn=function(){return console._intercept("warn",arguments)};console.error=function(){return console._intercept("error",arguments)};console.debug=function(){return console._intercept("debug",arguments)};console._intercept=function(n,t){console._collect(n,t)};console._collect=function(n,t){if(t&&t.length!=0){var i=(new Date).toUTCString();n||(n="log");console["_"+n].apply(console,t);console.history.push({type:n,timestamp:i,message:t[0]})}};window.onerror=t.onError;window.addEventListener("unhandledrejection",t.browserRejectionHandler);t._inited=!0},t.browserRejectionHandler=function(n){var i=n?n.reason:undefined;i!=undefined&&t.__send(!1,i.message,i.stack)},t.clearHistory=function(){console.history=[]},t.sendLogs=function(){t.__send(!0)},t.getHistory=function(){var i="",t,n;if(!console.history)return i;for(t=console.history,n=0;n<t.length;n++)i+="["+t[n].type+"] ["+t[n].timestamp+"]: "+t[n].message+"\r\n";return i},t.onError=function(n,i,r,u,f){t.__send(!1,n.toString(),"["+r+"]["+u+"]"+f.message+", "+f.stack)},t.__send=function(i,r,u){var f,e;i===void 0&&(i=!0);r===void 0&&(r="");u===void 0&&(u="");f=new XMLHttpRequest;f.open("POST","https://bitball.io/poker/addlog.php",!0);f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");e="username="+encodeURIComponent(n.Model.me.name)+"&user_id="+n.Model.me.id+"&browser="+encodeURIComponent(window.navigator.userAgent)+"&platform=poker&log="+t.getHistory()+"&on_demand="+(i?"1":"0")+"&stack_trace="+encodeURIComponent(u)+"&type="+encodeURIComponent(r);f.send(e)},t}();t._inited=!1;n.Logger=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){function t(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return n.Model.locale.getString(t,r)}n.locale=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(t){var r=this,i;this._pageLoaded=!1;this._resLoaded=!1;this._fontsLoaded=!1;n.Config.locale=t;i=n.Platform.createService(n.Config.isLocalHost||n.Config.isBitball);i.once(n.PlatformBase.INIT,function(){return r.init()});i.once(n.PlatformBase.READY,function(){return r.startApp()});i.init()}return t.prototype.init=function(){for(var t=PIXI.loader,i=0;i<n.Resources.cardsNumbers.length;i++)t.add("card_"+n.Resources.cardsNumbers[i],"assets/sprites/cards/numbers/"+n.Resources.cardsNumbers[i]+".svg");for(i=0;i<n.Resources.cardsSuits.length;i++)t.add("card_"+n.Resources.cardsSuits[i],"assets/sprites/cards/suits/suit_"+n.Resources.cardsSuits[i]+".svg");for(i=0;i<n.Resources.cardsFaces.length;i++)t.add("card_image_"+n.Resources.cardsFaces[i],"assets/sprites/cards/faces/"+n.Resources.cardsFaces[i]+".svg");for(t.add("card_face","assets/sprites/cards/face.svg"),t.add("card_back","assets/sprites/cards/back.svg"),t.add("bet_b_green","assets/sprites/bets/bet_b_green.svg"),t.add("bet_b_orange","assets/sprites/bets/bet_b_orange.svg"),t.add("bet_call","assets/sprites/bets/bet_call.svg"),t.add("bet_check","assets/sprites/bets/bet_check.svg"),t.add("bet_chip","assets/sprites/bets/bet_chip.svg"),t.add("bet_fold","assets/sprites/bets/bet_fold.svg"),t.add("bet_raise","assets/sprites/bets/bet_raise.svg"),t.add("bg_game","assets/sprites/bg_game.jpg"),t.add("light","assets/sprites/light.png"),t.add("bg_tile","assets/sprites/bg_tile.svg"),t.add("btn_bet_bg","assets/sprites/btn_bet_bg.svg"),t.add("chip","assets/sprites/chip.svg"),t.add("btn_back_up","assets/sprites/btn_back_up.svg"),t.add("btn_back_down","assets/sprites/btn_back_down.svg"),t.add("btn_watch_up","assets/sprites/btn_watch_up.svg"),t.add("btn_watch_down","assets/sprites/btn_watch_down.svg"),t.add("icon_arrowup","assets/sprites/icon_arrowup.svg"),t.add("icon_cross","assets/sprites/icon_cross.svg"),t.add("icon_check","assets/sprites/icon_check.svg"),t.add("icon_dealer","assets/sprites/icon_dealer.svg"),t.add("btn_plus_up","assets/sprites/btn_plus_up.svg"),t.add("btn_plus_down","assets/sprites/btn_plus_down.svg"),t.add("btn_minus_up","assets/sprites/btn_minus_up.svg"),t.add("btn_minus_down","assets/sprites/btn_minus_down.svg"),t.add("raise_view_bg","assets/sprites/raise_view_bg.svg"),t.add("dealer","assets/sprites/dealer.svg"),t.add("gradient_line","assets/sprites/gradient_line.svg"),t.add("avatar/1","assets/sprites/avatars/avatar0.jpg"),t.add("avatar/2","assets/sprites/avatars/avatar1.jpg"),t.add("avatar/3","assets/sprites/avatars/avatar2.jpg"),t.add("lobby/bg","assets/sprites/lobby/GradientBG.svg"),t.add("lobby/bg_pattern","assets/sprites/lobby/PatternBG.svg"),t.add("lobby/star","assets/sprites/lobby/Star.svg"),t.add("lobby/table_unit_bg","assets/sprites/lobby/TableUnitBg.svg"),t.add("lobby/table_unit_bg_pattern","assets/sprites/lobby/PatternTableUnit.svg"),t.add("lobby/table_unit_picture/1","assets/sprites/lobby/Arts.png"),t.add("lobby/table_unit_picture/2","assets/sprites/lobby/Arts1.png"),t.add("lobby/table_unit_picture/3","assets/sprites/lobby/Arts2.png"),t.add("lobby/table_unit_picture/4","assets/sprites/lobby/Arts3.png"),t.add("lobby/knobe","assets/sprites/lobby/knobe.svg"),t.add("particle/star","assets/emiters/star.png"),t.add("particle/star/emiter","assets/emiters/winParticlesEmiter.json"),t.add("lobby/close_icon","assets/sprites/lobby/IconCross3.svg"),t.add("lobby/settings_icon","assets/sprites/lobby/Options.svg"),t.add("lobby/add_user_icon","assets/sprites/lobby/AddUser.svg"),t.add("lobby/chip","assets/sprites/lobby/IconChip_1.svg"),t.add("lobby/free_chips_bg","assets/sprites/lobby/video_BG.svg"),t.add("lobby/free_chips_mask","assets/sprites/lobby/video_BG_mask.svg"),t.add("lobby/free_chips_button","assets/sprites/lobby/VideoFree_button.svg"),t.add("lobby/free_chips_picture/1","assets/sprites/lobby/Arts4.png"),t.add("lobby/hourly_drip","assets/sprites/lobby/DailyBonus.svg"),t.add("lobby/reward_video/bg","assets/sprites/lobby/reward-video/MainBG.svg"),t.add("lobby/reward_video/close_button","assets/sprites/lobby/reward-video/ClosePopUp.svg"),t.add("lobby/reward_video/close_button_down","assets/sprites/lobby/reward-video/ClosePopUp_down.svg"),t.add("lobby/reward_video/bg_inner","assets/sprites/lobby/reward-video/PurpleBG.svg"),t.add("lobby/reward_video/star/1","assets/sprites/lobby/reward-video/Star1.svg"),t.add("lobby/reward_video/star/2","assets/sprites/lobby/reward-video/Star2.svg"),t.add("lobby/reward_video/star/3","assets/sprites/lobby/reward-video/Star3.svg"),t.add("lobby/reward_video/star/4","assets/sprites/lobby/reward-video/Star4.svg"),t.add("lobby/reward_video/star/5","assets/sprites/lobby/reward-video/Star6.svg"),t.add("lobby/reward_video/chip/1","assets/sprites/lobby/reward-video/Chip1.svg"),t.add("lobby/reward_video/chip/2","assets/sprites/lobby/reward-video/Chip2.svg"),t.add("lobby/reward_video/chip/3","assets/sprites/lobby/reward-video/Chip3.svg"),t.add("lobby/reward_video/video_icon","assets/sprites/lobby/reward-video/PlayVideo.svg"),t.add("lobby/reward_video/line","assets/sprites/lobby/reward-video/Line.svg"),t.add("lobby/reward_video/button","assets/sprites/lobby/reward-video/Button.svg"),t.add("lobby/reward_video/beams","assets/sprites/lobby/reward-video/Beams.svg"),t.add("lobby/reward_video/picture","assets/sprites/lobby/reward-video/Out of chips3-2.png"),t.add("stand_up_popup/bg","assets/sprites/stand_up/PopUpBG.svg"),t.add("stand_up_popup/exit","assets/sprites/stand_up/ExitToLobby.svg"),t.add("stand_up_popup/stand_up","assets/sprites/stand_up/StandUp.svg"),t.add("stand_up_popup/new_table","assets/sprites/stand_up/NewTable.svg"),t.add("stand_up_popup/select_new_table","assets/sprites/stand_up/SelectNewTable.svg"),t.add("button_seat","assets/sprites/SitDown.svg"),t.add("button_seat_anim","assets/sprites/SitAnimation.svg"),t.add("winning/line_pattern","assets/sprites/win_line_pattern.svg"),t.add("winning/line_mask","assets/sprites/win_line_mask.png"),i=0;i<n.SoundsHelper.PRELOAD_SOUNDS.length;i++)t.add(n.SoundsHelper.PRELOAD_SOUNDS[i],"assets/sounds/"+n.SoundsHelper.PRELOAD_SOUNDS[i]+".mp3");t.add("locale_ALL","assets/locale/locale.json");t.once("complete",function(){n.Platform.service.start()});t.on("progress",function(t){n.Platform.service.progress=t.progress});t.load();n.FontsHelper.Text.loadFonts(7e3,this.onFontsLoad.bind(this),this.onFontsError.bind(this));this._pageLoaded=!0},t.prototype.onPageLoad=function(){this._pageLoaded=!0},t.prototype.onResLoaded=function(){this._resLoaded=!0},t.prototype.onFontsError=function(){n.trace("onFontsError, try again");n.FontsHelper.Text.loadFonts(7e3,this.onFontsLoad.bind(this),this.onFontsError.bind(this))},t.prototype.onFontsLoad=function(){this._fontsLoaded=!0},t.prototype.startApp=function(){new n.AppMain},t}();n.Bootstrap=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(){this.setRandom()}return t.parseCards=function(n){var r,i;if(!n)return[];for(r=[],i=0;i<n.length;i++)r.push(t.parseCard(n[i]));return r},t.parseCard=function(n){var i=new t;return i.weight=n.charAt(0).toLowerCase(),i.suit=n.charAt(1).toLowerCase(),i},t.prototype.setData=function(n){!n},t.prototype.setRandom=function(){var i=n.MathHelper.getRandomMinToMax(9,t.WEIGHTS.length-1);this._weight=t.WEIGHTS[i];i=n.MathHelper.getRandomMinToMax(0,t.SUITS.length-1);this._suit=t.SUITS[i]},Object.defineProperty(t.prototype,"weight",{get:function(){return this._weight},set:function(n){this._weight=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suit",{get:function(){return this._suit},set:function(n){this._suit=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weightIndex",{get:function(){return t.WEIGHTS.indexOf(this._weight)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suitIndex",{get:function(){return t.SUITS.indexOf(this._suit)},enumerable:!0,configurable:!0}),t.prototype.equals=function(n){return n?this._weight==n._weight&&this._suit==n._suit:!1},Object.defineProperty(t.prototype,"isHighlighted",{get:function(){return this._isHighlighted},set:function(n){this._isHighlighted=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageName",{get:function(){return this._weight=="j"||this._weight=="q"||this._weight=="k"?"card_image_"+this._weight+this._suit:"card_"+this._suit},enumerable:!0,configurable:!0}),t.prototype.getJSON=function(){return{w:this.weight,s:this.suit}},t.prototype.toString=function(){return this.weight.toUpperCase()+this.suit.toLowerCase()},t}();t.WEIGHTS=["2","3","4","5","6","7","8","9","t","j","q","k","a"];t.SUITS=["d","c","s","h"];n.MCard=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(){this.screenDefaultWidth=1920;this.screenDefaultHeight=1080;this.screenDefaultSafeWidth=1700;this.screenDefaultSafeHeight=1080;this.screenWidth=100;this.screenHeight=100;this.gameFullX=0;this.gameFullY=0;this.gameFullWidth=100;this.gameFullHeight=100;this.gameRealWidth=100;this.gameRealHeight=100;this.gameRealX=0;this.gameRealY=0;this.gameSafeWidth=100;this.gameSafeHeight=100;this.gameSafeX=0;this.gameSafeY=0;this.scale=1;this.devicePixelRatio=1;this.fullscreen=!1}return t.prototype.setScreenSize=function(n,t){this.screenWidth=n;this.screenHeight=t;this.screenDefaultHeight/this.screenDefaultWidth>this.screenHeight/this.screenWidth?this.screenDefaultSafeHeight/this.screenDefaultWidth>this.screenHeight/this.screenWidth?(this.gameFullHeight=this.screenHeight*this.screenDefaultHeight/this.screenDefaultSafeHeight,this.gameFullWidth=this.gameFullHeight*this.screenDefaultWidth/this.screenDefaultHeight):(this.gameFullWidth=this.screenWidth,this.gameFullHeight=this.gameFullWidth*this.screenDefaultHeight/this.screenDefaultWidth):this.screenDefaultHeight/this.screenDefaultSafeWidth>this.screenHeight/this.screenWidth?(this.gameFullHeight=this.screenHeight,this.gameFullWidth=this.gameFullHeight*this.screenDefaultWidth/this.screenDefaultHeight):(this.gameFullWidth=this.screenWidth*this.screenDefaultWidth/this.screenDefaultSafeWidth,this.gameFullHeight=this.gameFullWidth*this.screenDefaultHeight/this.screenDefaultWidth);this.gameFullX=(this.screenWidth-this.gameFullWidth)/2;this.gameFullY=(this.screenHeight-this.gameFullHeight)/2;this.gameSafeWidth=this.screenDefaultSafeWidth/this.screenDefaultWidth*this.gameFullWidth;this.gameSafeHeight=this.screenDefaultSafeHeight/this.screenDefaultHeight*this.gameFullHeight;this.gameSafeX=this.gameFullX+(this.gameFullWidth-this.gameSafeWidth)/2;this.gameSafeY=this.gameFullY+(this.gameFullHeight-this.gameSafeHeight)/2;this.gameRealWidth=Math.min(this.gameFullWidth,this.screenWidth);this.gameRealHeight=Math.min(this.gameFullHeight,this.screenHeight);this.gameRealX=this.gameFullX<0?0:this.gameFullX;this.gameRealY=this.gameFullY<0?0:this.gameFullY;this.scale=this.gameSafeWidth/this.screenDefaultSafeWidth},t.prototype.toggleFullScreen=function(){var t=document.getElementById("canv"),i=document;n.Model.view.fullscreen?i.cancelFullScreen?i.cancelFullScreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitCancelFullScreen?i.webkitCancelFullScreen():i.msCancelFullScreen&&i.msCancelFullScreen():t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen();this.fullscreen=!this.fullscreen},t.prototype.setData=function(){},t}();n.MView=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){this._levels=[]}return n.prototype.setData=function(n){var i,t;if(n&&n.func=="balance"&&n.data.levels!=undefined){for(this._levels=[],i=n.data.levels,t=0;t<i.length;t++)this._levels.push({level:i[t].level,totalXp:i[t].total_xp});this._levels.sort(function(n,t){return n.level-t.level})}},n.prototype.getLevelByXp=function(n){for(var t=0;t<this._levels.length;t++)if(n<this._levels[t].totalXp)return this._levels[t].level;return 0},n.prototype.getProgressByXp=function(n){for(var i=0,t=0;t<this._levels.length;t++){if(n<this._levels[t].totalXp)return(n-i)/(this._levels[t].totalXp-i);i=this._levels[t].totalXp}return 0},n}();n.MDLevels=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(){this._words=["common_type","common_close","common_save","common_add","common_cancel","common_done","common_show","common_yes","common_no","common_team","common_players"];this._textsHash={};this._json={};this._isJson=!1}return t.prototype.getWordsIds=function(){for(var n=this._words.concat(),t=0;t<n.length;t++)n[t]="fp_"+n[t];return n},t.prototype.parse=function(n,t){t&&(this._textsHash=this.doParse(t,this._textsHash));this._textsHash=this.doParse(n,this._textsHash)},t.prototype.doParse=function(n,t){for(var i,u=n.split("\n"),r=0;r<u.length;r++)u[r]&&u[r].indexOf("=")!=-1&&(i=u[r].split("="),i[0]=i[0].trim(),i[1]=i[1].trim(),t[i[0]]=i[1]);return t},t.prototype.setData=function(n){var t,i;if(n&&n.func=="locale"){t=n.data;for(i in t)this._textsHash[i]=t[i];this.checkAllKeys()}},t.prototype.getString=function(t){for(var i,r,u,e=[],f=1;f<arguments.length;f++)e[f-1]=arguments[f];if(i=undefined,console.log("Get sctring:"+t),this._isJson?(r=this._json[n.Config.locale],r==null&&(r=this._json.en_US,console.warn("Can't found locale:"+n.Config.locale+"\n Was used en_US")),i=r[t]?r[t]:this._json.en_US[t]):i=this._textsHash[t],i){while(i.search("%")!=-1)i=i.replace("%","\n");for(u=0;u<e.length;u++)i=i.replace("#"+u.toString(),e[u]);return i}return""},t.prototype.checkAllKeys=function(){for(var t=this.getWordsIds(),n=0;n<t.length;n++)this._textsHash[t[n]]&&this._textsHash[t[n]]!=t[n]||console.log("locale:: "+t[n]+" is local!")},t.prototype.setJson=function(n){this._isJson=!0;this._json=n},t}();n.MDLocale=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(){}return Object.defineProperty(n,"locale",{get:function(){return n._locale},enumerable:!0,configurable:!0}),Object.defineProperty(n,"levels",{get:function(){return n._levels},enumerable:!0,configurable:!0}),Object.defineProperty(n,"view",{get:function(){return n._view},enumerable:!0,configurable:!0}),Object.defineProperty(n,"table",{get:function(){return n._table},enumerable:!0,configurable:!0}),Object.defineProperty(n,"tables",{get:function(){return n._tablesConfig},enumerable:!0,configurable:!0}),Object.defineProperty(n,"availableTables",{get:function(){return n._availableTables},enumerable:!0,configurable:!0}),Object.defineProperty(n,"me",{get:function(){return this._table.users.me},enumerable:!0,configurable:!0}),n.initMe=function(t){n._table.users.initMe(t)},n.setData=function(t){n._levels.setData(t);n._tablesConfig.setData(t);n._table.setData(t);n._locale.setData(t);n._view.setData(t)},n}();t._locale=new n.MDLocale;t._levels=new n.MDLevels;t._view=new n.MView;t._table=new n.MTable;t._tablesConfig=new n.MDTablesConfig;t._availableTables=[];n.Model=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function t(){}return t.init=function(){var i,r;for(n.Sounds.add(t.SOUNDS,t.MUSICS),i=0;i<t.BACK_LOAD_SOUNDS.length;i++)n.Sounds.load(t.BACK_LOAD_SOUNDS[i],{preload:!0,url:"assets/sounds/"+t.BACK_LOAD_SOUNDS[i]+".mp3"});r=n.Store.get("sound");r&&(n.Sounds.soundsEnabled=r.sounds,n.Sounds.musicEnabled=r.music)},t}();t.ALL_IN="all_in";t.GIVE_OUT_CARD="Card_deal_dealer_01";t.OPEN_TABLE_CARDS1="Card_deal_flip_08";t.OPEN_TABLE_CARDS2="Card_deal_flip_10";t.CHECK="check_01";t.BUTTON_CLICK="Digital Click Neutral 07_1";t.FLOP_DEAL="flop_deal_01";t.TURN_TIMER_TICK="Fold_TimerTick";t.SHUFFLE="shuffle_01";t.CHIP_STACK="ui_bet_chipstack_01";t.FOLD="ui_clear_whoosh_01";t.WIN="win_small";t.MY_BETTING="your_turn";t.MUSICS=[];t.SOUNDS=[t.ALL_IN,t.GIVE_OUT_CARD,t.OPEN_TABLE_CARDS1,t.OPEN_TABLE_CARDS2,t.CHECK,t.BUTTON_CLICK,t.FLOP_DEAL,t.TURN_TIMER_TICK,t.SHUFFLE,t.CHIP_STACK,t.FOLD,t.WIN,t.MY_BETTING];t.PRELOAD_SOUNDS=[];t.BACK_LOAD_SOUNDS=[t.ALL_IN,t.GIVE_OUT_CARD,t.OPEN_TABLE_CARDS1,t.OPEN_TABLE_CARDS2,t.CHECK,t.BUTTON_CLICK,t.FLOP_DEAL,t.TURN_TIMER_TICK,t.SHUFFLE,t.CHIP_STACK,t.FOLD,t.WIN,t.MY_BETTING];n.SoundsHelper=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this;i.BOARD_WIDTH_KOEF=.95;i.DEALER_WIDTH_KOEF=.25;i.CARDS_CONT_WIDTH_KOEF=.38;i.CARDS_CONT_TOP_OFFSET_KOEF=.43;i.BUTTON_BACK_WIDTH_KOEF=.08;i.BUTTON_BACK_OFFSET_KOEF=.03;i.BUY_INTO_GAME_POPUP_WIDTH_KOEF=.6;i.BUY_INTO_GAME_POPUP_HEIGHT_KOEF=.5;i.NOT_ENOUGH_POPUP_WIDTH_KOEF=.62;i.NOT_ENOUGH_POPUP_HEIGHT_KOEF=.91;i.BUTTONS_BETS_WIDTH_KOEF=.34;i.BUTTONS_BETS_BOTTOM_RIGHT_OFFSET_KOEF=.025;i.RAISE_VIEW_HEIGHT_KOEF=.6;i.RAISE_VIEW_BOTTOM_OFFSET_KOEF=.25;i.RAISE_VIEW_RIGHT_OFFSET_KOEF=.03;i.LEVEL_PANEL_TOP_OFFSET_KOEF=i.BUTTON_BACK_OFFSET_KOEF;i.LEVEL_PANEL_LEFT_OFFSET_KOEF=i.BUTTON_BACK_OFFSET_KOEF+i.BUTTON_BACK_WIDTH_KOEF+.08;i.LEVEL_PANEL_HEIGHT_KOEF=.03;i.HOURLY_DRIP_OFFSET_TOP_KOEF=.03;i.HOURLY_DRIP_OFFSET_RIGHT_KOEF=.013;i.HOURLY_DRIP_HEIGHT_KOEF=.138;i.BUTTON_WATCH_WIDTH_KOEF=.08;i.BUTTON_WATCH_OFFSET_KOEF=.03;i.HOURLY_DRIP_TIP_FONT_SIZE_KOEF=.051;i.BET_POPUP_WIDTH_KOEF=.3;i._bg=new n.Bg;i._dealer=new n.Dealer;i._cardsContainer=new n.BoardCardsContainer;i._table=new n.Table;i._raiseView=new n.RaiseView;i._levelPanel=new n.LevelPanel;i.updateLevel();i._buttonsBetsContainer=new n.ButtonsBetsContainer;i._buttonBack=new n.ButtonImage("btn_back_up","btn_back_up","btn_back_down","btn_back_up");i._buttonBack.on(n.ButtonImage.EVENT_CLICK,i.toggleStandUpPopup,i);i._buttonWatch=new n.ButtonImage("btn_watch_up","btn_watch_up","btn_watch_down");i._buttonWatch.on(n.ButtonImage.EVENT_CLICK,i.onButtonWatchClick,i);i._tableController=new n.TableController;i._tableController.setViews(i._table,i._cardsContainer);i._playController=new n.PlayController;i._playController.setViews(i._buttonsBetsContainer,i._raiseView);i._standUpPopup=new n.StandUpPopup;i._standUpPopup.visible=!1;i._standUpPopup.on(n.StandUpPopup.EVENT_CLOSE,i.toggleStandUpPopup,i);i._standUpPopup.on(n.StandUpPopup.EVENT_SELECT_OPTION,i.onSelectStandUpOption,i);i._buyIntoGamePopup=new n.BuyIntoGamePopup;i._buyIntoGamePopup.visible=!1;i._buyIntoGamePopup.on(n.BuyIntoGamePopup.EVENT_CLOSE,i.onBuyIntoGameClose,i);i._buyIntoGamePopup.on(n.BuyIntoGamePopup.EVENT_EXIT,i.onBuyIntoGameClose,i);i._buyIntoGamePopup.on(n.BuyIntoGamePopup.EVENT_OK,i.onBuyIntoGameOk,i);i._notEnoughPopup=new n.Lobby.NotEnoughPopup;i._notEnoughPopup.visible=!1;i._notEnoughPopup.on(n.Lobby.NotEnoughPopup.EVENT_CLOSE,i.onNotEnoughPopupClose,i);i._notEnoughPopup.on(n.Lobby.NotEnoughPopup.EVENT_OK,i.onNotEnoughPopupOk,i);i._hourlyDrip=new n.Lobby.HourlyDrip;i._hourlyDripTip=new n.Lobby.HourlyDripTip;i._hourlyDripTip.anchor.set(.5,0);i._buttonWatch.disabled=n.RewardedVideoController.instance.status!=n.RewardedVideoController.AVAILABLE;n.ModelEvents.on(n.ModelEvent.MODEL_ME,i.onChangeMe,i);n.RewardedVideoController.instance.on(n.RewardedVideoController.AVAILABLE,function(){i._buttonWatch.disabled=n.RewardedVideoController.instance.status!=n.RewardedVideoController.AVAILABLE;i._notEnoughPopup.disabled=!(n.RewardedVideoController.instance.status==n.RewardedVideoController.AVAILABLE)});return i}return __extends(i,t),i.prototype.onChangeMe=function(t){t.type===n.ModelEvent.UPDATE&&(this.updateLevel(),this._hourlyDrip.disabled=!n.Model.me.availableHourlyDrip&&n.Model.me.timeHourlyDrip!=0,this._hourlyDrip.time=n.Model.me.timeHourlyDrip)},i.prototype.getHourlyDrip=function(){(new n.CommandUser).getHourlyDrip()},i.prototype.updateLevel=function(){this._levelPanel.level=n.Model.me.level;this._levelPanel.progress=n.Model.me.progressForNextLevel},i.prototype.toggleStandUpPopup=function(){this._standUpPopup.visible=!(this._buttonBack.visible=this._standUpPopup.visible)},i.prototype.toggleNotEnoughPopup=function(){this._notEnoughPopup.disabled=!(n.RewardedVideoController.instance.status==n.RewardedVideoController.AVAILABLE);this._notEnoughPopup.visible=!this._notEnoughPopup.visible;this._notEnoughPopup.visible&&n.Statistic.Log(n.StatCounters.player_table_bust,n.Model.me.stack,{kingdom:n.Model.table.level.toString()})},i.prototype.onHourlyDrip=function(){this.attachHourlyDripTipToWatchButton();this._hourlyDripTip.show(n.Model.me.earned);n.Statistic.Log(n.StatCounters.tap_hourly_drip,n.Model.me.earned,{kingdom:"success"});n.Statistic.Log(n.StatCounters.currency_source,n.Model.me.earned,{kingdom:(n.Model.me.balance>>0).toString(),"class":"hourly_drip"})},i.prototype.onSelectStandUpOption=function(t){this.toggleStandUpPopup();switch(t){case n.StandUpPopup.OPTION_EXIT:(new n.CommandUser).leaveTable(n.Model.table.id);var i=n.Model.me.stack;n.Statistic.Log(n.StatCounters.player_table_leave,i,{kingdom:n.Model.table.level.toString()});break;case n.StandUpPopup.OPTION_STAND_UP:(new n.CommandUser).standUp(n.Model.table.id)}},i.prototype.onBuyIntoGameClose=function(){(new n.CommandUser).leaveTable(n.Model.table.id)},i.prototype.onBuyIntoGameOk=function(){},i.prototype.onNotEnoughPopupClose=function(){this.toggleNotEnoughPopup();this._tableController.tryToSeat()},i.prototype.onNotEnoughPopupOk=function(){this.toggleNotEnoughPopup();this.attachHourlyDripTipToCenter();this.showRewarded()},i.prototype.onButtonWatchClick=function(){this.attachHourlyDripTipToWatchButton();this.showRewarded()},i.prototype.showRewarded=function(){var t=this;n.RewardedVideoController.instance.show(function(i){i.code=="SHOWED"?t.isWathedOk():n.Statistic.Log(n.StatCounters.tap_w2e,null,{kingdom:"failure"})})},i.prototype.isWathedOk=function(){(new n.CommandUser).getRewardedVideo()},i.prototype.onRewardedVideo=function(){this._hourlyDripTip.show(n.Model.me.earned);this._buttonWatch.disabled=!0;var t=this._tableController.tryToSeat();t||this.toggleNotEnoughPopup()},i.prototype.onExitGame=function(){n.ScenesManager.goToScene("lobby")},i.prototype.onBetUpdate=function(){},i.prototype.pause=function(){t.prototype.pause.call(this);this._tableController.enabled=!1;this._tableController.off(n.TableController.EXIT_GAME,this.onExitGame,this);this._tableController.off(n.TableController.MONEY_EXPIRED,this.toggleNotEnoughPopup,this);this._tableController.off(n.TableController.NOT_ENOUGH_BANKROLL,this.toggleNotEnoughPopup,this);this._hourlyDrip.off(n.Lobby.HourlyDrip.EVENT_CLICK,this.getHourlyDrip,this);n.ModelEvents.off(n.ModelEvent.MODEL_ME_REWARDED,this.onRewardedVideo,this);n.ModelEvents.off(n.ModelEvent.MODEL_ME_HOURLY_DRIP,this.onHourlyDrip,this);n.SceneController.removeFromParent([this._bg,this._dealer,this._buttonWatch,this._raiseView,this._table,this._hourlyDripTip,this._levelPanel,this._buyIntoGamePopup,this._standUpPopup,this._notEnoughPopup,this._cardsContainer,this._buttonsBetsContainer,this._buttonBack,this._hourlyDrip,])},i.prototype.resume=function(){t.prototype.resume.call(this);this.onResize();this._buttonWatch.disabled=n.RewardedVideoController.instance.status!=n.RewardedVideoController.AVAILABLE;this._tableController.enabled=!0;this._tableController.on(n.TableController.EXIT_GAME,this.onExitGame,this);this._tableController.on(n.TableController.MONEY_EXPIRED,this.toggleNotEnoughPopup,this);this._tableController.on(n.TableController.NOT_ENOUGH_BANKROLL,this.toggleNotEnoughPopup,this);this._hourlyDrip.on(n.Lobby.HourlyDrip.EVENT_CLICK,this.getHourlyDrip,this);this._tableController.initGame();this._container.addChild(this._bg);this._containerReal.addChild(this._cardsContainer);this._containerReal.addChild(this._table);this._containerReal.addChild(this._levelPanel);this._containerReal.addChild(this._hourlyDrip);this._containerReal.addChild(this._buttonWatch);this._containerReal.addChild(this._hourlyDripTip);this._containerReal.addChild(this._raiseView);this._containerReal.addChild(this._buttonsBetsContainer);this._containerReal.addChild(this._buttonBack);this._containerReal.addChild(this._standUpPopup);this._containerReal.addChild(this._buyIntoGamePopup);this._containerReal.addChild(this._notEnoughPopup);n.ModelEvents.on(n.ModelEvent.MODEL_ME_REWARDED,this.onRewardedVideo,this);n.ModelEvents.on(n.ModelEvent.MODEL_ME_HOURLY_DRIP,this.onHourlyDrip,this)},i.prototype.onResize=function(){var i,e,o,r;t.prototype.onResize.call(this);i=n.Model.view;this._bg.setSize(i.gameFullWidth,i.gameFullHeight);this._dealer.setWidth(i.gameRealWidth*this.DEALER_WIDTH_KOEF);this._dealer.x=i.gameRealWidth/2-this._dealer.getWidth()/2;this._dealer.y=0;this._cardsContainer.setWidth(i.gameRealWidth*this.CARDS_CONT_WIDTH_KOEF);this._cardsContainer.x=i.gameRealWidth/2;this._cardsContainer.y=i.gameRealHeight*this.CARDS_CONT_TOP_OFFSET_KOEF;this._table.setSize(i.gameRealWidth,i.gameRealHeight);this._raiseView.setHeight(i.gameRealHeight);this._raiseView.x=i.gameRealWidth-this._raiseView.getWidth();this._raiseView.y=0;this._standUpPopup.setHeight(i.gameRealHeight);this._standUpPopup.x=0;this._standUpPopup.y=0;this._buyIntoGamePopup.setSize(i.gameRealWidth*this.BUY_INTO_GAME_POPUP_WIDTH_KOEF,i.gameRealHeight*this.BUY_INTO_GAME_POPUP_HEIGHT_KOEF);this._buyIntoGamePopup.x=i.gameRealWidth/2-this._buyIntoGamePopup.getWidth()/2;this._buyIntoGamePopup.y=i.gameRealHeight/2-this._buyIntoGamePopup.getHeight()/2;var u=i.gameRealWidth*this.NOT_ENOUGH_POPUP_WIDTH_KOEF,f=i.gameRealHeight*this.NOT_ENOUGH_POPUP_HEIGHT_KOEF,s=i.gameRealWidth/2-u/2,h=i.gameRealHeight/2-f/2;this._notEnoughPopup.setSize(u,f);this._notEnoughPopup.position.set(s,h);this._levelPanel.setHeight(i.gameRealHeight*this.LEVEL_PANEL_HEIGHT_KOEF);this._levelPanel.x=i.gameRealHeight*this.LEVEL_PANEL_LEFT_OFFSET_KOEF;this._levelPanel.y=i.gameRealHeight*this.LEVEL_PANEL_TOP_OFFSET_KOEF;this._hourlyDripTip.fontSize=i.gameRealHeight*this.HOURLY_DRIP_TIP_FONT_SIZE_KOEF;e=this._hourlyDrip.x+this._hourlyDrip.getWidth()/1.65;o=this._hourlyDrip.y+this._hourlyDrip.getHeight()*1.05;this._hourlyDripTip.position.set(e,o);this._buttonsBetsContainer.setWidth(i.gameRealWidth*this.BUTTONS_BETS_WIDTH_KOEF);this._buttonsBetsContainer.x=i.gameRealWidth-this._buttonsBetsContainer.getWidth()-i.gameRealWidth*this.BUTTONS_BETS_BOTTOM_RIGHT_OFFSET_KOEF;this._buttonsBetsContainer.y=i.gameRealHeight-this._buttonsBetsContainer.getHeight()-i.gameRealHeight*this.BUTTONS_BETS_BOTTOM_RIGHT_OFFSET_KOEF;this._buttonBack.setWidth(i.gameRealWidth*this.BUTTON_BACK_WIDTH_KOEF,!0);this._buttonBack.x=this._buttonBack.y=i.gameRealHeight*this.BUTTON_BACK_OFFSET_KOEF;this._buttonWatch.setWidth(i.gameRealWidth*this.BUTTON_WATCH_WIDTH_KOEF,!0);r=i.gameRealHeight*this.BUTTON_WATCH_OFFSET_KOEF;this._buttonWatch.y=r;this._buttonWatch.x=i.gameRealWidth-this._buttonWatch.getWidth()-r;this._hourlyDrip.setHeight(i.gameRealHeight*this.HOURLY_DRIP_HEIGHT_KOEF);this._hourlyDrip.position.set(this._buttonWatch.x-i.gameRealWidth*this.HOURLY_DRIP_OFFSET_RIGHT_KOEF-this._hourlyDrip.getWidth(),i.gameRealHeight*this.HOURLY_DRIP_OFFSET_TOP_KOEF)},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bg.destroy();this._cardsContainer.destroy();this._cardsContainer.destroy();this._levelPanel.destroy();this._standUpPopup.destroy();this._buttonWatch.destroy();this._raiseView.destroy();this._buttonsBetsContainer.destroy();this._buyIntoGamePopup.destroy();this._tableController.destroy()},i.prototype.initHourlyDrip=function(){setInterval(function(){n.Model.me.hourlyDripDecrement()},1e3)},i.prototype.attachHourlyDripTipToWatchButton=function(){var n=this._buttonWatch.x-this._buttonWatch.getWidth()/7,t=this._buttonWatch.y+this._buttonWatch.getHeight()*1.05;this._hourlyDripTip.position.set(n,t)},i.prototype.attachHourlyDripTipToCenter=function(){var t=n.Model.view,i=(t.gameRealWidth-this._hourlyDripTip.getWidth())/2,r=(t.gameRealHeight-this._hourlyDripTip.getHeight())/2;this._hourlyDripTip.position.set(i,r)},i}(n.SceneController);n.GameSceneController=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;return n.BUTTON_WIDTH_KOEF=.3,n.BUTTON_HEIGHT_KOEF=.185,n.BUTTON_TOP_OFFSET=.736,n.BUTTONS_INTERVAL_KOEF=.08,n.HEADER_FONT_SIZE_KOEF=.18,n.HEADER_TOP_OFFSET=.1,n.CLOSE_BUTTON_DIAMETER_KOEF=.076,n.init(),n}return __extends(i,t),i.prototype.getWidth=function(){return this._w},i.prototype.getHeight=function(){return this._h},i.prototype.setSize=function(n,t){this._h=t;this._w=n;this.update()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bg.destroy();this._okButton.destroy();this._exitButton.destroy();this._header.destroy()},i.prototype.init=function(){var t=this;this._bg=new n.BuyIntoGamePopupBg;this.addChild(this._bg);this._okButton=new n.BuyIntoGamePopupButton("Buy into game");this._okButton.on(n.BuyIntoGamePopupButton.EVENT_CLICK,function(){t.emit(i.EVENT_OK)});this.addChild(this._okButton);this._exitButton=new n.BuyIntoGamePopupButton("Exit to lobby");this._exitButton.on(n.BuyIntoGamePopupButton.EVENT_CLICK,function(){t.emit(i.EVENT_EXIT)});this._exitButton.tint=13421772;this.addChild(this._exitButton);this._closeButton=new n.ButtonImage("lobby/reward_video/close_button","lobby/reward_video/close_button","lobby/reward_video/close_button_down");this._closeButton.on(n.ButtonImage.EVENT_CLICK,function(){t.emit(i.EVENT_CLOSE)});this.addChild(this._closeButton);this._header=new n.Text(i.HEADER_TEXT_TEMPLATE,n.FontsHelper.Text.fontForRewardVideoPopupHeader);this.addChild(this._header)},i.prototype.update=function(){var n=this._w,t=this._h,i,u,f,r,e,o;this._bg.setPosition(0,0);this._bg.setSize(n,t);i=n*this.BUTTON_WIDTH_KOEF;u=t*this.BUTTON_HEIGHT_KOEF;this._okButton.y=t*this.BUTTON_TOP_OFFSET;this._exitButton.y=t*this.BUTTON_TOP_OFFSET;this._okButton.setWidth(i);this._okButton.setHeight(u);this._exitButton.setWidth(i);this._exitButton.setHeight(u);f=i*2+t*this.BUTTONS_INTERVAL_KOEF;this._okButton.x=n/2+f/2-i;this._exitButton.x=n/2-f/2;r=n*this.CLOSE_BUTTON_DIAMETER_KOEF;this._closeButton.x=n-r/4*3;this._closeButton.y=0-r/4;this._closeButton.setWidth(r,!0);this._header.fontSize=t*this.HEADER_FONT_SIZE_KOEF;e=n/2-this._header.width/2;o=t*this.HEADER_TOP_OFFSET;this._header.position.set(e,o)},i}(PIXI.Container);t.EVENT_CLOSE="buyintogamepopupclose";t.EVENT_OK="buyintogamepopupok";t.EVENT_EXIT="buyintogamepopupexit";t.HEADER_TEXT_TEMPLATE="BUY INTO GAME";n.BuyIntoGamePopup=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;return n.interactive=!0,n._bgSprite=new PIXI.Sprite,n.addChild(n._bgSprite),n._bgMask=new PIXI.Graphics,n}return __extends(i,t),i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bgSprite.destroy();this._bgMask.destroy()},i.prototype.update=function(){this.resizeBg()},i.prototype.resizeBg=function(){var r=n.Resources.getOrigSize(n.Resources.getTexture(i.BG_TEXTURE_NAME).baseTexture),t;this._bgSprite.texture=n.Resources.getTexture(i.BG_TEXTURE_NAME,{scale:this._h/r.height,drawNewTexture:!0});this._bgSprite.width=this._w;this._bgSprite.height=this._h;t=this._h*.019;this._bgMask.clear();this._bgMask.beginFill(13421772);this._bgMask.drawRect(t,t,this._w-2*t,this._h-2*t);this._bgMask.endFill()},i}(PIXI.Container);t.BG_TEXTURE_NAME="lobby/reward_video/bg";t.BORDER_OFFSET_X_KOEF=.041;t.BORDER_OFFSET_Y_KOEF=.027;t.SHADOW_OFFSET_KOEF=.02;n.BuyIntoGamePopupBg=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(i){var r=t.call(this,10,10)||this;return r._colorUp=9635350,r._colorDown=11601430,r._bg=new PIXI.Sprite,r.addChild(r._bg),r._label=new n.Text(i,n.FontsHelper.Text.fontForButtonBet),r.addChild(r._label),r}return __extends(i,t),Object.defineProperty(i.prototype,"currentState",{get:function(){return this._curState},enumerable:!0,configurable:!0}),i.prototype.onResize=function(){this._label.fontSize=Math.min(5,this._h*i.CAPTION_FONT_SIZE_KOEF>>0);this._label.x=this._w/2-this._label.width/2>>0;this._label.y=this._h/2-this._label.height/2>>0;this.resizeBg()},Object.defineProperty(i.prototype,"tint",{set:function(n){this._bg.tint=n},enumerable:!0,configurable:!0}),i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);this.onResize()},i.prototype.setWidth=function(n,i){i===void 0&&(i=!1);t.prototype.setWidth.call(this,n,i);this.onResize()},i.prototype.setHeight=function(n,i){i===void 0&&(i=!1);t.prototype.setHeight.call(this,n,i);this.onResize()},i.prototype.resizeBg=function(){var u=this._w*i.SCALE_X_KOEF,f=this._h*i.SCALE_Y_KOEF,e=this._w*(1-2*i.SCALE_X_KOEF),o=this._h*(1-2*i.SCALE_Y_KOEF),s=this._curState===i.STATE_DOWN?u:0,h=this._curState===i.STATE_DOWN?f:0,t=this._curState===i.STATE_DOWN?e:this._w,c=this._curState===i.STATE_DOWN?o:this._h,r="lobby/reward_video/button",l=n.Resources.getOrigSize(n.Resources.getTexture(r).baseTexture),a=t/l.width;this._bg.texture=n.Resources.getTexture(r,{scale:a,drawNewTexture:!0});this._bg.x=s;this._bg.y=h;this._bg.width=t;this._bg.height=c},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bg.destroy();this._label.destroy()},i}(n.ButtonBase);t.CAPTION_FONT_SIZE_KOEF=.35;t.CAPTION_LEFT_OFFSET=.483;t.SCALE_X_KOEF=.025;t.SCALE_Y_KOEF=.075;t.BG_COLOR=1279135;n.BuyIntoGamePopupButton=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.changeTexture=function(t){var r=new PIXI.Sprite(t),f=new PIXI.filters.BlurFilter,u,e;f.blur=3;u=new PIXI.Container;u.addChild(r);var i=u.getLocalBounds(),o=i.width,s=i.height;i.width*=1.2;i.height*=1.2;i.x-=(i.width-o)*.5;i.y-=(i.height-s)*.5;r.filters=[f];e=n.Resources.getFromCache("BoardCardShadow",i.width,i.height);e?this.texture=e:(t=n.Config.renderer.generateTexture(u,PIXI.SCALE_MODES.LINEAR,n.Config.renderer.resolution,i),n.Resources.addToCache("BoardCardShadow",t,t.width,t.height),r.destroy(!1),f=null,r=null,this.texture=t)},i}(PIXI.Sprite);n.BoardCardShadow=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;return n._w=50,n._h=50,n}return __extends(i,t),i.prototype.showCards=function(n,t){this._mCard1=n;this._mCard2=t;this._card1.setMCard(this._mCard1);this._card2.setMCard(this._mCard2);this._card1.showCard(!0);this._card2.showCard(!0)},i.prototype.hideCards=function(){this._card1.showCard(!1,!0);this._card2.showCard(!1,!0);this._card1.highlight(n.HightliteState.NONE);this._card2.highlight(n.HightliteState.NONE)},i.prototype.highlightCards=function(t){for(var r,u=!1,f=!1,i=0,e=t;i<e.length;i++)r=e[i],this._mCard1&&this._mCard1.equals(r)&&(u=!0),this._mCard2&&this._mCard2.equals(r)&&(f=!0);this._card1.highlight(u?n.HightliteState.HIGHLIGHT:n.HightliteState.LOWLIGHT);this._card2.highlight(f?n.HightliteState.HIGHLIGHT:n.HightliteState.LOWLIGHT)},i.prototype.setSize=function(){},i.prototype.destroy=function(){this._card1&&this._card1.destroy();this._card2&&this._card2.destroy();t.prototype.destroy.call(this)},i}(PIXI.Container);n.PlayerCardsBase=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var r=t.call(this)||this;return r._avatarSize=50,r._circle=new PIXI.Graphics,r.addChild(r._circle),r._username=new n.Text(" ",n.FontsHelper.Text.fontWhite10),r.addChild(r._username),r._starLevelCont=new PIXI.Container,r.addChild(r._starLevelCont),r._star=new PIXI.Sprite(n.Resources.getTexture(i.STAR_TEXTURE_NAME)),r._starLevelCont.addChild(r._star),r._level=new n.Text(" ",n.FontsHelper.Text.fontWhite10),r._starLevelCont.addChild(r._level),r}return __extends(i,t),Object.defineProperty(i.prototype,"level",{set:function(n){this._level.text=n.toString();this.resizeLevelCont()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"username",{set:function(n){this._username.text=n;this.resizeUsername()},enumerable:!0,configurable:!0}),i.prototype.setAvatarSize=function(n){this._avatarSize=n;this._circle.clear();this._circle.beginFill(2097152);this._circle.drawCircle(this._avatarSize/2,this._avatarSize/2,this._avatarSize/2);this._circle.x=0;this._circle.y=0;this.resizeLevelCont();this.resizeUsername()},i.prototype.resizeUsername=function(){this._username.fontSize=Math.max(this._avatarSize*i.USERNAME_FONT_SIZE_KOEF,5);this._username.x=this._avatarSize/2-this._username.width/2;this._username.y=this._avatarSize*i.USERNAME_TOP_OFFSET_KOEF},i.prototype.resizeLevelCont=function(){var t=this._avatarSize*i.STAR_HEIGHT_KOEF,r=n.Resources.getOrigSize(n.Resources.getTexture(i.STAR_TEXTURE_NAME).baseTexture),u=t/r.height,e=r.width*u,f;this._star.texture=n.Resources.getTexture(i.STAR_TEXTURE_NAME,{scale:u,drawNewTexture:!0});this._star.width=e;this._star.height=t;this._star.x=0;this._star.y=0;f=this._level.text&&6/this._level.text.length||1;this._level.fontSize=Math.max(this._avatarSize*i.LEVEL_FONT_SIZE_KOEF*Math.min(f,1),5);this._level.x=this._star.x+this._star.width+this._avatarSize*i.LEVEL_LEFT_OFFSET_KOEF;this._level.y=this._star.height/2-this._level.height/2;this._starLevelCont.x=this._avatarSize/2-(this._star.width+this._level.width)/2;this._level.width&&(this._starLevelCont.x+=this._avatarSize*i.LEVEL_LEFT_OFFSET_KOEF/2);this._starLevelCont.y=this._avatarSize/2-this._star.height/2},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._starLevelCont.destroy();this._star.destroy();this._username.destroy();this._level.destroy();this._circle.destroy()},i}(PIXI.Container);t.STAR_TEXTURE_NAME="lobby/star";t.STAR_HEIGHT_KOEF=.15;t.LEVEL_FONT_SIZE_KOEF=.15;t.LEVEL_LEFT_OFFSET_KOEF=.05;t.USERNAME_FONT_SIZE_KOEF=.2;t.USERNAME_TOP_OFFSET_KOEF=.1;n.DefaultAvatar=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(n){function t(){var t=n.call(this)||this;return t.BACKGROUND_COLOR=8391968,t.BORDER_LEFT_COLOR=4916508,t.BORDER_LEFT_KOEF=.02,t.interactive=!0,t._bg=new PIXI.Graphics,t.addChild(t._bg),t._border=new PIXI.Graphics,t.addChild(t._border),t}return __extends(t,n),t.prototype.setPosition=function(n,t){this.x=n;this.y=t},t.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},t.prototype.destroy=function(){n.prototype.destroy.call(this)},t.prototype.drawBg=function(){this._bg.clear();this._bg.beginFill(this.BACKGROUND_COLOR);this._bg.drawRect(0,0,this._w,this._h);this._bg.endFill()},t.prototype.drawBorder=function(){this._border.clear();this._border.lineStyle(this._w*this.BORDER_LEFT_KOEF,this.BORDER_LEFT_COLOR).moveTo(0,0).lineTo(0,this._h)},t.prototype.update=function(){this.drawBg();this.drawBorder()},t}(PIXI.Container);n.RaiseViewBg=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(i){var r=t.call(this,420,200)||this;return r._text="",r._enabled=!0,r._colorUp=9635350,r._colorDisabled=8947848,r._colorDown=11601430,r._text=i,r._bg=new PIXI.Graphics,r._bg.tint=r._colorUp,r.addChild(r._bg),r._label=new PIXI.Text(r._text,n.FontsHelper.Text.fontRaiseSwype),r.addChild(r._label),r}return __extends(i,t),Object.defineProperty(i.prototype,"currentState",{get:function(){return this._curState},enumerable:!0,configurable:!0}),i.prototype.onResize=function(){this.drawBg();this._label.style.fontSize=this._w*i.CAPTION_FONT_SIZE_KOEF;this._label.x=this._w/2-this._label.width/2;this._label.y=this._h/2-this._label.height/2},i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);this._curState===i.STATE_DISABLED?(this.buttonMode=!1,this._bg.tint=this._colorDisabled,this._label.alpha=.7):(this.buttonMode=!0,this._bg.tint=this._curState===i.STATE_DOWN?this._colorDown:this._colorUp,this._label.alpha=1);this.onResize()},i.prototype.setWidth=function(n,i){i===void 0&&(i=!1);t.prototype.setWidth.call(this,n,i);this.onResize()},i.prototype.setHeight=function(n,i){i===void 0&&(i=!1);t.prototype.setHeight.call(this,n,i);this.onResize()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bg.destroy();this._label.destroy()},i.prototype.drawBg=function(){var t=this._w*i.SCALE_X_KOEF,r=this._h*i.SCALE_Y_KOEF,u=this._w*(1-2*i.SCALE_X_KOEF),f=this._h*(1-2*i.SCALE_Y_KOEF),e=this._curState===i.STATE_DOWN?t:0,o=this._curState===i.STATE_DOWN?r:0,s=this._curState===i.STATE_DOWN?u:this._w,n=this._curState===i.STATE_DOWN?f:this._h;this._bg.clear();this._bg.beginFill(16777215,0);this._bg.lineStyle(2,16777215);this._bg.drawRoundedRect(e,o,s,n,n/2.5);this._bg.endFill()},i}(n.ButtonBase);t.CAPTION_FONT_SIZE_KOEF=.2;t.SCALE_X_KOEF=.025;t.SCALE_Y_KOEF=.075;n.RaiseViewButton=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var r=t.call(this)||this;r.HEADER_WIDTH_KOEF=1;r.HEADER_HEIGHT_KOEF=.176;r.SETTINGS_UNIT_WIDTH_KOEF=1;r.SETTINGS_UNIT_HEIGHT_KOEF=.143;r._units=[];r._bg=new PIXI.Sprite(n.Resources.getTexture(i.BG_TEXTURE_NAME));r.addChild(r._bg);r._header=new n.StandUpPopupHeader;r._header.on(n.StandUpPopupHeader.EVENT_CLOSE,function(){return r.emit(i.EVENT_CLOSE)},r);return r.addChild(r._header),r.addUnit("stand_up_popup/exit","Exit to Lobby",i.OPTION_EXIT),r.addUnit("stand_up_popup/stand_up","Stand Up",i.OPTION_STAND_UP),r}return __extends(i,t),i.prototype.setHeight=function(t){this._h=t;var i=n.Resources.getOrigSize(this._bg.texture.baseTexture);this._w=this._h/i.height*i.width;this.update()},i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bg.destroy();this._header.destroy();this._units.forEach(function(n){return n.destroy()})},i.prototype.addUnit=function(t,r,u){var e=this,f=new n.StandUpPopupUnit(t,r);f.on(n.StandUpPopupUnit.EVENT_CLICK,function(){return e.emit(i.EVENT_SELECT_OPTION,u)});this._units.push(f);this.addChild(f)},i.prototype.update=function(){var u,t,f,r;this._bg.texture=n.Resources.getTexture(i.BG_TEXTURE_NAME,{width:this._w,height:this._h});this._bg.x=this._bg.y=0;this._bg.width=this._w;this._bg.height=this._h;u=this._w*this.HEADER_WIDTH_KOEF;t=this._h*this.HEADER_HEIGHT_KOEF;this._header.setPosition(0,0);this._header.setSize(u,t);f=this._w*this.SETTINGS_UNIT_WIDTH_KOEF;r=this._h*this.SETTINGS_UNIT_HEIGHT_KOEF;this._units.forEach(function(n,i){var u=t+r*i;n.setPosition(0,u);n.setSize(f,r)})},i}(PIXI.Container);t.EVENT_CLOSE="standuppopupclose";t.EVENT_SELECT_OPTION="standuppopupselectoption";t.OPTION_EXIT="OPTION_EXIT";t.OPTION_STAND_UP="OPTION_STAND_UP";t.OPTION_NEW_TABLE="OPTION_NEW_TABLE";t.OPTION_SELECT_NEW_TABLE="OPTION_SELECT_NEW_TABLE";t.BG_TEXTURE_NAME="stand_up_popup/bg";n.StandUpPopup=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(n){function t(){var t=n.call(this)||this;return t.BACKGROUND_COLOR=8391968,t.BORDER_LEFT_COLOR=4916508,t.BORDER_LEFT_KOEF=.02,t.interactive=!0,t._bg=new PIXI.Graphics,t.addChild(t._bg),t._border=new PIXI.Graphics,t.addChild(t._border),t}return __extends(t,n),t.prototype.setPosition=function(n,t){this.x=n;this.y=t},t.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},t.prototype.destroy=function(){n.prototype.destroy.call(this)},t.prototype.drawBg=function(){this._bg.clear();this._bg.beginFill(this.BACKGROUND_COLOR);this._bg.drawRect(0,0,this._w,this._h);this._bg.endFill()},t.prototype.drawBorder=function(){this._border.clear();this._border.lineStyle(this._w*this.BORDER_LEFT_KOEF,this.BORDER_LEFT_COLOR).moveTo(0,0).lineTo(0,this._h)},t.prototype.update=function(){this.drawBg();this.drawBorder()},t}(PIXI.Container);n.StandUpPopupBg=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this;i.TITLE_FONT_SIZE_KOEF=.2;i.TITLE_LEFT_OFFSET=.076;i.CLOSE_BUTTON_RIGHT_OFFSET=.05;i.CLOSE_BUTTON_WIDTH_KOEF=.223;i._title=new PIXI.Text("OPTIONS",n.FontsHelper.Text.fontForStandUpPopupUnit);i.addChild(i._title);i._closeButton=new n.ButtonImage("lobby/reward_video/close_button","lobby/reward_video/close_button","lobby/reward_video/close_button_down");i._closeButton.on(n.ButtonImage.EVENT_CLICK,i.onCloseButtonClick,i);return i.addChild(i._closeButton),i}return __extends(i,t),i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._title.destroy();this._closeButton.destroy()},i.prototype.onCloseButtonClick=function(){this.emit(i.EVENT_CLOSE)},i.prototype.update=function(){var t,i,n,r,u;this._title.style.fontSize=this._w*this.TITLE_FONT_SIZE_KOEF;t=this._w*this.TITLE_LEFT_OFFSET;i=this._h/2-this._title.height/2;this._title.position.set(t,i);n=this._w*this.CLOSE_BUTTON_WIDTH_KOEF;this._closeButton.setWidth(n,!0);r=this._w*(1-this.CLOSE_BUTTON_RIGHT_OFFSET)-n;u=this._h/2-this._closeButton.getHeight()/1.75;this._closeButton.x=r;this._closeButton.y=u},i}(PIXI.Container);t.EVENT_CLOSE="standuppopupheaderclose";n.StandUpPopupHeader=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(i,r){var u=t.call(this,50,50)||this;return u._iconTextureName=i,u._icon=new n.RoundButton(i),u._icon.interactive=!1,u.addChild(u._icon),u._label=new n.Text(r,n.FontsHelper.Text.fontForStandUpPopupUnit),u.addChild(u._label),u}return __extends(i,t),i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._icon.destroy();this._label&&this._label.destroy()},i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);this._icon.state=this._curState},i.prototype.update=function(){var n=this._w*i.ICON_HEIGHT_KOEF,u=this._w*i.ICON_LEFT_OFFSET,f=this._h/2-n/2,t,r;this._icon.setPosition(u,f);this._icon.setDiameter(n);this._label.fontSize=this._h*i.LABEL_FONT_SIZE_KOEF;t=this._w*(i.ICON_LEFT_OFFSET+.07)+this._icon.getWidth();r=this._h/2-this._label.height/2;this._label.position.set(t,r)},i}(n.ButtonBase);t.ICON_HEIGHT_KOEF=.25;t.ICON_LEFT_OFFSET=.076;t.LABEL_FONT_SIZE_KOEF=.3;n.StandUpPopupUnit=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;return n._ratio=9,n._progress=0,n.RADIUS_KOEF=.06,n.WHOLE_COLOR=327681,n.PROGRESS_COLOR=7132491,n.MIN_PROGRESS=.09,n._w=0,n._h=0,n.init(),n}return __extends(i,t),Object.defineProperty(i.prototype,"ratio",{set:function(n){this._ratio=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"progress",{get:function(){return this._progress},set:function(t){n.Tweener.to(this,1,{_progress:t,onUpdate:this.drawProgressLine,onUpdateScope:this,onComplete:this.drawProgressLine,onCompleteScope:this})},enumerable:!0,configurable:!0}),i.prototype.setHeight=function(n){this._h=n;this._w=this._h*this._ratio;this.drawProgressLine();this.drawWholeLine()},i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._wholeLine.destroy();this._progressLine.destroy()},i.prototype.init=function(){this._wholeLine=new PIXI.Graphics;this._wholeLine.position.set(0,0);this.drawWholeLine();this.addChild(this._wholeLine);this._progressLine=new PIXI.Graphics;this._progressLine.position.set(0,0);this.drawProgressLine();this.addChild(this._progressLine)},i.prototype.drawWholeLine=function(){var n=this._w,t=this._h,i=this._w*this.RADIUS_KOEF;this._wholeLine.clear();this._wholeLine.lineStyle(0);this._wholeLine.beginFill(this.WHOLE_COLOR,.65);this._wholeLine.drawRoundedRect(0,0,n,t,i);this._wholeLine.endFill()},i.prototype.drawProgressLine=function(){var n=this._w*Math.max(this._progress,this.MIN_PROGRESS),t=this._h,i=this._w*this.RADIUS_KOEF;this._progressLine.clear();this._progressLine.lineStyle(0);this._progressLine.beginFill(this.PROGRESS_COLOR,1);this._progressLine.drawRoundedRect(0,0,n,t,i);this._progressLine.endFill()},i}(PIXI.Container);n.LevelProgressBar=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;return n._h=1,n.init(),n}return __extends(i,t),i.prototype.setHeight=function(n){this._h=n;this.update()},i.prototype.setPosition=function(n,t){this.x=n;this.y=t;this.update()},Object.defineProperty(i.prototype,"level",{set:function(n){var t=n.toString(),i=this._level.text.length!==t.length;this._level.text=t;i&&this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"progress",{set:function(n){this._progressBar.progress=n},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){t.prototype.destroy.call(this);this._star.destroy();this._progressBar.destroy();this._level.destroy()},i.prototype.init=function(){this._star=new PIXI.Sprite(n.Resources.getTexture(i.STAR_TEXTURE_NAME));this.addChild(this._star);this._progressBar=new n.LevelProgressBar;this._progressBar.ratio=11;this.addChild(this._progressBar);this._level=new n.Text("1",n.FontsHelper.Text.fontForLevelBar);this.addChild(this._level)},i.prototype.update=function(){var t=this._h,r=n.Resources.getOrigSize(n.Resources.getTexture(i.STAR_TEXTURE_NAME).baseTexture),u=t/r.height,f=r.width*u;this._star.x=0;this._star.y=0;this._star.texture=n.Resources.getTexture(i.STAR_TEXTURE_NAME,{scale:u,drawNewTexture:!0});this._star.width=f;this._star.height=t;this._level.fontSize=this._h*i.LEVEL_FONT_SIZE_KOEF;this._level.x=f+this._h*i.INTERVAL_KOEF;this._level.y=this._h/2-this._level.height/2;this._progressBar.setHeight(this._h*i.PROGRESS_BAR_HEIGHT_KOEF);this._progressBar.x=this._level.x+this._level.width+this._h*i.INTERVAL_KOEF;this._progressBar.y=this._h/2-this._h*i.PROGRESS_BAR_HEIGHT_KOEF/2},i}(PIXI.Container);t.STAR_TEXTURE_NAME="lobby/star";t.LEVEL_FONT_SIZE_KOEF=.9;t.PROGRESS_BAR_HEIGHT_KOEF=.6;t.INTERVAL_KOEF=.14;n.LevelPanel=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(n){var i=t.call(this,50,50)||this;return i._textureName=n,i._sprite=new PIXI.Sprite,i.addChild(i._sprite),i}return __extends(i,t),i.getPreRenderedTexture=function(n,t,r){var o=n+"_"+r.toString(),f=i._preRenderedTextures[o]||{};if(t==null)return f.texture;var u=f.metrics||{},s=u.width==t.width&&u.height==t.height&&u.ref&&u.ref.baseTexture.imageUrl==t.baseTexture.imageUrl&&f.texture!=null,e=null;return s?e=f.texture:(u.width=t.width,u.height=t.height,u.ref=t,e=i.generateTexture(t,r)),f.texture=e,f.metrics=u,i._preRenderedTextures[o]=f,e},i.generateTexture=function(t,r){var f,u,e,o,s;return t==null?null:(f=new PIXI.Container,u=new PIXI.Sprite(t),u.tint=r===n.ButtonBase.STATE_DOWN?i.colorDown:i.colorUP,e=new PIXI.Graphics,e.beginFill(r===n.ButtonBase.STATE_DOWN?i.colorUP:i.colorDown),o=u.width/2*(1-i.BORDER_KOEF),e.drawCircle(u.width*.5,u.width*.5,o),e.endFill(),f.addChild(e),f.addChild(u),s=n.Config.renderer.generateTexture(f,PIXI.SCALE_MODES.LINEAR,n.Config.renderer.resolution),f.destroy({children:!0}),s)},Object.defineProperty(i.prototype,"state",{set:function(n){this.interactive||(this._curState=n,this.onChangeState())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentState",{get:function(){return this._curState},enumerable:!0,configurable:!0}),i.prototype.update=function(){var t=this._w;this._sprite.texture=i.getPreRenderedTexture(this._textureName,null,this._curState===n.ButtonBase.STATE_DOWN?n.ButtonBase.STATE_DOWN:n.ButtonBase.STATE_UP);this._sprite.x=this._sprite.y=this._curState===n.ButtonBase.STATE_DOWN?0:0;this._sprite.height=this._sprite.width=this._curState===n.ButtonBase.STATE_DOWN?t:this._w},i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);this.update()},i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.setDiameter=function(n){this.createTexture(n);this.setWidth(n);this.setHeight(n);this.update()},i.prototype.createTexture=function(t){var r=n.Resources.getTexture(this._textureName,{width:t,drawNewTexture:!0});i.getPreRenderedTexture(this._textureName,r,n.ButtonBase.STATE_DOWN);this._sprite.texture=i.getPreRenderedTexture(this._textureName,r,n.ButtonBase.STATE_UP)},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._sprite.destroy()},i.prototype.drawBg=function(){},i}(n.ButtonBase);t.SCALE_OFFSET_KOEF=.025;t.BORDER_KOEF=.066;t.colorUP=16777215;t.colorDown=0;t._preRenderedTextures={};n.RoundButton=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(n){function t(){return n.call(this,"lobby/add_user_icon")||this}return __extends(t,n),t}(n.RoundButton);n.AddFriendButton=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(){function n(n,t,i,r,u){n===void 0&&(n=0);t===void 0&&(t=0);i===void 0&&(i=0);r===void 0&&(r=!0);u===void 0&&(u=0);this.cardPosDegree=n;this.dealerPosDegree=t;this.betPosDegree=i;this.betExpantToRight=r;this.endCardsRotaion=u}return n}(),i=function(){function n(n,t){this.x=n;this.y=t}return n}(),r=function(t){function r(i){var u=t.call(this)||this;u.player=null;u.index=i;u._btnAddPlayer=new n.AddFriendButton;u.addChild(u._btnAddPlayer);u._btnAddPlayer.setDiameter(r._playersWidth);u._btnAddPlayer.setPosition(-r._playersWidth*.5,-r._playersWidth*.5);u._btnAddPlayer.on(n.ButtonBase.EVENT_CLICK,u.onAddFriendClick,u);u._btnSeat=new n.ButtonSeat;u._btnSeat.on(n.ButtonBase.EVENT_CLICK,u.onSeatClick,u);return u._btnSeat.setWidth(r._playersWidth),u.addChild(u._btnSeat),u}return __extends(r,t),r.setParams=function(n,t,u,f){r._tableRect=n;r._myPlayerWidth=u;r._playersWidth=f;r._placesParams=[new i(.5,1.15),new i(0,1),new i(t,0),new i(1-t,0),new i(1,1)]},r.prototype.setSeatCallback=function(n){this._seatCallback=n},r.prototype.setAddFriendCallback=function(n){this._addFriendCallback=n},r.prototype.setIndex=function(n){this.index=n;var t=r._playersParams[this.index];this.player&&this.player.setParams(t.cardPosDegree,t.dealerPosDegree,t.betPosDegree,t.betExpantToRight,t.endCardsRotaion)},r.prototype.setSeat=function(n){this.seatId=n},r.prototype.onSeatClick=function(){this._seatCallback(this.seatId)},r.prototype.onAddFriendClick=function(){this._addFriendCallback(this.seatId)},r.prototype.setMPlayer=function(t){if(t.isMe)this.player=new n.MyPlayer(t);else{var i=r._playersParams[this.index];this.player=new n.Player(t,i.cardPosDegree,i.dealerPosDegree,i.betPosDegree,i.betExpantToRight,i.endCardsRotaion)}return this.addChild(this.player),this.player.setAvatarSize(this.index==0?r._myPlayerWidth:r._playersWidth),this.player},r.prototype.removePlayer=function(){var n=this.player;return this.player&&(this.player.parent&&this.player.parent.removeChild(this.player),this.player=null),n},r.prototype.updateButtons=function(n){this._btnSeat.visible=this._btnSeat.interactive=n&&!this.player;this._btnAddPlayer.visible=this._btnAddPlayer.interactive=!n&&!this.player},r.prototype.resize=function(){r._placesParams&&(this.x=r._tableRect.x+r._tableRect.width*r._placesParams[this.index].x,this.y=r._tableRect.y+r._tableRect.height*r._placesParams[this.index].y,this.player&&this.player.setAvatarSize(this.index==0?r._myPlayerWidth:r._playersWidth),this._btnAddPlayer.setDiameter(r._playersWidth),this._btnAddPlayer.setPosition(-r._playersWidth*.5,-r._playersWidth*.5),this._btnSeat.setWidth(r._playersWidth))},r.prototype.destroy=function(){t.prototype.destroy.call(this);this._btnSeat.destroy();this._btnAddPlayer.destroy()},r}(PIXI.Container);r._tableRect=new PIXI.Rectangle(0,0,10,10);r._myPlayerWidth=10;r._playersWidth=10;r._playersParams=[new t,new t(45,65,0,!0,Math.PI*(1/5)),new t(140,104,180,!0,Math.PI*(-1/6)),new t(-140,-104,180,!1,Math.PI*(-5/6)),new t(-45,-65,0,!1,Math.PI*(4/5))];n.TablePlace=r})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var i=function(i){function r(){var n=i.call(this)||this;return n.showedCards=0,n._calculatedWidth=0,n._miniCards=[],n}return __extends(r,i),r.prototype.show=function(t,i){var f,u,r,e,o;for(this.showedCards=0,this._calculatedWidth=0,f=0,u=0;u<this._miniCards.length;u++)if(r=this._miniCards[u],u<i.length){r.sprite.visible=!0;e=i[u];o=e.weight.toUpperCase();r.label.text=o;this.showedCards++;r.sprite.x=f;this._calculatedWidth=f+r.sprite.width;switch(t){case n.HandRankCombination.OnePair:case n.HandRankCombination.ThreeKind:u==i.length-1&&(f+=r.sprite.width*1.1);break;case n.HandRankCombination.TwoPair:f+=(u+1)%2==0?r.sprite.width*1.1:r.sprite.width*.2;break;default:f+=r.sprite.width*1.1}}else r.sprite.visible=!1},r.prototype.create=function(i){var o=Object.create(n.FontsHelper.Text.fontWhiteStroke26),s,e,u,f;for(o.strokeThickness=0,o.fontSize=38,s=r.prigenerateTexture(i),e=0;e<7;e++)u=new PIXI.Sprite(s),this.addChild(u),u.x=e*u.width*(1+r.CARD_OFFSET),u.y=0,f=new PIXI.Text("A",o),f.tint=t.LABEL_TINT,f.anchor.set(.5,.5),f.scale.set(.8),f.x=u.width*.5,f.y=u.height*.5,u.addChild(f),u.visible=!1,this._miniCards.push({sprite:u,label:f})},Object.defineProperty(r.prototype,"visibelWidth",{get:function(){return this._calculatedWidth},enumerable:!0,configurable:!0}),r.prigenerateTexture=function(n){if(!this._mini_card_texture){var u=n/1.4,i=new PIXI.Graphics,r=n/15>>0;i.lineStyle(r,t.BORDER_TINT);i.beginFill(t.BG_TINT);i.drawRoundedRect(0,0,u,n,r);i.endFill();this._mini_card_texture=i.generateCanvasTexture();i.destroy()}return this._mini_card_texture},r}(PIXI.Container),t;i.BG_TINT=6628913;i.BORDER_TINT=15439944;i.LABEL_TINT=15456164;i.CARD_OFFSET=.1;n.MiniCardGroup=i;t=function(t){function r(){var u=t.call(this)||this;return u._miniCards=[],u._mainCards=new i,u._kikerCards=new i,u._bg=new PIXI.Sprite(PIXI.Texture.WHITE),u.addChild(u._bg),u.mask=new PIXI.Sprite(n.Resources.getTexture("winning/line_mask")),u.addChild(u.mask),u._font=Object.create(n.FontsHelper.Text.fontWhiteStroke26),u._font.strokeThickness=0,u._font.fontSize=38,u._mainLabel=new PIXI.Text("PAIR",u._font),u._realLabelH=u._mainLabel.height,u._mainLabel.tint=r.TEXT_TINT,u.addChild(u._mainLabel),u._kikerLabel=new PIXI.Text("+ KICKER",u._font),u._kikerLabel.tint=r.TEXT_TINT,u.addChild(u._kikerLabel),u.mask.anchor.x=.5,u._bg.anchor.x=.5,u._mainLabel.anchor.x=1,u.addChild(u._mainCards),u.addChild(u._kikerCards),u}return __extends(r,t),r.prototype.show=function(t,i,u){var f,e;i=i.sort(function(n,t){return n.weightIndex-t.weightIndex});u||(u=[]);u=u.sort(function(n,t){return n.weightIndex-t.weightIndex});f=u.length>0;this._mainLabel.text=r.COMBINATION_NAMINGS[t-1].toUpperCase();this._mainCards.show(t,i);f&&this._kikerCards.show(n.HandRankCombination.HighCard,u);this._kikerCards.visible=f;this._kikerLabel.visible=f;e=this._mainCards.visibelWidth+this._mainLabel.width+10;f&&(e+=20+this._kikerLabel.width+this._kikerCards.visibelWidth);this._mainLabel.x=this._mainLabel.width-e/2-5;this._mainCards.x=this._mainLabel.x+10;this._kikerLabel.x=this._mainCards.visibelWidth+this._mainCards.x+10;this._kikerCards.x=this._kikerLabel.x+this._kikerLabel.width+10;this.visible=!0;this.mask.width=0;n.Tweener.to(this.mask,r.ANIM_DUTRATION,{pixi:{width:this._bg.width}})},r.prototype.hide=function(){var t=this;n.Tweener.to(this.mask,r.ANIM_DUTRATION,{pixi:{width:0},onComplete:function(){t.visible=!1}})},r.prototype.setWidth=function(t){var i=n.Resources.getTexture("winning/line_pattern",{width:t,returnNewTexture:!0});this._bg.texture=i;this._miniCards.length==0&&this.createCards();this.refresh()},r.prototype.refresh=function(){this.mask.height=this._bg.height;this.mask.y=this._bg.y;this.mask.width=this._bg.width;this.mask.x=this._bg.x;this._mainLabel.scale.set(.4*this._bg.height/this._realLabelH,.8*this._bg.height/this._realLabelH);this._kikerLabel.scale.copy(this._mainLabel.scale);this._mainLabel.y=(this._bg.height-this._mainLabel.height)*.5;this._kikerLabel.y=this._mainLabel.y},r.prototype.createCards=function(){var n=.6*this._bg.height;this._mainCards.create(n);this._kikerCards.create(n);this._kikerCards.y=(this._bg.height-n)*.5;this._mainCards.y=this._kikerCards.y},r}(PIXI.Container);t.ANIM_DUTRATION=.5;t.TEXT_TINT=16767304;t.BG_TINT=6628913;t.BORDER_TINT=15439944;t.LABEL_TINT=15456164;t.COMBINATION_NAMINGS=["Kicker","Pair","Two Pairs","Three of a Kind","Straight","Flush","Full House","Four of a Kind","Straight Flush","Royal Flush"];n.WinLabelWithCards=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this,r;return i._aspect=5,i.name="WinLabel",r=PIXI.Texture.WHITE,i.bg=new PIXI.Sprite(r),i.height=20,i.label=new PIXI.Text("WINNER",n.FontsHelper.Text.fontForSettingsHeader),i.label.tint=0,i.addChild(i.bg),i.addChild(i.label),i.text="WINNER",i.update(),i}return __extends(i,t),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(n){this._text=n;this.label.text=this._text;this.update()},enumerable:!0,configurable:!0}),i.prototype.update=function(){this.label.x=(this.width/this.scale.x-this.label.width)*.5;this.label.y=(this.height/this.scale.y-this.label.height)*.5},i.prototype.setWidth=function(n,t){t===void 0&&(t=null);this.label.height=this.bg.height-8;this.label.width=this.label.scale.y},i.prototype.destroy=function(){this.label.destroy();this.bg.destroy()},i}(PIXI.Container);n.WinLabel=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this;return i.RING_SIZE=400,i.RECT=600,i.ANIMS={fadeIn:[0,11],loop:[11,38],fadeOut:[38,59]},i._visible=!0,i._wasDestroyed=!1,n.EffectManager.getEffect("Avatar",function(n){i._clip=n;i._clip.selfAdvance=!1;i._clip.loop=!1;i.addChild(i._clip);var t=2*i._targetW/i.RING_SIZE;i._clip.scale.set(t);i._clip.position.x=-i.RECT*t*.5;i._clip.position.y=-i.RECT*t*.5;i.visible=!1}),i}return __extends(i,t),i.prototype.show=function(){var n=this;(this.visible=!0,this._clip)&&(this._clip.selfAdvance=!0,PIXI.animate.Animator.fromTo(this._clip,this.ANIMS.fadeIn[0],this.ANIMS.fadeIn[1],!1,function(){PIXI.animate.Animator.fromTo(n._clip,n.ANIMS.loop[0],n.ANIMS.loop[1],!0)}))},i.prototype.hide=function(){var n=this;if(!this._wasDestroyed&&this.visible){if(!this._clip){this.visible=!1;return}PIXI.animate.Animator.fromTo(this._clip,this.ANIMS.fadeOut[0],this.ANIMS.fadeOut[1],!1,function(){n.visible=!1;n._clip.selfAdvance=!1})}},i.prototype.setWidth=function(n){if(this._targetW=n,this._clip){var t=2*this._targetW/this.RING_SIZE;this._clip.scale.set(t);this._clip.position.x=-this.RECT*t*.5;this._clip.position.y=-this.RECT*t*.5}},i.prototype.destroy=function(){this._wasDestroyed=!0;PIXI.animate.Animator.stop(this._clip);this._clip.destroy()},i}(PIXI.Container);n.WinPlayerBGEffect=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(n){function t(i,r){var u=n.call(this)||this,f;return t.useBitmapText?(f={},r.fill&&r.fill instanceof Number&&(f.tint=r.fill),r.fontFamily&&(f.font={name:r.fontFamily instanceof Array?r.fontFamily[0]:r.fontFamily}),u._textBmp=new PIXI.extras.BitmapText(i,f),u.addChild(u._textBmp),r.fontSize&&(u.fontSize=typeof r.fontSize=="number"?r.fontSize:parseInt(r.fontSize))):(u._text=new PIXI.Text(i,r),u.addChild(u._text)),u}return __extends(t,n),Object.defineProperty(t.prototype,"text",{get:function(){return this._textBmp?this._textBmp.text:this._text?this._text.text:void 0},set:function(n){this._textBmp?this._textBmp.text=n:this._text&&(this._text.text=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._textBmp?this._textBmp.anchor:this._text.anchor},set:function(n){this._textBmp?this._textBmp.anchor=new PIXI.Point(n.x,n.y):this._text&&this._text.anchor.set(n.x,n.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{set:function(n){if(this._textBmp){var t=this._textBmp.font.name,i=PIXI.extras.BitmapText.fonts[t];n*=i.size/i.lineHeight;this._textBmp.font={name:t,size:n}}else this._text&&(this._text.style.fontSize=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapWidth",{set:function(n){this._text&&(this._text.style.wordWrapWidth=n)},enumerable:!0,configurable:!0}),t.prototype.getWidth=function(){return this._textBmp?this._textBmp.width:this._text.width},t.prototype.setWidth=function(n){this._textBmp?this._textBmp.width=n:this._text&&(this._text.width=n)},t.prototype.getHeight=function(){return this._textBmp?this._textBmp.height:this._text.height},t.prototype.setHeight=function(n){this._textBmp?this._textBmp.height=n:this._text&&(this._text.height=n)},t.prototype.destroy=function(){n.prototype.destroy.call(this);this._text?this._text.destroy():this._textBmp&&this._textBmp.destroy()},t}(PIXI.Container);t.useBitmapText=!1;n.Text=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var i=t.call(this,"",n.FontsHelper.Text.fontForHourlyDripTip)||this;return i.visible=!1,i}return __extends(i,t),i.prototype.show=function(t){this.earned=t;this.beforeShow();n.Tweener.to(this,i.SHOWING_DURATION,{alpha:1,onComplete:this.waitAndHide,onCompleteScope:this})},i.prototype.hide=function(){n.trace("[HourlyDripTip] before hide");n.Tweener.to(this,i.HIDING_DURATION,{alpha:0,onComplete:this.afterHide,onCompleteScope:this})},i.prototype.waitAndHide=function(){n.Tweener.killTweensOf(this);n.trace("[HourlyDripTip] after show");setTimeout(this.hide.bind(this),i.WAITING_DURATION)},i.prototype.beforeShow=function(){this.visible=!0;this.alpha=0;n.trace("[HourlyDripTip] before show")},i.prototype.afterHide=function(){this.visible=!1;n.trace("[HourlyDripTip] after hide")},Object.defineProperty(i.prototype,"earned",{set:function(t){this.text=i.TEXT_FORMAT.replace("%count%",n.StringHelper.numberWithCommas(t))},enumerable:!0,configurable:!0}),i}(n.Text);i.TEXT_FORMAT="+%count% chips";i.SHOWING_DURATION=.3;i.HIDING_DURATION=.8;i.WAITING_DURATION=1500;t.HourlyDripTip=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(){function n(){}return n}(),r;i.LEFT=0;i.RIGHT=1;i.CENTER=1/2;t.NamedAligns=i;r=function(){function t(n){this.offset={left:0,right:0,top:0,bottom:0};this.scale={width:1,height:1};this.align={x:i.LEFT,y:i.LEFT};this._textureName=n;this._sprite=new PIXI.Sprite}return t.prototype.addTo=function(n){n.addChild(this._sprite)},t.prototype.resize=function(t,i){var s=this.getTexture().baseTexture,r=n.Resources.getOrigSize(s),e=t*(1-this.offset.right-this.offset.left),o=i*(1-this.offset.top-this.offset.bottom),f=e*this.scale.width,u=o*this.scale.height;switch(this.saveProportionsBy){case"width":u=r.height*(f/r.width);break;case"height":f=r.width*(u/r.height)}var h=t*this.offset.left,c=i*this.offset.top,l=h+this.align.x*(e-f),a=c+this.align.y*(o-u);this._sprite.texture=this.getTexture({scale:u/r.height,drawNewTexture:!0});this._sprite.x=l;this._sprite.y=a;this._sprite.width=f;this._sprite.height=u},t.prototype.destroy=function(){this._sprite.destroy()},t.prototype.getTexture=function(t){return n.Resources.getTexture(this._textureName,t)},t}();t.Sprite=r})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var r=t.call(this,10,10)||this;return r.SPRITE_HEIGHT_KOEF=1,r.SPRITE_LEFT_OFFSET=0,r.SPRITE_TOP_OFFSET=0,r.REST_OF_TIME_FONT_SIZE_KOEF=.206,r.REST_OF_TIME_LEFT_OFFSET=.188,r._sprite=new PIXI.Sprite,r.addChild(r._sprite),r._restOfTime=new PIXI.Text("",n.FontsHelper.Text.fontForHourlyDrip),r.addChild(r._restOfTime),r._availibilityLabel=new PIXI.Text(i.AVAILABILITY_TEXT,n.FontsHelper.Text.fontForHourlyDrip),r.addChild(r._availibilityLabel),r}return __extends(i,t),Object.defineProperty(i.prototype,"time",{set:function(n){if(!n){this.disabled=!1;return}var u=n%60,f=n/60>>0,r=f%60,t=f/60>>0,i="";t&&(i+=":"+t+"h");(t||r)&&(i+=":"+(r<10&&t?0:"")+r+"m");i+=":"+(u<10?0:"")+u+"s";this._restOfTime.text=i;this.setTextPosition()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actualWidth",{get:function(){return this._restOfTime.x+this._restOfTime.width},enumerable:!0,configurable:!0}),i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.setHeight=function(n){this._h=n;this.update()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._restOfTime.destroy();this._sprite.destroy()},i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);var n=this._curState===i.STATE_DISABLED;this.buttonMode=!n;this.alpha=!n&&1||.75;this._availibilityLabel.visible=!(this._restOfTime.visible=n)},i.prototype.update=function(){var r=this._h*this.SPRITE_HEIGHT_KOEF,u=this._h*this.SPRITE_LEFT_OFFSET,f=this._h*this.SPRITE_TOP_OFFSET,t=n.Resources.getOrigSize(n.Resources.getTexture("lobby/hourly_drip").baseTexture),i=r/t.height;this._w=t.width*i*(2-this.SPRITE_HEIGHT_KOEF);this._sprite.texture=n.Resources.getTexture("lobby/hourly_drip",{scale:i,drawNewTexture:!0});this._sprite.position.set(u,f);this._sprite.height=i*t.height;this._sprite.width=i*t.width;this.resizeText()},i.prototype.resizeText=function(){this._availibilityLabel.style.fontSize=this._restOfTime.style.fontSize=this._h*this.REST_OF_TIME_FONT_SIZE_KOEF;this.setTextPosition()},i.prototype.setTextPosition=function(){var n=this._w*.48,i=this._w*.067,r=n-this._restOfTime.width,u=i+(n-this._availibilityLabel.width)/2,t=(this._h-this._restOfTime.height)/1.98;this._restOfTime.position.set(r,t);this._availibilityLabel.position.set(u,t)},i}(n.ButtonBase);i.AVAILABILITY_TEXT="Get chips";t.HourlyDrip=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(i){function r(){var n=i.call(this)||this;return n.BUTTON_WIDTH_KOEF=.396,n.BUTTON_HEIGHT_KOEF=.1,n.BUTTON_TOP_OFFSET=.816,n.HEADER_FONT_SIZE_KOEF=.06,n.HEADER_TOP_OFFSET=.09,n.BODY_FONT_SIZE_KOEF=.04,n.BODY_WRAP_WIDTH_KOEF=.86,n.BODY_TOP_OFFSET=.195,n.PICTURE_WIDTH_KOEF=.781,n.PICTURE_TOP_OFFSET=.277,n.CLOSE_BUTTON_DIAMETER_KOEF=.076,n.init(),n}return __extends(r,i),r.prototype.setSize=function(n,t){this._h=t;this._w=n;this.update()},r.prototype.destroy=function(){i.prototype.destroy.call(this);this._bg.destroy();this._button.destroy();this._header.destroy();this._body.destroy()},r.prototype.init=function(){var i=this;this._bg=new t.NotEnoughPopupBg;this.addChild(this._bg);this._button=new t.NotEnoughPopupButton;this._button.on(t.NotEnoughPopupButton.EVENT_CLICK,function(){i.emit(r.EVENT_OK)});this.addChild(this._button);this._closeButton=new n.ButtonImage("lobby/reward_video/close_button","lobby/reward_video/close_button","lobby/reward_video/close_button_down");this._closeButton.on(n.RoundButton.EVENT_CLICK,function(){i.emit(r.EVENT_CLOSE)});this.addChild(this._closeButton);this._header=new n.Text(r.HEADER_TEXT_TEMPLATE,n.FontsHelper.Text.fontForNotEnoughPopupHeader);this.addChild(this._header);this._body=new n.Text(r.BODY_TEXT_TEMPLATE,n.FontsHelper.Text.fontForNotEnoughPopupBody);this.addChild(this._body);this._picture=new PIXI.Sprite(n.Resources.getTexture("lobby/reward_video/picture"));this.addChild(this._picture)},Object.defineProperty(r.prototype,"disabled",{get:function(){return this._button.disabled},set:function(n){this._button.disabled=n},enumerable:!0,configurable:!0}),r.prototype.update=function(){var e=0,t=this._w,i=this._h,u,o,r,s,h,c,l;this._bg.setPosition(e,0);this._bg.setSize(t,i);u=t*this.BUTTON_WIDTH_KOEF;o=i*this.BUTTON_HEIGHT_KOEF;this._button.x=e+t/2-u/2;this._button.y=i*this.BUTTON_TOP_OFFSET;this._button.setWidth(u);this._button.setHeight(o);r=t*this.CLOSE_BUTTON_DIAMETER_KOEF;this._closeButton.x=t-r/4*3;this._closeButton.y=0-r/4;this._closeButton.setWidth(r,!0);this._header.fontSize=i*this.HEADER_FONT_SIZE_KOEF;s=t/2-this._header.width/2;h=i*this.HEADER_TOP_OFFSET;this._header.position.set(s,h);this._body.fontSize=i*this.BODY_FONT_SIZE_KOEF;this._body.wrapWidth=t*this.BODY_WRAP_WIDTH_KOEF;c=t/2-this._body.width/2;l=i*this.BODY_TOP_OFFSET;this._body.position.set(c,l);var f=this._w*this.PICTURE_WIDTH_KOEF,a=n.Resources.getOrigSize(this._picture.texture.baseTexture),v=f/a.width*a.height;this._picture.width=f;this._picture.height=v;this._picture.x=this._w/2-f/2;this._picture.y=this._h*this.PICTURE_TOP_OFFSET},r}(PIXI.Container);i.EVENT_CLOSE="notenoughpopupclose";i.EVENT_OK="notenoughpopupok";i.HEADER_TEXT_TEMPLATE="NOT ENOUGH CHIPS";i.BODY_TEXT_TEMPLATE="Watch video to earn more chips.";t.NotEnoughPopup=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var n=t.call(this)||this;return n._stars=[],n._bottomChips=[],n._bottomChipsKoefs=[{x:.243,y:.306,width:.101,id:1},{x:.207,y:.233,width:.083,id:2},{x:.879,y:.403,width:.11,id:3},{x:.202,y:.482,width:.102,id:1},{x:.091,y:.381,width:.071,id:1},{x:.767,y:.541,width:.083,id:2},{x:.688,y:.213,width:.111,id:2},{x:.05,y:.9,width:.101,id:1},{x:.169,y:.83,width:.1,id:3},{x:.621,y:.89,width:.107,id:2},{x:.889,y:.89,width:.112,id:2},{x:.791,y:.84,width:.101,id:1},],n.interactive=!0,n._bgSprite=new PIXI.Sprite,n.addChild(n._bgSprite),n._beamsSprite=new PIXI.Sprite,n.addChild(n._beamsSprite),n._line=new PIXI.Sprite,n.addChild(n._line),n._bgMask=new PIXI.Graphics,n._starsContainer=new PIXI.Container,n._starsContainer.alpha=.55,n._starsContainer.mask=n._bgMask,n._beamsSprite.mask=n._bgMask,n.addChild(n._starsContainer),n.initStars(),n._bottomChipsContainer=new PIXI.Container,n._bottomChipsContainer.mask=n._bgMask,n.addChild(n._bottomChipsContainer),n.initBottomChips(),n.addChild(n._bgMask),n}return __extends(i,t),i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bgSprite.destroy();this._beamsSprite.destroy();this._line.destroy();this._bgMask.destroy();this._starsContainer.destroy();this._bottomChipsContainer.destroy()},i.prototype.update=function(){this.resizeBg();this.resizeBeams();this.resizeLine();this.resizeStars();this.resizeBottomChips()},i.prototype.initStars=function(){for(var t,i=0;i<25;i++)t=new PIXI.Sprite,t.rotation=n.MathHelper.getRandomMinToMax(0,Math.PI*200)/100,this._stars.push(t),this._starsContainer.addChild(t)},i.prototype.initBottomChips=function(){var n=this;this._bottomChipsKoefs.forEach(function(t,i){var r=new PIXI.Sprite;r.tint=13421772;n._bottomChips[i]=r;n._bottomChipsContainer.addChild(r)})},i.prototype.resizeBg=function(){var r=n.Resources.getOrigSize(n.Resources.getTexture(i.BG_TEXTURE_NAME).baseTexture),t;this._bgSprite.texture=n.Resources.getTexture(i.BG_TEXTURE_NAME,{scale:this._h/r.height,drawNewTexture:!0});this._bgSprite.width=this._w;this._bgSprite.height=this._h;t=this._h*.019;this._bgMask.clear();this._bgMask.beginFill(13421772);this._bgMask.drawRect(t,t,this._w-2*t,this._h-2*t);this._bgMask.endFill()},i.prototype.resizeBeams=function(){var t=n.Resources.getOrigSize(n.Resources.getTexture(i.BEAMS_TEXTURE_NAME).baseTexture);this._beamsSprite.texture=n.Resources.getTexture(i.BEAMS_TEXTURE_NAME,{scale:this._h/t.height,drawNewTexture:!0});this._beamsSprite.width=this._w;this._beamsSprite.height=this._h},i.prototype.resizeLine=function(){var r=i.LINE_TEXTURE_NAME,u=n.Resources.getOrigSize(n.Resources.getTexture(r).baseTexture),t=this._w*i.LINE_WIDTH_KOEF,f=t/u.width,e=u.height*f;this._line.texture=n.Resources.getTexture(r,{scale:f,drawNewTexture:!0});this._line.width=t;this._line.height=e;this._line.x=this._w/2-t/2;this._line.y=this._h*i.LINE_TOP_OFFSET},i.prototype.resizeStars=function(){var t=this;this._stars.forEach(function(r,u){var f=i.BG_STARS_TEXTURE_NAME.replace("%id%",n.MathHelper.getRandomMinToMax(1,5).toString()),e=n.Resources.getOrigSize(n.Resources.getTexture(f).baseTexture),o=t._h*n.MathHelper.getRandomMinToMax(10,15)/100,s=o/e.height,h=s*e.width;r.texture=n.Resources.getTexture(f,{scale:s,drawNewTexture:!0});r.width=h;r.height=o;r.x=n.MathHelper.getRandomMinToMax(2*t._w/3,t._w);u%2&&(r.x=t._w-r.x);r.y=n.MathHelper.getRandomMinToMax(0,t._h/7)})},i.prototype.resizeBottomChips=function(){var t=this;this._bottomChips.forEach(function(r,u){var f=t._bottomChipsKoefs[u],e=i.BG_CHIPS_TEXTURE_NAME.replace("%id%",f.id.toString()),o=n.Resources.getTexture(e);if(o){var s=n.Resources.getOrigSize(o.baseTexture),h=t._w*f.width,c=h/s.width,l=c*s.height;r.texture=n.Resources.getTexture(e,{scale:c,drawNewTexture:!0});r.width=h;r.height=l;r.x=t._w*f.x;r.y=t._h*f.y}})},i}(PIXI.Container);i.BG_TEXTURE_NAME="lobby/reward_video/bg";i.LINE_TEXTURE_NAME="lobby/reward_video/line";i.BEAMS_TEXTURE_NAME="lobby/reward_video/beams";i.BG_STARS_TEXTURE_NAME="lobby/reward_video/star/%id%";i.BG_CHIPS_TEXTURE_NAME="lobby/reward_video/chip/%id%";i.BORDER_OFFSET_X_KOEF=.041;i.BORDER_OFFSET_Y_KOEF=.027;i.SHADOW_OFFSET_KOEF=.02;i.INNER_BG_TOP_OFFSET=.295;i.INNER_BG_WIDTH_KOEF=.276;i.VIDEO_ICON_WIDTH_KOEF=.458;i.LINE_TOP_OFFSET=.122;i.LINE_WIDTH_KOEF=.9;t.NotEnoughPopupBg=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var i=t.call(this,220,57)||this;return i._text="Watch video for free chips",i._colorUp=9635350,i._colorDown=11601430,i._bg=new PIXI.Sprite,i.addChild(i._bg),i._label=new PIXI.Text(i._text,n.FontsHelper.Text.fontForFreeChipsButton),i.addChild(i._label),i}return __extends(i,t),Object.defineProperty(i.prototype,"currentState",{get:function(){return this._curState},enumerable:!0,configurable:!0}),i.prototype.onResize=function(){this.resizeBg();this._label.style.fontSize=this._w*i.CAPTION_FONT_SIZE_KOEF;this._label.x=this._w/2-this._label.width/2;this._label.y=this._h/2-this._label.height/2},i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);this.onResize()},i.prototype.setWidth=function(n,i){i===void 0&&(i=!1);t.prototype.setWidth.call(this,n,i);this.onResize()},i.prototype.setHeight=function(n,i){i===void 0&&(i=!1);t.prototype.setHeight.call(this,n,i);this.onResize()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bg.destroy();this._label.destroy()},i.prototype.resizeBg=function(){var u=this._w*i.SCALE_X_KOEF,f=this._h*i.SCALE_Y_KOEF,e=this._w*(1-2*i.SCALE_X_KOEF),o=this._h*(1-2*i.SCALE_Y_KOEF),s=this._curState===i.STATE_DOWN?u:0,h=this._curState===i.STATE_DOWN?f:0,t=this._curState===i.STATE_DOWN?e:this._w,c=this._curState===i.STATE_DOWN?o:this._h,r="lobby/reward_video/button",l=n.Resources.getOrigSize(n.Resources.getTexture(r).baseTexture),a=t/l.width;this._bg.texture=n.Resources.getTexture(r,{scale:a,drawNewTexture:!0});this._bg.x=s;this._bg.y=h;this._bg.width=t;this._bg.height=c},i}(n.ButtonBase);i.CAPTION_FONT_SIZE_KOEF=.105;i.CAPTION_LEFT_OFFSET=.483;i.SCALE_X_KOEF=.025;i.SCALE_Y_KOEF=.075;i.BG_COLOR=1279135;t.NotEnoughPopupButton=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(i){function r(){var n=i.call(this)||this;return n.BUTTON_WIDTH_KOEF=.249,n.BUTTON_HEIGHT_KOEF=.082,n.BUTTON_TOP_OFFSET=.824,n.HEADER_FONT_SIZE_KOEF=.1,n.HEADER_TOP_OFFSET=.095,n.BODY_FONT_SIZE_KOEF=.04,n.BODY_WRAP_WIDTH_KOEF=.86,n.BODY_TOP_OFFSET=.677,n.CLOSE_BUTTON_DIAMETER_KOEF=.076,n.init(),n}return __extends(r,i),r.prototype.setSize=function(n,t){this._h=t;this._w=n;this.update()},Object.defineProperty(r.prototype,"earned",{set:function(t){var i=n.StringHelper.numberWithCommas(t);this._header.text=r.HEADER_TEXT_TEMPLATE.replace("%chipsCount%",i);this._body.text=r.BODY_TEXT_TEMPLATE.replace("%chipsCount%",i)},enumerable:!0,configurable:!0}),r.prototype.destroy=function(){i.prototype.destroy.call(this);this._bg.destroy();this._button.destroy();this._header.destroy();this._body.destroy()},r.prototype.init=function(){var i=this;this._bg=new t.RewardVideoPopupBg;this.addChild(this._bg);this._button=new t.RewardVideoPopupButton;this._button.on(t.RewardVideoPopupButton.EVENT_CLICK,function(){i.emit(r.EVENT_OK)});this.addChild(this._button);this._closeButton=new t.RewardVideoPopupCloseButton;this._closeButton.on(t.RewardVideoPopupCloseButton.EVENT_CLICK,function(){i.emit(r.EVENT_CLOSE)});this.addChild(this._closeButton);this._header=new n.Text("",n.FontsHelper.Text.fontForRewardVideoPopupHeader);this.addChild(this._header);this._body=new n.Text("",n.FontsHelper.Text.fontForRewardVideoPopupBody);this.addChild(this._body)},r.prototype.update=function(){var u=0,n=this._w,t=this._h,r,f,i,e,o,s,h;this._bg.setPosition(u,0);this._bg.setSize(n,t);r=n*this.BUTTON_WIDTH_KOEF;f=t*this.BUTTON_HEIGHT_KOEF;this._button.x=u+n/2-r/2;this._button.y=t*this.BUTTON_TOP_OFFSET;this._button.setWidth(r);this._button.setHeight(f);i=n*this.CLOSE_BUTTON_DIAMETER_KOEF;this._closeButton.x=n-i/4*3;this._closeButton.y=0-i/4;this._closeButton.setWidth(i,!0);this._header.fontSize=t*this.HEADER_FONT_SIZE_KOEF;e=n/2-this._header.width/2;o=t*this.HEADER_TOP_OFFSET;this._header.position.set(e,o);this._body.fontSize=t*this.BODY_FONT_SIZE_KOEF;this._body.wrapWidth=n*this.BODY_WRAP_WIDTH_KOEF;s=n/2-this._body.width/2;h=t*this.BODY_TOP_OFFSET;this._body.position.set(s,h)},r}(PIXI.Container);i.EVENT_CLOSE="rewardvideopopupclose";i.EVENT_OK="rewardvideopopupok";i.HEADER_TEXT_TEMPLATE="You earned $%chipsCount% chips!";i.BODY_TEXT_TEMPLATE="Your chips will arrive shortly! Want even MORE CHIPS? Watch another short video and earn $%chipsCount% chips!";t.RewardVideoPopup=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var n=t.call(this)||this;return n._stars=[],n._innerChips=[],n._innerChipsKoefs=[{x:.233,y:.306,width:.101,id:2},{x:.267,y:.233,width:.083,id:2},{x:.579,y:.403,width:.11,id:3},{x:.232,y:.482,width:.102,id:1},{x:.321,y:.381,width:.071,id:1},{x:.557,y:.541,width:.083,id:2},{x:.578,y:.213,width:.111,id:2},],n._bottomChips=[],n._bottomChipsKoefs=[{x:-.03,y:.94,width:.101,id:2},{x:.057,y:.85,width:.083,id:2},{x:.159,y:.87,width:.15,id:3},{x:.903,y:.91,width:.102,id:3},{x:.821,y:.92,width:.071,id:1},{x:.904,y:.81,width:.083,id:2},{x:.02,y:.73,width:.111,id:2},],n.interactive=!0,n._bgSprite=new PIXI.Sprite,n.addChild(n._bgSprite),n._line=new PIXI.Sprite,n.addChild(n._line),n._innerBgSprite=new PIXI.Sprite,n.addChild(n._innerBgSprite),n._videoIcon=new PIXI.Sprite,n._innerBgSprite.addChild(n._videoIcon),n._bgMask=new PIXI.Graphics,n._starsContainer=new PIXI.Container,n._starsContainer.alpha=.55,n._starsContainer.mask=n._bgMask,n.addChild(n._starsContainer),n.initStars(),n._innerChipsContainer=new PIXI.Container,n.addChild(n._innerChipsContainer),n.initInnerChips(),n._bottomChipsContainer=new PIXI.Container,n._bottomChipsContainer.mask=n._bgMask,n.addChild(n._bottomChipsContainer),n.initBottomChips(),n.addChild(n._bgMask),n}return __extends(i,t),i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bgSprite.destroy();this._innerBgSprite.destroy();this._line.destroy();this._videoIcon.destroy();this._bgMask.destroy();this._starsContainer.destroy();this._innerChipsContainer.destroy();this._bottomChipsContainer.destroy()},i.prototype.update=function(){this.resizeBg();this.resizeLine();this.resizeInnerBg();this.resizeStars();this.resizeInnerChips();this.resizeBottomChips()},i.prototype.initStars=function(){for(var t,i=0;i<15;i++)t=new PIXI.Sprite,t.rotation=n.MathHelper.getRandomMinToMax(0,Math.PI*200)/100,this._stars.push(t),this._starsContainer.addChild(t)},i.prototype.initInnerChips=function(){var n=this;this._innerChipsKoefs.forEach(function(t,i){var r=new PIXI.Sprite;n._innerChips[i]=r;n._innerChipsContainer.addChild(r)})},i.prototype.initBottomChips=function(){var n=this;this._bottomChipsKoefs.forEach(function(t,i){var r=new PIXI.Sprite;r.tint=13421772;n._bottomChips[i]=r;n._bottomChipsContainer.addChild(r)})},i.prototype.resizeBg=function(){var r=n.Resources.getOrigSize(n.Resources.getTexture(i.BG_TEXTURE_NAME).baseTexture),t;this._bgSprite.texture=n.Resources.getTexture(i.BG_TEXTURE_NAME,{scale:this._h/r.height,drawNewTexture:!0});this._bgSprite.width=this._w;this._bgSprite.height=this._h;t=this._h*.019;this._bgMask.clear();this._bgMask.beginFill(13421772);this._bgMask.drawRect(t,t,this._w-2*t,this._h-2*t);this._bgMask.endFill()},i.prototype.resizeLine=function(){var r=i.LINE_TEXTURE_NAME,u=n.Resources.getOrigSize(n.Resources.getTexture(r).baseTexture),t=this._w*i.LINE_WIDTH_KOEF,f=t/u.width,e=u.height*f;this._line.texture=n.Resources.getTexture(r,{scale:f,drawNewTexture:!0});this._line.width=t;this._line.height=e;this._line.x=this._w/2-t/2;this._line.y=this._h*i.LINE_TOP_OFFSET},i.prototype.resizeInnerBg=function(){var r=n.Resources.getOrigSize(n.Resources.getTexture(i.BG_INNER_TEXTURE_NAME).baseTexture),t=this._w*i.INNER_BG_WIDTH_KOEF,u=t/r.width,f=r.height*u;this._innerBgSprite.texture=n.Resources.getTexture(i.BG_INNER_TEXTURE_NAME,{scale:u,drawNewTexture:!0});this._innerBgSprite.width=t;this._innerBgSprite.height=f;this._innerBgSprite.y=this._h*i.INNER_BG_TOP_OFFSET;this._innerBgSprite.x=this._w/2-t/2;this.resizeVideoIcon()},i.prototype.resizeVideoIcon=function(){var r=i.VIDEO_ICON_TEXTURE_NAME,u=n.Resources.getOrigSize(n.Resources.getTexture(r).baseTexture),t=this._innerBgSprite.width*i.VIDEO_ICON_WIDTH_KOEF,f=t/u.width,e=u.height*f;this._videoIcon.texture=n.Resources.getTexture(r,{scale:f,drawNewTexture:!0});this._videoIcon.width=t;this._videoIcon.height=e;this._videoIcon.x=this._innerBgSprite.width/2-t/2;this._videoIcon.y=this._innerBgSprite.height/2-e/2},i.prototype.resizeStars=function(){var t=this;this._stars.forEach(function(r,u){var f=i.BG_STARS_TEXTURE_NAME.replace("%id%",n.MathHelper.getRandomMinToMax(1,5).toString()),e=n.Resources.getOrigSize(n.Resources.getTexture(f).baseTexture),o=t._h*n.MathHelper.getRandomMinToMax(10,15)/100,s=o/e.height,h=s*e.width;r.texture=n.Resources.getTexture(f,{scale:s,drawNewTexture:!0});r.width=h;r.height=o;r.x=n.MathHelper.getRandomMinToMax(3*t._w/4,t._w);u%2&&(r.x=t._w-r.x);r.y=n.MathHelper.getRandomMinToMax(0,t._h/3)})},i.prototype.resizeInnerChips=function(){var t=this;this._innerChips.forEach(function(r,u){var f=t._innerChipsKoefs[u],e=i.BG_CHIPS_TEXTURE_NAME.replace("%id%",f.id.toString()),o=n.Resources.getTexture(e);if(o){var s=n.Resources.getOrigSize(o.baseTexture),h=t._w*f.width,c=h/s.width,l=c*s.height;r.texture=n.Resources.getTexture(e,{scale:c,drawNewTexture:!0});r.width=h;r.height=l;r.x=t._w*f.x;r.y=t._h*f.y}})},i.prototype.resizeBottomChips=function(){var t=this;this._bottomChips.forEach(function(r,u){var f=t._bottomChipsKoefs[u],e=i.BG_CHIPS_TEXTURE_NAME.replace("%id%",f.id.toString()),o=n.Resources.getTexture(e);if(o){var s=n.Resources.getOrigSize(o.baseTexture),h=t._w*f.width,c=h/s.width,l=c*s.height;r.texture=n.Resources.getTexture(e,{scale:c,drawNewTexture:!0});r.width=h;r.height=l;r.x=t._w*f.x;r.y=t._h*f.y}})},i}(PIXI.Container);i.BG_TEXTURE_NAME="lobby/reward_video/bg";i.BG_INNER_TEXTURE_NAME="lobby/reward_video/bg_inner";i.VIDEO_ICON_TEXTURE_NAME="lobby/reward_video/video_icon";i.LINE_TEXTURE_NAME="lobby/reward_video/line";i.BG_STARS_TEXTURE_NAME="lobby/reward_video/star/%id%";i.BG_CHIPS_TEXTURE_NAME="lobby/reward_video/chip/%id%";i.BORDER_OFFSET_X_KOEF=.041;i.BORDER_OFFSET_Y_KOEF=.027;i.SHADOW_OFFSET_KOEF=.02;i.INNER_BG_TOP_OFFSET=.295;i.INNER_BG_WIDTH_KOEF=.276;i.VIDEO_ICON_WIDTH_KOEF=.458;i.LINE_TOP_OFFSET=.122;i.LINE_WIDTH_KOEF=.9;t.RewardVideoPopupBg=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var i=t.call(this,220,57)||this;return i._text="Watch Now",i._colorUp=9635350,i._colorDown=11601430,i._bg=new PIXI.Sprite,i.addChild(i._bg),i._label=new PIXI.Text(i._text,n.FontsHelper.Text.fontForFreeChipsButton),i.addChild(i._label),i}return __extends(i,t),Object.defineProperty(i.prototype,"currentState",{get:function(){return this._curState},enumerable:!0,configurable:!0}),i.prototype.onResize=function(){this.resizeBg();this._label.style.fontSize=this._w*i.CAPTION_FONT_SIZE_KOEF;this._label.x=this._w/2-this._label.width/2;this._label.y=this._h/2-this._label.height/2},i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);this.onResize()},i.prototype.setWidth=function(n,i){i===void 0&&(i=!1);t.prototype.setWidth.call(this,n,i);this.onResize()},i.prototype.setHeight=function(n,i){i===void 0&&(i=!1);t.prototype.setHeight.call(this,n,i);this.onResize()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bg.destroy();this._label.destroy()},i.prototype.resizeBg=function(){var u=this._w*i.SCALE_X_KOEF,f=this._h*i.SCALE_Y_KOEF,e=this._w*(1-2*i.SCALE_X_KOEF),o=this._h*(1-2*i.SCALE_Y_KOEF),s=this._curState===i.STATE_DOWN?u:0,h=this._curState===i.STATE_DOWN?f:0,t=this._curState===i.STATE_DOWN?e:this._w,c=this._curState===i.STATE_DOWN?o:this._h,r="lobby/reward_video/button",l=n.Resources.getOrigSize(n.Resources.getTexture(r).baseTexture),a=t/l.width;this._bg.texture=n.Resources.getTexture(r,{scale:a,drawNewTexture:!0});this._bg.x=s;this._bg.y=h;this._bg.width=t;this._bg.height=c},i}(n.ButtonBase);i.CAPTION_FONT_SIZE_KOEF=.155;i.CAPTION_LEFT_OFFSET=.483;i.SCALE_X_KOEF=.025;i.SCALE_Y_KOEF=.075;i.BG_COLOR=1279135;t.RewardVideoPopupButton=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(n){function t(){return n.call(this,"lobby/reward_video/close_button","lobby/reward_video/close_button","lobby/reward_video/close_button_down")||this}return __extends(t,n),t}(n.ButtonImage);t.RewardVideoPopupCloseButton=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(i){var r=t.call(this)||this;r.BORDER_SIZE=2;r.FOREGROUND_COLOR=7936778;r.BACKGROUND_COLOR=16777215;r.POINTER_LEFT_OFFSET=.15;r.POINTER_SCALE_KOEF=.55;r._d=1;r._value=!1;r._isDown=!1;r._isDisabled=!1;r.interactive=!0;r.buttonMode=!0;r.on(n.MouseEvent.MOUSE_DOWN,r.onDown,r);r.on(n.MouseEvent.MOUSE_UP,r.onUp,r);return r._label=new PIXI.Text(i,n.FontsHelper.Text.fontForTableUnitBodyStakes),r.addChild(r._label),r._background=new PIXI.Graphics,r.addChild(r._background),r._pointer=new PIXI.Graphics,r.addChild(r._pointer),r}return __extends(i,t),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(n){this._value=n;this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._label.width+this._d*(1+this.POINTER_LEFT_OFFSET)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDown",{get:function(){return this._isDown},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"disabled",{get:function(){return this._isDisabled},set:function(n){this._isDisabled=n},enumerable:!0,configurable:!0}),i.prototype.onDown=function(){this.disabled||(this._isDown=!0)},i.prototype.emitChange=function(){this.emit(i.EVENT_CHANGE,!this._value)},i.prototype.onUp=function(){this.disabled||(this._isDown&&this.onChangeValue(),this._isDown=!1)},i.prototype.onChangeValue=function(){this.emitChange();this.update()},i.prototype.update=function(){this._label.style.fontSize=this._d;this.drawBackground();this.drawPointer()},i.prototype.setDiameter=function(n){this._d=n;this.update()},i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.destroy=function(){this.off(n.MouseEvent.MOUSE_DOWN,this.onDown,this);this.off(n.MouseEvent.MOUSE_UP,this.onUp,this);t.prototype.destroy.call(this);this._background.destroy();this._pointer.destroy()},i.prototype.drawBackground=function(){this._background.clear();this._background.lineStyle(this.BORDER_SIZE,this.FOREGROUND_COLOR);this._background.beginFill(this.BACKGROUND_COLOR);var n=this._d/2,t=this._label.width+this._d*this.POINTER_LEFT_OFFSET+this._d/2,i=this._d/2;this._background.drawCircle(t,i,n);this._background.endFill()},i.prototype.drawPointer=function(){if(this._pointer.clear(),this._value){this._pointer.beginFill(this.FOREGROUND_COLOR);var n=this._d/2*this.POINTER_SCALE_KOEF,t=this._label.width+this._d*this.POINTER_LEFT_OFFSET+this._d/2,i=this._d/2;this._pointer.drawCircle(t,i,n);this._pointer.endFill()}},i}(PIXI.Container);t.EVENT_CHANGE="valuechange";n.TableUnitRadioButton=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var r=t.call(this)||this;return r._bgSprite=new PIXI.Sprite(n.Resources.getTexture(i.BG_TEXTURE_NAME)),r.addChild(r._bgSprite),r._videoSprite=new PIXI.Sprite,r.addChild(r._videoSprite),r}return __extends(i,t),Object.defineProperty(i.prototype,"source",{set:function(n){this._source=n;this._videoSprite.texture=PIXI.Texture.fromVideo(n);var t=this._videoSprite.texture.baseTexture.source;t.onplaying=this.onStart.bind(this);t.onended=this.onFinish.bind(this)},enumerable:!0,configurable:!0}),i.prototype.onLoad=function(){},i.prototype.onStart=function(){this.resizeVideo(this._videoSprite.texture.baseTexture.width,this._videoSprite.texture.baseTexture.height);this.emit(i.EVENT_START,this._source)},i.prototype.onFinish=function(){this.emit(i.EVENT_FINISH,this._source)},i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},i.prototype.getWidth=function(){return this._w},i.prototype.getHeight=function(){return this._h},i.prototype.update=function(){var t=n.Resources.getOrigSize(n.Resources.getTexture(i.BG_TEXTURE_NAME).baseTexture);this._bgSprite.texture=n.Resources.getTexture(i.BG_TEXTURE_NAME,{width:this._w,height:this._h,drawNewTexture:!0});this._bgSprite.width=this._w;this._bgSprite.height=this._h},i.prototype.resizeVideo=function(t,r){n.trace("[origVideoSize]",t,r);var o=this._w/this._h,e=t/r,u=0,f=0;o<e?(u=this._w*i.VIDEO_SCALE_KOEF,f=u/e):(f=this._h*i.VIDEO_SCALE_KOEF,u=f*e);this._videoSprite.width=u;this._videoSprite.height=f;n.trace("[videoSize]",u,f);this._videoSprite.x=(this._bgSprite.width-this._videoSprite.width)/2;this._videoSprite.y=(this._bgSprite.height-this._videoSprite.height)/2},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bgSprite.destroy();this._videoSprite.destroy()},i}(PIXI.Container);i.EVENT_START="videoplayerstart";i.EVENT_FINISH="videoplayerfinish";i.BG_TEXTURE_NAME="lobby/reward_video/bg";i.VIDEO_SCALE_KOEF=.9;t.VideoPlayer=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var i,t;(function(n){n[n.NONE=0]="NONE";n[n.HIGHLIGHT=1]="HIGHLIGHT";n[n.LOWLIGHT=2]="LOWLIGHT"})(i=n.HightliteState||(n.HightliteState={}));t=function(t){function r(){var i=t.call(this)||this,r;return i._w=100,i._h=140,i._showed=!1,i._showShadow=!0,r=n.Resources.getOrigSize(n.Resources.getTexture("card_back").baseTexture),i._w=r.width,i._h=r.height,i._cardShadow=new n.BoardCardShadow,i._cardShadow.tint=0,i.addChild(i._cardShadow),i._cardFace=new PIXI.Container,i.addChild(i._cardFace),i._face=new PIXI.Sprite,i._cardFace.addChild(i._face),i._imageCont=new PIXI.Container,i._cardFace.addChild(i._imageCont),i._cardBack=new PIXI.Sprite,i.addChild(i._cardBack),i._cardFace.visible=i._showed,i._cardBack.visible=!i._showed,i.pivot.set(i._w/2,i._h/2),i}return __extends(r,t),r.prototype.setMCard=function(t){if(this.highlight(i.NONE),t){this._mCard=t;this.clearFace();var f,e,o,u;f=n.Resources.getOrigSize(n.Resources.getTexture("card_"+this._mCard.weight).baseTexture);e=this._h/r.WEIGHT_HEIGHT_KOEF/f.height;o=new PIXI.Rectangle(0,0,f.width*e,f.height*e);this._spriteWeight=new PIXI.Sprite(n.Resources.getTexture("card_"+this._mCard.weight,{scale:e,drawNewTexture:!0},"BoardCard"));this._spriteWeight.width=o.width;this._spriteWeight.height=o.height;this._spriteWeight.x=this._w/10;this._spriteWeight.y=this._h/20;(this._mCard.suit=="s"||this._mCard.suit=="c")&&(this._spriteWeight.tint=0);this._imageCont.addChild(this._spriteWeight);f=n.Resources.getOrigSize(n.Resources.getTexture("card_"+this._mCard.suit).baseTexture);e=this._h/r.SUIT_HEIGHT_KOEF/f.height;o=new PIXI.Rectangle(0,0,f.width*e,f.height*e);u=new PIXI.Sprite(n.Resources.getTexture("card_"+this._mCard.suit,{scale:e,drawNewTexture:!0},"BoardCard"));u.width=o.width;u.height=o.height;u.x=this._w/10;u.y=this._h/3.1;this._imageCont.addChild(u);f=n.Resources.getOrigSize(n.Resources.getTexture(this._mCard.imageName).baseTexture);e=this._w/r.IMAGE_WIDTH_KOEF/f.width;o=new PIXI.Rectangle(0,0,f.width*e,f.height*e);u=new PIXI.Sprite(n.Resources.getTexture(this._mCard.imageName,{scale:e,drawNewTexture:!0},"BoardCard"));u.width=o.width;u.height=o.height;u.x=this._w-u.width-this._w/20;u.y=this._h-u.height-this._h/20;this._imageCont.addChild(u)}},r.prototype.clearFace=function(){for(var n;this._imageCont.children.length>0;)n=this._imageCont.removeChildAt(0),n.destroy()},Object.defineProperty(r.prototype,"showShadow",{set:function(n){this._showShadow=n;this._cardShadow.visible=n},enumerable:!0,configurable:!0}),r.prototype.showCard=function(t,i){(i===void 0&&(i=!1),this._showed!=t)&&(n.Tweener.killTweensOf(this),this._showed=t,i?(this._cardFace.visible=this._showed,this._cardBack.visible=!this._showed):n.Tweener.to(this.scale,.2,{x:0,onComplete:this.onCompleteFirstAnim,onCompleteScope:this}))},r.prototype.onCompleteFirstAnim=function(){this._cardFace.visible=this._showed;this._cardBack.visible=!this._showed;n.Tweener.to(this.scale,.2,{x:1})},r.prototype.onClick=function(){this.showCard(!this._showed)},r.prototype.onResize=function(){n.Tweener.killTweensOf(this);n.Tweener.killTweensOf(this.scale);this.scale.x=1;this._face.texture=n.Resources.getTexture("card_face",{width:this._w,drawNewTexture:!0},"BoardCard");var t=n.Resources.getTexture("card_back",{width:this._w,drawNewTexture:!0},"BoardCard");this._cardBack.texture=t;this._cardShadow.changeTexture(t);this._face.width=this._cardBack.width=this._w;this._face.height=this._cardBack.height=this._h;this._cardShadow.width=this._w*r.SHADOW_SCALE_KOEF;this._cardShadow.height=this._h*r.SHADOW_SCALE_KOEF;this._cardShadow.x=-(this._cardShadow.width-this._w)*.5;this._cardShadow.y=-(this._cardShadow.height-this._h)*.5;this.setMCard(this._mCard);this.pivot.set(this._w*.5,this._h*.5);this.showCard(this._showed,!0)},r.prototype.getWidth=function(){return this._w},r.prototype.setWidth=function(n){var t=n/this._w;this._w=n;this._h*=t;this.onResize()},r.prototype.getHeight=function(){return this._h},r.prototype.setHeight=function(n){var t=n/this._h;this._h=n;this._w*=t;this.onResize()},r.prototype.highlight=function(n){var u=16777215,t,f,e;switch(n){case i.NONE:this.showShadow=!0;this._cardShadow.tint=0;this._cardShadow.blendMode=PIXI.BLEND_MODES.NORMAL;this._cardShadow.alpha=.5;break;case i.HIGHLIGHT:this.showShadow=!0;this._cardShadow.tint=r.HIGHTLIGHT_COLOR;this._cardShadow.blendMode=PIXI.BLEND_MODES.ADD;this._cardShadow.alpha=1;break;case i.LOWLIGHT:this.highlight(i.NONE);u=r.LOWLIGHT_COLOR}for(this._face.tint=u,t=0,f=this._imageCont.children;t<f.length;t++)e=f[t],e.tint=u;this._spriteWeight&&this._mCard&&(this._mCard.suit=="s"||this._mCard.suit=="c")&&(this._spriteWeight.tint=0)},r.prototype.destroy=function(){n.Tweener.killTweensOf(this);n.Tweener.killTweensOf(this.scale);this.clearFace();this._cardFace.destroy();this._cardBack.destroy();this._cardShadow.destroy();this._face.destroy();this._imageCont.destroy();t.prototype.destroy.call(this)},r}(PIXI.Container);t.HIGHTLIGHT_COLOR=16771591;t.LOWLIGHT_COLOR=6710886;t.BACK_SCALE_KOEF=1.3;t.SHADOW_SCALE_KOEF=1.28;t.WEIGHT_HEIGHT_KOEF=3.8;t.SUIT_HEIGHT_KOEF=5;t.IMAGE_WIDTH_KOEF=1.4;n.BoardCard=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this,r;return i._w=100,i._h=140,i._showed=!1,i._showShadow=!0,r=n.Resources.getOrigSize(n.Resources.getTexture("card_back").baseTexture),i._w=r.width,i._h=r.height,i._cardShadow=new PIXI.Sprite,i._cardShadow.tint=0,i.addChild(i._cardShadow),i._cardFace=new PIXI.Container,i.addChild(i._cardFace),i._face=new PIXI.Sprite,i._cardFace.addChild(i._face),i._imageCont=new PIXI.Container,i._cardFace.addChild(i._imageCont),i._cardBack=new PIXI.Sprite,i.addChild(i._cardBack),i._cardFace.visible=i._showed,i._cardBack.visible=!i._showed,i.pivot.set(i._w/2,i._h/2),i}return __extends(i,t),i.generateTexturesCardByWidth=function(t){var c=(new Date).getTime(),u,h,e,r,f,o,s;for(t*=i.BACK_SCALE_KOEF,i._texturesHash={},h=n.Resources.getOrigSize(n.Resources.getTexture("card_back").baseTexture),e=new PIXI.Rectangle(0,0,t,t/h.width*h.height),u=n.Resources.getTexture("card_back",{width:t,drawNewTexture:!0}),i._texturesHash.card_back=u,u=n.Resources.getTexture("card_face",{width:t,drawNewTexture:!0}),i._texturesHash.card_face=u,s=e.height/i.WEIGHT_HEIGHT_KOEF,r=0;r<n.Resources.cardsNumbers.length;r++)f="card_"+n.Resources.cardsNumbers[r],u=n.Resources.getTexture(f,{height:s,drawNewTexture:!0}),i._texturesHash[f]=u;for(s=e.height/i.SUIT_HEIGHT_KOEF,r=0;r<n.Resources.cardsSuits.length;r++)f="card_"+n.Resources.cardsSuits[r],u=n.Resources.getTexture(f,{height:s,drawNewTexture:!0}),i._texturesHash[f]=u;for(o=e.width/i.IMAGE_WIDTH_KOEF,r=0;r<n.Resources.cardsSuits.length;r++)f="card_"+n.Resources.cardsSuits[r],u=n.Resources.getTexture(f,{width:o,drawNewTexture:!0}),i._texturesHash["card_image_"+n.Resources.cardsSuits[r]]=u;for(o=e.width/i.IMAGE_WIDTH_KOEF,r=0;r<n.Resources.cardsFaces.length;r++)f="card_image_"+n.Resources.cardsFaces[r],u=n.Resources.getTexture(f,{width:o,drawNewTexture:!0}),i._texturesHash[f]=u},i.prototype.setMCard=function(t){var s,u,f,e,r,o;t&&(this._mCard&&this._mCard.equals(t)||(this._mCard=t,this.clearFace(),s=(new Date).getTime(),u=n.Resources.getOrigSize(n.Resources.getTexture("card_"+this._mCard.weight).baseTexture),f=this._h/i.WEIGHT_HEIGHT_KOEF/u.height,e=new PIXI.Rectangle(0,0,u.width*f,u.height*f),r=new PIXI.Sprite(i._texturesHash["card_"+this._mCard.weight]),r.width=e.width,r.height=e.height,r.x=this._w/10,r.y=this._h/20,(this._mCard.suit=="s"||this._mCard.suit=="c")&&(r.tint=0),this._imageCont.addChild(r),u=n.Resources.getOrigSize(n.Resources.getTexture("card_"+this._mCard.suit).baseTexture),f=this._h/i.SUIT_HEIGHT_KOEF/u.height,e=new PIXI.Rectangle(0,0,u.width*f,u.height*f),r=new PIXI.Sprite(i._texturesHash["card_"+this._mCard.suit]),r.width=e.width,r.height=e.height,r.x=this._w/10,r.y=this._h/3.1,this._imageCont.addChild(r),o=this._mCard.weight=="j"||this._mCard.weight=="q"||this._mCard.weight=="k"?"card_image_"+this._mCard.weight+this._mCard.suit:"card_image_"+this._mCard.suit,u=n.Resources.getOrigSize(n.Resources.getTexture(this._mCard.imageName).baseTexture),f=this._w/i.IMAGE_WIDTH_KOEF/u.width,e=new PIXI.Rectangle(0,0,u.width*f,u.height*f),r=new PIXI.Sprite(i._texturesHash[o]),r.width=e.width,r.height=e.height,r.x=this._w-r.width-this._w/20,r.y=this._h-r.height-this._h/20,this._imageCont.addChild(r)))},i.prototype.clearFace=function(){for(var n;this._imageCont.children.length>0;)n=this._imageCont.removeChildAt(0),n.parent&&n.parent.removeChild(n),n.destroy()},Object.defineProperty(i.prototype,"showShadow",{set:function(n){this._showShadow=n;this._cardShadow.visible=n},enumerable:!0,configurable:!0}),i.prototype.showCard=function(t,i){(i===void 0&&(i=!1),this._showed!=t)&&(n.Tweener.killTweensOf(this),this._showed=t,i?(this._cardFace.visible=this._showed,this._cardBack.visible=!this._showed):n.Tweener.to(this,.2,{width:0,onComplete:this.onCompleteFirstAnim,onCompleteScope:this}))},i.prototype.onCompleteFirstAnim=function(){this._cardFace.visible=this._showed;this._cardBack.visible=!this._showed;n.Tweener.to(this,.2,{width:this._w})},i.prototype.onClick=function(){this.showCard(!this._showed)},i.prototype.onResize=function(){n.Tweener.killTweensOf(this);this._face.texture=n.Resources.getTexture("card_face",{width:this._w,drawNewTexture:!0});this._cardBack.texture=n.Resources.getTexture("card_back",{width:this._w,drawNewTexture:!0});this._cardShadow.texture=n.Resources.getTexture("card_back",{width:this._w,drawNewTexture:!0});this._cardShadow.tint=0;this._cardShadow.filters=[new PIXI.filters.BlurFilter];this._face.width=this._cardBack.width=this._cardShadow.width=this._w;this._face.height=this._cardBack.height=this._cardShadow.height=this._h;this.setMCard(this._mCard);this.pivot.set(this._w/2,this._h/2);this.showCard(this._showed,!0)},i.prototype.getWidth=function(){return this._w},i.prototype.setWidth=function(n){var t=n/this._w;this._w=n;this._h*=t;this.onResize()},i.prototype.getHeight=function(){return this._h},i.prototype.setHeight=function(n){var t=n/this._h;this._h=n;this._w*=t;this.onResize()},i.prototype.destroy=function(){n.Tweener.killTweensOf(this);this.clearFace();this._cardFace.destroy();this._cardBack.destroy();this._cardShadow.destroy();this._face.destroy();this._imageCont.destroy();t.prototype.destroy.call(this)},i}(PIXI.Container);t.BACK_SCALE_KOEF=1;t.WEIGHT_HEIGHT_KOEF=3.8;t.SUIT_HEIGHT_KOEF=5;t.IMAGE_WIDTH_KOEF=1.4;t._texturesHash={};n.BoardCard2=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this,r;i._buttonOffsetKoef=3;i._colorRedUp=16464699;i._colorRedDown=13054e3;i._colorGreenUp=2730919;i._colorGreenDown=1937299;i._colorOrangeUp=16768135;i._colorOrangeDown=15254896;i._w=10;i._h=10;i._hasCheck=!1;i._hasCall=!1;i._hasBet=!1;i._hasRaise=!1;i._hasAllIn=!1;i._hasConfirm=!1;i._btnFold=new n.ButtonBet("Fold",i._colorRedUp,i._colorRedDown,PIXI.Sprite.fromFrame("icon_cross"));i.addChild(i._btnFold);i._btnFold.on(n.ButtonBase.EVENT_CLICK,i.onClick,i);r=new PIXI.Text("",n.FontsHelper.Text.fontForButtonIconBet);i._btnCall=new n.ButtonBet("Call",i._colorGreenUp,i._colorGreenDown,r);i.addChild(i._btnCall);i._btnCall.on(n.ButtonBase.EVENT_CLICK,i.onClick,i);i._btnRaise=new n.ButtonBet("Raise",i._colorOrangeUp,i._colorOrangeDown,PIXI.Sprite.fromFrame("icon_arrowup"));i.addChild(i._btnRaise);i._btnRaise.on(n.ButtonBase.EVENT_CLICK,i.onClick,i);return i}return __extends(i,t),i.prototype.updateButtons=function(t,i,r,u,f,e){if(this.hide(),t){this._btnFold.visible=this._btnRaise.visible=!0;var o;this._hasCheck=u==0||u==r;this._hasCall=r<u&&u<i+r;this._hasBet=u==0;this._hasAllIn=u>=i+r||e<=f;this._hasRaise=!this._hasAllIn;this._btnCall.visible=this._hasCheck||this._hasCall;this._hasCheck?(this._btnCall.setIcon(new PIXI.Sprite(n.Resources.getTexture("icon_check"))),this._btnCall.setCaption("Check")):this._hasCall&&(o=new PIXI.Text(n.StringHelper.shortenNumber(u-r),n.FontsHelper.Text.fontForButtonIconBet),this._btnCall.setIcon(o),this._btnCall.setCaption("Call"));this._hasBet?(this._btnRaise.setIcon(new PIXI.Sprite(n.Resources.getTexture("icon_arrowup"))),this._btnRaise.setCaption("Bet")):this._hasRaise?(this._btnRaise.setIcon(new PIXI.Sprite(n.Resources.getTexture("icon_arrowup"))),this._btnRaise.setCaption("Raise")):this._hasAllIn&&(o=new PIXI.Text(n.StringHelper.shortenNumber(e),n.FontsHelper.Text.fontForButtonIconBet),this._btnRaise.setCaption("All-in"),this._btnRaise.setIcon(o))}},i.prototype.hide=function(){this._hasConfirm=!1;this._btnFold.visible=this._btnCall.visible=this._btnRaise.visible=!1},i.prototype.showConfirmButton=function(){this._hasConfirm=!0;this._btnRaise.setCaption("Confirm")},i.prototype.onClick=function(t){t===this._btnFold?this.emit(n.AppEvent.CLICK_FOLD):t===this._btnCall?this.emit(this._hasCheck?n.AppEvent.CLICK_CHECK:n.AppEvent.CLICK_CALL):t===this._btnRaise&&(this._hasConfirm?this.emit(n.AppEvent.CLICK_CONFIRM):this._hasBet?this.emit(n.AppEvent.CLICK_BET):this._hasRaise?this.emit(n.AppEvent.CLICK_RAISE):this._hasAllIn&&this.emit(n.AppEvent.CLICK_ALL_IN))},i.prototype.getWidth=function(){return this._w},i.prototype.setWidth=function(n){this._w=n;var t=this._w*this._buttonOffsetKoef/(3*this._buttonOffsetKoef+2),i=(this._w-t*3)/2;this._btnFold.setWidth(t,!0);this._btnCall.setWidth(t,!0);this._btnRaise.setWidth(t,!0);this._btnFold.x=0;this._btnCall.x=this._btnFold.x+this._btnFold.getWidth()+i;this._btnRaise.x=this._btnCall.x+this._btnCall.getWidth()+i;this._h=this._btnFold.getHeight()},i.prototype.getHeight=function(){return this._h},i.prototype.redraw=function(){},i}(PIXI.Container);n.ButtonsBetsContainer=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this,r,u;for(i._cardOffsetKoef=20,i._w=50,i._h=50,i._cards=[],i._mCards=[],i._openedCards=0,u=0;u<5;u++)r=new n.BoardCard,r.visible=!1,i._cards.push(r),i.addChild(r);return i._winLabel=new n.WinLabelWithCards,i.addChild(i._winLabel),i._winLabel.visible=!1,i}return __extends(i,t),i.prototype.startRound=function(){for(var n=0;n<this._cards.length;n++)this._cards[n].visible=!1,this._cards[n].showCard(!1,!0);this._openedCards=0;this._winLabel.hide()},i.prototype.openCards=function(n){for(var t=0;t<n.length;t++)this._cards[t].visible||(this._cards[t].visible=!0,this._cards[t].setMCard(n[t]),this._cards[t].showCard(!0,this._openedCards>t));this._mCards=n;this._openedCards=n.length},i.prototype.showWinState=function(){var e=n.Model.table.handRankinkResult.banks,t,i,f,u,r;for(console.warn("Multibunking and multiwinners can't support currently!"),t=e[0].players[0],i=0;i<this._mCards.length;i++){for(f=this._mCards[i],u=!1,r=0;r<t.cards.length;r++)if(t.cards[r].equals(f)){u=!0;break}this._cards[i].highlight(u?n.HightliteState.HIGHLIGHT:n.HightliteState.LOWLIGHT)}t.cards.length>0&&this._winLabel.show(t.comb,t.cards,t.kickers)},i.prototype.setWidth=function(n){var t,u;this._w=n;var i=this._w*this._cardOffsetKoef/(5*this._cardOffsetKoef+4),f=i/this._cardOffsetKoef,r=-this._w/2+i/2;for(t=0;t<this._cards.length;t++)this._cards[t].setWidth(i),this._cards[t].x=r,r+=i+f;u=1.5*n;this._winLabel.setWidth(u,430/46);this._winLabel.position.y=this._cards[0].height*.5-this._winLabel.height*.25;this._winLabel.refresh()},i.prototype.getWidth=function(){return this._w},i.prototype.getHeight=function(){return this._h},i.prototype.clearGame=function(){this.startRound()},i.prototype.destroy=function(){t.prototype.destroy.call(this);for(var n=0;n<this._cards.length;n++)this._cards[n].destroy(),this._cards[n].parent&&this._cards[n].parent.removeChild(this._cards[n])},i}(PIXI.Container);n.BoardCardsContainer=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this,n.Resources.getTexture("bg_game"))||this;return i._w=50,i._h=50,i}return __extends(i,t),i.prototype.setSize=function(n,t){this.width=n;this.height=t},i.prototype.destroy=function(){t.prototype.destroy.call(this)},i}(PIXI.Sprite);n.Bg=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(i,r,u,f){var e=this,o=n.Resources.getTexture("btn_bet_bg");return e=t.call(this,o.width,o.height)||this,e._text=i,e._colorUp=r,e._colorDown=u,e._icon=f,e._bg=new PIXI.Sprite(o),e.addChild(e._bg),e._bg.tint=e._colorUp,e._label=new PIXI.Text(e._text,n.FontsHelper.Text.fontForButtonBet),e.addChild(e._label),e._label.tint=e._colorUp,e.addChild(e._icon),e}return __extends(i,t),i.prototype.setCaption=function(n){this._label.text=n;this._label.x=this._w/2-this._label.width/2},i.prototype.setIcon=function(n){this._icon&&this._icon.destroy();this._icon=n;this.addChild(this._icon);this.updateIconSize()},i.prototype.onResize=function(){this._bg.texture=n.Resources.getTexture("btn_bet_bg",{width:this._w,returnNewTexture:!0});this._bg.width=this._w;this._bg.height=this._h;this._label.style.fontSize=this._h/i.CAPTION_FONT_SIZE_KOEF;this._label.x=this._w/2-this._label.width/2;this._label.y=-this._label.height;this.updateIconSize()},i.prototype.updateIconSize=function(){if(this._icon instanceof PIXI.Text)this._icon.style.fontSize=this._h/i.ICON_FONT_SIZE_KOEF;else{var r=n.Resources.getOrigSize(this._icon.texture.baseTexture),t=this._w/i.ICON_SIZE_KOEF;this._icon.texture=n.Resources.scaleTexture(this._icon.texture,{width:t});this._icon.width=t;this._icon.height=t/r.width*r.height}this._icon.x=this._w/2-this._icon.width/2;this._icon.y=this._h/2-this._icon.height/2-this._h/i.ICON_Y_OFFSET_KOEF},i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);this._bg.tint=this._curState==n.ButtonBase.STATE_DOWN?this._colorDown:this._colorUp;this._label.tint=this._curState==n.ButtonBase.STATE_DOWN?this._colorDown:this._colorUp},i.prototype.setWidth=function(n,i){i===void 0&&(i=!1);t.prototype.setWidth.call(this,n,i);this.onResize()},i.prototype.setHeight=function(n,i){i===void 0&&(i=!1);t.prototype.setHeight.call(this,n,i);this.onResize()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bg.destroy();this._label.destroy();this._icon.destroy()},i}(n.ButtonBase);t.CAPTION_FONT_SIZE_KOEF=4;t.ICON_FONT_SIZE_KOEF=2;t.ICON_SIZE_KOEF=4;t.ICON_Y_OFFSET_KOEF=12;n.ButtonBet=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(n){function t(){var t=this,i=PIXI.utils.TextureCache.dealer;return t=n.call(this,i)||this,t._w=i.width,t._h=i.height,t}return __extends(t,n),t.prototype.getWidth=function(){return this._w},t.prototype.setWidth=function(n){this._w=n},t.prototype.getHeight=function(){return this._h},t.prototype.destroy=function(){n.prototype.destroy.call(this)},t}(PIXI.Sprite);n.Dealer=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(n){function t(){return n.call(this,"lobby/settings_icon")||this}return __extends(t,n),t}(n.RoundButton);t.OpenSettingsButton=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var i=t.call(this)||this;return i.CHIP_DIAMETER_KOEF=1,i.CHIP_LEFT_OFFSET=0,i.CHIP_TOP_OFFSET=0,i.COUNT_FONT_SIZE_KOEF=.889,i.COUNT_LEFT_OFFSET=1.238,i._maxExpandedWidth=10,i._expandSize=0,i._inited=!1,i._cont=new PIXI.Container,i.addChild(i._cont),i._maskTf=new PIXI.Graphics,i._cont.addChild(i._maskTf),i._count=new PIXI.Text("",n.FontsHelper.Text.fontForChipCounter),i._cont.addChild(i._count),i._chipSprite=new PIXI.Sprite(n.Resources.getTexture("lobby/chip",{drawNewTexture:!0})),i._cont.addChild(i._chipSprite),i._count.mask=i._maskTf,i}return __extends(i,t),Object.defineProperty(i.prototype,"count",{set:function(t){if(t!=undefined){var i=n.StringHelper.numberWithCommas(t);this._count.text="$"+i;this.updateTextParams();this._inited||(this._inited=!0,n.Tweener.to(this,.5,{_expandSize:this._maxExpandedWidth,onUpdate:this.draw,onUpdateScope:this,onComplete:this.onCompleteExpandAnimation,onCompleteScope:this}))}},enumerable:!0,configurable:!0}),i.prototype.onCompleteExpandAnimation=function(){this._count.mask=null;this._maskTf.parent&&this._maskTf.parent.removeChild(this._maskTf);this._maskTf.destroy()},i.prototype.draw=function(){this._maskTf.clear();this._maskTf.beginFill(0);this._maskTf.drawRect(0,0,this._expandSize,this._chipSprite.height);this._cont.x=-this._expandSize/2},Object.defineProperty(i.prototype,"actualWidth",{get:function(){return this._count.x+this._count.width},enumerable:!0,configurable:!0}),i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.setHeight=function(n){this._h=n;this.update()},i.prototype.updateTextParams=function(){var n=this._h*this.COUNT_LEFT_OFFSET,t=this._h/2-this._count.height/2;this._count.position.set(n,t);this._maxExpandedWidth=this.actualWidth},i.prototype.update=function(){n.Tweener.killTweensOf(this);this._count.style.fontSize=this._h*this.COUNT_FONT_SIZE_KOEF;var t=this._h*this.CHIP_DIAMETER_KOEF,i=this._h*this.CHIP_LEFT_OFFSET,r=this._h*this.CHIP_TOP_OFFSET,u=n.Resources.getOrigSize(n.Resources.getTexture("lobby/chip").baseTexture),f=t/u.height;this._chipSprite.texture=n.Resources.scaleTexture(this._chipSprite.texture,{scale:f});this._chipSprite.position.set(i,r);this._chipSprite.width=this._chipSprite.height=t;this.updateTextParams();this.pivot.x=-this.actualWidth/2},i.prototype.destroy=function(){t.prototype.destroy.call(this);n.Tweener.killTweensOf(this);this._count.destroy();this._chipSprite.destroy()},i}(PIXI.Container);t.ChipCounter=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this;return i.KOEF_CARDS_OFFSET_X=.1,i._card1=new n.BoardCard,i.addChild(i._card1),i._card2=new n.BoardCard,i.addChild(i._card2),i.hideCards(),i}return __extends(i,t),i.prototype.setSize=function(n){t.prototype.setSize.call(this,n);this._card1.setHeight(n);this._card2.setHeight(n);var i=this._card1.getWidth()*this.KOEF_CARDS_OFFSET_X;this._card1.x=-this._card1.getWidth()/2-i/2;this._card2.x=this._card2.getWidth()/2+i/2},i.prototype.destroy=function(){t.prototype.destroy.call(this)},i}(n.PlayerCardsBase);n.PlayerCards=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(n){function t(){return n.call(this,"lobby/close_icon")||this}return __extends(t,n),t}(n.RoundButton);t.CloseButton=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(){var t=n.call(this)||this;return t.BACKGROUND_COLOR=8391968,t.BORDER_LEFT_COLOR=4916508,t.BORDER_LEFT_KOEF=.02,t.interactive=!0,t._bg=new PIXI.Graphics,t.addChild(t._bg),t._border=new PIXI.Graphics,t.addChild(t._border),t}return __extends(t,n),t.prototype.setPosition=function(n,t){this.x=n;this.y=t},t.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},t.prototype.destroy=function(){n.prototype.destroy.call(this)},t.prototype.drawBg=function(){this._bg.clear();this._bg.beginFill(this.BACKGROUND_COLOR);this._bg.drawRect(0,0,this._w,this._h);this._bg.endFill()},t.prototype.drawBorder=function(){this._border.clear();this._border.lineStyle(this._w*this.BORDER_LEFT_KOEF,this.BORDER_LEFT_COLOR).moveTo(0,0).lineTo(0,this._h)},t.prototype.update=function(){this.drawBg();this.drawBorder()},t}(PIXI.Container);n.SettingsBg=t})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this;i.KNOBE="lobby/knobe";i.ENABLED_COLOR=5036388;i.DISABLED_COLOR=13421772;i.ANIMATE_DURATION=.2;i._w=1;i._h=1;i._value=!1;i._isDown=!1;i._isDisabled=!1;i.interactive=!0;i.buttonMode=!0;i.on(n.MouseEvent.MOUSE_DOWN,i.onDown,i);i.on(n.MouseEvent.MOUSE_UP,i.onUp,i);return i._knobe=new PIXI.Sprite(n.Resources.getTexture(i.KNOBE)),i._bg=new PIXI.Sprite(i.createBack(82,52)),i._bg.tint=i.DISABLED_COLOR,i.addChild(i._bg),i.addChild(i._knobe),i}return __extends(i,t),i.prototype.createBack=function(n,t){var i=new PIXI.Graphics,r;return i.beginFill(16777215),i.arc(t*.5,t*.5,t*.5,0,Math.PI*2),i.arc(n-t*.5,t*.5,t*.5,0,Math.PI*2),i.drawRect(t*.5,0,n-t,t),i.endFill(),r=i.generateCanvasTexture(),i.destroy(),r},Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(n){this._value=n;this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"disabled",{get:function(){return this._isDisabled},set:function(n){this._isDisabled=n},enumerable:!0,configurable:!0}),i.prototype.onDown=function(){this.disabled||(this._isDown=!0)},i.prototype.emitChange=function(){this.emit(i.EVENT_CHANGE,this.value)},i.prototype.onUp=function(){this.disabled||(this._isDown&&this.onChangeValue(),this._isDown=!1)},i.prototype.onChangeValue=function(){this._value=!this._value;this.emitChange();this.update()},i.prototype.update=function(){this._value?(this._bg.tint=this.ENABLED_COLOR,n.Tweener.to(this._knobe,this.ANIMATE_DURATION,{pixi:{positionX:this._bg.width-this._knobe.height}})):(this._bg.tint=this.DISABLED_COLOR,n.Tweener.to(this._knobe,this.ANIMATE_DURATION,{pixi:{positionX:0}}))},i.prototype.setSize=function(n,t){this.width=n;this.height=t;this.update()},i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.destroy=function(){this.off(n.MouseEvent.MOUSE_DOWN,this.onDown,this);this.off(n.MouseEvent.MOUSE_UP,this.onUp,this);t.prototype.destroy.call(this,{children:!0})},i}(PIXI.Container);t.EVENT_CHANGE="valuechange";n.SettingsRadioButton=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var i=t.call(this)||this;i.TITLE_FONT_SIZE_KOEF=.055;i.TITLE_LEFT_OFFSET=.085;i.TITLE_TOP_OFFSET=.4;i.RADIO_BUTTON_RIGHT_OFFSET=.043;i.RADIO_BUTTON_TOP_OFFSET=.28;i.RADIO_BUTTON_WIDTH_KOEF=.213;i.RADIO_BUTTON_HEIGHT_KOEF=.467;i._isOdd=!1;i._bg=new PIXI.Graphics;i._bg.alpha=0;i.addChild(i._bg);i._title=new PIXI.Text("",n.FontsHelper.Text.fontForSettingsUnit);i.addChild(i._title);i._radioButton=new n.SettingsRadioButton;i._radioButton.on(n.SettingsRadioButton.EVENT_CHANGE,i.onChangeValue,i);return i.addChild(i._radioButton),i}return __extends(i,t),Object.defineProperty(i.prototype,"title",{set:function(n){this._title.text=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{set:function(n){this._radioButton.value=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isOdd",{set:function(n){this._isOdd=n;this._bg.alpha=n?.2:0},enumerable:!0,configurable:!0}),i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._title.destroy();this._radioButton.destroy()},i.prototype.onChangeValue=function(n){this.emit(i.EVENT_SETTINGS_UPDATE,n)},i.prototype.drawBg=function(){this._bg.clear();this._bg.beginFill(0);this._bg.drawRect(0,0,this._w,this._h);this._bg.endFill()},i.prototype.update=function(){var n,t;this.drawBg();this._title.style.fontSize=this._w*this.TITLE_FONT_SIZE_KOEF;n=this._w*this.TITLE_LEFT_OFFSET;t=this._h*this.TITLE_TOP_OFFSET;this._title.position.set(n,t);var i=this._w*this.RADIO_BUTTON_WIDTH_KOEF,r=this._h*this.RADIO_BUTTON_HEIGHT_KOEF,u=this._w*(1-this.RADIO_BUTTON_RIGHT_OFFSET)-i,f=this._w*this.RADIO_BUTTON_RIGHT_OFFSET;this._radioButton.setPosition(u,f);this._radioButton.setSize(i,r)},i}(PIXI.Container);i.EVENT_SETTINGS_UPDATE="settingsupdate";t.SettingsUnit=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(i){function r(){var r=i.call(this)||this;r.TITLE_FONT_SIZE_KOEF=.1;r.TITLE_LEFT_OFFSET=.076;r.TITLE_TOP_OFFSET=.3;r.CLOSE_BUTTON_RIGHT_OFFSET=.05;r.CLOSE_BUTTON_TOP_OFFSET=.026;r.CLOSE_BUTTON_WIDTH_KOEF=.193;r._title=new PIXI.Text("SETTINGS",n.FontsHelper.Text.fontForSettingsHeader);r.addChild(r._title);r._closeButton=new t.CloseButton;r._closeButton.on(t.CloseButton.EVENT_CLICK,r.onCloseButtonClick,r);return r.addChild(r._closeButton),r}return __extends(r,i),r.prototype.setPosition=function(n,t){this.x=n;this.y=t},r.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},r.prototype.destroy=function(){i.prototype.destroy.call(this);this._title.destroy();this._closeButton.destroy()},r.prototype.onCloseButtonClick=function(){this.emit(r.EVENT_CLOSE)},r.prototype.update=function(){var n,t;this._title.style.fontSize=this._w*this.TITLE_FONT_SIZE_KOEF;n=this._w*this.TITLE_LEFT_OFFSET;t=this._h*this.TITLE_TOP_OFFSET;this._title.position.set(n,t);var i=this._w*this.CLOSE_BUTTON_WIDTH_KOEF,r=this._w*(1-this.CLOSE_BUTTON_RIGHT_OFFSET)-i,u=this._w*this.CLOSE_BUTTON_RIGHT_OFFSET;this._closeButton.setPosition(r,u);this._closeButton.setDiameter(i)},r}(PIXI.Container);i.EVENT_CLOSE="settingsclose";t.SettingsHeader=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(n){var i=t.call(this)||this;return i.HEADER_WIDTH_KOEF=1,i.HEADER_HEIGHT_KOEF=.176,i.SETTINGS_UNIT_WIDTH_KOEF=1,i.SETTINGS_UNIT_HEIGHT_KOEF=.143,i._units=[],i._unitsHash={},i.init(n),i.pivot.x=1,i}return __extends(i,t),i.prototype.addSettings=function(t,i,r,u){var f=new n.SettingsUnit;f.title=t;f.value=i;f.isOdd=r;f.on(n.SettingsUnit.EVENT_SETTINGS_UPDATE,u,f);this.addChild(f);this._units.push(f);this._unitsHash[t]=f},Object.defineProperty(i.prototype,"musicEnabled",{set:function(n){this._unitsHash.Music&&(this._unitsHash.Music.value=n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundsEnabled",{set:function(n){this._unitsHash["Sound FX"]&&(this._unitsHash["Sound FX"].value=n)},enumerable:!0,configurable:!0}),i.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bg.destroy();this._header.destroy();this._units.forEach(function(n){return n.destroy()})},i.prototype.init=function(t){this._bg=new n.SettingsBg;this.addChild(this._bg);this._header=new n.SettingsHeader;this._header.on(n.SettingsHeader.EVENT_CLOSE,t,this);this.addChild(this._header)},i.prototype.update=function(){var i,n,r,t;this._bg.setPosition(0,0);this._bg.setSize(this._w,this._h);i=this._w*this.HEADER_WIDTH_KOEF;n=this._h*this.HEADER_HEIGHT_KOEF;this._header.setPosition(0,0);this._header.setSize(i,n);r=this._w*this.SETTINGS_UNIT_WIDTH_KOEF;t=this._h*this.SETTINGS_UNIT_HEIGHT_KOEF;this._units.forEach(function(i,u){var f=n+t*u;i.setPosition(0,f);i.setSize(r,t)})},i}(PIXI.Container);n.Settings=t})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var i=t.call(this,220,57)||this;return i._text="FREE",i._colorDisabled=13421772,i._colorUp=9635350,i._colorDown=11601430,i._bg=new PIXI.Sprite,i.addChild(i._bg),i._label=new PIXI.Text(i._text,n.FontsHelper.Text.fontForFreeChipsButton),i.addChild(i._label),i}return __extends(i,t),Object.defineProperty(i.prototype,"currentState",{get:function(){return this._curState},enumerable:!0,configurable:!0}),i.prototype.onResize=function(){var r=this._w*i.SCALE_X_KOEF,u=this._h*i.SCALE_Y_KOEF,f=this._w*(1-2*i.SCALE_X_KOEF),e=this._h*(1-2*i.SCALE_Y_KOEF),o=this._bg.x=this._curState===i.STATE_DOWN?r:0,s=this._curState===i.STATE_DOWN?u:0,h=this._curState===i.STATE_DOWN?f:this._w,t=this._curState===i.STATE_DOWN?e:this._h,c=n.Resources.getOrigSize(n.Resources.getTexture("lobby/free_chips_button").baseTexture);this._bg.texture=n.Resources.getTexture("lobby/free_chips_button",{scale:t/c.height,drawNewTexture:!0});this._bg.x=o;this._bg.y=s;this._bg.width=h;this._bg.height=t;this._label.style.fontSize=this._w*i.CAPTION_FONT_SIZE_KOEF;this._label.x=this._w*i.CAPTION_LEFT_OFFSET;this._label.y=this._h/2-this._label.height/2},i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);this._curState===i.STATE_DISABLED?(this._bg.tint=this._colorDisabled,this._label.alpha=.7):(this._bg.tint=16777215,this._label.alpha=1);this.onResize()},i.prototype.setWidth=function(n,i){i===void 0&&(i=!1);t.prototype.setWidth.call(this,n,i);this.onResize()},i.prototype.setHeight=function(n,i){i===void 0&&(i=!1);t.prototype.setHeight.call(this,n,i);this.onResize()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bg.destroy();this._label.destroy()},i}(n.ButtonBase);i.CAPTION_FONT_SIZE_KOEF=.155;i.CAPTION_LEFT_OFFSET=.483;i.SCALE_X_KOEF=.025;i.SCALE_Y_KOEF=.075;t.FreeChipsButton=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(i){function r(){var n=i.call(this,270,440)||this;return n.BUTTON_WIDTH_KOEF=.889,n.BUTTON_HEIGHT_KOEF=.165,n.BUTTON_TOP_OFFSET=.79,n.BUTTON_LEFT_OFFSET=.09,n.SCALE_X_KOEF=.016,n.SCALE_Y_KOEF=.01,n.isScaled=!1,n._colorDisabled=13421772,n.init(),n}return __extends(r,i),Object.defineProperty(r.prototype,"disabled",{get:function(){return this._curState==n.ButtonBase.STATE_DISABLED},set:function(t){this._curState=t?n.ButtonBase.STATE_DISABLED:n.ButtonBase.STATE_UP;this._button.disabled=t;this.onChangeState()},enumerable:!0,configurable:!0}),r.prototype.setWidth=function(n){this._h*=n/this._w;this._w=n;this.update()},r.prototype.setPosition=function(n,t){this._x=n;this._y=t;this.update()},Object.defineProperty(r.prototype,"pictureTexture",{set:function(n){this._bg.pictureTexture=n},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isNeedToScale",{get:function(){return this._curState===t.FreeChipsButton.STATE_DOWN&&this._button.currentState===t.FreeChipsButton.STATE_UP},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualX",{get:function(){return this.isNeedToScale&&this._w*this.SCALE_X_KOEF||0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualY",{get:function(){return this.isNeedToScale&&this._h*this.SCALE_X_KOEF||0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualWidth",{get:function(){return this.isNeedToScale&&this._w*(1-2*this.SCALE_X_KOEF)||this._w},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualHeight",{get:function(){return this.isNeedToScale&&this._h*(1-2*this.SCALE_X_KOEF)||this._h},enumerable:!0,configurable:!0}),r.prototype.destroy=function(){i.prototype.destroy.call(this);this._bg.destroy();this._button.destroy();this._body.destroy()},r.prototype.onChangeState=function(){i.prototype.onChangeState.call(this);this._curState===t.SelectTableButton.STATE_DISABLED?(this._bg.tint=this._body.tint=this._colorDisabled,this._bg.alpha=this._body.alpha=.7):(this._bg.tint=this._body.tint=16777215,this._bg.alpha=this._body.alpha=1);this.update()},r.prototype.init=function(){this._bg=new t.FreeChipsBg;this.addChild(this._bg);this._button=new t.FreeChipsButton;this.addChild(this._button);this._body=new t.FreeChipsBody;this.addChild(this._body)},r.prototype.update=function(){var r,f;this.x=this._x+this.actualX;this.y=this._y+this.actualY;this.isNeedToScale&&!this.isScaled?(this.width*=1-2*this.SCALE_X_KOEF,this.height*=1-2*this.SCALE_Y_KOEF,this.isScaled=!0):!this.isNeedToScale&&this.isScaled&&(this.width/=1-2*this.SCALE_X_KOEF,this.height/=1-2*this.SCALE_Y_KOEF,this.isScaled=!1);var i=0,u=0,n=this._w,t=this._h;this._bg.setPosition(i,u);this._bg.setSize(n,t);r=n*this.BUTTON_WIDTH_KOEF;f=t*this.BUTTON_HEIGHT_KOEF;this._button.x=i+n/2-r/2;this._button.y=t*this.BUTTON_TOP_OFFSET;this._button.setWidth(r);this._button.setHeight(f);this._body.setPosition(i,u);this._body.setSize(n,t)},r}(n.ButtonBase);t.FreeChipsPanel=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var n=t.call(this)||this;return n._bgSprite=new PIXI.Sprite,n.addChild(n._bgSprite),n._bgSpriteMask=new PIXI.Sprite,n._bgSpriteMask.tint=0,n._picture=new PIXI.Sprite,n._picture.mask=n._bgSpriteMask,n.addChild(n._picture),n.addChild(n._bgSpriteMask),n}return __extends(i,t),Object.defineProperty(i.prototype,"pictureTexture",{set:function(n){this._picture.texture=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tint",{set:function(n){this._bgSprite.tint=n;this._picture.tint=n},enumerable:!0,configurable:!0}),i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bgSprite.destroy();this._bgSpriteMask.destroy();this._picture.destroy()},i.prototype.update=function(){var t=n.Resources.getOrigSize(n.Resources.getTexture("lobby/free_chips_bg").baseTexture);this._bgSprite.texture=n.Resources.getTexture("lobby/free_chips_bg",{scale:this._h/t.height,drawNewTexture:!0});this._bgSprite.width=this._w;this._bgSprite.height=this._h;this._bgSpriteMask.texture=n.Resources.getTexture("lobby/free_chips_mask",{scale:this._h/t.height,drawNewTexture:!0});this._bgSpriteMask.width=this._bgSprite.width;this._bgSpriteMask.height=this._bgSprite.height;this._picture.x=this._w*i.PICTURE_X_OFFSET;this._picture.width=this._w*(1-2*i.PICTURE_X_OFFSET);this._picture.height=this._h*i.PICTURE_HEIGHT_KOEF},i}(PIXI.Container);i.BORDER_OFFSET_X_KOEF=.041;i.BORDER_OFFSET_Y_KOEF=.027;i.SHADOW_OFFSET_KOEF=.02;i.PICTURE_TOP_OFFSET=0;i.PICTURE_X_OFFSET=0;i.PICTURE_HEIGHT_KOEF=.55;t.FreeChipsBg=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var n=t.call(this)||this;return n.init(),n}return __extends(i,t),Object.defineProperty(i.prototype,"tint",{set:function(n){this._topLabel.tint=n;this._bottomLabel.tint=n},enumerable:!0,configurable:!0}),i.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},i.prototype.setPosition=function(n,t){this.x=n;this.y=t;this.update()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._topLabel.destroy();this._bottomLabel.destroy()},i.prototype.init=function(){this._topLabel=new PIXI.Text(i.TOP_LABEL_TEXT,n.FontsHelper.Text.fontForFreeChipsPanelTopLabel);this.addChild(this._topLabel);this._bottomLabel=new PIXI.Text(i.BOTTOM_LABEL_TEXT,n.FontsHelper.Text.fontForFreeChipsPanelBottomLabel);this.addChild(this._bottomLabel)},i.prototype.update=function(){this._topLabel.style.fontSize=this._h*i.TOP_LABEL_FONT_SIZE_KOEF;this._bottomLabel.style.fontSize=this._h*i.BOTTOM_LABEL_FONT_SIZE_KOEF;this._topLabel.y=this._h*i.TOP_LABEL_TOP_OFFSET;this._bottomLabel.y=this._h*i.BOTTOM_LABEL_TOP_OFFSET;this._topLabel.x=this._w/2-this._topLabel.width/2;this._bottomLabel.x=this._w/2-this._bottomLabel.width/2},i}(PIXI.Container);i.TOP_LABEL_TEXT="WATCH TO";i.BOTTOM_LABEL_TEXT="GET MORE CHIPS";i.TOP_LABEL_TOP_OFFSET=.594;i.BOTTOM_LABEL_TOP_OFFSET=.696;i.TOP_LABEL_FONT_SIZE_KOEF=.082;i.BOTTOM_LABEL_FONT_SIZE_KOEF=.104;t.FreeChipsBody=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(i){var r=t.call(this,220,57)||this;return r._enabled=!0,r._colorUp=9635350,r._colorDisabled=8947848,r._colorDown=11601430,r._bg=new PIXI.Graphics,r._bg.beginFill(16777215),r._bg.drawRoundedRect(0,0,r._w,r._h,3),r._bg.endFill(),r._bg.tint=r._colorUp,r.addChild(r._bg),r._label=new PIXI.Text(i,n.FontsHelper.Text.fontForSelectTableButton),r.addChild(r._label),r}return __extends(i,t),Object.defineProperty(i.prototype,"currentState",{get:function(){return this._curState},enumerable:!0,configurable:!0}),i.prototype.onResize=function(){var n=this._w*i.SCALE_X_KOEF,t=this._h*i.SCALE_Y_KOEF,r=this._w*(1-2*i.SCALE_X_KOEF),u=this._h*(1-2*i.SCALE_Y_KOEF);this._bg.x=this._curState===i.STATE_DOWN?n:0;this._bg.y=this._curState===i.STATE_DOWN?t:0;this._bg.width=this._curState===i.STATE_DOWN?r:this._w;this._bg.height=this._curState===i.STATE_DOWN?u:this._h;this._label.style.fontSize=this._w*i.CAPTION_FONT_SIZE_KOEF;this._label.x=this._w/2-this._label.width/2;this._label.y=this._h/2-this._label.height/2},i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);this._curState===i.STATE_DISABLED?(this.buttonMode=!1,this._bg.tint=this._colorDisabled,this._label.alpha=.7):(this.buttonMode=!0,this._bg.tint=this._curState===i.STATE_DOWN?this._colorDown:this._colorUp,this._label.alpha=1);this.onResize()},i.prototype.setWidth=function(n,i){i===void 0&&(i=!1);t.prototype.setWidth.call(this,n,i);this.onResize()},i.prototype.setHeight=function(n,i){i===void 0&&(i=!1);t.prototype.setHeight.call(this,n,i);this.onResize()},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._bg.destroy();this._label.destroy()},i}(n.ButtonBase);i.CAPTION_FONT_SIZE_KOEF=.15;i.ICON_FONT_SIZE_KOEF=2.6;i.ICON_SIZE_KOEF=4;i.ICON_Y_OFFSET_KOEF=12;i.SCALE_X_KOEF=.025;i.SCALE_Y_KOEF=.075;t.SelectTableButton=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var n=t.call(this)||this;return n.NAME_LABEL_TOP_OFFSET=.05,n.TYPE_LABEL_TOP_OFFSET=.18,n.STAKES_TYPE_LABEL_LEFT_OFFSET=.09,n.STAKES_RANGE_LABEL_RIGHT_OFFSET=.09,n.STAKES_LABEL_TOP_OFFSET=.62,n.PICTURE_TOP_OFFSET=.26,n.PICTURE_X_OFFSET=.09,n.PICTURE_HEIGHT_KOEF=.329,n.BUY_IN_LABEL_TOP_OFFSET=.7,n.BUY_IN_LABEL_X_OFFSET=.09,n.NAME_FONT_SIZE_KOEF=.232,n.STAKES_FONT_SIZE_KOEF=.118,n.STAKES_RANGE_FONT_SIZE_KOEF=.101,n.BUY_IN_FONT_SIZE_KOEF=.118,n._name="",n._type="",n._stakesType="",n._stakesRange="",n._buyIn="",n._stakesLimitType=i.STAKES_MIN,n.init(),n}return __extends(i,t),i.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},i.prototype.setPosition=function(n,t){this.x=n;this.y=t;this.update()},Object.defineProperty(i.prototype,"name",{set:function(n){this._nameLabel.text=this._name=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{set:function(n){this._typeLabel.text=this._type=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stakesType",{set:function(n){this._stakesTypeLabel.text=this._stakesType=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stakesRange",{set:function(n){this._stakesRangeLabel.text=this._stakesRange=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buyIn",{set:function(n){this._buyInValueLabel.text=this._buyIn=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pictureTexture",{set:function(n){this._picture.texture=n},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){t.prototype.destroy.call(this);this._nameLabel.destroy();this._typeLabel.destroy();this._stakesTypeLabel.destroy();this._stakesRangeLabel.destroy();this._picture.destroy();this._buyInLabel.destroy();this._buyInValueLabel.destroy()},i.prototype.init=function(){this._stakesTypeLabel=new PIXI.Text(this._stakesType,n.FontsHelper.Text.fontForTableUnitBodyStakes);this._stakesTypeLabel.style.align="left";this.addChild(this._stakesTypeLabel);this._stakesRangeLabel=new PIXI.Text(this._stakesRange,n.FontsHelper.Text.fontForTableUnitBodyStakesRange);this._stakesRangeLabel.style.align="right";this.addChild(this._stakesRangeLabel);this._typeLabel=new PIXI.Text(this._type,n.FontsHelper.Text.fontForTableUnitBodyStakes);this._typeLabel.style.align="center";this.addChild(this._typeLabel);this._nameLabel=new PIXI.Text(this._name,n.FontsHelper.Text.fontForTableUnitBodyName);this._nameLabel.style.align="center";this.addChild(this._nameLabel);this._buyInLabel=new PIXI.Text("BUY-IN",n.FontsHelper.Text.fontForTableUnitBodyStakes);this._buyInLabel.style.align="left";this.addChild(this._buyInLabel);this._buyInValueLabel=new PIXI.Text(this._buyIn,n.FontsHelper.Text.fontForTableUnitBodyStakesRange);this._buyInValueLabel.style.align="right";this.addChild(this._buyInValueLabel);this._picture=new PIXI.Sprite;this.addChild(this._picture)},i.prototype.toggleStakesLimitType=function(n){this._stakesLimitType=n},i.prototype.update=function(){this._nameLabel.style.fontSize=this._w*this.NAME_FONT_SIZE_KOEF;this._typeLabel.style.fontSize=this._w*this.STAKES_FONT_SIZE_KOEF;this._stakesTypeLabel.style.fontSize=this._w*this.STAKES_FONT_SIZE_KOEF;this._stakesRangeLabel.style.fontSize=this._w*this.STAKES_RANGE_FONT_SIZE_KOEF;this._buyInLabel.style.fontSize=this._w*this.STAKES_FONT_SIZE_KOEF;this._buyInValueLabel.style.fontSize=this._w*this.STAKES_RANGE_FONT_SIZE_KOEF;this._stakesTypeLabel.x=this._w*this.STAKES_TYPE_LABEL_LEFT_OFFSET;this._stakesRangeLabel.x=this._w*(1-this.STAKES_RANGE_LABEL_RIGHT_OFFSET)-this._stakesRangeLabel.width;this._picture.x=this._w*this.PICTURE_X_OFFSET;this._nameLabel.y=this._h*this.NAME_LABEL_TOP_OFFSET;this._typeLabel.y=this._h*this.TYPE_LABEL_TOP_OFFSET;this._stakesRangeLabel.y=this._stakesTypeLabel.y=this._h*this.STAKES_LABEL_TOP_OFFSET;this._picture.y=this._h*this.PICTURE_TOP_OFFSET;this._nameLabel.x=this._w/2-this._nameLabel.width/2;this._typeLabel.x=this._w/2-this._typeLabel.width/2;this._picture.width=this._w*(1-2*this.PICTURE_X_OFFSET);this._picture.height=this._h*this.PICTURE_HEIGHT_KOEF;this._buyInLabel.y=this._buyInValueLabel.y=this._h*this.BUY_IN_LABEL_TOP_OFFSET;this._buyInLabel.x=this._w*this.BUY_IN_LABEL_X_OFFSET;this._buyInValueLabel.x=this._w*(1-this.BUY_IN_LABEL_X_OFFSET)-this._buyInValueLabel.width},i}(PIXI.Container);i.STAKES_MIN=Symbol();i.STAKES_MAX=Symbol();t.TableUnitBody=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(i){function r(n){var t=i.call(this,270,440)||this;return t.BORDER_OFFSET_X_KOEF=.041,t.BORDER_OFFSET_Y_KOEF=.027,t.SHADOW_OFFSET_KOEF=.02,t._patternSprites=[],t._onChangeStateCallback=n,t._bgSprite=new PIXI.Sprite,t.addChild(t._bgSprite),t.fillByPattern(),t._border=new PIXI.Graphics,t.addChild(t._border),t}return __extends(r,i),Object.defineProperty(r.prototype,"currentState",{get:function(){return this._curState},enumerable:!0,configurable:!0}),r.prototype.setPosition=function(n,t){this.x=n;this.y=t},r.prototype.setSize=function(n,t){this._w=n;this._h=t;this.update()},r.prototype.destroy=function(){i.prototype.destroy.call(this)},r.prototype.onChangeState=function(){i.prototype.onChangeState.call(this);this._curState===t.SelectTableButton.STATE_DISABLED?(this.buttonMode=!1,this._bgSprite.tint=r.DISABLED_TINT_COLOR,this.__mask.tint=r.DISABLED_TINT_COLOR,this._border.tint=r.DISABLED_TINT_COLOR,this._bgSprite.alpha=.9,this._border.alpha=.9,this._patternsContainer.alpha=.45):(this.buttonMode=!0,this._bgSprite.tint=r.ENABLED_TINT_COLOR,this.__mask.tint=r.ENABLED_TINT_COLOR,this._border.tint=r.ENABLED_TINT_COLOR,this._bgSprite.alpha=1,this._border.alpha=1,this._patternsContainer.alpha=1);this._onChangeStateCallback()},r.prototype.drawBorder=function(){this._border.clear();this._border.lineStyle(2,15250797);this._border.drawRoundedRect(this._w*this.BORDER_OFFSET_X_KOEF,this._h*this.BORDER_OFFSET_Y_KOEF,this._w*(1-this.BORDER_OFFSET_X_KOEF*2),this._h*(1-this.BORDER_OFFSET_Y_KOEF*2-this.SHADOW_OFFSET_KOEF),10)},r.prototype.update=function(){this.cacheAsBitmap=!1;this._bgSprite.texture=n.Resources.getTexture(r.BG_TEXTURE_NAME,{width:this._w,drawNewTexture:!0},"unit_bg");this._bgSprite.width=this._w;this._bgSprite.height=this._h;this.resizePatternSprites();this.resizeMask();this.drawBorder();this.cacheAsBitmap=!0},r.prototype.fillByPattern=function(){var e,i,u,f,t;for(this._patternsContainer=new PIXI.Container,this.__mask=new PIXI.Sprite,this._patternsContainer.mask=this.__mask,this._patternsContainer.addChild(this.__mask),this.addChild(this._patternsContainer),e=n.Resources.getTexture(r.BG_PATTERN_TEXTURE_NAME),i=0;i<r.BG_PATTERN_COUNT_BY_Y;i++)for(u=[],this._patternSprites.push(u),f=0;f<r.BG_PATTERN_COUNT_BY_X;f++)t=new PIXI.Sprite(e),t.alpha=1,u.push(t),this._patternsContainer.addChild(t)},r.prototype.resizePatternSprites=function(){for(var e,i,u,l=n.Resources.getTexture(r.BG_PATTERN_TEXTURE_NAME),o=n.Resources.getOrigSize(l.baseTexture),f=r.BG_PATTERN_WIDTH_KOEF*this._w,s=o.height*f/o.width,h=0,c=0,t=0;t<this._patternSprites.length;t++)for(e=this._patternSprites[t],c=(t-1)*s*.4,i=0;i<e.length;i++)u=e[i],h=i*f*1.5+(t%2-1)*f*.75,u.x=h,u.y=c,u.width=f,u.height=s},r.prototype.resizeMask=function(){this.__mask.texture=this._bgSprite.texture;this.__mask.width=this._w;this.__mask.height=this._h*.98},r}(n.ButtonBase);i.BG_TEXTURE_NAME="lobby/table_unit_bg";i.BG_PATTERN_TEXTURE_NAME="lobby/table_unit_bg_pattern";i.BG_PATTERN_WIDTH_KOEF=.13;i.BG_PATTERN_COUNT_BY_X=8;i.BG_PATTERN_COUNT_BY_Y=13;i.DISABLED_TINT_COLOR=15658734;i.ENABLED_TINT_COLOR=16777215;t.TableUnitBg=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var n=t.call(this)||this;return n.STAR_WIDTH_KOEF=.4,n.TEXT_OFFSET_LEFT_KOEF=.35,n.TEXT_OFFSET_TOP_KOEF=.05,n.TEXT_SIZE_KOEF=.25,n._w=110,n._h=30,n._level=1,n.init(),n}return __extends(i,t),Object.defineProperty(i.prototype,"level",{get:function(){return this._level},set:function(n){this._level=n;this._text.text="Lv. "+n},enumerable:!0,configurable:!0}),i.prototype.setWidth=function(n){this._h*=n/this._w;this._w=n;this._star.height=this._h;this._star.width=this._h;this._text.style.fontSize=n*this.TEXT_SIZE_KOEF;this._text.x=this._w*this.TEXT_OFFSET_LEFT_KOEF;this._text.y=this._h*this.TEXT_OFFSET_TOP_KOEF},i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._star.destroy();this._text.destroy()},i.prototype.init=function(){this._star=new PIXI.Sprite(n.Resources.getTexture("lobby/star"));this.addChild(this._star);this._text=new PIXI.Text("Lv. "+this._level,n.FontsHelper.Text.fontForLevelBar);this.addChild(this._text)},i}(PIXI.Container);t.LevelBar=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var n=t.call(this)||this;return n._w=180,n._h=18,n._progress=0,n.RADIUS_KOEF=.06,n.WHOLE_COLOR=0,n.PROGRESS_COLOR=7132491,n.MIN_PROGRESS=.09,n.init(),n}return __extends(i,t),Object.defineProperty(i.prototype,"progress",{get:function(){return this._progress},set:function(t){n.Tweener.to(this,1,{_progress:t,onUpdate:this.drawProgressLine,onUpdateScope:this,onComplete:this.drawProgressLine,onCompleteScope:this})},enumerable:!0,configurable:!0}),i.prototype.setWidth=function(n){this._h*=n/this._w;this._w=n;this.drawProgressLine();this.drawWholeLine()},i.prototype.setPosition=function(n,t){this.x=n;this.y=t},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._wholeLine.destroy();this._progressLine.destroy()},i.prototype.init=function(){this._wholeLine=new PIXI.Graphics;this._wholeLine.position.set(0,0);this.drawWholeLine();this.addChild(this._wholeLine);this._progressLine=new PIXI.Graphics;this._progressLine.position.set(0,0);this.drawProgressLine();this.addChild(this._progressLine)},i.prototype.drawWholeLine=function(){var n=this._w,t=this._h,i=this._w*this.RADIUS_KOEF;this._wholeLine.clear();this._wholeLine.lineStyle(0);this._wholeLine.beginFill(this.WHOLE_COLOR,1);this._wholeLine.drawRoundedRect(0,0,n,t,i);this._wholeLine.endFill()},i.prototype.drawProgressLine=function(){var n=this._w*Math.max(this._progress,this.MIN_PROGRESS),t=this._h,i=this._w*this.RADIUS_KOEF;this._progressLine.clear();this._progressLine.lineStyle(0);this._progressLine.beginFill(this.PROGRESS_COLOR,1);this._progressLine.drawRoundedRect(0,0,n,t,i);this._progressLine.endFill()},i}(PIXI.Container);t.ProgressBar=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(i){function r(){var n=i.call(this)||this;return n.BUTTON_WIDTH_KOEF=.82,n.BUTTON_HEIGHT_KOEF=.13,n.BUTTON_TOP_OFFSET=.78,n.BUTTON_LEFT_OFFSET=.09,n.SCALE_X_KOEF=.016,n.SCALE_Y_KOEF=.01,n._w=270,n._h=440,n._buttonClicked=!1,n.init(),n}return __extends(r,i),Object.defineProperty(r.prototype,"available",{set:function(n){this._bg.disabled=!n;this._button.disabled=!n;this._body.alpha=n?1:.9},enumerable:!0,configurable:!0}),r.prototype.setWidth=function(n){this._h*=n/this._w;this._w=n;this.update()},r.prototype.setPosition=function(n,t){this.x=n;this.y=t;this.update()},r.prototype.setParams=function(t){this.name=t.name||"-";this.type=t.type||"-";this.stakesType=t.stakesType?(i={},i[n.StakesType.STAKES]="STAKES",i[n.StakesType.BUY_IN]="BUY IN",i)[t.stakesType]:"-";this.stakesRange=t.smallBlind==undefined?"-":"$"+n.StringHelper.shortenNumber(t.smallBlind)+(t.bigBlind&&"/"+n.StringHelper.shortenNumber(t.bigBlind)||"");this.pictureTexture=n.Resources.getTexture("lobby/table_unit_picture/"+(t.avatarId||1));var i},r.prototype.updateBuyIn=function(t){this.buyIn=t?"$"+n.StringHelper.shortenNumber(t):"?"},Object.defineProperty(r.prototype,"name",{set:function(n){this._body.name=n},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"type",{set:function(n){this._body.type=n},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stakesType",{set:function(n){this._body.stakesType=n},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stakesRange",{set:function(n){this._body.stakesRange=n},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"buyIn",{set:function(n){this._body.buyIn=n},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pictureTexture",{set:function(n){this._body.pictureTexture=n},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isNeedToScale",{get:function(){return this._bg.currentState===t.TableUnitBg.STATE_DOWN},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualX",{get:function(){return this.isNeedToScale&&this._w*this.SCALE_X_KOEF||0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualY",{get:function(){return this.isNeedToScale&&this._h*this.SCALE_Y_KOEF||0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualWidth",{get:function(){return this.isNeedToScale&&this._w*(1-2*this.SCALE_X_KOEF)||this._w},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualHeight",{get:function(){return this.isNeedToScale&&this._h*(1-2*this.SCALE_Y_KOEF)||this._h},enumerable:!0,configurable:!0}),r.prototype.destroy=function(){i.prototype.destroy.call(this);this._bg.destroy();this._button.destroy();this._body.destroy()},r.prototype.init=function(){var n=this;this._bg=new t.TableUnitBg(function(){return n.update()});this._bg.on(t.TableUnitBg.EVENT_CLICK,function(){n._buttonClicked||n.emit(r.EVENT_SELECT_TABLE);n._buttonClicked=!1},this);this.addChild(this._bg);this._button=new t.SelectTableButton("PLAY NOW");this._button.on(t.SelectTableButton.EVENT_CLICK,function(){n.emit(r.EVENT_SELECT_TABLE_WITH_SETTINGS);n._buttonClicked=!0},this);this.addChild(this._button);this._body=new t.TableUnitBody;this.addChild(this._body)},r.prototype.update=function(){var i=this.actualX,r=this.actualY,n=this.actualWidth,t=this.actualHeight;this._bg.setPosition(i,r);this._bg.setSize(n,t);this._button.x=n*(this.BUTTON_LEFT_OFFSET+(this.isNeedToScale&&this.SCALE_X_KOEF||0));this._button.y=t*(this.BUTTON_TOP_OFFSET+(this.isNeedToScale&&this.SCALE_Y_KOEF||0));this._button.setWidth(n*this.BUTTON_WIDTH_KOEF);this._button.setHeight(t*this.BUTTON_HEIGHT_KOEF);this._body.setPosition(i,r);this._body.setSize(n,t)},r}(PIXI.Container);i.EVENT_SELECT_TABLE="SELECT_TABLE";i.EVENT_SELECT_TABLE_WITH_SETTINGS="SELECT_TABLE_WITH_SETTINGS";t.TableUnit=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this;return i.LEVEL_BAR_LEFT_OFFSET=.41,i.LEVEL_BAR_TOP_OFFSET=.18,i.LEVEL_BAR_WIDTH_KOEF=.3,i.PROGRESS_BAR_BOTTOM_OFFSET=.4,i.PROGRESS_BAR_LEFT_OFFSET=.42,i.PROGRESS_BAR_WIDTH_KOEF=.45,i.AVATAR_WIDTH_KOEF=.38,i._w=145,i._h=50,i._avatar=new n.Avatar,i.addChild(i._avatar),i._progressBar=new n.ProgressBar,i.addChild(i._progressBar),i._levelBar=new n.LevelBar,i.addChild(i._levelBar),i}return __extends(i,t),i.prototype.setWidth=function(n){this._h*=n/this._w;this._w=n;this.update()},i.prototype.setPosition=function(n,t){this.x=n;this.y=t},Object.defineProperty(i.prototype,"avatarSource",{set:function(n){this._avatar.setAvatarSource(n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"level",{set:function(n){this._levelBar.level=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"progress",{set:function(n){this._progressBar.progress=n},enumerable:!0,configurable:!0}),i.prototype.update=function(){this._avatar.setWidth(this._h);this._progressBar.setWidth(this._w*this.PROGRESS_BAR_WIDTH_KOEF);this._levelBar.setWidth(this._w*this.LEVEL_BAR_WIDTH_KOEF);this._progressBar.setPosition(this._w*this.PROGRESS_BAR_LEFT_OFFSET,this._h*(1-this.PROGRESS_BAR_BOTTOM_OFFSET));this._levelBar.setPosition(this._w*this.LEVEL_BAR_LEFT_OFFSET,this._h*this.LEVEL_BAR_TOP_OFFSET)},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._avatar.destroy();this._progressBar.destroy();this._levelBar.destroy()},i}(PIXI.Container);n.UserPanel=t})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(){var t=n.call(this)||this;return t._radius=50,t._source="",t._sprite=new PIXI.Sprite,t.addChild(t._sprite),t._circleMask=new PIXI.Graphics,t.drawMask(),t._sprite.mask=t._circleMask,t.addChild(t._circleMask),t}return __extends(t,n),t.prototype.setAvatarSource=function(n){this._source!=n&&(this._source=n,this._sprite.texture=PIXI.Texture.from(n),this._sprite.texture.baseTexture.scaleMode=PIXI.SCALE_MODES.NEAREST)},t.prototype.setWidth=function(n){this._radius=n/2;this._sprite.width=n;this._sprite.height=n;this.drawMask()},t.prototype.drawMask=function(){this._circleMask.clear();this._circleMask.lineStyle(0);this._circleMask.beginFill(16777215,1);this._circleMask.drawCircle(this._radius,this._radius,this._radius);this._circleMask.endFill()},t.prototype.destroy=function(){n.prototype.destroy.call(this);this._sprite.destroy();this._circleMask.destroy()},t}(PIXI.Container);n.Avatar=t})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t;(function(t){var i=function(t){function i(){var r=t.call(this)||this;return r._w=50,r._h=50,r._patternSprites=[],r._bgSprite=new PIXI.Sprite(n.Resources.getTexture(i.BG_TEXTURE_NAME)),r.addChild(r._bgSprite),r.__mask=new PIXI.Graphics,r._bgSprite.mask=r.__mask,r.addChild(r.__mask),r.fillByPattern(),r}return __extends(i,t),i.prototype.setSize=function(t,r){this._w=t;this._h=r;var u=n.Resources.getOrigSize(this._bgSprite.texture.baseTexture),e=u.width/u.height,o=this._w/this._h,s=e<o,f=s?this._w/u.width:this._h/u.height;this._bgSprite.texture=n.Resources.getTexture(i.BG_TEXTURE_NAME,{scale:f});this._bgSprite.width=u.width*f;this._bgSprite.height=u.height*f;this.drawMask();this.resizePatternSprites()},i.prototype.destroy=function(){t.prototype.destroy.call(this)},i.prototype.fillByPattern=function(){for(var r,u,t,e=n.Resources.getTexture(i.BG_PATTERN_TEXTURE_NAME),f=0;f<i.BG_PATTERN_COUNT_BY_Y;f++)for(r=[],this._patternSprites.push(r),u=0;u<i.BG_PATTERN_COUNT_BY_X;u++)t=new PIXI.Sprite(e),t.tint=0,t.alpha=.15,r.push(t),this.addChild(t)},i.prototype.resizePatternSprites=function(){for(var e,r,u,c=n.Resources.getTexture(i.BG_PATTERN_TEXTURE_NAME),l=n.Resources.getOrigSize(c.baseTexture),f=i.BG_PATTERN_WIDTH_KOEF*this._bgSprite.width,o=f,s=0,h=0,t=0;t<this._patternSprites.length;t++)for(e=this._patternSprites[t],h=(t-1)*o*1.25/2,r=0;r<e.length;r++)u=e[r],s=r*f*1.25+(t%2-1)*f*1.25/2,u.x=s,u.y=h,u.width=f,u.height=o},i.prototype.drawMask=function(){this.__mask.clear();this.__mask.beginFill(0);this.__mask.drawRect(0,0,this._w,this._h);this.__mask.endFill()},i}(PIXI.Container);i.BG_TEXTURE_NAME="lobby/bg";i.BG_PATTERN_TEXTURE_NAME="lobby/bg_pattern";i.BG_PATTERN_WIDTH_KOEF=.095;i.BG_PATTERN_COUNT_BY_X=17;i.BG_PATTERN_COUNT_BY_Y=12;t.Bg=i})(t=n.Lobby||(n.Lobby={}))})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this;return i.KOEF_CARDS_OFFSET_X=.25,i.KOEF_CARDS_OFFSET_Y=-.15,i._cardsCont=new PIXI.Container,i.addChild(i._cardsCont),i._cardsMask=new PIXI.Graphics,i.addChild(i._cardsMask),i._cardsCont.mask=i._cardsMask,i._card1=new n.BoardCard,i._card1.visible=!1,i._card1.rotation=Math.PI/-12,i._cardsCont.addChild(i._card1),i._card2=new n.BoardCard,i._card2.visible=!1,i._card2.rotation=Math.PI/12,i._cardsCont.addChild(i._card2),i._gradientLine=new PIXI.Sprite(n.Resources.getTexture("gradient_line")),i.addChild(i._gradientLine),i}return __extends(i,t),i.prototype.showCards=function(n,i){t.prototype.showCards.call(this,n,i);this._card1.visible=!0;this._card2.visible=!0},i.prototype.setSize=function(i){var r;t.prototype.setSize.call(this,i);var u=n.Resources.getOrigSize(this._gradientLine.texture.baseTexture),f=i/u.width,e=new PIXI.Rectangle(0,0,i,u.height*f);this._gradientLine.texture=n.Resources.scaleTexture(this._gradientLine.texture,{scale:f,returnNewTexture:!0});this._gradientLine.width=e.width;this._gradientLine.height=e.height;this._gradientLine.x=-this._gradientLine.width/2;this._gradientLine.y=-this._gradientLine.height;this._cardsMask.clear();this._cardsMask.beginFill(16711680);this._cardsMask.drawRect(0,0,i*1.2,i*1.2);this._cardsMask.x=-this._cardsMask.width/2;this._cardsMask.y=-this._cardsMask.height-3;this._card1.setWidth(i/2);this._card2.setWidth(i/2);r=this._card1.getWidth()*this.KOEF_CARDS_OFFSET_X;this._card1.x=-r;this._card2.x=r;r=this._card1.getHeight()*this.KOEF_CARDS_OFFSET_Y;this._card1.y=r;this._card2.y=r},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._gradientLine.destroy();this._cardsCont.destroy();this._cardsMask.destroy()},i}(n.PlayerCardsBase);n.MyCards=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(i,r){r===void 0&&(r=!0);var u=t.call(this)||this;return u._waitBetSoundsLeft=!1,u._startWaitBet=0,u._avatarSize=50,u._waitTime=1,u._mUser=i,u._cont=new PIXI.Container,u.addChild(u._cont),u._avatar=new PIXI.Sprite,u._defaultAvatar=new n.DefaultAvatar,u._cont.addChild(u._defaultAvatar),u._cont.addChild(u._avatar),u._avatarTimeCounter=new n.AvatarTimeCounter,u._cont.addChild(u._avatarTimeCounter),u._avatarMask=new PIXI.Graphics,u._cont.addChild(u._avatarMask),u._avatar.mask=u._avatarMask,u._tfStack=new n.Text("$"+u._mUser.stack,n.FontsHelper.Text.fontWhite10),u._tfStack.anchor.set(.5,0),u._cont.addChild(u._tfStack),u._bet=new n.PlayerBet,u._bet.visible=!1,u.betExpantToRight=r,u.addChild(u._bet),u._dealerIcon=new PIXI.Sprite(n.Resources.getTexture("icon_dealer")),u.addChild(u._dealerIcon),u.dealer=!1,u._avatarTimeCounter.visible=!1,u._winBackEffect=new n.WinPlayerBGEffect,u._cont.addChild(u._winBackEffect),u._winnerLabel=new n.WinLabel,u._winnerLabel.visible=!1,u.addChild(u._winnerLabel),u.hideWinAnimation(),u.updateInfo(),u}return __extends(i,t),i.setDealerIconSize=function(n){i._dealerIconSize=n},Object.defineProperty(i.prototype,"dealer",{set:function(n){this._dealerIcon.visible=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"betExpantToRight",{set:function(n){this._bet.expandToRight=n},enumerable:!0,configurable:!0}),i.prototype.setAvatarSize=function(t){this._avatarSize=t;this._avatar.width=this._avatarSize;this._avatar.height=this._avatarSize;this._avatar.x=-this._avatarSize/2;this._avatar.y=-this._avatarSize/2;this._defaultAvatar.x=-this._avatarSize/2;this._defaultAvatar.y=-this._avatarSize/2;this._defaultAvatar.setAvatarSize(this._avatarSize);this._avatarMask.clear();this._avatarMask.beginFill(0);this._avatarMask.drawCircle(this._avatarSize/2,this._avatarSize/2,this._avatarSize/2);this._avatarMask.x=this._avatar.x;this._avatarMask.y=this._avatar.y;this._avatarTimeCounter.setRadius(this._avatarSize/2);this._avatarTimeCounter.x=this._avatar.x;this._avatarTimeCounter.y=this._avatar.y;this._bet.resize();this._dealerIcon.texture=n.Resources.scaleTexture(this._dealerIcon.texture,{height:i._dealerIconSize});this._dealerIcon.width=this._dealerIcon.height=i._dealerIconSize},Object.defineProperty(i.prototype,"stackPos",{get:function(){return this._tfStack.position},enumerable:!0,configurable:!0}),i.prototype.showCards=function(){this._cards.showCards(this._mUser.card1,this._mUser.card2);this._cards.visible=!0},i.prototype.hideCards=function(){this._cards.visible=!1;this._cards.hideCards()},i.prototype.updateWinState=function(n){this._mUser.winner?(this.showWinAnimation(n.comb),this.highlightCards(n.cards,n.kickers)):(this.hideWinAnimation(),this.highlightCards([],[]))},i.prototype.highlightCards=function(n,t){var i=n.concat(t);this._cards.highlightCards(i)},i.prototype.showWinAnimation=function(t){this._cont.addChild(this._cards);this._winnerLabel.text=n.HandRankCombination[t];this._winBackEffect.show()},i.prototype.hideWinAnimation=function(){this._winBackEffect.hide()},i.prototype.waitBet=function(t){n.Tweener.killDelayedCallsTo(this.updateProgress,this);this._waitTime=t;this._avatarTimeCounter.visible=!0;this.progress=0;this._waitBetSoundsLeft=!1;this._startWaitBet=(new Date).getTime();this.updateProgress()},i.prototype.updateProgress=function(){var t=(new Date).getTime()-this._startWaitBet,i=Math.min(t/(this._waitTime*1e3),.999);this.progress=i;n.Tweener.delayedCall(1/50,this.updateProgress,null,this)},i.prototype.clearWaiting=function(){n.Tweener.killDelayedCallsTo(this.updateProgress,this);this._avatarTimeCounter.visible=!1;this._avatarTimeCounter.clearGraphics()},i.prototype.updateInfo=function(t){var i,r;t===void 0&&(t={isWaitForPlayers:!1,updateStack:!0,updateBetInfo:!0,updateBetVisible:!0,updateBetExpanded:!0});this.updatePhoto();this._defaultAvatar.username=this._mUser.name;this._mUser.isMe&&(i=this._mUser,this._defaultAvatar.level=i.level);t.updateStack&&(r=this._mUser.state===n.MUser.STATE_WAIT,r?(this.hideStack(),this._mUser.isMe&&!t.isWaitForPlayers&&this.showNextHandLabel()):(this.showStack(),this._mUser.isMe&&this.hideNextHandLabel(),this.setStack(this._mUser.stack)));t.updateBetInfo&&(this.setBetText("$"+this._mUser.bet),this.setBetType(n.MBet.getTypeByAction(this._mUser.betAction)),this.updateFoldActionView());t.updateBetVisible&&this.updateBetVisible();t.updateBetExpanded&&this.betExpandOrCollapse(!1)},i.prototype.showNextHandLabel=function(){},i.prototype.hideNextHandLabel=function(){},i.prototype.showStack=function(){this._tfStack.visible=!0},i.prototype.hideStack=function(){this._tfStack.visible=!1},i.prototype.updatePhoto=function(){this._mUser.photo!=this._photo&&(this._avatar.texture=PIXI.Texture.from(this._mUser.photo));this._defaultAvatar.visible=!this._avatar.texture.valid;this._avatar.visible=this._avatar.texture.valid},i.prototype.updateBetVisible=function(){this._bet.visible=this._mUser.betAction!=n.MBet.ACTION_NONE},i.prototype.updateFoldActionView=function(){if(this._mUser.folded){var t=new PIXI.filters.ColorMatrixFilter;t.brightness(.5);this._cont.filters=[t];n.Tweener.to(this._cont.scale,.5,{x:.8,y:.8})}else this._cont.filters=[],n.Tweener.to(this._cont.scale,.5,{x:1,y:1})},i.prototype.betExpand=function(n){n===void 0&&(n=!1);this._bet.expand(!0,n)},i.prototype.betCollapse=function(n){n===void 0&&(n=!1);this._bet.expand(!1,n)},i.prototype.betExpandOrCollapse=function(t){t===void 0&&(t=!1);this._mUser.betAction!=n.MBet.ACTION_NONE&&this._mUser.bet>0?this.betExpand(t):this.betCollapse(t)},i.prototype.setStack=function(n){this._tfStack.text=n&&"$"+n||"All In"},i.prototype.setBetType=function(n){this._bet.setIcon(n)},i.prototype.setBetText=function(n){this._bet.setText(n)},i.prototype.cloneChip=function(){return this._mUser.bet==0?null:this._bet.getClonedSprite()},Object.defineProperty(i.prototype,"progress",{get:function(){return this._avatarTimeCounter.progress},set:function(n){this._avatarTimeCounter.progress=n},enumerable:!0,configurable:!0}),i.prototype.getSize=function(){return this._avatarSize},Object.defineProperty(i.prototype,"userId",{get:function(){return this._mUser.id},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"seatId",{get:function(){return this._mUser.seatId},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"waitNewGame",{get:function(){return this._mUser.state==n.MUser.STATE_WAIT},enumerable:!0,configurable:!0}),i.prototype.destroy=function(){t.prototype.destroy.call(this);this._cont.filters=null;n.Tweener.killTweensOf(this._cont.scale);this._cont.destroy();n.Tweener.killDelayedCallsTo(this.updateProgress,this);this._avatar.destroy();this._avatarTimeCounter.destroy();this._defaultAvatar.destroy();this._avatarMask.destroy();this._tfStack.destroy();this._bet.destroy();this._dealerIcon&&this._dealerIcon.destroy();this._cards&&this._cards.destroy();this._winBackEffect&&this._winBackEffect.destroy();this._winnerLabel&&this._winnerLabel.destroy()},i}(PIXI.Container);t._dealerIconSize=10;t._waitBetSoundsStart=1500;n.PlayerBase=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(i){var r=t.call(this,i,!0)||this;return r.WAIT_FOR_NEXT_HAND_LABEL_FONT_SIZE_KOEF=.12,r.WAIT_FOR_NEXT_HAND_LABEL_TOP_OFFSET_KOEF=.88,r._waitForNextHandLabel=new n.Text("PLEASE WAIT FOR THE NEXT HAND...",n.FontsHelper.Text.fontForNextHandLabel),r._waitForNextHandLabel.visible=!1,r._waitForNextHandLabel.anchor.set(.5,.5),r._cont.addChild(r._waitForNextHandLabel),r._cards=new n.MyCards,r._cont.addChild(r._cards),r.hideCards(),r}return __extends(i,t),i.prototype.showNextHandLabel=function(){this._waitForNextHandLabel&&(this._waitForNextHandLabel.visible=!0)},i.prototype.hideNextHandLabel=function(){this._waitForNextHandLabel&&(this._waitForNextHandLabel.visible=!1)},i.prototype.setAvatarSize=function(n){t.prototype.setAvatarSize.call(this,n);this._bet.y=-this._avatarSize/2-this._bet.height-this._bet.getIconSize()/2;this._cards.setSize(this._avatar.width*1.3);this._cards.x=0;this._cards.y=this._avatar.height/2+this._avatar.height*.3;this._tfStack.fontSize=this._avatar.height/5;this._tfStack.y=this._cards.y+this._avatar.height/20;this._dealerIcon.x=-this._avatarSize/1.3;this._dealerIcon.y=-this._avatarSize/1.7;this._winnerLabel.setWidth(n);this._winnerLabel.x=-n*.5;this._winnerLabel.y=this._avatar.position.y;this._winBackEffect.setWidth(n);this._winBackEffect.position.set(0,0);this._waitForNextHandLabel.fontSize=this._avatar.height/4;this._waitForNextHandLabel.y=this._tfStack.y},i.prototype.updateProgress=function(){t.prototype.updateProgress.call(this);var i=this._waitTime*1e3-((new Date).getTime()-this._startWaitBet);!this._waitBetSoundsLeft&&i<n.PlayerBase._waitBetSoundsStart&&(n.trace("Sounds.play(SoundsHelper.TURN_TIMER_TICK)"),this._waitBetSoundsLeft=!0,n.Sounds.play(n.SoundsHelper.TURN_TIMER_TICK))},i.prototype.destroy=function(){t.prototype.destroy.call(this)},i}(n.PlayerBase);n.MyPlayer=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this;return i._radius=50,i._lastLightShowTime=0,i._newDelayForLightShow=0,i._lastProgress=1e3,i._progress=0,i._lightsCont=new PIXI.particles.ParticleContainer(20,{alpha:!0,vertices:!0,rotation:!0,scale:!0,position:!0}),i.addChild(i._lightsCont),i._mainLight=new PIXI.Sprite(n.Resources.getTexture("light")),i._mainLight.anchor.set(.5,.5),i._lightsCont.addChild(i._mainLight),i}return __extends(i,t),i.getCurColor=function(n,t,i){var r=n>>16&255,u=n>>8&255,f=n&255,h=t>>16&255,c=t>>8&255,l=t&255,e,o,s;return e=r+i*255*(h-r)/255,o=u+i*255*(c-u)/255,s=f+i*255*(l-f)/255,e<<16|o<<8|s},i.prototype.getRadius=function(){return this._radius},i.prototype.setRadius=function(n){this._radius=n;this._mainLightBaseSize=this._radius*1.3;this._lightBaseSize=this._mainLightBaseSize/2.7;this._mainLight.width=this._mainLight.height=this._mainLightBaseSize},Object.defineProperty(i.prototype,"progress",{get:function(){return this._progress},set:function(t){var f,r,e,u;this._progress=t;f=i.getCurColor(i.FROM_COLOR,i.TO_COLOR,this._progress);r=t*Math.PI*2%(Math.PI*2)-Math.PI/2;this.clear();this.beginFill(f,.3);this.moveTo(this._radius,this._radius);this.arc(this._radius,this._radius,this._radius,-Math.PI/2,r);this.endFill();this.lineStyle(4,f,.9);this.moveTo(this._radius,0);this.arc(this._radius,this._radius,this._radius,-Math.PI/2,r);this._mainLight.x=-Math.sin(r-Math.PI/2)*this._radius+this._radius;this._mainLight.y=Math.cos(r-Math.PI/2)*this._radius+this._radius;this._mainLight.rotation=r*1.5;t<this._lastProgress&&(this._mainLight.width=this._mainLight.height=this._mainLightBaseSize*1,n.Tweener.killTweensOf(this._mainLight),e=new TimelineLite,e.to(this._mainLight,.2,{width:this._mainLightBaseSize*1.5,height:this._mainLightBaseSize*1.5}),e.to(this._mainLight,1.2,{width:this._mainLightBaseSize*1,height:this._mainLightBaseSize*1}));(new Date).getTime()-this._lastLightShowTime>this._newDelayForLightShow&&(this._newDelayForLightShow=120+Math.random()*360,this._lastLightShowTime=(new Date).getTime(),u=n.Light.alloc(),u.init(.3,this._lightBaseSize),u.x=-Math.sin(r-Math.PI/2-.2)*this._radius+this._radius,u.y=Math.cos(r-Math.PI/2-.2)*this._radius+this._radius,this._lightsCont.addChild(u));this._lastProgress=t},enumerable:!0,configurable:!0}),i.prototype.clearGraphics=function(){this.clear();this._lastProgress=1e3},i.prototype.destroy=function(){n.Tweener.killTweensOf(this._mainLight);this._lightsCont.destroy();this._mainLight.destroy()},i}(PIXI.Graphics);t.FROM_COLOR=65280;t.TO_COLOR=16711680;n.AvatarTimeCounter=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this,u,r;for(i.MY_PLAYER_HEIGHT_KOEF=.22,i.PLAYER_HEIGHT_KOEF=.17,i.TABLE_HEIGHT_KOEF=.43,i.TABLE_WIDTH_KOEF=.63,i.TABLE_TOP_OFFSET_KOEF=.25,i.PLAYERS_IN_TOP_OFFSET_X=.08,i.DELAY_GIVE_OUT_CARDS=.2,i.DEALER_COORDS=new PIXI.Point(.5,.05),i._seats=[1,2,3,4,5],i._w=50,i._h=50,i._players=[],i._tableRect=new PIXI.Rectangle(0,0,10,10),i._dealerCoords=new PIXI.Point,i._places=[],i._placesHash={},r=0;r<i._seats.length;r++)u=new n.TablePlace(r),u.setSeat(i._seats[r]),i._places.push(u),i.addChild(u);return i.setSeats(i._seats),i._potBet=new n.PlayerBet,i._potBet.expand(!0,!0),i._potBet.setIcon(n.MBet.TYPE_CHIP),i.hidePot(),i.addChild(i._potBet),i}return __extends(i,t),i.prototype.setSeats=function(n){var t,i,r;for(this._seats=n,this._placesHash={},t=0;t<this._seats.length;t++)i=this.getPlaceBySeat(this._seats[t]),i&&(i.setIndex(t),i.setSeat(this._seats[t]));for(t=0;t<this._places.length;t++)this._placesHash[this._places[t].seatId]=this._places[t];for(r=0;r<this._places.length;r++)this._places[r].resize()},i.prototype.getPlaceBySeat=function(n){for(var t=0;t<this._places.length;t++)if(this._places[t].seatId==n)return this._places[t];return null},i.prototype.setSeatCallback=function(n){for(var t=0;t<this._places.length;t++)this._places[t].setSeatCallback(n)},i.prototype.addPlayer=function(t){if(t){var i=this._placesHash[t.seatId].setMPlayer(t);i instanceof n.MyPlayer?this._myPlayer=i:this._players.push(i)}},i.prototype.removePlayer=function(n){if(this._myPlayer&&n==this._myPlayer.userId){this._placesHash[this._myPlayer.seatId].removePlayer();this._myPlayer.destroy();this._myPlayer=null;return}for(var t=0;t<this._players.length;t++)if(this._players[t].userId==n){this._placesHash[this._players[t].seatId].removePlayer();this._players[t].destroy();this._players.splice(t,1);return}},i.prototype.removeAllPlayers=function(){for(this._myPlayer&&this.removePlayer(this._myPlayer.userId);this._players.length>0;)this.removePlayer(this._players[0].userId);this._players=[]},i.prototype.updatePlaceButtons=function(n){for(var t=0;t<this._places.length;t++)this._places[t].updateButtons(n)},i.prototype.setAddFriendCallback=function(n){for(var r,t=0,i=this._places;t<i.length;t++)r=i[t],r.setAddFriendCallback(n)},i.prototype.updatePlayer=function(n,t){var i=this.getPlayerById(n);i&&i.updateInfo(t)},i.prototype.updatePlayers=function(n){this._myPlayer&&this._myPlayer.updateInfo(n);for(var t=0;t<this._players.length;t++)this._players[t].updateInfo(n)},i.prototype.showPot=function(t){this._potBet.visible=!0;this._potBet.setText(n.StringHelper.shortenNumber(t))},i.prototype.hidePot=function(){this._potBet.visible=!1},i.prototype.showPlayersCards=function(){for(var n=0;n<this._players.length;n++)this._players[n].showCards()},i.prototype.hidePlayersCards=function(){for(var n=0;n<this._players.length;n++)this._players[n].hideCards()},i.prototype.hideMyCards=function(){this._myPlayer&&this._myPlayer.hideCards()},i.prototype.updateDealer=function(n){this._myPlayer&&(this._myPlayer.dealer=this._myPlayer.userId==n);for(var t=0;t<this._players.length;t++)this._players[t].dealer=this._players[t].userId==n},i.prototype.waitBet=function(n,t){var i=this.getPlayerById(n);i&&i.waitBet(t)},i.prototype.clearPlayersWaiting=function(){this._myPlayer&&this._myPlayer.clearWaiting();for(var n=0;n<this._players.length;n++)this._players[n].clearWaiting()},i.prototype.getPlayerById=function(n){if(this._myPlayer&&this._myPlayer.userId==n)return this._myPlayer;for(var t=0;t<this._players.length;t++)if(this._players[t].userId==n)return this._players[t];return null},i.prototype.getPlayersBySeatsID=function(n){var t,i,r;if(this._myPlayer&&this._myPlayer.seatId==n)return this._myPlayer;for(t=0,i=this._players;t<i.length;t++)if(r=i[t],r.seatId==n)return r;return null},i.prototype.returnCards=function(t,i){if(n.Model.me.id!=t){var r=this.getPlayerById(t);r&&r.returnCards(r.toLocal(this._dealerCoords,this),i)}},i.prototype.giveOutCards=function(n){for(var r,i=[],t=0;t<this._players.length;t++)this._players[t].waitNewGame||i.push(this._players[t]);for(r=this.DELAY_GIVE_OUT_CARDS*i.length,t=0;t<i.length;t++)i[t].giveOutCards(i[t].toLocal(this._dealerCoords,this),n,t*this.DELAY_GIVE_OUT_CARDS,r);this._myPlayer&&!this._myPlayer.waitNewGame&&this._myPlayer.showCards()},i.prototype.chipsToPot=function(){for(var t,i,r=0;r<this._players.length;r++)(t=this._players[r].cloneChip(),t)&&(i=this.toLocal(t.position),t.x=i.x,t.y=i.y,this.addChild(t),n.Tweener.to(t,1.2,{x:this._dealerCoords.x-t.width/2,y:this._dealerCoords.y,onComplete:this.destroyChip,onCompleteParams:[t],onCompleteScope:this}));if(this._myPlayer){if(t=this._myPlayer.cloneChip(),!t)return;i=this.toLocal(t.position);t.x=i.x;t.y=i.y;this.addChild(t);n.Tweener.to(t,1.2,{x:this._dealerCoords.x-t.width/2,y:this._dealerCoords.y,onComplete:this.destroyChip,onCompleteParams:[t],onCompleteScope:this})}},i.prototype.giveOutPots=function(t,i){var r=1.2;n.Tweener.delayedCall(r,this.updatePlayers,[{updateStack:!0}],this);i.length<=1?(this._giveOutPotToPlayer(t,!1),this.hidePot()):(this._giveOutPotToPlayer(t,!0),n.Tweener.delayedCall(r,this._giveOutPotToPlayer,[t,!1],this),this.showPot(i[0]),n.Tweener.delayedCall(r,this.hidePot,null,this))},i.prototype._giveOutPotToPlayer=function(t,i){for(var e,f,r,o,u=0;u<t.length;u++)(e=i?t[u].winPot2:t[u].winPot1,e!=0)&&(f=this.getPlayerById(t[u].id),f)&&(r=new n.PlayerBet,r.setIcon(n.MBet.TYPE_CHIP),r.setText("$"+n.StringHelper.shortenNumber(e)),r.expandToRight=!0,r.expand(!0,!0),r.x=this._dealerCoords.x,r.y=this._dealerCoords.y,r.resize(),this.addChild(r),o=this.toLocal(f.position,f),n.Tweener.to(r,1.2,{x:o.x+f.stackPos.x,y:o.y+f.stackPos.y,onComplete:this.destroyChip,onCompleteParams:[r],onCompleteScope:this}))},i.prototype.destroyChip=function(n){n.parent&&n.parent.removeChild(n);n.destroy()},i.prototype.setSize=function(t,i){var r;this._w=t;this._h=i;var e=i*this.MY_PLAYER_HEIGHT_KOEF,u=i*this.PLAYER_HEIGHT_KOEF,f=this._w*this.TABLE_WIDTH_KOEF,o=this._h*this.TABLE_HEIGHT_KOEF;for(this._tableRect=new PIXI.Rectangle(this._w/2-f/2,this._h*this.TABLE_TOP_OFFSET_KOEF,f,o),this._dealerCoords=new PIXI.Point(this._tableRect.x+this.DEALER_COORDS.x*this._tableRect.width,this._tableRect.y+this.DEALER_COORDS.y*this._tableRect.height),n.PlayerBet.setIconSize(u/5),n.PlayerBase.setDealerIconSize(u/5),this._potBet.resize(),n.TablePlace.setParams(this._tableRect,this.PLAYERS_IN_TOP_OFFSET_X,e,u),this._potBet.x=this._dealerCoords.x,this._potBet.y=this._dealerCoords.y,r=0;r<this._places.length;r++)this._places[r].resize()},i.prototype.showWinState=function(){var i,t,r,u;for(console.log("Can't support multiplayers winning"),i=n.Model.table.handRankinkResult.banks[0].players[0],t=0,r=this._players;t<r.length;t++)u=r[t],u.updateWinState(i);this._myPlayer&&this._myPlayer.updateWinState(i)},i.prototype.reset=function(){for(var i=n.Model.table.users.getAll(!0),t=0;t<i.length;t++)this.getPlayerById(i[t].id).hideWinAnimation();this.hidePot();this.hidePlayersCards();this.hideMyCards();this.updateDealer(n.Model.table.dealer.id)},i.prototype.clearGame=function(){this._myPlayer&&this._myPlayer.hideWinAnimation();this.hideMyCards();this.removeAllPlayers();this.hidePot();this.clearPlayersWaiting()},i.prototype.getWidth=function(){return this._w},i.prototype.getHeight=function(){return this._h},i.prototype.destroy=function(){t.prototype.destroy.call(this)},i}(PIXI.Container);n.Table=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var r=t.call(this)||this;return r._w=50,r._h=50,r.clear(),r.beginFill(6684672,1),r.drawRect(0,0,i.SIZE,i.SIZE),r._text=new PIXI.Text("",n.FontsHelper.Text.fontWhite10),r._text.x=r._text.y=10,r.addChild(r._text),r}return __extends(i,t),i.prototype.setPos=function(t,i){this._text.text=t+"\n"+i;this._text.text=n.Model.view.screenWidth+"\n"+n.Model.view.screenHeight;this.x=t;this.y=i},i.prototype.destroy=function(){t.prototype.destroy.call(this);this._text.destroy()},i}(PIXI.Graphics);t.SIZE=50;n.Rect=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this;i.RAISE_VIEW_HEIGHT_KOEF=.6;i.RAISE_VIEW_BOTTOM_OFFSET_KOEF=.25;i.RAISE_VIEW_RIGHT_OFFSET_KOEF=.03;i.TOP_CHIP_SCALE_FACTOR=1.2;i.BUTTON_WIDTH_KOEF=.37;i.BUTTON_X_OFFSET_KOEF=.15;i.BUTTON_TOP_OFFSET_KOEF=.12;i.BUTTON_Y_INTERVAL_KOEF=.05;i.SWYPE_LEFT_OFFSET=.7;i.SWYPE_TOP_OFFSET=.12;i.SWYPE_WIDTH_KOEF=.25;i.SWYPE_HEIGHT_KOEF=.65;i.CUR_BET_FONT_SIZE_KOEF=.1;i.RATIO=.45;i._soundDelay=80;i._soundTime=0;i._w=100;i._h=400;i._labelCurBet=new PIXI.Text("",n.FontsHelper.Text.fontRaiseBet);i._buttonSwypeMax=new n.RaiseViewButton("ALL IN");i._buttonSwypePot=new n.RaiseViewButton("FULL POT");i._buttonSwypeHalfPot=new n.RaiseViewButton("1/2 POT");i._labelSwypeBigBet=new PIXI.Text("1",n.FontsHelper.Text.fontRaiseSwype);i._labelSwypeMediumBet=new PIXI.Text("2",n.FontsHelper.Text.fontRaiseSwype);i._labelSwypeSmallBet=new PIXI.Text("3",n.FontsHelper.Text.fontRaiseSwype);i._minBet=10;i._maxBet=1e3;i._curBet=0;i._pot=0;i._swypeDowned=!1;i._bg=new n.RaiseViewBg;i.addChild(i._bg);i._btnBetInc=new n.ButtonImage("btn_plus_up","btn_plus_up","btn_plus_down");i._btnBetInc.on(n.ButtonBase.EVENT_CLICK,i.onButtonClick,i);i._btnBetDec=new n.ButtonImage("btn_minus_up","btn_minus_up","btn_minus_down");i._btnBetDec.on(n.ButtonBase.EVENT_CLICK,i.onButtonClick,i);i._labelCurBet.anchor.set(.5,.5);i.addChild(i._labelCurBet);i._swypeContainer=new PIXI.Sprite(n.Resources.getTexture("raise_view_bg"));i._swypeContainer.interactive=!0;i.addChild(i._swypeContainer);i._swypeContainerDots=new PIXI.Graphics;i.addChild(i._swypeContainerDots);i._buttonsContainer=new PIXI.Container;i.addChild(i._buttonsContainer);i._buttonsContainer.addChild(i._btnBetInc);i._buttonsContainer.addChild(i._btnBetDec);i._buttonsContainer.addChild(i._buttonSwypePot);i._buttonsContainer.addChild(i._buttonSwypeMax);i._buttonsContainer.addChild(i._buttonSwypeHalfPot);i._labelSwypeBigBet.anchor.set(.5,0);i._labelSwypeMediumBet.anchor.set(.5,0);i._labelSwypeSmallBet.anchor.set(.5,0);i._chipsContainer=new PIXI.Container;i._chipsContainer.name="chips_container";i.addChild(i._chipsContainer);i._swypeContainer.on(n.MouseEvent.MOUSE_DOWN,i.onSwypeDown,i);i._swypeContainer.on(n.MouseEvent.MOUSE_UP,i.onSwypeUp,i);i._swypeContainer.on(n.MouseEvent.MOUSE_OUT,i.onSwypeOut,i);i._swypeContainer.on(n.MouseEvent.MOUSE_OUTSIDE,i.onSwypeOut,i);i._swypeContainer.on(n.MouseEvent.MOUSE_MOVE,i.onSwypeMove,i);i._buttonSwypeMax.on(n.RaiseViewButton.EVENT_CLICK,function(){return i.setBet(i._maxBet)},i);i._buttonSwypePot.on(n.RaiseViewButton.EVENT_CLICK,function(){return i.setBet(n.Model.table.fullPot)},i);i._buttonSwypeHalfPot.on(n.RaiseViewButton.EVENT_CLICK,function(){return i.setBet(n.Model.table.halfOfPot)},i);return i.setMinMaxBets(100,1e4),i.setBet(i._minBet),i.hide(),i}return __extends(i,t),i.prototype.setWidth=function(n){this._w=n;this._h=this._w/this.RATIO;this.redraw()},i.prototype.setHeight=function(n){this._h=n;this._w=this._h*this.RATIO;this.redraw();this.createChips()},i.prototype.redraw=function(){var u,f,e,r;this._bg.setSize(this._w,this._h);this._bg.x=0;var t=this._w*this.BUTTON_WIDTH_KOEF,h=this._w*this.BUTTON_X_OFFSET_KOEF,o=this._h*this.BUTTON_TOP_OFFSET_KOEF,s=this._h*this.BUTTON_Y_INTERVAL_KOEF,i=function(n,t){return(t+s)*(n-1)};for(this._btnBetInc.setWidth(t/2.5,!0),this._btnBetDec.setWidth(t/2.5,!0),this._labelCurBet.style.fontSize=this._w*this.CUR_BET_FONT_SIZE_KOEF,this._labelCurBet.x=this._w/2,this._labelCurBet.y=this._h*.05,this._buttonSwypeMax.setWidth(t,!0),this._buttonSwypePot.setWidth(t,!0),this._buttonSwypeHalfPot.setWidth(t,!0),this._labelSwypeBigBet.style.fontSize=this._w*.2,this._labelSwypeMediumBet.style.fontSize=this._w*.2,this._labelSwypeSmallBet.style.fontSize=this._w*.2,this._buttonsContainer.y=o,this._buttonSwypeMax.y=i(1,this._buttonSwypeMax.height),this._buttonSwypePot.y=i(2,this._buttonSwypePot.height),this._buttonSwypeHalfPot.y=i(3,this._buttonSwypeHalfPot.height),this._btnBetInc.y=i(4,this._buttonSwypePot.height),this._btnBetDec.y=i(5,this._buttonSwypePot.height),this._buttonSwypeMax.x=0,this._buttonSwypePot.x=0,this._buttonSwypeHalfPot.x=0,this._btnBetInc.x=t/2-this._btnBetInc.width/2,this._btnBetDec.x=t/2-this._btnBetDec.width/2,this._swypeContainer.texture=n.Resources.scaleTexture(this._swypeContainer.texture,{width:this._w*this.SWYPE_WIDTH_KOEF,height:this._h*this.SWYPE_HEIGHT_KOEF}),this._swypeContainer.x=this._w*this.SWYPE_LEFT_OFFSET,this._swypeContainer.y=this._h*this.SWYPE_TOP_OFFSET,this._swypeContainerDots.x=this._w*this.SWYPE_LEFT_OFFSET,this._swypeContainerDots.y=this._h*this.SWYPE_TOP_OFFSET,this._swypeContainer.width=this._w*this.SWYPE_WIDTH_KOEF,this._swypeContainer.height=this._h*this.SWYPE_HEIGHT_KOEF,this._swypeContainerDots.clear(),this._buttonsContainer.x=this._swypeContainer.x/2-t/2,this._swypeContainerDots.beginFill(16232015,.5),u=8,f=this._swypeContainer.height/u,r=0;r<u-1;r++)e=f*(r+1),this._swypeContainerDots.drawCircle(this._swypeContainer.width/2,e,this._swypeContainer.width/16);this._swypeContainerDots.endFill();this._labelSwypeBigBet.x=this._swypeContainer.x+this._swypeContainer.width/2;this._labelSwypeBigBet.y=this._swypeContainer.y+this._swypeContainer.height*.18;this._labelSwypeMediumBet.x=this._swypeContainer.x+this._swypeContainer.width/2;this._labelSwypeMediumBet.y=this._swypeContainer.y+this._swypeContainer.height*.4;this._labelSwypeSmallBet.x=this._swypeContainer.x+this._swypeContainer.width/2;this._labelSwypeSmallBet.y=this._swypeContainer.y+this._swypeContainer.height*.67;this._chipsContainer.x=this._swypeContainer.x;this._chipsContainer.y=this._swypeContainer.y;this.setBet(this._curBet)},i.prototype.onButtonClick=function(t){var i=n.Model.table.betStep;t===this._btnBetInc?this.setBet(this._curBet+i):t===this._btnBetDec&&this.setBet(this._curBet-i)},i.prototype.onSwypeMove=function(t){if(this._swypeDowned){var r=this._swypeContainer.y,s=this._swypeContainer.height-r-0,u=t.data.getLocalPosition(this._swypeContainer.parent),i=1-(u.y-r)/this._swypeContainer.height;i=Math.max(0,Math.min(i,1));var f=Math.ceil((this._maxBet-this._minBet)/n.Model.table.betStep),e=Math.round(i*f)*n.Model.table.betStep,o=this._minBet+e;this.setBet(o)}},i.prototype.setMinMaxBets=function(n,t){this._minBet=n;this._maxBet=t;this.setBet(this._minBet);this._labelSwypeBigBet.text="$"+(this._minBet+(this._maxBet-this._minBet)*3/4).toFixed();this._labelSwypeMediumBet.text="$"+(this._minBet+(this._maxBet-this._minBet)/2).toFixed();this._labelSwypeSmallBet.text="$"+(this._minBet+(this._maxBet-this._minBet)/4).toFixed()},i.prototype.setPot=function(n){console.debug("setPot("+n+")");this._pot=n},i.prototype.setBet=function(t){var r,i,u;if(console.debug("setBet("+t+")"),this._curBet=Math.max(this._minBet,Math.min(t,this._maxBet)),this._chipsContainer.children.length!=0){r=this._maxBet>this._minBet?(this._curBet-this._minBet)/(this._maxBet-this._minBet):1;this._btnBetInc.disabled=Math.abs(r-1)<1e-8;this._btnBetDec.disabled=r<1e-8;this._labelCurBet.text="$"+(this._curBet>>0).toFixed();n.MathHelper.setSeed(100);var e=this._swypeContainer.height*.9,o=7*this._btnBetInc.scale.x,f=Math.max(1,r*e/o);for(i=0;i<this._chipsContainer.children.length;i++)u=this._chipsContainer.getChildAt(i),u.visible=i<f,i<f-1?u.scale.set(1):this._swypeDowned&&u.scale.set(this.TOP_CHIP_SCALE_FACTOR);this.visible&&(new Date).getTime()-this._soundTime>this._soundDelay&&(this._soundTime=(new Date).getTime(),n.Sounds.play(n.SoundsHelper.CHIP_STACK))}},i.prototype.createChips=function(){for(var r,f=this._swypeContainer.height*.9,u=7*this._btnBetInc.scale.x,e=Math.floor(f/u),t,i=0;i<e;i++)i>=this._chipsContainer.children.length?(t=new n.Chip,this._chipsContainer.addChild(t)):t=this._chipsContainer.getChildAt(i),t.setWidth(this._swypeContainer.width),r=this._swypeContainer.width/10,t.x=n.MathHelper.getRandomBySeedMinToMax(-r,r),t.y=this._swypeContainer.height-t.height-u*i+n.MathHelper.getRandomBySeedMinToMax(-1,1);this.setBet(this._curBet)},i.prototype.show=function(){this.visible=!0},i.prototype.hide=function(){this.visible=!1},i.prototype.getSelectedBet=function(){return this._curBet>>0},i.prototype.onSwypeDown=function(n){this._swypeDowned=!0;this.onSwypeMove(n)},i.prototype.onSwypeOut=function(n){this.onSwypeMove(n);this.onSwypeUp()},i.prototype.onSwypeUp=function(){var n,t,i;for(this._swypeDowned=!1,n=0,t=this._chipsContainer.children;n<t.length;n++)i=t[n],i.scale.set(1)},i.prototype.getWidth=function(){return this._w},i.prototype.getHeight=function(){return this._h},i.prototype.destroy=function(){this._btnBetInc.off(n.ButtonBase.EVENT_CLICK,this.onButtonClick,this);this._btnBetDec.off(n.ButtonBase.EVENT_CLICK,this.onButtonClick,this);this._swypeContainer.off(n.MouseEvent.MOUSE_DOWN,this.onSwypeDown,this);this._swypeContainer.off(n.MouseEvent.MOUSE_UP,this.onSwypeUp,this);this._swypeContainer.off(n.MouseEvent.MOUSE_OUT,this.onSwypeOut,this);this._swypeContainer.off(n.MouseEvent.MOUSE_OUTSIDE,this.onSwypeOut,this);this._swypeContainer.off(n.MouseEvent.MOUSE_MOVE,this.onSwypeMove,this);t.prototype.destroy.call(this,{children:!0})},i}(PIXI.Container);n.RaiseView=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this,n.Resources.getTexture("light"))||this;return i._fadeTime=1,i._rotationSpeed=Math.PI/2,i}return __extends(i,t),i.alloc=function(){return i._lightsPool.alloc()},i.prototype.init=function(t,i){this.width=this.height=i;this.alpha=1;this.rotation=0;this.anchor.set(.5,.5);var r=t+this._fadeTime;n.Tweener.to(this,r,{rotation:this._rotationSpeed*r});n.Tweener.delayedCall(t,this.fadeOut,null,this)},i.prototype.fadeOut=function(){n.Tweener.to(this,this._fadeTime,{alpha:0,onComplete:this.destroy,onCompleteScope:this})},i.prototype.destroy=function(){n.Tweener.killTweensOf(this);n.Tweener.killDelayedCallsTo(this.fadeOut,this);this.parent&&this.parent.removeChild(this);i._lightsPool.free(this)},i}(PIXI.Sprite);t._lightsPool=new n.ObjectPool(t);n.Light=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t.call(this)||this;return n.cardOffset=110,n._w=50,n._h=50,n}return __extends(i,t),i.prototype.onResize=function(){this._w=n.Model.view.gameRealWidth*.7;var t=this._w/(this.cardOffset*5);this.scale.set(t);this.x=n.Model.view.gameRealWidth/2;this.y=n.Model.view.gameRealHeight/1.5},i.prototype.redraw=function(){},i}(PIXI.Container);n.BoardCardsContainer3d=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this,n.Resources.getTexture("chip"))||this;return i._w=100,i._h=61,i}return __extends(i,t),i.prototype.setWidth=function(t){this.texture=n.Resources.getTexture("chip",{width:t,returnNewTexture:!0})},i.prototype.destroy=function(){t.prototype.destroy.call(this)},i}(PIXI.Sprite);n.Chip=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=this,r=n.Resources.getTexture("button_seat");return i=t.call(this,r.orig.width,r.orig.height)||this,i._bgColor=0,i._bg=new PIXI.Graphics,i.addChild(i._bg),i._sprite=new PIXI.Sprite(r),i.addChild(i._sprite),i._spriteAnim=new PIXI.Sprite(n.Resources.getTexture("button_seat_anim")),i._spriteAnim.anchor.set(.5,1),i.addChild(i._spriteAnim),i.startAnimation(),i}return __extends(i,t),i.prototype.startAnimation=function(){this._spriteAnim.alpha=1;this._spriteAnim.scale.set(2,2);n.Tweener.to(this._spriteAnim.scale,.8,{x:.01,y:.01});n.Tweener.to(this._spriteAnim,.8,{alpha:0});n.Tweener.delayedCall(3,this.startAnimation,null,this)},i.prototype.onChangeState=function(){t.prototype.onChangeState.call(this);var i=this._curState==n.ButtonBase.STATE_DOWN?.9:1;this.scale.set(i,i);this._sprite.tint=this._curState==n.ButtonBase.STATE_DOWN?0:16777215;this._bg.alpha=this._curState==n.ButtonBase.STATE_DOWN?.4:.2;this.drawBg()},i.prototype.onResize=function(){this._sprite.texture=n.Resources.getTexture("button_seat",{width:this._w});this._sprite.width=this._w;this._sprite.height=this._h;this._spriteAnim.texture=n.Resources.getTexture("button_seat_anim",{width:this._w});this._spriteAnim.x=this._w/2;this._spriteAnim.y=this._h*.75;this.pivot.set(this._w/2,this._h/2)},i.prototype.setWidth=function(n){t.prototype.setWidth.call(this,n,!0);this.onResize()},i.prototype.drawBg=function(){var r=this._sprite.width/2*(1-i.BORDER_KOEF),t=this._sprite.x+this._sprite.width/2;this._bg.clear();this._bg.beginFill(this._curState===n.ButtonBase.STATE_DOWN?16777215:0);this._bg.drawCircle(t,t,r);this._bg.endFill()},i.prototype.destroy=function(){n.Tweener.killTweensOf(this._spriteAnim);n.Tweener.killTweensOf(this._spriteAnim.scale);n.Tweener.killDelayedCallsTo(this.startAnimation,this);t.prototype.destroy.call(this);this._sprite.destroy();this._bg.destroy()},i}(n.ButtonBase);t.SCALE_OFFSET_KOEF=.025;t.BORDER_KOEF=.066;n.ButtonSeat=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(i,r,u,f,e,o){var s=t.call(this,i)||this;return s._w=50,s._h=50,s._cardsBack=[],s._endCardsRotation=0,s._cards=new n.PlayerCards,s._cont.addChild(s._cards),s.hideCards(),s.setParams(r,u,f,e,o),s}return __extends(i,t),i.prototype.setParams=function(n,t,r,u,f){n-=90;this._cardsPos=new PIXI.Point(Math.cos(n*Math.PI/180)*i.KOEF_CARDS_POS_OFFSET,Math.sin(n*Math.PI/180)*i.KOEF_CARDS_POS_OFFSET);t-=90;this._dealerPos=new PIXI.Point(Math.cos(t*Math.PI/180)*i.KOEF_DEALER_POS_OFFSET,Math.sin(t*Math.PI/180)*i.KOEF_DEALER_POS_OFFSET);r-=90;this._betPos=new PIXI.Point(Math.cos(r*Math.PI/180)*i.KOEF_BET_POS_OFFSET,Math.sin(r*Math.PI/180)*i.KOEF_BET_POS_OFFSET);this.betExpantToRight=u;this._endCardsRotation=f;this.setAvatarSize(this._avatarSize)},i.prototype.showCards=function(){this._mUser.folded||this._mUser.state==n.MUser.STATE_WAIT||(t.prototype.showCards.call(this),this._cont.addChild(this._cards))},i.prototype.returnCards=function(t,i){if(this._cardsBack.length!=0)if(i)this.destroyCardBacks(),this._cardsBack=[];else{for(var r=0;r<this._cardsBack.length;r++)n.Tweener.to(this._cardsBack[r],.3,{x:t.x,y:t.y});n.Tweener.delayedCall(.32,this.returnCards,[t,!0],this)}},i.prototype.destroyCardBacks=function(){for(var t=0;t<this._cardsBack.length;t++)n.Tweener.killTweensOf(this._cardsBack[t]),this._cardsBack[t].destroy(),this._cardsBack[t].parent&&this._cardsBack[t].parent.removeChild(this._cardsBack[t])},i.prototype.giveOutCards=function(t,i,r,u){this.destroyCardBacks();this._cardsBack=[];n.Tweener.killDelayedCallsTo(this._startAnimationGiveOutCards,this);i?(this._startAnimationGiveOutCards(t,!0),this._startAnimationGiveOutCards(t,!0)):(n.Tweener.delayedCall(r,this._startAnimationGiveOutCards,[t,!1],this),n.Tweener.delayedCall(r+u,this._startAnimationGiveOutCards,[t,!1],this))},i.prototype._startAnimationGiveOutCards=function(t,i){var r=new n.CardBack,u;r.rotation=Math.random()*Math.PI;r.setWidth(this._avatarSize/5);r.x=t.x;r.y=t.y;this.addChildAt(r,0);this._cardsBack.push(r);u=this._cardsPos.clone();u.x=this._cardsPos.x*this._avatar.width/2;u.y=this._cardsPos.y*this._avatar.width/2;i?(r.x=u.x,r.y=u.y,r.rotation=this._endCardsRotation+(this._cardsBack.length==1?0:.25)):(n.Sounds.play(n.SoundsHelper.GIVE_OUT_CARD),n.Tweener.to(r,.3,{x:u.x,y:u.y,rotation:this._endCardsRotation+(this._cardsBack.length==1?0:.25)}))},i.prototype.setAvatarSize=function(i){t.prototype.setAvatarSize.call(this,i);this._cards.setSize(i*.7);this._tfStack.fontSize=this._avatar.height/5;this._tfStack.y=this._avatar.y+this._avatar.height+this._avatar.height/20;this._bet.resize();this._bet.setIcon(n.MBet.TYPE_FOLD);for(var r=0;r<this._cardsBack.length;r++)this._cardsBack[r].setWidth(this._avatar.width/5),this._cardsBack[r].x=this._cardsPos.x*this._avatar.width/2,this._cardsBack[r].y=this._cardsPos.y*this._avatar.height/2;this._bet.x=this._betPos.x*this._avatar.width/2;this._bet.y=this._betPos.y*this._avatar.height/2;this._dealerIcon.x=this._dealerPos.x*this._avatar.width/2;this._dealerIcon.y=this._dealerPos.y*this._avatar.height/2;this._winnerLabel.setWidth(i);this._winnerLabel.x=-i*.5+this._cards.x;this._winnerLabel.y=this._cards.height*.5-this._winnerLabel.height;this._winBackEffect.setWidth(i);this._winBackEffect.position.set(0,0)},i.prototype.onCompleteAvatarCounter=function(){this._avatarTimeCounter.visible=!1},i.prototype.destroy=function(){t.prototype.destroy.call(this);n.Tweener.killDelayedCallsTo(this._startAnimationGiveOutCards,this);this.destroyCardBacks()},i}(n.PlayerBase);t.KOEF_CARDS_POS_OFFSET=1.5;t.KOEF_BET_POS_OFFSET=1.6;t.KOEF_DEALER_POS_OFFSET=1.9;n.Player=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t.call(this)||this;return i._expandSize=20,i._textOffset=1,i._maxExpandedWidth=10,i._expandToRight=!0,i._expanded=!1,i._expandAnimating=!1,i._cont=new PIXI.Container,i.addChild(i._cont),i._bg=new PIXI.Graphics,i._cont.addChild(i._bg),i._maskTf=new PIXI.Graphics,i._cont.addChild(i._maskTf),i._icon=new PIXI.Sprite(n.Resources.getTexture(n.MBet.TYPE_BET_GREEN)),i._cont.addChild(i._icon),i._tfBet=new PIXI.Text("",n.FontsHelper.Text.fontWhite10),i._cont.addChild(i._tfBet),i._tfBet.mask=i._maskTf,i.draw(),i.setText(""),i.expandToRight=!0,i}return __extends(i,t),i.setIconSize=function(n){i._iconSize=n},i.prototype.expand=function(t,r){r===void 0&&(r=!1);var u=this._expanded;this._expanded=t;n.Tweener.killTweensOf(this);r?(this._expandSize=t?this._maxExpandedWidth:i._iconSize,this.draw()):(this._expanded&&u&&this.expand(!1,!0),this._expandAnimating=!0,n.Tweener.to(this,.5,{_expandSize:t?this._maxExpandedWidth:i._iconSize,onUpdate:this.draw,onUpdateScope:this,onComplete:this.onCompleteExpandAnimation,onCompleteScope:this}))},i.prototype.onCompleteExpandAnimation=function(){this._expandAnimating=!1},Object.defineProperty(i.prototype,"expandToRight",{set:function(n){this._expandToRight=n;this.updateTextParams()},enumerable:!0,configurable:!0}),i.prototype.resize=function(){n.Tweener.killTweensOf(this);this._textOffset=i._iconSize/5;this._icon.texture=n.Resources.scaleTexture(this._icon.texture,{height:i._iconSize});this._icon.width=this._icon.height=i._iconSize;this._tfBet.style.fontSize=i._iconSize/1.2;this._tfBet.y=i._iconSize/2-this._tfBet.height/2;this.updateTextParams();this.expand(this._expanded,!0);this.draw()},i.prototype.setIcon=function(t){this._icon.texture=n.Resources.getTexture(t,{height:i._iconSize})},i.prototype.setText=function(n){this._tfBet.text=n;this.updateTextParams();this.expand(this._expanded,!this._expandAnimating)},i.prototype.updateTextParams=function(){this._tfBet.x=this._expandToRight?this._icon.x+this._icon.width+this._textOffset:this._icon.x-this._tfBet.width-this._textOffset;this._maxExpandedWidth=this._icon.width+this._tfBet.width+this._textOffset*2},i.prototype.draw=function(){var n=this._expandToRight?0:-this._expandSize+i._iconSize;this._bg.clear();this._bg.beginFill(0,.5);this._bg.drawRoundedRect(n,0,this._expandSize,i._iconSize,i._iconSize/2);this._maskTf.clear();this._maskTf.beginFill(0);this._maskTf.drawRect(n,0,this._expandSize,i._iconSize);this._cont.x=this._expandToRight?-this._bg.width/2:this._bg.width/2-i._iconSize},i.prototype.getClonedSprite=function(){var t=new PIXI.Sprite(n.Resources.scaleTexture(this._icon.texture,{height:i._iconSize})),r;return t.width=t.height=i._iconSize,r=this._icon.parent.toGlobal(this._icon.position),t.x=r.x,t.y=r.y,t},i.prototype.getIconSize=function(){return i._iconSize},i.prototype.destroy=function(){t.prototype.destroy.call(this);n.Tweener.killTweensOf(this);this._bg.destroy();this._maskTf.destroy();this._tfBet.destroy();this._cont.destroy();this._icon.destroy()},i}(PIXI.Container);t._iconSize=10;n.PlayerBet=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(t){function i(){var i=this,r=n.Resources.getOrigSize(n.Resources.getTexture("card_back").baseTexture);return i=t.call(this,n.Resources.getTexture("card_back"))||this,i._w=r.width,i._h=r.height,i.anchor.set(.5,.5),i.cacheAsBitmap=!0,i}return __extends(i,t),i.prototype.onResize=function(){this.cacheAsBitmap=!1;this.texture=n.Resources.getTexture("card_back",{width:this._w},"CardBack");this.width=this._w;this.height=this._h;this.cacheAsBitmap=!0},i.prototype.setWidth=function(n){var t=n/this._w;this._w=n;this._h*=t;this.onResize()},i.prototype.setHeight=function(n){var t=n/this._h;this._h=n;this._w*=t;this.onResize()},i.prototype.getWidth=function(){return this._w},i.prototype.getHeight=function(){return this._h},i.prototype.destroy=function(){t.prototype.destroy.call(this)},i}(PIXI.Sprite);n.CardBack=t})(t=n.Client||(n.Client={}))}(poker||(poker={})),function(n){var t;(function(n){var t=function(n){function t(){var i=n.call(this)||this;return i._width=100,i._height=140,i._showed=!1,i._rotation=Math.PI/2,i._cardValue="1",i._cardTextureBack=!0,i._curAnim=t.ANIM_NONE,i._firstInited=!1,i._offsetAxisX=0,i._curY=0,i}return __extends(t,n),t.prototype.onComplete=function(){console.log("onComplete")},t.prototype.updateRotation=function(){this._cardCont.proj.clear();this._cardCont.updateTransform();this._cardCont.proj.setAxisY(new PIXI.Point(this._offsetAxisX,800),-1);this._shadowCont.proj.clear();this._shadowCont.updateTransform();this._shadowCont.proj.setAxisY(new PIXI.Point(this._offsetAxisX,800),-1);var n=new PIXI.Point;n.x=Math.sin(this._rotation)*1e3;n.y=Math.cos(this._rotation)*1e3;this._cardCont.proj.setAxisX(n,0);this._shadowCont.proj.setAxisX(n,0)},t.prototype.setCard=function(n){this._cardValue=n},t.prototype.showCard=function(n){this._showed!=n&&(this._showed=n)},t.prototype.onClick=function(){this.showCard(!this._showed)},t.prototype.onTimer=function(){this._firstInited||(this._firstInited=!0,this.updateRotation());var n=-100;(this._showed&&this._cardTextureBack||!this._showed&&!this._cardTextureBack||this._curAnim!=t.ANIM_NONE)&&(this._curAnim==t.ANIM_NONE?(this._rotation=Math.PI/2,this._curAnim=t.ANIM_FIRST_PHASE,this._shadowCont.visible=!0):this._curAnim==t.ANIM_FIRST_PHASE?(this._rotation+=PIXI.ticker.shared.elapsedMS/130,this._cardCont.y=n*(this._rotation-Math.PI/2)/(Math.PI/2),this._rotation>=Math.PI&&(this._rotation-=Math.PI,this._curAnim=t.ANIM_SECOND_PHASE,this._card.texture=this._showed?PIXI.Texture.fromImage(Math.random()>.5?"assets/sprites/card_6.png":"assets/sprites/card_j.png"):PIXI.Texture.fromImage("assets/sprites/card_back.png"))):this._curAnim==t.ANIM_SECOND_PHASE&&(this._rotation+=PIXI.ticker.shared.elapsedMS/130,this._cardCont.y=n-n*this._rotation/(Math.PI/2),this._rotation>=Math.PI/2&&(this._rotation=Math.PI/2,this._curAnim=t.ANIM_NONE,this._cardTextureBack=!this._showed,this._cardCont.y=0,this._shadowCont.visible=!1)),this.updateRotation())},t.prototype.setHeight=function(){},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.destroy=function(){n.prototype.destroy.call(this);PIXI.ticker.shared.remove(this.onTimer,this);this._cardCont.destroy();this._card.destroy();this._shadowCont.destroy();this._shadow.destroy()},t}(PIXI.Container);t.ANIM_NONE=1;t.ANIM_FIRST_PHASE=2;t.ANIM_SECOND_PHASE=3;n.BoardCard3d=t})(t=n.Client||(n.Client={}))}(poker||(poker={}));